{"version":3,"sources":["webpack://Kandy/webpack/universalModuleDefinition","webpack://Kandy/webpack/bootstrap","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@babel/runtime/helpers/esm/extends.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@kandy-io/sdp-handlers/src/codecRemover.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@kandy-io/sdp-handlers/src/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@redux-saga/core/dist/io-6de156f3.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@redux-saga/core/dist/redux-saga-core.esm.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@redux-saga/core/dist/redux-saga-effects.esm.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@redux-saga/deferred/dist/redux-saga-deferred.esm.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@redux-saga/delay-p/dist/redux-saga-delay-p.esm.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@redux-saga/is/dist/redux-saga-is.esm.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@redux-saga/symbols/dist/redux-saga-symbols.esm.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@stamp/compose/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@stamp/core/assign.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@stamp/core/merge.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@stamp/is/array.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@stamp/is/composable.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@stamp/is/function.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@stamp/is/object.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@stamp/is/plain-object.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/@stamp/is/stamp.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/array/from.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/json/stringify.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/map.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/object/assign.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/object/create.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/object/define-properties.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/object/entries.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/object/freeze.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/object/keys.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/object/values.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/promise.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/reflect/set.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/set.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/symbol.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/core-js/symbol/iterator.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/helpers/extends.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/babel-runtime/helpers/objectWithoutProperties.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/base-64/base64.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/array/from.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/json/stringify.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/map.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/object/assign.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/object/create.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/object/define-properties.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/object/entries.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/object/freeze.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/object/keys.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/object/values.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/promise.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/reflect/set.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/set.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/symbol/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/fn/symbol/iterator.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_a-function.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_add-to-unscopables.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_an-instance.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_an-object.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_array-from-iterable.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_array-includes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_array-methods.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_array-species-constructor.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_array-species-create.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_classof.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_cof.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_collection-strong.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_collection-to-json.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_collection.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_core.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_create-property.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_ctx.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_defined.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_descriptors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_dom-create.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_enum-bug-keys.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_enum-keys.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_export.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_fails.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_for-of.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_global.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_has.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_hide.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_html.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_ie8-dom-define.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_invoke.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_iobject.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_is-array-iter.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_is-array.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_is-object.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_iter-call.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_iter-create.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_iter-define.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_iter-detect.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_iter-step.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_iterators.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_library.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_meta.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_microtask.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_new-promise-capability.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-assign.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-create.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-dp.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-dps.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-gopd.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-gopn-ext.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-gopn.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-gops.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-gpo.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-keys-internal.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-keys.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-pie.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-sap.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_object-to-array.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_perform.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_promise-resolve.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_property-desc.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_redefine-all.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_redefine.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_set-collection-from.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_set-collection-of.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_set-species.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_set-to-string-tag.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_shared-key.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_shared.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_species-constructor.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_string-at.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_task.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_to-absolute-index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_to-integer.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_to-iobject.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_to-length.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_to-object.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_to-primitive.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_uid.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_user-agent.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_validate-collection.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_wks-define.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_wks-ext.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/_wks.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/core.get-iterator-method.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.array.from.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.array.iterator.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.map.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.object.assign.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.object.create.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.object.define-properties.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.object.freeze.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.object.keys.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.promise.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.reflect.set.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.set.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.string.iterator.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es6.symbol.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es7.map.from.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es7.map.of.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es7.map.to-json.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es7.object.entries.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es7.object.values.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es7.promise.finally.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es7.promise.try.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es7.set.from.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es7.set.of.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es7.set.to-json.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es7.symbol.async-iterator.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/es7.symbol.observable.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/core-js/library/modules/web.dom.iterable.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/decode-uri-component/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/eventemitter3/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/invariant/browser.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/just-curry-it/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/jwt-decode/lib/atob.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/jwt-decode/lib/base64_url_decode.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/jwt-decode/lib/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/fp.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/fp/_baseConvert.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/fp/_mapping.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/fp/placeholder.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/lodash/lodash.min.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/p-defer/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/pako/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/pako/lib/deflate.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/pako/lib/inflate.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/pako/lib/utils/common.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/pako/lib/utils/strings.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/pako/lib/zlib/adler32.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/pako/lib/zlib/constants.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/pako/lib/zlib/crc32.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/pako/lib/zlib/deflate.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/pako/lib/zlib/gzheader.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/pako/lib/zlib/inffast.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/pako/lib/zlib/inflate.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/pako/lib/zlib/inftrees.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/pako/lib/zlib/messages.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/pako/lib/zlib/trees.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/pako/lib/zlib/zstream.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/reduce-reducers/es/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/combineActions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/constants.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/createAction.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/createActions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/createCurriedAction.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/handleAction.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/handleActions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/arrayToObject.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/camelCase.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/flattenActionMap.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/flattenReducerMap.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/flattenWhenNode.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/get.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/getLastElement.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/hasGeneratorInterface.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/identity.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/isArray.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/isEmpty.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/isFunction.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/isMap.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/isNil.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/isNull.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/isPlainObject.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/isString.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/isSymbol.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/isUndefined.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/ownKeys.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/toString.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-actions/es/utils/unflattenActionCreators.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-devtools-extension/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-logger/dist/redux-logger.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-saga/dist/redux-saga-core-npm-proxy.esm.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux-saga/dist/redux-saga-effects-npm-proxy.esm.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/redux/es/redux.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/sdp-transform/lib/grammar.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/sdp-transform/lib/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/sdp-transform/lib/parser.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/sdp-transform/lib/writer.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/split-on-first/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/symbol-observable/es/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/symbol-observable/es/ponyfill.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/to-camel-case/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/to-no-case/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/to-space-case/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/utf8/utf8.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/v8n/dist/v8n.esm.js","webpack://Kandy/(webpack)/buildin/global.js","webpack://Kandy/(webpack)/buildin/harmony-module.js","webpack://Kandy/(webpack)/buildin/module.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/node_modules/webrtc-adapter/out/adapter_no_edge.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/node_modules/query-string/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/node_modules/strict-uri-encode/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/node_modules/uuid/dist/esm-browser/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/node_modules/uuid/dist/esm-browser/md5.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/node_modules/uuid/dist/esm-browser/nil.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/node_modules/uuid/dist/esm-browser/parse.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/node_modules/uuid/dist/esm-browser/regex.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/node_modules/uuid/dist/esm-browser/rng.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/node_modules/uuid/dist/esm-browser/sha1.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/node_modules/uuid/dist/esm-browser/stringify.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/node_modules/uuid/dist/esm-browser/v1.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/node_modules/uuid/dist/esm-browser/v3.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/node_modules/uuid/dist/esm-browser/v35.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/node_modules/uuid/dist/esm-browser/v4.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/node_modules/uuid/dist/esm-browser/v5.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/node_modules/uuid/dist/esm-browser/validate.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/node_modules/uuid/dist/esm-browser/version.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/callMe/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/callMe/sagas.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/constants.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/interface/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/interface/actions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/interface/api.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/interface/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/interface/name.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/interface/reducers.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/interface/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/noop/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/oldLink/sagas.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/subscription/requests.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/auth/subscription/services.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/constants.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/cpaas/utils/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interfaceNew/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interfaceNew/actions/call.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interfaceNew/actions/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interfaceNew/actions/turn.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interfaceNew/api/call.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interfaceNew/api/callMe.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interfaceNew/api/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interfaceNew/constants.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interfaceNew/eventTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interfaceNew/events.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interfaceNew/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interfaceNew/reducers/call.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interfaceNew/reducers/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interfaceNew/reducers/turn.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interfaceNew/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/interfaceNew/utils.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/link/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/link/requests/calls.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/link/sagas/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/link/sagas/support.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/link/sagas/utils.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/link/utils/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/newCallMe/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/newCallMe/sagas/establish.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/newCallMe/sagas/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/utils/normalization.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/utils/sdp.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/call/utils/state.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callstack/call/dtmf.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callstack/call/establish.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callstack/call/midcall.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callstack/call/negotiation.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callstack/call/notifications.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callstack/call/support.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callstack/sdp/compareMedia.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callstack/sdp/operations.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callstack/sdp/pipeline.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callstack/utils/bandwidth.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callstack/utils/dscp.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callstack/utils/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callstack/utils/sdp.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callstack/webrtc/codecs.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callstack/webrtc/establish.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callstack/webrtc/media.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callstack/webrtc/midcall.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/callstack/webrtc/negotiation.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/common/sdkId.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/common/utils.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/common/validation/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/common/version.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/config/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/config/interface/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/config/interface/actions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/config/interface/api.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/config/interface/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/config/interface/reducers.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/config/interface/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/common/base.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/common/sagas.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/common/websocket.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/interface/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/interface/actions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/interface/api.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/interface/effects.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/interface/eventTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/interface/events.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/interface/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/interface/name.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/interface/reducers.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/interface/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/connectivity/link/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/constants.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/docs/docs.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/errors/codes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/errors/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/events/eventEmitter.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/events/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/events/interface/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/events/interface/actions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/events/interface/api.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/events/interface/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/events/interface/reducers.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/factory.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/actions/actionHandler.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/actions/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/actions/transformers.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/actions/utils.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/config.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/docs.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/interface/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/interface/actions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/interface/api.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/interface/reducers.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/interface/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/plugin.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/logs/sagas.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/notifications/interface/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/notifications/interface/actions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/notifications/interface/api.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/notifications/interface/eventTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/notifications/interface/events.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/notifications/interface/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/notifications/interface/reducers.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/notifications/interface/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/notifications/link/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/notifications/link/requests.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/notifications/link/sagas/notification.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/notifications/link/sagas/pushRegistration.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/authorization.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/configs.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/effects.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/interface/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/interface/actions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/interface/eventTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/interface/events.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/interface/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/makeRequest.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/sagas.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/request/utils/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/subscription/interface/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/subscription/interface/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/channels/devices.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/channels/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/channels/media.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/channels/mediaManager.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/channels/session.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/channels/sessionManager.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/channels/track.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/channels/trackManager.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/interface/actionTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/interface/actions/devices.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/interface/actions/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/interface/actions/media.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/interface/actions/misc.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/interface/actions/sessions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/interface/actions/tracks.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/interface/api/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/interface/api/media.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/interface/eventTypes.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/interface/events/devices.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/interface/events/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/interface/events/tracks.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/interface/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/interface/reducers/browser.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/interface/reducers/devices.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/interface/reducers/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/interface/reducers/media.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/interface/reducers/sessions.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/interface/reducers/tracks.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/interface/selectors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/sagas/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/sagas/logs.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/kandy/src/webrtc/sagas/media.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/logger/src/constants.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/logger/src/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/logger/src/logHandler.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/logger/src/logManager.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/logger/src/logger.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/logger/src/timer.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/logger/src/validation.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/node_modules/uuid/dist/esm-browser/bytesToUuid.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/node_modules/uuid/dist/esm-browser/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/node_modules/uuid/dist/esm-browser/md5.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/node_modules/uuid/dist/esm-browser/rng.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/node_modules/uuid/dist/esm-browser/sha1.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/node_modules/uuid/dist/esm-browser/v1.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/node_modules/uuid/dist/esm-browser/v3.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/node_modules/uuid/dist/esm-browser/v35.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/node_modules/uuid/dist/esm-browser/v4.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/node_modules/uuid/dist/esm-browser/v5.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/config.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/events/icecandidate.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/events/iceconnectionstatechange.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/events/icegatheringstatechange.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/events/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/events/negotiationneeded.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/events/signalingstatechange.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/events/track.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/methods/addIceCandidate.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/methods/addTrack.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/methods/close.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/methods/createAnswer.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/methods/createOffer.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/methods/findReusableTransceiver.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/methods/getState.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/methods/getStats.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/methods/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/methods/removeTrack.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/methods/replaceTrack.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/methods/sendDTMF.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/methods/setLocalDescription.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/methods/setRemoteDescription.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/methods/setTransceiversDirection.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/properties/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/properties/localDescription.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/properties/localTracks.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/properties/remoteDescription.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/properties/remoteTracks.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/properties/remoteTracksActive.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/properties/senderTracks.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/utils/iceCollectionLoop.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/Peer/utils/timer.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/constants.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/interface/index.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/logs.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/managers/deviceManager.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/managers/mediaManager.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/managers/peerManager.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/managers/sessionManager.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/managers/trackManager.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/managers/webrtcManager.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/models/media.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/models/session.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/models/track.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/sdpUtils/extractors.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/sdpUtils/handlers.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/sdpUtils/pipeline.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/sdpUtils/sdpSemantics.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/sdpUtils/transceiverUtils.js","webpack://Kandy//var/jenkins_home/workspace/Kandy.js_beta/packages/webrtc/src/utils.js","webpack://Kandy/../core/basePlugins.js","webpack://Kandy/../core/index.js","webpack://Kandy/./index.js"],"names":["e","t","exports","super_","prototype","constructor","value","enumerable","writable","configurable","r","Object","defineProperty","length","n","call","o","i","a","f","slice","push","apply","u","N","Math","Array","isArray","toString","test","l","c","s","d","p","g","prefilter","normalize","h","y","v","b","lhs","hasOwnProperty","m","rhs","filter","w","x","S","forEach","indexOf","isNaN","path","kind","index","item","F","color","join","groupCollapsed","group","log","text","concat","P","groupEnd","timestamp","duration","String","type","toFixed","logger","actionTransformer","titleFormatter","collapsed","colors","level","diff","started","startedTime","action","prevState","error","took","nextState","k","j","D","E","title","A","O","C","L","T","M","_","arguments","stateTransformer","errorTransformer","predicate","logErrors","diffPredicate","getState","dispatch","console","now","Date","getHours","getMinutes","getSeconds","getMilliseconds","performance","global","window","DeepDiff","observableDiff","applyDiff","applyChange","revertChange","isConflict","noConflict","transformer","defaults","createLogger","default","callMeAuth","defaultOptions","subscription","protocol","server","port","version","service","websocket","v8nValidation","v8n","schema","string","positive","array","every","parseOptions","options","authComponents","sagas","anonymousConnect","anonymousDisconnect","extendSubscription","actionTypes","actions","logManager","getLogger","CONNECT","localStorage","setItem","connectFinished","BasicError","message","config","getAuthConfig","requestOptions","credentials","payload","realm","queryParams","tokenrealm","subscriptionInfo","isAnonymous","info","response","subscribe","platforms","LINK","subscriptionParams","includes","code","authCodes","MISSING_SERVICE","websocketInfo","url","notificationChannel","wsResponse","notificationId","substr","lastIndexOf","username","userInfo","anonUsername","connection","DISCONNECT","getConnectionInfo","disconnect","removeItem","SUBSCRIPTION_STATE","FULL","PARTIAL","NONE","DISCONNECT_REASONS","GONE","LOST_CONNECTION","prefix","SET_CONNECTION_INFO","CONNECTION_OCCURRED","CONNECT_FINISHED","GET_USER_DETAILS","USER_DETAILS_RECEIVED","DISCONNECT_FINISHED","RESUBSCRIPTION_FINISHED","REFRESH_TOKENS","REFRESH_TOKENS_FINISHED","UPDATE_SUBSCRIPTION","UPDATE_SUBSCRIPTION_FINISH","SET_TOKEN","SET_CREDENTIALS","SET_CREDENTIALS_FINISH","AUTHORIZATION_ERROR","connect","setConnectionInfo","connectionOccurred","getUserDetails","userDetailsReceived","disconnectFinished","resubscribeFinished","refreshTokens","refreshTokensFinished","updateSubscription","updateSubscriptionFinished","setTokens","setCredentials","setCredentialsFinished","meta","isSensitive","platform","isSSO","userDetailsResponse","firstName","user_first_name","lastName","user_last_name","photoURL","emailAddress","user_email","reason","attemptNum","accessToken","idToken","password","authname","hmacToken","bearerAccessToken","api","debug","API_LOG_TAG","updateToken","updateConnection","getUserInfo","getConnection","isConnected","isPending","authentication","getServices","subscriptionStates","disconnectReasons","jwt","reducer","name","reducers","next","state","undefined","throw","returnObj","isLostConnection","isVersion4X","startsWith","refreshToken","idTokenPayload","preferred_username","identity","getExposedState","getSubscriptionInfo","getDomain","getIdentity","getAuthScenario","getPlatform","getRequestInfo","pluginState","domain","split","servicesInfo","requested","received","missing","status","services","clientCorrelator","base","requestInfo","CPAAS","baseURL","token","headers","Accept","Authorization","UC","setPlatform","connInfo","baseAuth","expires","init","noopAPI","normalAPI","apiGetters","connectFlow","onSubscriptionGone","onConnectionLostEntry","onConnectionLost","connectivityActionTypes","task","finishOrError","disconnectAction","base64","encode","utf8","INVALID_CREDENTIALS","sessionId","wsOpenOrError","unsubscribe","wsState","getConnectionState","connected","resubTriggers","isOnSSO","linkConnection","resubDelay","pow","expiry","resubscribe","LINK_UPDATE_SUBSCRIPTION_FAIL","takeGoneSubscription","NOTIFICATION_RECEIVED","notificationMessage","eventType","WS_RECONNECT_FAILED","extras","subscribeType","method","body","subscribeRequest","localization","useTurn","notificationType","supported","forceLogOut","statusCode","authorizationResponse","subscribeResponse","LINK_SUBSCRIBE_FAIL","result","subscribedServices","parseSpidrServices","subscriptionURL","LINK_UNSUBSCRIBE_FAIL","unsubResponse","resubResponse","upperReceived","map","toUpperCase","reqService","subscriptions","mapValuesToKeys","source","FCS_CALL_STATES","CALL_STATES_FCS","CALL_STATES","INITIATING","INITIATED","EARLY_MEDIA","RINGING","CANCELLED","CONNECTED","ON_HOLD","ENDED","CALL_MEDIA_STATES","LOCAL_HOLD","REMOTE_HOLD","DUAL_HOLD","OPERATIONS","CHANGE_MEDIA","HOLD_MEDIA","UNHOLD_MEDIA","MUSIC_ON_HOLD","COMPLEX_OPERATIONS","DIRECT_TRANSFER","CONSULTATIVE_TRANSFER","JOIN","COMPLEX_OPERATION_MESSAGES","DIRECT_TRANSFER_SUCCESS","CONSULTATIVE_TRANSFER_SUCCESS","JOIN_SUCCESS","DIRECT_TRANSFER_FAILURE","CONSULTATIVE_TRANSFER_FAILURE","JOIN_FAILURE","STATUS_CODES","CALL_DIRECTION","INCOMING","OUTGOING","WEBRTC_DEVICE_KINDS","audioinput","videoinput","audiooutput","FCS_ICE_MEDIA_STATES","ICE_MEDIA_STATES","getSessionInfoByCallId","validateCallState","sanitizeSdesFromSdp","webRTC","callId","targetCall","getCallById","callCodes","INVALID_PARAM","INVALID_STATE","webrtcSessionId","STATE_DESYNC","session","sessionManager","expected","isSubsetOf","set","whole","differences","prop","newSdp","originalSdp","mLine","media","crypto","fingerprint","callPrefix","MAKE_CALL","PENDING_MAKE_CALL","SESSION_CREATED","MAKE_CALL_FINISH","MAKE_ANONYMOUS_CALL","MAKE_ANONYMOUS_CALL_FINISH","CALL_INCOMING","CALL_RINGING","SESSION_PROGRESS","CALL_CANCELLED","CALL_AUDIT","ANSWER_CALL","ANSWER_CALL_FINISH","REJECT_CALL","REJECT_CALL_FINISH","IGNORE_CALL","IGNORE_CALL_FINISH","CALL_ACCEPTED","END_CALL","END_CALL_FINISH","FORWARD_CALL","FORWARD_CALL_FINISH","PENDING_OPERATION","UPDATE_CALL","CALL_HOLD","CALL_HOLD_FINISH","CALL_UNHOLD","CALL_UNHOLD_FINISH","SET_CUSTOM_PARAMETERS","SEND_CUSTOM_PARAMETERS","SEND_CUSTOM_PARAMETERS_FINISH","ADD_MEDIA","ADD_MEDIA_FINISH","ADD_BASIC_MEDIA","REMOVE_MEDIA","REMOVE_MEDIA_FINISH","REMOVE_BASIC_MEDIA","RENEGOTIATE","RENEGOTIATE_FINISH","SEND_DTMF","SEND_DTMF_FINISH","GET_STATS","GET_STATS_FINISH","PENDING_CONSULTATIVE_TRANSFER","CONSULTATIVE_TRANSFER_FINISH","DIRECT_TRANSFER_FINISH","PENDING_JOIN","JOIN_FINISH","REPLACE_TRACK","REPLACE_TRACK_FINISH","CUSTOM_PARAMETERS_RECEIVED","GET_AVAILABLE_CODECS","AVAILABLE_CODECS_RETRIEVED","CALL_REMOTE_HOLD_FINISH","CALL_REMOTE_UNHOLD_FINISH","REMOTE_ADD_MEDIA_FINISH","REMOTE_REMOVE_MEDIA_FINISH","REMOTE_START_MOH_FINISH","REMOTE_STOP_MOH_FINISH","REMOTE_SLOW_START","turnPrefix","TURN_CHANGED","trackPrefix","TRACK_ADDED","TRACK_REMOVED","callActionHelper","makeCall","sessionCreated","pendingMakeCall","makeCallFinish","makeAnonymousCall","makeAnonymousCallFinish","callIncoming","callRinging","sessionProgress","callCancelled","sendCallAudit","answerCall","answerCallFinish","rejectCall","rejectCallFinish","callAccepted","ignoreCall","ignoreCallFinish","endCall","endCallFinish","holdCall","holdCallFinish","unholdCall","unholdCallFinish","setCustomParameters","sendCustomParameters","sendCustomParametersFinish","customParametersReceived","addMedia","addMediaFinish","addBasicMedia","removeMedia","removeMediaFinish","removeBasicMedia","renegotiate","renegotiateFinish","sendDTMF","sendDTMFFinish","getStats","getStatsFinish","forwardCall","forwardCallFinish","consultativeTransfer","pendingConsultativeTransfer","consultativeTransferFinish","directTransfer","directTransferFinish","pendingJoin","joinFinish","replaceTrack","replaceTrackFinish","pendingOperation","getAvailableCodecs","availableCodecsRetrieved","remoteHoldFinish","remoteUnholdFinish","remoteAddMediaFinish","remoteRemoveMediaFinish","remoteStartMohFinish","remoteStopMohFinish","remoteSlowStart","updateCall","id","params","callee","mediaConstraints","callOptions","customParameters","deferred","callActionsImport","turnActionsImport","callActions","turnActions","turnChanged","servers","callAPI","make","destination","from","audio","audioOptions","video","videoOptions","screenShare","screen","screenOptions","normalizeDestination","participantAddress","reject","answer","ignore","hold","unhold","getAll","getById","end","tracks","startVideo","stopVideo","tone","intertoneGap","trackId","deferredResult","promise","forward","otherCallId","newCallId","setSdpHandlers","sdpHandlers","removeH264Codecs","states","anonymousAPI","otherApi","newCallMeApi","anonAPIs","newLinkAPI","makeAnonymous","context","MAKE","ANSWER","REJECT","IGNORE","END","HOLD","UNHOLD","START_MOH","STOP_MOH","SLOW_START","ENDPOINTS","LOCAL","REMOTE","OP_STATUS","ONGOING","PENDING","OP_TRANSITIONS","START","UPDATE","FINISH","NO_FINISH_OPS","CALL_OPERATION","CALL_STARTED","CALL_JOIN","CALL_STATE_CHANGE","CALL_ADDED_MEDIA","CALL_REMOVED_MEDIA","CALL_NEW_TRACK","CALL_TRACK_ENDED","STATS_RECEIVED","CALL_TRACK_REPLACED","CUSTOM_PARAMETERS","AVAILABLE_CODECS","eventTypes","webrtcActionTypes","callEventHandler","args","stateChangeHandler","prevCall","transition","previous","localHold","remoteHold","callOperationHandler","isLocal","localOp","remoteOp","operation","callEvents","startActionTypesAndOperations","startActionTypeAndOperation","otherCallAction","operationEvents","usedCallIds","newAction","finishActionTypesAndData","finishActionTypeAndData","events","isSlowStart","local","mediaId","newTrackId","oldTrack","oldTrackState","codecs","SESSION_NEW_TRACK","SESSION_TRACK_REMOVED","sdpSemantics","SESSION_TRACK_ENDED","noop","callEnder","startTime","endTime","remoteParticipant","callReducers","newCall","displayNumber","displayName","participantName","to","dscpControls","direction","isCaller","account","wrtcsSessionId","bandwidth","webrtcId","newState","payloadWithoutTransition","callState","callIds","endedCall","isJoinedCall","callReducer","specificCallActions","updatedCall","calls","turn","getCalls","getActiveCalls","getCallByWrtcsSessionId","getCallByWebrtcSessionId","getOptions","getTurnInfo","addTracksToCall","localTracks","remoteTracks","endedStates","find","getOperationMeta","setOperationState","actionType","Error","opType","match","opMeta","parts","validPrefixes","prefixes","shift","validSuffixes","suffixes","pop","err","metaOp","stateProp","current","operationData","isRemote","unsetOperation","currentOp","callsLink","iceServers","iceCollectionDelay","maxIceTimeout","serverTurnCredentials","earlyMedia","resyncOnConnect","mediaBrokerOnly","removeBundling","trickleIceMode","boolean","mediaDevices","peerConnection","warn","iceserver","isPlanB","isNotChrome","getBrowserDetails","browser","pluginInterface","sdpHandlerOptions","deps","managers","browserDetails","wrappedSagas","saga","capabilities","createSession","updateCallRinging","updateCustomParameters","endSession","answerSession","rejectSession","forwardSession","consultativeTransferSessions","directTransferSession","joinSessions","updateSession","getSession","auditCall","updateSessionResponse","linkCallRequest","callInfo","fromAddress","requestBody","sdp","offer","getWebsocketIdResult","getWebsocketId","callMeRequest","notifyChannelId","websocketId","callControlRequest","responseBodyType","sessionData","bodyType","responseType","endUrl","callDispositionRequest","address","otherWrtcsSessionId","firstSessionData","secondSessionData","newWrtcsSessionId","callControlResponse","generateCallUrl","handleLinkCallRequestError","getMessage","userType","userId","requestType","createCall","answerCallEntry","rejectCallEntry","addMediaEntry","removeMediaEntry","addBasicMediaEntry","removeBasicMediaEntry","checkRenegotiationFlagEntry","renegotiationEntry","sendDtmfEntry","incomingCallNotification","sessionProgressNotification","callStatusNotification","callCancelNotification","receiveRemoteOffer","receiveRemoteAnswer","endCallEntry","ignoreCallEntry","callAudit","getSessionsOnWSConnect","getStatsEntry","setTurnCredentials","forwardCallEntry","consultativeTransferEntry","directTransferEntry","joinEntry","replaceTrackEntry","getAvailableCodecsEntry","supportSagas","requests","midcallSagas","checkRenegotiationFlag","sendDtmf","linkIncomingCall","notificationParams","callNotificationParams","sessionParams","remoteName","callerName","remoteNumber","callerDisplayNumber","calleeNumber","calleeDisplayNumber","incomingCall","incomingCallPattern","progressPattern","parseSessionProgress","remoteDisplayNumber","receiveEarlyMedia","statusUpdatePattern","statusPattern","parseStatusNotification","reasonText","remoteInfo","getRemoteParticipant","callStatusUpdateEnded","sessionStatusUpdateEnded","callStatusUpdateRinging","callStatusUpdateFailed","callCancelPattern","handleCallCancel","currentCall","parseOfferNotification","parseCallRequest","receiveOfferPattern","parseAnswerNotification","retryAfter","parseCallResponse","receiveAnswerPattern","offerInactiveMedia","offerFullMedia","actionTypesToDoAuditOn","callStartAuditPattern","WS_CONNECT_FINISHED","getSessions","hasTurnCredentials","turnCredentials","SUBSCRIBE_FINISHED","turnInfo","iceInfo","credential","notification","GENERIC_ERROR","newCallMePlugin","linkCallPlugin","anonymousInit","otherInit","authActions","authActionTypes","anonUser","accountToken","toToken","fromToken","caller","isTokenBased","connectChannel","connectResponse","close","makeAnonymousCallEntry","anonymousCallEnd","failedMakeCallFinish","normalizeSipUri","extractDomainFromAddress","addressString","indexOfAtSymbol","separateAddressAndDomain","defaultDomainString","extractedDomain","extractPrependedData","inputString","prependedDataMatches","extractLeadingSpecialCharacters","potentialLeadingChars","actualLeadingChars","withoutVisualSeparators","replace","isPhoneNumber","cleanNumber","phoneNumberMatch","processAddress","processDomain","domainString","trim","resultingAddressAndDomain","prepend","leadingChars","setMediaInactive","hasMediaFlowing","hasMusicOnHold","regex","objectSdp","sdpTransform","parse","isVideoInactive","isAudioInactive","isMusicOnHold","some","getMediaState","hasMedia","isLocalHold","isRemoteHold","isDualHold","playOutBand","playInBand","hasTelephoneEvent","convertTone","splitTones","remoteDesc","canSendOutBand","gap","Number","track","localTrack","stream","AudioContext","createMediaStreamSource","dest","createMediaStreamDestination","newTrack","getAudioTracks","peer","addTones","targetNode","tones","oscillators","createOscillator","oscNode","createGain","gain","scheduleTone","start","dur","frequency","setValueAtTime","toneSequence","toneStart","currentTime","numTones","delayTime","stop","stringSdp","hasCodec","rtp","codec","matches","offerSdp","mediaIds","setupCall","iceCollectionCheck","closeCall","stateError","webrtcInfo","sessionOptions","answerWebrtcSession","answerSDP","generateOffer","INVALID_OFFER","rtcStatsReport","basicError","sdkId","sdk","details","sdkMetaData","iter","keys","rtcStatValue","get","stat","callBandwidth","finalBandwidth","medias","webRtcAddMedia","webRtcRemoveMedia","performRenegotiation","getTracks","getTrackById","mediaTracks","trackObj","otherCall","currentStateError","otherStateError","currentCallRemoteName","otherCallRemoteName","currentCallRemoteAddress","otherCallRemoteAddress","webRtcReplaceTrack","handleUpdateRequest","handleSlowUpdateRequest","handleUpdateResponse","handleSlowUpdateResponse","getCallAction","mediaState","mediaDiff","compareMedia","getOperation","isMediaFlowing","callAction","sameSession","isSameSdpSessionId","recreatePeer","handleOffer","remote","mediaDirections","slowOffer","sessionInfo","answerSdp","receivedAnswer","finishAction","mediaFlowing","undesired","dir","negotiation","uuidV4","customNames","param","setupIncomingCall","updateStatusResponse","customStatusCode","callConfigOptions","runPipeline","step","endpoint","updateCallState","delayMs","activeCalls","activeCall","callStateAfterConnect","sessionStatusResponse","summarizeMedia","compareSummary","MEDIA_TRANSITIONS","STOP","SAME","prevSdpString","sdpString","prevSdp","prevMedia","currMedia","removed","added","changed","unchanged","prevM","currM","sectionId","changes","sending","receiving","sdpMedia","mid","ssrcGroups","mediaDirection","willSend","willReceive","msid","ssrcs","ssrc","attribute","summary","change","wasHold","wasUnhold","was3xHold","was3xUnhold","wasAddMedia","wasRemoveMedia","wasStartMoh","wasStopMoh","wasNoChange","hadMediaFlowing","stoppedFlowing","noActiveMediaAdded","noMediaRemoved","didChange","allStopped","notSending","notReceiving","stillStopped","startedFlowing","sameMedia","noUnchangedSend","onlyStartChanges","onlyStartSending","onlyStartReceiving","wasFlowing","allSendOnly","isFlowing","allSending","wasntRemoved","somethingStarted","addedSending","changedSending","wasntAdded","wasChanged","onlyStopSending","onlyAudioChange","inactiveUnchanged","stopSendAudio","noChange","hasUnchanged","unchangedFlowing","changedFlowing","wasSending","wasReceiving","removedFlowing","addedFlowing","handlers","handler","write","checkBandwidthControls","bandwidthControls","finalBandwidthControls","getTrackDscpMapping","audioTracks","videoTracks","screenTracks","dscpTrackMapping","screenNetworkPriority","screenTrack","audioNetworkPriority","audioTrack","videoNetworkPriority","videoTrack","changeDtlsRoleTo","modifySdpBandwidth","generateEndParams","role","changeDtlsRole","original","setup","generateBandwidthConfigs","limit","currentCallState","endParams","hasSameSessionId","firstSdpSessionId","secondSdpSessionId","errorMsg","webrtcManager","mediaOps","createLocal","rtcConfig","allTracks","eachMedia","screenShareContraints","screenShareMedia","audioConstraints","audioMedia","videoConstraints","videoMedia","errMessage","constraint","USER_MEDIA_ERROR","mediaStates","localTracksToRemove","invalidIndexes","reduce","acc","cur","ind","invalidTracks","noOfTruthyTrackTypes","newTrackKind","key","oldTrackKind","compatibleTrackKinds","newMedias","createLocalError","allNewTracks","newTracks","replaceTrackError","currentDesc","sameId","newRole","errorInfo","mergeValues","toQueryString","autoRestart","forwardAction","normalizeServices","objects","leftValue","rightValue","stringifiedParams","paramParser","stringify","autoRestarting","shouldRestart","extend","function","validation","enums","values","v8nExact","exact","exactValues","passesAnyOf","errorMessages","v8nRule","input","validationErrorMessages","validationResults","testAll","errors","prettyPrint","validationError","startingPath","validationErrorMessageHelper","cause","rule","target","newVEM","ruleMessage","enumName","aOrAn","arg","chain","__","getVersion","configImplementation","PREFIX","CONFIG_UPDATE","SET_SDP_HANDLERS","update","pluginName","configApi","getConfig","updateConfig","newConfigValues","getConfiguration","baseConnectivity","responsibleParty","connCheckResponsibility","CLIENT","eventsMap","wsConnectFlow","websocketLifecycle","serverPingFlow","clientPingFlow","connectWebsocket","chan","WS_ATTEMPT_CONNECT","wsConnectAction","wsInfo","isReconnect","kandy","getConnectivityConfig","wsReconnectFailed","wsConnectFinished","lastContact","emitTask","wsEmitter","pingFlow","SERVER","closeWebsocketPattern","WS_DISCONNECT","closeWebsocket","wsDisconnectFinished","oauthToken","access_token","wsAttemptConnect","ws","maxMissedPings","autoReconnect","timeOfLastPing","pingInterval","getPingInterval","maxIdleDuration","serverPing","RECEIVE_SERVER_PING","WS_DISCONNECT_FINISHED","pingIntervalMillis","connCheck","interval","changePingInterval","connAck","_sendWSMessage","lostConnection","checkConnectivity","timeOfLastPong","shouldCheck","getCheckConnectivity","intervalInSeconds","connCheckMethods","PING_PONG","KEEP_ALIVE","message_type","shouldCheckConnectivity","delayStartTime","serverPong","RECEIVE_SERVER_PONG","timeElapsed","timeUntilNextPing","readyState","send","configs","connectionAttempt","disconnectWebsocketPattern","reconnectLimit","openWebsocket","reconnectTimeLimit","reconnectDelay","reconnectTimeMultiplier","delay","INITIAL_BUFFER_SIZE","WebSocket","validateWS","resolve","onOpen","onopen","onerror","onError","onclose","onmessage","createWsChannel","emit","data","JSON","buffers","expanding","wsChannel","WS_CLOSED","WS_ERROR","CHANGE_CONNECTIVITY_CHECKING","CHANGE_PING_INTERVAL","createWsAction","wsDisconnect","wsClosed","wsError","receiveServerPing","receiveServerPong","changeConnectivityChecking","connectivityApi","getSocketState","enableConnectivityChecking","enable","disconnectWebsocket","responseAction","WS_CHANGE","pinging","connectivity","defaultValues","webSocketOAuthMode","notificationTypes","WEBSOCKET","PUSH","CONNECT_FAIL_WS_ERROR","LINK_EXTEND_SUBSCRIPTION_FAIL","UC_SUBSCRIBE_FAIL","UC_REFRESH_TOKEN_FAIL","UC_CREATE_TOKEN_FAIL","UC_EXTEND_SUBSCRIPTION_FAIL","UC_DISCONNECT_FAIL","UNKNOWN_ERROR","INIT_MEDIA_FAILED","NOT_SUPPORTED","callHistoryCodes","BAD_REQUEST","NOT_FOUND","NOT_AUTHENTICATED","FORBIDDEN","clickToCallCodes","MISSING_ARGS","RESPONSE_ERROR","groupsCodes","MISSING_PARAMETERS","messagingCodes","CREATE_GROUP_FAIL","MARK_READ_FAIL","REMOVE_MEMBERS_FAIL","ADD_MEMBERS_FAIL","SEND_MESSAGE_FAIL","FETCH_MESSAGES_FAIL","FILE_UPLOAD_FAIL","FETCH_CONVERSATIONS_FAIL","INVALID_DESTINATION","INVALID_FILE_PARTS","SET_IS_TYPING_FAIL","mwiCodes","FETCH_MWI_FAIL","sipEventCodes","NOT_PROVISIONED","NOT_SUBSCRIBED","bridgeCodes","INVALID_INPUT","ALREADY_EXISTS","MEDIA_NOT_FOUND","subscriptionCodes","WS_CONNECTION_ERROR","CPAAS_WSREQUEST_FAIL","CPAAS_WSREVOKE_FAIL","CPAAS_WSREFRESH_FAIL","CPAAS_SERVICE_SUB_FAIL","CPAAS_SERVICE_UNSUB_FAIL","CPAAS_UNSUBSCRIBE_FAIL","presenceCodes","INVALID_STATUS","INVALID_ACTIVITY","usersCodes","UNKNOWN","REFRESH_CONTACTS_FAIL","DIRECTORY_REQUEST_FAIL","eventEmitter","eventMap","subscribeMap","strictMode","checkEvent","define","alias","on","listener","off","list","splice","setStrictMode","strict","eventsImplementation","middleware","emitter","EVENTS_ON","EVENTS_OFF","EVENTS_SUBSCRIBE","EVENTS_UNSUBSCRIBE","EVENTS_ALIAS","EVENTS_EMIT","MAP_EVENTS","mapper","then","event","mapEvents","emitEvent","aliasEvent","mapping","eventReducer","aliases","count","factory","factoryDefaults","enableReduxDevTools","reduxDevToolsName","allowProxy","plugins","store","selectors","middlewares","initSagas","taskDescriptor","shared","primitives","destroyedSDK","fn","loggerMiddleware","destroyedSDKMiddleware","plugin","Boolean","selector","mixins","baseStamp","propertyDescriptors","objName","rootSaga","composeMiddleware","composeWithoutDevTools","sagaMiddleware","run","selectState","exposedState","publicAPI","getCapabilities","destroy","cancel","destroyStateReducer","replaceReducer","defaultActionHandler","styleLog","entry","logInfo","logType","messages","style","createActionLogger","setHandler","logActions","setLevel","logLevels","logLevel","actionOptions","INFO","actionOnly","excludeActions","transformers","setupTransformers","actionPipeline","actionTransformers","exposePayloads","removePayloads","passwordHider","isSafe","time","enableFcsLogs","partialDefaultLogActions","manager","SET_LEVEL","LEVELS_CHANGE","SET_HANDLER","HANDLERS_CHANGE","levelsChanged","handlersChanged","levelMap","handlerMap","levels","SILENT","ERROR","WARN","DEBUG","getLevel","getTypes","clonedState","logs","logPlugin","getLoggers","webRTCLogManager","components","setLevelEntry","setHandlerEntry","setLogLevel","setLogHandler","getLevelMap","getHandlerMap","defaultType","loggers","types","getHandler","PROCESS_NOTIFICATION","PROCESS_NOTIFICATION_FINISH","ENABLE_NOTIFICATION_CHANNEL","ENABLE_NOTIFICATION_CHANNEL_FINISH","REGISTER_APPLE_PUSH_NOTIFICATION","REGISTER_ANDROID_PUSH_NOTIFICATION","UNREGISTER_APPLE_PUSH_NOTIFICATION","UNREGISTER_ANDROID_PUSH_NOTIFICATION","websocketNotification","externalNotification","notificationReceived","processNotificationFinish","enableNotificationChannel","registerApplePushNotification","registerAndroidPushNotification","unregisterApplePushNotification","unregisterAndroidPushNotification","enableNotificationChannelFinish","notificationHelper","channel","pushProvider","registration","channelEnabled","notificationApi","process","registerApplePush","voipDeviceToken","standardDeviceToken","bundleId","isProduction","registerAndroidPush","deviceToken","unregisterApplePush","registrationInfo","unregisterAndroidPush","enableWebsocket","NOTI_CHANGE","NOTI_ERROR","NOTI_RECEIVED","enabled","newChannelState","defaultState","getNotificationsInfo","getNotificationConfig","notifications","pushRegistrationSagas","notificationSagas","idCacheLength","incomingCallNotificationMode","pushRegistration","optional","pluginOptions","pushNotificationsRegistration","pushNotificationsDeRegistration","fetchSDP","toLowerCase","bundleID","registrationResponse","responseName","statuscode","partialUrl","enableWebsocketChannelEntry","processNotification","enableWebsocketChannel","queue","externalNotifications","formattedPayload","normalizeSDP","duplicate","eventId","sdpFormat","sdpCompressedBytes","atob","sdpUnCompressedBytes","inflate","fromCharCode","Uint16Array","eventDataResponse","applePushRegistrationEntry","androidPushRegistrationEntry","applePushUnregisterEntry","androidPushUnregisterEntry","registerPushDeviceToken","unregisterPushDeviceToken","linkAuthorization","ucAuthorization","cpaasAuthorization","authIssues","getStatusCode","injectAgentVersionHeader","request","requestSaga","commonOptions","manualOptions","getCommonOptions","requestAction","RESPONSE","requestId","pluginFactory","linkRequest","ucRequest","cpaasRequest","REQUEST","authorizationError","nextRequestId","generateRequestId","REQUEST_ERROR","responseTypes","json","blob","none","contentTypes","jsonType","vdnJsonType","plainTextType","xmlTextType","octetStream","makeRequest","validateOptions","fetchOptions","substring","fetch","makeResponse","ok","statusText","parseBody","contentType","isJson","responseBody","invalidUrlMessage","invalidResponseType","expectedType","apiResponse","httpResponse","watchRequests","authorizations","handleRequest","logOptions","authHeader","__testonly__","getCpaasAgentHeaderValue","useCustomHeader","headerValue","SUBSCRIBE","UNSUBSCRIBE","UNSUBSCRIBE_FINISHED","REGISTER_SUB_SERVICE","PLUGIN_SUBSCRIPTION","PLUGIN_SUBSCRIPTION_FINISHED","PLUGIN_UNSUBSCRIPTION","PLUGIN_UNSUBSCRIPTION_FINISHED","CHANNEL_OPENED","CHANNEL_CLOSED","getSubscriptionConfig","getRegisteredServices","getNotificationChannels","getSubscribedServices","getSubscriptions","getSubscriptionExpiry","getWebsocketConfig","registeredServices","notificationChannels","channelType","currentSub","subConfig","authConfig","watchDeviceEvents","setListeners","managerChannel","checkDevices","devices","deviceActions","devicesChanged","watchManagers","watchTrackManagerEvents","watchSessionManagerEvents","watchMediaManagerEvents","watchMediaEvents","mediaChannel","mediaActions","mediaNewTrack","trackRemoved","mediaTrackRemoved","trackEnded","mediaTrackEnded","mediaStopped","mediaManagerEventsHandler","MEDIA_NEW","newMedia","removedMedia","watchSessionEvents","sessionChannel","sessionActions","sessionNewTrack","sessionTrackRemoved","sessionTrackEnded","trackReplaced","oldTrackId","sessionTrackReplaced","onChange","sessionChange","SESSION_ADDED","sessionAdded","sessionRemoved","watchTrackEvents","trackChannel","trackData","trackSourceMuted","trackActions","trackSourceUnmuted","trackManagerEventsHandler","trackAdded","sourceMuted","muted","initializeStack","webRtcPlugin","miscActions","setBrowserDetails","DEVICES_CHANGE","INITIALIZE_DEVICES","INITIALIZE_DEVICES_FINISH","RENDER_TRACKS","RENDER_TRACKS_FINISH","REMOVE_TRACKS","REMOVE_TRACKS_FINISH","MUTE_TRACKS","MUTE_TRACKS_FINISH","UNMUTE_TRACKS","UNMUTE_TRACKS_FINISH","TRACK_SOURCE_MUTED","TRACK_SOURCE_UNMUTED","sessionPrefix","SESSION_REMOVED","SESSION_CHANGE","SESSION_TRACK_REPLACED","mediaPrefix","MEDIA_REMOVED","MEDIA_CHANGE","MEDIA_NEW_TRACK","MEDIA_TRACK_REMOVED","MEDIA_TRACK_ENDED","SET_BROWSER_DETAILS","initializeDevice","initializeDeviceFinish","browserConstraints","deviceActionsImport","trackActionsImport","sessionActionsImport","mediaActionsImport","miscActionsImport","mediaActionHelper","sessionActionHelper","muteTracks","muteTracksFinish","unmuteTracks","unmuteTracksFinish","renderTracks","renderTracksFinish","removeTracks","removeTracksFinish","trackManagerHelper","trackHelper","trackIds","mediaAPI","getDevices","initializeDevices","constraints","browserContraints","cssSelector","DEVICES_CHANGED","INITIALIZE_DEVICES_ERROR","TRACKS_MUTED","TRACKS_UNMUTED","deviceEvents","trackEvents","camera","microphone","speaker","sessions","mediaReducers","removeTrack","mediaReducer","specificMediaActions","removeSession","sessionReducers","newLocalTracks","sessionReducer","specificSessionActions","containers","removeContainer","container","getSessionById","getMedia","getMediaById","webrtc","updateLogLevelEntry","updateLogHandlerEntry","initLogLevel","mediaSagas","logSagas","updateLogLevel","updateLogHandler","WEBRTC","speakerId","filteredTracks","TRACE","levelValues","logMethods","trace","timeLevel","createManager","levelImport","defaultLogHandler","shortId","shortName","extra","settings","loggerName","logFunc","injectables","shouldLog","timeLog","timer","timeWarn","createTimer","timers","timeEnd","elapsed","checkLevel","checkHandler","upperLevel","PEER","SDP_SEMANTICS","PLAN_B","TRICKLE_ICE","halfTrickleThreshold","isPassedHalfTrickleThreshold","iceCandidate","passedHalf","candidate","iceCandidates","onicecandidate","nativePeer","proxyPeer","iceTimer","HALF","haveHalf","localDescription","timeFromStart","oniceconnectionstatechange","iceConnectionState","onicegatheringstatechange","gatheringState","iceGatheringState","ICE_GATHERING_STATE","GATHERING","COMPLETE","onnegotiationneeded","onsignalingstatechange","ontrack","signalingState","trackManager","nativeTrack","streams","targetStream","MediaStream","add","EventEmitter","RTCPeerConnection","googDscp","customMethods","methods","bind","once","dtlsRole","Proxy","receiver","properties","eventName","addIceCandidate","remoteDescription","catch","addTrack","sender","getStream","createAnswer","preventDtlsRoleChange","removeTrickleIce","ENDPOINT","createOffer","findReusableTransceiver","transceivers","getTransceivers","transceiver","currentDirection","localDesc","senderTracks","senders","getSenders","errMsg","setLocalDescription","setRemoteDescription","setTransceiversDirection","targetTransceiver","callback","insertDTMF","handleToneChangeEvent","dtmf","dtmfSender","ontonechange","desc","dtlsMatch","isStarted","setTimeout","localRole","targetDirection","failures","remoteTracksAll","getLocalDescription","active","getRemoteDescription","getRemoteTracks","getReceivers","iceCollectionLoop","proxyBase","elapsedTime","enoughCandidates","hasReachedTimeout","timerPrototype","_startTime","getTime","NEW","UNIFIED_PLAN","MEDIA_DIR","INACTIVE","SEND_ONLY","RECV_ONLY","SEND_RECV","getWebRTCSupportCapabilities","initialize","navigator","deviceManager","DeviceManager","TrackManager","mediaManager","MediaManager","peerManager","PeerManager","SessionManager","WebRTCManager","models","Track","Media","Peer","pipeline","sdpPipeline","recentDeviceChange","addEventListener","enumerateDevices","device","setupDeviceInitialization","getUserMedia","mediaStream","browserContraintsWorkaround","deviceId","setupMedia","wrappedTrack","remove","size","constraintsWorkaround","createLocalScreen","getDisplayMedia","createRemote","delete","findTrack","allMedia","getTrack","peers","create","Session","targetTrack","setStream","RTCRtpSender","nativeStream","onremovetrack","has","removedTrack","cleanup","renderIn","element","removeFrom","moveTo","peerId","dtlsRoleRecord","latestRemoteDescription","setupPeerEventHandlers","recordNewDtlsRole","remoteSdpSessionId","getLocalTracks","warmup","addTracks","addTrackOrReuseTransceiverPromises","reusableTransceiver","all","audioTransceiverTargetDir","videoTransceiverTargetDir","localTrackIds","remoteTrackIds","getHandlers","description","setParameters","promises","setNetworkPriority","networkPriority","parameters","getParameters","encodings","encoding","processOffer","previousDtlsRole","generateAnswer","processAnswer","findIndex","DTMFOptions","sendOptions","targetPeer","trackToCleanup","oldPeer","newPeer","oldLocalTrack","getPeer","getLatestRemoteDesc","mediaTrack","onended","onmute","onunmute","newStream","streamId","label","document","querySelector","renderer","createElement","height","width","srcObject","src","URL","createObjectURL","autoplay","playsInline","play","setSinkId","appendChild","rendererId","removeChild","mute","unmute","getConstraints","setConstraints","constr","getContainers","getSdpSessionId","oLine","changeMediaDirection","iceOptions","groups","isValid","createPipeline","defaultHandlers","setHandlers","isUnifiedPlan","getSdpSemanticsList","setTransceiverDirection","setDirection","makeSafeForCSS","adapter","commonIndex","pluginInstances","common","defaultPlugins","basePlugins","newCallMe","root","createCodecRemover","module"],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;AClFA;AAAA;AAAe;AACf;AACA,mBAAmB,sBAAsB;AACzC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,C;;;;;;;;AChBA;AAAA;AAAe;AACf;AACA;AACA;AACA;;AAEA,aAAa,uBAAuB;AACpC;AACA;AACA;AACA;;AAEA;AACA,C;;;;;;;;ACbA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,YAAY,SAAS;AACrB;AACO;AACP;AACA,2DAA2D,aAAa;;AAExE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;;;;;;;;ACtGA;AAAA;AAAA;AAAA;AAAA;AACiC;;;;;;;;;ACDjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgH;AACtD;AACuE;AACxF;;AAEzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,IAAI,KAAqC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,kFAAQ;;AAEV;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6lBAA6lB;;AAE7lB;AACA;AACA;AACA;AACA;AACA,QAAQ,IAAqC;AAC7C;AACA;AACA,OAAO;AACP;;AAEA,kDAAkD,+DAAW;AAC7D;AACA,KAAK;AACL;AACA;AACA;AACA,iBAAiB,6DAAS;AAC1B;AACA;AACA,iBAAiB,+DAAW;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM,IAAqC;AAC3C;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,gBAAgB,4DAAK;AACrB;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,iEAAa;AACnC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;;AAEA,kBAAkB,OAAO,sDAAE;AAC3B;;AAEA;AACA,SAAS,6DAAM;AACf;;AAEA;AACA,MAAM,IAAqC;A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AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmJ;AACvF;AACF;AAC0C;AACsF;AAC0d;AACvlB;AAC7B;AACY;AACf;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,iDAAK;AACd;AACA;AACA;AACA,oDAAoD,6DAAQ,qBAAqB,4DAAO,oBAAoB,qEAAc,qBAAqB,2DAAI,wBAAwB,6DAAQ;;AAEnL;AACA;AACA;;AAEA;AACA;;AAEA;AACA,QAAQ,oEAAgB;AACxB;AACA;AACA,yBAAyB,oEAAgB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,yDAAS;AACxB;;AAEA;AACA;;AAEA,MAAM,IAAqC;AAC3C,IAAI,yDAAK,WAAW,qDAAM;AAC1B;;AAEA;AACA;AACA,YAAY,yDAAW;AACvB;;AAEA;AACA,YAAY,yDAAW;AACvB;AACA;;AAEA;AACA,QAAQ,IAAqC;AAC7C;AACA,MAAM,yDAAK,QAAQ,uDAAQ;AAC3B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,QAAQ,IAAqC;AAC7C;AACA,MAAM,yDAAK,KAAK,mDAAI;AACpB;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA,QAAQ,yDAAM;AACd;AACA;AACA;;AAEA;AACA,QAAQ,IAAqC;AAC7C;AACA,MAAM,yDAAK,KAAK,mDAAI;AACpB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,QAAQ,IAAqC;AAC7C;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qCAAqC,SAAS;AAC9C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,yDAAI;AACjB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,QAAQ,2DAAI;AACZ;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH,MAAM,IAAqC;AAC3C,IAAI,yDAAK,cAAc,mDAAI;AAC3B;;AAEA,gBAAgB,yDAAI;;AAEpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,YAAY,yDAAW;AACvB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,QAAQ,IAAqC;AAC7C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,kBAAkB,OAAO,6DAAS;AAClC,QAAQ,IAAqC;AAC7C;AACA,MAAM,yDAAK,QAAQ,uDAAQ;AAC3B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,wCAAwC,SAAS;AACjD;;AAEA,gBAAgB,yDAAK;AACrB;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA,QAAQ,IAAqC;AAC7C;AACA;;AAEA;AACA;AACA;AACA;;AAEA,OAAO,yDAAK;AACZ;AACA;AACA,gBAAgB,yDAAI;AACpB;AACA,MAAM,yDAAM;AACZ,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA,cAAc,+DAAW;AACzB;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,8BAA8B,0DAAM;;AAEpC,MAAM,2DAAI;AACV;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS,yDAAW;AACpB;;AAEA;AACA;AACA;AACA;;AAEA,gCAAgC;AAChC;AACA,yCAAyC;;AAEzC,QAAQ,+DAAQ;AAChB;AACA;;AAEA;;AAEA;AACA;AACA,wBAAwB;;AAExB;AACA;AACA,iBAAiB,8DAAO;AACxB;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAW,yDAAY;AACvB,GAAG;AACH;AACA;AACA,WAAW,yDAAY;AACvB;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,mBAAmB,8DAAO;AAC1B;AACA,KAAK;AACL;AACA;AACA,GAAG,EAAE;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS,6DAAS;AAClB;AACA;;AAEA;AACA;;AAEA;AACA,yBAAyB,+DAAQ;AACjC,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,gCAAgC;AAChC;AACA;;AAEA,QAAQ,8DAAO;AACf;AACA;AACA;;AAEA,QAAQ,+DAAQ;AAChB;AACA,+CAA+C,yDAAW;AAC1D;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,gCAAgC;AAChC;AACA;AACA,UAAU,4DAAK;AACf;AACA,OAAO;AACP;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG,EAAE;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC,yDAAM;AAC1C;;AAEA;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA,MAAM,4DAAO;AACb;AACA;AACA;AACA;;AAEA,yBAAyB,yDAA4B;AACrD;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,sBAAsB,qEAAiB;AACvC;AACA,GAAG,UAAU,4DAAO;AACpB;AACA,GAAG;AACH;AACA;;AAEA,OAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA,OAAO,4DAAO,mBAAmB;AACjC;AACA;;AAEA,uBAAuB,yDAA4B;AACnD;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,4DAAO,YAAY,yDAAgB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,yDAAc;AACjC;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,iDAAI;AAC3B;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE,yDAAiB;AACnB;AACA;;AAEA,4CAA4C,mBAAmB,iDAAI,oCAAoC,iDAAG,mCAAmC,iDAAG,mCAAmC,iDAAI,oCAAoC,iDAAI,oCAAoC,iDAAG,mCAAmC,iDAAI,oCAAoC,iDAAI,oCAAoC,iDAAQ,sCAAsC,iDAAM,sCAAsC,iDAAc,uCAAuC,iDAAW,yCAAyC,iDAAK,qCAAqC,iDAAW,0CAA0C,iDAAW;;AAEtqB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,MAAM,yDAAM;AACZ,kBAAkB,iDAAI;;AAEtB;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,iDAAI;AACnB;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB,yDAAW;;AAE5B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,uBAAuB,yDAAO;AAC9B;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;;AAEZ;AACA,mDAAmD;AACnD,6BAA6B,oCAAoC,GAAG;AACpE,4BAA4B;AAC5B,2BAA2B;AAC3B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA,WAAW,iDAAI;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wBAAwB;;AAExB,UAAU,+DAAW;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB,+DAAW;AAChC;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA,mCAAmC;AACnC;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,QAAQ,IAAqC;AAC7C,MAAM,yDAAK,QAAQ,qDAAM,EAAE,yDAAuB;AAClD;;AAEA,IAAI,yDAAiB;AACrB;;AAEA;AACA;AACA;AACA;;AAEA,kBAAkB,oEAAQ;;AAE1B;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA,wBAAwB,QAAQ,wDAAI;AACpC;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA,MAAM,KAAqC,eAAe,iDAAmB;AAC7E;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB,iDAAI;AACpB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,+DAAW;AACtB;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,GAAG;;;AAGH,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,aAAa,iDAAiD;AAC9D,aAAa,QAAQ;AACrB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,uCAAuC;;AAEvC;AACA,OAAO,UAAU,yDAAY;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,2DAAI,wCAAwC,+DAAW;AACxE;AACA,iBAAiB,+DAAW;AAC5B;AACA,OAAO,UAAU,yDAAe;AAChC;AACA,iBAAiB,2DAAI;AACrB;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA,QAAQ,8DAAO;AACf;AACA,KAAK,UAA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;AAEA;AACA;AACA,WAAW,yDAAI;AACf;;AAEA;AACA;AACA;AACA,aAAa,iDAAI;AACjB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,wFAAwF,aAAa;AACrG;AACA;;AAEA;AACA;AACA,WAAW,yDAAI;AACf;;AAEA;AACA;AACA;AACA,aAAa,iDAAI;AACjB;AACA;;AAEA;AACA;AACA;AACA,aAAa,yDAAM;AACnB;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,wFAAwF,aAAa;AACrG;AACA;;AAEA;AACA;AACA,WAAW,yDAAI;AACf;;AAEA;AACA;AACA;AACA,aAAa,iDAAI;AACjB;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,wFAAwF,aAAa;AACrG;AACA;;AAEA;AACA;AACA;AACA,WAAW,yDAAa,UAAU,yDAAO;AACzC;;AAEA;AACA;AACA;AACA,aAAa,yDAAI;AACjB;AACA;;AAEA;AACA;AACA;AACA,aAAa,iDAAI;AACjB;AACA;;AAEA;AACA;AACA,WAAW,yDAAK;AAChB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA,wFAAwF,aAAa;AACrG;AACA;;AAEA;AACA;AACA,WAAW,iDAAI;AACf;AACA;AACA;AACA,WAAW,yDAAK;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,wFAAwF,aAAa;AACrG;AACA;;AAEA;AACA;AACA;AACA,WAAW,yDAAI;AACf;AACA;AACA;AACA,WAAW,yDAAI;AACf,cAAc,yDAAI;AAClB,gBAAgB,yDAAK;AACrB,KAAK;AACL;;AAEA;AACA;AACA;AACA,aAAa,iDAAI;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,EAAE,yDAAK,mBAAmB,uDAAQ;AAClC,EAAE,yDAAK,SAAS,uDAAQ;AACxB;;AAEA;AACA,MAAM,IAAqC;AAC3C;AACA;;AAEA,wFAAwF,aAAa;AACrG;AACA;;AAEA,SAAS,iDAAI;AACb;AACA;AACA,MAAM,IAAqC;AAC3C;AACA;;AAEA,4FAA4F,eAAe;AAC3G;AACA;;AAEA,SAAS,iDAAI;AACb;AACA;AACA,MAAM,IAAqC;AAC3C;AACA;;AAEA,4FAA4F,eAAe;AAC3G;AACA;;AAEA,SAAS,iDAAI;AACb;AACA;AACA,MAAM,IAAqC;AAC3C,IAAI,yDAAK,UAAU,uDAAQ;AAC3B,IAAI,yDAAK,SAAS,uDAAQ;AAC1B;;AAEA,4FAA4F,eAAe;AAC3G;AACA;;AAEA,SAAS,iDAAI;AACb;AACA;AACA,4FAA4F,eAAe;AAC3G;AACA;;AAEA,SAAS,iDAAI;AACb;AACA;AACA,4FAA4F,eAAe;AAC3G;AACA;;AAEA,SAAS,iDAAI;AACb;;AAEkJ;;;;;;;;;AC7blJ;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA,iBAAiB,YAAY;AAC7B;AACA;;AAEA;AACA;;AAEe,uEAAQ,EAAC;AACG;;;;;;;;;ACnB3B;AAAA;AAA6C;;AAE7C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH,UAAU,0DAAM;AAChB;AACA;;AAEA;AACA;;AAEe,qEAAM,EAAC;;;;;;;;;ACnBtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuE;;AAEvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,wDAAI;AACpB;AACA;AACA,wBAAwB,+DAAW;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,6DAAS;AACpC;AACA;AACA,oBAAoB,sDAAE;AACtB;;AAEgM;;;;;;;;;AC7DhM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEuI;;;;;;;;ACtCvI,cAAc,mBAAO,CAAC,uCAAiB;AACvC,iBAAiB,mBAAO,CAAC,0CAAoB;AAC7C,eAAe,mBAAO,CAAC,wCAAkB;AACzC,cAAc,mBAAO,CAAC,uCAAiB;AACvC,mBAAmB,mBAAO,CAAC,4CAAsB;;AAEjD,aAAa,mBAAO,CAAC,0CAAoB;AACzC,YAAY,mBAAO,CAAC,yCAAmB;;AAEvC;;AAEA;AACA;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA,eAAe,+BAA+B;;AAE9C;AACA;AACA,qEAAqE;;AAErE;;AAEA;AACA;AACA;AACA,mBAAmB,YAAY;AAC/B;AACA;AACA;AACA,WAAW,0DAA0D;AACrE;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,WAAW,WAAW,eAAe;AACrC,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,WAAW;AACtB,WAAW,WAAW;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,SAAS;AACtB,WAAW,gBAAgB;AAC3B,aAAa,MAAM;AACnB;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA,oCAAoC,uCAAuC;AAC3E;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA,aAAa,gBAAgB;AAC7B,aAAa,MAAM;AACnB,cAAc,OAAO;AACrB,cAAc,gBAAgB;AAC9B,cAAc,gBAAgB;AAC9B,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB;;AAEA;AACA;AACA,aAAa,SAAS;AACtB,aAAa,EAAE;AACf,cAAc,WAAW;AACzB;;AAEA;AACA;AACA,aAAa,iBAAiB;AAC9B;;;;;;;;;AC5LA;;;;;;;;ACAA,oBAAoB,mBAAO,CAAC,8CAAwB;AACpD,eAAe,mBAAO,CAAC,wCAAkB;AACzC,cAAc,mBAAO,CAAC,uCAAiB;;AAEvC;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB,iBAAiB;AAClC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;;;;;;;;AClDA;;;;;;;;ACAA;AACA;AACA;AACA,iBAAiB,mBAAO,CAAC,wCAAU;;;;;;;;ACHnC;AACA;AACA;;;;;;;;ACFA;AACA;AACA;AACA;;;;;;;;ACHA;AACA;AACA;AACA;;;;;;;;ACHA,iBAAiB,mBAAO,CAAC,0CAAY;;AAErC;AACA;AACA;;;;;;;;ACJA,kBAAkB,YAAY,mBAAO,CAAC,qDAA+B,sB;;;;;;;ACArE,kBAAkB,YAAY,mBAAO,CAAC,yDAAmC,sB;;;;;;;ACAzE,kBAAkB,YAAY,mBAAO,CAAC,8CAAwB,sB;;;;;;;ACA9D,kBAAkB,YAAY,mBAAO,CAAC,wDAAkC,sB;;;;;;;ACAxE,kBAAkB,YAAY,mBAAO,CAAC,wDAAkC,sB;;;;;;;ACAxE,kBAAkB,YAAY,mBAAO,CAAC,mEAA6C,sB;;;;;;;ACAnF,kBAAkB,YAAY,mBAAO,CAAC,yDAAmC,sB;;;;;;;ACAzE,kBAAkB,YAAY,mBAAO,CAAC,wDAAkC,sB;;;;;;;ACAxE,kBAAkB,YAAY,mBAAO,CAAC,sDAAgC,sB;;;;;;;ACAtE,kBAAkB,YAAY,mBAAO,CAAC,wDAAkC,sB;;;;;;;ACAxE,kBAAkB,YAAY,mBAAO,CAAC,kDAA4B,sB;;;;;;;ACAlE,kBAAkB,YAAY,mBAAO,CAAC,sDAAgC,sB;;;;;;;ACAtE,kBAAkB,YAAY,mBAAO,CAAC,8CAAwB,sB;;;;;;;ACA9D,kBAAkB,YAAY,mBAAO,CAAC,uDAA2B,sB;;;;;;;ACAjE,kBAAkB,YAAY,mBAAO,CAAC,0DAAoC,sB;;;;;;;;ACA7D;;AAEb;;AAEA,cAAc,mBAAO,CAAC,2DAA0B;;AAEhD;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,E;;;;;;;;ACtBa;;AAEb;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,E;;;;;;;ACdA;AACA,CAAC;;AAED;AACA,mBAAmB,KAA0B;;AAE7C;AACA,kBAAkB,KAAyB;AAC3C;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE,IAEU;AACZ;AACA,EAAE,mCAAO;AACT;AACA,GAAG;AAAA,oGAAC;AACJ,EAAE,MAAM,YAUN;;AAEF,CAAC;;;;;;;;;ACpKD,mBAAO,CAAC,mEAAmC;AAC3C,mBAAO,CAAC,8DAA8B;AACtC,iBAAiB,mBAAO,CAAC,qDAAqB;;;;;;;;ACF9C,WAAW,mBAAO,CAAC,qDAAqB;AACxC,uCA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/D;AACA;AACA;;;;;;;;ACLA;AACA,UAAU,mBAAO,CAAC,oDAAQ;AAC1B,UAAU,mBAAO,CAAC,oDAAQ;AAC1B;AACA,2BAA2B,kBAAkB,EAAE;;AAE/C;AACA;AACA;AACA;AACA,GAAG,YAAY;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACtBA,iBAAiB;;AAEjB;AACA;AACA;;;;;;;;;ACJa;AACb,SAAS,mBAAO,CAAC,0DAAc;AAC/B,aAAa,mBAAO,CAAC,8DAAkB;AACvC,kBAAkB,mBAAO,CAAC,6DAAiB;AAC3C,UAAU,mBAAO,CAAC,oDAAQ;AAC1B,iBAAiB,mBAAO,CAAC,4DAAgB;AACzC,YAAY,mBAAO,CAAC,uDAAW;AAC/B,kBAAkB,mBAAO,CAAC,4DAAgB;AAC1C,WAAW,mBAAO,CAAC,0DAAc;AACjC,iBAAiB,mBAAO,CAAC,4DAAgB;AACzC,kBAAkB,mBAAO,CAAC,4DAAgB;AAC1C,cAAc,mBAAO,CAAC,qDAAS;AAC/B,eAAe,mBAAO,CAAC,oEAAwB;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,6BAA6B;AAC7B,0BAA0B;AAC1B,0BAA0B;AAC1B,qBAAqB;AACrB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,8EAA8E,OAAO;AACrF;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACpDA,aAAa,mBAAO,CAAC,uDAAW;AAChC,gBAAgB,mBAAO,CAAC,qDAAS;AACjC;AACA;AACA;AACA,aAAa,mBAAO,CAAC,oDAAQ;;AAE7B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,uCAAuC,sBAAsB,EAAE;AAC/D;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;;;ACpEa;AACb;AACA,gBAAgB,mBAAO,CAAC,2DAAe;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;ACjBa;AACb;AACA,kBAAkB,mBAAO,CAAC,4DAAgB;AAC1C,cAAc,mBAAO,CAAC,4DAAgB;AACtC,WAAW,mBAAO,CAAC,4DAAgB;AACnC,UAAU,mBAAO,CAAC,2DAAe;AACjC,eAAe,mBAAO,CAAC,0DAAc;AACrC,cAAc,mBAAO,CAAC,wDAAY;AAClC;;AAEA;AACA,6BAA6B,mBAAO,CAAC,sDAAU;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,UAAU,EAAE;AAChD,mBAAmB,sCAAsC;AACzD,CAAC,qCAAqC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;;;;;;;ACrCD;AACA,eAAe,mBAAO,CAAC,0DAAc;AACrC,UAAU,mBAAO,CAAC,2DAAe;AACjC,kBAAkB,mBAAO,CAAC,8DAAkB;AAC5C,eAAe,mBAAO,CAAC,2DAAe;AACtC,yBAAy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hC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,mBAAO,CAAC,oDAAQ;AACtB;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACnFA,gBAAgB,mBAAO,CAAC,2DAAe;AACvC;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACLA;AACA,cAAc,mBAAO,CAAC,wDAAY;AAClC,cAAc,mBAAO,CAAC,wDAAY;AAClC;AACA;AACA;;;;;;;;ACLA;AACA,gBAAgB,mBAAO,CAAC,2DAAe;AACvC;AACA;AACA,2DAA2D;AAC3D;;;;;;;;ACLA;AACA,cAAc,mBAAO,CAAC,wDAAY;AAClC;AACA;AACA;;;;;;;;ACJA;AACA,eAAe,mBAAO,CAAC,0DAAc;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACXA;AACA;AACA;AACA;AACA;;;;;;;;ACJA,aAAa,mBAAO,CAAC,uDAAW;AAChC;;AAEA;;;;;;;;ACHA,eAAe,mBAAO,CAAC,0DAAc;AACrC;AACA;AACA;AACA;;;;;;;;ACJA,aAAa,mBAAO,CAAC,uDAAW;AAChC,WAAW,mBAAO,CAAC,qDAAS;AAC5B,cAAc,mBAAO,CAAC,wDAAY;AAClC,aAAa,mBAAO,CAAC,wDAAY;AACjC,qBAAqB,mBAAO,CAAC,0DAAc;AAC3C;AACA,0DAA0D,sBAAsB;AAChF,kFAAkF,wBAAwB;AAC1G;;;;;;;;ACRA,YAAY,mBAAO,C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ACA;AACA;AACA;AACA;AACA;AACA,GAAG,YAAY;AACf,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,mBAAmB,kCAAkC;AACrD,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,eAAe,uCAAuC;AACtD;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,uBAAuB,0BAA0B;AACjD;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH,kBAAkB,yBAAyB,KAAK;AAChD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,wBAAwB;AACxB,gBAAgB;AAChB,oBAAoB;AACpB,wBAAwB;AACxB,gBAAgB;AAChB,oBAAoB;AACpB;AACA,uBAAuB,mBAAO,CAAC,6DAAiB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0DAA0D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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,gCAAgC;AAChG;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,EAAE,mBAAO,CAAC,4DAAgB;AAC1B,EAAE,mBAAO,CAAC,2DAAe;AACzB;;AAEA,sBAAsB,mBAAO,CAAC,wDAAY;AAC1C;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0DAA0D,kBAAkB;;AAE5E;AACA;AACA;AACA,oBAAoB,uBAAuB;;AAE3C,oDAAoD,6BAA6B;;AAEjF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,0BAA0B,eAAe,EAAE;AAC3C,0BAA0B,gBAAgB;AAC1C,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,8CAA8C,YAAY,EAAE;;AAE5D;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,OAAO,QAAQ,iCAAiC;AACpG,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,oCAAoC,mBAAO,CAAC,qDAAS;AACrD;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACrPA;AACA,mBAAO,CAAC,oEAAwB;;;;;;;;ACDhC;AACA,mBAAO,CAAC,kEAAsB;;;;;;;;ACD9B;AACA,cAAc,mBAAO,CAAC,uDAAW;;AAEjC,uCAAuC,SAAS,mBAAO,CAAC,mEAAuB,UAAU;;;;;;;;ACHzF;AACA,cAAc,mBAAO,CAAC,uDAAW;AACjC,eAAe,mBAAO,CAAC,gEAAoB;;AAE3C;AACA;AACA;AACA;AACA,CAAC;;;;;;;;ACRD;AACA,cAAc,mBAAO,CAAC,uDAAW;AACjC,cAAc,mBAAO,CAAC,gEAAoB;;AAE1C;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;ACRD;AACa;AACb,cAAc,mBAAO,CAAC,uDAAW;AACjC,WAAW,mBAAO,CAAC,qDAAS;AAC5B,aAAa,mBAAO,CAAC,uDAAW;AAChC,yBAAyB,mBAAO,CAAC,oEAAwB;AACzD,qBAAqB,mBAAO,CAAC,gEAAoB;;AAEjD,2CAA2C;AAC3C;AACA;AACA;AACA;AACA,8DAA8D,UAAU,EAAE;AAC1E,KAAK;AACL;AACA,8DAA8D,SAAS,EAAE;AACzE,KAAK;AACL;AACA,CAAC,EAAE;;;;;;;;;ACnBU;AACb;AACA,cAAc,mBAAO,CAAC,uDAAW;AACjC,2BAA2B,mBAAO,CAAC,uEAA2B;AAC9D,cAAc,mBAAO,CAAC,wDAAY;;AAElC,+BAA+B;AAC/B;AACA;AACA;AACA;AACA,CAAC,EAAE;;;;;;;;ACXH;AACA,mBAAO,CAAC,oEAAwB;;;;;;;;ACDhC;AACA,mBAAO,CAAC,kEAAsB;;;;;;;;ACD9B;AACA,cAAc,mBAAO,CAAC,uDAAW;;AAEjC,uCAAuC,SAAS,mBAAO,CAAC,mEAAuB,UAAU;;;;;;;;ACHzF,mBAAO,CAAC,2DAAe;;;;;;;;ACAvB,mBAAO,CAAC,2DAAe;;;;;;;;ACAvB,mBAAO,CAAC,kEAAsB;AAC9B,aAAa,mBAAO,CAAC,uDAAW;AAChC,WAAW,mBAAO,CAAC,qDAAS;AAC5B,gBAAgB,mBAAO,CAAC,0DAAc;AACtC,oBAAoB,mBAAO,CAAC,oDAAQ;;AAEpC;AACA;AACA;AACA;AACA;;AAEA,eAAe,yBAAyB;AACxC;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AClBa;AACb,uBAAuB,EAAE;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA,iBAAiB,mBAAmB;AACpC;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA,gBAAgB,oBAAoB;AACpC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;;;;;;;;AC7Fa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,EAAE;AACb,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,gBAAgB;AAC3B,WAAW,SAAS;AACpB,WAAW,EAAE;AACb,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,gBAAgB;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yDAAyD,OAAO;AAChE;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yCAAyC,SAAS;AAClD;AACA;;AAEA;AACA,GAAG;AACH;AACA;;AAEA,eAAe,YAAY;AAC3B;;AAEA;AACA,2DAA2D;AAC3D,+DAA+D;AAC/D,mEAAmE;AACnE,uEAAuE;AACvE;AACA,0DAA0D,SAAS;AACnE;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,WAAW,SAAS;AACpB,WAAW,EAAE;AACb,aAAa,aAAa;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,WAAW,SAAS;AACpB,WAAW,EAAE;AACb,aAAa,aAAa;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,WAAW,SAAS;AACpB,WAAW,EAAE;AACb,WAAW,QAAQ;AACnB,aAAa,aAAa;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,2DAA2D,YAAY;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,aAAa,aAAa;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI,IAA6B;AACjC;AACA;;;;;;;;;AC/UA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM,IAAqC;AAC3C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,0CAA0C,yBAAyB,EAAE;AACrE;AACA;AACA;;AAEA,0BAA0B;AAC1B;AACA;AACA;;AAEA;;;;;;;;AChDA;;AAEA;AACA;AACA;AACA;AACA,sBAAsB;AACtB,sBAAsB;AACtB,sBAAsB;;AAEtB;AACA;AACA;AACA;AACA,wBAAwB;;AAExB;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,gBAAgB;AAChB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACvCA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;;;;;;ACrCA,WAAW,mBAAO,CAAC,2CAAQ;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;;;AChCa;;AAEb,wBAAwB,mBAAO,CAAC,wDAAqB;;AAErD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;;;;;;;ACzBA,QAAQ,mBAAO,CAAC,yCAAc;AAC9B,iBAAiB,mBAAO,CAAC,8CAAmB;;;;;;;;ACD5C,cAAc,mBAAO,CAAC,0CAAY;AAClC,qBAAqB,mBAAO,CAAC,6CAAe;;AAE5C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,aAAa,SAAS;AACtB;AACA;AACA;AACA,sBAAsB,yCAAyC;AAC/D,mBAAmB,yCAAyC;AAC5D;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,aAAa,SAAS;AACtB;AACA;AACA;AACA,sBAAsB,mBAAmB;AACzC,mBAAmB,gBAAgB;AACnC;;AAEA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,SAAS;AACtB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,gBAAgB;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;;AAE1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,SAAS;AACtB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,SAAS;AACtB,aAAa,OAAO;AACpB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,SAAS;AACtB,aAAa,OAAO;AACpB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,SAAS;AACtB,aAAa,OAAO;AACpB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,aAAa;AAC1B,eAAe,OAAO;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,eAAe,SAAS;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,SAAS;AACtB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAuC;;AAEvC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB,aAAa,OAAO;AACpB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB,aAAa,SAAS;AACtB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB,aAAa,SAAS;AACtB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,SAAS;AACtB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;;AAEA;;;;;;;;ACxjBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB,aAAa;AAC7B,oBAAoB,aAAa;AACjC,kBAAkB,aAAa;AAC/B,sBAAsB,aAAa;AACnC,kBAAkB,aAAa;AAC/B,sBAAsB,aAAa;AACnC,iBAAiB,aAAa;AAC9B,oBAAoB,aAAa;AACjC,eAAe,aAAa;AAC5B,mBAAmB,aAAa;AAChC,cAAc,aAAa;AAC3B,mBAAmB,aAAa;AAChC,cAAc,aAAa;AAC3B,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AA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5C,mBAAmB,mBAAO,CAAC,8CAAiB;AAC5C,mBAAmB,mBAAO,CAAC,6CAAgB;;AAE3C;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,UAAU;AAC7C;AACA;AACA,8BAA8B;AAC9B;AACA,qBAAqB,8BAA8B;AACnD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,eAAe;;AAElB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAkB;AAClB,mBAAmB;AACnB,sBAAsB;AACtB,mBAAmB;;AAEnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,cAAc;;AAEjC;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;;AAE/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,qBAAqB,yCAAyC;;AAE9D;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;;;;;;;AC/Ya;;;AAGb,mBAAmB,mBAAO,CAAC,6CAAgB;AAC3C,mBAAmB,mBAAO,CAAC,6CAAgB;AAC3C,mBAAmB,mBAAO,CAAC,8CAAiB;AAC5C,mBAAmB,mBAAO,CAAC,+CAAkB;AAC7C,mBAAmB,mBAAO,CAAC,8CAAiB;AAC5C,mBAAmB,mBAAO,CAAC,6CAAgB;AAC3C,mBAAmB,mBAAO,CAAC,8CAAiB;;AAE5C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,UAAU;AAC7C;AACA;AACA,8BAA8B;AAC9B;AACA,qBAAqB,8BAA8B;AACnD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG,eAAe;;AAElB;;AAEA;AACA;AACA;AACA;AACA,+BAA+B,sBAAsB;AACrD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB;AAClB,mBAAmB;AACnB,sBAAsB;AACtB,mBAAmB;;AAEnB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB,cAAc;AACjC;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,sDAAsD;;AAEtD;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,kEAAkE;;AAEvF;;AAEA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,qBAAqB,yCAAyC;;AAE9D;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;;;;;;;ACtaa;;;AAGb;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,UAAU;;AAE5B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA,4BAA4B,YAAY;AACxC,qBAAqB,8BAA8B;AACnD;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,kCAAkC,OAAO;AACzC;AACA;;AAEA;AACA;AACA;AACA,kCAAkC,OAAO;AACzC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;ACxGA;AACa;;;AAGb,YAAY,mBAAO,CAAC,6CAAU;;;AAG9B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK,wCAAwC,EAAE,aAAa,sBAAsB;AAClF,KAAK,oDAAoD,EAAE,aAAa,0BAA0B;;;AAGlG;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA,kCAAkC;;;AAGlC;AACA;AACA;;AAEA;AACA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,wBAAwB,aAAa;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,sBAAsB,SAAS;AAC/B;AACA;AACA,mBAAmB,qBAAqB,UAAU;;AAElD;AACA;AACA,oBAAoB,0BAA0B,gBAAgB,UAAU;;AAExE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB,0BAA0B,UAAU;;AAExD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB,kBAAkB;;AAE3C;AACA;AACA,kDAAkD,OAAO;;AAEzD;AACA;AACA,gBAAgB,YAAY;;AAE5B;AACA;AACA,kBAAkB,YAAY;;AAE9B;AACA;;;;;;;;;AC1La;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;;;AAGA;;;;;;;;;AClDa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;ACnEa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,SAAS;AAC1B;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA,mBAAmB,SAAS;AAC5B;AACA;;AAEA,sBAAsB;AACtB;;;AAGA;;;;;;;;;AC1Da;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAc,mBAAO,CAAC,6CAAiB;AACvC,cAAc,mBAAO,CAAC,2CAAS;AAC/B,cAAc,mBAAO,CAAC,6CAAW;AACjC,cAAc,mBAAO,CAAC,2CAAS;AAC/B,cAAc,mBAAO,CAAC,8CAAY;;AAElC;AACA;;;AAGA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gCAAgC;AAChC;;;AAGA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0BAA0B;AAC1B,0BAA0B;AAC1B,0BAA0B;AAC1B,0BAA0B;;AAE1B,mBAAmB;;AAEnB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAoB,sBAAsB,qBAAqB,cAAc,EAAE;;;AAG/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB,QAAQ;;AAE1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,YAAY;AAC/B,kBAAkB,UAAU;;AAE5B;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,wBAAwB;AACxB,YAAY;AACZ,UAAU;AACV,+BAA+B;AAC/B,gCAAgC;AAChC;AACA;;AAEA,sBAAsB;;AAEtB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,0BAA0B;;AAE3D;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,aAAa;;AAEb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE;;AAEnE;AACA,yDAAyD;AACzD;;AAEA;;AAEA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,0DAA0D;AAC1D;;AAEA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,aAAa;;AAEb;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,OAAO,EAAE;AACvC;;AAEA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,4DAA4D;AAC5D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;;AAEA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX,mBAAmB;;AAEnB;;AAEA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,OAAO,EAAE;AACvC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oEAAoE;AACpE;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,0DAA0D;AAC1D;;AAEA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB;AACrB,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,mBAAmB;AACnB,kBAAkB;AAClB,0BAA0B;AAC1B,4BAA4B;AAC5B,uBAAuB;AACvB,mBAAmB;AACnB,gBAAgB;AAChB,qBAAqB;AACrB,mBAAmB;AACnB,2BAA2B;AAC3B,uBAAuB;;AAEvB,kBAAkB;AAClB,kBAAkB;AAClB,kBAAkB;;AAElB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB;;AAEnB,iBAAiB;AACjB,qBAAqB;AACrB,qBAAqB;AACrB,qBAAqB;;AAErB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wBAAwB;AACxB,sBAAsB;AACtB,2BAA2B;AAC3B,oBAAoB;AACpB,uBAAuB;AACvB,qBAAqB;;AAErB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB;AACjB,oBAAoB;;AAEpB;AACA;;AAEA,sBAAsB;;AAEtB;;AAEA;;AAEA,2CAA2C;AAC3C,6CAA6C;AAC7C,4CAA4C;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB;AACvB,uBAAuB;AACvB,uBAAuB;;AAEvB;AACA;AACA;;AAEA,0BAA0B;AAC1B,+CAA+C;AAC/C;;AAEA,oBAAoB;AACpB,oBAAoB;AACpB;AACA;AACA;;AAEA,gDAAgD;AAChD;AACA;AACA;;AAEA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB;;AAEpB;AACA;AACA;AACA;AACA;;AAEA,mBAAmB;AACnB,sBAAsB;AACtB,mBAAmB;AACnB,kBAAkB;;;AAGlB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,6BAA6B,uBAAuB;AACpD,8BAA8B,uBAAuB;AACrD;AACA;AACA;;;AAGA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;;AAEA,uBAAuB;AACvB;AACA;AACA;;AAEA;AACA,aAAa;AACb;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,qBAAqB;;AAErB,sCAAsC;;AAEtC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA;;AAEA;AACA;;AAEA,uBAAuB;AACvB,qBAAqB;AACrB;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA,6BAA6B,uBAAuB;AACpD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA,sBAAsB;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;;AAEnC;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,uBAAuB;;AAEvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA,8BAA8B;;AAE9B,2BAA2B,aAAa;AACxC,oBAAoB,qBAAqB;;AAEzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,oDAAoD;AACpD;AACA;;AAEA,aAAa;;AAEb;AACA;AACA,qBAAqB;AACrB,yBAAyB;AACzB,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACj1Da;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;ACzDa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa;AACb,cAAc;;AAEd;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,WAAW;AACX,WAAW;AACX,UAAU;AACV,UAAU;AACV;AACA,WAAW;AACX;AACA,YAAY;AACZ,YAAY;AACZ,YAAY;AACZ;AACA,eAAe;AACf,WAAW;AACX,WAAW;AACX,YAAY;AACZ,YAAY;AACZ,YAAY;AACZ,YAAY;AACZ,WAAW;AACX,SAAS;AACT;AACA,UAAU;AACV,WAAW;AACX,WAAW;AACX;;;AAGA,oBAAoB;;AAEpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,WAAW,GAAG;AACd;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,GAAG;AAClB;AACA;AACA;AACA;;AAEA,wBAAwB;AACxB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,4BAA4B;AAC5B,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA,gCAAgC;AAChC;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,mBAAmB;AACnB,qCAAqC;AACrC;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,mBAAmB;AACnB;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA,qBAAqB;AACrB,uCAAuC;AACvC;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,mBAAmB;AACnB,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,kBAAkB;AAClB;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY;AACZ;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACxVa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB,mBAAO,CAAC,6CAAiB;AAC7C,oBAAoB,mBAAO,CAAC,6CAAW;AACvC,oBAAoB,mBAAO,CAAC,2CAAS;AACrC,oBAAoB,mBAAO,CAAC,6CAAW;AACvC,oBAAoB,mBAAO,CAAC,8CAAY;;AAExC;AACA;AACA;;AAEA;AACA;;;AAGA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;;AAGA,gBAAgB;AAChB,iBAAiB;AACjB,gBAAgB;AAChB,cAAc;AACd,iBAAiB;AACjB,iBAAiB;AACjB,gBAAgB;AAChB,mBAAmB;AACnB,gBAAgB;AAChB,mBAAmB;AACnB,iBAAiB;AACjB,qBAAqB;AACrB,uBAAuB;AACvB,uBAAuB;AACvB,sBAAsB;AACtB,qBAAqB;AACrB,sBAAsB;AACtB,wBAAwB;AACxB,yBAAyB;AACzB,yBAAyB;AACzB,wBAAwB;AACxB,2BAA2B;AAC3B,yBAAyB;AACzB,4BAA4B;AAC5B,0BAA0B;AAC1B,wBAAwB;AACxB,kBAAkB;AAClB,mBAAmB;AACnB,iBAAiB;AACjB,gBAAgB;AAChB,gBAAgB;AAChB,iBAAiB;;AAEjB;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,gBAAgB;AAChB,oBAAoB;AACpB,gBAAgB;AAChB,wBAAwB;AACxB,iBAAiB;AACjB,gBAAgB;AAChB,iBAAiB;AACjB,iBAAiB;AACjB;AACA,mBAAmB;;AAEnB;AACA,iBAAiB;AACjB,iBAAiB;AACjB,iBAAiB;AACjB,iBAAiB;AACjB,qBAAqB;;AAErB;AACA,gBAAgB;AAChB,gBAAgB;;AAEhB;AACA,kBAAkB;AAClB,kBAAkB;;AAElB;AACA,iBAAiB;;AAEjB;AACA,sBAAsB;AACtB,uBAAuB;AACvB,mBAAmB;AACnB,oBAAoB;;AAEpB;AACA,iBAAiB;AACjB,gBAAgB;AAChB,iBAAiB;AACjB,gBAAgB;AAChB,mBAAmB;;AAEnB,mCAAmC;AACnC,mCAAmC;;AAEnC;AACA;AACA;AACA;AACA,yCAAyC;AACzC,qBAAqB;AACrB,sBAAsB;AACtB,gBAAgB;AAChB,gBAAgB;AAChB,eAAe;AACf;;AAEA;AACA;;AAEA,6BAA6B,uBAAuB;AACpD;AACA;AACA,gBAAgB;AAChB,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,6BAA6B,uBAAuB;AACpD;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,6BAA6B,uBAAuB;AACpD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,cAAc,uBAAuB;AACrC,sBAAsB;;AAEtB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB;;AAEpB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,uBAAuB,uBAAuB;AAC9C,uBAAuB,uBAAuB;AAC9C,uBAAuB,uBAAuB;AAC9C,uBAAuB,uBAAuB;;AAE9C,uEAAuE,UAAU;;AAEjF;AACA;AACA,sBAAsB,uBAAuB;;AAE7C,uEAAuE,UAAU;;AAEjF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,iBAAiB;AACzD,sCAAsC,qBAAqB;AAC3D;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB;AACpB,WAAW;AACX,UAAU;AACV,iBAAiB;AACjB,WAAW;AACX,WAAW;AACX,gBAAgB;AAChB,WAAW;AACX,WAAW;AACX;AACA,eAAe;AACf,mCAAmC;AACnC,aAAa;AACb,mCAAmC;AACnC,UAAU;AACV,UAAU;AACV,+BAA+B;AAC/B;;AAEA,QAAQ;;AAER;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA,4BAA4B,qBAAqB,EAAE;;;AAGnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B,iBAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,aAAa;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,iBAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA,oBAAoB,iBAAiB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,oBAAoB,iBAAiB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B,iBAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,iBAAiB;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,iBAAiB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,aAAa;AACzC,4BAA4B,aAAa;AACzC,2BAA2B,iBAAiB;AAC5C,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,iBAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,oEAAoE;AACpE;AACA;AACA;;AAEA,sCAAsC,OAAO;AAC7C;AACA,6BAA6B,iBAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,iBAAiB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,iBAAiB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,iBAAiB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iCAAiC,OAAO;;AAExC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,iBAAiB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,kEAAkE;AAClE;AACA;AACA;;AAEA,kCAAkC,OAAO;AACzC;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA,kDAAkD,OAAO;AACzD;AACA,6BAA6B,iBAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,iBAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,oEAAoE;AACpE;AACA;AACA;;AAEA,oCAAoC,OAAO;AAC3C;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA,kDAAkD,OAAO;AACzD;AACA,6BAA6B,iBAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,iBAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,iBAAiB;AAC1C;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,qBAAqB;AAC3D,8BAA8B,aAAa;AAC3C;AACA;AACA;AACA;AACA,aAAa;AACb,qCAAqC,kBAAkB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,qBAAqB;AACzD;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,0BAA0B,aAAa;AACvC;AACA;AACA;AACA;AACA,SAAS;AACT,iCAAiC,kBAAkB;AACnD;AACA;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,iBAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,iBAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,6BAA6B,uBAAuB;AACpD;AACA,+BAA+B,uBAAuB;;AAEtD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,6DAA6D,uBAAuB;AACpF;;AAEA;AACA;AACA;;AAEA;AACA;AACA,eAAe;AACf,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACnhDa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY,mBAAO,CAAC,6CAAiB;;AAErC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB;;AAEzB,cAAc;AACd,cAAc;AACd,uBAAuB;AACvB,eAAe;AACf,eAAe;AACf,eAAe;AACf,eAAe;AACf,eAAe;AACf,eAAe;AACf,WAAW;AACX,WAAW;AACX,UAAU;AACV,WAAW;AACX,WAAW;AACX,kBAAkB;AAClB;AACA,iBAAiB;AACjB,UAAU;AACV,2CAA2C,eAAe;AAC1D,0CAA0C,eAAe;AACzD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,gBAAgB;AAC/B;AACA;AACA,eAAe,aAAa;AAC5B;AACA;;AAEA;AACA;AACA,qBAAqB,UAAU;AAC/B,2BAA2B,OAAO;AAClC;AACA;AACA;AACA;AACA,kBAAkB;AAClB,sCAAsC,2BAA2B;AACjE,uCAAuC;AACvC,wCAAwC;AACxC;;;AAGA;AACA;AACA;AACA;;AAEA;AACA,aAAa;AACb;AACA,eAAe,WAAW;AAC1B,2BAA2B,OAAO;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,gBAAgB;AAC/B;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,cAAc;AACd;;AAEA;AACA;AACA,eAAe,eAAe;AAC9B;AACA;;AAEA;AACA,eAAe,aAAa;AAC5B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA,GAAG,OAAO;AACV;AACA;AACA;AACA;;AAEA;AACA,WAAW;AACX,UAAU;AACV,YAAY;AACZ,qBAAqB;AACrB,cAAc;AACd,WAAW;AACX,WAAW;AACX,mBAAmB;AACnB,kBAAkB;;AAElB;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB;;AAElB;AACA;AACA;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;ACtVa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AC/Ba;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,YAAY,mBAAO,CAAC,6CAAiB;;AAErC;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8BAA8B;AAC9B;;AAEA;;;AAGA,oBAAoB,sBAAsB,qBAAqB,cAAc,EAAE;;AAE/E;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,wBAAwB;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA,kCAAkC;AAClC,iCAAiC;AACjC,iCAAiC;AACjC,4BAA4B;AAC5B,iCAAiC;;AAEjC;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA,2BAA2B;AAC3B,oBAAoB;AACpB,6BAA6B;AAC7B;;;;AAIA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR,WAAW;AACX,WAAW;AACX,YAAY;AACZ,QAAQ;AACR,mBAAmB;;AAEnB,gBAAgB,kBAAkB;AAClC;AACA;;AAEA;AACA;AACA;AACA,+CAA+C;;AAE/C,0BAA0B,eAAe;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,UAAU,EAAE;;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,QAAQ;;AAE/B;AACA;;AAEA;AACA;AACA;AACA,oCAAoC,QAAQ;AAC5C,uBAAuB;AACvB,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,yBAAyB,YAAY;AACrC;AACA;AACA;AACA,yBAAyB,UAAU;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,mBAAmB;AACnB,qBAAqB;AACrB;AACA,0CAA0C;AAC1C,eAAe;AACf,WAAW;AACX,QAAQ;;AAER;AACA;AACA;AACA,gBAAgB,kBAAkB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa,gBAAgB;AAC7B;AACA,oBAAoB,UAAU;AAC9B;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,QAAQ;AACR,WAAW;AACX,aAAa;AACb,WAAW;AACX,WAAW;AACX;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB,yBAAyB;AACzC;AACA,eAAe,8BAA8B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB,WAAW;AAC3B;AACA,eAAe,8BAA8B;AAC7C;AACA;AACA;AACA;AACA,aAAa;AACb,QAAQ,gBAAgB;AACxB;AACA,eAAe,oCAAoC;AACnD;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,kBAAkB;AAClC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,aAAa;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA,QAAQ;;AAER;AACA,aAAa,aAAa,QAAQ,iCAAiC;AACnE,aAAa,aAAa,QAAQ,iCAAiC;AACnE,aAAa,cAAc,OAAO,+BAA+B;;AAEjE;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,eAAe;AACf,kBAAkB;AAClB;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,YAAY;AACZ;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,OAAO;;AAEtD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,2BAA2B;AAC3B;AACA,WAAW;AACX,SAAS;AACT,aAAa;AACb,WAAW;AACX,YAAY;;AAEZ;AACA;AACA;AACA;AACA;;AAEA;AACA,gCAAgC;AAChC;AACA,OAAO;AACP;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA,kCAAkC;AAClC;AACA,eAAe;AACf;AACA;;AAEA,kCAAkC;AAClC;AACA;AACA;AACA,oCAAoC;AACpC;AACA,OAAO;;AAEP;AACA;AACA;;AAEA,KAAK;AACL;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,oBAAoB;AACpB,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa,WAAW;AACxB;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAuC,QAAQ,OAAO,wBAAwB;;AAE9E;AACA;AACA;AACA,eAAe;AACf;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA,8BAA8B;;AAE9B,6BAA6B;AAC7B;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,mBAAmB;AACnB;AACA,QAAQ;AACR,mBAAmB;AACnB,aAAa;;AAEb,wCAAwC;;AAExC,gBAAgB;AAChB,oBAAoB;AACpB,oBAAoB;;AAEpB;AACA;AACA;AACA;AACA,gDAAgD;;AAEhD,aAAa,eAAe;AAC5B;AACA;;AAEA;AACA;;AAEA,KAAK;AACL;;AAEA,KAAK;;AAEL,+BAA+B,kCAAkC;AACjE;;AAEA,KAAK;AACL;;AAEA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,mBAAmB;AACnB;AACA,QAAQ;AACR,mBAAmB;AACnB,aAAa;;AAEb,wCAAwC;;AAExC,gBAAgB;AAChB,oBAAoB;AACpB,oBAAoB;;AAEpB,+BAA+B;AAC/B;AACA;AACA;AACA;;AAEA,aAAa,eAAe;AAC5B;AACA;;AAEA;AACA;;AAEA,KAAK;AACL,UAAU,iCAAiC,EAAE;;AAE7C,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,kBAAkB;;AAElB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kCAAkC,kBAAkB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA,gCAAgC;AAChC,gBAAgB,gBAAgB;AAChC;AACA;AACA;AACA;;AAEA,wCAAwC;AACxC;;AAEA,wCAAwC;AACxC;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,IAAI,MAAM,GAAG,MAAM,GAAG;AAChD;AACA;AACA;AACA,SAAS,IAAI,KAAK,GAAG,MAAM,GAAG,MAAM,GAAG,MAAM,IAAI,MAAM,IAAI;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc,cAAc;AAC5B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,iBAAiB;AACjB,WAAW;AACX;AACA,wDAAwD;AACxD,uCAAuC;AACvC;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,iBAAiB;AACjB,WAAW;AACX;AACA,4BAA4B;AAC5B,sBAAsB;;AAEtB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,kCAAkC,wBAAwB;;AAE1D,GAAG;AACH;AACA,4CAA4C;AAC5C;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,GAAG;;AAEH;AACA;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,kBAAkB;AAClB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;ACrsCa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;AC9CA;AAAgB;AAChB,iEAAiE,aAAa;AAC9E;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,0FAA0F,eAAe;AACzG;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,CAAC,E;;;;;;;;AC5BD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkC;AACU;AACJ;AACF;AACE;AACA;AACY;;AAEpD;AACA,SAAS,+DAAQ,UAAU,iEAAU,UAAU,+DAAQ;AACvD;;AAEA;AACA,MAAM,8DAAO;AACb;AACA;;AAEA;AACA;;AAEe;AACf,6EAA6E,aAAa;AAC1F;AACA;;AAEA,EAAE,gDAAS;AACX,4CAA4C,uDAAQ,OAAO,gEAAqB;AAChF;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;AChCA;AAAA;AAAA;AAAO;AACA,iC;;;;;;;;ACDP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkC;AACU;AACJ;AACJ;AACrB;AACf;AACA,qBAAqB,uDAAQ;AAC7B;;AAEA,EAAE,gDAAS,CAAC,iEAAU,oBAAoB,6DAAM;AAChD,4BAA4B,6DAAM,uCAAuC,uDAAQ,GAAG,uDAAQ;AAC5F,0FAA0F,aAAa;AACvG;AACA;;AAEA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AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyC;;;;;;;;;ACAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6C;;AAE7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,IAAI;AACf,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA;AACA,WAAW,IAAI;AACf;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA,aAAa,MAAM;AACnB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,IAAI;AACnB;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB,eAAe,SAAS;AACxB;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA,mBAAmB,sBAAsB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB,eAAe;AACf;;;AAGA;AACA;AACA;AACA;;AAEA,iCAAiC;AACjC;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,eAAe,WAAW;AAC1B;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB;AACA,mBAAmB,aAAa;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,OAAO,yDAAY;AACxB;AACA,KAAK;AACL,GAAG;AACH;AACA;;;AAGA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG,QAAQ,yDAAY;AACvB;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,GAAG,aAAa;;AAEhB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,oEAAoE;AACpE;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB;AACA;;;AAGA;AACA;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;;AAEA,QAAQ,IAAqC;AAC7C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,oDAAoD;AACpD;;AAEA;;AAEA,MAAM,IAAqC;AAC3C;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,QAAQ,IAAqC;AAC7C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,oBAAoB,8BAA8B;AAClD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA;AACA,aAAa,gBAAgB;AAC7B;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,YAAY;AACvB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA,sEAAsE,aAAa;AACnF;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,YAAY;AACvB,aAAa,SAAS;AACtB;;AAEA;AACA,4EAA4E,aAAa;AACzF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,8BAA8B;AAC9B;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,IAAI,KAAqC;AACzC;AACA;;AAEgI;;;;;;;;ACtpBhI;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,OAAO,eAAe;AACtB,OAAO,sBAAsB;AAC7B,OAAO,cAAc;AACrB,OAAO,gBAAgB;AACvB,OAAO,gBAAgB;AACvB,OAAO,oBAAoB;AAC3B,OAAO,kBAAkB;AACzB,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,wCAAwC,UAAU;AAClD,gCAAgC;AAChC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,qCAAqC,eAAe,WAAW;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gCAAgC,aAAa;AAC7C,4BAA4B,WAAW;AACvC;AACA;AACA;AACA;AACA,sBAAsB;AACtB,sCAAsC;AACtC,0BAA0B;AAC1B,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,iCAAiC;AACjC,iCAAiC,EAAE;AACnC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;;;;;;;AC7eD,aAAa,mBAAO,CAAC,gDAAU;AAC/B,aAAa,mBAAO,CAAC,gDAAU;;AAE/B;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;;;;;;;;ACVA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,+CAA+C;;AAE/C;;AAEA;AACA;AACA;AACA;;AAEA,cAAc,mBAAO,CAAC,iDAAW;AACjC;;AAEA;AACA;AACA;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA,kBAAkB,kBAAkB;AACpC,uCAAuC;AACvC;;AAEA,mBAAmB,kCAAkC;AACrD;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH,wBAAwB;AACxB;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,6BAA6B;AAClD;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,8EAA8E;AAC9E,GAAG;AACH;;AAEA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;;;;;;;AC3HA,cAAc,mBAAO,CAAC,iDAAW;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP,KAAK;AACL,GAAG;;AAEH;AACA;;;;;;;;;ACjHa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;ACrBA;AAAA;AAAA;AACqC;;AAErC;;AAEA;AACA;AACA,CAAC;AACD;AACA,CAAC;AACD;AACA,CAAC,UAAU,IAA6B;AACxC;AACA,CAAC,MAAM,EAEN;;AAED,aAAa,4DAAQ;AACN,qEAAM,EAAC;;;;;;;;;;AClBtB;AAAA;AAAe;AACf;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;;;;;;;;;ACfA,YAAY,mBAAO,CAAC,2CAAe;;AAEnC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;;AAEA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;ACnBA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;;AAEA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;ACjEA,YAAY,mBAAO,CAAC,wCAAY;;AAEhC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;;AAEA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;ACpBA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,KAAK;AACL,4BAA4B;AAC5B;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,sCAAsC;AACtC;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,CAAC,CAAC,MAA8B,GAAG,SAAc;;;;;;;;;ACzMjD;AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT,OAAO;AACP;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,2FAA2F,aAAa;AACxG;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,uEAAuE,aAAa;AACpF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;;AAEA;AACA,0EAA0E,aAAa;AACvF;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA,OAAO;AACP;AACA;AACA;;AAEe,kEAAG,EAAC;;;;;;;;AC5pBnB;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;ACrBA,qCAAa,GAAG,IAAsD,EAAE,mBAAmB,KAAK,UAAgO,CAAC,aAAa,0BAA0B,mBAAmB,kBAAkB,gBAAgB,UAAU,UAAU,0CAA0C,gBAAgB,OAAC,OAAO,oBAAoB,8CAA8C,kCAAkC,YAAY,YAAY,mCAAmC,iBAAiB,eAAe,sBAAsB,oBAAoB,kDAAkD,WAAW,YAAY,SAAS,SAAS,KAAK;AAC5zB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,oDAAoD,6DAA6D;AACjH,yBAAyB;;AAEzB,CAAC,EAAE,yBAAyB;AAC5B;;AAEA;AACA;AACA,CAAC;AACD;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,uCAAuC,6BAA6B,YAAY,EAAE,OAAO,iBAAiB,mBAAmB,uBAAuB,4EAA4E,EAAE,EAAE,sBAAsB,eAAe,EAAE;;AAE3Q;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF;AACnF;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,CAAC,EAAE,mIAAmI;AACtI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;;AAEA,oGAAoG,mBAAmB,EAAE,mBAAmB,8HAA8H;;AAE1Q;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,uCAAuC,6BAA6B,YAAY,EAAE,OAAO,iBAAiB,mBAAmB,uBAAuB,4EAA4E,EAAE,EAAE,sBAAsB,eAAe,EAAE;;AAE3Q,2CAA2C,kBAAkB,kCAAkC,qEAAqE,EAAE,EAAE,OAAO,kBAAkB,EAAE,YAAY;;AAE/M;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,aAAa;AACb,0BAA0B;AAC1B;;AAEA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,aAAa;AACb,0BAA0B;AAC1B;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,iDAAiD,SAAS,uBAAuB,EAAE;AACnF;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,sCAAsC;AACtC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,mBAAmB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA,CAAC,EAAE,0DAA0D;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED,oGAAoG,mBAAmB,EAAE,mBAAmB,8HAA8H;;AAE1Q;;AAEA;;AAEA;;AAEA,uCAAuC,6BAA6B,YAAY,EAAE,OAAO,iBAAiB,mBAAmB,uBAAuB,4EAA4E,EAAE,EAAE,sBAAsB,eAAe,EAAE;;AAE3Q;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yGAAyG,cAAc;AACvH;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,eAAe;AACf,aAAa;AACb;AACA,gDAAgD;AAChD;AACA;AACA,yDAAyD,sBAAsB,IAAI;AACnF;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;;AAEA,CAAC,EAAE,iBAAiB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED,oGAAoG,mBAAmB,EAAE,mBAAmB,8HAA8H;;AAE1Q;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,uCAAuC,6BAA6B,YAAY,EAAE,OAAO,iBAAiB,mBAAmB,uBAAuB,4EAA4E,EAAE,EAAE,sBAAsB,eAAe,EAAE;;AAE3Q,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA,CAAC,EAAE,sBAAsB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;;AAEA,oGAAoG,mBAAmB,EAAE,mBAAmB,8HAA8H;;AAE1Q;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,uCAAuC,6BAA6B,YAAY,EAAE,OAAO,iBAAiB,mBAAmB,uBAAuB,4EAA4E,EAAE,EAAE,sBAAsB,eAAe,EAAE;;AAE3Q,2CAA2C,kBAAkB,kCAAkC,qEAAqE,EAAE,EAAE,OAAO,kBAAkB,EAAE,YAAY;;AAE/M;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;;AAEA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,mBAAmB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA,CAAC,EAAE,uDAAuD;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA,CAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED,oGAAoG,mBAAmB,EAAE,mBAAmB,8HAA8H;;AAE1Q;;AAEA;;AAEA;;AAEA,uCAAuC,6BAA6B,YAAY,EAAE,OAAO,iBAAiB,mBAAmB,uBAAuB,4EAA4E,EAAE,EAAE,sBAAsB,eAAe,EAAE;;AAE3Q;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC,EAAE,cAAc;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED,oGAAoG,mBAAmB,EAAE,mBAAmB,8HAA8H;;AAE1Q;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,uCAAuC,6BAA6B,YAAY,EAAE,OAAO,iBAAiB,mBAAmB,uBAAuB,4EAA4E,EAAE,EAAE,sBAAsB,eAAe,EAAE;;AAE3Q;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA,2FAA2F,aAAa;AACxG;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,2BAA2B,gBAAgB,gDAAgD;AAC3F;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,gCAAgC;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC,EAAE,cAAc;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED,oGAAoG,mBAAmB,EAAE,mBAAmB,8HAA8H;;AAE1Q;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,kBAAkB,kCAAkC,qEAAqE,EAAE,EAAE,OAAO,kBAAkB,EAAE,YAAY;;AAE/M;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,YAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA,gBAAgB;;AAEhB;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,EAAE;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD,GAAG,IAAI;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA,CAAC,GAAG;;AAEJ,CAAC,GAAG;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB;AACpB,0BAA0B;AAC1B;AACA;AACA;AACA,yDAAyD;AACzD,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL,iDAAiD;AACjD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB,OAAO;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,CAAC,GAAG,EAAE,GAAG;AACT,CAAC;;;;;;;;;AC97GY;AACb,wBAAwB,mBAAO,CAAC,8DAAmB;AACnD,wBAAwB,mBAAO,CAAC,kDAAsB;AACtD,qBAAqB,mBAAO,CAAC,4CAAgB;;AAE7C;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH,wDAAwD,0CAA0C;AAClG;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,yDAAyD,YAAY;;AAErE;AACA;AACA;AACA,oBAAoB,YAAY;AAChC;;AAEA;AACA;AACA,aAAa,0CAA0C;AACvD;;AAEA,WAAW,IAAI,EAAE,YAAY,EAAE,KAAK;AACpC;;;;;;;;;ACzXa;AACb,6EAA6E,2CAA2C;;;;;;;;;ACDxH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwC;AACA;AACA;AACA;AACE;AACQ;AACE;AACE;;;;;;;;;ACPtD;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;;AAElD;;AAEA,mBAAmB,gBAAgB;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iBAAiB,aAAa;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEe,kEAAG,E;;;;;;;;ACtNlB;AAAe,qGAAsC,E;;;;;;;;ACArD;AAAA;AAAqC;;AAErC;AACA,OAAO,4DAAQ;AACf;AACA;;AAEA;AACA,+BAA+B;;AAE/B;AACA;AACA;AACA,oBAAoB;;AAEpB;AACA,oBAAoB;;AAEpB;AACA,oBAAoB;;AAEpB;AACA,oBAAoB;AACpB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,oEAAK,E;;;;;;;;AClCpB;AAAe,6EAAc,EAAE,UAAU,EAAE,eAAe,EAAE,gBAAgB,EAAE,UAAU,GAAG,yCAAyC,E;;;;;;;;ACApI;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACe;AACf;AACA;AACA;;AAEA;AACA,C;;;;;;;;ACbA;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,kDAAkD;;AAElD;;AAEA,mBAAmB,gBAAgB;AACnC;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,kBAAkB,QAAQ;AAC1B;;AAEA,mBAAmB,QAAQ;AAC3B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB,SAAS;AAC5B;;AAEA,mBAAmB,QAAQ;AAC3B;AACA;;AAEA,qBAAqB,SAAS;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,UAAU;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEe,mEAAI,E;;;;;;;;AC/FnB;AAAA;AAAqC;AACrC;AACA;AACA;AACA;;AAEA;;AAEA,eAAe,SAAS;AACxB;AACA;;AAEA;AACA;AACA;AACA;AACA,ygBAAygB;AACzgB;AACA;AACA;AACA;;AAEA,OAAO,4DAAQ;AACf;AACA;;AAEA;AACA;;AAEe,wEAAS,E;;;;;;;;AC7BxB;AAAA;AAAA;AAA2B;AACY;AACvC;AACA;AACA;;AAEA;;AAEA,cAAc;;;AAGd;AACA,mBAAmB;;AAEnB;AACA;AACA;AACA;AACA;AACA,+EAA+E;AAC/E;AACA;;AAEA;AACA,sDAAsD,+CAAG;;AAEzD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;AAGA,uEAAuE;AACvE;;AAEA,2EAA2E;;AAE3E,6DAA6D;;AAE7D;AACA;AACA,GAAG;AACH;;;AAGA;AACA;AACA,GAAG;;;AAGH;AACA;AACA;;AAEA;AACA;AACA,uBAAuB;;AAEvB,0BAA0B;;AAE1B;AACA;AACA;AACA;AACA,qBAAqB;;AAErB;AACA;AACA,sBAAsB;;AAEtB,mCAAmC;;AAEnC,6BAA6B;;AAE7B,iCAAiC;;AAEjC,2BAA2B;;AAE3B,iBAAiB,OAAO;AACxB;AACA;;AAEA,gBAAgB,6DAAS;AACzB;;AAEe,iEAAE,E;;;;;;;;AC9FjB;AAAA;AAAA;AAA2B;AACA;AAC3B,SAAS,uDAAG,aAAa,+CAAG;AACb,iEAAE,E;;;;;;;;ACHjB;AAAA;AAAA;AAAA;AAAA;AAAuC;AACR;;AAE/B;AACA,0CAA0C;;AAE1C;;AAEA,iBAAiB,gBAAgB;AACjC;AACA;;AAEA;AACA;;AAEO;AACA;AACQ;AACf;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,yDAAK;AACvB;;AAEA;AACA;AACA,KAAK;AACL;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,qBAAqB,QAAQ;AAC7B;AACA;;AAEA;AACA;;AAEA,WAAW,6DAAS;AACpB,GAAG;;;AAGH;AACA,6BAA6B;AAC7B,GAAG,eAAe;;;AAGlB;AACA;AACA;AACA,C;;;;;;;;AC/DA;AAAA;AAAA;AAA2B;AACY;;AAEvC;AACA;AACA,+CAA+C,+CAAG,IAAI;;AAEtD;AACA,kCAAkC;;AAElC;AACA;;AAEA,mBAAmB,QAAQ;AAC3B;AACA;;AAEA;AACA;;AAEA,SAAS,6DAAS;AAClB;;AAEe,iEAAE,E;;;;;;;;ACvBjB;AAAA;AAAA;AAA2B;AACE;AAC7B,SAAS,uDAAG,aAAa,gDAAI;AACd,iEAAE,E;;;;;;;;ACHjB;AAAA;AAA+B;;AAE/B;AACA,qCAAqC,iDAAK;AAC1C;;AAEe,uEAAQ,E;;;;;;;;ACNvB;AAAA;AAAqC;;AAErC;AACA,OAAO,4DAAQ;AACf;AACA;;AAEA;AACA;;AAEe,sEAAO,E;;;;;;;;;;;;;;kBCwDEyH,U;;AAjExB;;;;AAEA;;AACA;;AACA;;AAGA;;;;AAEA;;;;;;;;;;;;;;;;;;AAkBO,MAAMC,0CAAiB;AAC5BC,gBAAc;AACZC,cAAU,OADE;AAEZC,YAAQ,IAFI;AAGZC,UAAM,GAHM;AAIZC,aAAS,GAJG,EAIE;AACdC,aAAS;AALG,GADc;AAQ5BC,aAAW;AACTL,cAAU,KADD;AAETC,YAAQ,IAFC;AAGTC,UAAM;AAHG;;AAOb;AAf8B,CAAvB;;AArBP;AAPA;AA4CA,MAAMI,gBAAgBC,uBAAIC,MAAJ,CAAW;AAC/BT,gBAAcQ,uBAAIC,MAAJ,CAAW;AACvBR,cAAU,uBAAM,CAAC,MAAD,EAAS,OAAT,CAAN,CADa;AAEvBC,YAAQM,uBAAIE,MAAJ,EAFe;AAGvBP,UAAMK,uBAAIG,QAAJ,EAHiB;AAIvBP,aAAS,uBAAM,CAAC,GAAD,CAAN,CAJc,EAIA;AACvBC,aAASG,uBAAII,KAAJ,GAAYC,KAAZ,CAAkBH,MAAlB;AALc,GAAX,CADiB;AAQ/BJ,aAAWE,uBAAIC,MAAJ,CAAW;AACpBR,cAAUO,uBAAIE,MAAJ,EADU;AAEpBR,YAAQM,uBAAIE,MAAJ,EAFY;AAGpBP,UAAMK,uBAAIG,QAAJ;AAHc,GAAX;AARoB,CAAX,CAAtB;AAcA,MAAMG,eAAe,uBAAM,gBAAN,EAAwBP,aAAxB,CAArB;;AAEA;;;;;;AAMe,SAAST,UAAT,CAAqBiB,UAAU,EAA/B,EAAmC;AAChDA,YAAU,wBAAYhB,cAAZ,EAA4BgB,OAA5B,CAAV;AACAD,eAAaC,OAAb;;AAEA;AACA,QAAMC,iBAAiB,oBAASD,OAAT,CAAvB;;AAEA;AACAC,iBAAeC,KAAf,GAAuB,CAACC,uBAAD,EAAmBC,0BAAnB,EAAwCC,0BAAxC,CAAvB;;AAEA,SAAOJ,cAAP;AACD,C;;;;;;;;;;;;;;;;;;QChDiBE,gB,GAAAA,gB;QA8HAC,mB,GAAAA,mB;;AA1JlB;;IAAYE,W;;AACZ;;IAAYC,O;;AACZ;;AACA;;AAEA;;AAGA;;AACA;;;;AACA;;AAGA;;AAGA;;;;;;AAJA;AAbA;AAmBA,MAAMzF,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,CAAZ;;AAEA;;;;;;;;;;AALA;;;AARA;AAqBO,UAAWN,gBAAX,GAA+B;AACpC,SAAO,IAAP,EAAa;AACX,UAAMlE,SAAS,MAAM,oBAAKqE,YAAYI,OAAjB,CAArB;;AAEA,QAAI,CAACvC,MAAD,IAAW,CAACA,OAAOwC,YAAnB,IAAmC,CAACxC,OAAOwC,YAAP,CAAoBC,OAA5D,EAAqE;AACnE9F,UAAIqB,KAAJ,CAAU,yEAAV;AACA,YAAM,mBACJoE,QAAQM,eAAR,CAAwB;AACtB1E,eAAO,IAAI2E,gBAAJ,CAAe;AACpBC,mBAAS;AADW,SAAf;AADe,OAAxB,CADI,CAAN;AAOA;AACD;;AAED;AACA,UAAMC,SAAS,MAAM,sBAAOC,wBAAP,CAArB;;AAEA,UAAMC,iBAAiB,EAAvB;AACA,UAAM,EAAEC,WAAF,KAAkBlF,OAAOmF,OAA/B;AACA,QAAID,YAAYE,KAAhB,EAAuB;AACrBH,qBAAeI,WAAf,GAA6B;AAC3BC,oBAAYJ,YAAYE;AADG,OAA7B;AAGD;;AAED,UAAMG,8CACDR,OAAO/B,YADN;AAEJwC,mBAAa,IAFT;AAGJ;AACAnC,eAAS,CAAC,QAAD;AAJL,MAAN;;AAOAxE,QAAI4G,IAAJ,CAAS,gCAAT;AACA,UAAMC,WAAW,MAAM,oBAAKC,mBAAL,EAAgBJ,gBAAhB,EAAkCL,WAAlC,EAA+CD,cAA/C,CAAvB;;AAEA,QAAIS,SAASxF,KAAb,EAAoB;AAClBrB,UAAI4G,IAAJ,CAAS,8BAAT,EAAyCC,SAASxF,KAAlD;AACA;AACA,YAAM,mBAAIoE,QAAQM,eAAR,CAAwBc,QAAxB,EAAkCE,qBAAUC,IAA5C,CAAJ,CAAN;AACA;AACD,KALD,MAKO,IAAI,CAACH,SAASI,kBAAT,CAA4BzC,OAA5B,CAAoC0C,QAApC,CAA6C,QAA7C,CAAL,EAA6D;AAClE;AACAlH,UAAI4G,IAAJ,CAAS,sEAAT;AACA,YAAM,mBACJnB,QAAQM,eAAR,CAAwB;AACtB1E,eAAO,IAAI2E,gBAAJ,CAAe;AACpBC,mBAAS,yDADW;AAEpBkB,gBAAMC,kBAAUC;AAFI,SAAf;AADe,OAAxB,CADI,CAAN;AAQA;AACD;;AAEDrH,QAAI4G,IAAJ,CAAS,qEAAT;;AAEA;AACA,UAAMU,2CACDpB,OAAOzB,SADN;AAEJ8C,WAAKV,SAASI,kBAAT,CAA4BO;;AAGnC;AALM,MAAN,CAMA,MAAMC,aAAa,MAAM,+BAAiBH,aAAjB,EAAgCP,qBAAUC,IAA1C,CAAzB;;AAEA,QAAIS,WAAWpG,KAAf,EAAsB;AACpBrB,UAAI4G,IAAJ,CAAS,yCAAT,EAAoDa,WAAWpG,KAA/D;AACA;AACA,YAAM,mBACJoE,QAAQM,eAAR,CACE;AACE1E,eAAOoG,WAAWnB;AADpB,OADF,EAIES,qBAAUC,IAJZ,CADI,CAAN;AAQA;AACD;AACDhH,QAAI4G,IAAJ,CAAS,sCAAT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAMc,iBAAiBJ,cAAcC,GAAd,CAAkBI,MAAlB,CAAyBL,cAAcC,GAAd,CAAkBK,WAAlB,CAA8B,GAA9B,IAAqC,CAA9D,CAAvB;AACA,UAAMC,WAAW1G,OAAOmF,OAAP,CAAeD,WAAf,CAA2BwB,QAA5C;AACAxE,WAAOwC,YAAP,CAAoBC,OAApB,CAA6B,OAAM+B,QAAS,iBAA5C,EAA8DH,cAA9D;;AAEA,UAAM,mBACJjC,QAAQM,eAAR,CACE;AACE+B,gBAAU;AACRD,kBAAU1G,OAAOmF,OAAP,CAAeD,WAAf,CAA2B0B;AAD7B,OADZ;AAIE5D,+CACK0C,SAASI,kBADd;AAEEM,aAAKV,SAAS1C;AAFhB,QAJF;AAQE6D,kBAAY;AACV3D,2CACK6B,OAAO/B,YADZ,CADU;AAIV0D,kBAAU1G,OAAOmF,OAAP,CAAeD,WAAf,CAA2BwB,QAJ3B;AAKVzB,sBALU;AAMV;AACA;AACAO,qBAAa,IARH;AASVJ,eAAOpF,OAAOmF,OAAP,CAAeD,WAAf,CAA2BE;AATxB;AARd,KADF,EAqBEQ,qBAAUC,IArBZ,CADI,CAAN;AAyBD;AACF;;AAED;;;;;;AAMO,UAAW1B,mBAAX,GAAkC;AACvC,SAAO,IAAP,EAAa;AACX,UAAM,oBAAKE,YAAYyC,UAAjB,CAAN;AACA,UAAM,EAAEJ,QAAF,KAAe,MAAM,sBAAOK,4BAAP,CAA3B;;AAEAlI,QAAI4G,IAAJ,CAAS,qCAAT;AACA;AACA,UAAM,oBAAKuB,iBAAL,CAAN;;AAEA;AACA;AACA;AACA,QAAI9E,UAAUA,OAAOwC,YAAjB,IAAiCxC,OAAOwC,YAAP,CAAoBuC,UAAzD,EAAqE;AACnE/E,aAAOwC,YAAP,CAAoBuC,UAApB,CAAgC,OAAMP,QAAS,iBAA/C;AACD;AACF;AACF,C;;;;;;;;;;;;;AC3KD;;;;;AAKO,MAAMQ,kDAAqB;AAChCC,QAAM,MAD0B;AAEhCC,WAAS,SAFuB;AAGhCC,QAAM;;AAGR;;;;;AANkC,CAA3B,CAWA,MAAMC,kDAAqB;AAChCC,QAAM,MAD0B;AAEhCC,mBAAiB;AAFe,CAA3B,C;;;;;;;;;;;;;AChBP,MAAMC,SAAS,UAAf;;AAEO,MAAMhD,4BAAUgD,SAAS,SAAzB;AACA,MAAMC,oDAAsBD,SAAS,qBAArC;AACA,MAAME,oDAAsBF,SAAS,qBAArC;AACA,MAAMG,8CAAmBH,SAAS,kBAAlC;AACA,MAAMI,8CAAmBJ,SAAS,kBAAlC;AACA,MAAMK,wDAAwBL,SAAS,uBAAvC;AACA,MAAMX,kCAAaW,SAAS,YAA5B;AACA,MAAMM,oDAAsBN,SAAS,qBAArC;AACA,MAAMO,4DAA0BP,SAAS,yBAAzC;AACA,MAAMQ,0CAAiBR,SAAS,gBAAhC;AACA,MAAMS,4DAA0BT,SAAS,yBAAzC;;AAEA,MAAMU,oDAAsBV,SAAS,qBAArC;AACA,MAAMW,kEAA6BX,SAAS,4BAA5C;;AAEA,MAAMY,gCAAYZ,SAAS,WAA3B;;AAEA,MAAMa,4CAAkBb,SAAS,iBAAjC;AACA,MAAMc,0DAAyBd,SAAS,wBAAxC;;AAEA,MAAMe,oDAAsBf,SAAS,qBAArC,C;;;;;;;;;;;;;QCZSgB,O,GAAAA,O;QAmBAC,iB,GAAAA,iB;QA0BAC,kB,GAAAA,kB;QA+BA/D,e,GAAAA,e;QA0BAgE,c,GAAAA,c;QAWAC,mB,GAAAA,mB;QAwBA7B,U,GAAAA,U;QAaA8B,kB,GAAAA,kB;QA6BAC,mB,GAAAA,mB;QA0BAC,a,GAAAA,a;QAmBAC,qB,GAAAA,qB;QAoBAC,kB,GAAAA,kB;QAgBAC,0B,GAAAA,0B;QAuBAC,S,GAAAA,S;QAoBAC,c,GAAAA,c;QAsBAC,sB,GAAAA,sB;;AA/UhB;;IAAYjF,W;;;;AAEZ;;;;;;;;AAQO,SAASoE,OAAT,CAAkBvD,WAAlB,EAA+BnB,OAA/B,EAAwC;AAC7C,SAAO;AACL1E,UAAMgF,YAAYI,OADb;AAELU,aAAS,EAAED,WAAF,EAAenB,OAAf,EAFJ;AAGLwF,UAAM;AACJC,mBAAa;AADT;AAHD,GAAP;AAOD;;AAED;;;;;;;;;AASO,SAASd,iBAAT,CAA4B,EAAE/B,QAAF,EAAYE,UAAZ,EAA5B,EAAsD4C,QAAtD,EAAgE;AACrE,SAAO;AACLpK,UAAMgF,YAAYqD,mBADb;AAELvC,aAAS,EAAEwB,QAAF,EAAYE,UAAZ,EAFJ;AAGL0C,UAAM;AACJE,cADI;AAEJD,mBAAa;AAFT;AAHD,GAAP;AAQD;;AAED;;;;;;;;;;;;;;;AAeO,SAASb,kBAAT,CAA6B,EAAE3F,YAAF,EAAgB6D,UAAhB,EAA4B3G,KAA5B,EAA7B,EAAkEuJ,QAAlE,EAA4E;AACjF;AACA,MAAIzJ,SAAS;AACXX,UAAMgF,YAAYsD,mBADP;AAEX4B,UAAM,EAAEE,QAAF;AAFK,GAAb;;AAKA,MAAIvJ,KAAJ,EAAW;AACTF,WAAOE,KAAP,GAAe,IAAf;AACAF,WAAOmF,OAAP,GAAiBjF,KAAjB;AACD,GAHD,MAGO;AACLF,WAAOmF,OAAP,GAAiB,EAAEnC,YAAF,EAAgB6D,UAAhB,EAAjB;AACD;;AAED,SAAO7G,MAAP;AACD;;AAED;;;;;;;;;;;;;;AAcO,SAAS4E,eAAT,CAA0B,EAAE5B,YAAF,EAAgB2D,QAAhB,EAA0BE,UAA1B,EAAsC3G,KAAtC,EAA1B,EAAyEuJ,QAAzE,EAAmFC,QAAQ,KAA3F,EAAkG;AACvG,MAAI1J,SAAS;AACXX,UAAMgF,YAAYuD,gBADP;AAEX2B,UAAM;AACJE,cADI;AAEJC,WAFI;AAGJF,mBAAa;AAHT;AAFK,GAAb;;AASA,MAAItJ,KAAJ,EAAW;AACTF,WAAOE,KAAP,GAAe,IAAf;AACAF,WAAOmF,OAAP,GAAiBjF,KAAjB;AACD,GAHD,MAGO;AACLF,WAAOmF,OAAP,GAAiB,EAAEnC,YAAF,EAAgB2D,QAAhB,EAA0BE,UAA1B,EAAjB;AACD;;AAED,SAAO7G,MAAP;AACD;;AAED;;;;;;AAMO,SAAS4I,cAAT,GAA2B;AAChC,SAAO,EAAEvJ,MAAMgF,YAAYwD,gBAApB,EAAP;AACD;;AAED;;;;;;;AAOO,SAASgB,mBAAT,CAA8Bc,mBAA9B,EAAmD;AACxD,MAAI3J,SAAS;AACXX,UAAMgF,YAAYyD,qBADP;AAEX3C,aAAS;AACPyE,iBAAWD,oBAAoBC,SAApB,IAAiCD,oBAAoBE,eADzD;AAEPA,uBAAiBF,oBAAoBE,eAApB,IAAuCF,oBAAoBC,SAFrE;AAGPE,gBAAUH,oBAAoBG,QAApB,IAAgCH,oBAAoBI,cAHvD;AAIPA,sBAAgBJ,oBAAoBI,cAApB,IAAsCJ,oBAAoBG,QAJnE;AAKPE,gBAAUL,oBAAoBK,QALvB;AAMPC,oBAAcN,oBAAoBM,YAApB,IAAoCN,oBAAoBO,UAN/D;AAOPA,kBAAYP,oBAAoBO,UAApB,IAAkCP,oBAAoBM,YAP3D;AAQPvD,gBAAUiD,oBAAoBjD;AARvB;AAFE,GAAb;;AAcA,SAAO1G,MAAP;AACD;;AAED;;;;;;AAMO,SAASgH,UAAT,GAAuB;AAC5B,SAAO,EAAE3H,MAAMgF,YAAYyC,UAApB,EAAP;AACD;;AAED;;;;;;;;;AASO,SAASgC,kBAAT,CAA6B,EAAE5I,KAAF,EAASiK,MAAT,KAAoB,EAAjD,EAAqD;AAC1D,QAAMnK,SAAS;AACbX,UAAMgF,YAAY0D,mBADL;AAEb5C,aAAS;AAFI,GAAf;;AAKA,MAAIjF,KAAJ,EAAW;AACTF,WAAOE,KAAP,GAAe,IAAf;AACAF,WAAOmF,OAAP,GAAiBjF,KAAjB;AACD;;AAED,MAAIiK,MAAJ,EAAY;AACVnK,WAAOmF,OAAP,CAAegF,MAAf,GAAwBA,MAAxB;AACD;;AAED,SAAOnK,MAAP;AACD;;AAED;;;;;;;;;;;AAWO,SAAS+I,mBAAT,CAA8B,EAAE7I,KAAF,EAASkK,UAAT,EAA9B,EAAqDX,QAArD,EAA+D;AACpE,MAAIzJ,SAAS;AACXX,UAAMgF,YAAY2D,uBADP;AAEXuB,UAAM,EAAEE,QAAF;AAFK,GAAb;;AAKA,MAAIvJ,KAAJ,EAAW;AACTF,WAAOE,KAAP,GAAe,IAAf;AACAF,WAAOmF,OAAP,GAAiBjF,KAAjB;AACAF,WAAOmF,OAAP,CAAeiF,UAAf,GAA4BA,UAA5B;AACD,GAJD,MAIO;AACLpK,WAAOmF,OAAP,GAAiB;AACfiF;AADe,KAAjB;AAGD;;AAED,SAAOpK,MAAP;AACD;;AAED;;;;;;;AAOO,SAASgJ,aAAT,CAAwB9D,WAAxB,EAAqC;AAC1C,MAAIlF,SAAS;AACXX,UAAMgF,YAAY4D,cADP;AAEX9C,aAAS,EAAED,WAAF;AAFE,GAAb;AAIA,SAAOlF,MAAP;AACD;;AAED;;;;;;;;;;;AAWO,SAASiJ,qBAAT,CAAgC,EAAE/I,KAAF,EAAS2G,UAAT,EAAhC,EAAuD4C,QAAvD,EAAiE;AACtE,MAAIzJ,SAAS;AACXX,UAAMgF,YAAY6D,uBADP;AAEX/C,aAAS,EAAE0B,UAAF,EAFE;AAGX0C,UAAM,EAAEE,QAAF;AAHK,GAAb;AAKA,MAAIvJ,KAAJ,EAAW;AACTF,WAAOE,KAAP,GAAe,IAAf;AACAF,WAAOmF,OAAP,GAAiBjF,KAAjB;AACD;;AAED,SAAOF,MAAP;AACD;;AAED;;;;;;AAMO,SAASkJ,kBAAT,CAA6BlG,YAA7B,EAA2C;AAChD,SAAO;AACL3D,UAAMgF,YAAY8D,mBADb;AAELhD,aAASnC;AAFJ,GAAP;AAID;;AAED;;;;;;;;;AASO,SAASmG,0BAAT,CAAqC,EAAEnG,YAAF,EAAgB9C,KAAhB,EAArC,EAA8DuJ,QAA9D,EAAwE;AAC7E,MAAIzJ,SAAS;AACXX,UAAMgF,YAAY+D,0BADP;AAEXmB,UAAM,EAAEE,QAAF;AAFK,GAAb;;AAKA,MAAIvJ,KAAJ,EAAW;AACTF,WAAOE,KAAP,GAAe,IAAf;AACAF,WAAOmF,OAAP,GAAiBjF,KAAjB;AACD,GAHD,MAGO;AACLF,WAAOmF,OAAP,GAAiBnC,YAAjB;AACD;AACD,SAAOhD,MAAP;AACD;;AAED;;;;;;;;AAQO,SAASoJ,SAAT,CAAoB,EAAEiB,WAAF,EAAeC,OAAf,EAApB,EAA8C;AACnD,SAAO;AACLjL,UAAMgF,YAAYgE,SADb;AAELlD,aAAS,EAAEkF,WAAF,EAAeC,OAAf;AAFJ,GAAP;AAID;;AAED;;;;;;;;;;;;;AAaO,SAASjB,cAAT,CAAyB,EAAE3C,QAAF,EAAY6D,QAAZ,EAAsBC,QAAtB,EAAgCC,SAAhC,EAA2CC,iBAA3C,EAA8DJ,OAA9D,EAAzB,EAAkG;AACvG,SAAO;AACLjL,UAAMgF,YAAYiE,eADb;AAELnD,aAAS,EAAEuB,QAAF,EAAY6D,QAAZ,EAAsBC,QAAtB,EAAgCC,SAAhC,EAA2CC,iBAA3C,EAA8DJ,OAA9D,EAFJ;AAGLf,UAAM;AACJC,mBAAa;AADT;AAHD,GAAP;AAOD;;AAED;;;;;;;;;;;;AAYO,SAASF,sBAAT,CAAiC,EAAE3C,QAAF,EAAYE,UAAZ,EAAwB3G,KAAxB,EAAjC,EAAkEuJ,QAAlE,EAA4E;AACjF,MAAIzJ,SAAS;AACXX,UAAMgF,YAAYkE,sBADP;AAEXgB,UAAM;AACJE,cADI;AAEJD,mBAAa;AAFT;AAFK,GAAb;;AAQA,MAAItJ,KAAJ,EAAW;AACTF,WAAOE,KAAP,GAAe,IAAf;AACAF,WAAOmF,OAAP,GAAiBjF,KAAjB;AACD,GAHD,MAGO;AACLF,WAAOmF,OAAP,GAAiB,EAAEwB,QAAF,EAAYE,UAAZ,EAAjB;AACD;;AAED,SAAO7G,MAAP;AACD,C;;;;;;;;;;;;;kBChVuB2K,G;;AAhBxB;;IAAYrG,O;;AACZ;;AACA;;AAEA;;AACA;;;;;;;;AACA,MAAMzF,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,CAAZ;;AAEA;;;;;;;;AAQe,SAASmG,GAAT,CAAc,EAAEnJ,QAAF,EAAYD,QAAZ,EAAd,EAAsC;AACnD,SAAO;AACL;;;;;;;;;;;;;;;;;;;;;;;;AAwBA;;;;;;;;;;;;;;;;;;;;;AAqBA;;;;;;;;;;;;;;;;;;;;;;;;AAwBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;;;;;;;;;;;;;;;;;;;;;AAqBA;;;;;;;;;;;;;;;;;;;AAmBAkH,YAASvD,WAAT,EAAsBnB,OAAtB,EAA+B;AAC7B;AACA;AACAlF,UAAI+L,KAAJ,CAAUC,oBAAc,WAAxB,EAAqC3F,YAAYwB,QAAjD;AACAlF,eAAS8C,QAAQmE,OAAR,CAAgBvD,WAAhB,EAA6BnB,OAA7B,CAAT;AACD,KArJI;;AAuJL;;;;;;;;;;;AAWAiD,iBAAc;AACZnI,UAAI+L,KAAJ,CAAUC,oBAAc,YAAxB;AACArJ,eAAS8C,QAAQ0C,UAAR,EAAT;AACD,KArKI;;AAuKL;;;;;;;;;;;;;AAaA;;;;;;;;;;;;;;;;AAgBA8D,gBAAa5F,WAAb,EAA0B;AACxB;AACA;AACArG,UAAI+L,KAAJ,CAAUC,oBAAc,eAAxB,EAAyC3F,YAAYwB,QAArD;AACAlF,eAAS8C,QAAQ0E,aAAR,CAAsB9D,WAAtB,CAAT;AACD,KAzMI;;AA2ML;;;;;;;;;;;;;;AAcA6F,qBAAkBlE,UAAlB,EAA8B;AAC5BhI,UAAI+L,KAAJ,CAAUC,oBAAc,oBAAxB,EAA8ChE,UAA9C;AACArF,eAAS8C,QAAQ4E,kBAAR,CAA2BrC,UAA3B,CAAT;AACD,KA5NI;;AA8NL;;;;;;;;;;;AAWAmE,kBAAe;AACbnM,UAAI+L,KAAJ,CAAUC,oBAAc,aAAxB;AACA,aAAO,4BAAetJ,UAAf,CAAP;AACD,KA5OI;;AA8OL;;;;;;;;;;;;;;AAcA0J,oBAAiB;AACfpM,UAAI+L,KAAJ,CAAUC,oBAAc,eAAxB;AACA,YAAM,EAAEK,WAAF,EAAeC,SAAf,EAA0BjL,KAA1B,KAAoCqB,WAAW6J,cAArD;AACA,aAAO;AACLF,mBADK;AAELC,iBAFK;AAGLjL,aAHK;AAIL8C,sBAAc,4BAAYzB,UAAZ;AAJT,OAAP;AAMD,KArQI;;AAuQL;;;;;;;;;AASA8J,kBAAe;AACbxM,UAAI+L,KAAJ,CAAUC,oBAAc,aAAxB;AACA,aAAO,4BAAYtJ,UAAZ,CAAP;AACD,KAnRI;;AAqRL;;;;;;;;;;AAUA+J,wBAAoBpE,6BA/Rf;;AAiSL;;;;;;;;;AASAqE,uBAAmBjE,6BA1Sd;;AA4SL;;;;;;;;;;;;;;;;;AAiBA8B,cAAW,EAAEiB,WAAF,EAAeC,OAAf,EAAX,EAAqC;AACnC;AACAzL,UAAI+L,KAAJ,CAAUC,oBAAc,aAAxB,EAAuCP,OAAvC;;AAEA;AACA,UAAI;AACF,cAAMkB,MAAM,yBAAUlB,OAAV,CAAZ;AACA9I,iBAAS8C,QAAQ8E,SAAR,CAAkB,EAAEiB,WAAF,EAAeC,SAASkB,GAAxB,EAAlB,CAAT;AACD,OAHD,CAGE,OAAOtL,KAAP,EAAc;AACdrB,YAAIqB,KAAJ,CAAW,GAAEoK,OAAQ,qBAArB;AACD;AACF,KAxUI;;AA0UL;;;;;;;;;;;;;;;;;;AAkBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;;;;;;;;;;;;;;;;;AAiBA;;;;;;;;;;;;;;;;;;AAkBAjB,mBAAgB,EAAE3C,QAAF,EAAY6D,QAAZ,EAAsBC,QAAtB,EAAgCC,SAAhC,EAA2CC,iBAA3C,EAA8DJ,OAA9D,EAAhB,EAAyF;AACvFzL,UAAI+L,KAAJ,CAAUC,oBAAc,kBAAxB,EAA4CnE,QAA5C;AACA;AACA;AACAlF,eACE8C,QAAQ+E,cAAR,CAAuB;AACrB3C,gBADqB;AAErB6D,gBAFqB;AAGrBC,gBAHqB;AAIrBC,iBAJqB;AAKrBC,yBALqB;AAMrBJ;AANqB,OAAvB,CADF;AAUD;AAzaI,GAAP;AA2aD,C;;;;;;;;;;;;;;;AC5bD;;;;AACA;;;;AACA;;;;;;QAESmB,O,GAAAA,kB;QAASC,I,GAAAA,c;QAAMf,G,GAAAA,a;;;;;;;;;;;;;ACJxB;;;;AAIA,MAAMe,OAAO,gBAAb;kBACeA,I;;;;;;;;;;;;;;;;;;ACLf;;IAAYrH,W;;AACZ;;AAEA;;AAGA;;AAEA;;;;;;AAHA;AAKA,MAAMsH,WAAW,EAAjB;;AAEAA,SAAStH,YAAYI,OAArB,IAAgC;AAC9BmH,OAAMC,KAAN,EAAa;AACX,sCACKA,KADL;AAEEV,iBAAW,IAFb;AAGEjL,aAAO4L;AAHT;AAKD;AAP6B,CAAhC;;AAUAH,SAAStH,YAAYqD,mBAArB,IAA4C;AAC1CkE,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL;AAEEpC,gBAAUzJ,OAAOuJ,IAAP,CAAYE,QAFxB;AAGE5C,6CACKgF,MAAMhF,UADX;AAEE,SAAC7G,OAAOuJ,IAAP,CAAYE,QAAb,GAAwBzJ,OAAOmF,OAAP,CAAe0B;AAFzC,QAHF;AAOEF,gBAAU3G,OAAOmF,OAAP,CAAewB;AAP3B;AASD;AAXyC,CAA5C;;AAcAgF,SAAStH,YAAYuD,gBAArB,IAAyC;AACvCgE,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL;AAEEX,mBAAa,IAFf;AAGEC,iBAAW,KAHb;AAIEjL,aAAO4L,SAJT;AAKEpC,aAAO1J,OAAOuJ,IAAP,CAAYG,KALrB;AAMED,gBAAUzJ,OAAOuJ,IAAP,CAAYE,QANxB;AAOE;AACA;AACAzG,+CACK6I,MAAM7I,YADX;AAEE,SAAChD,OAAOuJ,IAAP,CAAYE,QAAb,GAAwBzJ,OAAOmF,OAAP,CAAenC;AAFzC,QATF;AAaE;AACA6D,kBAAY7G,OAAOmF,OAAP,CAAe0B,UAAf,8BACHgF,MAAMhF,UADH,IACe,CAAC7G,OAAOuJ,IAAP,CAAYE,QAAb,GAAwBzJ,OAAOmF,OAAP,CAAe0B,UADtD,iCAEHgF,MAAMhF,UAFH,CAdd;AAiBE;AACAF,gBAAU3G,OAAOmF,OAAP,CAAewB,QAAf,GAA0B3G,OAAOmF,OAAP,CAAewB,QAAzC,GAAoDkF,MAAMlF;AAlBtE;AAoBD,GAtBsC;AAuBvCoF,QAAOF,KAAP,EAAc7L,MAAd,EAAsB;AACpB,sCACK6L,KADL;AAEEX,mBAAa,KAFf;AAGEC,iBAAW,KAHb;AAIEjL,aAAOF,OAAOmF;AAJhB;AAMD;AA9BsC,CAAzC;;AAiCA;AACA;AACAwG,SAAStH,YAAYsD,mBAArB,IAA4C;AAC1CiE,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL;AAEE;AACA;AACA7I,+CACK6I,MAAM7I,YADX;AAEE,SAAChD,OAAOuJ,IAAP,CAAYE,QAAb,GAAwBzJ,OAAOmF,OAAP,CAAenC;AAFzC,QAJF;AAQE;AACA6D,6CACKgF,MAAMhF,UADX;AAEE,SAAC7G,OAAOuJ,IAAP,CAAYE,QAAb,GAAwBzJ,OAAOmF,OAAP,CAAe0B;AAFzC;AATF;AAcD;AAhByC,CAA5C;;AAmBA8E,SAAStH,YAAYyC,UAArB,IAAmC;AACjC8E,OAAMC,KAAN,EAAa;AACX,sCACKA,KADL;AAEEV,iBAAW,IAFb;AAGEjL,aAAO4L;AAHT;AAKD;AAPgC,CAAnC;;AAUAH,SAAStH,YAAY0D,mBAArB,IAA4C;AAC1C6D,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,UAAMgM,YAAY;AAChBd,mBAAa,KADG;AAEhBC,iBAAW,KAFK;AAGhBjL,aAAO4L;;AAGT;AACA;AAPkB,KAAlB,CAQA,MAAMG,mBAAmBjM,OAAOmF,OAAP,CAAegF,MAAf,KAA0B7C,8BAAmBE,eAAtE;AACA,UAAM0E,cAAc,2BAAaC,UAAb,CAAwB,GAAxB,CAApB;AACA,QAAIF,oBAAoBC,WAAxB,EAAqC;AACnCF,gBAAUrF,QAAV,GAAqBkF,MAAMlF,QAA3B;AACD;AACD,WAAOqF,SAAP;AACD,GAhByC;AAiB1CD,QAAOF,KAAP,EAAc7L,MAAd,EAAsB;AACpB,sCACK6L,KADL;AAEE;AACAX,mBAAa,KAHf;AAIEC,iBAAW,KAJb;AAKEjL,aAAOF,OAAOmF;AALhB;AAOD;AAzByC,CAA5C;;AA4BAwG,SAAStH,YAAY6D,uBAArB,IAAgD;AAC9C0D,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB;AACA,UAAMiF,iBAAiB,eACrB4G,MAAMhF,UAAN,CAAiB7G,OAAOuJ,IAAP,CAAYE,QAA7B,EAAuCxE,cADlB,EAErBjF,OAAOmF,OAAP,CAAe0B,UAAf,CAA0B5B,cAFL,CAAvB;;AAKA,sCACK4G,KADL;AAEEhF,6CACKgF,MAAMhF,UADX;AAEE,SAAC7G,OAAOuJ,IAAP,CAAYE,QAAb,8BACKoC,MAAMhF,UAAN,CAAiB7G,OAAOuJ,IAAP,CAAYE,QAA7B,CADL,EAEKzJ,OAAOmF,OAAP,CAAe0B,UAFpB;AAGE5B;AAHF;AAFF,QAFF;AAUE0B,2CACKkF,MAAMlF,QADX;AAEE0D,qBAAarK,OAAOmF,OAAP,CAAe0B,UAAf,CAA0BwD,WAFzC;AAGE+B,sBAAcpM,OAAOmF,OAAP,CAAe0B,UAAf,CAA0BuF;AAH1C;AAVF;AAgBD;AAxB6C,CAAhD;;AA2BA;;;AAGAT,SAAStH,YAAY+D,0BAArB,IAAmD;AACjDwD,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL;AAEE7I,+CACK6I,MAAM7I,YADX;AAEE,SAAChD,OAAOuJ,IAAP,CAAYE,QAAb,8BACKoC,MAAM7I,YAAN,CAAmBhD,OAAOuJ,IAAP,CAAYE,QAA/B,CADL,EAEKzJ,OAAOmF,OAFZ;AAFF;AAFF;AAUD;AAZgD,CAAnD;;AAeAwG,SAAStH,YAAYgE,SAArB,IAAkC;AAChCuD,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB;AACA;AACA;AACA,UAAMqM,iBAAiBrM,OAAOmF,OAAP,CAAemF,OAAtC;AACA,sCACKuB,KADL;AAEElF,2CACKkF,MAAMlF,QADX;AAEE0D,qBAAarK,OAAOmF,OAAP,CAAekF,WAF9B;AAGE3D,kBAAU2F,eAAeC,kBAH3B;AAIEC,kBAAUF,eAAe,mBAAf;AAJZ;AAFF;AASD;AAf+B,CAAlC;;AAkBAV,SAAStH,YAAYkE,sBAArB,IAA+C;AAC7CqD,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL;AAEE3L,aAAO4L,SAFT;AAGErC,gBAAUzJ,OAAOuJ,IAAP,CAAYE,QAHxB;AAIE;AACA5C,6CACKgF,MAAMhF,UADX;AAEE,SAAC7G,OAAOuJ,IAAP,CAAYE,QAAb,GAAwBzJ,OAAOmF,OAAP,CAAe0B;AAFzC,QALF;AASE;AACAF,gBAAU3G,OAAOmF,OAAP,CAAewB;AAV3B;AAYD,GAd4C;AAe7CoF,QAAOF,KAAP,EAAc7L,MAAd,EAAsB;AACpB,sCACK6L,KADL;AAEE3L,aAAOF,OAAOmF;AAFhB;AAID;AApB4C,CAA/C;;AAuBA;;;;;;;;;;;;;;;;;AAiBA,MAAMsG,UAAU,iCAAcE,QAAd,EAAwB;AACtCT,eAAa,KADyB;AAEtCC,aAAW;AAF2B,CAAxB,CAAhB;kBAIeM,O;;;;;;;;;;;;;QClOCe,e,GAAAA,e;QAgBAxH,a,GAAAA,a;QAUAyH,mB,GAAAA,mB;QAmBA1F,iB,GAAAA,iB;QAiBA2F,S,GAAAA,S;QAYAC,W,GAAAA,W;QAUA3B,W,GAAAA,W;QASA4B,e,GAAAA,e;QASAvB,W,GAAAA,W;QAsBAwB,W,GAAAA,W;QAwBAC,c,GAAAA,c;;AA7JhB;;AACA;;AACA;;AAEA;;;;;AAKO,SAASN,eAAT,CAA0BO,WAA1B,EAAuC;AAC5C;AACA,SAAO,mBAAUA,WAAV,CAAP;AACD;;AAED;;;;;;AAMA;;;;;AAKO,SAAS/H,aAAT,CAAwB6G,KAAxB,EAA+B;AACpC,SAAO,mBAAUA,MAAM9G,MAAN,CAAaqG,cAAvB,CAAP;AACD;;AAED;;;;;;AAMO,SAASqB,mBAAT,CAA8BZ,KAA9B,EAAqCpC,QAArC,EAA+C;AACpD,MAAI,CAACA,QAAL,EAAe;AACbA,eAAWoD,YAAYhB,KAAZ,CAAX;AACD;;AAED,MAAIA,MAAMT,cAAN,CAAqBpI,YAAzB,EAAuC;AACrC,WAAO,mBAAU6I,MAAMT,cAAN,CAAqBpI,YAArB,CAAkCyG,QAAlC,CAAV,CAAP;AACD,GAFD,MAEO;AACL,WAAOqC,SAAP;AACD;AACF;;AAED;;;;;;;AAOO,SAAS/E,iBAAT,CAA4B8E,KAA5B,EAAmCpC,QAAnC,EAA6C;AAClD,MAAI,CAACA,QAAL,EAAe;AACbA,eAAWoD,YAAYhB,KAAZ,CAAX;AACD;;AAED,MAAIA,MAAMT,cAAN,CAAqBvE,UAAzB,EAAqC;AACnC,WAAO,mBAAUgF,MAAMT,cAAN,CAAqBvE,UAArB,CAAgC4C,QAAhC,CAAV,CAAP;AACD,GAFD,MAEO;AACL,WAAOqC,SAAP;AACD;AACF;;AAED;;;;;AAKO,SAASY,SAAT,CAAoBb,KAApB,EAA2B;AAChC,QAAM,EAAEnF,WAAW,EAAb,EAAiB6F,WAAW7F,QAA5B,KAAyCsE,YAAYa,KAAZ,CAA/C;AACA,QAAM,GAAGmB,SAAS,EAAZ,IAAkBT,SAASU,KAAT,CAAe,GAAf,CAAxB;AACA,SAAOD,MAAP;AACD;;AAED;;;;;;AAMO,SAASL,WAAT,CAAsBd,KAAtB,EAA6B;AAClC,QAAMlF,WAAWqE,YAAYa,KAAZ,CAAjB;AACA,SAAOlF,SAAS4F,QAAT,IAAqB5F,SAASD,QAA9B,IAA0C,EAAjD;AACD;;AAED;;;;;AAKO,SAASsE,WAAT,CAAsBa,KAAtB,EAA6B;AAClC,SAAO,mBAAUA,MAAMT,cAAN,CAAqBzE,QAA/B,KAA4C,EAAnD;AACD;;AAED;;;;;AAKO,SAASiG,eAAT,CAA0Bf,KAA1B,EAAiC;AACtC,SAAO,mBAAUA,MAAMT,cAAN,CAAqB1B,KAA/B,CAAP;AACD;;AAED;;;;;AAKO,SAAS2B,WAAT,CAAsBQ,KAAtB,EAA6BpC,QAA7B,EAAuC;AAC5C,QAAMzG,eAAeyJ,oBAAoBZ,KAApB,EAA2BpC,QAA3B,CAArB;;AAEA,MAAIzG,gBAAgBA,aAAakK,YAAjC,EAA+C;AAC7C,WAAOlK,aAAakK,YAApB;AACD,GAFD,MAEO;AACL,WAAO;AACL;AACAC,iBAAW,EAFN;AAGLC,gBAAU,EAHL;AAILC,eAAS,EAJJ;AAKLC,cAAQpG,8BAAmBG,IALtB;AAMLkG,gBAAU;AANL,KAAP;AAQD;AACF;;AAED;;;;;AAKO,SAASV,WAAT,CAAsBhB,KAAtB,EAA6B;AAClC,MAAIpC,WAAWoC,MAAMT,cAAN,CAAqB3B,QAApC;;AAEA;;;;;;;;;AASA,MAAI,CAACA,QAAD,IAAauB,YAAYa,KAAZ,EAAmBU,QAApC,EAA8C;AAC5C9C,eAAW,OAAX;AACD;;AAED,SAAOA,QAAP;AACD;;AAED;;;;;AAKO,SAASqD,cAAT,CAAyBjB,KAAzB,EAAgCpC,QAAhC,EAA0C;AAC/C,MAAI,CAACA,QAAL,EAAe;AACbA,eAAWoD,YAAYhB,KAAZ,CAAX;AACD;;AAED,QAAM,EAAE7I,YAAF,EAAgBwK,gBAAhB,KAAqCxI,cAAc6G,KAAd,CAA3C;AACA,MAAI,EAAE3I,MAAF,KAAa8B,cAAc6G,KAAd,CAAjB;AACA,QAAM,EAAElF,QAAF,KAAe,mBAAUkF,MAAMT,cAAhB,CAArB;;AAEA;AACA;AACA,MAAI,CAAClI,MAAL,EAAa;AACXA,aAAS;AACPD,gBAAUD,aAAaC,QADhB;AAEPwK,YAAMzK,aAAaE,MAFZ;AAGPC,YAAMH,aAAaG,IAHZ;AAIPC,eAASJ,aAAaI;AAJf,KAAT;AAMD;;AAED,MAAIsK,WAAJ;;AAEA,MAAIjE,aAAa7D,sBAAU+H,KAA3B,EAAkC;AAChCD,kBAAc;AACZE,eAAU,GAAE1K,OAAOD,QAAS,MAAKC,OAAOuK,IAAK,IAAGvK,OAAOC,IAAK,EADhD;AAEZC,eAASF,OAAOE,OAFJ;AAGZsD,gBAAUC,SAASD,QAHP;AAIZ;AACAmH,aAAOlH,SAAS0D,WALJ;AAMZmD,sBANY;AAOZ;AACA;AACAzJ,eAAS;AACP+J,iBAAS;AACPC,kBAAQ,kBADD;AAEPC,yBAAgB,UAASrH,SAAS0D,WAAY,EAFvC;AAGP,0BAAgB;AAHT;AADF;AATG,KAAd;AAiBD,GAlBD,MAkBO,IAAIZ,aAAa7D,sBAAUqI,EAA3B,EAA+B;AACpCP,kBAAc;AACZE,eAAU,GAAE5K,aAAaC,QAAS,MAAKD,aAAaE,MAAO,IAAGF,aAAaG,IAAK,EADpE;AAEZC,eAASJ,aAAaI,OAFV;AAGZsD,gBAAUC,SAASD;AAHP,KAAd;AAKD,GANM,MAMA,IAAI+C,aAAa7D,sBAAUC,IAA3B,EAAiC;AACtC6H,kBAAc;AACZE,eAAU,GAAE1K,OAAOD,QAAS,MAAKC,OAAOuK,IAAK,IAAGvK,OAAOC,IAAK,EADhD;AAEZC,eAASF,OAAOE,OAFJ;AAGZsD,gBAAUC,SAASD;;AAGrB;;;;;;AANc,KAAd,CAYA,MAAMwH,cAAcrB,YAAYhB,KAAZ,CAApB;AACA,QAAIqC,gBAAgBtI,sBAAUqI,EAA9B,EAAkC;AAChCP,kBAAYtK,OAAZ,GAAsB,GAAtB;;AAEA,YAAM+K,WAAWpH,kBAAkB8E,KAAlB,EAAyBqC,WAAzB,CAAjB;AACA,UAAIC,YAAYA,SAASlJ,cAAzB,EAAyC;AACvCyI,oBAAYzI,cAAZ,GAA6BkJ,SAASlJ,cAAtC;AACD;AACD,aAAOyI,WAAP;AACD;AACF,GAvBM,MAuBA;AACL;AACA,WAAO,EAAP;AACD;;AAED,QAAMS,WAAWpH,kBAAkB8E,KAAlB,EAAyBpC,QAAzB,CAAjB;AACA,MAAI0E,YAAYA,SAASlJ,cAAzB,EAAyC;AACvCyI,gBAAYzI,cAAZ,GAA6BkJ,SAASlJ,cAAtC;AACD;;AAED,SAAOyI,WAAP;AACD,C;;;;;;;;;;;;;kBC3NuBU,Q;;AAjBxB;;AAGA;;AAGA;;AACA;;AACA;;AAEA;;;;;;;;;AARA;AAee,SAASA,QAAT,CAAmBrK,UAAU,EAA7B,EAAiC;AAC9C,QAAMhB,iBAAiB;AACrBC,kBAAc;AACZqL,eAAS,IADG;AAEZ;AACApL,gBAAU,OAHE;AAIZG,eAAS,GAJG;AAKZD,YAAM;AALM,KADO;AAQrBG,eAAW;AACTL,gBAAU,KADD;AAETE,YAAM;AAFG;AARU,GAAvB;AAaAY,YAAU,wBAAYhB,cAAZ,EAA4BgB,OAA5B,CAAV;;AAEA,YAAWuK,IAAX,GAAmB;AACjB,UAAM,kBAAI,qBAAavK,OAAb,EAAsB2H,eAAtB,CAAJ,CAAN;AACD;;AAED;AACA,WAAS6C,OAAT,CAAkB,EAAE/M,QAAF,EAAYD,QAAZ,EAAlB,EAA0C;AACxC,UAAMiN,YAAY,oBAAI,EAAEhN,QAAF,EAAYD,QAAZ,EAAJ,CAAlB;;AAEA;AACA,UAAMkN,aAAa,CAAC,aAAD,EAAgB,eAAhB,EAAiC,aAAjC,CAAnB;AACA,WAAO,cAAKA,UAAL,EAAiBD,SAAjB,CAAP;AACD;;AAED,SAAO;AACL9C,yBADK;AAELD,+BAFK;AAGL6C,QAHK;AAIL3D,SAAK4D;AAJA,GAAP;AAMD;;AA/CD;AANA,e;;;;;;;;;;;;;;;;;;QCyDkBG,W,GAAAA,W;QA2CAjG,O,GAAAA,O;QAgIAzB,U,GAAAA,U;QAyCA5C,kB,GAAAA,kB;QA2EA8E,kB,GAAAA,kB;QAiDAyF,kB,GAAAA,kB;QA8BAC,qB,GAAAA,qB;QAQAC,gB,GAAAA,gB;;AA9alB;;AAeA;;IAAYvK,O;;AACZ;;IAAYD,W;;AACZ;;AAGA;;AAGA;;AAGA;;;;AAGA;;AAGA;;AACA;;IAAYyK,uB;;AACZ;;AACA;;AAGA;;;;AACA;;;;AACA;;AAGA;;;;;;AAEA;;;AARA;;;AANA;;;AANA;;;AANA;AApBA;AA+CA,MAAMrF,WAAW7D,sBAAUC,IAA3B;;AAEA;;;AANA;;;AAdA;;;AANA;;;AARA;AAmCA,MAAMhH,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,CAAZ;;AAEA;;;;;AAKO,UAAWkK,WAAX,GAA0B;AAC/B,SAAO,IAAP,EAAa;AACX;AACA,UAAM1O,SAAS,MAAM,mBAAKqE,YAAYI,OAAjB,CAArB;;AAEA;AACA,UAAMM,SAAS,MAAM,qBAAOC,wBAAP,CAArB;;AAEA;AACA,UAAM+J,OAAO,MAAM,mBAAKtG,OAAL,EAAczI,MAAd,EAAsB+E,MAAtB,CAAnB;;AAEA;AACA,UAAMiK,gBAAgB,MAAM,mBAAK,CAAC3K,YAAYuD,gBAAb,EAA+BvD,YAAYyC,UAA3C,CAAL,CAA5B;;AAEA;;;;;;;;;AASA,QAAIkI,cAAc3P,IAAd,KAAuBgF,YAAYyC,UAAvC,EAAmD;AACjD,YAAM,qBAAOiI,IAAP,CAAN;AACD,KAFD,MAEO,IAAIC,cAAc3P,IAAd,KAAuBgF,YAAYuD,gBAAnC,IAAuD,CAACoH,cAAc9O,KAA1E,EAAiF;AACtF,YAAM+O,mBAAmB,MAAM,mBAAK,CAAC5K,YAAYyC,UAAb,EAAyBzC,YAAY0D,mBAArC,CAAL,CAA/B;;AAEA;AACA,UAAIkH,iBAAiB5P,IAAjB,KAA0BgF,YAAY0D,mBAA1C,EAA+D;AAC7D;AACD;;AAED,YAAM,mBAAKf,UAAL,CAAN;AACD;AACF;AACF;;AAED;;;;;AAKO,UAAWyB,OAAX,CAAoBzI,MAApB,EAA4B+E,MAA5B,EAAoC;AACzC;AACA,MAAIE,iBAAiB;AACnB6I,aAAS;AAEX;AACA;AAJqB,GAArB,CAKA,MAAM,EAAE5I,WAAF,EAAenB,OAAf,KAA2B/D,OAAOmF,OAAxC;AACA,MAAID,WAAJ,EAAiB;AACf,UAAM,EAAEwB,QAAF,EAAY6D,QAAZ,EAAsBC,QAAtB,EAAgCC,SAAhC,KAA8CvF,WAApD;AACA,QAAIuF,SAAJ,EAAe;AACb;AACA;AACA;AACA5L,UAAI4G,IAAJ,CAAS,qCAAT;AACAR,qBAAe6I,OAAf,CAAuB,SAAvB,IAAoCrD,SAApC;AACD,KAND,MAMO,IAAID,YAAYD,QAAhB,EAA0B;AAC/B1L,UAAI4G,IAAJ,CAAS,6CAAT;AACAR,qBAAe6I,OAAf,CAAuBE,aAAvB,GAAuC,WAAWkB,eAAOC,MAAP,CAAcC,cAAKD,MAAL,CAAY3E,WAAW,GAAX,GAAiBD,QAA7B,CAAd,CAAlD;AACD,KAHM,MAGA,IAAI7D,YAAY6D,QAAhB,EAA0B;AAC/B1L,UAAI4G,IAAJ,CAAS,6CAAT;AACAR,qBAAe6I,OAAf,CAAuBE,aAAvB,GAAuC,WAAWkB,eAAOC,MAAP,CAAcC,cAAKD,MAAL,CAAYzI,WAAW,GAAX,GAAiB6D,QAA7B,CAAd,CAAlD;AACD,KAHM,MAGA;AACL1L,UAAI4G,IAAJ,CAAS,8BAAT;AACA,YAAMvF,QAAQ,IAAI2E,gBAAJ,CAAe;AAC3BC,iBAAS,oCADkB;AAE3BkB,cAAMC,kBAAUoJ;AAFW,OAAf,CAAd;AAIA,YAAM,kBAAI/K,QAAQM,eAAR,CAAwB,EAAE1E,KAAF,EAAxB,EAAmCuJ,QAAnC,CAAJ,CAAN;AACA;AACD;AACF;AACD,MAAI;AACFxE,qBAAiB,wBAAYlB,OAAZ,EAAqBkB,cAArB,CAAjB;;AAEA;AACA,UAAM0B,WAAW;AACfD,gBAAU1G,OAAOmF,OAAP,CAAeD,WAAf,CAA2BwB;AAEvC;AAHiB,KAAjB,CAIA,MAAMG,aAAa;AACjB3D,cAAQ;AACND,kBAAU8B,OAAO/B,YAAP,CAAoBC,QADxB;AAENC,gBAAQ6B,OAAO/B,YAAP,CAAoBE,MAFtB;AAGNC,cAAM4B,OAAO/B,YAAP,CAAoBG,IAHpB;AAINC,iBAAS2B,OAAO/B,YAAP,CAAoBI;AAJvB,OADS;AAOjBsD,gBAAU1G,OAAOmF,OAAP,CAAeD,WAAf,CAA2BwB,QAPpB;AAQjB;AACAzB;AATiB,KAAnB;AAWA,UAAM,kBACJX,QAAQoE,iBAAR,CACE;AACE/B,cADF;AAEEE;AAFF,KADF,EAKE4C,QALF,CADI,CAAN;;AAUA,UAAM/D,WAAW,MAAM,mBAAKC,mBAAL,EAAgBZ,OAAO/B,YAAvB,EAAqCkC,WAArC,EAAkDD,cAAlD,CAAvB;;AAEA,QAAIS,SAASxF,KAAb,EAAoB;AAClB,YAAM,kBAAIoE,QAAQM,eAAR,CAAwB,EAAE1E,OAAOwF,SAASxF,KAAlB,EAAxB,EAAmDuJ,QAAnD,CAAJ,CAAN;AACA;AACD;;AAED;AACA,QAAIvE,YAAYuF,SAAhB,EAA2B;AACzB;AACA;AACA,aAAOxF,eAAe6I,OAAf,CAAuB,SAAvB,CAAP;AACA;AACA7I,qBAAe6I,OAAf,CAAuB,WAAvB,IAAsCpI,SAASI,kBAAT,CAA4BwJ,SAAlE;AACD;;AAED;AACAzI,eAAWgH,KAAX,GAAmBnI,SAASmI,KAA5B;AACA;AACA,UAAM7K,0CACD0C,SAASI,kBADR;AAEJoH,oBAAcxH,SAASwH,YAFnB;AAGJ9G,WAAKV,SAAS1C;;AAGhB;AACA;AAPM,MAAN,CAQA,MAAMmD,2CACDpB,OAAOzB,SADN;AAEJ8C,WAAKpD,aAAaqD;;AAGpB;AALM,MAAN,CAMA,MAAMkJ,gBAAgB,MAAM,gCAAiBpJ,aAAjB,EAAgCsD,QAAhC,CAA5B;;AAEA,QAAI8F,cAAcrP,KAAlB,EAAyB;AACvB,YAAMqP,cAAcpK,OAApB;AACD;;AAED,UAAM,kBACJb,QAAQM,eAAR,CACE;AACE5B,kBADF;AAEE2D,cAFF;AAGEE;AAHF,KADF,EAME4C,QANF,CADI,CAAN;AAUD,GA9ED,CA8EE,OAAOvJ,KAAP,EAAc;AACd;AACA,UAAM,kBAAIoE,QAAQM,eAAR,CAAwB,EAAE1E,KAAF,EAAxB,EAAmCuJ,QAAnC,CAAJ,CAAN;AACD,GAjFD,SAiFU;AACR,QAAI,MAAM,yBAAV,EAAuB;AACrB,YAAM,mBAAKzC,UAAL,CAAN;AACA;AACA;AACA;AACD;AACF;AACF;;AAED;;;;;AAKO,UAAWA,UAAX,GAAyB;AAC9B;AACA,QAAMhE,eAAe,MAAM,qBAAOyJ,8BAAP,CAA3B;AACA,QAAM5F,aAAa,MAAM,qBAAOE,4BAAP,CAAzB;;AAEA;AACA,MAAIrB,WAAW,EAAf;AACA,MAAI1C,gBAAgB6D,UAApB,EAAgC;AAC9B;AACAnB,eAAW,MAAM,mBAAK8J,qBAAL,EAAkB3I,UAAlB,EAA8B7D,aAAaoD,GAA3C,CAAjB;AACD;;AAED,MAAIV,SAASxF,KAAb,EAAoB;AAClBrB,QAAI4G,IAAJ,CAAS,8CAAT,EAAyDC,SAASxF,KAAlE;AACA;AACD;;AAEDrB,MAAI4G,IAAJ,CAAS,0CAAT;AACA,QAAMgK,UAAU,MAAM,qBAAOC,8BAAP,EAA2BjG,QAA3B,CAAtB;AACA,MAAIgG,QAAQE,SAAZ,EAAuB;AACrB9Q,QAAI4G,IAAJ,CAAS,+BAAT;AACA;AACA,UAAM,mCAAoBqG,SAApB,EAA+BrC,QAA/B,CAAN;AACD;;AAED;AACA,MAAI/D,SAASxF,KAAb,EAAoB;AAClBrB,QAAI4G,IAAJ,CAAS,8CAAT,EAAyDC,SAASxF,KAAlE;AACA,UAAM,kBAAIoE,QAAQwE,kBAAR,CAA2BpD,QAA3B,CAAJ,CAAN;AACD,GAHD,MAGO;AACL7G,QAAI4G,IAAJ,CAAS,2CAAT;AACA;AACA,UAAM,kBAAInB,QAAQwE,kBAAR,EAAJ,CAAN;AACD;AACF;;AAED;;;;;AAKO,UAAW1E,kBAAX,GAAiC;AACtC;AACA;AACA,QAAMwL,gBAAgB,MAAM,4BAAc,CAACvL,YAAYuD,gBAAb,EAA+BvD,YAAY2D,uBAA3C,CAAd,CAA5B;;AAEA,SAAO,IAAP,EAAa;AACX,UAAMhI,SAAS,MAAM,mBAAK4P,aAAL,CAArB;;AAEA;AACA,QAAI5P,OAAOX,IAAP,KAAgBgF,YAAYuD,gBAA5B,IAAgD5H,OAAOE,KAA3D,EAAkE;AAChE;AACD;;AAED,UAAM2P,UAAU,MAAM,qBAAOjD,0BAAP,CAAtB;AACA,QAAI5J,eAAe,EAAnB;AACA,QAAI6D,aAAa,EAAjB;;AAEA,QAAIgJ,OAAJ,EAAa;AACX,YAAMC,iBAAiB,MAAM,qBAAO/I,4BAAP,CAA7B;;AAEAF,mBAAa;AACX3D,gBAAQ4M,eAAe5M,MADZ;AAEX2K,eAAO7N,OAAOmF,OAAP,CAAe0B,UAAf,CAA0BgH;AAFtB,OAAb;AAIA7K,qBAAe,MAAM,qBAAOyJ,8BAAP,CAArB;AACD,KARD,MAQO;AACL5F,mBAAa,MAAM,qBAAOE,4BAAP,CAAnB;AACA/D,qBAAe,MAAM,qBAAOyJ,8BAAP,CAArB;AACD;;AAED,QAAIrC,UAAJ;AACA;AACA,QAAIpK,OAAOX,IAAP,KAAgBgF,YAAY2D,uBAA5B,IAAuDhI,OAAOE,KAAlE,EAAyE;AACvEkK,mBAAapK,OAAOmF,OAAP,CAAeiF,UAAf,GAA4B,CAAzC;AACD,KAFD,MAEO;AACLA,mBAAa,CAAb;AACD;;AAED;AACA,QAAI2F,aAAc/M,aAAaqL,OAAb,GAAuB,IAAxB,GAAgC7R,KAAKwT,GAAL,CAAS,CAAT,EAAY5F,UAAZ,CAAjD;AACA;AACA2F,iBAAaA,aAAa,KAAb,GAAqBA,UAArB,GAAkC,KAA/C;;AAEA;AACA,UAAM,EAAEE,MAAF,KAAa,MAAM,mBAAK;AAC5BA,cAAQ,oBAAMF,UAAN,CADoB;AAE5B/I,kBAAY,mBAAK3C,YAAY0D,mBAAjB;AAFgB,KAAL,CAAzB;;AAKA;AACA,QAAIkI,MAAJ,EAAY;AACV,YAAMvK,WAAW,MAAM,mBAAKwK,qBAAL,EAAkBrJ,UAAlB,EAA8B7D,YAA9B,EAA4C6M,OAA5C,CAAvB;;AAEA,UAAInK,SAASxF,KAAb,EAAoB;AAClB,cAAM,kBACJoE,QAAQyE,mBAAR,CACE;AACE7I,iBAAOwF,SAASxF,KADlB;AAEEkK;AAFF,SADF,EAKEX,QALF,CADI,CAAN;AASD,OAVD,MAUO;AACL;AACA,cAAM,kBAAInF,QAAQyE,mBAAR,CAA4B,EAAEqB,UAAF,EAA5B,EAA4CX,QAA5C,CAAJ,CAAN;AACD;AACF;AACF;AACF;;AAED;;;;AAIO,UAAWP,kBAAX,GAAiC;AACtC,SAAO,IAAP,EAAa;AACX,UAAMlJ,SAAS,MAAM,mBAAKqE,YAAY8D,mBAAjB,CAArB;AACAtJ,QAAI+L,KAAJ,CAAU,+CAAV,EAA2D5K,OAAOmF,OAAlE;;AAEA,UAAM0K,UAAU,MAAM,qBAAOjD,0BAAP,CAAtB;AACA,UAAM/F,aAAa,MAAM,qBAAOE,4BAAP,CAAzB;AACA,UAAM/D,eAAe,MAAM,qBAAOyJ,8BAAP,CAA3B;AACAzJ,iBAAaK,OAAb,GAAuBrD,OAAOmF,OAA9B;;AAEA;AACA,UAAMO,WAAW,MAAM,mBAAKwK,qBAAL,EAAkBrJ,UAAlB,EAA8B7D,YAA9B,EAA4C6M,OAA5C,CAAvB;;AAEA,QAAInK,SAASxF,KAAb,EAAoB;AAClBrB,UAAI+L,KAAJ,CAAU,yCAAV;AACA,YAAM,kBACJtG,QAAQ6E,0BAAR,CACE;AACEjJ,eAAO,IAAI2E,gBAAJ,CAAe;AACpBC,mBAASY,SAASZ,OADE;AAEpBkB,gBAAMC,kBAAUkK;AAFI,SAAf;AADT,OADF,EAOE1G,QAPF,CADI,CAAN;AAWD,KAbD,MAaO;AACL5K,UAAI+L,KAAJ,CAAU,4CAAV,EAAwD5K,OAAOmF,OAA/D;AACA;AACA;AACA,YAAM,kBACJb,QAAQ6E,0BAAR,CACE;AACEnG,sBAAc;AACZK,mBAASrD,OAAOmF;AADJ;AADhB,OADF,EAMEsE,QANF,CADI,CAAN;AAUD;AACF;AACF;;AAED;;;;;AAKO,UAAWkF,kBAAX,GAAiC;AACtC;AACA;AACA,WAASyB,oBAAT,CAA+BpQ,MAA/B,EAAuC;AACrC,WACEA,OAAOX,IAAP,KAAgBgR,mCAAhB,IACArQ,OAAOmF,OAAP,CAAemL,mBADf,IAEAtQ,OAAOmF,OAAP,CAAemL,mBAAf,CAAmCC,SAAnC,KAAiD,MAHnD;AAKD;;AAED,SAAO,IAAP,EAAa;AACX,UAAM,mBAAKH,oBAAL,CAAN;;AAEA;AACA;AACA,UAAMX,UAAU,MAAM,qBAAOC,8BAAP,EAA2BjG,QAA3B,CAAtB;AACA,QAAIgG,QAAQE,SAAZ,EAAuB;AACrB,YAAM,mCAAoB7D,SAApB,EAA+BrC,QAA/B,CAAN;AACD;;AAED;AACA,UAAM,kBAAInF,QAAQwE,kBAAR,CAA2B,EAAEqB,QAAQ7C,8BAAmBC,IAA7B,EAA3B,CAAJ,CAAN;AACD;AACF;;AAED;;;;AAIO,UAAWqH,qBAAX,GAAoC;AACzC,QAAM,wBAAUE,wBAAwB0B,mBAAlC,EAAuD3B,gBAAvD,CAAN;AACD;;AAED;;;;AAIO,UAAWA,gBAAX,GAA+B;AACpC,QAAM,kBAAIvK,QAAQwE,kBAAR,CAA2B,EAAEqB,QAAQ7C,8BAAmBE,eAA7B,EAA3B,CAAJ,CAAN;AACD,C;;;;;;;;;;;;;;;;;;;;;;QCxZiB7B,S,GAAAA,S;QA4GA6J,W,GAAAA,W;QAkFAU,W,GAAAA,W;;AAtNlB;;AACA;;AAGA;;;;AACA;;;;AACA;;AAGA;;AACA;;AAGA;;;;AAVA;AAJA;AAgBA,MAAMrR,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,CAAZ;;AAEA;;;;;;;;;AALA;;;AAJA;AAgBO,UAAWmB,SAAX,CAAsBkB,UAAtB,EAAkC3B,WAAlC,EAA+CuL,SAAS,EAAxD,EAA4D;AACjE;;;;;AAKA,QAAMC,gBAAgB7J,WAAWrB,WAAX,GAAyB,WAAzB,GAAuC,MAA7D;AACA,MAAIP,iBAAiB,EAArB;AACAA,iBAAe0L,MAAf,GAAwB,MAAxB;;AAEA1L,iBAAemB,GAAf,GACG,GAAES,WAAW5D,QAAS,MAAK4D,WAAW3D,MAAO,IAAG2D,WAAW1D,IAAK,EAAjE,GACC,iBAAgB0D,WAAWzD,OAAQ,EADpC,GAEC,IAAGsN,aAAc,IAAGxL,YAAYwB,QAAS,eAH5C;;AAKAzB,iBAAe2L,IAAf,GAAsB,yBAAe;AACnCC,sBAAkB;AAChBxC,eAASxH,WAAWwH,OADJ;AAEhBhL,eAASwD,WAAWxD,OAFJ;AAGhByN,oBAAcjK,WAAWiK,YAAX,IAA2B,YAHzB;AAIhBC,eAASlK,WAAWkK,OAAX,IAAsB,IAJf;AAKhBC,wBAAkBnK,WAAWmK,gBAAX,IAA+B,WALjC;AAMhBC,iBAAW,CAAC,iBAAD,CANK;AAOhBC,mBAAa,CAACT,OAAOS,WAAP,IAAsB,KAAvB,EAA8BvU,QAA9B,EAPG;AAQhB6Q,wBAAkBiD,OAAOjD;AART;AADiB,GAAf,CAAtB;;AAaA;AACA;AACAvI,mBAAiB,wBAAYwL,MAAZ,EAAoBxL,cAApB,CAAjB;;AAEApG,MAAI4G,IAAJ,CAAU,oBAAmBP,YAAYwB,QAAS,EAAlD;AACA;AACA,QAAMhB,WAAW,MAAM,uBAAQT,cAAR,CAAvB;;AAEA,MAAIS,SAASxF,KAAb,EAAoB;AAClB,QAAIwF,SAASP,OAAT,CAAiByL,IAArB,EAA2B;AACzB,YAAMA,OAAOlL,SAASP,OAAT,CAAiByL,IAA9B;;AAEA,UAAIO,UAAJ;AACA,UAAIP,KAAKO,UAAL,IAAmBP,KAAKzG,MAA5B,EAAoC;AAClC;;;;;;;AAOAgH,qBAAaP,KAAKO,UAAlB;AACD,OATD,MASO,IAAIP,KAAKQ,qBAAL,IAA8BR,KAAKQ,qBAAL,CAA2BD,UAA7D,EAAyE;AAC9E;;;;;;AAMAA,qBAAaP,KAAKQ,qBAAL,CAA2BD,UAAxC;AACD,OARM,MAQA;AACLA,qBAAaP,KAAKS,iBAAL,CAAuBF,UAApC;AACD;AACDtS,UAAI+L,KAAJ,CAAW,6CAA4CuG,UAAW,GAAlE;;AAEA;AACA,aAAO;AACL;AACAjR,eAAO,IAAI2E,gBAAJ,CAAe;AACpBC,mBAAU,mCAAkCqM,UAAW,GADnC;AAEpBnL,gBAAMC,kBAAUqL;AAFI,SAAf;AAFF,OAAP;AAOD,KAlCD,MAkCO;AACLzS,UAAI+L,KAAJ,CAAU,2BAAV,EAAuClF,SAASP,OAAT,CAAiBoM,MAAjB,CAAwBzM,OAA/D;AACA;AACA,aAAO;AACL;AACA5E,eAAO,IAAI2E,gBAAJ,CAAe;AACpBC,mBAAU,6BAA4BY,SAASP,OAAT,CAAiBoM,MAAjB,CAAwBzM,OAAQ,GADlD;AAEpB;AACAkB,gBAAMC,kBAAUqL;AAHI,SAAf;AAFF,OAAP;AAQD;AACF,GA/CD,MA+CO;AACL;AACA,UAAMD,oBAAoB3L,SAASP,OAAT,CAAiByL,IAAjB,CAAsBS,iBAAhD;;AAEA,UAAMG,qBAAqBH,kBAAkBvL,kBAAlB,CAAqCzC,OAAhE;AACA,UAAM6J,eAAe,MAAM,oBAAKuE,4BAAL,EAAyB5K,WAAWxD,OAApC,EAA6CmO,kBAA7C,CAA3B;AACA3S,QAAI+L,KAAJ,CAAW,8DAA6DsC,aAAaI,MAAO,EAA5F;;AAEA;AACEpN,aAAO,KADT;AAEEgN;AAFF,OAGKmE,iBAHL;AAKD;AACF;;AAED;;;;;;;;;AASO,UAAW7B,WAAX,CAAwB3I,UAAxB,EAAoC6K,eAApC,EAAqD;AAC1D,QAAMzM,iBAAiB,EAAvB;AACAA,iBAAe0L,MAAf,GAAwB,QAAxB;;AAEA1L,iBAAemB,GAAf,GACG,GAAES,WAAW3D,MAAX,CAAkBD,QAAS,MAAK4D,WAAW3D,MAAX,CAAkBA,MAAO,IAAG2D,WAAW3D,MAAX,CAAkBC,IAAK,EAAtF,GAA0FuO,eAD5F;;AAGA7S,MAAI4G,IAAJ,CAAS,qBAAT;AACA;AACA,QAAMC,WAAW,MAAM,uBAAQT,cAAR,CAAvB;;AAEA,MAAIS,SAASxF,KAAb,EAAoB;AAClB,QAAIwF,SAASP,OAAT,CAAiByL,IAAjB,IAAyBlL,SAASP,OAAT,CAAiByL,IAAjB,CAAsBS,iBAAnD,EAAsE;AACpE;AACA,YAAM,EAAEF,UAAF,KAAiBzL,SAASP,OAAT,CAAiByL,IAAjB,CAAsBS,iBAA7C;AACAxS,UAAI+L,KAAJ,CAAW,+CAA8CuG,UAAW,GAApE;;AAEA,aAAO;AACL;AACAjR,eAAO,IAAI2E,gBAAJ,CAAe;AACpBC,mBAAU,qCAAoCqM,UAAW,GADrC;AAEpBnL,gBAAMC,kBAAU0L;AAFI,SAAf;AAFF,OAAP;AAOD,KAZD,MAYO;AACL;AACA,YAAM,EAAE7M,OAAF,KAAcY,SAASP,OAAT,CAAiBoM,MAArC;AACA1S,UAAI+L,KAAJ,CAAU,6BAAV,EAAyC9F,OAAzC;;AAEA,aAAO;AACL;AACA5E,eAAO,IAAI2E,gBAAJ,CAAe;AACpBC,mBAAU,+BAA8BA,OAAQ,GAD5B;AAEpB;AACAkB,gBAAMC,kBAAU0L;AAHI,SAAf;AAFF,OAAP;AAQD;AACF,GA3BD,MA2BO;AACL;AACA,UAAMC,gBAAgBlM,SAASP,OAAT,CAAiByL,IAAjB,CAAsBS,iBAA5C;AACA,UAAM5H,WAAW,MAAM,sBAAOoD,sBAAP,CAAvB;;AAEA,QAAIpD,aAAa7D,qBAAUC,IAAvB,IAA+B+L,cAAcT,UAAd,KAA6B,CAAhE,EAAmE;AACjEtS,UAAI4G,IAAJ,CAAS,iCAAT;AACA;AACA;AACEvF,eAAO;AADT,SAEK0R,aAFL;AAID,KAPD,MAOO,IAAInI,aAAa7D,qBAAUqI,EAAvB,IAA6B2D,cAAcT,UAAd,KAA6B,CAA9D,EAAiE;AACtEtS,UAAI4G,IAAJ,CAAS,iCAAT;AACA;AACA;AACEvF,eAAO;AADT,SAEK0R,aAFL;AAID,KAPM,MAOA;AACL/S,UAAI4G,IAAJ,CAAS,2CAAT,EAAsDmM,cAAcT,UAApE;AACA;AACA,aAAO;AACLjR,eAAO,IAAI2E,gBAAJ,CAAe;AACpBC,mBAAU,8BAA6B8M,cAAcT,UAAW,GAD5C;AAEpBnL,gBAAMC,kBAAU0L;AAFI,SAAf;AADF,OAAP;AAMD;AACF;AACF;;AAED;;;;;;;;;;;;AAYO,UAAWzB,WAAX,CAAwBrJ,UAAxB,EAAoC7D,YAApC,EAAkD;AACvD,QAAMiC,iBAAiB,EAAvB;AACAA,iBAAe0L,MAAf,GAAwB,KAAxB;;AAEA,MAAI3N,aAAawK,gBAAjB,EAAmC;AACjCvI,mBAAemB,GAAf,GACG,GAAES,WAAW3D,MAAX,CAAkBD,QAAS,MAAK4D,WAAW3D,MAAX,CAAkBA,MAAO,IAAG2D,WAAW3D,MAAX,CAAkBC,IAAK,EAAtF,GACC,iBAAgB0D,WAAW3D,MAAX,CAAkBE,OAAQ,EAD3C,GAEC,SAAQyD,WAAWH,QAAS,kCAAiC1D,aAAawK,gBAAiB,EAH9F;AAID,GALD,MAKO;AACLvI,mBAAemB,GAAf,GACG,GAAES,WAAW3D,MAAX,CAAkBD,QAAS,MAAK4D,WAAW3D,MAAX,CAAkBA,MAAO,IAAG2D,WAAW3D,MAAX,CAAkBC,IAAK,EAAtF,GAA0FH,aAAaoD,GADzG;AAED;;AAED;AACA;AACAnB,iBAAe2L,IAAf,GAAsB,yBAAe;AACnCC,sBAAkB;AAChBxC,eAASrL,aAAaqL,OADN;AAEhBhL,eAASL,aAAaK,OAFN;AAGhByN,oBAAc9N,aAAa8N,YAAb,IAA6B,YAH3B;AAIhBC,eAAS/N,aAAa+N,OAAb,IAAwB,IAJjB;AAKhBC,wBAAkBhO,aAAagO,gBAAb,IAAiC;AALnC;AADiB,GAAf,CAAtB;;AAUAnS,MAAI4G,IAAJ,CAAS,qBAAT;AACA;AACA,QAAMC,WAAW,MAAM,uBAAQT,cAAR,CAAvB;;AAEA,MAAIS,SAASxF,KAAb,EAAoB;AAClB,QAAIwF,SAASP,OAAT,CAAiByL,IAArB,EAA2B;AACzB;AACA,YAAM,EAAEO,UAAF,KAAiBzL,SAASP,OAAT,CAAiByL,IAAjB,CAAsBS,iBAA7C;AACAxS,UAAI+L,KAAJ,CAAW,uDAAsDuG,UAAW,GAA5E;;AAEA,aAAO;AACL;AACAjR,eAAO,IAAI2E,gBAAJ,CAAe;AACpBC,mBAAU,6CAA4CqM,UAAW,GAD7C;AAEpBnL,gBAAMC,kBAAUkK;AAFI,SAAf;AAFF,OAAP;AAOD,KAZD,MAYO;AACL;AACA,YAAM,EAAErL,OAAF,KAAcY,SAASP,OAAT,CAAiBoM,MAArC;AACA1S,UAAI+L,KAAJ,CAAU,0CAAV,EAAsD9F,OAAtD;;AAEA,aAAO;AACL;AACA5E,eAAO,IAAI2E,gBAAJ,CAAe;AACpBC,mBAAU,wCAAuCA,OAAQ,GADrC;AAEpB;AACAkB,gBAAMC,kBAAUkK;AAHI,SAAf;AAFF,OAAP;AAQD;AACF,GA3BD,MA2BO;AACL;AACA,UAAM0B,gBAAgBnM,SAASP,OAAT,CAAiByL,IAAjB,CAAsBS,iBAA5C;;AAEA,QAAIQ,cAAcV,UAAd,KAA6B,CAA7B,IAAkCU,cAAcV,UAAd,KAA6B,CAAnE,EAAsE;AACpE,YAAMK,qBAAqBK,cAAc/L,kBAAd,CAAiCzC,OAA5D;AACA,YAAM6J,eAAe,MAAM,oBAAKuE,4BAAL,EAAyBzO,aAAaK,OAAtC,EAA+CmO,kBAA/C,CAA3B;AACA3S,UAAI+L,KAAJ,CAAW,kEAAiEsC,aAAaI,MAAO,EAAhG;;AAEA;AACA;AACEpN,eAAO,KADT;AAEEgN;AAFF,SAGK2E,aAHL;AAKD,KAXD,MAWO;AACLhT,UAAI4G,IAAJ,CAAS,2CAAT,EAAsDoM,cAAcV,UAApE;AACA;AACA,aAAO;AACLjR,eAAO,IAAI2E,gBAAJ,CAAe;AACpBC,mBAAU,8BAA6B+M,cAAcV,UAAW,GAD5C;AAEpBnL,gBAAMC,kBAAUkK;AAFI,SAAf;AADF,OAAP;AAMD;AACF;AACF,C;;;;;;;;;;;;;QChSesB,kB,GAAAA,kB;;AAVhB;;AAEA;;;;;;;;AAQO,SAASA,kBAAT,CAA6BtE,SAA7B,EAAwCC,QAAxC,EAAkD;AACvD;AACA,QAAM0E,gBAAgB1E,SAAS2E,GAAT,CAAa1O,WAAWA,QAAQ2O,WAAR,EAAxB,CAAtB;;AAEA;AACA,QAAM3E,UAAUF,UAAUtP,MAAV,CAAiB,UAAUoU,UAAV,EAAsB;AACrD;AACA;AACA,WAAOH,cAAc5T,OAAd,CAAsB+T,WAAWD,WAAX,EAAtB,MAAoD,CAAC,CAA5D;AACD,GAJe,CAAhB;;AAMA,QAAME,gBAAgB;AACpB/E,aADoB;AAEpBC,YAFoB;AAGpBC,WAHoB;AAIpBC,YAAQ,SAJY;AAKpBC,cAAU;;AAGZ;AARsB,GAAtB,CASA,IAAIH,SAASxR,MAAT,KAAoB,CAAxB,EAA2B;AACzBsW,kBAAc5E,MAAd,GAAuBpG,8BAAmBG,IAA1C;AACD,GAFD,MAEO,IAAI+F,SAASxR,MAAT,GAAkB,CAAlB,IAAuByR,QAAQzR,MAAR,GAAiB,CAA5C,EAA+C;AACpDsW,kBAAc5E,MAAd,GAAuBpG,8BAAmBE,OAA1C;AACD,GAFM,MAEA,IAAIgG,SAASxR,MAAT,GAAkB,CAAlB,IAAuBuR,UAAUvR,MAAV,KAAqBwR,SAASxR,MAAzD,EAAiE;AACtEsW,kBAAc5E,MAAd,GAAuBpG,8BAAmBC,IAA1C;AACD,GAFM,MAEA,CAEN;AADC;;;AAGF;AACAiG,WAASnP,OAAT,CAAiB,UAAUoF,OAAV,EAAmB;AAClC6O,kBAAc3E,QAAd,CAAuBlK,OAAvB,IAAkC,IAAlC;AACD,GAFD;AAGAgK,UAAQpP,OAAR,CAAgB,UAAUoF,OAAV,EAAmB;AACjC6O,kBAAc3E,QAAd,CAAuBlK,OAAvB,IAAkC,KAAlC;AACD,GAFD;;AAIA,SAAO6O,aAAP;AACD,C;;;;;;;;;;;;;;;ACjDD;;AAEA;;;;;;AAMA,SAASC,eAAT,CAA0BC,MAA1B,EAAkC;AAChC,SAAO,iBAAQ,UAAU/W,KAAV,EAAiB;AAC9B,WAAO+W,OAAO/W,KAAP,CAAP;AACD,GAFM,EAEJ+W,MAFI,CAAP;AAGD;;AAED;;;;;;;AAOO,MAAMC,4CAAkB;AAC7B,KAAG,SAD0B;AAE7B,KAAG,SAF0B;AAG7B,KAAG,SAH0B;AAI7B,KAAG,OAJ0B;AAK7B,KAAG,UAL0B;AAM7B,KAAG,UAN0B;AAO7B,KAAG,UAP0B;AAQ7B,KAAG,WAR0B;AAS7B,KAAG,QAT0B;AAU7B,KAAG,eAV0B;AAW7B,MAAI,aAXyB;AAY7B,MAAI,gBAZyB;AAa7B,MAAI,kBAbyB;AAc7B,MAAI,aAdyB;AAe7B,MAAI,kBAfyB;AAgB7B,MAAI;;AAGN;;;;;AAnB+B,CAAxB,CAwBA,MAAMC,4CAAkBH,gBAAgBE,eAAhB,CAAxB;;AAEP;;;;;AAKO,MAAME,oCAAc;AACzBC,cAAY,YADa;AAEzBC,aAAW,WAFc;AAGzBC,eAAa,aAHY;AAIzBC,WAAS,SAJgB;AAKzBC,aAAW,WALc;AAMzBC,aAAW,WANc;AAOzBC,WAAS,SAPgB;AAQzBC,SAAO;;AAGT;;;;;;;;;;AAX2B,CAApB,CAqBA,MAAMC,gDAAoB;AAC/BH,aAAW,WADoB;AAE/BI,cAAY,YAFmB;AAG/BC,eAAa,aAHkB;AAI/BC,aAAW;;AAGb;;;;;;;;;AAPiC,CAA1B,CAgBA,MAAMC,kCAAa;AACxBC,gBAAc,cADU;AAExBC,cAAY,YAFY;AAGxBC,gBAAc,cAHU;AAIxBC,iBAAe;;AAGjB;;;;;;;;AAP0B,CAAnB,CAeA,MAAMC,kDAAqB;AAChCC,mBAAiB,iBADe;AAEhCC,yBAAuB,uBAFS;AAGhCC,QAAM;;AAGR;;;;;;;;;;;AANkC,CAA3B,CAiBA,MAAMC,kEAA6B;AACxCC,2BAAyB,4BADe;AAExCC,iCAA+B,qBAFS;AAGxCC,gBAAc,iBAH0B;AAIxCC,2BAAyB,wBAJe;AAKxCC,iCAA+B,iBALS;AAMxCC,gBAAc;;AAGhB;;;;;;;;;;;AAT0C,CAAnC,CAoBA,MAAMC,sCAAe;AAC1BN,2BAAyB,IADC;AAE1BC,iCAA+B,IAFL;AAG1BC,gBAAc,IAHY;AAI1BC,2BAAyB,CAAC,CAJA;AAK1BC,iCAA+B,CAAC,CALN;AAM1BC,gBAAc,CAAC;;AAGjB;;;;;AAT4B,CAArB,CAcA,MAAME,0CAAiB;AAC5BC,YAAU,UADkB;AAE5BC,YAAU;;AAGZ;;;;AAL8B,CAAvB,CASA,MAAMC,oDAAsB;AACjCC,cAAY,YADqB;AAEjCC,cAAY,QAFqB;AAGjCC,eAAa;;AAGf;;;;;;;AANmC,CAA5B,CAaA,MAAMC,sDAAuB;AAClC,KAAG,KAD+B;AAElC,KAAG,UAF+B;AAGlC,KAAG,WAH+B;AAIlC,KAAG,WAJ+B;AAKlC,KAAG,QAL+B;AAMlC,KAAG,cAN+B;AAOlC,KAAG;;AAGL;;;;;AAVoC,CAA7B,CAeA,MAAMC,8CAAmB1C,gBAAgByC,oBAAhB,CAAzB,C;;;;;;;;;;;;;QC9JWE,sB,GAAAA,sB;QAkDAC,iB,GAAAA,iB;QAuEFC,mB,GAAAA,mB;;AA1JhB;;AACA;;AAGA;;;;AAGA;;AACA;;;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;AAJA;AA2BO,UAAWF,sBAAX,CAAmCG,MAAnC,EAA2CC,MAA3C,EAAmD;AACxD,QAAMC,aAAa,MAAM,qBAAOC,sBAAP,EAAoBF,MAApB,CAAzB;;AAEA,MAAI,CAACC,UAAL,EAAiB;AACf,WAAO;AACLjV,aAAO,IAAI2E,gBAAJ,CAAe;AACpBC,iBAAS,wCADW;AAEpBkB,cAAMqP,kBAAUC;AAFI,OAAf;AADF,KAAP;AAMD,GAPD,MAOO,IAAIH,WAAWtJ,KAAX,KAAqB0G,uBAAYQ,KAArC,EAA4C;AACjD,WAAO;AACLoC,gBADK;AAELjV,aAAO,IAAI2E,gBAAJ,CAAe;AACpBC,iBAAS,6CADW;AAEpBkB,cAAMqP,kBAAUE;AAFI,OAAf;AAFF,KAAP;AAOD,GARM,MAQA,IAAI,CAACJ,WAAWK,eAAhB,EAAiC;AACtC,WAAO;AACLL,gBADK;AAELjV,aAAO,IAAI2E,gBAAJ,CAAe;AACpBC,iBAAS,2CADW;AAEpBkB,cAAMqP,kBAAUI;AAFI,OAAf;AAFF,KAAP;AAOD;;AAED,QAAMC,UAAU,MAAM,mBAAK,CAACT,OAAOU,cAAR,EAAwB,KAAxB,CAAL,EAAqCR,WAAWK,eAAhD,CAAtB;;AAEA,MAAI,CAACE,OAAL,EAAc;AACZ,WAAO;AACLP,gBADK;AAELjV,aAAO,IAAI2E,gBAAJ,CAAe;AACpBC,iBAAS,uDADW;AAEpBkB,cAAMqP,kBAAUI;AAFI,OAAf;AAFF,KAAP;AAOD;;AAED,SAAO,EAAEN,UAAF,EAAcO,OAAd,EAAP;AACD;;AAED;;;;;;;;;AAzEA;AAJA;AAoFO,UAAWX,iBAAX,CAA8BG,MAA9B,EAAsCU,QAAtC,EAAgD;AACrD;;;;;;;;AAQA,WAASC,UAAT,CAAqBC,GAArB,EAA0BC,KAA1B,EAAiC;AAC/B,UAAMC,cAAc,EAApB;AACA;AACA,SAAK,MAAMC,IAAX,IAAmBH,GAAnB,EAAwB;AACtB,UAAI,iBAAQA,IAAIG,IAAJ,CAAR,CAAJ,EAAwB;AACtB;AACA,YAAI,oBAAWH,IAAIG,IAAJ,CAAX,EAAsBF,MAAME,IAAN,CAAtB,EAAmCra,MAAnC,GAA4C,CAAhD,EAAmD;AACjDoa,sBAAY5Z,IAAZ,CAAiB6Z,IAAjB;AACD;AACF,OALD,MAKO,IAAI,kBAASH,IAAIG,IAAJ,CAAT,CAAJ,EAAyB;AAC9B;AACA,YAAIJ,WAAWC,IAAIG,IAAJ,CAAX,EAAsBF,MAAME,IAAN,CAAtB,EAAmCra,MAAnC,GAA4C,CAAhD,EAAmD;AACjD;AACAoa,sBAAY5Z,IAAZ,CAAiB6Z,IAAjB;AACD;AACF,OANM,MAMA;AACL;AACA,YAAIH,IAAIG,IAAJ,MAAcF,MAAME,IAAN,CAAlB,EAA+B;AAC7BD,sBAAY5Z,IAAZ,CAAiB6Z,IAAjB;AACD;AACF;AACF;;AAED,WAAOD,WAAP;AACD;;AAED,QAAMb,aAAa,MAAM,qBAAOC,sBAAP,EAAoBF,MAApB,CAAzB;;AAEA;AACA,MAAI,CAACC,UAAL,EAAiB;AACf,WAAO,IAAItQ,gBAAJ,CAAe;AACpBmB,YAAMqP,kBAAUC,aADI;AAEpBxQ,eAAS;AAFW,KAAf,CAAP;AAID;;AAED;AACA,QAAMkR,cAAcH,WAAWD,QAAX,EAAqBT,UAArB,CAApB;;AAEA,MAAIa,YAAYpa,MAAZ,KAAuB,CAA3B,EAA8B;AAC5B,WAAO,KAAP;AACD,GAFD,MAEO;AACL,WAAO,IAAIiJ,gBAAJ,CAAe;AACpBmB,YAAMqP,kBAAUE,aADI;AAEpBzQ,eAAU,gCAA+BkR,WAAY;AAFjC,KAAf,CAAP;AAID;AACF;;AAED;;;;;;;;;;;;;AAaO,SAAShB,mBAAT,CAA8BkB,MAA9B,EAAsCzQ,IAAtC,EAA4C0Q,WAA5C,EAAyD;AAC9D,OAAK,MAAMC,KAAX,IAAoBF,OAAOG,KAA3B,EAAkC;AAChC,QAAID,MAAME,MAAN,IAAgBF,MAAMG,WAA1B,EAAuC;AACrC,aAAOH,MAAME,MAAb;AACD;AACF;AACD,SAAOJ,MAAP;AACD,C;;;;;;;;;;;;;AClKD,MAAMM,aAAa,eAAnB;;AAEA;;;AAGO,MAAMC,gCAAYD,aAAa,MAA/B;AACA,MAAME,gDAAoBF,aAAa,cAAvC;AACA,MAAMG,4CAAkBH,aAAa,iBAArC;AACA,MAAMI,8CAAmBJ,aAAa,aAAtC;;AAEA,MAAMK,oDAAsBL,aAAa,qBAAzC;AACA,MAAMM,kEAA6BN,aAAa,4BAAhD;;AAEA,MAAMO,wCAAgBP,aAAa,UAAnC;;AAEA,MAAMQ,sCAAeR,aAAa,SAAlC;AACA,MAAMS,8CAAmBT,aAAa,kBAAtC;AACA,MAAMU,0CAAiBV,aAAa,WAApC;;AAEA,MAAMW,kCAAaX,aAAa,OAAhC;;AAEA,MAAMY,oCAAcZ,aAAa,QAAjC;AACA,MAAMa,kDAAqBb,aAAa,eAAxC;;AAEA,MAAMc,oCAAcd,aAAa,QAAjC;AACA,MAAMe,kDAAqBf,aAAa,eAAxC;;AAEA,MAAMgB,oCAAchB,aAAa,QAAjC;AACA,MAAMiB,kDAAqBjB,aAAa,eAAxC;;AAEA,MAAMkB,wCAAgBlB,aAAa,UAAnC;;AAEA,MAAMmB,8BAAWnB,aAAa,KAA9B;AACA,MAAMoB,4CAAkBpB,aAAa,YAArC;;AAEA,MAAMqB,sCAAerB,aAAa,cAAlC;AACA,MAAMsB,oDAAsBtB,aAAa,qBAAzC;;AAEA,MAAMuB,gDAAoBvB,aAAa,mBAAvC;;AAEP;;;;AAIO,MAAMwB,oCAAcxB,aAAa,aAAjC;;AAEA,MAAMyB,gCAAYzB,aAAa,MAA/B;AACA,MAAM0B,8CAAmB1B,aAAa,aAAtC;;AAEA,MAAM2B,oCAAc3B,aAAa,QAAjC;AACA,MAAM4B,kDAAqB5B,aAAa,eAAxC;;AAEA,MAAM6B,wDAAwB7B,aAAa,uBAA3C;;AAEA,MAAM8B,0DAAyB9B,aAAa,wBAA5C;AACA,MAAM+B,wEAAgC/B,aAAa,+BAAnD;;AAEA,MAAMgC,gCAAYhC,aAAa,WAA/B;AACA,MAAMiC,8CAAmBjC,aAAa,kBAAtC;AACA,MAAMkC,4CAAkBlC,aAAa,iBAArC;;AAEA,MAAMmC,sCAAenC,aAAa,cAAlC;AACA,MAAMoC,oDAAsBpC,aAAa,qBAAzC;AACA,MAAMqC,kDAAqBrC,aAAa,oBAAxC;;AAEA,MAAMsC,oCAActC,aAAa,aAAjC;AACA,MAAMuC,kDAAqBvC,aAAa,oBAAxC;;AAEA,MAAMhD,wCAAgBgD,aAAa,eAAnC;;AAEA,MAAMwC,gCAAYxC,aAAa,WAA/B;AACA,MAAMyC,8CAAmBzC,aAAa,kBAAtC;;AAEA,MAAM0C,gCAAY1C,aAAa,WAA/B;AACA,MAAM2C,8CAAmB3C,aAAa,kBAAtC;;AAEA,MAAM7C,wDAAwB6C,aAAa,uBAA3C;AACA,MAAM4C,wEAAgC5C,aAAa,+BAAnD;AACA,MAAM6C,sEAA+B7C,aAAa,8BAAlD;;AAEA,MAAM9C,4CAAkB8C,aAAa,iBAArC;AACA,MAAM8C,0DAAyB9C,aAAa,wBAA5C;;AAEA,MAAM5C,sBAAO4C,aAAa,MAA1B;AACA,MAAM+C,sCAAe/C,aAAa,cAAlC;AACA,MAAMgD,oCAAchD,aAAa,aAAjC;;AAEA,MAAMiD,wCAAgBjD,aAAa,eAAnC;AACA,MAAMkD,sDAAuBlD,aAAa,sBAA1C;;AAEP;;;AAGO,MAAMmD,kEAA6BnD,aAAa,4BAAhD;AACA,MAAMoD,sDAAuBpD,aAAa,sBAA1C;AACA,MAAMqD,kEAA6BrD,aAAa,4BAAhD;;AAEP;;;AAGO,MAAMsD,4DAA0BtD,aAAa,oBAA7C;AACA,MAAMuD,gEAA4BvD,aAAa,sBAA/C;AACA,MAAMwD,4DAA0BxD,aAAa,yBAA7C;AACA,MAAMyD,kEAA6BzD,aAAa,4BAAhD;AACA,MAAM0D,4DAA0B1D,aAAa,yBAA7C;AACA,MAAM2D,0DAAyB3D,aAAa,wBAA5C;AACA,MAAM4D,gDAAoB5D,aAAa,mBAAvC;;AAEP;;;AAGA,MAAM6D,aAAa7D,aAAa,OAAhC;;AAEO,MAAM8D,sCAAeD,aAAa,SAAlC;;AAEP;;;AAGA,MAAME,cAAc/D,aAAa,QAAjC;;AAEO,MAAMgE,oCAAcD,cAAc,OAAlC;AACA,MAAME,wCAAgBF,cAAc,SAApC,C;;;;;;;;;;;;;;;;;;QCzGSG,gB,GAAAA,gB;QAkCAC,Q,GAAAA,Q;QAIAC,c,GAAAA,c;QAIAC,e,GAAAA,e;QAIAC,c,GAAAA,c;QAIAC,iB,GAAAA,iB;QAaAC,uB,GAAAA,uB;QAIAC,Y,GAAAA,Y;QAIAC,W,GAAAA,W;QAIAC,e,GAAAA,e;QAIAC,a,GAAAA,a;QAIAC,a,GAAAA,a;QAIAC,U,GAAAA,U;QAIAC,gB,GAAAA,gB;QAIAC,U,GAAAA,U;QAIAC,gB,GAAAA,gB;QAIAC,Y,GAAAA,Y;QAIAC,U,GAAAA,U;QAIAC,gB,GAAAA,gB;QAIAC,O,GAAAA,O;QAIAC,a,GAAAA,a;QAIAC,Q,GAAAA,Q;QAIAC,c,GAAAA,c;QAIAC,U,GAAAA,U;QAIAC,gB,GAAAA,gB;QAIAC,mB,GAAAA,mB;QAWAC,oB,GAAAA,oB;QAIAC,0B,GAAAA,0B;QAIAC,wB,GAAAA,wB;QAIAC,Q,GAAAA,Q;QAIAC,c,GAAAA,c;QAIAC,a,GAAAA,a;QAIAC,W,GAAAA,W;QAIAC,iB,GAAAA,iB;QAIAC,gB,GAAAA,gB;QAIAC,W,GAAAA,W;QAIAC,iB,GAAAA,iB;QAIAC,Q,GAAAA,Q;QAIAC,c,GAAAA,c;QAIAC,Q,GAAAA,Q;QAeAC,c,GAAAA,c;QAIAC,W,GAAAA,W;QAIAC,iB,GAAAA,iB;QAIAC,oB,GAAAA,oB;QAIAC,2B,GAAAA,2B;QAIAC,0B,GAAAA,0B;QAIAC,c,GAAAA,c;QAIAC,oB,GAAAA,oB;QAIA/e,I,GAAAA,I;QAIAgf,W,GAAAA,W;QAIAC,U,GAAAA,U;QAIAC,Y,GAAAA,Y;QAIAC,kB,GAAAA,kB;QAIAC,gB,GAAAA,gB;QAIAC,kB,GAAAA,kB;QAaAC,wB,GAAAA,wB;QAQAC,gB,GAAAA,gB;QAIAC,kB,GAAAA,kB;QAIAC,oB,GAAAA,oB;QAIAC,uB,GAAAA,uB;QAIAC,oB,GAAAA,oB;QAIAC,mB,GAAAA,mB;QAIAC,e,GAAAA,e;QAKAC,U,GAAAA,U;;AAlVhB;;IAAYna,W;;AAGZ;;;;;;AAEA;;;;;;;;;;AANA;AAgBO,SAASqW,gBAAT,CAA2Brb,IAA3B,EAAiCof,EAAjC,EAAqCtZ,UAAU,EAA/C,EAAmDoE,OAAO,EAA1D,EAA8D;AACnE;;;;;;;;;;;;;;;;AAgBA,QAAMvJ,SAAS;AACbX,QADa;AAEb8F,wCACKA,OADL;AAEEsZ;AAFF;AAKF;AAPe,GAAf,CAQA,IAAI,CAAC,iBAAQlV,IAAR,CAAL,EAAoB;AAClBvJ,WAAOuJ,IAAP,GAAcA,IAAd;AACD;AACD,MAAIpE,QAAQjF,KAAZ,EAAmB;AACjBF,WAAOE,KAAP,GAAe,IAAf;AACD;AACD,SAAOF,MAAP;AACD;;AA7CD;AA+CO,SAAS2a,QAAT,CAAmB8D,EAAnB,EAAuB1a,OAAvB,EAAgC;AACrC,SAAO2W,iBAAiBrW,YAAYoS,SAA7B,EAAwCgI,EAAxC,EAA4C1a,OAA5C,CAAP;AACD;;AAEM,SAAS6W,cAAT,CAAyB6D,EAAzB,EAA6BC,MAA7B,EAAqC;AAC1C,SAAOhE,iBAAiBrW,YAAYsS,eAA7B,EAA8C8H,EAA9C,EAAkDC,MAAlD,CAAP;AACD;;AAEM,SAAS7D,eAAT,CAA0B4D,EAA1B,EAA8B1a,OAA9B,EAAuC;AAC5C,SAAO2W,iBAAiBrW,YAAYqS,iBAA7B,EAAgD+H,EAAhD,EAAoD1a,OAApD,CAAP;AACD;;AAEM,SAAS+W,cAAT,CAAyB2D,EAAzB,EAA6BC,MAA7B,EAAqC;AAC1C,SAAOhE,iBAAiBrW,YAAYuS,gBAA7B,EAA+C6H,EAA/C,EAAmDC,MAAnD,CAAP;AACD;;AAEM,SAAS3D,iBAAT,CAA4B0D,EAA5B,EAAgCC,MAAhC,EAAwC;AAC7C,SAAO;AACLrf,UAAMgF,YAAYwS,mBADb;AAEL1R,aAAS;AACPsZ,QADO;AAEPE,cAAQD,OAAOC,MAFR;AAGPzZ,mBAAawZ,OAAOxZ,WAHb;AAIP0Z,wBAAkBF,OAAOE,gBAJlB;AAKPC,mBAAaH,OAAOG;AALb;AAFJ,GAAP;AAUD;;AAEM,SAAS7D,uBAAT,CAAkCyD,EAAlC,EAAsCC,MAAtC,EAA8C;AACnD,SAAOhE,iBAAiBrW,YAAYyS,0BAA7B,EAAyD2H,EAAzD,EAA6DC,MAA7D,CAAP;AACD;;AAEM,SAASzD,YAAT,CAAuBwD,EAAvB,EAA2BC,MAA3B,EAAmC;AACxC,SAAOhE,iBAAiBrW,YAAY0S,aAA7B,EAA4C0H,EAA5C,EAAgDC,MAAhD,CAAP;AACD;;AAEM,SAASxD,WAAT,CAAsBuD,EAAtB,EAA0BC,MAA1B,EAAkC;AACvC,SAAOhE,iBAAiBrW,YAAY2S,YAA7B,EAA2CyH,EAA3C,EAA+CC,MAA/C,CAAP;AACD;;AAEM,SAASvD,eAAT,CAA0BsD,EAA1B,EAA8BC,MAA9B,EAAsC;AAC3C,SAAOhE,iBAAiBrW,YAAY4S,gBAA7B,EAA+CwH,EAA/C,EAAmDC,MAAnD,CAAP;AACD;;AAEM,SAAStD,aAAT,CAAwBqD,EAAxB,EAA4BC,MAA5B,EAAoC;AACzC,SAAOhE,iBAAiBrW,YAAY6S,cAA7B,EAA6CuH,EAA7C,EAAiDC,MAAjD,CAAP;AACD;;AAEM,SAASrD,aAAT,CAAwBoD,EAAxB,EAA4BC,MAA5B,EAAoC;AACzC,SAAOhE,iBAAiBrW,YAAY8S,UAA7B,EAAyCsH,EAAzC,EAA6CC,MAA7C,CAAP;AACD;;AAEM,SAASpD,UAAT,CAAqBmD,EAArB,EAAyB1a,OAAzB,EAAkC;AACvC,SAAO2W,iBAAiBrW,YAAY+S,WAA7B,EAA0CqH,EAA1C,EAA8C1a,OAA9C,CAAP;AACD;;AAEM,SAASwX,gBAAT,CAA2BkD,EAA3B,EAA+BC,MAA/B,EAAuCnV,IAAvC,EAA6C;AAClD,SAAOmR,iBAAiBrW,YAAYgT,kBAA7B,EAAiDoH,EAAjD,EAAqDC,MAArD,EAA6DnV,IAA7D,CAAP;AACD;;AAEM,SAASiS,UAAT,CAAqBiD,EAArB,EAAyB1a,OAAzB,EAAkC;AACvC,SAAO2W,iBAAiBrW,YAAYiT,WAA7B,EAA0CmH,EAA1C,EAA8C1a,OAA9C,CAAP;AACD;;AAEM,SAAS0X,gBAAT,CAA2BgD,EAA3B,EAA+BC,MAA/B,EAAuC;AAC5C,SAAOhE,iBAAiBrW,YAAYkT,kBAA7B,EAAiDkH,EAAjD,EAAqDC,MAArD,CAAP;AACD;;AAEM,SAAShD,YAAT,CAAuB+C,EAAvB,EAA2BC,MAA3B,EAAmC;AACxC,SAAOhE,iBAAiBrW,YAAYqT,aAA7B,EAA4C+G,EAA5C,EAAgDC,MAAhD,CAAP;AACD;;AAEM,SAAS/C,UAAT,CAAqB8C,EAArB,EAAyBC,MAAzB,EAAiC;AACtC,SAAOhE,iBAAiBrW,YAAYmT,WAA7B,EAA0CiH,EAA1C,EAA8CC,MAA9C,CAAP;AACD;;AAEM,SAAS9C,gBAAT,CAA2B6C,EAA3B,EAA+BC,MAA/B,EAAuC;AAC5C,SAAOhE,iBAAiBrW,YAAYoT,kBAA7B,EAAiDgH,EAAjD,EAAqDC,MAArD,CAAP;AACD;;AAEM,SAAS7C,OAAT,CAAkB4C,EAAlB,EAAsBC,MAAtB,EAA8B;AACnC,SAAOhE,iBAAiBrW,YAAYsT,QAA7B,EAAuC8G,EAAvC,EAA2CC,MAA3C,CAAP;AACD;;AAEM,SAAS5C,aAAT,CAAwB2C,EAAxB,EAA4BC,MAA5B,EAAoC;AACzC,SAAOhE,iBAAiBrW,YAAYuT,eAA7B,EAA8C6G,EAA9C,EAAkDC,MAAlD,CAAP;AACD;;AAEM,SAAS3C,QAAT,CAAmB0C,EAAnB,EAAuB1a,OAAvB,EAAgC;AACrC,SAAO2W,iBAAiBrW,YAAY4T,SAA7B,EAAwCwG,EAAxC,EAA4C1a,OAA5C,CAAP;AACD;;AAEM,SAASiY,cAAT,CAAyByC,EAAzB,EAA6BC,MAA7B,EAAqC;AAC1C,SAAOhE,iBAAiBrW,YAAY6T,gBAA7B,EAA+CuG,EAA/C,EAAmDC,MAAnD,CAAP;AACD;;AAEM,SAASzC,UAAT,CAAqBwC,EAArB,EAAyB1a,OAAzB,EAAkC;AACvC,SAAO2W,iBAAiBrW,YAAY8T,WAA7B,EAA0CsG,EAA1C,EAA8C1a,OAA9C,CAAP;AACD;;AAEM,SAASmY,gBAAT,CAA2BuC,EAA3B,EAA+BC,MAA/B,EAAuC;AAC5C,SAAOhE,iBAAiBrW,YAAY+T,kBAA7B,EAAiDqG,EAAjD,EAAqDC,MAArD,CAAP;AACD;;AAEM,SAASvC,mBAAT,CAA8BsC,EAA9B,EAAkCK,gBAAlC,EAAoD;AACzD,QAAM9e,SAAS;AACbX,UAAMgF,YAAYgU,qBADL;AAEblT,aAAS;AACPsZ,QADO;AAEPK;AAFO;AAFI,GAAf;AAOA,SAAO9e,MAAP;AACD;;AAEM,SAASoc,oBAAT,CAA+BqC,EAA/B,EAAmC1a,OAAnC,EAA4C;AACjD,SAAO2W,iBAAiBrW,YAAYiU,sBAA7B,EAAqDmG,EAArD,EAAyD1a,OAAzD,CAAP;AACD;;AAEM,SAASsY,0BAAT,CAAqCoC,EAArC,EAAyCC,MAAzC,EAAiD;AACtD,SAAOhE,iBAAiBrW,YAAYkU,6BAA7B,EAA4DkG,EAA5D,EAAgEC,MAAhE,CAAP;AACD;;AAEM,SAASpC,wBAAT,CAAmCmC,EAAnC,EAAuCC,MAAvC,EAA+C;AACpD,SAAOhE,iBAAiBrW,YAAYsV,0BAA7B,EAAyD8E,EAAzD,EAA6DC,MAA7D,CAAP;AACD;;AAEM,SAASnC,QAAT,CAAmBkC,EAAnB,EAAuBC,MAAvB,EAA+B;AACpC,SAAOhE,iBAAiBrW,YAAYmU,SAA7B,EAAwCiG,EAAxC,EAA4CC,MAA5C,CAAP;AACD;;AAEM,SAASlC,cAAT,CAAyBiC,EAAzB,EAA6BC,MAA7B,EAAqC;AAC1C,SAAOhE,iBAAiBrW,YAAYoU,gBAA7B,EAA+CgG,EAA/C,EAAmDC,MAAnD,CAAP;AACD;;AAEM,SAASjC,aAAT,CAAwBgC,EAAxB,EAA4BC,MAA5B,EAAoC;AACzC,SAAOhE,iBAAiBrW,YAAYqU,eAA7B,EAA8C+F,EAA9C,EAAkDC,MAAlD,CAAP;AACD;;AAEM,SAAShC,WAAT,CAAsB+B,EAAtB,EAA0BC,MAA1B,EAAkC;AACvC,SAAOhE,iBAAiBrW,YAAYsU,YAA7B,EAA2C8F,EAA3C,EAA+CC,MAA/C,CAAP;AACD;;AAEM,SAAS/B,iBAAT,CAA4B8B,EAA5B,EAAgCC,MAAhC,EAAwC;AAC7C,SAAOhE,iBAAiBrW,YAAYuU,mBAA7B,EAAkD6F,EAAlD,EAAsDC,MAAtD,CAAP;AACD;;AAEM,SAAS9B,gBAAT,CAA2B6B,EAA3B,EAA+BC,MAA/B,EAAuC;AAC5C,SAAOhE,iBAAiBrW,YAAYwU,kBAA7B,EAAiD4F,EAAjD,EAAqDC,MAArD,CAAP;AACD;;AAEM,SAAS7B,WAAT,CAAsB4B,EAAtB,EAA0BC,MAA1B,EAAkC;AACvC,SAAOhE,iBAAiBrW,YAAYyU,WAA7B,EAA0C2F,EAA1C,EAA8CC,MAA9C,CAAP;AACD;;AAEM,SAAS5B,iBAAT,CAA4B2B,EAA5B,EAAgCC,MAAhC,EAAwC;AAC7C,SAAOhE,iBAAiBrW,YAAY0U,kBAA7B,EAAiD0F,EAAjD,EAAqDC,MAArD,CAAP;AACD;;AAEM,SAAS3B,QAAT,CAAmB0B,EAAnB,EAAuBC,MAAvB,EAA+B;AACpC,SAAOhE,iBAAiBrW,YAAY2U,SAA7B,EAAwCyF,EAAxC,EAA4CC,MAA5C,CAAP;AACD;;AAEM,SAAS1B,cAAT,CAAyByB,EAAzB,EAA6BC,MAA7B,EAAqC;AAC1C,SAAOhE,iBAAiBrW,YAAY4U,gBAA7B,EAA+CwF,EAA/C,EAAmDC,MAAnD,CAAP;AACD;;AAEM,SAASzB,QAAT,CAAmBwB,EAAnB,EAAuBC,MAAvB,EAA+BK,QAA/B,EAAyC;AAC9C,QAAM/e,SAAS;AACbX,UAAMgF,YAAY6U,SADL;AAEb/T,wCACKuZ,MADL;AAEED;AAFF,MAFa;AAMblV,UAAM;AACJwV;AADI;AANO,GAAf;;AAWA,SAAO/e,MAAP;AACD;;AAEM,SAASkd,cAAT,CAAyBuB,EAAzB,EAA6BC,MAA7B,EAAqC;AAC1C,SAAOhE,iBAAiBrW,YAAY8U,gBAA7B,EAA+CsF,EAA/C,EAAmDC,MAAnD,CAAP;AACD;;AAEM,SAASvB,WAAT,CAAsBsB,EAAtB,EAA0BC,MAA1B,EAAkC;AACvC,SAAOhE,iBAAiBrW,YAAYwT,YAA7B,EAA2C4G,EAA3C,EAA+CC,MAA/C,CAAP;AACD;;AAEM,SAAStB,iBAAT,CAA4BqB,EAA5B,EAAgCC,MAAhC,EAAwC;AAC7C,SAAOhE,iBAAiBrW,YAAYyT,mBAA7B,EAAkD2G,EAAlD,EAAsDC,MAAtD,CAAP;AACD;;AAEM,SAASrB,oBAAT,CAA+BoB,EAA/B,EAAmCC,MAAnC,EAA2C;AAChD,SAAOhE,iBAAiBrW,YAAYsP,qBAA7B,EAAoD8K,EAApD,EAAwDC,MAAxD,CAAP;AACD;;AAEM,SAASpB,2BAAT,CAAsCmB,EAAtC,EAA0CC,MAA1C,EAAkD;AACvD,SAAOhE,iBAAiBrW,YAAY+U,6BAA7B,EAA4DqF,EAA5D,EAAgEC,MAAhE,CAAP;AACD;;AAEM,SAASnB,0BAAT,CAAqCkB,EAArC,EAAyCC,MAAzC,EAAiD;AACtD,SAAOhE,iBAAiBrW,YAAYgV,4BAA7B,EAA2DoF,EAA3D,EAA+DC,MAA/D,CAAP;AACD;;AAEM,SAASlB,cAAT,CAAyBiB,EAAzB,EAA6BC,MAA7B,EAAqC;AAC1C,SAAOhE,iBAAiBrW,YAAYqP,eAA7B,EAA8C+K,EAA9C,EAAkDC,MAAlD,CAAP;AACD;;AAEM,SAASjB,oBAAT,CAA+BgB,EAA/B,EAAmCC,MAAnC,EAA2C;AAChD,SAAOhE,iBAAiBrW,YAAYiV,sBAA7B,EAAqDmF,EAArD,EAAyDC,MAAzD,CAAP;AACD;;AAEM,SAAShgB,IAAT,CAAe+f,EAAf,EAAmBC,MAAnB,EAA2B;AAChC,SAAOhE,iBAAiBrW,YAAYuP,IAA7B,EAAmC6K,EAAnC,EAAuCC,MAAvC,CAAP;AACD;;AAEM,SAAShB,WAAT,CAAsBe,EAAtB,EAA0BC,MAA1B,EAAkC;AACvC,SAAOhE,iBAAiBrW,YAAYkV,YAA7B,EAA2CkF,EAA3C,EAA+CC,MAA/C,CAAP;AACD;;AAEM,SAASf,UAAT,CAAqBc,EAArB,EAAyBC,MAAzB,EAAiC;AACtC,SAAOhE,iBAAiBrW,YAAYmV,WAA7B,EAA0CiF,EAA1C,EAA8CC,MAA9C,CAAP;AACD;;AAEM,SAASd,YAAT,CAAuBa,EAAvB,EAA2BC,MAA3B,EAAmC;AACxC,SAAOhE,iBAAiBrW,YAAYoV,aAA7B,EAA4CgF,EAA5C,EAAgDC,MAAhD,CAAP;AACD;;AAEM,SAASb,kBAAT,CAA6BY,EAA7B,EAAiCC,MAAjC,EAAyC;AAC9C,SAAOhE,iBAAiBrW,YAAYqV,oBAA7B,EAAmD+E,EAAnD,EAAuDC,MAAvD,CAAP;AACD;;AAEM,SAASZ,gBAAT,CAA2BW,EAA3B,EAA+BC,MAA/B,EAAuC;AAC5C,SAAOhE,iBAAiBrW,YAAY0T,iBAA7B,EAAgD0G,EAAhD,EAAoDC,MAApD,CAAP;AACD;;AAEM,SAASX,kBAAT,CAA6BW,MAA7B,EAAqCK,QAArC,EAA+C;AACpD,QAAM/e,SAAS;AACbX,UAAMgF,YAAYuV,oBADL;AAEbzU,wCACKuZ,MADL,CAFa;AAKbnV,UAAM;AACJwV;AADI;AALO,GAAf;AASA,SAAO/e,MAAP;AACD;;AAEM,SAASge,wBAAT,CAAmCU,MAAnC,EAA2C;AAChD,SAAOhE,iBAAiBrW,YAAYwV,0BAA7B,EAAyD/N,SAAzD,EAAoE4S,MAApE,CAAP;AACD;;AAED;;;;AAIO,SAAST,gBAAT,CAA2BQ,EAA3B,EAA+BC,MAA/B,EAAuC;AAC5C,SAAOhE,iBAAiBrW,YAAYyV,uBAA7B,EAAsD2E,EAAtD,EAA0DC,MAA1D,CAAP;AACD;;AAEM,SAASR,kBAAT,CAA6BO,EAA7B,EAAiCC,MAAjC,EAAyC;AAC9C,SAAOhE,iBAAiBrW,YAAY0V,yBAA7B,EAAwD0E,EAAxD,EAA4DC,MAA5D,CAAP;AACD;;AAEM,SAASP,oBAAT,CAA+BM,EAA/B,EAAmCC,MAAnC,EAA2C;AAChD,SAAOhE,iBAAiBrW,YAAY2V,uBAA7B,EAAsDyE,EAAtD,EAA0DC,MAA1D,CAAP;AACD;;AAEM,SAASN,uBAAT,CAAkCK,EAAlC,EAAsCC,MAAtC,EAA8C;AACnD,SAAOhE,iBAAiBrW,YAAY4V,0BAA7B,EAAyDwE,EAAzD,EAA6DC,MAA7D,CAAP;AACD;;AAEM,SAASL,oBAAT,CAA+BI,EAA/B,EAAmCC,MAAnC,EAA2C;AAChD,SAAOhE,iBAAiBrW,YAAY6V,uBAA7B,EAAsDuE,EAAtD,EAA0DC,MAA1D,CAAP;AACD;;AAEM,SAASJ,mBAAT,CAA8BG,EAA9B,EAAkCC,MAAlC,EAA0C;AAC/C,SAAOhE,iBAAiBrW,YAAY8V,sBAA7B,EAAqDsE,EAArD,EAAyDC,MAAzD,CAAP;AACD;;AAEM,SAASH,eAAT,CAA0BE,EAA1B,EAA8BC,MAA9B,EAAsC;AAC3C,SAAOhE,iBAAiBrW,YAAY+V,iBAA7B,EAAgDqE,EAAhD,EAAoDC,MAApD,CAAP;AACD;;AAED;AACO,SAASF,UAAT,CAAqBC,EAArB,EAAyBC,MAAzB,EAAiC;AACtC,SAAOhE,iBAAiBrW,YAAY2T,WAA7B,EAA0CyG,EAA1C,EAA8CC,MAA9C,CAAP;AACD,C;;;;;;;;;;;;;;;ACrVD;;IAAYM,iB;;AACZ;;IAAYC,iB;;;;AAEZ;AACA;AACA;AACO,MAAMC,oCAAcF,iBAApB;AACA,MAAMG,oCAAcF,iBAApB,C;;;;;;;;;;;;;QCCSG,W,GAAAA,W;;AAPhB;;IAAY/a,W;;;;AAEZ;;;;;AAKO,SAAS+a,WAAT,CAAsB,EAAEC,OAAF,EAAWna,WAAX,EAAtB,EAAgD;AACrD,SAAO;AACL7F,UAAMgF,YAAYiW,YADb;AAELnV,aAAS;AACPka,aADO;AAEPna;AAFO;AAFJ,GAAP;AAOD,C,CAhBD,e;;;;;;;;;;;;;;;;;;kBCoBwBoa,O;;AAnBxB;;AACA;;AACA;;AAGA;;AACA;;AAGA;;AACA;;AACA;;;;AAEA;;AAEA;;;;AAhBA;AAkBA,MAAMzgB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,CAAZ;;AATA;;;AAJA;AAee,SAAS8a,OAAT,CAAkB,EAAE9d,QAAF,EAAYD,QAAZ,EAAlB,EAA0C;AACvD,SAAO;AACL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DAge,SAAMC,WAAN,EAAmBnJ,KAAnB,EAA0BtS,UAAU,EAApC,EAAwC;AACtClF,UAAI+L,KAAJ,CAAUC,oBAAc,aAAxB,EAAuC2U,WAAvC,EAAoDnJ,KAApD,EAA2DtS,OAA3D;;AAEA,YAAMmR,SAAS,eAAf;AACA,YAAMuK,OAAO,6BAAYle,UAAZ,EAAwBmF,QAArC;;AAEA,YAAMkY,mBAAmB;AACvBc,eAAOrJ,MAAMqJ,KAAN,IAAe,CAAC,iBAAQrJ,MAAMsJ,YAAd,CAAhB,GAA8CtJ,MAAMsJ,YAApD,GAAmEtJ,MAAMqJ,KADzD;AAEvBE,eAAOvJ,MAAMuJ,KAAN,IAAe,CAAC,iBAAQvJ,MAAMwJ,YAAd,CAAhB,GAA8CxJ,MAAMwJ,YAApD,GAAmExJ,MAAMuJ,KAFzD;AAGvBE,qBAAazJ,MAAM0J,MAAN,IAAgB,CAAC,iBAAQ1J,MAAM2J,aAAd,CAAjB,GAAgD3J,MAAM2J,aAAtD,GAAsE3J,MAAM0J;AAHlE,OAAzB;;AAMA,YAAMhb,SAAS,2BAAWxD,UAAX,CAAf;AACA,UAAIwD,OAAOkb,oBAAX,EAAiC;AAC/B;AACAT,sBAAc,oCAAgBA,WAAhB,EAA6B,2BAAUje,UAAV,CAA7B,CAAd;AACA1C,YAAI4G,IAAJ,CAAS,yBAAT,EAAoC+Z,WAApC;AACD;;AAEDhe,eACE8C,qBAAQqW,QAAR,CAAiBzF,MAAjB;AACEgL,4BAAoBV,WADtB;AAEE;AACAC,YAHF;AAIEb;AAJF,SAKK7a,OALL,EADF;AASA,aAAOmR,MAAP;AACD,KA3JI;;AA6JL;;;;;;;;;;;;;;;;;;;;;AAqBAiL,WAAQjL,MAAR,EAAgB;AACdrW,UAAI+L,KAAJ,CAAUC,oBAAc,eAAxB,EAAyCqK,MAAzC;AACA1T,eAAS8C,qBAAQkX,UAAR,CAAmBtG,MAAnB,CAAT;AACD,KArLI;;AAuLL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDAkL,WAAQlL,MAAR,EAAgBmB,KAAhB,EAAuBtS,UAAU,EAAjC,EAAqC;AACnClF,UAAI+L,KAAJ,CAAUC,oBAAc,eAAxB,EAAyCqK,MAAzC,EAAiDmB,KAAjD,EAAwDtS,OAAxD;;AAEA,YAAM6a,mBAAmB;AACvBc,eAAOrJ,MAAMqJ,KAAN,IAAe,CAAC,iBAAQrJ,MAAMsJ,YAAd,CAAhB,GAA8CtJ,MAAMsJ,YAApD,GAAmEtJ,MAAMqJ,KADzD;AAEvBE,eAAOvJ,MAAMuJ,KAAN,IAAe,CAAC,iBAAQvJ,MAAMwJ,YAAd,CAAhB,GAA8CxJ,MAAMwJ,YAApD,GAAmExJ,MAAMuJ,KAFzD;AAGvBE,qBAAazJ,MAAM0J,MAAN,IAAgB,CAAC,iBAAQ1J,MAAM2J,aAAd,CAAjB,GAAgD3J,MAAM2J,aAAtD,GAAsE3J,MAAM0J;AAHlE,OAAzB;;AAMAve,eACE8C,qBAAQgX,UAAR,CAAmBpG,MAAnB;AACE0J;AADF,SAEK7a,OAFL,EADF;AAMD,KAtSI;;AAwSL;;;;;;;;;;;;;;;;;;;AAmBAsc,WAAQnL,MAAR,EAAgB;AACdrW,UAAI+L,KAAJ,CAAUC,oBAAc,eAAxB,EAAyCqK,MAAzC;AACA1T,eAAS8C,qBAAQqX,UAAR,CAAmBzG,MAAnB,CAAT;AACD,KA9TI;;AAgUL;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BAoL,SAAMpL,MAAN,EAAc;AACZrW,UAAI+L,KAAJ,CAAUC,oBAAc,aAAxB,EAAuCqK,MAAvC;AACA1T,eAAS8C,qBAAQyX,QAAR,CAAiB7G,MAAjB,CAAT;AACD,KA7VI;;AA+VL;;;;;;;;;;;;;;;;;;;;;;AAsBAqL,WAAQrL,MAAR,EAAgB;AACdrW,UAAI+L,KAAJ,CAAUC,oBAAc,eAAxB,EAAyCqK,MAAzC;AACA1T,eAAS8C,qBAAQ2X,UAAR,CAAmB/G,MAAnB,CAAT;AACD,KAxXI;;AA0XL;;;;;;;;;;;;;;;;;;;;;;;;AAwBAiH,wBAAqBjH,MAArB,EAA6B4J,gBAA7B,EAA+C;AAC7CjgB,UAAI+L,KAAJ,CAAUC,oBAAc,4BAAxB,EAAsDqK,MAAtD,EAA8D4J,gBAA9D;AACAtd,eAAS8C,qBAAQ6X,mBAAR,CAA4BjH,MAA5B,EAAoC4J,gBAApC,CAAT;AACD,KArZI;;AAuZL;;;;;;;;;;;;;;;;;AAiBA1C,yBAAsBlH,MAAtB,EAA8B;AAC5BrW,UAAI+L,KAAJ,CAAUC,oBAAc,6BAAxB,EAAuDqK,MAAvD;AACA1T,eAAS8C,qBAAQ8X,oBAAR,CAA6BlH,MAA7B,CAAT;AACD,KA3aI;;AA6aL;;;;;;;;;;;;;;;AAeAsL,aAAU;AACR3hB,UAAI+L,KAAJ,CAAUC,oBAAc,aAAxB;AACA,aAAO,yBAAStJ,UAAT,CAAP;AACD,KA/bI;;AAicL;;;;;;;;;;;;AAYAkf,YAASvL,MAAT,EAAiB;AACfrW,UAAI+L,KAAJ,CAAUC,oBAAc,gBAAxB,EAA0CqK,MAA1C;AACA,aAAO,4BAAY3T,UAAZ,EAAwB2T,MAAxB,CAAP;AACD,KAhdI;;AAkdL;;;;;;;;;;;;;;;;;;;;;;;;AAwBAwL,QAAKxL,MAAL,EAAa;AACXrW,UAAI+L,KAAJ,CAAUC,oBAAc,YAAxB,EAAsCqK,MAAtC;AACA1T,eAAS8C,qBAAQuX,OAAR,CAAgB3G,MAAhB,CAAT;AACD,KA7eI;;AA+eL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCAqH,aAAUrH,MAAV,EAAkBmB,QAAQ,EAA1B,EAA8BtS,UAAU,EAAxC,EAA4C;AAC1ClF,UAAI+L,KAAJ,CAAUC,oBAAc,iBAAxB,EAA2CqK,MAA3C,EAAmDmB,KAAnD;AACA,YAAMuI,mBAAmB;AACvBc,eAAOrJ,MAAMqJ,KAAN,IAAe,CAAC,iBAAQrJ,MAAMsJ,YAAd,CAAhB,GAA8CtJ,MAAMsJ,YAApD,GAAmEtJ,MAAMqJ,KADzD;AAEvBE,eAAOvJ,MAAMuJ,KAAN,IAAe,CAAC,iBAAQvJ,MAAMwJ,YAAd,CAAhB,GAA8CxJ,MAAMwJ,YAApD,GAAmExJ,MAAMuJ,KAFzD;AAGvBE,qBAAazJ,MAAM0J,MAAN,IAAgB,CAAC,iBAAQ1J,MAAM2J,aAAd,CAAjB,GAAgD3J,MAAM2J,aAAtD,GAAsE3J,MAAM0J;AAHlE,OAAzB;;AAMAve,eAAS8C,qBAAQiY,QAAR,CAAiBrH,MAAjB,2BAA2B0J,gBAA3B,IAAgD7a,OAAhD,EAAT;AACD,KA5hBI;;AA8hBL;;;;;;;;;;;;;;;;;;;;AAoBA2Y,gBAAaxH,MAAb,EAAqByL,MAArB,EAA6B5c,UAAU,EAAvC,EAA2C;AACzClF,UAAI+L,KAAJ,CAAUC,oBAAc,oBAAxB,EAA8CqK,MAA9C,EAAsDyL,MAAtD;AACAnf,eAAS8C,qBAAQoY,WAAR,CAAoBxH,MAApB,2BAA8ByL,MAA9B,IAAyC5c,OAAzC,EAAT;AACD,KArjBI;;AAujBL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA6c,eAAY1L,MAAZ,EAAoB2K,eAAe,EAAnC,EAAuC9b,UAAU,EAAjD,EAAqD;AACnDlF,UAAI+L,KAAJ,CAAUC,oBAAc,mBAAxB,EAA6CqK,MAA7C,EAAqDnR,OAArD;;AAEA,YAAM6a,mBAAmB;AACvBc,eAAO,KADgB;AAEvBE,eAAO,CAAC,iBAAQC,YAAR,CAAD,GAAyBA,YAAzB,GAAwC,IAFxB;AAGvBC,qBAAa;AAHU,OAAzB;AAKAte,eAAS8C,qBAAQmY,aAAR,CAAsBvH,MAAtB,2BAAgC0J,gBAAhC,EAAkDvgB,MAAM,OAAxD,IAAoE0F,OAApE,EAAT;AACD,KA/lBI;;AAimBL;;;;;;;;;;;;;;;;;;;;;;;AAuBA8c,cAAW3L,MAAX,EAAmB;AACjBrW,UAAI+L,KAAJ,CAAUC,oBAAc,kBAAxB,EAA4CqK,MAA5C;AACA1T,eAAS8C,qBAAQsY,gBAAR,CAAyB1H,MAAzB,EAAiC,EAAE7W,MAAM,OAAR,EAAjC,CAAT;AACD,KA3nBI;;AA6nBL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA0e,aAAU7H,MAAV,EAAkB4L,IAAlB,EAAwB3hB,WAAW,GAAnC,EAAwC4hB,eAAe,EAAvD,EAA2D;AACzDliB,UAAI+L,KAAJ,CAAUC,oBAAc,iBAAxB,EAA2CqK,MAA3C,EAAmD4L,IAAnD,EAAyD3hB,QAAzD,EAAmE4hB,YAAnE;AACAvf,eAAS8C,qBAAQyY,QAAR,CAAiB7H,MAAjB,EAAyB,EAAE4L,IAAF,EAAQ3hB,QAAR,EAAkB4hB,YAAlB,EAAzB,CAAT;AACD,KAzuBI;;AA2uBL;;;;;;;;;;;;;;;;;;;;;;AAsBA9D,aAAU/H,MAAV,EAAkB8L,OAAlB,EAA2B;AACzBniB,UAAI+L,KAAJ,CAAUC,oBAAc,iBAAxB,EAA2CqK,MAA3C,EAAmD8L,OAAnD;AACA,YAAMC,iBAAiB,uBAAvB;AACAzf,eAAS8C,qBAAQ2Y,QAAR,CAAiB/H,MAAjB,EAAyB,EAAE8L,OAAF,EAAzB,EAAsCC,cAAtC,CAAT;AACA,aAAOA,eAAeC,OAAtB;AACD,KAtwBI;AAuwBL;;;;;;;;;;;;;;;;;;;;;AAqBA;;;;;;;;;;;;;;;;;;;AAmBAC,YAASjM,MAAT,EAAiBsK,WAAjB,EAA8B;AAC5B,YAAMza,SAAS,2BAAWxD,UAAX,CAAf;AACA,UAAIwD,OAAOkb,oBAAX,EAAiC;AAC/B;AACAT,sBAAc,oCAAgBA,WAAhB,EAA6B,2BAAUje,UAAV,CAA7B,CAAd;AACA1C,YAAI4G,IAAJ,CAAS,yBAAT,EAAoC+Z,WAApC;AACD;;AAEDhe,eAAS8C,qBAAQ6Y,WAAR,CAAoBjI,MAApB,EAA4B,EAAEsK,WAAF,EAA5B,CAAT;AACD,KAxzBI;;AA0zBL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BAnC,yBAAsBnI,MAAtB,EAA8BkM,WAA9B,EAA2C;AACzC5f,eAAS8C,qBAAQ+Y,oBAAR,CAA6BnI,MAA7B,EAAqC,EAAEkM,WAAF,EAArC,CAAT;AACD,KAr3BI;;AAu3BL;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA5D,mBAAgBtI,MAAhB,EAAwBsK,WAAxB,EAAqC;AACnC,YAAMza,SAAS,2BAAWxD,UAAX,CAAf;AACA,UAAIwD,OAAOkb,oBAAX,EAAiC;AAC/B;AACAT,sBAAc,oCAAgBA,WAAhB,EAA6B,2BAAUje,UAAV,CAA7B,CAAd;AACA1C,YAAI4G,IAAJ,CAAS,yBAAT,EAAoC+Z,WAApC;AACD;;AAEDhe,eAAS8C,qBAAQkZ,cAAR,CAAuBtI,MAAvB,EAA+B,EAAEsK,WAAF,EAA/B,CAAT;AACD,KAr7BI;;AAu7BL;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA9gB,SAAMwW,MAAN,EAAckM,WAAd,EAA2B;AACzB,YAAMC,YAAY,eAAlB;AACA,YAAM5B,OAAO,6BAAYle,UAAZ,EAAwBmF,QAArC;AACAlF,eAAS8C,qBAAQ5F,IAAR,CAAawW,MAAb,EAAqB,EAAEkM,WAAF,EAAeC,SAAf,EAA0B5B,IAA1B,EAArB,CAAT;AACD,KAl/BI;;AAo/BL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA7B,iBAAc1I,MAAd,EAAsB8L,OAAtB,EAA+B3K,KAA/B,EAAsC;AACpC,YAAMuI,mBAAmB;AACvBc,eAAOrJ,MAAMqJ,KAAN,IAAe,CAAC,iBAAQrJ,MAAMsJ,YAAd,CAAhB,GAA8CtJ,MAAMsJ,YAApD,GAAmEtJ,MAAMqJ,KADzD;AAEvBE,eAAOvJ,MAAMuJ,KAAN,IAAe,CAAC,iBAAQvJ,MAAMwJ,YAAd,CAAhB,GAA8CxJ,MAAMwJ,YAApD,GAAmExJ,MAAMuJ,KAFzD;AAGvBE,qBAAazJ,MAAM0J,MAAN,IAAgB,CAAC,iBAAQ1J,MAAM2J,aAAd,CAAjB,GAAgD3J,MAAM2J,aAAtD,GAAsE3J,MAAM0J;AAHlE,OAAzB;AAKAve,eAAS8C,qBAAQsZ,YAAR,CAAqB1I,MAArB,EAA6B,EAAE8L,OAAF,EAAWpC,gBAAX,EAA7B,CAAT;AACD,KA5jCI;;AA8jCL;;;;;;;;;;;;;;;;;AAiBAb,uBAAoB1f,IAApB,EAA0B;AACxBQ,UAAI+L,KAAJ,CAAW,GAAEC,iBAAY,kCAAiCxM,IAAK,EAA/D;;AAEA,YAAM4iB,iBAAiB,uBAAvB;;AAEA;AACA;AACAzf,eAAS8C,qBAAQyZ,kBAAR,CAA2B,EAAE1f,IAAF,EAA3B,EAAqC4iB,cAArC,CAAT;;AAEA,aAAOA,eAAeC,OAAtB;AACD,KAzlCI;;AA2lCL;;;;;;;;;;;;;;;;;AAiBAI,mBAAgBC,WAAhB,EAA6B;AAC3B1iB,UAAI+L,KAAJ,CAAW,GAAEC,iBAAY,mCAAzB,EAA6D0W,WAA7D;;AAEA,YAAMxc,SAAS,2BAAWxD,UAAX,CAAf;AACA,YAAMwC,UAAU;AACdyd,0BAAkBzc,OAAOyc;AADX,OAAhB;AAGAhgB,eAAS,8BAAe+f,WAAf,EAA4Bxd,OAA5B,CAAT;AACD,KApnCI;;AAsnCL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA0d,YAAQlP;;AAER;;;;;;;;;;;;;;;;;;AAkBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA9tCK,GAAP;AAqwCD,C;;;;;;;;;;;;;;;;;;;;;;kBC5wCuBmP,Y;;AAbxB;;AAGA;;AACA;;;;AAEA;;;;;;;;;AAJA;AAWe,SAASA,YAAT,CAAuBC,QAAvB,EAAiC;AAC9C,SAAO,SAASC,YAAT,CAAuB,EAAEpgB,QAAF,EAAYD,QAAZ,EAAvB,EAA+C;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,UAAMsgB,WAAW;AACf;AACA,YAFe,EAGf,SAHe,EAIf,oBAJe;AAKf;AACA,UANe,EAOf,QAPe,EAQf,qBARe,EASf,sBATe,EAUf,KAVe,EAWf,UAXe,EAYf,aAZe,EAaf,UAbe,EAcf,UAde,EAef,cAfe;AAgBf;AACA,YAjBe,CAAjB;;AAoBA,UAAMC,aAAa,cAAKD,QAAL,EAAeF,SAAS,EAAEngB,QAAF,EAAYD,QAAZ,EAAT,EAAiCzF,IAAhD,CAAnB;;AAEA,WAAO;AACLA,uCACKgmB,UADL;AAEE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DAC,sBAAepD,MAAf,EAAuBzZ,cAAc,EAArC,EAAyC2Z,cAAc,EAAvD,EAA2D;AACzD;AACA,gBAAM,EAAEa,KAAF,EAASC,YAAT,EAAuBC,KAAvB,EAA8BC,YAA9B,EAA4CE,MAA5C,EAAoDC,aAApD,KAAkFnB,WAAxF;AAAA,gBAA4E9a,OAA5E,0CAAwF8a,WAAxF;;AAEA;AACA;AACA,gBAAMD,mBAAmB;AACvBc,mBAAOA,SAAS,CAAC,iBAAQC,YAAR,CAAV,GAAkCA,YAAlC,GAAiDD,KADjC;AAEvBE,mBAAOA,SAAS,CAAC,iBAAQC,YAAR,CAAV,GAAkCA,YAAlC,GAAiDD,KAFjC;AAGvBE,yBAAaC,UAAU,CAAC,iBAAQC,aAAR,CAAX,GAAoCA,aAApC,GAAoDD;;AAGnE;AANyB,WAAzB,CAOA,MAAM7K,SAAS,eAAf;AACA1T,mBACE8C,qBAAQyW,iBAAR,CAA0B7F,MAA1B,EAAkC;AAChCyJ,kBADgC;AAEhCzZ,uBAFgC;AAGhC0Z,4BAHgC;AAIhCC,yBAAa9a;AAJmB,WAAlC,CADF;AAQA,iBAAOmR,MAAP;AACD;AAxFH;AADK,KAAP;AA4FD,GAzHD;AA0HD,C,CAzID,e;;;;;;;;;;;;;kBC+SwBvK,G;;AA/SxB;;;;;;AAEA;;;;;;;;;;AAUA;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;;;;;;;;;;;;;;;;;;;AAmBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;;;;;;;;;;;;AAcA;;;;;;;;;AASA;;;;;;;;;;;;;AAaA;;;;;;;;;;;;AAYA;;;;;;;;;;;;;AAaA;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;;;;;;;;;;AAYA;;;;;;;;;;;;;AAaA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;;;;;;;;;AASe,SAASA,GAAT,CAAcqX,OAAd,EAAuB;AACpC,SAAO;AACLlmB,UAAM,oBAAQkmB,OAAR;AADD,GAAP;AAGD,C;;;;;;;;;;;;;ACnTD;;;;;;AAMO,MAAM5O,kCAAa;AACxB;AACA6O,QAAM,MAFkB;AAGxBC,UAAQ,QAHgB;AAIxBC,UAAQ,QAJgB;AAKxBC,UAAQ,QALgB;AAMxBC,OAAK,KANmB;AAOxB;AACA;AACAxK,gBAAc,cATU;AAUxB;AACAyK,QAAM,MAXkB;AAYxBC,UAAQ,QAZgB;AAaxBjK,0BAAwB,wBAbA;AAcxBE,aAAW,WAda;AAexBE,mBAAiB,iBAfO;AAgBxBC,gBAAc,cAhBU;AAiBxBE,sBAAoB,oBAjBI;AAkBxBC,eAAa,aAlBW;AAmBxBI,aAAW,WAnBa;AAoBxBF,aAAW,WApBa;AAqBxBrF,yBAAuB,uBArBC;AAsBxBD,mBAAiB,iBAtBO;AAuBxBE,QAAM,MAvBkB;AAwBxB6F,iBAAe,eAxBS;AAyBxB;AACA+I,aAAW,WA1Ba;AA2BxBC,YAAU,UA3Bc;AA4BxBC,cAAY;;AAGd;;;AA/B0B,CAAnB,CAkCA,MAAMC,gCAAY;AACvBC,SAAO,OADgB;AAEvBC,UAAQ;AACR;;;AAGF;;;AANyB,CAAlB,CASA,MAAMC,gCAAY;AACvBC,WAAS,SADc,EACH;AACpBC,WAAS,SAFc,CAEJ;;;AAGrB;;;AALyB,CAAlB,CAQA,MAAMC,0CAAiB;AAC5BC,SAAO,OADqB,EACZ;AAChBC,UAAQ,QAFoB,EAEV;AAClBC,UAAQ,QAHoB,CAGX;;;AAGnB;;;AAN8B,CAAvB,CASA,MAAMC,wCAAgB,CAACjQ,WAAWsF,eAAZ,EAA6BtF,WAAWyF,kBAAxC,CAAtB,C;;;;;;;;;;;;;AClEP;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BO,MAAMyK,0CAAiB,gBAAvB;;AAEP;;;;;;;;;;;;;AAaO,MAAMC,sCAAe,YAArB;;AAEP;;;;;;;;;;;;;;AAcO,MAAMC,gCAAY,WAAlB;;AAEP;;;;;;;;;;;;;;;;;;AAkBO,MAAMzM,wCAAgB,cAAtB;;AAEP;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCO,MAAM0M,gDAAoB,kBAA1B;;AAEP;;;;;;;;;;;AAWO,MAAMC,8CAAmB,eAAzB;;AAEP;;;;;;;;;;AAUO,MAAMC,kDAAqB,mBAA3B;;AAEP;;;;;;;;;;;;;;;;;;AAkBO,MAAMC,0CAAiB,eAAvB;;AAEP;;;;;;;;;;;;;;;;AAgBO,MAAMC,8CAAmB,iBAAzB;;AAEP;;;;;;;;;;;;;;AAcO,MAAMC,0CAAiB,oBAAvB;;AAEP;;;;;;;;;;;;;;;;;;;;AAoBO,MAAMC,oDAAsB,oBAA5B;;AAEP;;;;;;;;;;;AAWO,MAAMC,gDAAoB,uBAA1B;;AAEP;;;;;;;;;;;;AAYO,MAAMC,8CAAmB,sBAAzB,C;;;;;;;;;;;;;;;;;;;AClPP;;IAAYC,U;;AACZ;;IAAY7f,W;;AACZ;;AAGA;;IAAY8f,iB;;AAGZ;;AACA;;;;;;AAEA;;;;;;;;;;AAJA;AARA;AAoBA,SAASC,gBAAT,CAA2B/kB,IAA3B,EAAiCW,MAAjC,EAAyC0e,SAAS,EAAlD,EAAsD;AACpD;;;;;AAKA,QAAM2F,kCACD3F,MADC,CAAN;AAGA;AACA;AACA,MAAI,CAAC2F,KAAK3mB,cAAL,CAAoB,QAApB,CAAD,IAAkCsC,OAAOmF,OAAP,CAAesZ,EAArD,EAAyD;AACvD4F,SAAKnP,MAAL,GAAclV,OAAOmF,OAAP,CAAesZ,EAA7B;AACD;;AAED,SAAO;AACLpf,QADK;AAELglB;AAFK,GAAP;AAID;;AAED;;;;;;;;;;;;AApCA;AA8CA,SAASC,kBAAT,CAA6BtkB,MAA7B,EAAqC0e,MAArC,EAA6C;AAC3C;AACA,QAAM6F,WAAW,4BAAY7F,OAAOze,SAAnB,EAA8BD,OAAOmF,OAAP,CAAesZ,EAA7C,CAAjB;;AAEA,SAAO2F,iBAAiBF,WAAWT,iBAA5B,EAA+CzjB,MAA/C,EAAuD;AAC5DE,WAAOF,OAAOmF,OAAP,CAAejF,KADsC;AAE5DskB,gBAAYxkB,OAAOmF,OAAP,CAAeqf,UAFiC;AAG5DC,cAAU;AACR5Y,aAAO0Y,SAAS1Y,KADR;AAER6Y,iBAAWH,SAASG,SAFZ;AAGRC,kBAAYJ,SAASI;AAHb;AAHkD,GAAvD,CAAP;AASD;;AAED;;;;;;;;;;;;;AAaA,SAASC,oBAAT,CAA+B5kB,MAA/B,EAAuC0e,MAAvC,EAA+C;AAC7C;AACA,QAAM6F,WAAW,4BAAY7F,OAAOze,SAAnB,EAA8BD,OAAOmF,OAAP,CAAesZ,EAA7C,CAAjB;AACA,MAAIgG,QAAJ;;AAEA,MAAIF,QAAJ,EAAc;AACZE,eAAW/F,OAAOmG,OAAP,GAAiBN,SAASO,OAA1B,GAAoCP,SAASQ,QAAxD;AACD;;AAED,SAAOX,iBAAiBF,WAAWZ,cAA5B,EAA4CtjB,MAA5C,EAAoD;AACzD;AACAglB,eAAWtG,OAAOsG,SAFuC;AAGzDR,gBAAY9F,OAAO8F,UAHsC;AAIzDK,aAASnG,OAAOmG,OAJyC;AAKzD;AACAJ,YANyD;AAOzD;AACAvkB,WAAOF,OAAOmF,OAAP,CAAejF;AARmC,GAApD,CAAP;AAUD;;AAEM,MAAM+kB,kCAAa,EAAnB;;AAEP;AACA,MAAMC,gCAAgC,CACpC,EAAE7lB,MAAMgF,YAAY+S,WAApB,EAAiC4N,WAAW5R,sBAAW8O,MAAvD,EADoC,EAEpC,EAAE7iB,MAAMgF,YAAYiT,WAApB,EAAiC0N,WAAW5R,sBAAW+O,MAAvD,EAFoC,EAGpC,EAAE9iB,MAAMgF,YAAYmT,WAApB,EAAiCwN,WAAW5R,sBAAWgP,MAAvD,EAHoC,EAIpC,EAAE/iB,MAAMgF,YAAYsT,QAApB,EAA8BqN,WAAW5R,sBAAWiP,GAApD,EAJoC,EAKpC,EAAEhjB,MAAMgF,YAAYwT,YAApB,EAAkCmN,WAAW5R,sBAAWyE,YAAxD,EALoC,EAMpC,EAAExY,MAAMgF,YAAY4T,SAApB,EAA+B+M,WAAW5R,sBAAWkP,IAArD,EANoC,EAOpC,EAAEjjB,MAAMgF,YAAY8T,WAApB,EAAiC6M,WAAW5R,sBAAWmP,MAAvD,EAPoC,EAQpC,EAAEljB,MAAMgF,YAAYiU,sBAApB,EAA4C0M,WAAW5R,sBAAWkF,sBAAlE,EARoC,EASpC,EAAEjZ,MAAMgF,YAAYmU,SAApB,EAA+BwM,WAAW5R,sBAAWoF,SAArD,EAToC,EAUpC,EAAEnZ,MAAMgF,YAAYqU,eAApB,EAAqCsM,WAAW5R,sBAAWsF,eAA3D,EAVoC,EAWpC,EAAErZ,MAAMgF,YAAYsU,YAApB,EAAkCqM,WAAW5R,sBAAWuF,YAAxD,EAXoC,EAYpC,EAAEtZ,MAAMgF,YAAYwU,kBAApB,EAAwCmM,WAAW5R,sBAAWyF,kBAA9D,EAZoC,EAapC,EAAExZ,MAAMgF,YAAYyU,WAApB,EAAiCkM,WAAW5R,sBAAW0F,WAAvD,EAboC,EAcpC,EAAEzZ,MAAMgF,YAAY2U,SAApB,EAA+BgM,WAAW5R,sBAAW4F,SAArD,EAdoC,EAepC,EAAE3Z,MAAMgF,YAAY6U,SAApB,EAA+B8L,WAAW5R,sBAAW8F,SAArD,EAfoC,EAgBpC,EAAE7Z,MAAMgF,YAAYsP,qBAApB,EAA2CqR,WAAW5R,sBAAWO,qBAAjE,EAhBoC,EAiBpC,EAAEtU,MAAMgF,YAAYqP,eAApB,EAAqCsR,WAAW5R,sBAAWM,eAA3D,EAjBoC,EAkBpC,EAAErU,MAAMgF,YAAYuP,IAApB,EAA0BoR,WAAW5R,sBAAWQ,IAAhD,EAlBoC,EAmBpC,EAAEvU,MAAMgF,YAAYoV,aAApB,EAAmCuL,WAAW5R,sBAAWqG,aAAzD,EAnBoC,CAAtC;AAqBAyL,8BAA8BjnB,OAA9B,CAAsCknB,+BAA+B;AACnEF,aAAWE,4BAA4B9lB,IAAvC,IAA+C,CAACW,MAAD,EAAS0e,MAAT,KAAoB;AACjE,WAAOkG,qBAAqB5kB,MAArB,6BACF0e,MADE;AAELsG,iBAAWG,4BAA4BH,SAFlC;AAGLR,kBAAYvB,0BAAeC,KAHtB;AAIL2B,eAAS;AAJJ,OAAP;AAMD,GAPD;AAQD,CATD;;AAWAI,WAAW5gB,YAAYoS,SAAvB,IAAoC,CAACzW,MAAD,EAAS0e,MAAT,KAAoB;AACtD,SAAO,CACLkG,qBAAqB5kB,MAArB,6BACK0e,MADL;AAEEsG,eAAW5R,sBAAW6O,IAFxB;AAGEuC,gBAAYvB,0BAAeC,KAH7B;AAIE2B,aAAS;AAJX,KADK,EAOLT,iBAAiBF,WAAWX,YAA5B,EAA0CvjB,MAA1C,EAAkD;AAChDE,WAAOF,OAAOmF,OAAP,CAAejF;AAD0B,GAAlD,CAPK,CAAP;AAWD,CAZD;;AAcA;AACA+kB,WAAW5gB,YAAYqS,iBAAvB,IAA4C,CAAC1W,MAAD,EAAS0e,MAAT,KAAoB;AAC9D,SAAO,CACLkG,qBAAqB5kB,MAArB,6BACK0e,MADL;AAEEsG,eAAW5R,sBAAW6O,IAFxB;AAGEuC,gBAAYvB,0BAAeE,MAH7B;AAIE0B,aAAS;AAJX,KADK,EAOLP,mBAAmBtkB,MAAnB,EAA2B0e,MAA3B,CAPK,CAAP;AASD,CAVD;;AAYAuG,WAAW5gB,YAAY0T,iBAAvB,IAA4C,CAAC/X,MAAD,EAAS0e,MAAT,KAAoB;AAC9D,SAAOkG,qBAAqB5kB,MAArB,6BACF0e,MADE;AAELsG,eAAWhlB,OAAOmF,OAAP,CAAe6f,SAFrB;AAGLR,gBAAYvB,0BAAeE,MAHtB;AAIL0B,aAAS;AAJJ,KAAP;AAMD,CAPD;;AASAI,WAAW5gB,YAAY+U,6BAAvB,IAAwD,CAACpZ,MAAD,EAAS0e,MAAT,KAAoB;AAC1E,QAAM0G,kBAAkB,mBAAUplB,MAAV,CAAxB;AACAolB,kBAAgBjgB,OAAhB,CAAwBsZ,EAAxB,GAA6Bze,OAAOmF,OAAP,CAAeic,WAA5C;AACA,SAAO,CACLwD,qBAAqB5kB,MAArB,6BACK0e,MADL;AAEEsG,eAAW5R,sBAAWO,qBAFxB;AAGE6Q,gBAAYvB,0BAAeE,MAH7B;AAIE0B,aAAS;AAJX,KADK,EAOLD,qBAAqBQ,eAArB,6BACK1G,MADL;AAEEsG,eAAW5R,sBAAWO,qBAFxB;AAGE6Q,gBAAYvB,0BAAeE,MAH7B;AAIE0B,aAAS;AAJX,KAPK,CAAP;AAcD,CAjBD;;AAmBAI,WAAW5gB,YAAYkV,YAAvB,IAAuC,CAACvZ,MAAD,EAAS0e,MAAT,KAAoB;AACzD,QAAM2G,kBAAkBrlB,OAAOmF,OAAP,CAAemgB,WAAf,CAA2BvT,GAA3B,CAA+BmD,UAAU;AAC/D,UAAMqQ,YAAY,mBAAUvlB,MAAV,CAAlB;AACAulB,cAAUpgB,OAAV,CAAkBsZ,EAAlB,GAAuBvJ,MAAvB;AACA,WAAO0P,qBAAqBW,SAArB,6BACF7G,MADE;AAELsG,iBAAW5R,sBAAWQ,IAFjB;AAGL4Q,kBAAYvB,0BAAeE,MAHtB;AAIL0B,eAAS;AAJJ,OAAP;AAMD,GATuB,CAAxB;AAUAQ,kBAAgBjpB,IAAhB,CAAqBgoB,iBAAiBF,WAAWV,SAA5B,EAAuCxjB,MAAvC,CAArB;AACA,SAAOqlB,eAAP;AACD,CAbD;;AAeA;AACA,MAAMG,2BAA2B,CAC/B,EAAEnmB,MAAMgF,YAAYuS,gBAApB,EAAsCoO,WAAW5R,sBAAW6O,IAA5D,EAAkE4C,SAAS,IAA3E,EAD+B,EAE/B,EAAExlB,MAAMgF,YAAY6T,gBAApB,EAAsC8M,WAAW5R,sBAAWkP,IAA5D,EAAkEuC,SAAS,IAA3E,EAF+B,EAG/B,EAAExlB,MAAMgF,YAAY+T,kBAApB,EAAwC4M,WAAW5R,sBAAWmP,MAA9D,EAAsEsC,SAAS,IAA/E,EAH+B,EAI/B,EAAExlB,MAAMgF,YAAYyV,uBAApB,EAA6CkL,WAAW5R,sBAAWkP,IAAnE,EAAyEuC,SAAS,KAAlF,EAJ+B,EAK/B,EAAExlB,MAAMgF,YAAY0V,yBAApB,EAA+CiL,WAAW5R,sBAAWmP,MAArE,EAA6EsC,SAAS,KAAtF,EAL+B,EAM/B,EAAExlB,MAAMgF,YAAYkT,kBAApB,EAAwCyN,WAAW5R,sBAAW+O,MAA9D,EAAsE0C,SAAS,IAA/E,EAN+B,EAO/B,EAAExlB,MAAMgF,YAAYoT,kBAApB,EAAwCuN,WAAW5R,sBAAWgP,MAA9D,EAAsEyC,SAAS,IAA/E,EAP+B,EAQ/B,EAAExlB,MAAMgF,YAAYiV,sBAApB,EAA4C0L,WAAW5R,sBAAWM,eAAlE,EAAmFmR,SAAS,IAA5F,EAR+B,EAS/B,EAAExlB,MAAMgF,YAAYgV,4BAApB,EAAkD2L,WAAW5R,sBAAWO,qBAAxE,EAA+FkR,SAAS,IAAxG,EAT+B,EAU/B,EAAExlB,MAAMgF,YAAYmV,WAApB,EAAiCwL,WAAW5R,sBAAWQ,IAAvD,EAA6DiR,SAAS,IAAtE,EAV+B,EAW/B,EAAExlB,MAAMgF,YAAYyT,mBAApB,EAAyCkN,WAAW5R,sBAAWyE,YAA/D,EAA6EgN,SAAS,IAAtF,EAX+B,CAAjC;AAaAW,yBAAyBvnB,OAAzB,CAAiCwnB,2BAA2B;AAC1DR,aAAWQ,wBAAwBpmB,IAAnC,IAA2C,CAACW,MAAD,EAAS0e,MAAT,KAAoB;AAC7D,WAAO,CACLkG,qBAAqB5kB,MAArB,6BACK0e,MADL;AAEEsG,iBAAWS,wBAAwBT,SAFrC;AAGEH,eAASY,wBAAwBZ,OAHnC;AAIEL,kBAAYvB,0BAAeG;AAJ7B,OADK,EAOLkB,mBAAmBtkB,MAAnB,EAA2B0e,MAA3B,CAPK,CAAP;AASD,GAVD;AAWD,CAZD;;AAcAuG,WAAW5gB,YAAYuT,eAAvB,IAA0C,CAAC5X,MAAD,EAAS0e,MAAT,KAAoB;AAC5D,SAAO,CACLkG,qBAAqB5kB,MAArB,6BACK0e,MADL;AAEEsG,eAAW5R,sBAAWiP,GAFxB;AAGEmC,gBAAYvB,0BAAeG,MAH7B;AAIEyB,aAAS7kB,OAAOmF,OAAP,CAAe0f;AAJ1B,KADK,EAOLP,mBAAmBtkB,MAAnB,EAA2B0e,MAA3B,CAPK,CAAP;AASD,CAVD;;AAYAuG,WAAW5gB,YAAYgT,kBAAvB,IAA6C,CAACrX,MAAD,EAAS0e,MAAT,KAAoB;AAC/D,QAAMgH,SAAS,EAAf;AACA;AACAA,SAAOtpB,IAAP,CACEwoB,qBAAqB5kB,MAArB,6BACK0e,MADL;AAEEsG,eAAW5R,sBAAW8O,MAFxB;AAGEsC,gBAAYvB,0BAAeG,MAH7B;AAIEyB,aAAS;AAJX,KADF;;AASA;AACA;AACA;AACA,MAAI7kB,OAAOuJ,IAAP,IAAevJ,OAAOuJ,IAAP,CAAYoc,WAA/B,EAA4C;AAC1C,WAAOD,MAAP;AACD;;AAEDA,SAAOtpB,IAAP,CAAYkoB,mBAAmBtkB,MAAnB,EAA2B0e,MAA3B,CAAZ;AACA,SAAOgH,MAAP;AACD,CArBD;;AAuBAT,WAAW5gB,YAAYoU,gBAAvB,IAA2C,CAACzY,MAAD,EAAS0e,MAAT,KAAoB;AAC7D,SAAO,CACLkG,qBAAqB5kB,MAArB,6BACK0e,MADL;AAEEsG,eAAW5R,sBAAWoF,SAFxB;AAGEgM,gBAAYvB,0BAAeG,MAH7B;AAIEyB,aAAS7kB,OAAOmF,OAAP,CAAeygB;AAJ1B,KADK,EAOLxB,iBAAiBF,WAAWR,gBAA5B,EAA8C1jB,MAA9C,EAAsD;AACpD4lB,WAAO5lB,OAAOmF,OAAP,CAAeygB,KAD8B;AAEpDjF,YAAQ3gB,OAAOmF,OAAP,CAAewb,MAF6B;AAGpDkF,aAAS7lB,OAAOmF,OAAP,CAAe0gB,OAH4B;AAIpD3lB,WAAOF,OAAOmF,OAAP,CAAejF;AAJ8B,GAAtD,CAPK,CAAP;AAcD,CAfD;;AAiBA+kB,WAAW5gB,YAAYuU,mBAAvB,IAA8C,CAAC5Y,MAAD,EAAS0e,MAAT,KAAoB;AAChE,SAAO,CACLkG,qBAAqB5kB,MAArB,6BACK0e,MADL;AAEEsG,eAAW5R,sBAAWuF,YAFxB;AAGE6L,gBAAYvB,0BAAeG,MAH7B;AAIEyB,aAAS7kB,OAAOmF,OAAP,CAAeygB;AAJ1B,KADK,EAOLxB,iBAAiBF,WAAWP,kBAA5B,EAAgD3jB,MAAhD,EAAwD;AACtD4lB,WAAO5lB,OAAOmF,OAAP,CAAeygB,KADgC;AAEtDjF,YAAQ3gB,OAAOmF,OAAP,CAAewb,MAF+B;AAGtDzgB,WAAOF,OAAOmF,OAAP,CAAejF;AAHgC,GAAxD,CAPK,CAAP;AAaD,CAdD;;AAgBA;;;;AAIA+kB,WAAW5gB,YAAY0U,kBAAvB,IAA6C,CAAC/Y,MAAD,EAAS0e,MAAT,KAAoB;AAC/D,SAAO,CACLkG,qBAAqB5kB,MAArB,6BACK0e,MADL;AAEEsG,eAAW5R,sBAAW0F,WAFxB;AAGE0L,gBAAYvB,0BAAeG,MAH7B;AAIEyB,aAAS7kB,OAAOmF,OAAP,CAAeygB;AAJ1B,KADK,EAOLxB,iBAAiBF,WAAWP,kBAA5B,EAAgD3jB,MAAhD,EAAwD;AACtD4lB,WAAO5lB,OAAOmF,OAAP,CAAeygB,KADgC;AAEtDjF,YAAQ3gB,OAAOmF,OAAP,CAAewb,MAF+B;AAGtDzgB,WAAOF,OAAOmF,OAAP,CAAejF;AAHgC,GAAxD,CAPK,CAAP;AAaD,CAdD;;AAgBA+kB,WAAW5gB,YAAY8U,gBAAvB,IAA2C,CAACnZ,MAAD,EAAS0e,MAAT,KAAoB;AAC7D,SAAO,CACLkG,qBAAqB5kB,MAArB,6BACK0e,MADL;AAEEsG,eAAW5R,sBAAW8F,SAFxB;AAGEsL,gBAAYvB,0BAAeG,MAH7B;AAIEyB,aAAS;AAJX,KADK,EAOLT,iBAAiBF,WAAWJ,cAA5B,EAA4C9jB,MAA5C,EAAoD;AAClDuR,YAAQvR,OAAOmF,OAAP,CAAeoM,MAD2B;AAElDrR,WAAOF,OAAOmF,OAAP,CAAejF,KAF4B;AAGlD8gB,aAAShhB,OAAOmF,OAAP,CAAe6b;AAH0B,GAApD,CAPK,CAAP;AAaD,CAdD;;AAgBAiE,WAAW5gB,YAAYqV,oBAAvB,IAA+C,CAAC1Z,MAAD,EAAS0e,MAAT,KAAoB;AACjE,SAAO,CACLkG,qBAAqB5kB,MAArB,6BACK0e,MADL;AAEEsG,eAAW5R,sBAAWqG,aAFxB;AAGE+K,gBAAYvB,0BAAeG,MAH7B;AAIEyB,aAAS;AAJX,KADK,EAOLT,iBAAiBF,WAAWH,mBAA5B,EAAiD/jB,MAAjD,EAAyD;AACvDE,WAAOF,OAAOmF,OAAP,CAAejF,KADiC;AAEvD4lB,gBAAY9lB,OAAOmF,OAAP,CAAe2gB,UAF4B;AAGvDC,cAAU/lB,OAAOmF,OAAP,CAAe6gB;AAH8B,GAAzD,CAPK,CAAP;AAaD,CAdD;;AAgBAf,WAAW5gB,YAAY4U,gBAAvB,IAA2C,CAACjZ,MAAD,EAAS0e,MAAT,KAAoB;AAC7D,SAAOkG,qBAAqB5kB,MAArB,6BACF0e,MADE;AAELsG,eAAW5R,sBAAW4F,SAFjB;AAGLwL,gBAAYvB,0BAAeG,MAHtB;AAILyB,aAAS;AAJJ,KAAP;AAMD,CAPD;;AASAI,WAAW5gB,YAAYkU,6BAAvB,IAAwD,CAACvY,MAAD,EAAS0e,MAAT,KAAoB;AAC1E,SAAOkG,qBAAqB5kB,MAArB,6BACF0e,MADE;AAELsG,eAAW5R,sBAAWkF,sBAFjB;AAGLuM,aAAS,IAHJ;AAILL,gBAAYvB,0BAAeG;AAJtB,KAAP;AAMD,CAPD;;AASA;AACA6B,WAAW5gB,YAAYsV,0BAAvB,IAAqD3Z,UAAU;AAC7D,SAAOokB,iBAAiBF,WAAWF,iBAA5B,EAA+ChkB,MAA/C,EAAuD;AAC5D8e,sBAAkB9e,OAAOmF,OAAP,CAAe2Z;AAD2B,GAAvD,CAAP;AAGD,CAJD;;AAMAmG,WAAW5gB,YAAYwV,0BAAvB,IAAqD7Z,UAAU;AAC7D,SAAOokB,iBAAiBF,WAAWD,gBAA5B,EAA8CjkB,MAA9C,EAAsD;AAC3D3B,UAAM2B,OAAOmF,OAAP,CAAe9G,IADsC;AAE3D4nB,YAAQjmB,OAAOmF,OAAP,CAAe8gB;AAFoC,GAAtD,CAAP;AAID,CALD;;AAOAhB,WAAW5gB,YAAY0S,aAAvB,IAAwC/W,UAAU;AAChD,SAAOokB,iBAAiBF,WAAWnN,aAA5B,EAA2C/W,MAA3C,EAAmD;AACxDE,WAAOF,OAAOmF,OAAP,CAAejF;AADkC,GAAnD,CAAP;AAGD,CAJD;;AAMA+kB,WAAW5gB,YAAY2S,YAAvB,IAAuCsN,kBAAvC;AACAW,WAAW5gB,YAAY4S,gBAAvB,IAA2CqN,kBAA3C;AACAW,WAAW5gB,YAAY6S,cAAvB,IAAyCoN,kBAAzC;AACAW,WAAW5gB,YAAYqT,aAAvB,IAAwC4M,kBAAxC;AACA;AACAW,WAAW5gB,YAAY2T,WAAvB,IAAsCsM,kBAAtC;;AAEAW,WAAWd,kBAAkB+B,iBAA7B,IAAkD,CAAClmB,MAAD,EAASgiB,OAAT,KAAqB;AACrE,QAAMnW,QAAQmW,QAAQnW,KAAtB;AACA;AACA,QAAM/P,OAAO,yCAAyB+P,KAAzB,EAAgC7L,OAAOmF,OAAP,CAAesZ,EAA/C,CAAb;;AAEA,MAAI3iB,IAAJ,EAAU;AACR;AACA;AACA,WAAOsoB,iBAAiBF,WAAWN,cAA5B,EAA4C5jB,MAA5C,6BACFA,OAAOmF,OADL;AAEL+P,cAAQpZ,KAAK2iB;AAFR,OAAP;AAID;AACD,SAAO,IAAP;AACD,CAdD;;AAgBAwG,WAAWd,kBAAkBgC,qBAA7B,IAAsD,CAACnmB,MAAD,EAASgiB,OAAT,KAAqB;AACzE,QAAMnW,QAAQmW,QAAQnW,KAAtB;AACA,QAAM/P,OAAO,yCAAyB+P,KAAzB,EAAgC7L,OAAOmF,OAAP,CAAesZ,EAA/C,CAAb;;AAEA,MAAI3iB,IAAJ,EAAU;AACR,UAAM+iB,cAAc,2BAAWhT,KAAX,CAApB;AACA,QAAIgT,YAAYuH,YAAZ,KAA6B,QAAjC,EAA2C;AACzC;AACA;AACA,aAAO,IAAP;AACD;AACD,WAAOhC,iBAAiBF,WAAWL,gBAA5B,EAA8C7jB,MAA9C,6BACFA,OAAOmF,OADL;AAEL+P,cAAQpZ,KAAK2iB;AAFR,OAAP;AAID;AACF,CAhBD;;AAkBAwG,WAAWd,kBAAkBkC,mBAA7B,IAAoD,CAACrmB,MAAD,EAASgiB,OAAT,KAAqB;AACvE,QAAMnW,QAAQmW,QAAQnW,KAAtB;AACA,QAAM/P,OAAO,yCAAyB+P,KAAzB,EAAgC7L,OAAOmF,OAAP,CAAesZ,EAA/C,CAAb;;AAEA,MAAI3iB,IAAJ,EAAU;AACR,WAAOsoB,iBAAiBF,WAAWL,gBAA5B,EAA8C7jB,MAA9C,6BACFA,OAAOmF,OADL;AAEL+P,cAAQpZ,KAAK2iB;AAFR,OAAP;AAID;AACF,CAVD;;AAYAwG,WAAW5gB,YAAYyS,0BAAvB,IAAqD,CAAC9W,MAAD,EAASgiB,OAAT,KAAqB;AACxE,SAAOoC,iBAAiBF,WAAWX,YAA5B,EAA0CvjB,MAA1C,EAAkD;AACvDE,WAAOF,OAAOmF,OAAP,CAAejF;AADiC,GAAlD,CAAP;AAGD,CAJD;;6CAOK+kB,U;;;;;;;;;;;;;;AClcL;;;;AACA;;;;;;AAEA;;;;AAJA;AAQA,MAAMvZ,OAAO,MAAb;;AAEA;kBACe;AACbA,MADa;AAEbf,oBAFa;AAGbc;AAHa,C;;;;;;;;;;;;;;;;;;;;;;ACVf;;IAAYpH,W;;AACZ;;AACA;;AAGA;;AACA;;;;;;AAEA;;;;;;;;;AAJA;AAWA,MAAMiiB,OAAO,CAACza,KAAD,EAAQ7L,MAAR,KAAmB6L,KAAhC;;AAEA;;;;AAlBA;AAsBA,MAAM0a,YAAY,CAAC1a,KAAD,EAAQ7L,MAAR,KAAmB;AACnC,QAAM0B,MAAMC,KAAKD,GAAL,EAAZ;AACA,oCACKmK,KADL;AAEEA,WAAO0G,uBAAYQ,KAFrB;AAGE;AACA;AACAyT,eAAW3a,MAAM2a,SAAN,IAAmB9kB,GALhC;AAME+kB,aAAS/kB,GANX;AAOEglB,kDACK7a,MAAM6a,iBADX,EAEK1mB,OAAOmF,OAAP,CAAeuhB,iBAFpB,CAPF;AAWE;AACAvb,eAAWW;AAZb;AAcD,CAhBD;;AAkBA;AACA,MAAMH,WAAW,EAAjB;AACA;AACA,MAAMgb,eAAe,EAArB;;AAEA;;;;;AAKA;AACAhb,SAAStH,YAAYoS,SAArB,IAAkC;AAChC7K,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB;AACA,QAAI4mB,UAAU;AACZnI,UAAIze,OAAOmF,OAAP,CAAesZ,EADP;AAEZiI,yBAAmB;AACjBG,uBAAe7mB,OAAOmF,OAAP,CAAe+a,kBADb;AAEjB4G,qBAAa9mB,OAAOmF,OAAP,CAAe4hB;AAFX,OAFP;AAMZ;AACAC,UAAIhnB,OAAOmF,OAAP,CAAe+a,kBAPP;AAQZT,YAAMzf,OAAOmF,OAAP,CAAesa,IART;AASZb,wBAAkB5e,OAAOmF,OAAP,CAAeyZ,gBATrB;AAUZqI,oBAAcjnB,OAAOmF,OAAP,CAAe8hB,YAVjB;AAWZ;AACApb,aAAO0G,uBAAYC,UAZP;AAaZ0U,iBAAW7S,0BAAeE,QAbd;AAcZ;AACAmQ,iBAAW,KAfC;AAgBZC,kBAAY,KAhBA;AAiBZwC,gBAAU,IAjBE;AAkBZ;AACA3hB,mBAAaxF,OAAOmF,OAAP,CAAeK,WAnBhB;AAoBZ;AACA4hB,eAASpnB,OAAOmF,OAAP,CAAeiiB;;AAG1B;AAxBc,KAAd,CAyBAR,UAAU,8BAAkBA,OAAlB,EAA2B5mB,MAA3B,CAAV;;AAEA,WAAO,gBAAO6L,KAAP,EAAc+a,OAAd,CAAP;AACD;AA/B+B,CAAlC;;AAkCA;AACAjb,SAAStH,YAAY0S,aAArB,IAAsC;AACpCnL,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,WAAO,gBAAO6L,KAAP;AACLsb,gBAAU;AADL,OAEFnnB,OAAOmF,OAFL,EAAP;AAID;AANmC,CAAtC;;AASA;;;;;AAKAwhB,aAAatiB,YAAY2S,YAAzB,IAAyC;AACvCpL,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,QAAIA,OAAOmF,OAAP,CAAeuhB,iBAAnB,EAAsC;AACpC,wCACK7a,KADL;AAEEA,eAAO0G,uBAAYI,OAFrB;AAGE+T,2BAAmB1mB,OAAOmF,OAAP,CAAeuhB;AAHpC;AAKD,KAND,MAMO;AACL,wCACK7a,KADL;AAEEA,eAAO0G,uBAAYI;AAFrB;AAID;AACF;AAdsC,CAAzC;;AAiBA;AACAgU,aAAatiB,YAAY4S,gBAAzB,IAA6C;AAC3CrL,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL;AAEEA,aAAO0G,uBAAYG,WAFrB;AAGEgU,yBAAmB1mB,OAAOmF,OAAP,CAAeuhB;AAHpC;AAKD;AAP0C,CAA7C;;AAUA;;;;;AAKA;;;;;AAKAC,aAAatiB,YAAY0T,iBAAzB,IAA8CuO,IAA9C;AACAK,aAAatiB,YAAY+S,WAAzB,IAAwCkP,IAAxC;AACAK,aAAatiB,YAAY4T,SAAzB,IAAsCqO,IAAtC;AACAK,aAAatiB,YAAY8T,WAAzB,IAAwCmO,IAAxC;AACAK,aAAatiB,YAAYiU,sBAAzB,IAAmDgO,IAAnD;AACAK,aAAatiB,YAAYsT,QAAzB,IAAqC2O,IAArC;AACAK,aAAatiB,YAAYmU,SAAzB,IAAsC8N,IAAtC;AACAK,aAAatiB,YAAYsU,YAAzB,IAAyC2N,IAAzC;AACAK,aAAatiB,YAAYqU,eAAzB,IAA4C4N,IAA5C;AACAK,aAAatiB,YAAYwU,kBAAzB,IAA+CyN,IAA/C;AACAK,aAAatiB,YAAYyU,WAAzB,IAAwCwN,IAAxC;AACAK,aAAatiB,YAAYwT,YAAzB,IAAyCyO,IAAzC;AACAK,aAAatiB,YAAYiT,WAAzB,IAAwCgP,IAAxC;AACAK,aAAatiB,YAAY2U,SAAzB,IAAsCsN,IAAtC;AACAK,aAAatiB,YAAY4U,gBAAzB,IAA6CqN,IAA7C;AACAK,aAAatiB,YAAYmT,WAAzB,IAAwC8O,IAAxC;AACAK,aAAatiB,YAAYqP,eAAzB,IAA4C4S,IAA5C;AACAK,aAAatiB,YAAYoV,aAAzB,IAA0C6M,IAA1C;AACAK,aAAatiB,YAAYqV,oBAAzB,IAAiD4M,IAAjD;AACAK,aAAatiB,YAAY+V,iBAAzB,IAA8CkM,IAA9C;AACAK,aAAatiB,YAAY6V,uBAAzB,IAAoDoM,IAApD;AACAK,aAAatiB,YAAY8V,sBAAzB,IAAmDmM,IAAnD;AACAK,aAAatiB,YAAY6U,SAAzB,IAAsCoN,IAAtC;AACAK,aAAatiB,YAAY8U,gBAAzB,IAA6CmN,IAA7C;;AAEAK,aAAatiB,YAAY6S,cAAzB,IAA2C;AACzCtL,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL;AAEEA,aAAO0G,uBAAYK;AAFrB;AAID;AANwC,CAA3C;;AASA+T,aAAatiB,YAAYoT,kBAAzB,IAA+C;AAC7C7L,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB;AACA;AACA;AACA,UAAM0B,MAAMC,KAAKD,GAAL,EAAZ;;AAEA,sCACKmK,KADL;AAEE2a,iBAAW9kB,GAFb;AAGE+kB,eAAS/kB,GAHX;AAIEmK,aAAO0G,uBAAYQ;AAJrB;AAMD;AAb4C,CAA/C;;AAgBA4T,aAAatiB,YAAYkT,kBAAzB,IAA+C;AAC7C3L,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB;AACA;AACA;AACA,UAAM0B,MAAMC,KAAKD,GAAL,EAAZ;;AAEA,sCACKmK,KADL;AAEE2a,iBAAW9kB,GAFb;AAGE+kB,eAAS/kB,GAHX;AAIEmK,aAAO0G,uBAAYQ;AAJrB;AAMD;AAb4C,CAA/C;;AAgBA4T,aAAatiB,YAAYsS,eAAzB,IAA4C;AAC1C/K,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB;AACA;AACA;AACA,sCACK6L,KADL;AAEE2J,uBAAiBxV,OAAOmF,OAAP,CAAeqQ;AAFlC;AAID;AATyC,CAA5C;;AAYAmR,aAAatiB,YAAYqS,iBAAzB,IAA8C;AAC5C9K,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL;AAEEA,aAAO7L,OAAOmF,OAAP,CAAe0G,KAFxB;AAGEwb,sBAAgBrnB,OAAOmF,OAAP,CAAekiB,cAHjC;AAIE7R,uBAAiBxV,OAAOmF,OAAP,CAAeqQ,eAJlC;AAKE8R,iBAAWtnB,OAAOmF,OAAP,CAAemiB,SAL5B;AAMER,mBAAa9mB,OAAOmF,OAAP,CAAe2hB,WAN9B;AAOEhI,wBAAkB9e,OAAOmF,OAAP,CAAe2Z;AAPnC;AASD;AAX2C,CAA9C;;AAcA;AACA6H,aAAatiB,YAAYuS,gBAAzB,IAA6C;AAC3ChL,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL,EAEK7L,OAAOmF,OAFZ;AAID,GAN0C;AAO3C4G,QAAOF,KAAP,EAAc7L,MAAd,EAAsB;AACpB,sCACK6L,KADL,EAEK7L,OAAOmF,OAFZ;AAID;AAZ0C,CAA7C;;AAeA;AACAwhB,aAAatiB,YAAYgT,kBAAzB,IAA+C;AAC7CzL,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB;AACA;AACA;AACA,UAAMunB,WAAWvnB,OAAOmF,OAAP,CAAeqQ,eAAf,IAAkC3J,MAAM2J,eAAzD;;AAEA,UAAMgS,sCACD3b,KADC;AAEJA,aAAO7L,OAAOmF,OAAP,CAAe0G,KAFlB;AAGJ+S,wBAAkB5e,OAAOmF,OAAP,CAAeyZ,gBAH7B;AAIJqI,oBAAcjnB,OAAOmF,OAAP,CAAe8hB,YAJzB;AAKJzR,uBAAiB+R,QALb;AAMJ7C,iBAAW,KANP;AAOJC,kBAAY,KAPR;AAQJ2C,iBAAWtnB,OAAOmF,OAAP,CAAemiB,SARtB;AASJxI,wBAAkB9e,OAAOmF,OAAP,CAAe2Z;;AAGnC;AAZM,MAAN,CAaA,IAAI9e,OAAOuJ,IAAP,IAAe,CAACvJ,OAAOuJ,IAAP,CAAYoc,WAAhC,EAA6C;AAC3C6B,eAAShB,SAAT,GAAqBxmB,OAAOmF,OAAP,CAAeqhB,SAApC;AACD;;AAED,WAAOgB,QAAP;AACD,GAzB4C;AA0B7Czb,QAAOF,KAAP,EAAc7L,MAAd,EAAsB;AACpB,sCACK6L,KADL,EAEK7L,OAAOmF,OAFZ;AAID;AA/B4C,CAA/C;;AAkCAwhB,aAAatiB,YAAYqT,aAAzB,IAA0C;AACxC9L,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL,EAEK7L,OAAOmF,OAFZ;AAID,GANuC;AAOxC4G,QAAOF,KAAP,EAAc7L,MAAd,EAAsB;AACpB,UAAMwnB,WAAWxnB,OAAOmF,OAAP,CAAe0G,KAAf,IAAwBA,MAAMA,KAA/C;AACA,sCACKA,KADL;AAEEA,aAAO2b;AAFT;AAID;AAbuC,CAA1C;;AAgBA;AACA;AACA;AACAb,aAAatiB,YAAYuT,eAAzB,IAA4C2O,SAA5C;;AAEAI,aAAatiB,YAAY2T,WAAzB,IAAwC;AACtCpM,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,4BAAoDA,OAAOmF,OAA3D;AAAA,UAAM,EAAEqf,UAAF,EAAN;AAAA,UAAuBiD,wBAAvB;AACA,sCACK5b,KADL,EAEK4b,wBAFL;AAID;AAPqC,CAAxC;;AAUAd,aAAatiB,YAAY6T,gBAAzB,IAA6C;AAC3CtM,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL;AAEE6Y,iBAAW,IAFb;AAGE7Y,aAAO0G,uBAAYO;AAHrB;AAKD;AAP0C,CAA7C;;AAUA6T,aAAatiB,YAAY+T,kBAAzB,IAA+C;AAC7CxM,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,UAAM0nB,YAAY7b,MAAM8Y,UAAN,GAAmBpS,uBAAYO,OAA/B,GAAyCP,uBAAYM,SAAvE;AACA,sCACKhH,KADL;AAEE6Y,iBAAW,KAFb;AAGE7Y,aAAO6b;AAHT;AAKD;AAR4C,CAA/C;;AAWAf,aAAatiB,YAAYgU,qBAAzB,IAAkD;AAChDzM,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,QAAI8e,mBAAmB9e,OAAOmF,OAAP,CAAe2Z,gBAAtC;AACA,QAAIriB,MAAMC,OAAN,CAAcoiB,gBAAd,KAAmCA,iBAAiBljB,MAAjB,KAA4B,CAAnE,EAAsE;AACpEkjB,yBAAmBhT,SAAnB;AACD;AACD,sCACKD,KADL;AAEEiT;AAFF;AAID;AAV+C,CAAlD;;AAaA6H,aAAatiB,YAAYkU,6BAAzB,IAA0D;AACxD3M,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL,EAEK7L,OAAOmF,OAFZ;AAID;AANuD,CAA1D;;AASAwhB,aAAatiB,YAAYyV,uBAAzB,IAAoD;AAClDlO,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL;AAEE8Y,kBAAY,IAFd;AAGE9Y,aAAO0G,uBAAYO,OAHrB;AAIE4T,oDACK7a,MAAM6a,iBADX,EAEK1mB,OAAOmF,OAAP,CAAeuhB,iBAFpB;AAJF;AASD;AAXiD,CAApD;;AAcAC,aAAatiB,YAAY0V,yBAAzB,IAAsD;AACpDnO,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,UAAM0nB,YAAY7b,MAAM6Y,SAAN,GAAkBnS,uBAAYO,OAA9B,GAAwCP,uBAAYM,SAAtE;AACA,sCACKhH,KADL;AAEE8Y,kBAAY,KAFd;AAGE9Y,aAAO6b,SAHT;AAIEhB,oDACK7a,MAAM6a,iBADX,EAEK1mB,OAAOmF,OAAP,CAAeuhB,iBAFpB;AAJF;AASD;AAZmD,CAAtD;;AAeAC,aAAatiB,YAAYyT,mBAAzB,IAAgD;AAC9ClM,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL;AAEEA,aAAO0G,uBAAYQ;AAFrB;AAID;AAN6C,CAAhD;;AASA4T,aAAatiB,YAAYiV,sBAAzB,IAAmD;AACjD1N,QAAM2a;AAD2C,CAAnD;;AAIA5a,SAAStH,YAAYsP,qBAArB,IAA8C;AAC5C/H,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,UAAM2nB,UAAU,CAAC3nB,OAAOmF,OAAP,CAAesZ,EAAhB,EAAoBze,OAAOmF,OAAP,CAAeic,WAAnC,CAAhB;;AAEA;AACA;AACA,WAAOvV,MAAMkG,GAAN,CAAUjW,QAAQ;AACvB,UAAI6rB,QAAQ5hB,QAAR,CAAiBjK,KAAK2iB,EAAtB,CAAJ,EAA+B;AAC7B,eAAO,8BAAkB3iB,IAAlB,EAAwBkE,MAAxB,CAAP;AACD,OAFD,MAEO;AACL,eAAOlE,IAAP;AACD;AACF,KANM,CAAP;AAOD;AAb2C,CAA9C;;AAgBA6P,SAAStH,YAAY+U,6BAArB,IAAsD;AACpDxN,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,WAAO6L,MAAMkG,GAAN,CAAUjW,QAAQ;AACvB,UAAIA,KAAK2iB,EAAL,KAAYze,OAAOmF,OAAP,CAAesZ,EAA3B,IAAiC3iB,KAAK2iB,EAAL,KAAYze,OAAOmF,OAAP,CAAeic,WAAhE,EAA6E;AAC3E;AACA,eAAO,8BAAkBtlB,IAAlB,EAAwBkE,MAAxB,CAAP;AACD,OAHD,MAGO;AACL,eAAOlE,IAAP;AACD;AACF,KAPM,CAAP;AAQD;AAVmD,CAAtD;;AAaA6P,SAAStH,YAAYgV,4BAArB,IAAqD;AACnDzN,QAAM,CAACC,KAAD,EAAQ7L,MAAR,KAAmB;AACvB,WAAO6L,MAAMkG,GAAN,CAAUjW,QAAQ;AACvB,UAAIA,KAAK2iB,EAAL,KAAYze,OAAOmF,OAAP,CAAesZ,EAA3B,IAAiC3iB,KAAK2iB,EAAL,KAAYze,OAAOmF,OAAP,CAAeic,WAAhE,EAA6E;AAC3E,cAAMwG,YAAYrB,UAAUzqB,IAAV,EAAgBkE,MAAhB,CAAlB;AACA,eAAO,8BAAkB4nB,SAAlB,EAA6B5nB,MAA7B,CAAP;AACD,OAHD,MAGO;AACL,eAAOlE,IAAP;AACD;AACF,KAPM,CAAP;AAQD,GAVkD;AAWnDiQ,SAAO,CAACF,KAAD,EAAQ7L,MAAR,KAAmB;AACxB,WAAO6L,MAAMkG,GAAN,CAAUjW,QAAQ;AACvB,UAAIA,KAAK2iB,EAAL,KAAYze,OAAOmF,OAAP,CAAesZ,EAA3B,IAAiC3iB,KAAK2iB,EAAL,KAAYze,OAAOmF,OAAP,CAAeic,WAAhE,EAA6E;AAC3E,eAAO,8BAAkBtlB,IAAlB,EAAwBkE,MAAxB,CAAP;AACD,OAFD,MAEO;AACL,eAAOlE,IAAP;AACD;AACF,KANM,CAAP;AAOD;AAnBkD,CAArD;;AAsBA6P,SAAStH,YAAYuP,IAArB,IAA6B;AAC3BhI,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB;AACA,UAAM2nB,UAAU,CAAC3nB,OAAOmF,OAAP,CAAesZ,EAAhB,EAAoBze,OAAOmF,OAAP,CAAeic,WAAnC,CAAhB;;AAEA,WAAOvV,MAAMkG,GAAN,CAAUjW,QAAQ;AACvB,UAAI6rB,QAAQ5hB,QAAR,CAAiBjK,KAAK2iB,EAAtB,CAAJ,EAA+B;AAC7B,eAAO,8BAAkB3iB,IAAlB,EAAwBkE,MAAxB,CAAP;AACD,OAFD,MAEO;AACL,eAAOlE,IAAP;AACD;AACF,KANM,CAAP;AAOD;AAZ0B,CAA7B;;AAeA6P,SAAStH,YAAYkV,YAArB,IAAqC;AACnC3N,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,UAAM4mB,UAAU;AACdnI,UAAIze,OAAOmF,OAAP,CAAesZ,EADL;AAEdiI,yBAAmB;AACjBG,uBAAe7mB,OAAOmF,OAAP,CAAe+a,kBADb;AAEjB4G,qBAAa9mB,OAAOmF,OAAP,CAAe4hB;AAFX,OAFL;AAMd;AACAC,UAAIhnB,OAAOmF,OAAP,CAAe+a,kBAPL;AAQdT,YAAMzf,OAAOmF,OAAP,CAAesa,IARP;AASdb,wBAAkB5e,OAAOmF,OAAP,CAAeyZ,gBATnB;AAUd/S,aAAO0G,uBAAYE,SAVL;AAWdyU,iBAAW7S,0BAAeE,QAXZ;AAYd;AACAmQ,iBAAW,KAbG;AAcdC,kBAAY,KAdE;AAedwC,gBAAU,IAfI;AAgBdE,sBAAgBrnB,OAAOmF,OAAP,CAAekiB,cAhBjB;AAiBd7R,uBAAiBxV,OAAOmF,OAAP,CAAeqQ,eAjBlB;AAkBdqS,oBAAc,IAlBA;AAmBd/I,wBAAkB9e,OAAOmF,OAAP,CAAe2Z,gBAnBnB;AAoBdwI,iBAAWtnB,OAAOmF,OAAP,CAAemiB;AApBZ,KAAhB;;AAuBA,WAAO,gBACLzb,MAAMkG,GAAN,CAAUjW,QAAQ;AAChB,UAAIkE,OAAOmF,OAAP,CAAemgB,WAAf,CAA2Bvf,QAA3B,CAAoCjK,KAAK2iB,EAAzC,CAAJ,EAAkD;AAChD;AACA,eAAO,8BAAkB3iB,IAAlB,EAAwBkE,MAAxB,CAAP;AACD,OAHD,MAGO;AACL,eAAOlE,IAAP;AACD;AACF,KAPD,CADK,EASL8qB,OATK,CAAP;AAWD;AApCkC,CAArC;;AAuCAjb,SAAStH,YAAYmV,WAArB,IAAoC;AAClC5N,QAAM,CAACC,KAAD,EAAQ7L,MAAR,KAAmB;AACvB,WAAO6L,MAAMkG,GAAN,CAAUjW,QAAQ;AACvB,UACEA,KAAK2iB,EAAL,KAAYze,OAAOmF,OAAP,CAAesZ,EAA3B,IACCze,OAAOmF,OAAP,CAAemgB,WAAf,IAA8BtlB,OAAOmF,OAAP,CAAemgB,WAAf,CAA2Bvf,QAA3B,CAAoCjK,KAAK2iB,EAAzC,CAFjC,EAGE;AACA,cAAMmJ,YAAYrB,UAAUzqB,IAAV,EAAgBkE,MAAhB,CAAlB;AACA,eAAO,8BAAkB4nB,SAAlB,EAA6B5nB,MAA7B,CAAP;AACD,OAND,MAMO;AACL,eAAOlE,IAAP;AACD;AACF,KAVM,CAAP;AAWD,GAbiC;AAclCiQ,SAAO,CAACF,KAAD,EAAQ7L,MAAR,KAAmB;AACxB,WAAO6L,MAAMkG,GAAN,CAAUjW,QAAQ;AACvB,UACEA,KAAK2iB,EAAL,KAAYze,OAAOmF,OAAP,CAAesZ,EAA3B,IACCze,OAAOmF,OAAP,CAAemgB,WAAf,IAA8BtlB,OAAOmF,OAAP,CAAemgB,WAAf,CAA2Bvf,QAA3B,CAAoCjK,KAAK2iB,EAAzC,CAFjC,EAGE;AACA,eAAO,8BAAkB3iB,IAAlB,EAAwBkE,MAAxB,CAAP;AACD,OALD,MAKO;AACL,eAAOlE,IAAP;AACD;AACF,KATM,CAAP;AAUD;AAzBiC,CAApC;;AA4BA6qB,aAAatiB,YAAYoU,gBAAzB,IAA6C;AAC3C7M,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL;AAEEyb,iBAAWtnB,OAAOmF,OAAP,CAAemiB;AAF5B;AAID;AAN0C,CAA7C;;AASAX,aAAatiB,YAAYuU,mBAAzB,IAAgD;AAC9ChN,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL;AAEEyb,iBAAWtnB,OAAOmF,OAAP,CAAemiB;AAF5B;AAID;AAN6C,CAAhD;;AASAX,aAAatiB,YAAY0U,kBAAzB,IAA+C;AAC7CnN,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL;AAEEyb,iBAAWtnB,OAAOmF,OAAP,CAAemiB;AAF5B;AAID;AAN4C,CAA/C;;AASA;;;;AAIA,MAAMQ,cAAc,iCAAcnB,YAAd,EAA4B,EAA5B,CAApB;;AAEA;AACA,MAAMoB,sBAAsB,kCAC1B1jB,YAAY0T,iBADc,EAE1B1T,YAAYqS,iBAFc,EAG1BrS,YAAYuS,gBAHc,EAI1BvS,YAAY+S,WAJc,EAK1B/S,YAAYgT,kBALc,EAM1BhT,YAAYiT,WANc,EAO1BjT,YAAYkT,kBAPc,EAQ1BlT,YAAYqT,aARc,EAS1BrT,YAAY2S,YATc,EAU1B3S,YAAY4S,gBAVc,EAW1B5S,YAAY6S,cAXc,EAY1B7S,YAAYmT,WAZc,EAa1BnT,YAAYoT,kBAbc,EAc1BpT,YAAYsT,QAdc,EAe1BtT,YAAYuT,eAfc,EAgB1BvT,YAAY4T,SAhBc,EAiB1B5T,YAAY6T,gBAjBc,EAkB1B7T,YAAY8T,WAlBc,EAmB1B9T,YAAY+T,kBAnBc,EAoB1B/T,YAAYgU,qBApBc,EAqB1BhU,YAAYiU,sBArBc,EAsB1BjU,YAAYkU,6BAtBc,EAuB1BlU,YAAYyV,uBAvBc,EAwB1BzV,YAAY0V,yBAxBc,EAyB1B1V,YAAYmU,SAzBc,EA0B1BnU,YAAYqU,eA1Bc,EA2B1BrU,YAAYoU,gBA3Bc,EA4B1BpU,YAAYsU,YA5Bc,EA6B1BtU,YAAYwU,kBA7Bc,EA8B1BxU,YAAYuU,mBA9Bc,EA+B1BvU,YAAYyU,WA/Bc,EAgC1BzU,YAAY0U,kBAhCc,EAiC1B1U,YAAY2T,WAjCc,EAkC1B3T,YAAYwT,YAlCc,EAmC1BxT,YAAYyT,mBAnCc,EAoC1BzT,YAAYqP,eApCc,EAqC1BrP,YAAYiV,sBArCc,EAsC1BjV,YAAY2U,SAtCc,EAuC1B3U,YAAY4U,gBAvCc,EAwC1B5U,YAAYuP,IAxCc,EAyC1BvP,YAAYoV,aAzCc,EA0C1BpV,YAAYqV,oBA1Cc,EA2C1BrV,YAAY+V,iBA3Cc,EA4C1B/V,YAAY6V,uBA5Cc,EA6C1B7V,YAAY8V,sBA7Cc,EA8C1B9V,YAAY6U,SA9Cc,EA+C1B7U,YAAY8U,gBA/Cc,EAgD1B9U,YAAYsS,eAhDc,CAA5B;;AAmDA;;;;AAIAhL,SAASoc,mBAAT,IAAgC,CAAClc,KAAD,EAAQ7L,MAAR,KAAmB;AACjD,SAAO6L,MAAMkG,GAAN,CAAU,UAAUjW,IAAV,EAAgB;AAC/B;AACA,QAAIA,KAAK2iB,EAAL,KAAYze,OAAOmF,OAAP,CAAesZ,EAA/B,EAAmC;AACjC;AACA,UAAIuJ,cAAcF,YAAYhsB,IAAZ,EAAkBkE,MAAlB,CAAlB;;AAEA;AACA;AACAgoB,oBAAc,8BAAkBA,WAAlB,EAA+BhoB,MAA/B,CAAd;AACA,aAAOgoB,WAAP;AACD,KARD,MAQO;AACL,aAAOlsB,IAAP;AACD;AACF,GAbM,CAAP;AAcD,CAfD;;AAiBA;;;;AAIA,MAAM2P,UAAU,iCAAcE,QAAd,EAAwB,EAAxB,CAAhB;kBACeF,O;;;;;;;;;;;;;;kBC3nBA,UAAUI,QAAQ,EAAlB,EAAsB7L,MAAtB,EAA8B;AAC3C,SAAO;AACLioB,WAAO,oBAAMpc,MAAMoc,KAAZ,EAAmBjoB,MAAnB,CADF;AAELkoB,UAAM,oBAAKrc,MAAMqc,IAAX,EAAiBloB,MAAjB;AAFD,GAAP;AAID,C;;AAXD;;;;AACA;;;;;;;;;;;;;;;;;;;;;;ACAA;;IAAYqE,W;;AAGZ;;;;;;AAJA;AAMA,MAAMsH,WAAW,EAAjB;;AAEA;;;AALA;AAMAA,SAAStH,YAAYiW,YAArB,IAAqC;AACnC1O,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL;AAEEwT,eAASrf,OAAOmF,OAAP,CAAeka,OAAf,IAA0BxT,MAAMwT,OAF3C;AAGEna,8CACK2G,MAAM3G,WADX,EAEKlF,OAAOmF,OAAP,CAAeD,WAFpB;AAHF;AAQD;AAVkC,CAArC;;AAaA;;;AAGA,MAAMuG,UAAU,iCAAcE,QAAd,EAAwB,EAAxB,CAAhB;kBACeF,O;;;;;;;;;;;;;;;;;;QCeC0c,Q,GAAAA,Q;QAWAC,c,GAAAA,c;QAaAhT,W,GAAAA,W;QAWAiT,uB,GAAAA,uB;QAWAC,wB,GAAAA,wB;QAUAC,U,GAAAA,U;QAOAC,W,GAAAA,W;;AAvGhB;;AAGA;;;;AAEA;;;;;AAKA;;;;;;;AAXA;AAkBA,SAASC,eAAT,CAA0B5c,KAA1B,EAAiC6b,SAAjC,EAA4C;AAC1C,QAAMhS,UAAU,+BAAe7J,KAAf,EAAsB6b,UAAUlS,eAAhC,CAAhB;AACA,MAAIE,OAAJ,EAAa;AACX,sCACKgS,SADL;AAEEgB,mBAAahT,QAAQgT,WAFvB;AAGEC,oBAAcjT,QAAQiT;AAHxB;AAKD,GAND,MAMO;AACL,sCACKjB,SADL;AAEEgB,mBAAa,EAFf;AAGEC,oBAAc;AAHhB;AAKD;AACF;;AAED;;;;;;;;AAhCA;AAsCO,SAASR,QAAT,CAAmBtc,KAAnB,EAA0B;AAC/B;AACA,SAAOA,MAAM/P,IAAN,CAAWmsB,KAAX,CAAiBlW,GAAjB,CAAqB2V,aAAae,gBAAgB5c,KAAhB,EAAuB6b,SAAvB,CAAlC,CAAP;AACD;;AAED;;;;;;AAMO,SAASU,cAAT,CAAyBvc,KAAzB,EAAgC;AACrC,QAAM+c,cAAc,CAACrW,uBAAYQ,KAAb,EAAoBR,uBAAYK,SAAhC,CAApB;;AAEA,SAAOuV,SAAStc,KAAT,EAAgBhO,MAAhB,CAAuB/B,QAAQ,CAAC8sB,YAAY7iB,QAAZ,CAAqBjK,KAAK+P,KAA1B,CAAhC,CAAP;AACD;;AAED;;;;;;;AAOO,SAASuJ,WAAT,CAAsBvJ,KAAtB,EAA6BqJ,MAA7B,EAAqC;AAC1C,SAAOiT,SAAStc,KAAT,EAAgBgd,IAAhB,CAAqB/sB,QAAQA,KAAK2iB,EAAL,KAAYvJ,MAAzC,CAAP;AACD;;AAED;;;;;;;AAOO,SAASmT,uBAAT,CAAkCxc,KAAlC,EAAyCwb,cAAzC,EAAyD;AAC9D,SAAOc,SAAStc,KAAT,EAAgBgd,IAAhB,CAAqB/sB,QAAQA,KAAKurB,cAAL,KAAwBA,cAArD,CAAP;AACD;;AAED;;;;;;;AAOO,SAASiB,wBAAT,CAAmCzc,KAAnC,EAA0C2J,eAA1C,EAA2D;AAChE,SAAO2S,SAAStc,KAAT,EAAgBgd,IAAhB,CAAqB/sB,QAAQA,KAAK0Z,eAAL,KAAyBA,eAAtD,CAAP;AACD;;AAED;;;;;;AAMO,SAAS+S,UAAT,CAAqB1c,KAArB,EAA4B;AACjC,SAAOA,MAAM9G,MAAN,CAAajJ,IAApB;AACD;;AAED;;;AAGO,SAAS0sB,WAAT,CAAsB3c,KAAtB,EAA6B;AAClC,SAAOA,MAAM/P,IAAN,CAAWosB,IAAlB;AACD,C;;;;;;;;;;;;;;;;;;QC1FeY,gB,GAAAA,gB;QAkFAC,iB,GAAAA,iB;;AAjGhB;;AAGA;;;;AAEA;;;;;;;;;;AANA;AAgBO,SAASD,gBAAT,CAA2BE,UAA3B,EAAuC;AAC5C;AACA,MAAI,OAAOA,UAAP,KAAsB,QAAtB,IAAkC,CAACA,WAAWjjB,QAAX,CAAoB,QAApB,CAAvC,EAAsE;AACpE,UAAM,IAAIkjB,KAAJ,CAAU,iDAAV,CAAN;AACD;;AAED;AACA,QAAMC,SAASF,WAAWG,KAAX,CAAiB,cAAjB,EAAiC,CAAjC,CAAf;;AAEA;;;;;;;;;;AAUA,QAAMC,SAAS,EAAf;AACA,QAAMC,QAAQH,OAAOjc,KAAP,CAAa,GAAb,CAAd;;AAEA;;;AAGA,QAAMqc,gBAAgB,CAAC,QAAD,EAAW,SAAX,CAAtB;AACA,QAAMC,WAAW,EAAjB;;AAEA;AACA,SAAOD,cAAcvjB,QAAd,CAAuBsjB,MAAM,CAAN,CAAvB,CAAP,EAAyC;AACvC;AACAE,aAASntB,IAAT,CAAcitB,MAAMG,KAAN,EAAd;AACD;;AAED;AACA;AACAJ,SAAOvE,OAAP,GAAiB,CAAC0E,SAASxjB,QAAT,CAAkB,QAAlB,CAAlB;;AAEA;AACA;AACA,MAAIwjB,SAASxjB,QAAT,CAAkB,SAAlB,CAAJ,EAAkC;AAChCqjB,WAAO5E,UAAP,GAAoBvB,0BAAeE,MAAnC;AACA;;;;;;AAMA,WAAOiG,MAAP;AACD;;AAED;;;AAGA,QAAMK,gBAAgB,CAAC,QAAD,CAAtB;AACA,QAAMC,WAAW,EAAjB;;AAEA;AACA,SAAOD,cAAc1jB,QAAd,CAAuBsjB,MAAMA,MAAMztB,MAAN,GAAe,CAArB,CAAvB,CAAP,EAAwD;AACtD;AACA8tB,aAASttB,IAAT,CAAcitB,MAAMM,GAAN,EAAd;AACD;;AAED;AACA;AACA;AACAP,SAAO5E,UAAP,GAAoBkF,SAAS3jB,QAAT,CAAkB,QAAlB,IAA8Bkd,0BAAeG,MAA7C,GAAsDH,0BAAeC,KAAzF;;AAEA;;;AAGAkG,SAAOpE,SAAP,GAAmB5R,sBAAWiW,MAAM3qB,IAAN,CAAW,GAAX,CAAX,CAAnB;AACA,SAAO0qB,MAAP;AACD;;AAED;;;;;;;;;AAxFA;AA+FO,SAASL,iBAAT,CAA4Bld,KAA5B,EAAmC7L,MAAnC,EAA2C;AAChD,MAAIuJ,IAAJ;AACA,MAAI;AACFA,WAAOuf,iBAAiB9oB,OAAOX,IAAxB,CAAP;AACD,GAFD,CAEE,OAAOuqB,GAAP,EAAY;AACZ;AACA,WAAO/d,KAAP;AACD;AACD,QAAMge,SAAStgB,KAAKyb,SAApB;;AAEA;AACA;AACA,MAAI,CAAC6E,MAAD,IAAWtgB,KAAKib,UAAL,KAAoBvB,0BAAeE,MAAlD,EAA0D;AACxD,WAAOtX,KAAP;AACD;;AAED;AACA,QAAMie,YAAYvgB,KAAKsb,OAAL,GAAe,SAAf,GAA2B,UAA7C;AACA,QAAMkF,UAAUle,MAAMie,SAAN,CAAhB;;AAEA,MAAIvgB,KAAKib,UAAL,KAAoBvB,0BAAeC,KAAvC,EAA8C;AAC5C;;AAEA,QAAI6G,OAAJ,EAAa;AACX;AACA;AACA,aAAOle,KAAP;AACD,KAJD,MAIO;AACL;AACA;AACA,wCACKA,KADL;AAEE,SAACie,SAAD,GAAa;AACX9E,qBAAW6E,MADA;AAEXvc,kBAAQwV,qBAAUC;AAFP;AAFf;AAOD;AACF,GAlBD,MAkBO,IAAIxZ,KAAKib,UAAL,KAAoBvB,0BAAeE,MAAvC,EAA+C;AACpD,sCACKtX,KADL;AAEE,OAACie,SAAD,8BACKje,MAAMie,SAAN,CADL;AAEExc,gBAAQwV,qBAAUE,OAFpB;AAGEgH,uBAAehqB,OAAOmF,OAAP,CAAe6kB;AAHhC;AAFF;AAQD,GATM,MASA;AACL,UAAMC,WAAW,CAAC1gB,KAAKsb,OAAvB;AACA,UAAMqF,4CACDre,KADC;AAEJ,OAACie,SAAD,GAAahe;AAFT,MAAN;;AAKA,UAAMqe,YAAY,kBAAS,WAAT,EAAsBJ,OAAtB,CAAlB;AACA,QAAI,eAAMI,SAAN,CAAJ,EAAsB;AACpB;AACA,aAAOte,KAAP;AACD;;AAED;AACA,QAAIse,cAAcN,MAAlB,EAA0B;AACxB;AACA;AACA,aAAOK,cAAP;AACD,KAJD,MAIO,IAAID,YAAYE,cAAc/W,sBAAWsP,UAAzC,EAAqD;AAC1D;AACA;AACA,aAAOwH,cAAP;AACD,KAJM,MAIA,IAAI,kBAASC,SAAT,EAAoB9G,wBAApB,CAAJ,EAAwC;AAC7C;AACA;AACA,aAAO6G,cAAP;AACD,KAJM,MAIA;AACL;AACA;AACA,aAAOre,KAAP;AACD;AACF;AACF,C;;;;;;;;;;;;;kBC7EuBue,S;;AAnGxB;;;;AACA;;IAAYnmB,K;;AACZ;;;;AAGA;;AACA;;AACA;;AAGA;;AAGA;;AACA;;AACA;;AAGA;;;;;;AANA;;;AARA;AAgBA,MAAMpF,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,CAAZ;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;;;;;;;;;;AApCA;;;AARA;AAVA;AA8DA,MAAMzB,iBAAiB;AACrBqjB,gBAAc,QADO;AAErBiE,cAAY,EAFS;AAGrBC,sBAAoB,IAHC;AAIrBC,iBAAe,IAJM;AAKrB;AACA;AACAC,yBAAuB,IAPF;AAQrBjJ,eAAa,EARQ;AASrBC,oBAAkB,IATG;AAUrBiJ,cAAY,KAVS;AAWrBC,mBAAiB,KAXI;AAYrBC,mBAAiB,KAZI;AAarBC,kBAAgB,KAbK;AAcrBC,kBAAgB,MAdK;AAerB5K,wBAAsB;;AAGxB;AAlBuB,CAAvB,CAmBA,MAAM1c,gBAAgBC,uBAAIC,MAAJ,CAAW;AAC/B2iB,gBAAc,uBAAM,CAAC,cAAD,EAAiB,QAAjB,CAAN,CADiB;AAE/BiE,cAAY7mB,uBAAII,KAAJ,EAFmB;AAG/B0mB,sBAAoB9mB,uBAAIG,QAAJ,EAHW;AAI/B4mB,iBAAe/mB,uBAAIG,QAAJ,EAJgB;AAK/B;AACA;AACA6mB,yBAAuBhnB,uBAAIsnB,OAAJ,EAPQ;AAQ/BvJ,eAAa/d,uBAAII,KAAJ,EARkB;AAS/B4d,oBAAkBhe,uBAAIsnB,OAAJ,EATa;AAU/BL,cAAYjnB,uBAAIsnB,OAAJ,EAVmB;AAW/BJ,mBAAiBlnB,uBAAIsnB,OAAJ,EAXc;AAY/BH,mBAAiBnnB,uBAAIsnB,OAAJ,EAZc;AAa/BF,kBAAgBpnB,uBAAIsnB,OAAJ,EAbe;AAc/BD,kBAAgBrnB,uBAAIE,MAAJ,EAde;AAe/Buc,wBAAsBzc,uBAAIsnB,OAAJ;AAfS,CAAX,CAAtB;AAiBA,MAAMhnB,eAAe,uBAAM,MAAN,EAAcP,aAAd,CAArB;;AAEe,SAAS6mB,SAAT,CAAoBrmB,UAAU,EAA9B,EAAkC;AAC/C,QAAM,EAAEgnB,YAAF,EAAgBC,cAAhB,KAAmC,gDAAzC;AACA,MAAI,CAACD,YAAD,IAAiB,CAACC,cAAtB,EAAsC;AACpCnsB,QAAIosB,IAAJ,CAAS,0GAAT;AACA;AACD;;AAED;AACA,MAAIlnB,QAAQmnB,SAAR,IAAqB,CAACnnB,QAAQsmB,UAAlC,EAA8C;AAC5CxrB,QAAIosB,IAAJ,CAAS,gGAAT;AACAlnB,YAAQsmB,UAAR,GAAqBtmB,QAAQmnB,SAA7B;AACA,WAAOnnB,QAAQmnB,SAAf;AACD;;AAEDnnB,YAAU,wBAAYhB,cAAZ,EAA4BgB,OAA5B,CAAV;AACAD,eAAaC,OAAb;;AAEA,YAAWuK,IAAX,CAAiB,EAAE2G,MAAF,EAAjB,EAA6B;AAC3B;AACA,UAAMkW,UAAUpnB,QAAQqiB,YAAR,KAAyB,QAAzC;AACA,UAAMgF,cAAcnW,OAAOoW,iBAAP,GAA2BC,OAA3B,KAAuC,QAA3D;AACA,QAAIH,WAAWC,WAAf,EAA4B;AAC1BvsB,UAAIosB,IAAJ,CAAS,0EAAT;AACAlnB,cAAQqiB,YAAR,GAAuB,cAAvB;AACD;;AAED,UAAM,kBAAI,sBAAariB,OAAb,EAAsBwnB,uBAAgB7f,IAAtC,CAAJ,CAAN;AACA,UAAM,kBAAI,wBAAUga,gBAAV,CAAJ,CAAN;;AAEA;AACA,UAAM8F,oBAAoB;AACxBhK,wBAAkBzd,QAAQyd;AADF,KAA1B;AAGA,UAAM,kBAAI,8BAAezd,QAAQwd,WAAvB,EAAoCiK,iBAApC,CAAJ,CAAN;;AAEA;AACA,UAAMC,OAAO;AACXxW,cAAQA,OAAOyW,QADJ;AAEXC,sBAAgB1W,OAAOoW;;AAGzB;AALa,KAAb,CAMA,MAAMO,eAAe,gBAAO3nB,KAAP,EAAc8N,GAAd,CAAkB8Z,QAAQ;AAC7C,aAAO,wBAAY,MAAMA,KAAKJ,IAAL,CAAlB,CAAP;AACD,KAFoB,CAArB;;AAIA;AACA,SAAK,MAAMI,IAAX,IAAmBD,YAAnB,EAAiC;AAC/B,YAAM,mBAAKC,IAAL,CAAN;AACD;AACF;;AAED,SAAO;AACLngB,UAAM6f,uBAAgB7f,IADjB;AAELf,SAAK4gB,uBAAgB5gB,GAFhB;AAGLc,aAAS8f,uBAAgB9f,OAHpB;AAIL6C,QAJK;AAKLwd,kBAAc,CAAC,MAAD,EAAS,WAAT,EAAsB,cAAtB,EAAsC,WAAtC;AALT,GAAP;AAOD,C;;;;;;;;;;;;;;;;;;;;;;QCpHiBC,a,GAAAA,a;QA6GAC,iB,GAAAA,iB;QA2CAC,sB,GAAAA,sB;QAmCAC,U,GAAAA,U;QAwCAC,a,GAAAA,a;QAqDAC,a,GAAAA,a;QAgDAC,c,GAAAA,c;QAkDAC,4B,GAAAA,4B;QA8CAC,qB,GAAAA,qB;QAgDAC,Y,GAAAA,Y;QAqDAC,a,GAAAA,a;QAiDAC,U,GAAAA,U;QAyCAC,S,GAAAA,S;QAoDAC,qB,GAAAA,qB;QA8BAC,e,GAAAA,e;;AAluBlB;;AACA;;AAGA;;AACA;;AAGA;;;;AACA;;;;AACA;;AACA;;AAGA;;;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;AAyBO,UAAWd,aAAX,CAA0Be,QAA1B,EAAoC;AACzC,QAAMjuB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6BsoB,SAASrO,EAAtC,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,uCAAT;;AAEA;AACA,QAAMiI,cAAc,MAAM,sBAAOZ,0BAAP,EAAuBlH,qBAAUC,IAAjC,CAA1B;AACA,QAAMgZ,cAAc,MAAM,sBAAO0J,qBAAP,CAA1B;;AAEA;AACA;AACA;AACA;AACA,MAAI7a,YAAYhH,QAAhB,EAA0B;AACxB,UAAMsG,SAAS,MAAM,sBAAON,qBAAP,CAArB;AACA;AACAogB,aAASC,WAAT,GAAuB,oCAAgBrf,YAAYhH,QAA5B,EAAsCsG,MAAtC,CAAvB;AACAnO,QAAI+L,KAAJ,CAAU,gCAAV,EAA4CkiB,SAASC,WAArD;AACD;;AAED;AACA;AACA;AACA,MAAID,SAAShG,WAAb,EAA0B;AACxBgG,aAASC,WAAT,GAAwB,GAAED,SAAShG,WAAY,IAAGgG,SAASC,WAAY,GAAvE;AACAD,aAASrN,IAAT,GAAiB,GAAEqN,SAAShG,WAAY,IAAGgG,SAASrN,IAAK,GAAzD;AACD;;AAED,QAAM1b,UAAU;AACd4M,YAAQ;AADM,GAAhB;AAGA,QAAMqc,cAAc;AAClB3tB,UAAM,WADY;AAElB2nB,QAAI8F,SAAS5M,kBAFK;AAGlB+M,SAAKH,SAASI,KAHI;AAIlBjc,eAAW,EAJO;AAKlB6N,sBAAkBgO,SAAShO;AALT,GAApB;;AAQA,MAAID,YAAY4L,UAAhB,EAA4B;AAC1BuC,gBAAY/b,SAAZ,CAAsB7U,IAAtB,CAA2B,YAA3B;AACD;;AAED;;;;;AAKA,MAAI4wB,YAAY/b,SAAZ,CAAsBrV,MAAtB,KAAiC,CAArC,EAAwC;AACtC,WAAOoxB,YAAY/b,SAAnB;AACD;;AAED,MAAI6b,SAAStnB,WAAb,EAA0B;AACxB,UAAM2nB,uBAAuB,MAAM,oBAAKC,qBAAL,CAAnC;AACA,QAAID,qBAAqBjtB,KAAzB,EAAgC;AAC9B,aAAO,EAAEA,OAAOitB,qBAAqBjtB,KAA9B,EAAP;AACD;AACD6D,YAAQ6M,IAAR,GAAe,yBAAe;AAC5Byc,gDACKL,WADL;AAEEvN,cAAMqN,SAASrN,IAFjB;AAGE6N,yBAAiBH,qBAAqBI;AAHxC;AAD4B,KAAf,CAAf;AAOD,GAZD,MAYO;AACLxpB,YAAQ6M,IAAR,GAAe,yBAAe;AAC5B4c,qDACKR,WADL;AAEEvN,cAAMqN,SAASC;AAFjB;AAD4B,KAAf,CAAf;AAMD;;AAED,QAAMrnB,WAAW,MAAM,oBAAKmnB,eAAL,EAAsBnf,WAAtB,6BAAwC3J,OAAxC,EAAoD+oB,QAApD,EAAvB;AACA,QAAMW,mBAAmBX,SAAStnB,WAAT,GAAuB,gBAAvB,GAA0C,qBAAnE;AACA,MAAIE,SAASxF,KAAb,EAAoB;AAClBrB,QAAI+L,KAAJ,CAAU,4CAAV,EAAwDlF,SAASxF,KAAjE;AACA,WAAO;AACLA,aAAOwF,SAASxF;AADX,KAAP;AAGD,GALD,MAKO;AACL,UAAMmnB,iBAAiB3hB,SAAS+nB,gBAAT,EAA2BC,WAAlD;AACA7uB,QAAI+L,KAAJ,CAAU,mCAAV,EAA+C,EAAEyc,cAAF,EAA/C;;AAEA,WAAO;AACLnnB,aAAO,KADF;AAELmnB;AAFK,KAAP;AAID;AACF;;AAED;;;;;;;;;;;;;;;;;;;;;AAtHA;;;AANA;;;AAJA;AALA;AACA;AAuJO,UAAW2E,iBAAX,CAA8Bc,QAA9B,EAAwC;AAC7C,QAAMjuB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6BsoB,SAASrO,EAAtC,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,kDAAT;;AAEA;AACA,QAAMiI,cAAc,MAAM,sBAAOZ,0BAAP,EAAuBlH,qBAAUC,IAAjC,CAA1B;;AAEA,QAAM9B,UAAU;AACd4M,YAAQ;AADM,GAAhB;;AAIA5M,UAAQ6M,IAAR,GAAe,yBAAe;AAC5B4c,wBAAoB;AAClBnuB,YAAM;AADY;AADQ,GAAf,CAAf;;AAMA,QAAMqG,WAAW,MAAM,oBAAKmnB,eAAL,EAAsBnf,WAAtB,6BAAwC3J,OAAxC,EAAoD+oB,QAApD,EAAvB;;AAEA,MAAIpnB,SAASxF,KAAb,EAAoB;AAClBrB,QAAI+L,KAAJ,CAAU,uDAAV,EAAmElF,SAASxF,KAA5E;AACA,WAAO;AACLA,aAAOwF,SAASxF;AADX,KAAP;AAGD,GALD,MAKO;AACLrB,QAAI+L,KAAJ,CAAU,8CAAV,EAA0D;AACxDyc,sBAAgByF,SAASzF;AAD+B,KAA1D;AAGA,WAAO;AACLnnB,aAAO;AADF,KAAP;AAGD;AACF;;AAED;;;;;;;;;AASO,UAAW+rB,sBAAX,CAAmCa,QAAnC,EAA6C;AAClD;AACA,QAAMpf,cAAc,MAAM,sBAAOZ,0BAAP,EAAuBlH,qBAAUC,IAAjC,CAA1B;;AAEA,QAAM9B,UAAU;AACd4M,YAAQ;AADM,GAAhB;;AAIA,QAAMgd,WAAWb,SAAStnB,WAAT,GAAuB,eAAvB,GAAyC,oBAA1D;;AAEAzB,UAAQ6M,IAAR,GAAe,yBAAe;AAC5B,KAAC+c,QAAD,GAAY;AACVtuB,YAAM,mBADI;AAEVyf,wBAAkBgO,SAAShO;AAFjB;AADgB,GAAf,CAAf;;AAOA,QAAMpZ,WAAW,MAAM,oBAAKmnB,eAAL,EAAsBnf,WAAtB,6BAAwC3J,OAAxC,EAAoD+oB,QAApD,EAAvB;;AAEA,SAAO;AACL5sB,WAAOwF,SAASxF,KAAT,GAAiBwF,SAASxF,KAA1B,GAAkC;AADpC,GAAP;AAGD;;AAED;;;;;;;;;;;AAWO,UAAWgsB,UAAX,CAAuBY,QAAvB,EAAiC;AACtC,QAAMpf,cAAc,MAAM,sBAAOZ,0BAAP,EAAuBlH,qBAAUC,IAAjC,CAA1B;;AAEA,QAAM9B,UAAU;AACd4M,YAAQ,QADM;AAEdid,kBAAc;AAFA,GAAhB;;AAKA,QAAMloB,WAAW,MAAM,oBAAKmnB,eAAL,EAAsBnf,WAAtB,6BAAwC3J,OAAxC,EAAoD+oB,QAApD,EAAvB;;AAEA,MAAIpnB,SAASxF,KAAb,EAAoB;AAClB,WAAO;AACLA,aAAOwF,SAASxF;AADX,KAAP;AAGD,GAJD,MAIO;AACL,WAAO;AACLA,aAAO;AADF,KAAP;AAGD;AACF;;AAED;;;;;;;;;;;;;;;;;;;AAmBO,UAAWisB,aAAX,CAA0BW,QAA1B,EAAoC;AACzC,QAAMjuB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6BsoB,SAASrO,EAAtC,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,wCAAT;;AAEA;AACA,QAAMiI,cAAc,MAAM,sBAAOZ,0BAAP,EAAuBlH,qBAAUC,IAAjC,CAA1B;;AAEA,QAAM9B,UAAU;AACd4M,YAAQ;AADM,GAAhB;;AAIA5M,UAAQ6M,IAAR,GAAe,yBAAe;AAC5B4c,wBAAoB;AAClBnuB,YAAM,YADY;AAElB4tB,WAAKH,SAAS1M,MAFI;AAGlBtB,wBAAkBgO,SAAShO;AAHT;AADQ,GAAf,CAAf;;AAQA,QAAMpZ,WAAW,MAAM,oBAAKmnB,eAAL,EAAsBnf,WAAtB,6BAAwC3J,OAAxC,EAAoD+oB,QAApD,EAAvB;;AAEA,MAAIpnB,SAASxF,KAAb,EAAoB;AAClBrB,QAAI+L,KAAJ,CAAU,4CAAV,EAAwDlF,SAASxF,KAAjE;AACA,WAAO;AACLA,aAAOwF,SAASxF;AADX,KAAP;AAGD,GALD,MAKO;AACLrB,QAAI+L,KAAJ,CAAU,oCAAV,EAAgD,EAAEyc,gBAAgByF,SAASzF,cAA3B,EAAhD;AACA,WAAO;AACLnnB,aAAO;AADF,KAAP;AAGD;AACF;;AAED;;;;;;;;;;;;;;;;;;;AAmBO,UAAWksB,aAAX,CAA0BU,QAA1B,EAAoC;AACzC,QAAMpf,cAAc,MAAM,sBAAOZ,0BAAP,EAAuBlH,qBAAUC,IAAjC,CAA1B;;AAEA,QAAM9B,UAAU;AACd4M,YAAQ;AADM,GAAhB;;AAIA5M,UAAQ8pB,MAAR,GAAiB,iBAAjB;;AAEA9pB,UAAQ6M,IAAR,GAAe,yBAAe;AAC5Bkd,4BAAwB;AACtB9tB,cAAQ,QADc;AAEtB0tB,mBAAaZ,SAASzF;AAFA;AADI,GAAf,CAAf;;AAOA,QAAM3hB,WAAW,MAAM,oBAAKmnB,eAAL,EAAsBnf,WAAtB,EAAmC3J,OAAnC,CAAvB;;AAEA,MAAI2B,SAASxF,KAAb,EAAoB;AAClB,WAAO;AACLA,aAAOwF,SAASxF;AADX,KAAP;AAGD,GAJD,MAIO;AACL,WAAO;AACLA,aAAO;AADF,KAAP;AAGD;AACF;;AAED;;;;;;;;;;;;;;;;;;;AAmBO,UAAWmsB,cAAX,CAA2BS,QAA3B,EAAqC;AAC1C,QAAMpf,cAAc,MAAM,sBAAOZ,0BAAP,EAAuBlH,qBAAUC,IAAjC,CAA1B;;AAEA,QAAM9B,UAAU;AACd4M,YAAQ;AADM,GAAhB;;AAIA5M,UAAQ8pB,MAAR,GAAiB,iBAAjB;;AAEA9pB,UAAQ6M,IAAR,GAAe,yBAAe;AAC5Bkd,4BAAwB;AACtB9tB,cAAQ,SADc;AAEtB0tB,mBAAaZ,SAASzF,cAFA;AAGtB0G,eAASjB,SAASiB;AAHI;AADI,GAAf,CAAf;;AAQA,QAAMroB,WAAW,MAAM,oBAAKmnB,eAAL,EAAsBnf,WAAtB,EAAmC3J,OAAnC,CAAvB;;AAEA,MAAI2B,SAASxF,KAAb,EAAoB;AAClB,WAAO;AACLA,aAAOwF,SAASxF;AADX,KAAP;AAGD,GAJD,MAIO;AACL,WAAO;AACLA,aAAO;AADF,KAAP;AAGD;AACF;;AAED;;;;;;;;;;;;;;;;;;;;AAoBO,UAAWosB,4BAAX,CAAyCQ,QAAzC,EAAmD;AACxD,QAAMpf,cAAc,MAAM,sBAAOZ,0BAAP,EAAuBlH,qBAAUC,IAAjC,CAA1B;;AAEA,QAAM9B,UAAU;AACd4M,YAAQ;AADM,GAAhB;;AAIA5M,UAAQ6M,IAAR,GAAe,yBAAe;AAC5B4c,wBAAoB;AAClBnuB,YAAM,UADY;AAElBquB,mBAAaZ,SAASkB,mBAFJ;AAGlBD,eAASjB,SAAStN;AAHA;AADQ,GAAf,CAAf;;AAQA,QAAM9Z,WAAW,MAAM,oBAAKmnB,eAAL,EAAsBnf,WAAtB,6BAAwC3J,OAAxC,EAAoD+oB,QAApD,EAAvB;;AAEA,MAAIpnB,SAASxF,KAAb,EAAoB;AAClB,WAAO;AACLA,aAAOwF,SAASxF;AADX,KAAP;AAGD,GAJD,MAIO;AACL,WAAO;AACLA,aAAO;AADF,KAAP;AAGD;AACF;;AAED;;;;;;;;;;;;;;;;;;AAkBO,UAAWqsB,qBAAX,CAAkCO,QAAlC,EAA4C;AACjD,QAAMpf,cAAc,MAAM,sBAAOZ,0BAAP,EAAuBlH,qBAAUC,IAAjC,CAA1B;;AAEA,QAAM9B,UAAU;AACd4M,YAAQ;AADM,GAAhB;;AAIA5M,UAAQ6M,IAAR,GAAe,yBAAe;AAC5B4c,wBAAoB;AAClBnuB,YAAM,UADY;AAElB0uB,eAASjB,SAASiB;AAFA;AADQ,GAAf,CAAf;;AAOA,QAAMroB,WAAW,MAAM,oBAAKmnB,eAAL,EAAsBnf,WAAtB,6BAAwC3J,OAAxC,EAAoD+oB,QAApD,EAAvB;;AAEA,MAAIpnB,SAASxF,KAAb,EAAoB;AAClB,WAAO;AACLA,aAAOwF,SAASxF;AADX,KAAP;AAGD,GAJD,MAIO;AACL,WAAO;AACLA,aAAO;AADF,KAAP;AAGD;AACF;;AAED;;;;;;;;;;;;;;;;;;;;;AAqBO,UAAWssB,YAAX,CAAyBM,QAAzB,EAAmC;AACxC,QAAMpf,cAAc,MAAM,sBAAOZ,0BAAP,EAAuBlH,qBAAUC,IAAjC,CAA1B;;AAEA,QAAM9B,UAAU;AACd4M,YAAQ;AADM,GAAhB;;AAIA5M,UAAQ6M,IAAR,GAAe,yBAAe;AAC5B4c,wBAAoB;AAClBnuB,YAAM,MADY;AAElB4uB,wBAAkBnB,SAASzF,cAFT;AAGlB6G,yBAAmBpB,SAASkB,mBAHV;AAIlBf,WAAKH,SAASG,GAJI;AAKlBnO,wBAAkBgO,SAAShO;AALT;AADQ,GAAf,CAAf;;AAUA,QAAMpZ,WAAW,MAAM,oBAAKmnB,eAAL,EAAsBnf,WAAtB,EAAmC3J,OAAnC,CAAvB;;AAEA,MAAI2B,SAASxF,KAAb,EAAoB;AAClB,WAAO;AACLA,aAAOwF,SAASxF;AADX,KAAP;AAGD,GAJD,MAIO;AACL,WAAO;AACLA,aAAO,KADF;AAELiuB,yBAAmBzoB,SAAS0oB,mBAAT,CAA6BV;AAF3C,KAAP;AAID;AACF;;AAED;;;;;;;;;;;;;;;;;;;;;;AAsBO,UAAWjB,aAAX,CAA0BK,QAA1B,EAAoC;AACzC;AACA,QAAMpf,cAAc,MAAM,sBAAOZ,0BAAP,EAAuBlH,qBAAUC,IAAjC,CAA1B;;AAEA,QAAM9B,UAAU;AACd4M,YAAQ;AADM,GAAhB;AAGA,QAAMgd,WAAWb,SAAStnB,WAAT,GAAuB,eAAvB,GAAyC,oBAA1D;;AAEAzB,UAAQ6M,IAAR,GAAe,yBAAe;AAC5B,KAAC+c,QAAD,GAAY;AACVtuB,YAAM,iBADI;AAEV4tB,WAAKH,SAASI,KAFJ;AAGVpO,wBAAkBgO,SAAShO;AAHjB;AADgB,GAAf,CAAf;;AAQA,QAAMpZ,WAAW,MAAM,oBAAKmnB,eAAL,EAAsBnf,WAAtB,6BAAwC3J,OAAxC,EAAoD+oB,QAApD,EAAvB;;AAEA,MAAIpnB,SAASxF,KAAb,EAAoB;AAClB,WAAO;AACLA,aAAOwF,SAASxF;AADX,KAAP;AAGD,GAJD,MAIO;AACL,WAAO;AACLA,aAAO;AADF,KAAP;AAGD;AACF;;AAED;;;;;;;;;;;;;;;;;;;AAmBO,UAAWwsB,UAAX,CAAuBI,QAAvB,EAAiC;AACtC;AACA,QAAMpf,cAAc,MAAM,sBAAOZ,0BAAP,EAAuBlH,qBAAUC,IAAjC,CAA1B;;AAEA,QAAM9B,UAAU,EAAE4M,QAAQ,KAAV,EAAhB;;AAEA,QAAMjL,WAAW,MAAM,oBAAKmnB,eAAL,EAAsBnf,WAAtB,6BAAwC3J,OAAxC,EAAoD+oB,QAApD,EAAvB;;AAEA,MAAIpnB,SAASxF,KAAb,EAAoB;AAClB,WAAO;AACLA,aAAOwF,SAASxF;AADX,KAAP;AAGD,GAJD,MAIO;AACL,WAAO;AACLA,aAAO,KADF;AAEL2L,aAAOnG,SAAS0oB,mBAAT,CAA6BviB;AAF/B,KAAP;AAID;AACF;;AAED;;;;;;;;;;;;;;;;;;;;;AAqBO,UAAW8gB,SAAX,CAAsBG,QAAtB,EAAgC;AACrC;AACA,QAAMpf,cAAc,MAAM,sBAAOZ,0BAAP,EAAuBlH,qBAAUC,IAAjC,CAA1B;;AAEA,QAAM9B,UAAU,EAAE4M,QAAQ,KAAV,EAAhB;AACA,QAAMgd,WAAWb,SAAStnB,WAAT,GAAuB,eAAvB,GAAyC,oBAA1D;;AAEAzB,UAAQ6M,IAAR,GAAe,yBAAe;AAC5B,KAAC+c,QAAD,GAAY;AACVtuB,YAAM;AADI;AADgB,GAAf,CAAf;;AAMA,QAAMqG,WAAW,MAAM,oBAAKmnB,eAAL,EAAsBnf,WAAtB,6BAAwC3J,OAAxC,EAAoD+oB,QAApD,EAAvB;;AAEA,MAAIpnB,SAASxF,KAAb,EAAoB;AAClB,WAAO;AACLA,aAAOwF,SAASxF,KADX;AAEL;AACA;AACA;AACAoN,cAAQ5H,SAASxF,KAAT,CAAe8F,IAAf,KAAwB,EAAxB,GAA6B,QAA7B,GAAwC;AAL3C,KAAP;AAOD,GARD,MAQO;AACL,WAAO;AACL9F,aAAO,KADF;AAELoN,cAAQ;AAFH,KAAP;AAID;AACF;;AAED;;;;;;;;;;;;;;;;;;;;;AAqBO,UAAWsf,qBAAX,CAAkCE,QAAlC,EAA4C;AACjD;AACA,QAAMpf,cAAc,MAAM,sBAAOZ,0BAAP,EAAuBlH,qBAAUC,IAAjC,CAA1B;;AAEA,QAAM9B,UAAU;AACd4M,YAAQ;AADM,GAAhB;AAGA,QAAMgd,WAAWb,SAAStnB,WAAT,IAAwBsnB,SAAS1F,OAAjC,GAA2C,eAA3C,GAA6D,oBAA9E;;AAEArjB,UAAQ6M,IAAR,GAAe,yBAAe;AAC5B,KAAC+c,QAAD,GAAY;AACVtuB,YAAM,mBADI;AAEV4tB,WAAKH,SAAS1M,MAFJ;AAGVtB,wBAAkBgO,SAAShO;AAHjB;AADgB,GAAf,CAAf;;AAQA,QAAMpZ,WAAW,MAAM,oBAAKmnB,eAAL,EAAsBnf,WAAtB,6BAAwC3J,OAAxC,EAAoD+oB,QAApD,EAAvB;;AAEA,MAAIpnB,SAASxF,KAAb,EAAoB;AAClB,WAAO;AACLA,aAAOwF,SAASxF;AADX,KAAP;AAGD,GAJD,MAIO;AACL,WAAO;AACLA,aAAO;AADF,KAAP;AAGD;AACF;;AAEM,UAAW2sB,eAAX,CAA4Bnf,WAA5B,EAAyC3J,OAAzC,EAAkD;AACvDA,UAAQqC,GAAR,GAAcioB,gBAAgB3gB,WAAhB,EAA6B3J,OAA7B,CAAd;;AAEA,QAAM2B,WAAW,MAAM,uBAAQ3B,OAAR,CAAvB;;AAEA,MAAI2B,SAASxF,KAAb,EAAoB;AAClB,WAAO;AACLA,aAAOouB,2BAA2B5oB,QAA3B;AADF,KAAP;AAGD,GAJD,MAIO;AACL,WAAOA,SAASP,OAAT,CAAiByL,IAAxB;AACD;AACF;;AAED,SAAS0d,0BAAT,CAAqC5oB,QAArC,EAA+C;AAC7C,WAAS6oB,UAAT,CAAqBvoB,IAArB,EAA2B;AACzB,YAAQA,IAAR;AACE,WAAK,CAAL;AACE,eAAO,iDAAP;AACF,WAAK,EAAL;AACE,eAAO,uCAAP;AACF,WAAK,IAAL;AACE,eAAO,6BAAP;AACF;AACE,eAAO,+BAAP;AARJ;AAUD;;AAED,MAAIlB,OAAJ,EAAakB,IAAb;;AAEA,MAAIN,YAAYA,SAASP,OAAzB,EAAkC;AAChC,QAAIO,SAASP,OAAT,CAAiByL,IAArB,EAA2B;AACzB,UAAI,yBAAyBlL,SAASP,OAAT,CAAiByL,IAA9C,EAAoD;AAClD;AACA,cAAM,EAAEwd,mBAAF,KAA0B1oB,SAASP,OAAT,CAAiByL,IAAjD;AACA9L,kBAAUypB,WAAWH,oBAAoBjd,UAA/B,CAAV;AACA;AACAnL,eAAOooB,oBAAoBjd,UAA3B;AACD,OAND,MAMO;AACL;AACArM,kBAAUY,SAASP,OAAT,CAAiByL,IAAjB,CAAsB9L,OAAhC;AACAkB,eAAON,SAASP,OAAT,CAAiBoM,MAAjB,CAAwBvL,IAA/B;AACD;AACF,KAZD,MAYO,IAAIN,SAASP,OAAT,CAAiBoM,MAArB,EAA6B;AAClCzM,gBAAW,mBAAkBY,SAASP,OAAT,CAAiBoM,MAAjB,CAAwBzM,OAAQ,EAA7D;AACAkB,aAAON,SAASP,OAAT,CAAiBoM,MAAjB,CAAwBvL,IAA/B;AACD;AACF,GAjBD,MAiBO;AACLlB,cAAU,gCAAV;AACD;;AAED,SAAO,IAAID,gBAAJ,CAAe,EAAEC,OAAF,EAAWkB,IAAX,EAAf,CAAP;AACD;;AAED;;;;;;;;;AASA,SAASqoB,eAAT,CAA0B3gB,WAA1B,EAAuC3J,OAAvC,EAAgD;AAC9C;AACA,QAAM,EAAE6J,OAAF,EAAWxK,OAAX,EAAoBsD,QAApB,KAAiCgH,WAAvC;AACA;AACA,QAAM,EAAElI,WAAF,EAAe4hB,OAAf,EAAwBC,cAAxB,EAAwCwG,MAAxC,KAAmD9pB,OAAzD;;AAEA,QAAMyqB,WAAWhpB,cAAc,WAAd,GAA4B,MAA7C;AACA,QAAMipB,SAASjpB,cAAc4hB,OAAd,GAAwB1gB,QAAvC;AACA,QAAMgoB,cAAclpB,cAAc,QAAd,GAAyB,aAA7C;;AAEA;AACA,MAAIY,MAAO,GAAEwH,OAAQ,iBAAgBxK,OAAQ,IAAGorB,QAAS,IAAGC,MAAO,EAAnE;;AAEA,MAAIZ,MAAJ,EAAY;AACVznB,WAAQ,IAAGynB,MAAO,EAAlB;AACD,GAFD,MAEO;AACLznB,WAAQ,IAAGsoB,WAAY,EAAvB;AACD;;AAED;AACA,MAAIrH,cAAJ,EAAoB;AAClBjhB,WAAQ,iBAAgBihB,cAAe,EAAvC;AACD;;AAED,SAAOjhB,GAAP;AACD,C;;;;;;;;;;;;;;;;;;QCtwBiBuoB,U,GAAAA,U;QAUAC,e,GAAAA,e;QAUAC,e,GAAAA,e;QAUAC,a,GAAAA,a;QAUAC,gB,GAAAA,gB;QAUAC,kB,GAAAA,kB;QAUAC,qB,GAAAA,qB;QAUAC,2B,GAAAA,2B;QAUAC,kB,GAAAA,kB;QAUAC,a,GAAAA,a;QAoBAC,wB,GAAAA,wB;QA4CAC,2B,GAAAA,2B;QAoCAC,sB,GAAAA,sB;QAmDAC,sB,GAAAA,sB;QAsEAC,kB,GAAAA,kB;QA+CAC,mB,GAAAA,mB;QAoDAC,Y,GAAAA,Y;QAUAC,e,GAAAA,e;QAaA7T,Q,GAAAA,Q;QAaAE,U,GAAAA,U;QAUAG,oB,GAAAA,oB;QAWAyT,S,GAAAA,S;QAkBAC,sB,GAAAA,sB;QAUAC,a,GAAAA,a;QAQAC,kB,GAAAA,kB;QAyBAC,gB,GAAAA,gB;QAUAC,yB,GAAAA,yB;QAUAC,mB,GAAAA,mB;QAUAC,S,GAAAA,S;QAUAC,iB,GAAAA,iB;QASAC,uB,GAAAA,uB;;AAjnBlB;;IAAYjsB,W;;AACZ;;IAAY8f,iB;;AACZ;;IAAYrV,uB;;AACZ;;IAAYyhB,Y;;AACZ;;IAAYC,Q;;AACZ;;AACA;;AACA;;AAGA;;AACA;;IAAYC,Y;;AACZ;;AAWA;;AACA;;AACA;;AAGA;;AAGA;;AACA;;AACA;;AACA;;;;;;AAJA;AAMA,MAAM5xB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,CAAZ;;AAEA;;;;AAIA;;;;;;;;AAfA;;;AAlBA;AAfA;;;;;AAKA;AAiDO,UAAWmqB,UAAX,CAAuBlD,IAAvB,EAA6B;AAClC,QAAM,wBAAUpnB,YAAYoS,SAAtB,EAAiCkE,mBAAjC,6BAAgD8Q,IAAhD,IAAsD+E,QAAtD,IAAN;AACD;;AAED;;;;;;AAMO,UAAW5B,eAAX,CAA4BnD,IAA5B,EAAkC;AACvC,QAAM,wBAAUpnB,YAAY+S,WAAtB,EAAmCkE,qBAAnC,6BAAoDmQ,IAApD,IAA0D+E,QAA1D,IAAN;AACD;;AAED;;;;;;AAMO,UAAW3B,eAAX,CAA4BpD,IAA5B,EAAkC;AACvC,QAAM,wBAAUpnB,YAAYiT,WAAtB,EAAmCkE,qBAAnC,6BAAoDiQ,IAApD,IAA0D+E,QAA1D,IAAN;AACD;;AAED;;;;;;AAMO,UAAW1B,aAAX,CAA0BrD,IAA1B,EAAgC;AACrC,QAAM,wBAAUpnB,YAAYmU,SAAtB,EAAiCiY,aAAalU,QAA9C,6BAA6DkP,IAA7D,IAAmE+E,QAAnE,IAAN;AACD;;AAED;;;;;;AAMO,UAAWzB,gBAAX,CAA6BtD,IAA7B,EAAmC;AACxC,QAAM,wBAAUpnB,YAAYsU,YAAtB,EAAoC8X,aAAa/T,WAAjD,6BAAmE+O,IAAnE,IAAyE+E,QAAzE,IAAN;AACD;;AAED;;;;;;AAMO,UAAWxB,kBAAX,CAA+BvD,IAA/B,EAAqC;AAC1C,QAAM,wBAAUpnB,YAAYqU,eAAtB,EAAuC+X,aAAahU,aAApD,6BAAwEgP,IAAxE,IAA8E+E,QAA9E,IAAN;AACD;;AAED;;;;;;AAMO,UAAWvB,qBAAX,CAAkCxD,IAAlC,EAAwC;AAC7C,QAAM,wBAAUpnB,YAAYwU,kBAAtB,EAA0C4X,aAAa7T,gBAAvD,6BAA8E6O,IAA9E,IAAoF+E,QAApF,IAAN;AACD;;AAED;;;;;;AAMO,UAAWtB,2BAAX,CAAwCzD,IAAxC,EAA8C;AACnD,QAAM,wBAAUtH,kBAAkBkC,mBAA5B,EAAiDoK,aAAaC,sBAA9D,6BAA2FjF,IAA3F,IAAiG+E,QAAjG,IAAN;AACD;;AAED;;;;;;AAMO,UAAWrB,kBAAX,CAA+B1D,IAA/B,EAAqC;AAC1C,QAAM,wBAAUpnB,YAAYyU,WAAtB,EAAmC2X,aAAa5T,WAAhD,6BAAkE4O,IAAlE,IAAwE+E,QAAxE,IAAN;AACD;;AAED;;;;;;AAMO,UAAWpB,aAAX,CAA0B3D,IAA1B,EAAgC;AACrC;;;;;;AAMA,QAAM,0BAAYpnB,YAAY2U,SAAxB,EAAmC2X,cAAnC,6BAAkDlF,IAAlD,EAAN;AACD;;AAED;;;;AAIA;;;;;;AAMO,UAAW4D,wBAAX,CAAqC5D,IAArC,EAA2C;AAChD;;;;;;AAMA,YAAWmF,gBAAX,CAA6B5wB,MAA7B,EAAqC;AACnC,UAAM8E,UAAU9E,OAAOmF,OAAP,CAAemL,mBAA/B;;AAEA,UAAMugB,qBAAqB/rB,QAAQgsB,sBAAR,IAAkC,EAA7D;;AAEA;AACA,UAAMpS,SAAS;AACb;AACAuO,WAAKnoB,QAAQisB,aAAR,CAAsB9D,GAFd;AAGb;AACA5F,sBAAgBviB,QAAQisB,aAAR,CAAsBrD,WAJzB;AAKb;AACAsD,kBAAYH,mBAAmBI,UANlB;AAObC,oBAAcL,mBAAmBM,mBAPpB;AAQb;AACAC,oBAAcP,mBAAmBQ,mBATpB;AAUb;AACAvS,wBAAkBha,QAAQga;;AAG5B;AAde,KAAf,CAeA,MAAM,mBAAKwS,2BAAL,6BAAwB7F,IAAxB,IAA8B+E,QAA9B,KAA0C9R,MAA1C,CAAN;AACD;;AAED;AACA,WAAS6S,mBAAT,CAA8BvxB,MAA9B,EAAsC;AACpC,WAAOA,OAAOX,IAAP,KAAgBgR,mCAAhB,IAAyCrQ,OAAOmF,OAAP,CAAemL,mBAAf,CAAmCC,SAAnC,KAAiD,MAAjG;AACD;AACD,QAAM,wBAAUghB,mBAAV,EAA+BX,gBAA/B,CAAN;AACD;;AAED;;;;;;AAMO,UAAWtB,2BAAX,CAAwC7D,IAAxC,EAA8C;AACnD,WAAS+F,eAAT,CAA0BxxB,MAA1B,EAAkC;AAChC,WAAOA,OAAOX,IAAP,KAAgBgR,mCAAhB,IAAyCrQ,OAAOmF,OAAP,CAAemL,mBAAf,CAAmCC,SAAnC,KAAiD,iBAAjG;AACD;;AAED;;;;;AAKA,YAAWkhB,oBAAX,CAAiCzxB,MAAjC,EAAyC;AACvC,UAAM8E,UAAU9E,OAAOmF,OAAP,CAAemL,mBAA/B;;AAEA,UAAMugB,qBAAqB/rB,QAAQgsB,sBAAR,IAAkC,EAA7D;;AAEA;AACA,UAAMpS,SAAS;AACbuO,WAAKnoB,QAAQisB,aAAR,CAAsB9D,GADd;AAEb5F,sBAAgBviB,QAAQisB,aAAR,CAAsBrD,WAFzB;AAGbsD,kBAAYH,mBAAmBG,UAHlB;AAIbE,oBAAcL,mBAAmBa,mBAJpB;AAKb5S,wBAAkBha,QAAQga;AALb,KAAf;;AAQA,UAAM,mBAAK6S,gCAAL,EAAwBlG,IAAxB,EAA8B/M,MAA9B,CAAN;AACD;;AAED,QAAM,wBAAU8S,eAAV,EAA2BC,oBAA3B,CAAN;AACD;;AAED;;;;;;AAMO,UAAWlC,sBAAX,CAAmC9D,IAAnC,EAAyC;AAC9C,WAASmG,mBAAT,CAA8BtkB,MAA9B,EAAsC;AACpC,WAAO,SAASukB,aAAT,CAAwB7xB,MAAxB,EAAgC;AACrC,aAAOA,OAAOX,IAAP,KAAgBgR,mCAAhB,IAAyCrQ,OAAOmF,OAAP,CAAemL,mBAAf,CAAmCC,SAAnC,KAAiDjD,MAAjG;AACD,KAFD;AAGD;;AAED,YAAWwkB,uBAAX,CAAoC9xB,MAApC,EAA4C;AAC1C,UAAM8E,UAAU9E,OAAOmF,OAAP,CAAemL,mBAA/B;AACA,UAAM,EAAEC,SAAF,KAAgBzL,OAAtB;AACA,UAAM,EAAE4oB,aAAarG,cAAf,EAA+B0K,UAA/B,EAA2C5gB,UAA3C,KAA0DrM,QAAQisB,aAAxE;;AAEA,UAAM5b,aAAa,MAAM,qBAAOkT,kCAAP,EAAgChB,cAAhC,CAAzB;AACA,QAAI,CAAClS,UAAL,EAAiB;AACftW,UAAI4G,IAAJ,CAAS,wEAAT;AACD;;AAED,UAAMusB,aAAa,MAAM,mBAAKC,2BAAL,EAA2BntB,OAA3B,CAAzB;;AAEA,UAAM4Z;AACJ2I,oBADI;AAEJ0K,gBAFI;AAGJ5gB;AAHI,OAKD6gB,UALC,CAAN;AAOA,QAAIzhB,cAAc,SAAlB,EAA6B;AAC3B,YAAM,mBAAK2hB,oCAAL,EAA4BzG,IAA5B,EAAkC/M,MAAlC,CAAN;AACD,KAFD,MAEO,IAAInO,cAAc,iBAAlB,EAAqC;AAC1C,YAAM,mBAAK4hB,uCAAL,6BAAoC1G,IAApC,IAA0C+E,QAA1C,KAAsD9R,MAAtD,CAAN;AACD,KAFM,MAEA,IAAInO,cAAc,SAAlB,EAA6B;AAClCmO,aAAOI,gBAAP,GAA0Bha,QAAQga,gBAAlC;AACA,YAAM,mBAAKsT,sCAAL,EAA8B3G,IAA9B,EAAoC/M,MAApC,CAAN;AACD,KAHM,MAGA,IAAInO,cAAc,aAAlB,EAAiC;AACtC,YAAM,mBAAK8hB,qCAAL,EAA6B5G,IAA7B,EAAmC/M,MAAnC,CAAN;AACD;AACF;;AAED;AACA,QAAM,wBAAUkT,oBAAoB,SAApB,CAAV,EAA0CE,uBAA1C,CAAN;AACA,QAAM,wBAAUF,oBAAoB,SAApB,CAAV,EAA0CE,uBAA1C,CAAN;AACA,QAAM,wBAAUF,oBAAoB,iBAApB,CAAV,EAAkDE,uBAAlD,CAAN;AACA,QAAM,wBAAUF,oBAAoB,aAApB,CAAV,EAA8CE,uBAA9C,CAAN;AACD;;AAED;;;;;;AAMO,UAAWtC,sBAAX,CAAmC/D,IAAnC,EAAyC;AAC9C;AACA,WAAS6G,iBAAT,CAA4BtyB,MAA5B,EAAoC;AAClC,WAAOA,OAAOX,IAAP,KAAgBgR,mCAAhB,IAAyCrQ,OAAOmF,OAAP,CAAemL,mBAAf,CAAmCC,SAAnC,KAAiD,YAAjG;AACD;;AAED;;;;;;AAMA,YAAWgiB,gBAAX,CAA6BvyB,MAA7B,EAAqC;AACnC;;;;;;;;;;;;;;;;;;;;;AAqBA,UAAM,oBAAM,IAAN,CAAN;;AAEA;AACA,UAAM,EAAE0tB,WAAF,KAAkB1tB,OAAOmF,OAAP,CAAemL,mBAAf,CAAmCygB,aAA3D;AACA,UAAMyB,cAAc,MAAM,qBAAOnK,kCAAP,EAAgCqF,WAAhC,CAA1B;;AAEA,QACE8E,eACAA,YAAY3mB,KAAZ,KAAsB0G,uBAAYI,OADlC,IAEA6f,YAAY3mB,KAAZ,KAAsB0G,uBAAYG,WAFlC,IAGA8f,YAAY3mB,KAAZ,KAAsB0G,uBAAYE,SAJpC,EAKE;AACA;AACA5T,UAAI+L,KAAJ,CAAW,mDAAkD4nB,YAAY3mB,KAAM,aAA/E;AACA;AACD;;AAED,UAAM6S,SAAS;AACb2I,sBAAgBqG;;AAGlB;AAJe,KAAf,CAKA,MAAM,mBAAKtS,4BAAL,EAAoBqQ,IAApB,EAA0B/M,MAA1B,CAAN;AACD;;AAED,QAAM,wBAAU4T,iBAAV,EAA6BC,gBAA7B,CAAN;AACD;;AAED;;;;;;;;AAQO,UAAW9C,kBAAX,CAA+BhE,IAA/B,EAAqC;AAC1C;;;;;;AAMA,YAAWgH,sBAAX,CAAmCzyB,MAAnC,EAA2C;AACzC,UAAM8E,UAAU9E,OAAOmF,OAAP,CAAemL,mBAA/B;AACA,UAAM,EAAEod,aAAarG,cAAf,KAAkCviB,QAAQisB,aAAhD;;AAEA,UAAM5b,aAAa,MAAM,qBAAOkT,kCAAP,EAAgChB,cAAhC,CAAzB;AACA,QAAI,CAAClS,UAAL,EAAiB;AACftW,UAAI4G,IAAJ,CAAS,wEAAT;AACA;AACD;;AAED,UAAMusB,aAAa,MAAM,mBAAKC,2BAAL,EAA2BntB,OAA3B,CAAzB;;AAEA;AACA,UAAM4Z;AACJ2I,sBAAgBviB,QAAQisB,aAAR,CAAsBrD,WADlC;AAEJT,WAAKnoB,QAAQisB,aAAR,CAAsB9D;AAFvB,OAGD+E,UAHC;AAIJlT,wBAAkBha,QAAQga;;AAG5B;AAPM,MAAN,CAQA,MAAM,mBAAK4T,+BAAL,6BAA4BjH,IAA5B,IAAkC+E,QAAlC,KAA8C9R,MAA9C,CAAN;AACD;;AAED;AACA,WAASiU,mBAAT,CAA8B3yB,MAA9B,EAAsC;AACpC,WAAOA,OAAOX,IAAP,KAAgBgR,mCAAhB,IAAyCrQ,OAAOmF,OAAP,CAAemL,mBAAf,CAAmCC,SAAnC,KAAiD,iBAAjG;AACD;;AAED,QAAM,wBAAUoiB,mBAAV,EAA+BF,sBAA/B,CAAN;AACD;;AAED;;;;;;;;AAQO,UAAW/C,mBAAX,CAAgCjE,IAAhC,EAAsC;AAC3C;;;;;;AAMA,YAAWmH,uBAAX,CAAoC5yB,MAApC,EAA4C;AAC1C,UAAM8E,UAAU9E,OAAOmF,OAAP,CAAemL,mBAA/B;AACA,UAAM,EAAEod,aAAarG,cAAf,KAAkCviB,QAAQisB,aAAhD;;AAEA,UAAM5b,aAAa,MAAM,qBAAOkT,kCAAP,EAAgChB,cAAhC,CAAzB;AACA,QAAI,CAAClS,UAAL,EAAiB;AACftW,UAAI4G,IAAJ,CAAS,wEAAT;AACA;AACD;;AAED,UAAMusB,aAAa,MAAM,mBAAKC,2BAAL,EAA2BntB,OAA3B,CAAzB;;AAEA;AACA,UAAM4Z;AACJ2I,sBAAgBviB,QAAQisB,aAAR,CAAsBrD,WADlC;AAEJT,WAAKnoB,QAAQisB,aAAR,CAAsB9D,GAFvB;;AAIJ4F,kBAAY/tB,QAAQisB,aAAR,CAAsB8B,UAJ9B;AAKJ/tB,eAASA,QAAQisB,aAAR,CAAsBgB,UAL3B;AAMJ/rB,YAAMlB,QAAQqM;;AANV,OASD6gB,UATC;;AAWJlT,wBAAkBha,QAAQga;;AAG5B;AAdM,MAAN,CAeA,MAAM,mBAAKgU,gCAAL,6BAA6BrH,IAA7B,IAAmC+E,QAAnC,KAA+C9R,MAA/C,CAAN;AACD;;AAED;AACA,WAASqU,oBAAT,CAA+B/yB,MAA/B,EAAuC;AACrC,WAAOA,OAAOX,IAAP,KAAgBgR,mCAAhB,IAAyCrQ,OAAOmF,OAAP,CAAemL,mBAAf,CAAmCC,SAAnC,KAAiD,mBAAjG;AACD;;AAED,QAAM,wBAAUwiB,oBAAV,EAAgCH,uBAAhC,CAAN;AACD;;AAED;;;;;;AAMO,UAAWjD,YAAX,CAAyBlE,IAAzB,EAA+B;AACpC,QAAM,wBAAUpnB,YAAYsT,QAAtB,EAAgC8Y,aAAa5U,OAA7C,6BAA2D4P,IAA3D,IAAiE+E,QAAjE,IAAN;AACD;;AAED;;;;;;AAMO,UAAWZ,eAAX,CAA4BnE,IAA5B,EAAkC;AACvC,QAAM,wBAAUpnB,YAAYmT,WAAtB,EAAmCmE,qBAAnC,6BAAoD8P,IAApD,EAAN;AACD;;AAED;;;;;;;;;AASO,UAAW1P,QAAX,CAAqB0P,IAArB,EAA2B;AAChC,QAAM,wBAAUpnB,YAAY4T,SAAtB,EAAiCwY,aAAauC,kBAA9C,6BAAuEvH,IAAvE,IAA6E+E,QAA7E,IAAN;AACD;;AAED;;;;;;;;;AASO,UAAWvU,UAAX,CAAuBwP,IAAvB,EAA6B;AAClC,QAAM,wBAAUpnB,YAAY8T,WAAtB,EAAmCsY,aAAawC,cAAhD,6BAAqExH,IAArE,IAA2E+E,QAA3E,IAAN;AACD;;AAED;;;;;;AAMO,UAAWpU,oBAAX,CAAiCqP,IAAjC,EAAuC;AAC5C,QAAM,wBAAUpnB,YAAYiU,sBAAtB,EAA8CmY,aAAarU,oBAA3D,6BAAsFqP,IAAtF,IAA4F+E,QAA5F,IAAN;AACD;;AAED;;;;;;;AAOO,UAAWX,SAAX,CAAsBpE,IAAtB,EAA4B;AACjC,QAAMyH,yBAAyB,CAAC7uB,YAAY+S,WAAb,EAA0B/S,YAAYqT,aAAtC,EAAqDrT,YAAYuS,gBAAjE,CAA/B;;AAEA,WAASuc,qBAAT,CAAgCnzB,MAAhC,EAAwC;AACtC,WAAOkzB,uBAAuBh1B,OAAvB,CAA+B8B,OAAOX,IAAtC,MAAgD,CAAC,CAAjD,IAAsD,CAACW,OAAOE,KAArE;AACD;;AAED,QAAM,wBAAU,CAACizB,qBAAD,EAAwB9uB,YAAY8S,UAApC,CAAV,EAA2DkE,uBAA3D,EAA0E;AAC9EpG,YAAQwW,KAAKxW,MADiE;AAE9Eub;AAF8E,GAA1E,CAAN;AAID;;AAED;;;;;AAKO,UAAWV,sBAAX,CAAmCrE,IAAnC,EAAyC;AAC9C,QAAM,wBAAU3c,wBAAwBskB,mBAAlC,EAAuDC,qBAAvD,6BAAyE5H,IAAzE,IAA+E+E,QAA/E,IAAN;AACD;;AAED;;;;;;AAMO,UAAWT,aAAX,CAA0BtE,IAA1B,EAAgC;AACrC,QAAM,wBAAUpnB,YAAY6U,SAAtB,EAAiCuX,aAAaxT,QAA9C,EAAwDwO,IAAxD,CAAN;AACD;;AAED;;;;AAIO,UAAWuE,kBAAX,GAAiC;AACtC;AACA;AACA,WAASsD,kBAAT,CAA6BtzB,MAA7B,EAAqC;AACnC,WACE,CAACA,OAAOE,KAAR,KACEF,OAAOX,IAAP,KAAgBuI,8BAAhB,IACA5H,OAAOmF,OAAP,CAAenC,YADf,IAEAhD,OAAOmF,OAAP,CAAenC,YAAf,CAA4BuwB,eAF7B,IAGEvzB,OAAOX,IAAP,KAAgBm0B,gCAAhB,IACCxzB,OAAOmF,OAAP,CAAe+M,aADhB,IAEClS,OAAOmF,OAAP,CAAe+M,aAAf,CAA6BtW,MAF9B,IAGCoE,OAAOmF,OAAP,CAAe+M,aAAf,CAA6B,CAA7B,EAAgCqhB,eAPpC,CADF;AAUD;;AAED,QAAM,wBAAUD,kBAAV,EAA8B/C,aAAaP,kBAA3C,CAAN;AACD;;AAED;;;;;;AAMO,UAAWC,gBAAX,CAA6BxE,IAA7B,EAAmC;AACxC,QAAM,wBAAUpnB,YAAYwT,YAAtB,EAAoCsF,sBAApC,6BAAsDsO,IAAtD,IAA4D+E,QAA5D,IAAN;AACD;;AAED;;;;;;AAMO,UAAWN,yBAAX,CAAsCzE,IAAtC,EAA4C;AACjD,QAAM,wBAAUpnB,YAAYsP,qBAAtB,EAA6C8c,aAAapT,oBAA1D,6BAAqFoO,IAArF,IAA2F+E,QAA3F,IAAN;AACD;;AAED;;;;;;AAMO,UAAWL,mBAAX,CAAgC1E,IAAhC,EAAsC;AAC3C,QAAM,wBAAUpnB,YAAYqP,eAAtB,EAAuC+c,aAAajT,cAApD,6BAAyEiO,IAAzE,IAA+E+E,QAA/E,IAAN;AACD;;AAED;;;;;;AAMO,UAAWJ,SAAX,CAAsB3E,IAAtB,EAA4B;AACjC,QAAM,wBAAUpnB,YAAYuP,IAAtB,EAA4B6c,aAAa/xB,IAAzC,6BAAoD+sB,IAApD,IAA0D+E,QAA1D,IAAN;AACD;;AAED;;;;;;AAMO,UAAWH,iBAAX,CAA8B5E,IAA9B,EAAoC;AACzC,QAAM,wBAAUpnB,YAAYoV,aAAtB,EAAqCgX,aAAa7S,YAAlD,EAAgE6N,IAAhE,CAAN;AACD;;AAED;;;;;AAKO,UAAW6E,uBAAX,CAAoC7E,IAApC,EAA0C;AAC/C,QAAM,wBAAUpnB,YAAYuV,oBAAtB,EAA4CmE,0BAA5C,6BAAqE0N,IAArE,EAAN;AACD,C;;;;;;;;;;;;;;;;;;QCvmBiBuE,kB,GAAAA,kB;;AAlBlB;;AACA;;AAGA;;AACA;;AAGA;;;;AAEA,MAAMnxB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,CAAZ;;AAEA;;;;;;;;AALA;;;AAJA;AAeO,UAAWwrB,kBAAX,CAA+BhwB,MAA/B,EAAuC;AAC5C,QAAM,EAAEqqB,UAAF,EAAcG,qBAAd,KAAwC,MAAM,qBAAOjC,qBAAP,CAApD;;AAEA;AACA,MAAI,CAAC8B,UAAL,EAAiB;AACfxrB,QAAI+L,KAAJ,CAAU,sEAAV;AACA;AACD;;AAED,MAAI,CAAC4f,qBAAL,EAA4B;AAC1B3rB,QAAI+L,KAAJ,CAAU,8CAAV;AACA;AACD;;AAED;AACA,QAAM2oB,kBACJvzB,OAAOX,IAAP,KAAgBuI,6BAAhB,GACI5H,OAAOmF,OAAP,CAAenC,YAAf,CAA4BuwB,eADhC,GAEIvzB,OAAOmF,OAAP,CAAe+M,aAAf,CAA6B,CAA7B,EAAgCqhB,eAHtC;;AAKA,QAAME,WAAW;AACfvuB,iBAAaquB,eADE;AAEf;AACAlU,aAASgL,WAAWtY,GAAX,CAAe2hB,WAAW;AACjC,wCACKA,OADL;AAEEhtB,kBAAU6sB,gBAAgB7sB,QAF5B;AAGEitB,oBAAYJ,gBAAgBhpB;AAH9B;AAKD,KANQ;AAHM,GAAjB;;AAYA,QAAM,kBAAI4U,qBAAYC,WAAZ,CAAwBqU,QAAxB,CAAJ,CAAN;AACD,C;;;;;;;;;;;;;QCjCiBxB,oB,GAAAA,oB;;AAjBlB;;AAGA;;AACA;;AAGA;;AARA;AAUA,MAAMpzB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,CAAZ;;AAEA;;;;;;;;AALA;;;AAJA;AAeO,UAAWytB,oBAAX,CAAiC2B,YAAjC,EAA+C;AACpD,QAAMvM,iBAAiBuM,aAAa7C,aAAb,CAA2BrD,WAAlD;AACA,QAAMvY,aAAa,MAAM,qBAAOkT,kCAAP,EAAgChB,cAAhC,CAAzB;;AAEA;AACA,MAAI,CAAClS,UAAL,EAAiB;AACftW,QAAI4G,IAAJ,CAAS,wEAAT;AACA,WAAO,EAAP;AACD;;AAED,MAAIusB,aAAa,EAAjB;AACA,MAAI,CAAC4B,aAAa9C,sBAAlB,EAA0C;AACxC;AACAjyB,QAAI+L,KAAJ,CAAU,kEAAV;AACD,GAHD,MAGO;AACL;;;;;AAKA,QAAIuK,WAAW+R,SAAX,KAAyB,UAA7B,EAAyC;AACvC8K,mBAAa;AACXhB,oBAAY4C,aAAa9C,sBAAb,CAAoCG,UADrC;AAEXC,sBAAc0C,aAAa9C,sBAAb,CAAoCK;AAFvC,OAAb;AAID,KALD,MAKO;AACLa,mBAAa;AACXhB,oBAAY4C,aAAa9C,sBAAb,CAAoCE,UADrC;AAEXE,sBAAc0C,aAAa9C,sBAAb,CAAoCY;AAFvC,OAAb;AAID;AACF;;AAED;;;;;;AAMA,MAAIM,WAAWd,YAAX,IAA2B,CAACc,WAAWd,YAAX,CAAwBnrB,QAAxB,CAAiC,GAAjC,CAAhC,EAAuE;AACrE,UAAMiH,SAAS,MAAM,qBAAON,qBAAP,CAArB;AACAslB,eAAWd,YAAX,IAA2BlkB,MAA3B;AACD;;AAED;AACA;AACA,SAAO;AACLgkB,gBAAYgB,WAAWhB,UAAX,IAAyB7b,WAAWuR,iBAAX,CAA6BI,WAD7D;AAELoK,kBAAcc,WAAWd,YAAX,IAA2B/b,WAAWuR,iBAAX,CAA6BG;AAFjE,GAAP;AAID,C;;;;;;;;;;;;;QCjDiBuG,c,GAAAA,c;;AAlBlB;;AAGA;;;;AAGA;;AACA;;;;AAFA;AANA;AAUA,MAAMvuB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,CAAZ;;AAEA;;;;;;;;;AATA;AAgBO,UAAW4oB,cAAX,GAA6B;AAClC,QAAM7nB,mBAAmB,MAAM,qBAAOkH,8BAAP,CAA/B;;AAEA,MAAI;AACF;AACA,UAAM8gB,cAAchoB,iBAAiBc,mBAAjB,CAAqC8iB,KAArC,CAA2C,uBAA3C,EAAoE,CAApE,CAApB;AACA,WAAO,EAAEoE,WAAF,EAAP;AACD,GAJD,CAIE,OAAOxyB,CAAP,EAAU;AACV8D,QAAIqB,KAAJ,CAAUnF,EAAE+J,OAAZ;AACA,WAAO;AACL5E,aAAO,IAAI2E,gBAAJ,CAAe;AACpBmB,cAAMqP,kBAAUwe,aADI;AAEpB/uB,iBAAS;AAFW,OAAf;AADF,KAAP;AAMD;AACF,C;;;;;;;;;;;;;kBCkBuBgvB,e;;AApDxB;;IAAY7vB,K;;AACZ;;;;AAGA;;;;AACA;;AAGA;;AAGA;;AACA;;AACA;;AAGA;;;;;;AANA;AAQA,MAAMpF,MAAM0F,iBAAWC,SAAX,CAAqB,QAArB,CAAZ;;AAHA;;;AARA;;;AAJA;AAJA;;;AAqBA,MAAMzB,iBAAiB;AACrBqjB,gBAAc,QADO;AAErBiE,cAAY,EAFS;AAGrBC,sBAAoB,IAHC;AAIrBC,iBAAe,IAJM;AAKrB;AACA;AACAC,yBAAuB,IAPF;AAQrBjJ,eAAa,EARQ;AASrBC,oBAAkB,IATG;AAUrBiJ,cAAY,KAVS;AAWrBC,mBAAiB,KAXI;AAYrBC,mBAAiB;;AAGnB;AAfuB,CAAvB,CAgBA,MAAMpnB,gBAAgBC,uBAAIC,MAAJ,CAAW;AAC/B2iB,gBAAc,uBAAM,CAAC,cAAD,EAAiB,QAAjB,CAAN,CADiB;AAE/BiE,cAAY7mB,uBAAII,KAAJ,EAFmB;AAG/B0mB,sBAAoB9mB,uBAAIG,QAAJ,EAHW;AAI/B4mB,iBAAe/mB,uBAAIG,QAAJ,EAJgB;AAK/B;AACA;AACA6mB,yBAAuBhnB,uBAAIsnB,OAAJ,EAPQ;AAQ/BvJ,eAAa/d,uBAAII,KAAJ,EARkB;AAS/B4d,oBAAkBhe,uBAAIsnB,OAAJ,EATa;AAU/BL,cAAYjnB,uBAAIsnB,OAAJ,EAVmB;AAW/BJ,mBAAiBlnB,uBAAIsnB,OAAJ,EAXc;AAY/BH,mBAAiBnnB,uBAAIsnB,OAAJ;AAZc,CAAX,CAAtB;AAcA,MAAMhnB,eAAe,uBAAM,MAAN,EAAcP,aAAd,CAArB;;AAEe,SAASuwB,eAAT,CAA0B/vB,UAAU,EAApC,EAAwC;AACrDA,YAAU,wBAAYhB,cAAZ,EAA4BgB,OAA5B,CAAV;AACAD,eAAaC,OAAb;;AAEA,QAAM,EAAEgnB,YAAF,EAAgBC,cAAhB,KAAmC,gDAAzC;AACA,MAAI,CAACD,YAAD,IAAiB,CAACC,cAAtB,EAAsC;AACpCnsB,QAAIosB,IAAJ,CACE,4GADF;AAGA;AACD;;AAED,QAAM8I,iBAAiB,oBAAahwB,OAAb,CAAvB;;AAEA,SAAO;AACL2H,UAAMqoB,eAAeroB,IADhB;AAELf,SAAK,sBAAaopB,eAAeppB,GAA5B,CAFA;AAGLc,aAASsoB,eAAetoB,OAHnB;AAIL6C,UAAM0lB,cAAcD,eAAezlB,IAA7B,CAJD;AAKLwd,kBAAc,CAAC,QAAD;AALT,GAAP;AAOD;;AAED;;;;;AAKA,SAASkI,aAAT,CAAwBC,SAAxB,EAAmC;AACjC,SAAO,UAAW3lB,IAAX,CAAiB,EAAE2G,MAAF,EAAjB,EAA6B;AAClC;AACA,UAAM,mBAAKgf,SAAL,EAAgB,EAAEhf,MAAF,EAAhB,CAAN;;AAEA;AACA,UAAMwW,OAAO,EAAExW,MAAF,EAAU0W,gBAAgB1W,OAAOoW,iBAAjC,EAAb;AACA,UAAMO,eAAe,gBAAO3nB,KAAP,EAAc8N,GAAd,CAAkB8Z,QAAQ;AAC7C,aAAO,wBAAY,MAAMA,KAAKJ,IAAL,CAAlB,CAAP;AACD,KAFoB,CAArB;;AAIA;AACA,SAAK,MAAMI,IAAX,IAAmBD,YAAnB,EAAiC;AAC/B,YAAM,mBAAKC,IAAL,CAAN;AACD;AACF,GAdD;AAeD,C;;;;;;;;;;;;;QCtEiB9Q,iB,GAAAA,iB;;AA1BlB;;AACA;;AAGA;;IAAYmZ,W;;AACZ;;IAAYC,e;;AACZ;;AAGA;;AACA;;;;;;;;AAFA;AAIA,MAAMt1B,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,CAAZ;AACA;;;;;;;;;;;;;;;AAVA;AAJA;AA2BO,UAAWuW,iBAAX,CAA8B0Q,IAA9B,EAAoCzrB,MAApC,EAA4C;AACjD,QAAMo0B,WAAWp0B,OAAOmF,OAAP,CAAe0Z,WAAf,CAA2BY,IAA5C;AACA,MAAI,CAAC2U,QAAL,EAAe;AACb,UAAM,kBACJlV,qBAAYlE,uBAAZ,CAAoChb,OAAOmF,OAAP,CAAesZ,EAAnD,EAAuD;AACrDve,aAAO,IAAI2E,gBAAJ,CAAe;AACpBmB,cAAMqP,kBAAUC,aADI;AAEpBxQ,iBAAS;AAFW,OAAf;AAD8C,KAAvD,CADI,CAAN;AAQA;AACD;AACD,QAAM,EAAEM,KAAF,EAASivB,YAAT,EAAuBC,OAAvB,EAAgCC,SAAhC,KAA8Cv0B,OAAOmF,OAAP,CAAeD,WAAnE;;AAEA;AACA;AACA;AACA,MAAI,CAACE,SAASivB,YAAT,IAAyBC,OAAzB,IAAoCC,SAArC,MAAoD,CAACnvB,KAAD,IAAU,CAACivB,YAAX,IAA2B,CAACC,OAA5B,IAAuC,CAACC,SAA5F,CAAJ,EAA4G;AAC1G,UAAM,kBACJrV,qBAAYlE,uBAAZ,CAAoChb,OAAOmF,OAAP,CAAesZ,EAAnD,EAAuD;AACrDve,aAAO,IAAI2E,gBAAJ,CAAe;AACpBmB,cAAMqP,kBAAUC,aADI;AAEpBxQ,iBACE;AAHkB,OAAf;AAD8C,KAAvD,CADI,CAAN;AASA;AACD;;AAED,MAAIsiB,OAAJ,EAAaoN,MAAb,EAAqB7V,MAArB;AACA,MAAI8V,YAAJ;AACA,MAAIrvB,SAASivB,YAAT,IAAyBC,OAAzB,IAAoCC,SAAxC,EAAmD;AACjD;AACA11B,QAAI+L,KAAJ,CAAU,+CAAV;AACAwc,cAAUiN,YAAV;AACAG,aAASD,SAAT;AACA5V,aAAS2V,OAAT;AACAG,mBAAe,IAAf;AACD,GAPD,MAOO;AACL51B,QAAI+L,KAAJ,CAAU,4BAAV;AACAwc,cAAUpnB,OAAOmF,OAAP,CAAewZ,MAAzB;AACA6V,aAASJ,QAAT;AACAzV,aAAS3e,OAAOmF,OAAP,CAAewZ,MAAxB;AACA8V,mBAAe,KAAf;AACD;;AAED,QAAMC,iBAAiB,MAAM,4BAAcP,gBAAgBvsB,gBAA9B,CAA7B;AACA,QAAM,kBACJssB,YAAYzrB,OAAZ,CAAoB;AAClB/B,cAAU0gB,OADQ;AAElB7c,cAAU,EAFQ;AAGlB;AACA3D,kBAAcwtB,QAJI;AAKlBhvB;AALkB,GAApB,CADI,CAAN;AASA,QAAMuvB,kBAAkB,MAAM,mBAAKD,cAAL,CAA9B;AACAA,iBAAeE,KAAf;;AAEA,MAAID,gBAAgBz0B,KAApB,EAA2B;AACzB;AACA,UAAM,kBACJgf,qBAAYlE,uBAAZ,CAAoChb,OAAOmF,OAAP,CAAesZ,EAAnD,EAAuD;AACrDve,aAAO,IAAI2E,gBAAJ,CAAe;AACpBmB,cAAMqP,kBAAUC,aADI;AAEpBxQ,iBAAS;AAFW,OAAf;AAD8C,KAAvD,CADI,CAAN;AAQA;AACD;;AAED;AACA,QAAM,kBACJoa,qBAAYvE,QAAZ,CAAqB3a,OAAOmF,OAAP,CAAesZ,EAApC,EAAwC;AACtCyB,wBAAoBuU,eAAe9V,MAAf,GAAwB,oCAAgBA,MAAhB,CADN;AAEtCC,sBAAkB5e,OAAOmF,OAAP,CAAeyZ,gBAFK;AAGtCpZ,iBAAa,IAHyB;AAItC8hB,eAAWtnB,OAAOmF,OAAP,CAAe0Z,WAAf,CAA2ByI,SAJA;AAKtCF,WALsC;AAMtC3H,UAAMgV,eAAeD,MAAf,GAAwB,oCAAgBA,MAAhB,CANQ;AAOtC1N,iBAAa2N,eAAe,EAAf,GAAoBz0B,OAAOmF,OAAP,CAAe0Z,WAAf,CAA2BiI,WAPtB;AAQtChI,sBAAkB9e,OAAOmF,OAAP,CAAe0Z,WAAf,CAA2BC;AARP,GAAxC,CADI,CAAN;AAYD,C;;;;;;;;;;;;;;;;;;QCxFiB+V,sB,GAAAA,sB;QASAC,gB,GAAAA,gB;;AA7BlB;;AAGA;;IAAYZ,W;;AAEZ;;AAGA;;;;;;AAEA;;;;AAIA;;;;;;AApBA;;;;;AAKA;AAqBO,UAAWW,sBAAX,CAAmCpJ,IAAnC,EAAyC;AAC9C;AACA,QAAM,wBAAU5U,gCAAV,EAA+BkE,4BAA/B,6BAAuD0Q,IAAvD,EAAN;AACD;;AAED;;;;;;AAlBA;;;AALA;AA2BO,UAAWqJ,gBAAX,GAA+B;AACpC,QAAMC,uBAAuB,CAAC,EAAE11B,IAAF,EAAQa,KAAR,EAAD,KAAqBb,SAASuX,6BAAT,IAA6B1W,KAA/E;;AAEA,SAAO,IAAP,EAAa;AACX,UAAM,mBAAK,CAAC0X,4BAAD,EAAkBmd,oBAAlB,CAAL,CAAN;;AAEA;AACA,UAAM,kBAAIb,YAAYltB,UAAZ,EAAJ,CAAN;AACD;AACF,C;;;;;;;;;;;;;QC6FeguB,e,GAAAA,e;AAzIhB;;;;;AAKA,SAASC,wBAAT,CAAmCC,aAAnC,EAAkD;AAChD,QAAMC,kBAAkBD,cAAczuB,WAAd,CAA0B,GAA1B,CAAxB;AACA,MAAI0uB,oBAAoB,CAApB,IAAyBA,oBAAoBD,cAAct5B,MAAd,GAAuB,CAAxE,EAA2E;AACzE;AACA,QAAIu5B,oBAAoB,CAAC,CAAzB,EAA4B;AAC1B,aAAOD,cAAc1uB,MAAd,CAAqB2uB,kBAAkB,CAAvC,CAAP;AACD;AACF;AACD,SAAO,EAAP;AACD;;AAED;;;;;;AAMA,SAASC,wBAAT,CAAmCF,aAAnC,EAAkDG,mBAAlD,EAAuE;AACrE,QAAMC,kBAAkBL,yBAAyBC,aAAzB,CAAxB;AACA;AACA,MAAII,eAAJ,EAAqB;AACnB,WAAO;AACLvH,eAASmH,cAAc1uB,MAAd,CAAqB,CAArB,EAAwB0uB,cAAct5B,MAAd,GAAuB05B,gBAAgB15B,MAAvC,GAAgD,CAAxE,CADJ;AAELoR,cAAQsoB;AAFH,KAAP;AAID,GALD,MAKO;AACL,WAAO;AACLvH,eAASmH,aADJ;AAELloB,cAAQqoB;AAFH,KAAP;AAID;AACF;;AAED;;;;;AAKA,SAASE,oBAAT,CAA+BC,WAA/B,EAA4C;AAC1C,QAAMC,uBAAuBD,YAAYrM,KAAZ,CAAkB,OAAlB,CAA7B;AACA,MAAIsM,wBAAwBA,qBAAqB,CAArB,CAA5B,EAAqD;AACnD,WAAOA,qBAAqB,CAArB,CAAP;AACD,GAFD,MAEO;AACL,WAAO,EAAP;AACD;AACF;;AAED;;;;;;;;;AASA,SAASC,+BAAT,CAA0CR,aAA1C,EAAyD;AACvD;AACA;AACA;AACA;AACA;AACA,QAAMS,wBAAwBT,cAAc/L,KAAd,CAAoB,6BAApB,CAA9B;AACA,MAAIwM,yBAAyBA,sBAAsB,CAAtB,CAA7B,EAAuD;AACrD;AACA;AACA,UAAMC,qBAAqBD,sBAAsB,CAAtB,EAAyBxM,KAAzB,CAA+B,SAA/B,CAA3B;AACA,WAAOyM,mBAAmB,CAAnB,CAAP;AACD;AACD,SAAO,EAAP;AACD;;AAED;;;;;AAKA,SAASC,uBAAT,CAAkCL,WAAlC,EAA+C;AAC7C,SAAOA,YAAYM,OAAZ,CAAoB,YAApB,EAAkC,EAAlC,CAAP;AACD;;AAED;;;;;;;;AAQA,SAASC,aAAT,CAAwBb,aAAxB,EAAuC;AACrC,QAAMc,cAAcH,wBAAwBX,aAAxB,CAApB;AACA,QAAMe,mBAAmBD,YAAY7M,KAAZ,CAAkB,QAAlB,CAAzB;AACA,SAAO8M,oBAAoBA,iBAAiBr6B,MAAjB,KAA4B,CAAvD;AACD;;AAED;;;;;;;;;;AAUA,SAASs6B,cAAT,CAAyBhB,aAAzB,EAAwC;AACtC,SAAOa,cAAcb,aAAd,IAA+BW,wBAAwBX,aAAxB,CAA/B,GAAwEA,aAA/E;AACD;;AAED;;;;;;AAMA,SAASiB,aAAT,CAAwBC,YAAxB,EAAsC;AACpC,MAAIA,iBAAiB,EAAjB,IAAuBA,iBAAiBtqB,SAA5C,EAAuD;AACrD,WAAO,EAAP;AACD,GAFD,MAEO,IAAIsqB,aAAal4B,OAAb,CAAqB,GAArB,MAA8B,CAAlC,EAAqC;AAC1C,WAAOk4B,YAAP;AACD,GAFM,MAEA;AACL,WAAO,MAAMA,YAAb;AACD;AACF;;AAED;;;;;;;AAOO,SAASpB,eAAT,CAA0BjH,OAA1B,EAAmC/gB,MAAnC,EAA2C;AAChD;AACA+gB,YAAUA,QAAQsI,IAAR,EAAV;;AAEA;AACA,QAAMC,4BAA4BlB,yBAAyBrH,OAAzB,EAAkC/gB,MAAlC,CAAlC;AACAA,WAASspB,0BAA0BtpB,MAAnC;AACA+gB,YAAUuI,0BAA0BvI,OAApC;;AAEA;AACA,QAAMwI,UAAUhB,qBAAqBxH,OAArB,CAAhB;AACAA,YAAUA,QAAQvnB,MAAR,CAAe+vB,QAAQ36B,MAAvB,CAAV;;AAEA;AACA,QAAM46B,eAAed,gCAAgC3H,OAAhC,CAArB;AACAA,YAAUA,QAAQvnB,MAAR,CAAegwB,aAAa56B,MAA5B,CAAV;;AAEA;AACA,SAAO,SAAS46B,YAAT,GAAwBN,eAAenI,OAAf,CAAxB,GAAkDoI,cAAcnpB,MAAd,CAAzD;AACD,C;;;;;;;;;;;;;QCnJeypB,gB,GAAAA,gB;QAcEC,e,GAAAA,e;QAuBAC,c,GAAAA,c;;AA7ClB;;;;;;AAEA;;;;;;AAMO,SAASF,gBAAT,CAA2BxJ,GAA3B,EAAgC;AACrC,QAAM2J,QAAQ,8BAAd;AACA,MAAI,CAAC3J,GAAD,IAAQ,OAAOA,GAAP,KAAe,QAA3B,EAAqC;AACnC;AACD;;AAED,SAAOA,IAAI6I,OAAJ,CAAYc,KAAZ,EAAmB,UAAnB,CAAP;AACD;;AAED;;;;;AAlBA;AAuBO,UAAWF,eAAX,CAA4BzJ,GAA5B,EAAiC;AACtC,QAAM4J,YAAYC,uBAAaC,KAAb,CAAmB9J,GAAnB,CAAlB;;AAEA;AACA,QAAM+J,kBAAkBH,UAAUxgB,KAAV,CACrBxY,MADqB,CACdU,QAAQA,KAAKc,IAAL,KAAc,OADR,EAErBwE,KAFqB,CAEfwS,SAASA,SAASA,MAAM6Q,SAAN,KAAoB,UAFvB,CAAxB;;AAIA;AACA,QAAM+P,kBAAkBJ,UAAUxgB,KAAV,CACrBxY,MADqB,CACdU,QAAQA,KAAKc,IAAL,KAAc,OADR;AAEtB;AACA;AAHsB,GAIrBwE,KAJqB,CAIfwS,SAASA,SAAS,CAAC,UAAD,EAAa,UAAb,EAAyBtQ,QAAzB,CAAkCsQ,MAAM6Q,SAAxC,CAJH,CAAxB;;AAMA,SAAO,CAAC8P,eAAD,IAAoB,CAACC,eAA5B;AACD;;AAED;;;;;AAKO,UAAWN,cAAX,CAA2B1J,GAA3B,EAAgC;AACrC,QAAM4J,YAAYC,uBAAaC,KAAb,CAAmB9J,GAAnB,CAAlB;AACA,QAAMiK,gBAAgBL,UAAUxgB,KAAV,CACnBxY,MADmB,CACZU,QAAQA,KAAKc,IAAL,KAAc,OADV,EAEnB83B,IAFmB,CAEd9gB,SAASA,SAASA,MAAM6Q,SAAN,KAAoB,UAFxB,CAAtB;;AAIA;AACA,QAAM8P,kBAAkBH,UAAUxgB,KAAV,CACrBxY,MADqB,CACdU,QAAQA,KAAKc,IAAL,KAAc,OADR,EAErBwE,KAFqB,CAEfwS,SAASA,SAASA,MAAM6Q,SAAN,KAAoB,UAFvB,CAAxB;;AAIA,SAAOgQ,iBAAiBF,eAAxB;AACD,C;;;;;;;;;;;;;QCjDeI,a,GAAAA,a;QAkBAC,Q,GAAAA,Q;QAUAC,W,GAAAA,W;QAUAC,Y,GAAAA,Y;QAWAC,U,GAAAA,U;;AAzDhB;;AAEA;;;;;;AAMO,SAASJ,aAAT,CAAwB1P,SAAxB,EAAmC;AACxC,MAAI2P,SAAS3P,SAAT,CAAJ,EAAyB;AACvB,WAAO1U,6BAAkBH,SAAzB;AACD,GAFD,MAEO,IAAIykB,YAAY5P,SAAZ,CAAJ,EAA4B;AACjC,WAAO1U,6BAAkBC,UAAzB;AACD,GAFM,MAEA,IAAIskB,aAAa7P,SAAb,CAAJ,EAA6B;AAClC,WAAO1U,6BAAkBE,WAAzB;AACD,GAFM,MAEA,IAAIskB,WAAW9P,SAAX,CAAJ,EAA2B;AAChC,WAAO1U,6BAAkBG,SAAzB;AACD;AACF;;AAED;;;;;;AArBA;AA2BO,SAASkkB,QAAT,CAAmB3P,SAAnB,EAA8B;AACnC,SAAOA,UAAU7b,KAAV,KAAoB0G,uBAAYM,SAAhC,IAA6C,CAAC6U,UAAUhD,SAAxD,IAAqE,CAACgD,UAAU/C,UAAvF;AACD;;AAED;;;;;;AAMO,SAAS2S,WAAT,CAAsB5P,SAAtB,EAAiC;AACtC,SAAOA,UAAU7b,KAAV,KAAoB0G,uBAAYO,OAAhC,IAA2C4U,UAAUhD,SAArD,IAAkE,CAACgD,UAAU/C,UAApF;AACD;;AAED;;;;;;AAMO,SAAS4S,YAAT,CAAuB7P,SAAvB,EAAkC;AACvC,SAAOA,UAAU7b,KAAV,KAAoB0G,uBAAYO,OAAhC,IAA2C,CAAC4U,UAAUhD,SAAtD,IAAmEgD,UAAU/C,UAApF;AACD;;AAED;;;;;;;AAOO,SAAS6S,UAAT,CAAqB9P,SAArB,EAAgC;AACrC,SAAOA,UAAU7b,KAAV,KAAoB0G,uBAAYO,OAAhC,IAA2C4U,UAAUhD,SAArD,IAAkEgD,UAAU/C,UAAnF;AACD,C;;;;;;;;;;;;;QChBiBgM,Q,GAAAA,Q;QAuFA8G,W,GAAAA,W;QAqCAC,U,GAAAA,U;QA8KFC,iB,GAAAA,iB;QAkBAC,W,GAAAA,W;QAuCAC,U,GAAAA,U;;AAlYhB;;AACA;;AACA;;AAGA;;AACA;;;;AAGA;;AACA;;;;;;AAFA;;;AAJA;AAQA,MAAMh5B,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,CAAZ;;AAEA;;;;;;;;;;;;;;;;;AA3BA;;;;;;;;;;;;AAYA;AAgCO,UAAWmsB,QAAX,CAAqBlF,IAArB,EAA2BzrB,MAA3B,EAAmC;AACxC,QAAM,EAAEiV,MAAF,KAAawW,IAAnB;;AAEA;AACA,QAAMtW,aAAa,MAAM,qBAAOC,sBAAP,EAAoBpV,OAAOmF,OAAP,CAAesZ,EAAnC,CAAzB;;AAEA,MAAIve,KAAJ;AACA;;;;;;AAMA,MAAI,CAACiV,UAAL,EAAiB;AACftW,QAAI4G,IAAJ,CAAU,6CAA4CzF,OAAOmF,OAAP,CAAesZ,EAAG,EAAxE;AACAve,YAAQ,IAAI2E,gBAAJ,CAAe;AACrBmB,YAAMqP,kBAAUC,aADK;AAErBxQ,eAAS;AAFY,KAAf,CAAR;AAID,GAND,MAMO,IAAI,CAAC,CAACyN,uBAAYM,SAAb,EAAwBN,uBAAYI,OAApC,EAA6CJ,uBAAYG,WAAzD,EAAsE3M,QAAtE,CAA+EoP,WAAWtJ,KAA1F,CAAL,EAAuG;AAC5GhN,QAAI4G,IAAJ,CAAU,qCAAoC0P,WAAWsJ,EAAG,mBAA5D;AACAve,YAAQ,IAAI2E,gBAAJ,CAAe;AACrBmB,YAAMqP,kBAAUE,aADK;AAErBzQ,eAAU,gCAA+BqQ,WAAWtJ,KAAM;AAFrC,KAAf,CAAR;AAID,GANM,MAMA,IAAI,CAAC7L,OAAOmF,OAAP,CAAe2b,IAApB,EAA0B;AAC/BjiB,QAAI4G,IAAJ,CAAU,qCAAoC0P,WAAWsJ,EAAG,iBAA5D;AACAve,YAAQ,IAAI2E,gBAAJ,CAAe;AACrBmB,YAAMqP,kBAAUC,aADK;AAErBxQ,eAAS;AAFY,KAAf,CAAR;AAID;;AAED,MAAI5E,KAAJ,EAAW;AACT;AACA,UAAM,kBAAIgf,qBAAYlC,cAAZ,CAA2Bhd,OAAOmF,OAAP,CAAesZ,EAA1C,EAA8C,EAAEve,KAAF,EAA9C,CAAJ,CAAN;AACA;AACD;;AAED;AACA,QAAMwV,UAAU,MAAM,mBAAK,CAACT,OAAOU,cAAR,EAAwB,KAAxB,CAAL,EAAqCR,WAAWK,eAAhD,CAAtB;AACA;AACA,QAAMsiB,aAAa,MAAM,mBAAK,CAACpiB,OAAD,EAAU,sBAAV,CAAL,CAAzB;;AAEA;AACA,QAAMqiB,iBAAiB,MAAM,mBAAKJ,iBAAL,EAAwBG,WAAW7K,GAAnC,CAA7B;;AAEA,MAAI1b,MAAJ;AACA,MAAIwmB,cAAJ,EAAoB;AAClBl5B,QAAI+L,KAAJ,CAAW,2CAA0CuK,WAAWsJ,EAAG,GAAnE;AACAlN,aAAS,MAAM,mBAAKkmB,WAAL,EAAkB/hB,OAAlB,EAA2B1V,OAAOmF,OAAlC,CAAf;AACD,GAHD,MAGO;AACLtG,QAAI+L,KAAJ,CAAW,uCAAsCuK,WAAWsJ,EAAG,GAA/D;AACAlN,aAAS,MAAM,mBAAKmmB,UAAL,EAAiBhiB,OAAjB,EAA0B1V,OAAOmF,OAAjC,CAAf;AACD;;AAED,MAAIoM,MAAJ,EAAY;AACV1S,QAAI4G,IAAJ,CAAU,yCAAwC0P,WAAWsJ,EAAG,GAAhE;AACA,UAAM,kBAAIS,qBAAYlC,cAAZ,CAA2Bhd,OAAOmF,OAAP,CAAesZ,EAA1C,CAAJ,CAAN;AACD,GAHD,MAGO;AACL5f,QAAI+L,KAAJ,CAAW,sCAAqCuK,WAAWsJ,EAAG,GAA9D;AACA,UAAM,kBACJS,qBAAYlC,cAAZ,CAA2Bhd,OAAOmF,OAAP,CAAesZ,EAA1C,EAA8C;AAC5Cve,aAAO,IAAI2E,gBAAJ,CAAe;AACpBmB,cAAMqP,kBAAUwe,aADI;AAEpB/uB,iBAAU,sCAAqCqQ,WAAWsJ,EAAG;AAFzC,OAAf;AADqC,KAA9C,CADI,CAAN;AAQD;AACF;;AAED;;;;;;;;;;;;;;;AAeO,UAAWgZ,WAAX,CAAwB/hB,OAAxB,EAAiC3R,OAAjC,EAA0C;AAC/C,QAAMwN,SAAS,MAAM,mBAAK,CAACmE,OAAD,EAAU,UAAV,CAAL,EAA4B3R,OAA5B,CAArB;AACA,SAAOwN,MAAP;AACD;;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCO,UAAWmmB,UAAX,CAAuBhiB,OAAvB,EAAgC3R,OAAhC,EAAyC;AAC9C,MAAI,EAAE+c,IAAF,EAAQ3hB,QAAR,EAAkB4hB,cAAciX,GAAhC,KAAwCj0B,OAA5C;;AAEA;AACA;AACA5E,aAAW84B,OAAO94B,QAAP,IAAmB,CAAnB,GAAuB84B,OAAO94B,QAAP,CAAvB,GAA0C,GAArD;AACA64B,QAAMC,OAAOD,GAAP,IAAc,CAAC,CAAf,GAAmBC,OAAOD,GAAP,CAAnB,GAAiC,EAAvC;;AAEA;AACA,MAAIE,KAAJ;AACA,OAAK,MAAMC,UAAX,IAAyBziB,QAAQgT,WAAjC,EAA8C;AAC5C;AACA;AACA;AACA,UAAM7c,QAAQ,MAAM,mBAAK,CAACssB,UAAD,EAAa,UAAb,CAAL,CAApB;AACA,QAAItsB,MAAMxN,IAAN,KAAe,OAAnB,EAA4B;AAC1B65B,cAAQC,UAAR;AACA;AACD;AACF;;AAED,QAAMC,SAAS,MAAM,mBAAK,CAACF,KAAD,EAAQ,WAAR,CAAL,CAArB;AACA,QAAMlW,UAAU,IAAIqW,YAAJ,EAAhB;;AAEA;AACA,QAAMjmB,SAAS4P,QAAQsW,uBAAR,CAAgCF,MAAhC,CAAf;;AAEA;;;;AAIA,QAAMG,OAAOvW,QAAQwW,4BAAR,EAAb;AACA;AACApmB,SAAO3J,OAAP,CAAe8vB,IAAf;;AAEA;AACA;AACA;AACA,QAAME,WAAWF,KAAKH,MAAL,CAAYM,cAAZ,GAA6B,CAA7B,CAAjB;AACA,QAAM,mBAAK,CAAChjB,QAAQijB,IAAT,EAAe,cAAf,CAAL,EAAqCF,QAArC,EAA+C,EAAEzX,SAASkX,MAAMzZ,EAAjB,EAA/C,CAAN;;AAEA;AACA,QAAM,mBAAKma,QAAL,EAAe5W,OAAf,EAAwBuW,IAAxB,EAA8BzX,IAA9B,EAAoC,EAAE3hB,QAAF,EAAY64B,GAAZ,EAApC,CAAN;;AAEA;AACA;AACA,QAAM,mBAAK,CAACtiB,QAAQijB,IAAT,EAAe,cAAf,CAAL,EAAqCT,MAAMA,KAA3C,EAAkD,EAAElX,SAASyX,SAASha,EAApB,EAAlD,CAAN;;AAEA;AACAuD,UAAQ4S,KAAR;;AAEA,SAAO,IAAP;AACD;;AAED;;;;;;;;;;;AAWA,UAAWgE,QAAX,CAAqB5W,OAArB,EAA8B6W,UAA9B,EAA0CC,KAA1C,EAAiD/0B,OAAjD,EAA0D;AACxD;;;;;;;;;;;;;;;AAeA;;;AAGA;AACA,QAAMg1B,cAAc,CAAC/W,QAAQgX,gBAAR,EAAD,EAA6BhX,QAAQgX,gBAAR,EAA7B,CAApB;AACAD,cAAY,CAAZ,EAAe15B,IAAf,GAAsB,MAAtB;AACA05B,cAAY,CAAZ,EAAe15B,IAAf,GAAsB,MAAtB;;AAEA;;;;AAIA,QAAM45B,UAAUjX,QAAQkX,UAAR,EAAhB;AACAH,cAAY,CAAZ,EAAetwB,OAAf,CAAuBwwB,OAAvB;AACAF,cAAY,CAAZ,EAAetwB,OAAf,CAAuBwwB,OAAvB;AACAA,UAAQE,IAAR,CAAa99B,KAAb,GAAqB,GAArB;;AAEA;AACA;AACA49B,UAAQxwB,OAAR,CAAgBowB,UAAhB;;AAEA;AACA;AACA;AACA;AACAI,UAAQxwB,OAAR,CAAgBuZ,QAAQxC,WAAxB;;AAEA;;;;AAIA;;;;;;;AAOA,WAAS4Z,YAAT,CAAuBtY,IAAvB,EAA6BuY,KAA7B,EAAoCC,GAApC,EAAyC;AACvCP,gBAAY,CAAZ,EAAeQ,SAAf,CAAyBC,cAAzB,CAAwC1Y,KAAK,CAAL,CAAxC,EAAiDuY,KAAjD;AACAN,gBAAY,CAAZ,EAAeQ,SAAf,CAAyBC,cAAzB,CAAwC,CAAxC,EAA2CH,QAAQC,GAAnD;;AAEAP,gBAAY,CAAZ,EAAeQ,SAAf,CAAyBC,cAAzB,CAAwC1Y,KAAK,CAAL,CAAxC,EAAiDuY,KAAjD;AACAN,gBAAY,CAAZ,EAAeQ,SAAf,CAAyBC,cAAzB,CAAwC,CAAxC,EAA2CH,QAAQC,GAAnD;AACD;;AAED,QAAMG,eAAe5B,WAAWiB,KAAX,EAAkB/mB,GAAlB,CAAsB6lB,WAAtB,CAArB;;AAEA;AACA,QAAM0B,MAAMv1B,QAAQ5E,QAAR,GAAmB,IAA/B;AACA,QAAM64B,MAAMj0B,QAAQi0B,GAAR,GAAc,IAA1B;;AAEA,MAAI0B,YAAY1X,QAAQ2X,WAAxB;AACA,OAAK,IAAI39B,IAAI,CAAb,EAAgBA,IAAIy9B,aAAa79B,MAAjC,EAAyCI,GAAzC,EAA8C;AAC5Co9B,iBAAaK,aAAaz9B,CAAb,CAAb,EAA8B09B,SAA9B,EAAyCJ,GAAzC;;AAEAI,gBAAYA,YAAYJ,GAAZ,GAAkBtB,GAA9B;AACD;;AAED;AACAe,cAAY,CAAZ,EAAeM,KAAf;AACAN,cAAY,CAAZ,EAAeM,KAAf;;AAEA;;;;AAIA;AACA,QAAMO,WAAWH,aAAa79B,MAA9B;AACA,QAAMi+B,YAAYD,YAAY71B,QAAQ5E,QAAR,GAAmB4E,QAAQi0B,GAAvC,CAAlB;AACA,QAAM,oBAAM6B,SAAN,CAAN;;AAEA;AACAZ,UAAQjyB,UAAR;AACA+xB,cAAY,CAAZ,EAAee,IAAf;AACAf,cAAY,CAAZ,EAAe/xB,UAAf;AACA+xB,cAAY,CAAZ,EAAee,IAAf;AACAf,cAAY,CAAZ,EAAe/xB,UAAf;AACD;;AAED;;;;;;;;;;;;;AAaO,SAAS2wB,iBAAT,CAA4BoC,SAA5B,EAAuC;AAC5C,QAAM9M,MAAM6J,uBAAaC,KAAb,CAAmBgD,SAAnB,CAAZ;;AAEA,QAAMC,WAAW/M,IAAI5W,KAAJ,CACdxY,MADc,CACPwY,SAASA,MAAMhX,IAAN,KAAe,OADjB,EAEd83B,IAFc,CAET9gB,SAAS;AACb,WAAOA,MAAM4jB,GAAN,CAAU9C,IAAV,CAAe8C,OAAOA,IAAIC,KAAJ,KAAc,iBAApC,CAAP;AACD,GAJc,CAAjB;;AAMA,SAAOF,QAAP;AACD;;AAED;;;;;;AAMO,SAASpC,WAAT,CAAsB9W,IAAtB,EAA4B;AACjC,MAAI,OAAOA,IAAP,KAAgB,QAAhB,IAA4BA,KAAKllB,MAAL,GAAc,CAA9C,EAAiD;AAC/C,UAAM,IAAIqtB,KAAJ,CAAU,8BAAV,CAAN;AACD;;AAED,UAAQnI,IAAR;AACE,SAAK,GAAL;AACE,aAAO,CAAC,KAAD,EAAQ,MAAR,CAAP;AACF,SAAK,GAAL;AACE,aAAO,CAAC,KAAD,EAAQ,MAAR,CAAP;AACF,SAAK,GAAL;AACE,aAAO,CAAC,KAAD,EAAQ,MAAR,CAAP;AACF,SAAK,GAAL;AACE,aAAO,CAAC,KAAD,EAAQ,MAAR,CAAP;AACF,SAAK,GAAL;AACE,aAAO,CAAC,KAAD,EAAQ,MAAR,CAAP;AACF,SAAK,GAAL;AACE,aAAO,CAAC,KAAD,EAAQ,MAAR,CAAP;AACF,SAAK,GAAL;AACE,aAAO,CAAC,KAAD,EAAQ,MAAR,CAAP;AACF,SAAK,GAAL;AACE,aAAO,CAAC,KAAD,EAAQ,MAAR,CAAP;AACF,SAAK,GAAL;AACE,aAAO,CAAC,KAAD,EAAQ,MAAR,CAAP;AACF,SAAK,GAAL;AACE,aAAO,CAAC,KAAD,EAAQ,MAAR,CAAP;AACF,SAAK,GAAL;AACE,aAAO,CAAC,KAAD,EAAQ,MAAR,CAAP;AACF,SAAK,GAAL;AACE,aAAO,CAAC,KAAD,EAAQ,MAAR,CAAP;AAxBJ;AA0BD;;AAED;;;;;;AAMO,SAAS+W,UAAT,CAAqB/W,IAArB,EAA2B;AAChC,QAAMqZ,UAAUrZ,KAAKqI,KAAL,CAAW,SAAX,CAAhB;AACA,MAAI,CAACgR,OAAD,IAAYA,QAAQ,CAAR,MAAerZ,IAA/B,EAAqC;AACnC,UAAM,IAAImI,KAAJ,CAAU,6BAAV,CAAN;AACD;;AAED,SAAOnI,KAAK7T,KAAL,CAAW,EAAX,CAAP;AACD,C;;;;;;;;;;;;;QC3WiB0N,Q,GAAAA,Q;QA+HAW,U,GAAAA,U;QAkMAE,U,GAAAA,U;QAyDAG,U,GAAAA,U;QA+CAwB,W,GAAAA,W;;AA3clB;;AACA;;AACA;;AACA;;AACA;;AAGA;;AACA;;AAGA;;AAGA;;AAEA;;;;;;;;;;;;;;;;;;;;AANA;;;AAJA;AA4BO,UAAWxC,QAAX,CAAqB8Q,IAArB,EAA2BzrB,MAA3B,EAAmC;AACxC,QAAMwwB,WAAW/E,KAAK+E,QAAtB;;AAEA,QAAM3xB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6BxE,OAAOmF,OAAP,CAAesZ,EAA5C,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,+BAAT;;AAEA;AACA,QAAMmZ,mBAAmB;AACvBc,WAAO1f,OAAOmF,OAAP,CAAeyZ,gBAAf,CAAgCc,KADhB;AAEvBE,WAAO5f,OAAOmF,OAAP,CAAeyZ,gBAAf,CAAgCgB,KAFhB;AAGvBE,iBAAa9f,OAAOmF,OAAP,CAAeyZ,gBAAf,CAAgCkB;AAHtB,GAAzB;;AAMA,QAAM2T,WAAW,MAAM,qBAAOjL,sBAAP,CAAvB;AACA,QAAM3J,cAAc,MAAM,qBAAO0J,qBAAP,CAA1B;;AAEA,QAAMjB,YAAY,uCAAuBtnB,OAAOmF,OAAP,CAAemiB,SAAtC,CAAlB;;AAEA,QAAM,EAAEpnB,KAAF,EAASk6B,QAAT,EAAmB9qB,SAAnB,EAA8B+qB,QAA9B,KAA2C,MAAM,mBAAKC,oBAAL,EAAgB7O,IAAhB,EAAsB7M,gBAAtB,EAAwC;AAC7FwH,kBAAcvH,YAAYuH,YADmE;AAE7FqN,YAF6F;AAG7FnM,aAH6F;AAI7FL,kBAAcjnB,OAAOmF,OAAP,CAAe8hB,YAJgE;AAK7F/R,YAAQlV,OAAOmF,OAAP,CAAesZ,EALsE;AAM7F;AACAoM,oBAAgBhM,YAAYgM,cAPiE;AAQ7FP,wBAAoBzL,YAAYyL,kBAR6D;AAS7FiQ,wBAAoB1b,YAAY0b,kBAT6D;AAU7FhQ,mBAAe1L,YAAY0L,aAVkE;AAW7FK,oBAAgB/L,YAAY+L;AAXiE,GAAxC,CAAvD;;AAcA;AACA;AACA,MAAI1qB,KAAJ,EAAW;AACTrB,QAAI4G,IAAJ,CAAU,wCAAuC8M,uBAAYQ,KAAM,GAAnE;AACA,UAAM,kBACJmM,qBAAYpE,cAAZ,CAA2B9a,OAAOmF,OAAP,CAAesZ,EAA1C,EAA8C;AAC5C5S,aAAO0G,uBAAYQ,KADyB;AAE5C7S,aAAOA;AAFqC,KAA9C,CADI,CAAN;;AAOA;AACD;;AAED,QAAM4sB,WAAW;AACfrO,QAAIze,OAAOmF,OAAP,CAAesZ,EADJ;AAEfyB,wBAAoBlgB,OAAOmF,OAAP,CAAe+a,kBAFpB;AAGf1a,iBAAaxF,OAAOmF,OAAP,CAAeK,WAHb;AAIfia,UAAMzf,OAAOmF,OAAP,CAAesa,IAJN;AAKf2H,aAASpnB,OAAOmF,OAAP,CAAeiiB,OALT;AAMf8F,WAAOkN,QANQ;AAOftT,iBAAa9mB,OAAOmF,OAAP,CAAe2hB,WAAf,GAA6B9mB,OAAOmF,OAAP,CAAe2hB,WAA5C,GAA0D,EAPxD;AAQfhI,sBAAkB9e,OAAOmF,OAAP,CAAe2Z;AARlB,GAAjB;;AAWA,QAAMpZ,WAAW,MAAM,mBAAK8qB,SAASzE,aAAd,EAA6Be,QAA7B,CAAvB;;AAEA,MAAI,CAACpnB,SAASxF,KAAd,EAAqB;AACnBrB,QAAI4G,IAAJ,CAAU,yCAAwC8M,uBAAYE,SAAU,gCAAxE;AACA,UAAM,kBACJyM,qBAAYrE,eAAZ,CAA4B7a,OAAOmF,OAAP,CAAesZ,EAA3C,EAA+C;AAC7C5S,aAAO0G,uBAAYE,SAD0B;AAE7C;AACA4U,sBAAgB3hB,SAAS2hB,cAHoB;AAI7C;AACA7R,uBAAiBlG,SAL4B;AAM7C;AACA+qB,gBAAUA,QAPmC;AAQ7C;AACA/S,eAT6C;AAU7C;AACAR,mBAAa9mB,OAAOmF,OAAP,CAAe2hB,WAXiB;AAY7C;AACAhI,wBAAkB9e,OAAOmF,OAAP,CAAe2Z;AAbY,KAA/C,CADI,CAAN;AAiBD,GAnBD,MAmBO;AACLjgB,QAAI4G,IAAJ,CAAS,uEAAT;AACA;AACA;AACA;AACA;AACA,UAAM,mBAAK+0B,kBAAL,EAAgB/O,KAAKxW,MAArB,EAA6B3F,SAA7B,CAAN;;AAEA,UAAM,kBACJ4P,qBAAYpE,cAAZ,CAA2B9a,OAAOmF,OAAP,CAAesZ,EAA1C,EAA8C;AAC5C5S,aAAO0G,uBAAYQ,KADyB;AAE5C7S,aAAOwF,SAASxF;AAF4B,KAA9C,CADI,CAAN;AAMD;AACF;;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AApHA;AAtBA;;;;;;;;AAQA;AAkKO,UAAWob,UAAX,CAAuBmQ,IAAvB,EAA6BzrB,MAA7B,EAAqC;AAC1C,QAAMwwB,WAAW/E,KAAK+E,QAAtB;;AAEA,QAAM3xB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6BxE,OAAOmF,OAAP,CAAesZ,EAA5C,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,0BAAT;;AAEA,QAAM6rB,eAAe,MAAM,qBAAOlc,sBAAP,EAAoBpV,OAAOmF,OAAP,CAAesZ,EAAnC,CAA3B;AACA,MAAI,CAAC6S,YAAL,EAAmB;AACjB;AACAzyB,QAAIqB,KAAJ,CAAW,eAAcF,OAAOmF,OAAP,CAAesZ,EAAG,aAA3C;AACA;AACD;;AAED;AACA,QAAMgc,aAAa,MAAM,mBAAK1lB,wBAAL,EAAwB/U,OAAOmF,OAAP,CAAesZ,EAAvC,EAA2C;AAClE5S,WAAO0G,uBAAYI,OAD+C;AAElEuU,eAAW;AAFuD,GAA3C,CAAzB;AAIA,MAAIuT,UAAJ,EAAgB;AACd57B,QAAI+L,KAAJ,CAAW,oDAAmD6vB,WAAW31B,OAAQ,EAAjF;AACA,UAAM,kBACJoa,qBAAY3D,gBAAZ,CAA6Bvb,OAAOmF,OAAP,CAAesZ,EAA5C,EAAgD;AAC9Cve,aAAOu6B;AADuC,KAAhD,CADI,CAAN;AAKA;AACD;;AAED,QAAMnT,YAAY,uCAAuBtnB,OAAOmF,OAAP,CAAemiB,SAAtC,CAAlB;AACA,QAAM1I,mBAAmB;AACvBc,WAAO1f,OAAOmF,OAAP,CAAeyZ,gBAAf,CAAgCc,KADhB;AAEvBE,WAAO5f,OAAOmF,OAAP,CAAeyZ,gBAAf,CAAgCgB,KAFhB;AAGvBE,iBAAa9f,OAAOmF,OAAP,CAAeyZ,gBAAf,CAAgCkB;AAHtB,GAAzB;;AAMA,MAAI4a,UAAJ,EAAgB5N,QAAhB,EAA0B1sB,SAA1B;AACA,MAAIkxB,aAAa3L,WAAjB,EAA8B;AAC5B;;;;;AAKA9mB,QAAI+L,KAAJ,CAAU,6CAAV;;AAEA,UAAM6oB,WAAW,MAAM,qBAAOjL,sBAAP,CAAvB;AACA,UAAM3J,cAAc,MAAM,qBAAO0J,qBAAP,CAA1B;;AAEA;AACAmS,iBAAa,MAAM,mBAAKJ,oBAAL,EAAgB7O,IAAhB,EAAsB7M,gBAAtB,EAAwC;AACzDwH,oBAAcvH,YAAYuH,YAD+B;AAEzDqN,cAFyD;AAGzDnM,eAHyD;AAIzDL,oBAAcjnB,OAAOmF,OAAP,CAAe8hB,YAJ4B;AAKzD;AACA4D,sBAAgBhM,YAAYgM,cAN6B;AAOzDP,0BAAoBzL,YAAYyL,kBAPyB;AAQzDiQ,0BAAoB1b,YAAY0b,kBARyB;AASzDhQ,qBAAe1L,YAAY0L,aAT8B;AAUzDK,sBAAgB/L,YAAY+L;AAV6B,KAAxC,CAAnB;;AAaA,QAAI8P,WAAWx6B,KAAf,EAAsB;AACpBrB,UAAI4G,IAAJ,CAAS,iCAAT;AACA,YAAM,kBACJyZ,qBAAY3D,gBAAZ,CACEvb,OAAOmF,OAAP,CAAesZ,EADjB,EAEE;AACEve,eAAOw6B,WAAWx6B;AADpB,OAFF,EAKE;AACEylB,qBAAa2L,aAAa3L;AAD5B,OALF,CADI,CAAN;AAWA;AACD;;AAEDmH,eAAW;AACT1M,cAAQsa,WAAWN,QADV;AAET/S,sBAAgBiK,aAAajK,cAFpB;AAGTvI,wBAAkB9e,OAAOmF,OAAP,CAAe2Z;;AAGnC;AACA;AAPW,KAAX,CAQA1e,YAAYmS,uBAAYI,OAAxB;AACD,GAlDD,MAkDO;AACL;;;;AAIA;AACA,UAAMgoB,iBAAiB;AACrBrrB,iBAAWgiB,aAAa9b,eADH;AAErB8R,eAFqB;AAGrBL,oBAAcjnB,OAAOmF,OAAP,CAAe8hB,YAHR;AAIrB/R,cAAQoc,aAAa7S;AAJA,KAAvB;AAMAic,iBAAa,MAAM,mBAAKE,8BAAL,EAA0BnP,IAA1B,EAAgC7M,gBAAhC,EAAkD+b,cAAlD,CAAnB;;AAEA,QAAID,WAAWx6B,KAAf,EAAsB;AACpBrB,UAAI4G,IAAJ,CAAS,iCAAT;AACA,YAAM,kBACJyZ,qBAAY3D,gBAAZ,CACEvb,OAAOmF,OAAP,CAAesZ,EADjB,EAEE;AACEve,eAAOw6B,WAAWx6B;AADpB,OAFF,EAKE;AACEylB,qBAAa2L,aAAa3L;AAD5B,OALF,CADI,CAAN;AAWA;AACD;;AAEDmH,eAAW;AACTrO,UAAI6S,aAAa7S,EADR;AAET2B,cAAQsa,WAAWG,SAFV;AAGTxT,sBAAgBiK,aAAajK,cAHpB;AAITvI,wBAAkB9e,OAAOmF,OAAP,CAAe2Z;;AAGnC;AAPW,KAAX,CAQA1e,YAAYmS,uBAAYM,SAAxB;AACD;;AAED;AACA,QAAMnN,WAAW,MAAM,mBAAK8qB,SAASrE,aAAd,EAA6BW,QAA7B,CAAvB;;AAEA,MAAI,CAACpnB,SAASxF,KAAd,EAAqB;AACnB,QAAIoxB,aAAa3L,WAAjB,EAA8B;AAC5B9mB,UAAI4G,IAAJ,CAAU,mDAAkDrF,SAAU,4CAAtE;AACD,KAFD,MAEO;AACLvB,UAAI4G,IAAJ,CAAU,wCAAuCrF,SAAU,GAA3D;AACD;;AAED,UAAM,kBACJ8e,qBAAY3D,gBAAZ,CACEvb,OAAOmF,OAAP,CAAesZ,EADjB,EAEE;AACE5S,aAAOzL,SADT;AAEE;AACAomB,iBAAW7kB,KAAKD,GAAL,EAHb;AAIE;AACA24B,gBAAUK,WAAWL,QALvB;AAME;AACA7kB,uBAAiBklB,WAAWprB,SAP9B;AAQE;AACAsP,sBATF;AAUE;AACA0I,eAXF;AAYE;AACAxI,wBAAkB9e,OAAOmF,OAAP,CAAe2Z;AAbnC,KAFF,EAiBE;AACE6G,mBAAa2L,aAAa3L;AAD5B,KAjBF,CADI,CAAN;AAuBD,GA9BD,MA8BO;AACL9mB,QAAI4G,IAAJ,CAAS,wBAAT;AACA,UAAM,kBACJyZ,qBAAY3D,gBAAZ,CACEvb,OAAOmF,OAAP,CAAesZ,EADjB,EAEE;AACEve,aAAOwF,SAASxF;AADlB,KAFF,EAKE;AACEylB,mBAAa2L,aAAa3L;AAD5B,KALF,CADI,CAAN;AAWD;AACF;;AAED;;;;;;;;;;;;;;;;;;AAkBO,UAAWnK,UAAX,CAAuBiQ,IAAvB,EAA6BzrB,MAA7B,EAAqC;AAC1C,QAAM,EAAEiV,MAAF,EAAUub,QAAV,KAAuB/E,IAA7B;;AAEA,QAAM5sB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6BxE,OAAOmF,OAAP,CAAesZ,EAA5C,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,0BAAT;;AAEA,QAAM6rB,eAAe,MAAM,qBAAOlc,sBAAP,EAAoBpV,OAAOmF,OAAP,CAAesZ,EAAnC,CAA3B;;AAEA;AACA,QAAMgc,aAAa,MAAM,mBAAK1lB,wBAAL,EAAwB/U,OAAOmF,OAAP,CAAesZ,EAAvC,EAA2C;AAClE5S,WAAO0G,uBAAYI,OAD+C;AAElEuU,eAAW7S,0BAAeC;AAFwC,GAA3C,CAAzB;;AAKA,MAAImmB,UAAJ,EAAgB;AACd57B,QAAI4G,IAAJ,CAAU,oCAAmCg1B,WAAW31B,OAAQ,GAAhE;AACA;AACA,UAAM,kBAAIoa,qBAAYzD,gBAAZ,CAA6Bzb,OAAOmF,OAAP,CAAesZ,EAA5C,EAAgD,EAAEve,OAAOu6B,UAAT,EAAhD,CAAJ,CAAN;AACA;AACD;;AAED,QAAM,mBAAKD,kBAAL,EAAgBvlB,MAAhB,EAAwBqc,aAAa9b,eAArC,CAAN;;AAEA;AACA,QAAMsX,WAAW;AACfzF,oBAAgBiK,aAAajK;AADd,GAAjB;AAGA,QAAM3hB,WAAW,MAAM,mBAAK8qB,SAASpE,aAAd,EAA6BU,QAA7B,CAAvB;;AAEA,MAAI,CAACpnB,SAASxF,KAAd,EAAqB;AACnBrB,QAAI4G,IAAJ,CAAS,wBAAT;AACA,UAAM,kBAAIyZ,qBAAYzD,gBAAZ,CAA6Bzb,OAAOmF,OAAP,CAAesZ,EAA5C,CAAJ,CAAN;AACD,GAHD,MAGO;AACL5f,QAAI4G,IAAJ,CAAU,wCAAuC8M,uBAAYQ,KAAM,GAAnE;AACA,UAAM,kBACJmM,qBAAYzD,gBAAZ,CAA6Bzb,OAAOmF,OAAP,CAAesZ,EAA5C,EAAgD;AAC9Cve,aAAOwF,SAASxF;AAD8B,KAAhD,CADI,CAAN;AAKD;AACF;;AAED;;;;;;;;;;;;;;;AAeO,UAAWyb,UAAX,CAAuB8P,IAAvB,EAA6BzrB,MAA7B,EAAqC;AAC1C,QAAM,EAAEiV,MAAF,KAAawW,IAAnB;;AAEA,QAAM5sB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6BxE,OAAOmF,OAAP,CAAesZ,EAA5C,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,yBAAT;;AAEA;AACA,QAAMg1B,aAAa,MAAM,mBAAK1lB,wBAAL,EAAwB/U,OAAOmF,OAAP,CAAesZ,EAAvC,EAA2C;AAClE5S,WAAO0G,uBAAYI,OAD+C;AAElEuU,eAAW7S,0BAAeC;AAFwC,GAA3C,CAAzB;;AAKA,MAAImmB,UAAJ,EAAgB;AACd57B,QAAI4G,IAAJ,CAAU,oCAAmCg1B,WAAW31B,OAAQ,GAAhE;AACA;AACA,UAAM,kBAAIoa,qBAAYtD,gBAAZ,CAA6B5b,OAAOmF,OAAP,CAAesZ,EAA5C,EAAgD,EAAEve,OAAOu6B,UAAT,EAAhD,CAAJ,CAAN;AACA;AACD;;AAED,QAAMtlB,aAAa,MAAM,qBAAOC,sBAAP,EAAoBpV,OAAOmF,OAAP,CAAesZ,EAAnC,CAAzB;;AAEA;AACA;AACA,QAAM,mBAAK+b,kBAAL,EAAgBvlB,MAAhB,EAAwBE,WAAWK,eAAnC,CAAN;;AAEA3W,MAAI4G,IAAJ,CAAU,uCAAsC8M,uBAAYQ,KAAM,GAAlE;AACA;AACA,QAAM,kBAAImM,qBAAYtD,gBAAZ,CAA6BzG,WAAWsJ,EAAxC,CAAJ,CAAN;AACD;;AAED;;;;;;;;;;;;;;;;;AAiBO,UAAWtB,WAAX,CAAwBsO,IAAxB,EAA8BzrB,MAA9B,EAAsC;AAC3C,QAAM,EAAEiV,MAAF,EAAUub,QAAV,KAAuB/E,IAA7B;;AAEA,QAAM5sB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6BxE,OAAOmF,OAAP,CAAesZ,EAA5C,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,2BAAT;;AAEA,QAAM6rB,eAAe,MAAM,qBAAOlc,sBAAP,EAAoBpV,OAAOmF,OAAP,CAAesZ,EAAnC,CAA3B;;AAEA;AACA,QAAMgc,aAAa,MAAM,mBAAK1lB,wBAAL,EAAwB/U,OAAOmF,OAAP,CAAesZ,EAAvC,EAA2C;AAClE5S,WAAO0G,uBAAYI,OAD+C;AAElEuU,eAAW7S,0BAAeC;AAFwC,GAA3C,CAAzB;;AAKA,MAAImmB,UAAJ,EAAgB;AACd57B,QAAI4G,IAAJ,CAAU,qCAAoCg1B,WAAW31B,OAAQ,GAAjE;AACA;AACA,UAAM,kBAAIoa,qBAAY9B,iBAAZ,CAA8Bpd,OAAOmF,OAAP,CAAesZ,EAA7C,EAAiD,EAAEve,OAAOu6B,UAAT,EAAjD,CAAJ,CAAN;AACA;AACD;;AAED;AACA,QAAM3N,WAAW;AACfzF,oBAAgBiK,aAAajK,cADd;AAEf0G,aAAS/tB,OAAOmF,OAAP,CAAeqa;AAFT,GAAjB;AAIA,QAAM9Z,WAAW,MAAM,mBAAK8qB,SAASnE,cAAd,EAA8BS,QAA9B,CAAvB;;AAEA,MAAIpnB,SAASxF,KAAb,EAAoB;AAClBrB,QAAI4G,IAAJ,CAAS,yBAAT;AACA,UAAM,kBACJyZ,qBAAY9B,iBAAZ,CAA8Bpd,OAAOmF,OAAP,CAAesZ,EAA7C,EAAiD;AAC/Cve,aAAOwF,SAASxF;AAD+B,KAAjD,CADI,CAAN;AAKA;AACD;;AAED,QAAM,mBAAKs6B,kBAAL,EAAgBvlB,MAAhB,EAAwBqc,aAAa9b,eAArC,CAAN;;AAEA3W,MAAI4G,IAAJ,CAAU,yCAAwC8M,uBAAYQ,KAAM,GAApE;AACA,QAAM,kBAAImM,qBAAY9B,iBAAZ,CAA8Bpd,OAAOmF,OAAP,CAAesZ,EAA7C,CAAJ,CAAN;AACD,C;;;;;;;;;;;;;;;;;;;;;;QC1ciB5C,O,GAAAA,O;QA+DAmX,kB,GAAAA,kB;QAmGAC,c,GAAAA,c;QAqFA7W,oB,GAAAA,oB;QAiFAa,Q,GAAAA,Q;QAsIAV,Q,GAAAA,Q;QA6GAG,W,GAAAA,W;QAiHAgU,sB,GAAAA,sB;QAkCA7T,W,GAAAA,W;QAmGAJ,a,GAAAA,a;QA0CAG,gB,GAAAA,gB;QA+DAY,c,GAAAA,c;QA6DAH,oB,GAAAA,oB;QAkFA3e,I,GAAAA,I;QAoJAkf,Y,GAAAA,Y;;AAzuClB;;AACA;;AACA;;AAGA;;AACA;;AAGA;;AACA;;;;AACA;;AACA;;AAGA;;AACA;;AAGA;;AACA;;AAGA;;AACA;;AACA;;;;;;AAjCA;;;;;;;AAOA;AA4BA,MAAM/e,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,CAAZ;;AAEA;;;;;;;;;;;;;;;;;AAPA;;;AAJA;;;AAJA;;;AANA;;;AAJA;AAwCO,UAAWqX,OAAX,CAAoB4P,IAApB,EAA0BzrB,MAA1B,EAAkC;AACvC,QAAM,EAAEiV,MAAF,EAAUub,QAAV,KAAuB/E,IAA7B;AACA,QAAM,EAAEhN,EAAF,KAASze,OAAOmF,OAAtB;;AAEA,QAAMtG,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6Bia,EAA7B,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,cAAT;;AAEA;AACA,QAAMg1B,aAAa,MAAM,mBAAK1lB,wBAAL,EAAwB/U,OAAOmF,OAAP,CAAesZ,EAAvC,EAA2C,EAA3C,CAAzB;AACA,MAAIgc,UAAJ,EAAgB;AACd57B,QAAI+L,KAAJ,CAAW,mBAAkB6vB,WAAW31B,OAAQ,EAAhD;AACA,UAAM,kBACJoa,qBAAYpD,aAAZ,CAA0B2C,EAA1B,EAA8B;AAC5BoG,eAAS,IADmB;AAE5B3kB,aAAOu6B;AAFqB,KAA9B,CADI,CAAN;AAMA;AACD;;AAED,QAAM,EAAEpT,cAAF,EAAkB7R,eAAlB,EAAmChQ,WAAnC,EAAgD4hB,OAAhD,KAA4D,MAAM,qBAAOhS,sBAAP,EAAoBqJ,EAApB,CAAxE;;AAEA;AACA,QAAM,mBAAK+b,kBAAL,EAAgBvlB,MAAhB,EAAwBO,eAAxB,CAAN;;AAEA;AACA,QAAM9P,WAAW,MAAM,mBAAK8qB,SAAStE,UAAd,EAA0B,EAAE7E,cAAF,EAAkB7hB,WAAlB,EAA+B4hB,OAA/B,EAA1B,CAAvB;;AAEAvoB,MAAI4G,IAAJ,CAAU,qCAAoC8M,uBAAYQ,KAAM,GAAhE;AACA,MAAI,CAACrN,SAASxF,KAAd,EAAqB;AACnB,UAAM,kBAAIgf,qBAAYpD,aAAZ,CAA0B2C,EAA1B,EAA8B,EAAEoG,SAAS,IAAX,EAA9B,CAAJ,CAAN;AACD,GAFD,MAEO;AACL,UAAM,kBACJ3F,qBAAYpD,aAAZ,CAA0B2C,EAA1B,EAA8B;AAC5BoG,eAAS,IADmB;AAE5B3kB,aAAOwF,SAASxF;AAFY,KAA9B,CADI,CAAN;AAMD;AACF;;AAED;;;;;;;;;;;;;;;;;;;;;;AAsBO,UAAW8yB,kBAAX,CAA+BvH,IAA/B,EAAqCzrB,MAArC,EAA6C;AAClD,QAAMwwB,WAAW/E,KAAK+E,QAAtB;;AAEA,QAAM3xB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6BxE,OAAOmF,OAAP,CAAesZ,EAA5C,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,eAAT;;AAEA;AACA,QAAMg1B,aAAa,MAAM,mBAAK1lB,wBAAL,EAAwB/U,OAAOmF,OAAP,CAAesZ,EAAvC,EAA2C,EAAEiG,WAAW,KAAb,EAA3C,CAAzB;AACA,MAAI+V,UAAJ,EAAgB;AACd57B,QAAI+L,KAAJ,CAAW,uBAAsB6vB,WAAW31B,OAAQ,EAApD;AACA,UAAM,kBACJoa,qBAAYlD,cAAZ,CAA2Bhc,OAAOmF,OAAP,CAAesZ,EAA1C,EAA8C;AAC5CmH,aAAO,IADqC;AAE5C1lB,aAAOu6B;AAFqC,KAA9C,CADI,CAAN;AAMA;AACD;;AAED,QAAMtlB,aAAa,MAAM,qBAAOC,sBAAP,EAAoBpV,OAAOmF,OAAP,CAAesZ,EAAnC,CAAzB;AACA,QAAM,EAAE4I,cAAF,EAAkB7R,eAAlB,EAAmChQ,WAAnC,EAAgD4hB,OAAhD,EAAyDtI,gBAAzD,KAA8E3J,UAApF;;AAEA;AACA;AACA,QAAM+X,QAAQ,MAAM,mBAClB4N,sBADkB,EAElBrP,IAFkB,EAGlBjW,eAHkB,EAIlB;AACEkK,WAAO,UADT;AAEEE,WAAO;AAFT,GAJkB,EAQlBzK,WAAWmS,SARO,CAApB;;AAWA,MAAI,CAAC4F,KAAL,EAAY;AACVruB,QAAI+L,KAAJ,CAAU,8BAAV;AACA,UAAM,kBACJsU,qBAAYlD,cAAZ,CAA2Bhc,OAAOmF,OAAP,CAAesZ,EAA1C,EAA8C;AAC5CmH,aAAO,IADqC;AAE5C1lB,aAAO,IAAI2E,gBAAJ,CAAe;AACpBmB,cAAMqP,kBAAU0lB,aADI;AAEpBj2B,iBAAS;AAFW,OAAf;AAFqC,KAA9C,CADI,CAAN;AASA;AACD;;AAED,QAAMgoB,WAAW;AACfzF,kBADe;AAEf6F,WAAOA,MAAMD,GAFE;AAGfznB,eAHe;AAIf4hB,WAJe;AAKftI;AALe,GAAjB;;AAQA,QAAMpZ,WAAW,MAAM,mBAAK8qB,SAAS/D,aAAd,EAA6BK,QAA7B,CAAvB;;AAEA,MAAIpnB,SAASxF,KAAb,EAAoB;AAClBrB,QAAI4G,IAAJ,CAAS,sBAAT;AACA,UAAM,kBACJyZ,qBAAYlD,cAAZ,CAA2Bhc,OAAOmF,OAAP,CAAesZ,EAA1C,EAA8C;AAC5CmH,aAAO,IADqC;AAE5C1lB,aAAOwF,SAASxF;AAF4B,KAA9C,CADI,CAAN;AAMD,GARD,MAQO;AACLrB,QAAI4G,IAAJ,CAAS,qEAAT;AACA,UAAM,kBACJyZ,qBAAYpB,gBAAZ,CAA6B9d,OAAOmF,OAAP,CAAesZ,EAA5C,EAAgD;AAC9CuG,iBAAW7P,WAAW2P,OAAX,CAAmBE;AADgB,KAAhD,CADI,CAAN;AAKD;AACF;;AAED;;;;;;;;;;;;;;;;;;;;;;AAsBO,UAAWiO,cAAX,CAA2BxH,IAA3B,EAAiCzrB,MAAjC,EAAyC;AAC9C,QAAMwwB,WAAW/E,KAAK+E,QAAtB;;AAEA,QAAM3xB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6BxE,OAAOmF,OAAP,CAAesZ,EAA5C,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,iBAAT;;AAEA;AACA,QAAMg1B,aAAa,MAAM,mBAAK1lB,wBAAL,EAAwB/U,OAAOmF,OAAP,CAAesZ,EAAvC,EAA2C,EAAEiG,WAAW,IAAb,EAA3C,CAAzB;AACA,MAAI+V,UAAJ,EAAgB;AACd57B,QAAI+L,KAAJ,CAAW,oCAAmC6vB,WAAW31B,OAAQ,EAAjE;AACA,UAAM,kBACJoa,qBAAYhD,gBAAZ,CAA6Blc,OAAOmF,OAAP,CAAesZ,EAA5C,EAAgD;AAC9CmH,aAAO,IADuC;AAE9C1lB,aAAOu6B;AAFuC,KAAhD,CADI,CAAN;AAMA;AACD;;AAED,QAAMtlB,aAAa,MAAM,qBAAOC,sBAAP,EAAoBpV,OAAOmF,OAAP,CAAesZ,EAAnC,CAAzB;AACA,QAAM,EAAE4I,cAAF,EAAkB7R,eAAlB,EAAmChQ,WAAnC,EAAgD4hB,OAAhD,EAAyDtI,gBAAzD,KAA8E3J,UAApF;;AAEA;AACA;AACA,QAAM+X,QAAQ,MAAM,mBAClB4N,sBADkB,EAElBrP,IAFkB,EAGlBjW,eAHkB,EAIlB;AACEkK,WAAO,UADT;AAEEE,WAAO;AAFT,GAJkB,EAQlBzK,WAAWmS,SARO,CAApB;;AAWA,MAAI,CAAC4F,KAAL,EAAY;AACVruB,QAAI+L,KAAJ,CAAU,8CAAV;AACA,UAAM,kBACJsU,qBAAYhD,gBAAZ,CAA6Blc,OAAOmF,OAAP,CAAesZ,EAA5C,EAAgD;AAC9CmH,aAAO,IADuC;AAE9C1lB,aAAO,IAAI2E,gBAAJ,CAAe;AACpBmB,cAAMqP,kBAAU0lB,aADI;AAEpBj2B,iBAAS;AAFW,OAAf;AAFuC,KAAhD,CADI,CAAN;AASA;AACD;;AAED,QAAMgoB,WAAW;AACfzF,kBADe;AAEf6F,WAAOA,MAAMD,GAFE;AAGfznB,eAHe;AAIf4hB,WAJe;AAKftI;AALe,GAAjB;;AAQA,QAAMpZ,WAAW,MAAM,mBAAK8qB,SAAS/D,aAAd,EAA6BK,QAA7B,CAAvB;;AAEA,MAAIpnB,SAASxF,KAAb,EAAoB;AAClBrB,QAAI4G,IAAJ,CAAS,wBAAT;AACA,UAAM,kBACJyZ,qBAAYhD,gBAAZ,CAA6Blc,OAAOmF,OAAP,CAAesZ,EAA5C,EAAgD;AAC9CmH,aAAO,IADuC;AAE9C1lB,aAAOwF,SAASxF;AAF8B,KAAhD,CADI,CAAN;AAMD,GARD,MAQO;AACLrB,QAAI4G,IAAJ,CAAS,uEAAT;AACA,UAAM,kBACJyZ,qBAAYpB,gBAAZ,CAA6B9d,OAAOmF,OAAP,CAAesZ,EAA5C,EAAgD;AAC9CuG,iBAAW7P,WAAW2P,OAAX,CAAmBE;AADgB,KAAhD,CADI,CAAN;AAKD;AACF;;AAED;;;;;;;;AAQO,UAAW5I,oBAAX,CAAiCqP,IAAjC,EAAuCzrB,MAAvC,EAA+C;AACpD,QAAMwwB,WAAW/E,KAAK+E,QAAtB;;AAEA,QAAM3xB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6BxE,OAAOmF,OAAP,CAAesZ,EAA5C,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,qCAAT;;AAEA;AACA,QAAM0P,aAAa,MAAM,qBAAOC,sBAAP,EAAoBpV,OAAOmF,OAAP,CAAesZ,EAAnC,CAAzB;;AAEA;AACA,MAAI,CAACtJ,UAAL,EAAiB;AACftW,QAAI+L,KAAJ,CAAW,gDAA+C5K,OAAOmF,OAAP,CAAesZ,EAAG,EAA5E;AACA,UAAM,kBACJS,qBAAY7C,0BAAZ,CAAuCrc,OAAOmF,OAAP,CAAesZ,EAAtD,EAA0D;AACxDve,aAAO,IAAI2E,gBAAJ,CAAe;AACpBmB,cAAMqP,kBAAUC,aADI;AAEpBxQ,iBAAU,gDAA+C9E,OAAOmF,OAAP,CAAesZ,EAAG;AAFvD,OAAf;AADiD,KAA1D,CADI,CAAN;AAQA;AACD,GAXD,MAWO,IAAItJ,WAAWtJ,KAAX,KAAqB0G,uBAAYM,SAAjC,IAA8CsC,WAAWtJ,KAAX,KAAqB0G,uBAAYO,OAAnF,EAA4F;AACjGjU,QAAI+L,KAAJ,CAAW,oEAAmEuK,WAAWtJ,KAAM,EAA/F;AACA,UAAM,kBACJqT,qBAAY7C,0BAAZ,CAAuCrc,OAAOmF,OAAP,CAAesZ,EAAtD,EAA0D;AACxDve,aAAO,IAAI2E,gBAAJ,CAAe;AACpBmB,cAAMqP,kBAAUE,aADI;AAEpBzQ,iBAAU,oEAAmEqQ,WAAWtJ,KAAM;AAF1E,OAAf;AADiD,KAA1D,CADI,CAAN;AAQA;AACD;;AAED,QAAM,EAAEwb,cAAF,EAAkB7hB,WAAlB,EAA+B4hB,OAA/B,EAAwCtI,gBAAxC,KAA6D3J,UAAnE;;AAEA,QAAM2X,WAAW;AACfzF,kBADe;AAEf7hB,eAFe;AAGf4hB,WAHe;AAIftI;AAJe,GAAjB;;AAOA,QAAMpZ,WAAW,MAAM,mBAAK8qB,SAASvE,sBAAd,EAAsCa,QAAtC,CAAvB;;AAEA,MAAIpnB,SAASxF,KAAb,EAAoB;AAClBrB,QAAI4G,IAAJ,CAAS,mCAAT;AACA,UAAM,kBACJyZ,qBAAY7C,0BAAZ,CAAuCrc,OAAOmF,OAAP,CAAesZ,EAAtD,EAA0D;AACxDve,aAAOwF,SAASxF;AADwC,KAA1D,CADI,CAAN;AAKD,GAPD,MAOO;AACLrB,QAAI4G,IAAJ,CAAS,qCAAT;AACA,UAAM,kBACJyZ,qBAAY7C,0BAAZ,CAAuCrc,OAAOmF,OAAP,CAAesZ,EAAtD,EAA0D;AACxDve,aAAO;AADiD,KAA1D,CADI,CAAN;AAKD;AACF;;AAED;;;;;;;;;;;;;;;;;;;AAmBO,UAAW+c,QAAX,CAAqBwO,IAArB,EAA2BzrB,MAA3B,EAAmC;AACxC,QAAM,EAAEiV,MAAF,EAAU0W,cAAV,KAA6BF,IAAnC;;AAEA,QAAM5sB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6BxE,OAAOmF,OAAP,CAAesZ,EAA5C,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,0BAAT;;AAEA;AACA,QAAMg1B,aAAa,MAAM,mBAAK1lB,wBAAL,EAAwB/U,OAAOmF,OAAP,CAAesZ,EAAvC,EAA2C,EAA3C,CAAzB;;AAEA,MAAIgc,UAAJ,EAAgB;AACd57B,QAAI+L,KAAJ,CAAW,uBAAsB6vB,WAAW31B,OAAQ,EAApD;;AAEA,UAAM,mBAAK,CAAC9E,OAAOuJ,IAAP,CAAYwV,QAAb,EAAuB,QAAvB,CAAL,EAAuC;AAC3C7e,aAAOu6B,UADoC;AAE3CzZ,eAAShhB,OAAOmF,OAAP,CAAe6b;AAFmB,KAAvC,CAAN;;AAKA,UAAM,kBACJ9B,qBAAYhC,cAAZ,CAA2Bld,OAAOmF,OAAP,CAAesZ,EAA1C,EAA8C;AAC5Cve,aAAOu6B,UADqC;AAE5CzZ,eAAShhB,OAAOmF,OAAP,CAAe6b;AAFoB,KAA9C,CADI,CAAN;AAMA;AACD;;AAED;AACA,QAAM7L,aAAa,MAAM,qBAAOC,sBAAP,EAAoBpV,OAAOmF,OAAP,CAAesZ,EAAnC,CAAzB;;AAEA;AACA,QAAM/I,UAAU,MAAM,mBAAK,CAACT,OAAOU,cAAR,EAAwB,KAAxB,CAAL,EAAqCR,WAAWK,eAAhD,CAAtB;;AAEA,QAAMwL,UAAUhhB,OAAOmF,OAAP,CAAe6b,OAA/B;AACA;AACA,MAAIga,cAAJ;AACA,MAAI;AACFA,qBAAiB,MAAM,mBAAK,CAACtlB,OAAD,EAAU,UAAV,CAAL,EAA4BsL,OAA5B,CAAvB;AACD,GAFD,CAEE,OAAO9gB,KAAP,EAAc;AACdrB,QAAI4G,IAAJ,CAAS,gCAAT;AACA,UAAMw1B,aAAa,IAAIp2B,gBAAJ,CAAe;AAChCmB,YAAMqP,kBAAUwe,aADgB;AAEhC/uB,eAAS5E,MAAM4E;AAFiB,KAAf,CAAnB;;AAKA,UAAM,mBAAK,CAAC9E,OAAOuJ,IAAP,CAAYwV,QAAb,EAAuB,QAAvB,CAAL,EAAuC;AAC3C7e,aAAO+6B;AADoC,KAAvC,CAAN;AAGA,UAAM,kBACJ/b,qBAAYhC,cAAZ,CAA2Bld,OAAOmF,OAAP,CAAesZ,EAA1C,EAA8C;AAC5Cve,aAAO+6B,UADqC;AAE5Cja;AAF4C,KAA9C,CADI,CAAN;AAMD;AACD,MAAIga,cAAJ,EAAoB;AAClBn8B,QAAI4G,IAAJ,CAAS,mCAAT;;AAEA;AACA,UAAMpG,OAAO,gBAAb;AACA,UAAMof,KAAK,oBAAoByc,eAA/B;AACA,UAAM93B,UAAU,0BAAhB;AACA,UAAMqG,WAAW,MAAM,qBAAOoD,uBAAP,CAAvB;;AAEA,QAAIsuB,GAAJ;AACA,QAAI1xB,aAAa7D,sBAAU+H,KAA3B,EAAkC;AAChCwtB,YAAM,qBAAN;AACD,KAFD,MAEO,IAAI1xB,aAAa7D,sBAAUqI,EAA3B,EAA+B;AACpCktB,YAAM,kBAAN;AACD,KAFM,MAEA,IAAI1xB,aAAa7D,sBAAUC,IAA3B,EAAiC;AACtC;AACA,UAAIsP,WAAW3P,WAAf,EAA4B;AAC1B21B,cAAM,sBAAN;AACD,OAFD,MAEO;AACLA,cAAM,oBAAN;AACD;AACF;;AAED;AACA;AACA,UAAMC,UAAUzP,gBAAhB;;AAEA;AACA,UAAM0P,cAAc;AAClB5c,QADkB;AAElBpf,UAFkB;AAGlB87B,SAHkB;AAIlB/3B,aAJkB;AAKlB8R,cAAQlV,OAAOmF,OAAP,CAAesZ;AALL,KAApB;;AAQA,QAAI2c,OAAJ,EAAa;AACXC,kBAAY5xB,QAAZ,GAAuB2xB,QAAQ9P,OAAR,GAAkB,GAAlB,GAAwB8P,QAAQh4B,OAAvD;AACD;;AAED;AACA;AACA,UAAMk4B,OAAON,eAAeO,IAAf,EAAb;AACA,UAAMC,eAAeR,eAAeS,GAAf,CAAmBH,KAAK1vB,IAAL,GAAYvQ,KAA/B,CAArB;AACA,QAAImgC,YAAJ,EAAkB;AAChBH,kBAAYn8B,SAAZ,GAAwBs8B,aAAat8B,SAArC;AACD;AACD;AACA;AACA;AACA,UAAMqS,SAAS,mBAAf;AACAA,WAAOuE,GAAP,CAAW2I,EAAX,EAAe4c,WAAf;AACAL,mBAAe/8B,OAAf,CAAuBy9B,QAAQ;AAC7BnqB,aAAOuE,GAAP,CAAW4lB,KAAKjd,EAAhB,EAAoBid,IAApB;AACD,KAFD;AAGA,UAAM,mBAAK,CAAC17B,OAAOuJ,IAAP,CAAYwV,QAAb,EAAuB,SAAvB,CAAL,EAAwCxN,MAAxC,CAAN;;AAEA,UAAM,kBAAI2N,qBAAYhC,cAAZ,CAA2Bld,OAAOmF,OAAP,CAAesZ,EAA1C,EAA8C,EAAElN,MAAF,EAAUyP,OAAV,EAA9C,CAAJ,CAAN;AACD;AACF;;AAED;;;;;;;;;;;;;;;;;;;AAmBO,UAAWzE,QAAX,CAAqBkP,IAArB,EAA2BzrB,MAA3B,EAAmC;AACxC,QAAMwwB,WAAW/E,KAAK+E,QAAtB;AACA,QAAM,EAAElJ,SAAF,EAAa1I,gBAAb,EAA+BqI,YAA/B,EAA6CxI,EAA7C,KAAoDze,OAAOmF,OAAjE;;AAEA,QAAMtG,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6BxE,OAAOmF,OAAP,CAAesZ,EAA5C,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,uBAAT;;AAEA;AACA,QAAMg1B,aAAa,MAAM,mBAAK1lB,wBAAL,EAAwB0J,EAAxB,EAA4B,EAAE5S,OAAO0G,uBAAYM,SAArB,EAA5B,CAAzB;AACA,MAAI4nB,UAAJ,EAAgB;AACd57B,QAAI+L,KAAJ,CAAW,uBAAsB6vB,WAAW31B,OAAQ,EAApD;AACA,UAAM,kBACJoa,qBAAY1C,cAAZ,CAA2BiC,EAA3B,EAA+B;AAC7BmH,aAAO,IADsB;AAE7B1lB,aAAOu6B;AAFsB,KAA/B,CADI,CAAN;AAMA;AACD;;AAED;AACA,QAAM;AACJjlB,mBADI;AAEJ6R,kBAFI;AAGJC,eAAWqU,aAHP;AAIJn2B,eAJI;AAKJ4hB,WALI;AAMJtC,WANI;AAOJhG;AAPI,MAQF,MAAM,qBAAO1J,sBAAP,EAAoBqJ,EAApB,CARV;;AAUA,QAAMmd,iBAAiB;AACrBlc,WAAO4H,aAAaA,UAAU5H,KAAvB,GAA+B4H,UAAU5H,KAAzC,GAAiDic,cAAcjc,KADjD;AAErBE,WAAO0H,aAAaA,UAAU1H,KAAvB,GAA+B0H,UAAU1H,KAAzC,GAAiD+b,cAAc/b;AAExE;AAJuB,GAAvB,CAKA,MAAM,EAAE1f,KAAF,EAAS+sB,GAAT,EAAc4O,MAAd,KAAyB,MAAM,mBAAKC,uBAAL,EAAqBrQ,IAArB,EAA2B7M,gBAA3B,EAA6C;AAChFtP,eAAWkG,eADqE;AAEhF8R,eAAWsU,cAFqE;AAGhF3U;AAHgF,GAA7C,CAArC;;AAMA,MAAI/mB,KAAJ,EAAW;AACT,UAAM,kBACJgf,qBAAY1C,cAAZ,CAA2BiC,EAA3B,EAA+B;AAC7BmH,aAAO,IADsB;AAE7B1lB,aAAOA;AAFsB,KAA/B,CADI,CAAN;AAMA;AACD;;AAED,QAAM4sB,WAAW;AACfzF,kBADe;AAEf6F,WAAOD,GAFQ;AAGfznB,eAHe;AAIf4hB,WAJe;AAKftI;;AAGF;AARiB,GAAjB,CASA,MAAMpZ,WAAW,MAAM,mBAAK8qB,SAAS/D,aAAd,EAA6BK,QAA7B,CAAvB;;AAEA,MAAIpnB,SAASxF,KAAb,EAAoB;AAClBrB,QAAI4G,IAAJ,CAAS,8BAAT;AACA,UAAM,kBACJyZ,qBAAY1C,cAAZ,CAA2BiC,EAA3B,EAA+B;AAC7BmH,aAAO,IADsB;AAE7B1lB,aAAOwF,SAASxF;AAFa,KAA/B,CADI,CAAN;AAMD,GARD,MAQO;AACL,QAAIygB,SAAS,EAAb;AACAkb,WAAO59B,OAAP,CAAeoY,SAAS;AACtBsK,eAASA,OAAO5hB,MAAP,CAAcsX,MAAMsK,MAAN,CAAa5O,GAAb,CAAiBmmB,SAASA,MAAMzZ,EAAhC,CAAd,CAAT;AACD,KAFD;AAGA5f,QAAI4G,IAAJ,CAAS,qEAAT;AACA,UAAM,kBACJyZ,qBAAYpB,gBAAZ,CAA6BW,EAA7B,EAAiC;AAC/BuG,iBAAWF,QAAQE,SADY;AAE/BgF,qBAAe;AACbpE,eAAO,IADM;AAEbyU,kBAAUwB,OAAO9pB,GAAP,CAAWsE,SAASA,MAAMoI,EAA1B,CAFG;AAGbkC,cAHa;AAIb2G,mBAAWsU;AAJE;AAFgB,KAAjC,CADI,CAAN;AAWD;AACF;;AAED;;;;;;;;;;;;;;;;;;AAkBO,UAAWlf,WAAX,CAAwB+O,IAAxB,EAA8BzrB,MAA9B,EAAsC;AAC3C,QAAMwwB,WAAW/E,KAAK+E,QAAtB;AACA,QAAM,EAAE/R,EAAF,EAAMkC,MAAN,EAAc2G,SAAd,KAA4BtnB,OAAOmF,OAAzC;;AAEA,QAAMtG,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6Bia,EAA7B,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,2BAAT;;AAEA;AACA,MAAI,CAAC,iBAAQkb,MAAR,CAAD,IAAoB,iBAAQA,MAAR,CAAxB,EAAyC;AACvC9hB,QAAI+L,KAAJ,CAAU,mCAAV;AACA,UAAM,kBACJsU,qBAAYvC,iBAAZ,CAA8B8B,EAA9B,EAAkC;AAChCmH,aAAO,IADyB;AAEhC1lB,aAAO,IAAI2E,gBAAJ,CAAe;AACpBmB,cAAMqP,kBAAUC,aADI;AAEpBxQ,iBAAS;AAFW,OAAf;AAFyB,KAAlC,CADI,CAAN;AASA;AACD;;AAED;AACA,QAAM21B,aAAa,MAAM,mBAAK1lB,wBAAL,EAAwB0J,EAAxB,EAA4B,EAAE5S,OAAO0G,uBAAYM,SAArB,EAA5B,CAAzB;AACA,MAAI4nB,UAAJ,EAAgB;AACd57B,QAAI+L,KAAJ,CAAW,wBAAuB6vB,WAAW31B,OAAQ,EAArD;AACA,UAAM,kBACJoa,qBAAYvC,iBAAZ,CAA8B8B,EAA9B,EAAkC;AAChCmH,aAAO,IADyB;AAEhC1lB,aAAOu6B;AAFyB,KAAlC,CADI,CAAN;AAMA;AACD;AACD;AACA,QAAM;AACJjlB,mBADI;AAEJ6R,kBAFI;AAGJC,eAAWqU,aAHP;AAIJn2B,eAJI;AAKJ4hB,WALI;AAMJtC,WANI;AAOJhG;AAPI,MAQF,MAAM,qBAAO1J,sBAAP,EAAoBqJ,EAApB,CARV;;AAUA,QAAMmd,iBAAiB;AACrBlc,WAAO4H,aAAaA,UAAU5H,KAAvB,GAA+B4H,UAAU5H,KAAzC,GAAiDic,cAAcjc,KADjD;AAErBE,WAAO0H,aAAaA,UAAU1H,KAAvB,GAA+B0H,UAAU1H,KAAzC,GAAiD+b,cAAc/b;AAExE;AAJuB,GAAvB,CAKA,MAAM,EAAEqN,GAAF,EAAO/sB,KAAP,KAAiB,MAAM,mBAAK67B,0BAAL,EAAwBtQ,IAAxB,EAA8B;AACzDnc,eAAWkG,eAD8C;AAEzDmL,YAAQA,MAFiD;AAGzD2G,eAAWsU;AAH8C,GAA9B,CAA7B;AAKA,MAAI17B,KAAJ,EAAW;AACTrB,QAAI+L,KAAJ,CAAW,2BAA0B1K,MAAM4E,OAAQ,EAAnD;AACA,UAAM,kBACJoa,qBAAYvC,iBAAZ,CAA8B8B,EAA9B,EAAkC;AAChCmH,aAAO,IADyB;AAEhC1lB;AAFgC,KAAlC,CADI,CAAN;AAMA;AACD;;AAED,QAAM4sB,WAAW;AACfzF,kBADe;AAEf6F,WAAOD,GAFQ;AAGfznB,eAHe;AAIf4hB,WAJe;AAKftI;AALe,GAAjB;;AAQA,QAAMpZ,WAAW,MAAM,mBAAK8qB,SAAS/D,aAAd,EAA6BK,QAA7B,CAAvB;;AAEA,MAAIpnB,SAASxF,KAAb,EAAoB;AAClBrB,QAAI4G,IAAJ,CAAS,mCAAT;AACA,UAAM,kBACJyZ,qBAAYvC,iBAAZ,CAA8B8B,EAA9B,EAAkC;AAChCmH,aAAO,IADyB;AAEhC1lB,aAAOwF,SAASxF;AAFgB,KAAlC,CADI,CAAN;AAMD,GARD,MAQO;AACLrB,QAAI4G,IAAJ,CAAS,uEAAT;AACA,UAAM,kBACJyZ,qBAAYpB,gBAAZ,CAA6BW,EAA7B,EAAiC;AAC/BuG,iBAAWF,QAAQE,SADY;AAE/BgF,qBAAe;AACbpE,eAAO,IADM;AAEbjF,gBAAQA,MAFK;AAGb2G,mBAAWsU;AAHE;AAFgB,KAAjC,CADI,CAAN;AAUD;AACF;;AAED;;;;;;;;;;;;;;AAcO,UAAWlL,sBAAX,CAAmCjF,IAAnC,EAAyCzrB,MAAzC,EAAiD;AACtD,QAAM,EAAEye,EAAF,EAAMuC,OAAN,EAAegb,oBAAf,KAAwCh8B,OAAOmF,OAArD;;AAEA;AACA;AACA;AACA,MAAI62B,oBAAJ,EAA0B;AACxBn9B,QAAI+L,KAAJ,CAAU,0BAAV;AACA,UAAM,EAAE6T,IAAIvJ,MAAN,KAAiB,MAAM,qBAAOoT,mCAAP,EAAiC7J,EAAjC,CAA7B;AACA,UAAM,kBACJS,qBAAYrC,WAAZ,CAAwB3H,MAAxB,EAAgC;AAC9B8L;AAD8B,KAAhC,CADI,CAAN;AAKD;AACF;;AAED;;;;;;;;;;;;;;;;;AAiBO,UAAWnE,WAAX,CAAwB4O,IAAxB,EAA8BzrB,MAA9B,EAAsC;AAC3C,QAAMwwB,WAAW/E,KAAK+E,QAAtB;AACA,QAAM,EAAE/R,EAAF,EAAMuC,OAAN,KAAkBhhB,OAAOmF,OAA/B;;AAEA,QAAMtG,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6Bia,EAA7B,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,gCAAT;;AAEA;AACA,QAAM;AACJgZ,QAAIvJ,MADA;AAEJM,mBAFI;AAGJ6R,kBAHI;AAIJC,aAJI;AAKJ9hB,eALI;AAMJ4hB,WANI;AAOJtC,WAPI;AAQJhG;AARI,MASF,MAAM,qBAAO1J,sBAAP,EAAoBqJ,EAApB,CATV;;AAWA;AACA,QAAMgc,aAAa,MAAM,mBAAK1lB,wBAAL,EAAwBG,MAAxB,EAAgC,EAAErJ,OAAO0G,uBAAYM,SAArB,EAAhC,CAAzB;AACA,MAAI4nB,UAAJ,EAAgB;AACd57B,QAAI+L,KAAJ,CAAW,wBAAuB6vB,WAAW31B,OAAQ,EAArD;AACA,UAAM,kBACJoa,qBAAYpC,iBAAZ,CAA8B5H,MAA9B,EAAsC;AACpC0Q,aAAO,IAD6B;AAEpC1lB,aAAOu6B;AAF6B,KAAtC,CADI,CAAN;AAMA;AACD;;AAED;AACA,QAAMvN,QAAQ,MAAM,mBAAK4N,sBAAL,EAAoBrP,IAApB,EAA0BjW,eAA1B,EAA2C,EAA3C,EAA+C8R,SAA/C,CAApB;AACA,MAAI,CAAC4F,KAAL,EAAY;AACVruB,QAAI+L,KAAJ,CAAU,2BAAV;AACA,UAAM,kBACJsU,qBAAYpC,iBAAZ,CAA8B5H,MAA9B,EAAsC;AACpC0Q,aAAO,IAD6B;AAEpC1lB,aAAO,IAAI2E,gBAAJ,CAAe;AACpBmB,cAAMqP,kBAAU0lB,aADI;AAEpBj2B,iBAAS;AAFW,OAAf;AAF6B,KAAtC,CADI,CAAN;AASA;AACD;;AAED,QAAMgoB,WAAW;AACfzF,kBADe;AAEf6F,WAAOA,MAAMD,GAFE;AAGfznB,eAHe;AAIf4hB,WAJe;AAKftI;AALe,GAAjB;;AAQA,QAAMpZ,WAAW,MAAM,mBAAK8qB,SAAS/D,aAAd,EAA6BK,QAA7B,CAAvB;;AAEA,MAAIpnB,SAASxF,KAAb,EAAoB;AAClBrB,QAAI4G,IAAJ,CAAS,6BAAT;AACA,UAAM,kBACJyZ,qBAAYpC,iBAAZ,CAA8B5H,MAA9B,EAAsC;AACpC0Q,aAAO,IAD6B;AAEpC1lB,aAAOwF,SAASxF;AAFoB,KAAtC,CADI,CAAN;AAMD,GARD,MAQO;AACLrB,QAAI4G,IAAJ,CAAS,sEAAT;AACA,UAAM,kBACJyZ,qBAAYpB,gBAAZ,CAA6B5I,MAA7B,EAAqC;AACnC8P,iBAAWF,QAAQE,SADgB;AAEnCgF,qBAAe;AACbpE,eAAO,IADM;AAEbjF,gBAAQ,CAACK,OAAD,CAFK;AAGbsG;AAHa;AAFoB,KAArC,CADI,CAAN;AAUD;AACF;;AAED;;;;;;;;;;;;;;;;;;AAkBO,UAAW7K,aAAX,CAA0BgP,IAA1B,EAAgCzrB,MAAhC,EAAwC;AAC7C,QAAM,EAAEye,EAAF,EAAMpgB,IAAN,KAAe2B,OAAOmF,OAA5B;;AAEA,QAAMtG,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6Bia,EAA7B,CAAZ;AACA5f,MAAI+L,KAAJ,CAAW,UAASvM,IAAK,iBAAzB;;AAEA,QAAMsiB,SAAS,MAAMsb,UAAUxd,EAAV,EAAcpgB,IAAd,CAArB;AACA,MAAIsiB,OAAO/kB,MAAP,IAAiB,CAArB,EAAwB;AACtB,UAAMkJ,UAAW,YAAWzG,IAAK,6BAAjC;AACAQ,QAAI+L,KAAJ,CAAU9F,OAAV;AACA,UAAM,kBACJoa,qBAAY1C,cAAZ,CAA2BiC,EAA3B,EAA+B;AAC7BmH,aAAO,IADsB;AAE7B1lB,aAAO,IAAI2E,gBAAJ,CAAe;AACpBmB,cAAMqP,kBAAUC,aADI;AAEpBxQ,iBAASA;AAFW,OAAf;AAFsB,KAA/B,CADI,CAAN;AASD,GAZD,MAYO;AACL,UAAM,mBAAKyX,QAAL,EAAekP,IAAf,EAAqBzrB,MAArB,CAAN;AACD;AACF;;AAED;;;;;;;;;;;;;;;;;;AAkBO,UAAW4c,gBAAX,CAA6B6O,IAA7B,EAAmCzrB,MAAnC,EAA2C;AAChD,QAAM,EAAEye,EAAF,EAAMpgB,IAAN,KAAe2B,OAAOmF,OAA5B;;AAEA,QAAMtG,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6Bia,EAA7B,CAAZ;AACA5f,MAAI+L,KAAJ,CAAW,YAAWvM,IAAK,mBAA3B;;AAEA,QAAMsiB,SAAS,MAAMsb,UAAUxd,EAAV,EAAcpgB,IAAd,CAArB;AACA,MAAIsiB,OAAO/kB,MAAP,KAAkB,CAAtB,EAAyB;AACvB,UAAMkJ,UAAW,sBAAqBzG,IAAK,4BAA3C;AACAQ,QAAI+L,KAAJ,CAAU9F,OAAV;AACA,UAAM,kBACJoa,qBAAYvC,iBAAZ,CAA8B8B,EAA9B,EAAkC;AAChCmH,aAAO,IADyB;AAEhC1lB,aAAO,IAAI2E,gBAAJ,CAAe;AACpBmB,cAAMqP,kBAAUC,aADI;AAEpBxQ,iBAASA;AAFW,OAAf;AAFyB,KAAlC,CADI,CAAN;AASD,GAZD,MAYO;AACL,UAAM,mBAAK4X,WAAL,EAAkB+O,IAAlB,6BACDzrB,MADC;AAEJmF,0CACKnF,OAAOmF,OADZ;AAEEwb,gBAAQA;AAFV;AAFI,OAAN;AAOD;AACF;;AAED;;;;;;;;AAQA,UAAWsb,SAAX,CAAsBxd,EAAtB,EAA0BpgB,IAA1B,EAAgC;AAC9B,QAAMvC,OAAO,MAAM,qBAAOsZ,sBAAP,EAAoBqJ,EAApB,CAAnB;AACA,QAAMiK,cAAc5sB,OAAOA,KAAK4sB,WAAZ,GAA0B,EAA9C;AACA,QAAM/H,SAAS,MAAM,kBAAI+H,YAAY3W,GAAZ,CAAgB0M,MAAM,qBAAOyd,wBAAP,EAAqBzd,EAArB,CAAtB,CAAJ,CAArB;AACA,QAAM0d,cAAcxb,OAAO9iB,MAAP,CAAcq6B,SAASA,MAAM75B,IAAN,KAAeA,IAAtC,CAApB;AACA,SAAO89B,YAAYpqB,GAAZ,CAAgBqqB,YAAYA,SAASpb,OAArC,CAAP;AACD;AACD;;;;;;;;;;;;;;;;;;AAkBO,UAAWxD,cAAX,CAA2BiO,IAA3B,EAAiCzrB,MAAjC,EAAyC;AAC9C,QAAM,EAAEwwB,QAAF,KAAe/E,IAArB;;AAEA,QAAM5sB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6BxE,OAAOmF,OAAP,CAAesZ,EAA5C,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,qCAAT;;AAEA,QAAM+sB,cAAc,MAAM,qBAAOpd,sBAAP,EAAoBpV,OAAOmF,OAAP,CAAesZ,EAAnC,CAA1B;;AAEA;AACA,QAAMgc,aAAa,MAAM,mBAAK1lB,wBAAL,EAAwB/U,OAAOmF,OAAP,CAAesZ,EAAvC,EAA2C,EAAE5S,OAAO0G,uBAAYO,OAArB,EAA3C,CAAzB;;AAEA,MAAI2nB,UAAJ,EAAgB;AACd57B,QAAI+L,KAAJ,CAAW,gCAA+B6vB,WAAW31B,OAAQ,EAA7D;AACA;AACA,UAAM,kBAAIoa,qBAAYzB,oBAAZ,CAAiCzd,OAAOmF,OAAP,CAAesZ,EAAhD,EAAoD,EAAEve,OAAOu6B,UAAT,EAApD,CAAJ,CAAN;AACA;AACD;;AAED;AACA,QAAM3N,WAAW;AACfzF,oBAAgBmL,YAAYnL,cADb;AAEf0G,aAAS/tB,OAAOmF,OAAP,CAAeqa;AAFT,GAAjB;AAIA,QAAM9Z,WAAW,MAAM,mBAAK8qB,SAASjE,qBAAd,EAAqCO,QAArC,CAAvB;;AAEA,MAAIpnB,SAASxF,KAAb,EAAoB;AAClBrB,QAAI4G,IAAJ,CAAS,iCAAT;AACA,UAAM,kBACJyZ,qBAAYzB,oBAAZ,CAAiCzd,OAAOmF,OAAP,CAAesZ,EAAhD,EAAoD;AAClDve,aAAOwF,SAASxF;AADkC,KAApD,CADI,CAAN;AAKA;AACD;;AAEDrB,MAAI4G,IAAJ,CAAS,wEAAT;AACA,QAAM,kBACJyZ,qBAAYpB,gBAAZ,CAA6B9d,OAAOmF,OAAP,CAAesZ,EAA5C,EAAgD;AAC9CuG,eAAWwN,YAAY1N,OAAZ,CAAoBE;AADe,GAAhD,CADI,CAAN;AAKD;;AAED;;;;;;;;;;;;;;;;;;AAkBO,UAAW3H,oBAAX,CAAiCoO,IAAjC,EAAuCzrB,MAAvC,EAA+C;AACpD,QAAM,EAAEwwB,QAAF,KAAe/E,IAArB;;AAEA,QAAM5sB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6BxE,OAAOmF,OAAP,CAAesZ,EAA5C,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,2CAAT;;AAEA,QAAM+sB,cAAc,MAAM,qBAAOpd,sBAAP,EAAoBpV,OAAOmF,OAAP,CAAesZ,EAAnC,CAA1B;AACA,QAAM4d,YAAY,MAAM,qBAAOjnB,sBAAP,EAAoBpV,OAAOmF,OAAP,CAAeic,WAAnC,CAAxB;;AAEA;AACA,QAAMkb,oBAAoB,MAAM,mBAAKvnB,wBAAL,EAAwB/U,OAAOmF,OAAP,CAAesZ,EAAvC,EAA2C;AACzE5S,WAAO0G,uBAAYO;AADsD,GAA3C,CAAhC;AAGA,QAAMypB,kBAAkB,MAAM,mBAAKxnB,wBAAL,EAAwB/U,OAAOmF,OAAP,CAAeic,WAAvC,EAAoD;AAChFvV,WAAO0G,uBAAYO;AAD6D,GAApD,CAA9B;;AAIA,MAAIwpB,iBAAJ,EAAuB;AACrBz9B,QAAI+L,KAAJ,CAAW,wBAAuB5K,OAAOmF,OAAP,CAAesZ,EAAG,KAAI6d,kBAAkBx3B,OAAQ,EAAlF;AACA;AACA,UAAM,kBACJoa,qBAAY3B,0BAAZ,CAAuCvd,OAAOmF,OAAP,CAAesZ,EAAtD,EAA0D;AACxDve,aAAOo8B,iBADiD;AAExDlb,mBAAaphB,OAAOmF,OAAP,CAAeic;AAF4B,KAA1D,CADI,CAAN;AAMA;AACD;;AAED,MAAImb,eAAJ,EAAqB;AACnB19B,QAAI+L,KAAJ,CAAW,wBAAuB5K,OAAOmF,OAAP,CAAeic,WAAY,KAAImb,gBAAgBz3B,OAAQ,EAAzF;AACA;AACA,UAAM,kBACJoa,qBAAY3B,0BAAZ,CAAuCvd,OAAOmF,OAAP,CAAesZ,EAAtD,EAA0D;AACxDve,aAAOq8B,eADiD;AAExDnb,mBAAaphB,OAAOmF,OAAP,CAAeic;AAF4B,KAA1D,CADI,CAAN;AAMA;AACD;;AAED;AACA,QAAM0L,WAAW;AACfzF,oBAAgBmL,YAAYnL,cADb;AAEf2G,yBAAqBqO,UAAUhV,cAFhB;AAGf7H,iBAAa6c,UAAUnV,SAAV,KAAwB,UAAxB,GAAqCmV,UAAUrV,EAA/C,GAAoDqV,UAAU5c;AAH5D,GAAjB;AAKA,QAAM/Z,WAAW,MAAM,mBAAK8qB,SAASlE,4BAAd,EAA4CQ,QAA5C,CAAvB;;AAEA,MAAIpnB,SAASxF,KAAb,EAAoB;AAClBrB,QAAI4G,IAAJ,CAAS,uCAAT;AACA,UAAM,kBACJyZ,qBAAY3B,0BAAZ,CAAuCvd,OAAOmF,OAAP,CAAesZ,EAAtD,EAA0D;AACxDve,aAAOwF,SAASxF,KADwC;AAExDkhB,mBAAaphB,OAAOmF,OAAP,CAAeic;AAF4B,KAA1D,CADI,CAAN;AAMA;AACD;;AAEDviB,MAAI4G,IAAJ,CAAS,8EAAT;AACA,QAAM,kBAAIyZ,qBAAY5B,2BAAZ,CAAwCkV,YAAY/T,EAApD,EAAwD,EAAE2C,aAAaib,UAAU5d,EAAzB,EAAxD,CAAJ,CAAN;AACD;;AAED;;;;;;;;;;;;;;;;;;AAkBO,UAAW/f,IAAX,CAAiB+sB,IAAjB,EAAuBzrB,MAAvB,EAA+B;AACpC,QAAMwwB,WAAW/E,KAAK+E,QAAtB;;AAEA,QAAM3xB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6BxE,OAAOmF,OAAP,CAAesZ,EAA5C,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,0BAAT;;AAEA,QAAM+sB,cAAc,MAAM,qBAAOpd,sBAAP,EAAoBpV,OAAOmF,OAAP,CAAesZ,EAAnC,CAA1B;AACA,QAAM4d,YAAY,MAAM,qBAAOjnB,sBAAP,EAAoBpV,OAAOmF,OAAP,CAAeic,WAAnC,CAAxB;;AAEA;AACA,QAAMkb,oBAAoB,MAAM,mBAAKvnB,wBAAL,EAAwB/U,OAAOmF,OAAP,CAAesZ,EAAvC,EAA2C;AACzE5S,WAAO0G,uBAAYO;AADsD,GAA3C,CAAhC;AAGA,QAAMypB,kBAAkB,MAAM,mBAAKxnB,wBAAL,EAAwB/U,OAAOmF,OAAP,CAAeic,WAAvC,EAAoD;AAChFvV,WAAO0G,uBAAYO;AAD6D,GAApD,CAA9B;;AAIA,MAAIwpB,iBAAJ,EAAuB;AACrBz9B,QAAI+L,KAAJ,CAAW,oBAAmB5K,OAAOmF,OAAP,CAAesZ,EAAG,KAAI6d,kBAAkBx3B,OAAQ,EAA9E;AACA;AACA,UAAM,kBACJoa,qBAAYvB,UAAZ,CAAuB3d,OAAOmF,OAAP,CAAesZ,EAAtC,EAA0C;AACxCve,aAAOo8B,iBADiC;AAExChX,mBAAa,CAACtlB,OAAOmF,OAAP,CAAesZ,EAAhB,EAAoBze,OAAOmF,OAAP,CAAeic,WAAnC;AAF2B,KAA1C,CADI,CAAN;AAMA;AACD;;AAED,MAAImb,eAAJ,EAAqB;AACnB19B,QAAI+L,KAAJ,CAAW,oBAAmB5K,OAAOmF,OAAP,CAAeic,WAAY,KAAImb,gBAAgBz3B,OAAQ,EAArF;AACA;AACA,UAAM,kBACJoa,qBAAYvB,UAAZ,CAAuB3d,OAAOmF,OAAP,CAAesZ,EAAtC,EAA0C;AACxCve,aAAOq8B,eADiC;AAExCjX,mBAAa,CAACtlB,OAAOmF,OAAP,CAAesZ,EAAhB,EAAoBze,OAAOmF,OAAP,CAAeic,WAAnC;AAF2B,KAA1C,CADI,CAAN;AAMA;AACD;;AAED;AACA,QAAMxC,mBAAmB;AACvBgB,WAAO,KADgB;AAEvBF,WAAO8S,YAAY5T,gBAAZ,GAA+B4T,YAAY5T,gBAAZ,CAA6Bc,KAA7B,IAAsC,IAArE,GAA4E;;AAGrF;AALyB,GAAzB,CAMA,MAAM4H,YAAY,uCAAuBkL,YAAYlL,SAAnC,CAAlB;;AAEA,QAAML,eAAeuL,YAAYvL,YAAjC;;AAEA,QAAMwM,WAAW,MAAM,qBAAOjL,sBAAP,CAAvB;AACA,QAAM,EAAEqC,cAAF,EAAkBzE,YAAlB,EAAgCwE,cAAhC,KAAmD,MAAM,qBAAOrC,qBAAP,CAA/D;;AAEA,QAAM,EAAE6R,QAAF,EAAY9qB,SAAZ,EAAuB+qB,QAAvB,KAAoC,MAAM,mBAAKC,oBAAL,EAAgB7O,IAAhB,EAAsB7M,gBAAtB,EAAwC;AACtFwH,gBADsF;AAEtFqN,YAFsF;AAGtF5I,kBAHsF;AAItF5D,gBAJsF;AAKtF2D,kBALsF;AAMtFtD;AANsF,GAAxC,CAAhD;;AASA;AACA,QAAMwF,WAAW;AACfzF,oBAAgBmL,YAAYnL,cADb;AAEf2G,yBAAqBqO,UAAUhV,cAFhB;AAGf4F,SAAKmN,QAHU;AAIf;AACAtb,sBAAkB0T,YAAY1T;AALf,GAAjB;AAOA,QAAMpZ,WAAW,MAAM,mBAAK8qB,SAAShE,YAAd,EAA4BM,QAA5B,CAAvB;;AAEA,MAAIpnB,SAASxF,KAAb,EAAoB;AAClBrB,QAAI4G,IAAJ,CAAS,sBAAT;AACA,UAAM,kBACJyZ,qBAAYvB,UAAZ,CAAuB3d,OAAOmF,OAAP,CAAesZ,EAAtC,EAA0C;AACxCve,aAAOwF,SAASxF,KADwB;AAExColB,mBAAa,CAACtlB,OAAOmF,OAAP,CAAesZ,EAAhB,EAAoBze,OAAOmF,OAAP,CAAeic,WAAnC;AAF2B,KAA1C,CADI,CAAN;AAMA;AACD;;AAED;AACA,QAAMob,wBAAwBhK,YAAY9L,iBAAZ,CAA8BI,WAA5D;AACA,QAAM2V,sBAAsBJ,UAAU3V,iBAAV,CAA4BI,WAAxD;AACA,MAAIC,eAAJ;AACA,MAAIyV,yBAAyBC,mBAA7B,EAAkD;AAChD1V,sBAAmB,GAAEyV,qBAAsB,IAAGC,mBAAoB,EAAlE;AACD,GAFD,MAEO,IAAID,qBAAJ,EAA2B;AAChCzV,sBAAmB,GAAEyV,qBAAsB,GAA3C;AACD,GAFM,MAEA,IAAIC,mBAAJ,EAAyB;AAC9B1V,sBAAmB,IAAG0V,mBAAoB,EAA1C;AACD;;AAED;AACA,QAAMC,2BAA2BlK,YAAYtL,SAAZ,KAA0B7S,0BAAeE,QAAzC,GAAoDie,YAAYxL,EAAhE,GAAqEwL,YAAY/S,IAAlH;AACA,QAAMkd,yBAAyBN,UAAUnV,SAAV,KAAwB7S,0BAAeE,QAAvC,GAAkD8nB,UAAUrV,EAA5D,GAAiEwL,YAAY/S,IAA5G;AACA,QAAMS,qBAAsB,GAAEwc,wBAAyB,IAAGC,sBAAuB,EAAjF;;AAEA99B,MAAI4G,IAAJ,CAAS,6DAAT;AACA;AACA;AACA;AACA,QAAM,kBACJyZ,qBAAYxB,WAAZ,CAAwB1d,OAAOmF,OAAP,CAAekc,SAAvC,EAAkD;AAChD;AACAgG,oBAAgB3hB,SAASyoB,iBAFuB;AAGhD;AACA3Y,qBAAiBlG,SAJ+B;AAKhD;AACA+qB,YANgD;AAOhD;AACAzb,oBARgD;AAShD;AACAsB,sBAVgD;AAWhD;AACA6G,mBAZgD;AAahD;AACAtH,UAAMzf,OAAOmF,OAAP,CAAesa,IAd2B;AAehD;AACA6F,iBAAa,CAACkN,YAAY/T,EAAb,EAAiB4d,UAAU5d,EAA3B,CAhBmC;AAiBhD;AACAK,sBAAkB0T,YAAY1T,gBAlBkB;AAmBhD;AACAwI;AApBgD,GAAlD,CADI,CAAN;AAwBD;;AAED;;;;;;;;;;;;;;;;AAgBO,UAAW1J,YAAX,CAAyB6N,IAAzB,EAA+BzrB,MAA/B,EAAuC;AAC5C,QAAM,EAAEiV,MAAF,KAAawW,IAAnB;;AAEA,QAAM5sB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6BxE,OAAOmF,OAAP,CAAesZ,EAA5C,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,0BAAT;;AAEA,QAAM,EAAEub,OAAF,EAAWpC,gBAAX,KAAgC5e,OAAOmF,OAA7C;;AAEA,QAAMs1B,aAAa,MAAM,mBAAK1lB,wBAAL,EAAwB/U,OAAOmF,OAAP,CAAesZ,EAAvC,EAA2C,EAAE5S,OAAO0G,uBAAYM,SAArB,EAA3C,CAAzB;AACA,MAAI4nB,UAAJ,EAAgB;AACd57B,QAAI+L,KAAJ,CAAW,uBAAsB6vB,WAAW31B,OAAQ,EAApD;AACA,UAAM,kBACJoa,qBAAYrB,kBAAZ,CAA+B7d,OAAOmF,OAAP,CAAesZ,EAA9C,EAAkD;AAChDve,aAAOu6B;AADyC,KAAlD,CADI,CAAN;AAKA;AACD;;AAED,QAAMjI,cAAc,MAAM,qBAAOpd,sBAAP,EAAoBpV,OAAOmF,OAAP,CAAesZ,EAAnC,CAA1B;;AAEA,QAAM,EAAEve,KAAF,EAAS4lB,UAAT,EAAqBE,aAArB,KAAuC,MAAM,mBAAK4W,2BAAL,EAAyB3nB,MAAzB,EAAiC;AAClF3F,eAAWkjB,YAAYhd,eAD2D;AAElFwL,WAFkF;AAGlFpC;AAHkF,GAAjC,CAAnD;;AAMA,MAAI1e,KAAJ,EAAW;AACTrB,QAAI4G,IAAJ,CAAS,kCAAT;AACA,UAAM,kBAAIyZ,qBAAYrB,kBAAZ,CAA+B7d,OAAOmF,OAAP,CAAesZ,EAA9C,EAAkD,EAAEve,KAAF,EAAlD,CAAJ,CAAN;AACD,GAHD,MAGO;AACLrB,QAAI4G,IAAJ,CAAS,mCAAT;AACA,UAAM,kBAAIyZ,qBAAYrB,kBAAZ,CAA+B7d,OAAOmF,OAAP,CAAesZ,EAA9C,EAAkD,EAAEqH,UAAF,EAAcE,aAAd,EAAlD,CAAJ,CAAN;AACD;AACF,C;;;;;;;;;;;;;QC3tCiB6W,mB,GAAAA,mB;QAqMAC,uB,GAAAA,uB;QAoHAC,oB,GAAAA,oB;QAuJAC,wB,GAAAA,wB;QAyGAC,a,GAAAA,a;;AAhnBlB;;;;AACA;;;;AAGA;;AACA;;AAGA;;AACA;;AACA;;AACA;;AAGA;;AACA;;AACA;;AAGA;;;;AANA;;;AANA;;;AAJA;AAJA;AAsBA,MAAMp+B,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,CAAZ;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AALA;AAqCO,UAAWq4B,mBAAX,CAAgCpR,IAAhC,EAAsCtW,UAAtC,EAAkDuJ,MAAlD,EAA0D;AAC/D,QAAM,EAAEzJ,MAAF,EAAUub,QAAV,KAAuB/E,IAA7B;;AAEA,QAAM5sB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6B2Q,WAAWsJ,EAAxC,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,yDAAT;;AAEA,MAAI,EAAEwnB,GAAF,KAAUvO,MAAd;AACA,QAAM,EAAEwS,YAAF,EAAgBF,UAAhB,KAA+BtS,MAArC;;AAEA,QAAMwe,aAAa,MAAM,mBAAK9F,oBAAL,EAAoBjiB,UAApB,CAAzB;AACAtW,MAAI+L,KAAJ,CAAW,6BAA4BuK,WAAWtJ,KAAM,iBAAgBqxB,UAAW,GAAnF;;AAEA;;;;;;;AAOA,QAAMxnB,UAAU,MAAM,mBAAK,CAACT,OAAOU,cAAR,EAAwB,KAAxB,CAAL,EAAqCR,WAAWK,eAAhD,CAAtB;AACA,MAAI,CAACE,OAAL,EAAc;AACZ7W,QAAI+L,KAAJ,CAAW,kBAAiBuK,WAAWK,eAAgB,aAAvD;AACA;AACD;AACD;;;;AAIA,QAAMsiB,aAAa,MAAM,mBAAK,CAACpiB,OAAD,EAAU,qBAAV,CAAL,CAAzB;AACA,QAAMynB,YAAY,MAAM,mBAAKC,sBAAL,EAAmBtF,WAAW7K,GAA9B,EAAmCA,GAAnC,CAAxB;AACA,MAAIlI,WAAW,MAAM,mBAAKsY,oBAAL,EAAmBF,SAAnB,CAArB;;AAEAt+B,MAAI+L,KAAJ,CAAW,mCAAkCma,QAAS,aAAtD;AACA;;;;;;;;AAQA,QAAMuY,iBAAiB,MAAM,mBAAK5G,oBAAL,EAAsBzJ,GAAtB,CAA7B;AACA,MAAIlI,aAAa,SAAjB,EAA4B;AAC1B;;;;;;;;;;;;;;AAcA,QAAImY,eAAelqB,6BAAkBE,WAAjC,IAAgDoqB,cAApD,EAAoE;AAClEvY,iBAAW3R,uBAAWmP,MAAtB;AACD;AACF,GAlBD,MAkBO,IAAIwC,aAAa,WAAjB,EAA8B;AACnC;;;;;;;;AAQA;;;;;;AAMA,QAAImY,eAAelqB,6BAAkBC,UAArC,EAAiD;AAC/C8R,iBAAW3R,uBAAWkP,IAAtB;AACD;AACF;;AAEDzjB,MAAI4G,IAAJ,CAAU,uCAAsCsf,QAAS,iBAAgBmY,UAAW,YAApF;AACA,QAAMK,aAAa,MAAM,mBAAKN,aAAL,EAAoBlY,QAApB,CAAzB;;AAEA;;;;AAIA,MAAIuY,kBAAkB,CAACtqB,6BAAkBG,SAAnB,EAA8BH,6BAAkBC,UAAhD,EAA4DlN,QAA5D,CAAqEm3B,UAArE,CAAtB,EAAwG;AACtGr+B,QAAI+L,KAAJ,CAAU,wEAAV;AACAqiB,UAAM,MAAM,mBAAKwJ,qBAAL,EAAuBxJ,GAAvB,CAAZ;AACA,QAAI,CAACA,GAAL,EAAU;AACRpuB,UAAI+L,KAAJ,CAAU,0CAAV;AACA;AACD;AACF;;AAED;;;;;;AAMA;AACA,QAAM4yB,cAAc,MAAM,mBAAKC,+BAAL,EAAyBxoB,MAAzB,EAAiCE,WAAWK,eAA5C,EAA6DyX,GAA7D,CAA1B;AACA,MAAI,CAACuQ,WAAL,EAAkB;AAChB3+B,QAAI+L,KAAJ,CAAW,4EAA2EuK,WAAWsJ,EAAG,GAApG;AACA,UAAM,mBAAKif,qBAAL,EAAmBzoB,MAAnB,EAA2BE,WAAWK,eAAtC,CAAN;AACD;;AAED;;;;;;AAMA,MAAIyX,IAAIlnB,QAAJ,CAAa,cAAb,CAAJ,EAAkC;AAChClH,QAAI+L,KAAJ,CAAW,gDAA+CuK,WAAWsJ,EAAG,aAAxE;AACAwO,UAAMA,IAAI6I,OAAJ,CAAY,eAAZ,EAA6B,eAA7B,CAAN;AACD;;AAED;AACA;AACA,QAAM,EAAE51B,KAAF,EAAS26B,SAAT,KAAuB,MAAM,mBAAK8C,oBAAL,EAAkBlS,IAAlB,EAAwBwB,GAAxB,EAA6B9X,WAAWK,eAAxC,EAAyDL,WAAWmS,SAApE,CAAnC;;AAEA,MAAIpnB,KAAJ,EAAW;AACTrB,QAAI+L,KAAJ,CAAU,8BAAV,EAA0C1K,KAA1C;AACA;AACA;AACA;AACD;;AAED;AACA,QAAM4sB,WAAW;AACfzF,oBAAgBlS,WAAWkS,cADZ;AAEfjH,YAAQya,SAFO;AAGfr1B,iBAAa2P,WAAW3P,WAHT;AAIf4hB,aAASjS,WAAWiS,OAJL;AAKftI,sBAAkB3J,WAAW2J;AALd,GAAjB;;AAQA,QAAMpZ,WAAW,MAAM,mBAAK8qB,SAAS5D,qBAAd,EAAqCE,QAArC,CAAvB;;AAEA,MAAIpnB,SAASxF,KAAb,EAAoB;AAClB;AACA;AACA;AACArB,QAAI4G,IAAJ,CAAS,mDAAT;AACA,UAAM,kBACJ83B,WAAWpoB,WAAWsJ,EAAtB,EAA0B;AACxBmf,cAAQ,IADgB;AAExB19B,aAAOwF,SAASxF;AAFQ,KAA1B,CADI,CAAN;AAMD,GAXD,MAWO;AACLrB,QAAI4G,IAAJ,CAAS,qFAAT;AACA,UAAM,kBACJ83B,WAAWpoB,WAAWsJ,EAAtB,EAA0B;AACxBmf,cAAQ,IADgB;AAExBlX,yBAAmB;AACjBG,uBAAeqK,YADE;AAEjBpK,qBAAakK;AAFI;AAFK,KAA1B,CADI,CAAN;AASD;AACF;;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BO,UAAW8L,uBAAX,CAAoCrR,IAApC,EAA0CtW,UAA1C,EAAsDuJ,MAAtD,EAA8D;AACnE,QAAM,EAAEzJ,MAAF,EAAUub,QAAV,KAAuB/E,IAA7B;AACA,QAAM,EAAEyF,YAAF,EAAgBF,UAAhB,KAA+BtS,MAArC;;AAEA,QAAM7f,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6B2Q,WAAWsJ,EAAxC,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,4DAAT;;AAEA,QAAMy3B,aAAa,MAAM,mBAAK9F,oBAAL,EAAoBjiB,UAApB,CAAzB;AACAtW,MAAI+L,KAAJ,CAAW,6BAA4BuK,WAAWtJ,KAAM,iBAAgBqxB,UAAW,GAAnF;;AAEA;;;;;;;;;;;;;;AAcA,QAAM,EAAEvS,eAAF,KAAsB,MAAM,qBAAOpC,qBAAP,CAAlC;AACA,MAAI,CAACoC,eAAL,EAAsB;AACpB9rB,QAAI+L,KAAJ,CAAW,+BAA8BuK,WAAWK,eAAgB,GAApE;AACA,UAAM,mBAAKkoB,qBAAL,EAAmBzoB,MAAnB,EAA2BE,WAAWK,eAAtC,CAAN;AACD,GAHD,MAGO;AACL3W,QAAI+L,KAAJ,CAAU,mFAAV;AACD;AACD;;;;;;;;;;;;;;;;AAgBA,QAAMizB,kBAAkB;AACtBne,WAAOvK,WAAWuP,SAAX,GAAuB,UAAvB,GAAoC,UADrB;AAEtB9E,WAAOzK,WAAWuP,SAAX,GAAuB,UAAvB,GAAoC;;AAG7C;AALwB,GAAxB,CAMA,MAAMoZ,YAAY,MAAM,mBAAKhD,sBAAL,EAAoBrP,IAApB,EAA0BtW,WAAWK,eAArC,EAAsDqoB,eAAtD,CAAxB;;AAEA,QAAM/Q,WAAW;AACfzF,oBAAgBlS,WAAWkS,cADZ;AAEfjH,YAAQ0d,UAAU7Q,GAFH;AAGfznB,iBAAa2P,WAAW3P,WAHT;AAIf4hB,aAASjS,WAAWiS,OAJL;AAKftI,sBAAkB3J,WAAW2J;;AAG/B;AARiB,GAAjB,CASA,MAAMpZ,WAAW,MAAM,mBAAK8qB,SAAS5D,qBAAd,EAAqCE,QAArC,CAAvB;;AAEA,MAAIpnB,SAASxF,KAAb,EAAoB;AAClB;AACArB,QAAI4G,IAAJ,CAAS,gDAAT,EAA2DC,SAASxF,KAApE;AACA;AACD;;AAEDrB,MAAI4G,IAAJ,CAAS,8EAAT;AACA;;;;AAIA,QAAM,kBACJyZ,qBAAYX,eAAZ,CAA4BpJ,WAAWsJ,EAAvC,EAA2C;AACzCiI,uBAAmB;AACjBG,qBAAeqK,YADE;AAEjBpK,mBAAakK;AAFI;AADsB,GAA3C,CADI,CAAN;AAQD;;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BO,UAAW+L,oBAAX,CAAiCtR,IAAjC,EAAuCtW,UAAvC,EAAmDuJ,MAAnD,EAA2D;AAChE,QAAM,EAAEuO,GAAF,KAAUvO,MAAhB;;AAEA,QAAM7f,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6B2Q,WAAWsJ,EAAxC,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,gEAAT;;AAEA,QAAMy3B,aAAa,MAAM,mBAAK9F,oBAAL,EAAoBjiB,UAApB,CAAzB;AACAtW,MAAI+L,KAAJ,CAAW,6BAA4BuK,WAAWtJ,KAAM,iBAAgBqxB,UAAW,GAAnF;;AAEA;AACA,QAAMa,cAAc,EAAEzuB,WAAW6F,WAAWK,eAAxB,EAAyCwoB,WAAW/Q,GAApD,EAApB;AACA,QAAM/sB,QAAQ,MAAM,mBAAK+9B,2BAAL,EAAqBxS,IAArB,EAA2BsS,WAA3B,EAAwC5oB,UAAxC,CAApB;;AAEA,MAAIjV,KAAJ,EAAW;AACTrB,QAAI+L,KAAJ,CAAU,8BAAV,EAA0C1K,KAA1C;AACA;AACA,UAAM,kBACJgf,qBAAYxD,YAAZ,CAAyBvG,WAAWsJ,EAApC,EAAwC;AACtC5S,aAAO0G,uBAAYQ,KADmB;AAEtC7S;AAFsC,KAAxC,CADI,CAAN;AAMA;AACD;;AAED,QAAM4kB,UAAU3P,WAAW2P,OAA3B;;AAEA;AACA,MAAI,CAACvS,uBAAYI,OAAb,EAAsBJ,uBAAYE,SAAlC,EAA6CF,uBAAYG,WAAzD,EAAsE3M,QAAtE,CAA+EoP,WAAWtJ,KAA1F,CAAJ,EAAsG;AACpGhN,QAAI4G,IAAJ,CAAU,iEAAgE8M,uBAAYM,SAAU,GAAhG;AACA;AACA;AACA;AACA;AACA;AACA,QAAIiS,WAAWA,QAAQxX,MAAR,KAAmBwV,sBAAUE,OAAxC,IAAmD8B,QAAQE,SAAR,KAAsB5R,uBAAW6O,IAAxF,EAA8F;AAC5F,YAAM,kBACJ/C,qBAAYpE,cAAZ,CAA2B3F,WAAWsJ,EAAtC,EAA0C;AACxC5S,eAAO0G,uBAAYM,SADqB;AAExC;AACA2T,mBAAW7kB,KAAKD,GAAL,EAH6B;AAIxC;AACAglB,2BAAmB;AACjBG,yBAAenI,OAAOwS,YADL;AAEjBpK,uBAAapI,OAAOsS;AAFH;AALqB,OAA1C,CADI,CAAN;AAYD,KAbD,MAaO;AACL;AACA,YAAM,kBACJ9R,qBAAYxD,YAAZ,CAAyBvG,WAAWsJ,EAApC,EAAwC;AACtC;AACA5S,eAAO0G,uBAAYM,SAFmB;AAGtC;AACA2T,mBAAW7kB,KAAKD,GAAL,EAJ2B;AAKtC;AACAglB,2BAAmB;AACjBG,yBAAenI,OAAOwS,YADL;AAEjBpK,uBAAapI,OAAOsS;AAFH;AANmB,OAAxC,CADI,CAAN;AAaD;AACF,GApCD,MAoCO,IAAI7b,WAAWtJ,KAAX,KAAqB0G,uBAAYM,SAAjC,IAA8CsC,WAAWtJ,KAAX,KAAqB0G,uBAAYO,OAAnF,EAA4F;AACjG;AACA;AACA;AACA;AACA,QAAIgS,WAAWA,QAAQxX,MAAR,KAAmBwV,sBAAUE,OAA5C,EAAqD;AACnD,UAAIkb,YAAJ;AACA,cAAQpZ,QAAQE,SAAhB;AACE,aAAK5R,uBAAWkP,IAAhB;AACE4b,yBAAehf,qBAAYlD,cAA3B;AACA;AACF,aAAK5I,uBAAWmP,MAAhB;AACE2b,yBAAehf,qBAAYhD,gBAA3B;AACA;AACF,aAAK9I,uBAAWsF,eAAhB;AACEwlB,yBAAehf,qBAAY1C,cAA3B;AACA;AACF,aAAKpJ,uBAAWoF,SAAhB;AACE0lB,yBAAehf,qBAAY1C,cAA3B;AACA;AACF,aAAKpJ,uBAAWyF,kBAAhB;AACEqlB,yBAAehf,qBAAYvC,iBAA3B;AACA;AACF,aAAKvJ,uBAAWuF,YAAhB;AACEulB,yBAAehf,qBAAYvC,iBAA3B;AACA;AACF,aAAKvJ,uBAAW0F,WAAhB;AACEolB,yBAAehf,qBAAYpC,iBAA3B;AACA;AArBJ;AAuBA,UAAIohB,YAAJ,EAAkB;AAChBr/B,YAAI4G,IAAJ,CACG,gDAA+Cqf,QAAQE,SAAU,sCADpE;AAGA,cAAM,kBAAIkZ,aAAa/oB,WAAWsJ,EAAxB,EAA4BqG,QAAQkF,aAApC,CAAJ,CAAN;AACA;AACD;AACF;;AAED;AACA;AACA,UAAMmU,eAAe,MAAM,mBAAKzH,oBAAL,EAAsBhY,OAAOuO,GAA7B,CAA3B;AACA,UAAM7sB,YAAY+9B,eAAe5rB,uBAAYM,SAA3B,GAAuCN,uBAAYO,OAArE;;AAEAjU,QAAI4G,IAAJ,CAAU,oDAAmD04B,eAAe,MAAf,GAAwB,SAAU,iBAA/F;AACAt/B,QAAI4G,IAAJ,CAAU,oDAAmDrF,SAAU,GAAvE;AACA,UAAM,kBACJ8e,qBAAYV,UAAZ,CAAuBrJ,WAAWsJ,EAAlC,EAAsC;AACpC5S,aAAOzL;AAD6B,KAAtC,CADI,CAAN;AAKD,GAnDM,MAmDA;AACL;AACA;AACAvB,QAAIqB,KAAJ,CAAU,mEAAV;AACD;AACF;;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BO,UAAW88B,wBAAX,CAAqCvR,IAArC,EAA2CtW,UAA3C,EAAuDuJ,MAAvD,EAA+D;AACpE,MAAI,EAAEuO,GAAF,KAAUvO,MAAd;;AAEA,QAAM7f,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6B2Q,WAAWsJ,EAAxC,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,mEAAT;;AAEA,QAAMy3B,aAAa,MAAM,mBAAK9F,oBAAL,EAAoBjiB,UAApB,CAAzB;AACAtW,MAAI+L,KAAJ,CAAW,6BAA4BuK,WAAWtJ,KAAM,iBAAgBqxB,UAAW,GAAnF;;AAEA;;;;AAIA,QAAMxnB,UAAU,MAAM,mBAAK,CAAC+V,KAAKxW,MAAL,CAAYU,cAAb,EAA6B,KAA7B,CAAL,EAA0CR,WAAWK,eAArD,CAAtB;AACA,MAAI,CAACE,OAAL,EAAc;AACZ7W,QAAI+L,KAAJ,CAAW,kBAAiBuK,WAAWK,eAAgB,aAAvD;AACA;AACD;AACD;;;;AAIA,QAAMsiB,aAAa,MAAM,mBAAK,CAACpiB,OAAD,EAAU,qBAAV,CAAL,CAAzB;AACA,QAAMynB,YAAY,MAAM,mBAAKC,sBAAL,EAAmBtF,WAAW7K,GAA9B,EAAmCA,GAAnC,CAAxB;;AAEA,MAAIlI,WAAW,MAAM,mBAAKsY,oBAAL,EAAmBF,SAAnB,CAArB;AACA,QAAMgB,eAAe,MAAM,mBAAKzH,oBAAL,EAAsBzJ,GAAtB,CAA3B;;AAEA;;;;;;;;AAQA,MAAIlI,aAAa,WAAb,IAA4B,CAACoZ,YAA7B,IAA6CjB,eAAelqB,6BAAkBC,UAAlF,EAA8F;AAC5F8R,eAAW3R,uBAAWkP,IAAtB;AACAzjB,QAAI+L,KAAJ,CAAW,uCAAsCma,QAAS,WAAUmY,UAAW,SAA/E;AACD;;AAEDr+B,MAAI4G,IAAJ,CAAU,mCAAkCsf,QAAS,OAAMmY,UAAW,YAAtE;;AAEA;;;;;;;;;;;AAWA,MAAInY,aAAa3R,uBAAWmP,MAAxB,IAAkCpN,WAAWuP,SAAX,KAAyB,IAA/D,EAAqE;AACnE,UAAM0Z,YAAY,CAAC,UAAD,EAAa,UAAb,EAAyB,UAAzB,CAAlB;AACA;AACA,QAAIA,UAAUjH,IAAV,CAAekH,OAAOpR,IAAIlnB,QAAJ,CAAas4B,GAAb,CAAtB,CAAJ,EAA8C;AAC5Cx/B,UAAI+L,KAAJ,CAAU,+DAAV;AACAqiB,YAAMA,IAAI6I,OAAJ,CAAY,8BAAZ,EAA4C,UAA5C,CAAN;AACD;AACF;;AAED;AACA,QAAMiI,cAAc,EAAEzuB,WAAW6F,WAAWK,eAAxB,EAAyCwoB,WAAW/Q,GAApD,EAApB;AACA,QAAM/sB,QAAQ,MAAM,mBAAK+9B,2BAAL,EAAqBxS,IAArB,EAA2BsS,WAA3B,EAAwC5oB,UAAxC,CAApB;;AAEA,MAAIjV,KAAJ,EAAW;AACTrB,QAAI+L,KAAJ,CAAU,8BAAV,EAA0C1K,KAA1C;AACA;AACA;AACA;AACD;;AAED,MAAIiV,WAAWtJ,KAAX,KAAqB0G,uBAAYM,SAAjC,IAA8CsC,WAAWtJ,KAAX,KAAqB0G,uBAAYO,OAAnF,EAA4F;AAC1F,UAAMyqB,aAAa,MAAM,mBAAKN,aAAL,EAAoBlY,QAApB,CAAzB;AACA,UAAM3kB,YAAY+9B,eAAe5rB,uBAAYM,SAA3B,GAAuCN,uBAAYO,OAArE;;AAEAjU,QAAI4G,IAAJ,CAAU,+DAA8DrF,SAAU,GAAlF;AACA,UAAM,kBACJm9B,WAAWpoB,WAAWsJ,EAAtB,EAA0B;AACxB5S,aAAOzL,SADiB;AAExB;AACAsmB,yBAAmB;AACjBG,uBAAenI,OAAOwS,YADL;AAEjBpK,qBAAapI,OAAOsS;AAFH;AAHK,KAA1B,CADI,CAAN;AAUD,GAfD,MAeO;AACL;AACA;AACAnyB,QAAIqB,KAAJ,CAAU,mEAAV;AACD;AACF;;AAED;;;;;;;;;AASO,UAAW+8B,aAAX,CAA0BlY,QAA1B,EAAoC;AACzC;AACA,UAAQA,QAAR;AACE,SAAK3R,uBAAWkP,IAAhB;AACE,aAAOpD,qBAAYjB,gBAAnB;AACF,SAAK7K,uBAAWmP,MAAhB;AACE,aAAOrD,qBAAYhB,kBAAnB;AACF,SAAK9K,uBAAWoF,SAAhB;AACE,aAAO0G,qBAAYf,oBAAnB;AACF,SAAK/K,uBAAWuF,YAAhB;AACE,aAAOuG,qBAAYd,uBAAnB;AACF,SAAKhL,uBAAWoP,SAAhB;AACE,aAAOtD,qBAAYb,oBAAnB;AACF,SAAKjL,uBAAWqP,QAAhB;AACE,aAAOvD,qBAAYZ,mBAAnB;AACF,SAAKlL,uBAAWsP,UAAhB;AACE,aAAOxD,qBAAYX,eAAnB;AAdJ;;AAiBA1f,MAAI+L,KAAJ,CAAW,mBAAkBma,QAAS,mCAAtC;AACA,SAAO7F,qBAAYV,UAAnB;AACD,C;;;;;;;;;;;;;QCxkBiB8S,Y,GAAAA,Y;QA2HAoB,gB,GAAAA,gB;QAqEAI,iB,GAAAA,iB;QAmFAZ,qB,GAAAA,qB;QAmEAC,wB,GAAAA,wB;QA+GAC,uB,GAAAA,uB;QAuDAC,sB,GAAAA,sB;QA4EAjX,a,GAAAA,a;QAsCAuW,iB,GAAAA,iB;;AA/pBlB;;AACA;;AACA;;AACA;;AAGA;;IAAY2M,W;;AACZ;;;;AAGA;;AACA;;AACA;;AACA;;;;AAGA;;AACA;;AAIA;;AACA;;;;;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;AALA;AACA;;;AALA;;;AANA;;;AAJA;AAlBA;;;;;;;;;;;;AAYA;AAkDO,UAAWhN,YAAX,CAAyB7F,IAAzB,EAA+B/M,MAA/B,EAAuC;AAC5C,QAAM8R,WAAW/E,KAAK+E,QAAtB;AACA,QAAM,EAAEvD,GAAF,EAAO5F,cAAP,EAAuB6J,YAAvB,EAAqCF,UAArC,EAAiDI,YAAjD,EAA+DtS,gBAA/D,KAAoFJ,MAA1F;;AAEA,QAAMxJ,SAAS,MAAM,mBAAKqpB,QAAL,CAArB;;AAEA,QAAM1/B,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6B0Q,MAA7B,CAAZ;AACArW,MAAI4G,IAAJ,CAAS,yCAAT,EAAoD,EAAE4hB,cAAF,EAApD;;AAEA;AACA,QAAM,kBACJnI,qBAAYjE,YAAZ,CAAyB/F,MAAzB,EAAiC;AAC/B;AACAgS,eAAW,UAFoB;AAG/Brb,WAAO0G,uBAAYC,UAHY;AAI/BkU,uBAAmB;AACjBI,mBAAakK,UADI;AAEjBnK,qBAAeqK;AAFE,KAJY;AAQ/BlK,QAAIoK,YAR2B;AAS/B;AACA3R,UAAMyR,YAVyB;AAW/B;AACA7J,kBAZ+B;;AAc/B;AACA1B,iBAAa,CAACsH;AAfiB,GAAjC,CADI,CAAN;;AAoBA;AACA,MAAInO,gBAAJ,EAAsB;AACpB,UAAM0f,cAAc1f,iBAAiB/M,GAAjB,CAAqB0sB,SAASA,MAAM/yB,IAApC,CAApB;AACA7M,QAAI+L,KAAJ,CAAW,mDAAkD4zB,WAAY,GAAzE;AACA,UAAM,kBACJtf,qBAAY5C,wBAAZ,CAAqCpH,MAArC,EAA6C;AAC3C4J;AAD2C,KAA7C,CADI,CAAN;AAKD;;AAED;;;;;;;;AAQA,MAAImO,GAAJ,EAAS;AACP;AACA,UAAMwG,WAAW,MAAM,qBAAOjL,sBAAP,CAAvB;AACA,UAAM3J,cAAc,MAAM,qBAAO0J,qBAAP,CAA1B;;AAEA;AACA,UAAM,mBAAKmW,4BAAL,EAAwBjT,IAAxB,EAA8B;AAClCyB,aAAO;AACLD,WADK;AAEL5tB,cAAM;AAFD,OAD2B;AAKlCwrB,sBAAgBhM,YAAYgM,cALM;AAMlCzE,oBAAcvH,YAAYuH,YANQ;AAOlCkE,0BAAoBzL,YAAYyL,kBAPE;AAQlCiQ,0BAAoB1b,YAAY0b,kBARE;AASlChQ,qBAAe1L,YAAY0L,aATO;AAUlCkJ,cAVkC;AAWlCve,YAXkC;AAYlC0V,sBAAgB/L,YAAY+L;AAZM,KAA9B,CAAN;AAcD,GApBD,MAoBO;AACL/rB,QAAI+L,KAAJ,CAAU,qCAAV;AACA;AACA;;;;;AAKD;;AAED;AACA,QAAMkiB,WAAW,EAAEzF,cAAF,EAAkB5I,IAAIvJ,MAAtB,EAAjB;AACA,QAAMypB,uBAAuB,MAAM,mBAAKnO,SAASxE,iBAAd,EAAiCc,QAAjC,CAAnC;;AAEA,MAAI6R,qBAAqBz+B,KAAzB,EAAgC;AAC9BrB,QAAIqB,KAAJ,CACG,wCAAuCy+B,qBAAqBz+B,KAArB,CAA2B8F,IAAK,KAAI24B,qBAAqBz+B,KAArB,CAA2B4E,OAAQ,GADjH;AAGD;;AAEDjG,MAAI4G,IAAJ,CAAU,kDAAiD8M,uBAAYI,OAAQ,+BAA/E;AACA,QAAM,kBACJuM,qBAAYhE,WAAZ,CAAwBhG,MAAxB,EAAgC;AAC9BrJ,WAAO0G,uBAAYI;AADW,GAAhC,CADI,CAAN;AAKD;;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BO,UAAW+f,gBAAX,CAA6BjH,IAA7B,EAAmC/M,MAAnC,EAA2C;AAChD,QAAM,EAAE2I,cAAF,EAAkB4F,GAAlB,EAAuB+D,UAAvB,EAAmCE,YAAnC,EAAiDpS,gBAAjD,KAAsEJ,MAA5E;AACA,QAAMvJ,aAAa,MAAM,qBAAOkT,kCAAP,EAAgChB,cAAhC,CAAzB;;AAEA,QAAMxoB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6B,CAAC2Q,cAAc,EAAf,EAAmBsJ,EAAhD,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,6CAAT,EAAwD,EAAE4hB,cAAF,EAAxD;;AAEA,MAAI,CAAClS,UAAL,EAAiB;AACf;AACAtW,QAAI4G,IAAJ,CAAS,uDAAT,EAAkE,EAAE4hB,cAAF,EAAlE;AACA;AACD,GAJD,MAIO,IAAIlS,WAAWtJ,KAAX,KAAqB0G,uBAAYQ,KAArC,EAA4C;AACjD;AACA;AACAlU,QAAI4G,IAAJ,CAAS,6CAAT,EAAwD,EAAE4hB,cAAF,EAAxD;AACA;AACD;AACD;AACA;AACAxoB,MAAI+L,KAAJ,CAAW,kBAAiBqiB,MAAM,MAAN,GAAe,SAAU,4BAArD;;AAEA;AACA,MAAInO,gBAAJ,EAAsB;AACpB,UAAM0f,cAAc1f,iBAAiB/M,GAAjB,CAAqB0sB,SAASA,MAAM/yB,IAApC,CAApB;AACA7M,QAAI+L,KAAJ,CAAW,mDAAkD4zB,WAAY,GAAzE;AACA,UAAM,kBACJtf,qBAAY5C,wBAAZ,CAAqCnH,WAAWsJ,EAAhD,EAAoD;AAClDK;AADkD,KAApD,CADI,CAAN;AAKD;;AAED;;;;;AAKA,MAAImO,GAAJ,EAAS;AACP,UAAM,mBAAKqR,YAAYzB,mBAAjB,EAAsCpR,IAAtC,EAA4CtW,UAA5C,EAAwD,EAAE8X,GAAF,EAAOiE,YAAP,EAAqBF,UAArB,EAAxD,CAAN;AACD,GAFD,MAEO;AACL,UAAM,mBAAKsN,YAAYxB,uBAAjB,EAA0CrR,IAA1C,EAAgDtW,UAAhD,EAA4D,EAAE+b,YAAF,EAAgBF,UAAhB,EAA5D,CAAN;AACD;AACF;;AAED;;;;;;;;;;;;;;;;;;;;;;;;;AAyBO,UAAW8B,iBAAX,CAA8BrH,IAA9B,EAAoC/M,MAApC,EAA4C;AACjD,QAAM,EAAE2I,cAAF,EAAkB4F,GAAlB,EAAuBnO,gBAAvB,KAA4CJ,MAAlD;AACA,QAAMvJ,aAAa,MAAM,qBAAOkT,kCAAP,EAAgChB,cAAhC,CAAzB;;AAEA,QAAMxoB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6B,CAAC2Q,cAAc,EAAf,EAAmBsJ,EAAhD,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,8CAAT,EAAyD,EAAE4hB,cAAF,EAAzD;;AAEA,MAAI,CAAClS,UAAL,EAAiB;AACf;AACA;AACAtW,QAAI4G,IAAJ,CAAS,qDAAT,EAAgE,EAAE4hB,cAAF,EAAhE;AACA;AACD,GALD,MAKO,IAAIlS,WAAWtJ,KAAX,KAAqB0G,uBAAYQ,KAArC,EAA4C;AACjD,UAAMlU,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6B2Q,WAAWsJ,EAAxC,CAAZ;AACA;AACA;AACA;AACA5f,QAAI4G,IAAJ,CAAS,2CAAT,EAAsD,EAAE4hB,cAAF,EAAtD;AACA;AACD;AACD;AACA;;AAEA;AACA,MAAIvI,gBAAJ,EAAsB;AACpB,UAAM0f,cAAc1f,iBAAiB/M,GAAjB,CAAqB0sB,SAASA,MAAM/yB,IAApC,CAApB;AACA7M,QAAI+L,KAAJ,CAAW,mDAAkD4zB,WAAY,GAAzE;AACA,UAAM,kBACJtf,qBAAY5C,wBAAZ,CAAqCnH,WAAWsJ,EAAhD,EAAoD;AAClDK;AADkD,KAApD,CADI,CAAN;AAKD;;AAED;;;;;;;;AAQA,MAAI,CAACmO,GAAD,IAAQvO,OAAO1Y,IAAP,KAAgB,EAAxB,IAA8B0Y,OAAOmU,UAAzC,EAAqD;AACnD;AACA;AACA;AACA;AACA;AACA;AACAh0B,QAAIqB,KAAJ,CAAW,yCAAwCwe,OAAO5Z,OAAQ,wBAAlE;AACA;AACD;;AAED;;;;;;AAMA,MAAIqQ,WAAW4P,QAAX,IAAuB5P,WAAW4P,QAAX,CAAoBC,SAApB,KAAkC5R,uBAAWsP,UAAxE,EAAoF;AAClF,UAAM,mBAAK4b,YAAYtB,wBAAjB,EAA2CvR,IAA3C,EAAiDtW,UAAjD,EAA6DuJ,MAA7D,CAAN;AACD,GAFD,MAEO;AACL,UAAM,mBAAK4f,YAAYvB,oBAAjB,EAAuCtR,IAAvC,EAA6CtW,UAA7C,EAAyDuJ,MAAzD,CAAN;AACD;AACF;;AAED;;;;;;;;;;;;;;;;;AAiBO,UAAWwT,qBAAX,CAAkCzG,IAAlC,EAAwC/M,MAAxC,EAAgD;AACrD,QAAM,EAAE2I,cAAF,EAAkB0K,UAAlB,EAA8B5gB,UAA9B,KAA6CuN,MAAnD;AACA,QAAM8T,cAAc,MAAM,qBAAOnK,kCAAP,EAAgChB,cAAhC,CAA1B;;AAEA,QAAMxoB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6B,CAACguB,eAAe,EAAhB,EAAoB/T,EAAjD,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,8CAAT,EAAyD,EAAE4hB,cAAF,EAAzD;;AAEA,MAAI,CAACmL,WAAL,EAAkB;AAChB3zB,QAAI4G,IAAJ,CAAS,uDAAT,EAAkE,EAAE4hB,cAAF,EAAlE;AACA;AACD;;AAED;AACA,QAAMoT,aAAa,MAAM,mBAAK1lB,wBAAL,EAAwByd,YAAY/T,EAApC,EAAwC,EAAxC,CAAzB;AACA,MAAIgc,UAAJ,EAAgB;AACd57B,QAAI4G,IAAJ,CAAS,+CAAT;AACA;AACD;;AAED,MAAI+sB,YAAY3mB,KAAZ,KAAsB0G,uBAAYQ,KAAtC,EAA6C;AAC3ClU,QAAI4G,IAAJ,CAAS,qDAAT,EAAgE,EAAE4hB,cAAF,EAAhE;AACA;AACD;;AAEDxoB,MAAI+L,KAAJ,CAAW,+BAA8BmnB,UAAW,kBAAiB5gB,UAAW,IAAhF;;AAEA;AACA,QAAM,mBAAKqpB,kBAAL,EAAgB/O,KAAKxW,MAArB,EAA6Bud,YAAYhd,eAAzC,CAAN;;AAEA3W,MAAI4G,IAAJ,CAAU,oDAAmD8M,uBAAYQ,KAAM,GAA/E;AACA;AACA;AACA,QAAM,kBAAImM,qBAAYpD,aAAZ,CAA0B0W,YAAY/T,EAAtC,EAA0C,8BAAkB+T,YAAY3mB,KAA9B,EAAqC,KAArC,EAA4C6S,MAA5C,CAA1C,CAAJ,CAAN;AACD;;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCO,UAAWyT,wBAAX,CAAqC1G,IAArC,EAA2C/M,MAA3C,EAAmD;AACxD,QAAM,EAAE2I,cAAF,EAAkB0K,UAAlB,EAA8B5gB,UAA9B,KAA6CuN,MAAnD;AACA,QAAM8R,WAAW/E,KAAK+E,QAAtB;;AAEA,QAAMgC,cAAc,MAAM,qBAAOnK,kCAAP,EAAgChB,cAAhC,CAA1B;;AAEA,QAAMxoB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6B,CAACguB,eAAe,EAAhB,EAAoB/T,EAAjD,CAAZ;;AAEA;AACA,QAAMgc,aAAa,MAAM,mBAAK1lB,wBAAL,EAAwByd,YAAY/T,EAApC,EAAwC,EAAxC,CAAzB;AACA,MAAIgc,UAAJ,EAAgB;AACd57B,QAAI4G,IAAJ,CAAS,sDAAT;AACA;AACD;;AAED5G,MAAI4G,IAAJ,CAAS,qDAAT,EAAgE,EAAE4hB,cAAF,EAAhE;;AAEA,MAAI0K,UAAJ,EAAgB;AACd,QAAI6M,mBAAmBztB,UAAvB;AACA,QAAI,CAACA,UAAD,IAAeA,eAAe,CAAlC,EAAqC;AACnC,UAAI4gB,eAAele,sCAA2BC,uBAA9C,EAAuE;AACrE8qB,2BAAmBxqB,wBAAaN,uBAAhC;AACD,OAFD,MAEO,IAAIie,eAAele,sCAA2BE,6BAA9C,EAA6E;AAClF6qB,2BAAmBxqB,wBAAaL,6BAAhC;AACD,OAFM,MAEA,IAAIge,eAAele,sCAA2BG,YAA9C,EAA4D;AACjE4qB,2BAAmBxqB,wBAAaJ,YAAhC;AACD;AACF;AACDnV,QAAI+L,KAAJ,CAAW,sCAAqCmnB,UAAW,KAAI6M,gBAAiB,IAAhF;AACD;;AAED//B,MAAI4G,IAAJ,CAAU,kCAAiC+sB,YAAYhd,eAAgB,eAAvE;;AAEA;AACA,QAAM,mBAAKglB,kBAAL,EAAgB/O,KAAKxW,MAArB,EAA6Bud,YAAYhd,eAAzC,CAAN;;AAEA,QAAMsP,UAAU0N,YAAY1N,OAA5B;AACA,MAAIA,WAAWA,QAAQE,SAAnB,IAAgCF,QAAQxX,MAAR,KAAmBwV,sBAAUE,OAAjE,EAA0E;AACxE,QAAIwB,UAAJ;AACA,QAAI0Z,YAAJ;AACA,YAAQpZ,QAAQE,SAAhB;AACE,WAAK5R,uBAAWM,eAAhB;AACEwqB,uBAAehf,qBAAYzB,oBAA3B;AACA+G,qBAAa;AACXuN,sBAAYle,sCAA2BC,uBAD5B;AAEX3C,sBAAYiD,wBAAaN;AAFd,SAAb;AAIA;AACF,WAAKV,uBAAWO,qBAAhB;AACEuqB,uBAAehf,qBAAY3B,0BAA3B;AACAiH,qBAAa;AACXuN,sBAAYle,sCAA2BE,6BAD5B;AAEX5C,sBAAYiD,wBAAaL;AAFd,SAAb;AAIA;AACF,WAAKX,uBAAWQ,IAAhB;AACEsqB,uBAAehf,qBAAYvB,UAA3B;AACA6G,qBAAa;AACXuN,sBAAYle,sCAA2BG,YAD5B;AAEX7C,sBAAYiD,wBAAaJ;AAFd,SAAb;AAIA;AArBJ;AAuBA,QAAIkqB,YAAJ,EAAkB;AAChBr/B,UAAI+L,KAAJ,CAAU,0CAAV,EAAsD4nB,YAAY/T,EAAlE;;AAEA,YAAM,kBAAIyf,aAAa1L,YAAY/T,EAAzB,EAA6B,EAAE+F,UAAF,EAA7B,CAAJ,CAAN;;AAEA;AACA;AACA;AACA,YAAMhf,cAAcgtB,YAAYhtB,WAAhC;AACA,YAAM4hB,UAAUoL,YAAYpL,OAA5B;AACAvoB,UAAI4G,IAAJ,CAAS,0DAAT;AACA,YAAMC,WAAW,MAAM,mBAAK8qB,SAAStE,UAAd,EAA0B,EAAE7E,cAAF,EAAkB7hB,WAAlB,EAA+B4hB,OAA/B,EAA1B,CAAvB;;AAEA,UAAI,CAAC1hB,SAASxF,KAAd,EAAqB;AACnBrB,YAAI4G,IAAJ,CAAU,gDAA+C8M,uBAAYQ,KAAM,GAA3E;AACA,cAAM,kBAAImM,qBAAYpD,aAAZ,CAA0B0W,YAAY/T,EAAtC,EAA0C,8BAAkB+T,YAAY3mB,KAA9B,EAAqC,IAArC,EAA2C6S,MAA3C,CAA1C,CAAJ,CAAN;AACD,OAHD,MAGO;AACL7f,YAAI+L,KAAJ,CACG,sDAAqDlF,SAASxF,KAAM,4BAA2BqS,uBAAYQ,KAAM,GADpH;AAGA,cAAM,kBACJmM,qBAAYpD,aAAZ,CAA0B0W,YAAY/T,EAAtC,EAA0C;AACxCoG,mBAAS,IAD+B;AAExC3kB,iBAAOwF,SAASxF;AAFwB,SAA1C,CADI,CAAN;AAMD;AACF;AACF;AACF;;AAED;;;;;;;;;;;;;;;;;AAiBO,UAAWkyB,uBAAX,CAAoC3G,IAApC,EAA0C/M,MAA1C,EAAkD;AACvD,QAAM,EAAE2I,cAAF,EAAkBvI,gBAAlB,KAAuCJ,MAA7C;AACA,QAAM8T,cAAc,MAAM,qBAAOnK,kCAAP,EAAgChB,cAAhC,CAA1B;;AAEA,QAAMxoB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6B,CAACguB,eAAe,EAAhB,EAAoB/T,EAAjD,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,gDAAT,EAA2D,EAAE4hB,cAAF,EAA3D;;AAEA,MAAI,CAACmL,WAAL,EAAkB;AAChB3zB,QAAI4G,IAAJ,CAAS,yDAAT,EAAoE,EAAE4hB,cAAF,EAApE;AACA;AACD;;AAED;AACA,QAAMoT,aAAa,MAAM,mBAAK1lB,wBAAL,EAAwByd,YAAY/T,EAApC,EAAwC,EAAE5S,OAAO0G,uBAAYE,SAArB,EAAxC,CAAzB;AACA,MAAIgoB,UAAJ,EAAgB;AACd57B,QAAI4G,IAAJ,CAAU,qDAAoDg1B,WAAW31B,OAAQ,aAAjF;AACA;AACD;;AAED;AACA,MAAIga,gBAAJ,EAAsB;AACpB,UAAM0f,cAAc1f,iBAAiB/M,GAAjB,CAAqB0sB,SAASA,MAAM/yB,IAApC,CAApB;AACA7M,QAAI+L,KAAJ,CAAW,mDAAkD4zB,WAAY,GAAzE;AACA,UAAM,kBACJtf,qBAAY5C,wBAAZ,CAAqCkW,YAAY/T,EAAjD,EAAqD;AACnDK;AADmD,KAArD,CADI,CAAN;AAKD;;AAEDjgB,MAAI4G,IAAJ,CAAU,sDAAqD8M,uBAAYI,OAAQ,GAAnF;AACA,QAAM,kBACJuM,qBAAYhE,WAAZ,CAAwBsX,YAAY/T,EAApC,EAAwC;AACtC;AACAiI,uBAAmB;AACjBG,qBAAenI,OAAOwS,YADL;AAEjBpK,mBAAapI,OAAOsS;AAFH;AAFmB,GAAxC,CADI,CAAN;AASD;;AAED;;;;;;;;;;;;;AAaO,UAAWqB,sBAAX,CAAmC5G,IAAnC,EAAyC/M,MAAzC,EAAiD;AACtD,QAAM,EAAE2I,cAAF,EAAkB0K,UAAlB,EAA8B5gB,UAA9B,KAA6CuN,MAAnD;AACA,QAAM8T,cAAc,MAAM,qBAAOnK,kCAAP,EAAgChB,cAAhC,CAA1B;;AAEA,QAAMxoB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6B,CAACguB,eAAe,EAAhB,EAAoB/T,EAAjD,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,kDAAT,EAA6D,EAAE4hB,cAAF,EAA7D;;AAEA,MAAI,CAACmL,WAAL,EAAkB;AAChB3zB,QAAI4G,IAAJ,CAAS,kEAAT,EAA6E,EAAE4hB,cAAF,EAA7E;AACA;AACD;;AAED,QAAMvC,UAAU0N,YAAY1N,OAA5B;AACA,MAAIA,WAAWA,QAAQE,SAAnB,IAAgCF,QAAQxX,MAAR,KAAmBwV,sBAAUE,OAAjE,EAA0E;AACxE,QAAIwB,UAAJ;AACA,QAAI0Z,YAAJ;AACA,YAAQpZ,QAAQE,SAAhB;AACE,WAAK5R,uBAAWM,eAAhB;AACEwqB,uBAAehf,qBAAYzB,oBAA3B;AACA;AACA+G,qBAAa;AACXuN,sBAAYA,cAAcle,sCAA2BI,uBAD1C;AAEX9C,sBAAYA,cAAciD,wBAAaH;AAF5B,SAAb;AAIA;AACF,WAAKb,uBAAWO,qBAAhB;AACEuqB,uBAAehf,qBAAY3B,0BAA3B;AACAiH,qBAAa;AACXuN,sBAAYA,cAAcle,sCAA2BK,6BAD1C;AAEX/C,sBAAYA,cAAciD,wBAAaF;AAF5B,SAAb;AAIA;AACF,WAAKd,uBAAWQ,IAAhB;AACEsqB,uBAAehf,qBAAYvB,UAA3B;AACA6G,qBAAa;AACXuN,sBAAYA,cAAcle,sCAA2BM,YAD1C;AAEXhD,sBAAYA,cAAciD,wBAAaD;AAF5B,SAAb;AAIA;AAtBJ;AAwBAtV,QAAI+L,KAAJ,CAAW,yBAAwBka,QAAQE,SAAU,aAAYR,WAAWrT,UAAW,IAAvF;;AAEA,QAAI+sB,YAAJ,EAAkB;AAChBr/B,UAAI4G,IAAJ,CAAS,iDAAT;AACA,YAAM,kBACJy4B,aAAa1L,YAAY/T,EAAzB,EAA6B;AAC3Bve,eAAO,IAAI2E,gBAAJ,CAAe;AACpBC,mBAAU,aAAYggB,QAAQE,SAAU,UADpB;AAEpBhf,gBAAMqP,kBAAUwe;AAFI,SAAf,CADoB;AAK3BrP;AAL2B,OAA7B,CADI,CAAN;AASA;AACD;AACF;;AAED,QAAM,kBAAItF,qBAAYV,UAAZ,CAAuBgU,YAAY/T,EAAnC,CAAJ,CAAN;AACD;;AAED;;;;;;;;;;;;;;;;AAgBO,UAAWrD,aAAX,CAA0BqQ,IAA1B,EAAgC/M,MAAhC,EAAwC;AAC7C,QAAM,EAAE2I,cAAF,KAAqB3I,MAA3B;AACA,QAAMvJ,aAAa,MAAM,qBAAOkT,kCAAP,EAAgChB,cAAhC,CAAzB;;AAEA,QAAMxoB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6B,CAAC2Q,cAAc,EAAf,EAAmBsJ,EAAhD,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,2CAAT,EAAsD,EAAE4hB,cAAF,EAAtD;;AAEA,MAAI,CAAClS,UAAL,EAAiB;AACftW,QAAI4G,IAAJ,CAAS,2DAAT,EAAsE,EAAE4hB,cAAF,EAAtE;AACA;AACD,GAHD,MAGO,IAAI,CAAC9U,uBAAYQ,KAAb,EAAoBR,uBAAYK,SAAhC,EAA2C7M,QAA3C,CAAoDoP,WAAWtJ,KAA/D,CAAJ,EAA2E;AAChFhN,QAAI4G,IAAJ,CAAU,qCAAoC0P,WAAWtJ,KAAM,kBAA/D,EAAkF,EAAEwb,cAAF,EAAlF;AACA;AACD;;AAED;AACA,QAAM,mBAAKmT,kBAAL,EAAgB/O,KAAKxW,MAArB,EAA6BE,WAAWK,eAAxC,CAAN;;AAEA3W,MAAI4G,IAAJ,CAAU,wDAAuD8M,uBAAYK,SAAU,GAAvF;AACA;AACA,QAAM,kBAAIsM,qBAAY9D,aAAZ,CAA0BjG,WAAWsJ,EAArC,CAAJ,CAAN;AACD;;AAED;;;;;;;;;;;;;;;AAeO,UAAWkT,iBAAX,CAA8BlG,IAA9B,EAAoC/M,MAApC,EAA4C;AACjD,QAAM,EAAE2I,cAAF,EAAkBvI,gBAAlB,KAAuCJ,MAA7C;AACA,QAAM,EAAEzJ,MAAF,KAAawW,IAAnB;;AAEA;;;AAGA,QAAM+G,cAAc,MAAM,qBAAOnK,kCAAP,EAAgChB,cAAhC,CAA1B;;AAEA,QAAMxoB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6B,CAACguB,eAAe,EAAhB,EAAoB/T,EAAjD,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,wCAAT,EAAmD,EAAE4hB,cAAF,EAAnD;;AAEA,MAAI,CAACmL,WAAL,EAAkB;AAChB3zB,QAAI4G,IAAJ,CAAS,wDAAT,EAAmE,EAAE4hB,cAAF,EAAnE;AACA;AACD;;AAED;;;AAGA,QAAM3R,UAAU,MAAM,mBAAK,CAACT,OAAOU,cAAR,EAAwB,KAAxB,CAAL,EAAqC6c,YAAYhd,eAAjD,CAAtB;AACA,MAAI,CAACE,OAAL,EAAc;AACZ7W,QAAI4G,IAAJ,CAAS,wDAAT,EAAmE,EAAE4hB,cAAF,EAAnE;AACA;AACA;AACD;;AAED;AACA,MAAIvI,gBAAJ,EAAsB;AACpB,UAAM0f,cAAc1f,iBAAiB/M,GAAjB,CAAqB0sB,SAASA,MAAM/yB,IAApC,CAApB;AACA7M,QAAI+L,KAAJ,CAAW,mDAAkD4zB,WAAY,GAAzE;AACA,UAAM,kBACJtf,qBAAY5C,wBAAZ,CAAqCkW,YAAY/T,EAAjD,EAAqD;AACnDK;AADmD,KAArD,CADI,CAAN;AAKD;;AAED,MAAI;AACF;;;;;AAKA,UAAM+f,oBAAoB,MAAM,qBAAOtW,qBAAP,CAAhC;AACA,UAAM0E,MAAM,MAAM,mBAAK6R,kBAAL,EAAkBD,kBAAkBtd,WAApC,EAAiD7C,OAAOuO,GAAxD,EAA6D;AAC7E/X,cAAQsd,YAAY/T,EADyD;AAE7Epf,YAAM,UAFuE;AAG7E0/B,YAAM,KAHuE;AAI7EC,gBAAU;AAJmE,KAA7D,CAAlB;AAMA,UAAM,mBAAK,CAACtpB,OAAD,EAAU,eAAV,CAAL,EAAiC;AACrCrW,YAAM,UAD+B;AAErC4tB,WAAKA;AAFgC,KAAjC,CAAN;AAID,GAjBD,CAiBE,OAAOrD,GAAP,EAAY;AACZ/qB,QAAI+L,KAAJ,CAAW,uCAAsC4nB,YAAY/T,EAAG,aAAhE;AACA;AACD;;AAED5f,MAAI4G,IAAJ,CAAU,qDAAoD8M,uBAAYG,WAAY,GAAtF;AACA,QAAM,kBACJwM,qBAAY/D,eAAZ,CAA4BqX,YAAY/T,EAAxC,EAA4C;AAC1C;AACAiI,uBAAmB;AACjBG,qBAAenI,OAAOwS,YADL;AAEjBpK,mBAAapI,OAAOsS;AAFH;AAFuB,GAA5C,CADI,CAAN;AASD,C;;;;;;;;;;;;;QC3sBiB3V,a,GAAAA,a;QAsFAgY,W,GAAAA,W;QA+BA4L,e,GAAAA,e;;AA3JlB;;AACA;;IAAY56B,W;;AACZ;;AACA;;AAGA;;AAGA;;AAGA;;;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;AANA;AA8BO,UAAWgX,aAAX,CAA0BoQ,IAA1B,EAAgCzrB,MAAhC,EAAwC;AAC7C,QAAM,EAAEiV,MAAF,EAAUub,QAAV,KAAuB/E,IAA7B;;AAEA,QAAM,EAAEvrB,KAAF,EAASue,EAAT,EAAanR,MAAb,KAAwBtN,OAAOmF,OAArC;AACA,QAAMtG,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6Bia,EAA7B,CAAZ;AACA,QAAMygB,UAAUh/B,QAAQ,IAAR,GAAe,KAA/B;;AAEA,QAAM,oBAAMg/B,OAAN,CAAN;AACA,QAAM1M,cAAc,MAAM,qBAAOpd,sBAAP,EAAoBqJ,EAApB,CAA1B;;AAEA;AACA,MAAI,CAAC+T,WAAL,EAAkB;AAChB3zB,QAAI4G,IAAJ,CAAS,sCAAT;AACA;AACD;AACD;AACA,MAAIzF,OAAOX,IAAP,KAAgBgF,YAAYqT,aAA5B,IAA6C,CAAC8a,YAAY3K,YAA9D,EAA4E;AAC1E;AACD;;AAED,MAAI2K,YAAY3mB,KAAZ,KAAsB0G,uBAAYQ,KAAtC,EAA6C;AAC3ClU,QAAI4G,IAAJ,CAAS,sCAAT;AACA;AACD;;AAED;AACA,MAAI,CAAC6H,MAAL,EAAa;AACX;AACAzO,QAAI4G,IAAJ,CAAS,mCAAT;AACD,GAHD,MAGO,IAAI6H,WAAW,OAAf,EAAwB;AAC7B;AACAzO,QAAI+L,KAAJ,CAAU,2DAAV;AACD;;AAED/L,MAAI4G,IAAJ,CAAS,qBAAT;AACA;AACA,QAAMk5B,uBAAuB,MAAM,mBAAKnO,SAAS7D,SAAd,EAAyB;AAC1DtF,oBAAgBmL,YAAYnL,cAD8B;AAE1D7hB,iBAAagtB,YAAYhtB,WAFiC;AAG1D4hB,aAASoL,YAAYpL;AAHqC,GAAzB,CAAnC;;AAMA;AACA,MAAIuX,qBAAqBz+B,KAAzB,EAAgC;AAC9B;AACA,UAAM,EAAE4E,OAAF,EAAWkB,IAAX,KAAoB24B,qBAAqBz+B,KAA/C;AACArB,QAAI+L,KAAJ,CAAW,gCAA+B9F,OAAQ,KAAIkB,IAAK,IAA3D;AACA,UAAM,kBACJkZ,qBAAY7D,aAAZ,CAA0BoD,EAA1B,EAA8B;AAC5Bve,aAAOy+B,qBAAqBz+B,KADA;AAE5BoN,cAAQqxB,qBAAqBrxB;AAFD,KAA9B,CADI,CAAN;AAMD,GAVD,MAUO;AACLzO,QAAI+L,KAAJ,CAAW,wBAAuB+zB,qBAAqBrxB,MAAO,GAA9D;AACA,UAAM,kBAAI4R,qBAAY7D,aAAZ,CAA0BoD,EAA1B,EAA8B,EAAEnR,QAAQqxB,qBAAqBrxB,MAA/B,EAA9B,CAAJ,CAAN;AACD;;AAED,MAAIqxB,qBAAqBrxB,MAArB,KAAgC,QAApC,EAA8C;AAC5C;AACAzO,QAAI4G,IAAJ,CAAU,gEAA+D8M,uBAAYQ,KAAM,GAA3F;;AAEA;AACA,UAAM,mBAAKynB,kBAAL,EAAgBvlB,MAAhB,EAAwBud,YAAYhd,eAApC,CAAN;;AAEA;AACA,UAAM,kBACJ0J,qBAAYpD,aAAZ,CAA0B2C,EAA1B,EAA8B;AAC5BoG,eAAS,IADmB;AAE5BL,kBAAY,EAAErT,YAAY,IAAd,EAAoB4gB,YAAY,2CAAhC;AAFgB,KAA9B,CADI,CAAN;AAMD;AACF;;AAED;;;;;;;;;;;;;AAtGA;;;AANA;AANA;AA6HO,UAAWsB,WAAX,CAAwB5H,IAAxB,EAA8BzrB,MAA9B,EAAsC;AAC3C,QAAM+E,SAAS,MAAM,qBAAOwjB,qBAAP,CAArB;AACA,MAAI,CAACxjB,OAAO2lB,eAAZ,EAA6B;AAC3B;AACD;AACD;AACA,QAAMzC,QAAQ,MAAM,qBAAOE,mBAAP,CAApB;AACA,QAAMgX,cAAclX,MAAMpqB,MAAN,CAAa/B,QAAQA,KAAK+P,KAAL,KAAe0G,uBAAYK,SAA3B,IAAwC9W,KAAK+P,KAAL,KAAe0G,uBAAYQ,KAAxF,CAApB;;AAEA;AACA,QAAM,kBAAIosB,YAAYptB,GAAZ,CAAgBqtB,cAAc,mBAAKH,eAAL,EAAsBxT,IAAtB,EAA4B2T,UAA5B,CAA9B,CAAJ,CAAN;AACD;;AAED;AACA;;;;;;;;;;;;;;;;;AAiBO,UAAWH,eAAX,CAA4BxT,IAA5B,EAAkC2T,UAAlC,EAA8C;AACnD,QAAM,EAAEnqB,MAAF,EAAUub,QAAV,KAAuB/E,IAA7B;AACA,QAAM5sB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6B46B,WAAW3gB,EAAxC,CAAZ;AACA,QAAM4gB,wBAAwBD,WAAWvzB,KAAzC;;AAEA;AACA;AACA,MAAI,CAACuzB,WAAWta,OAAZ,IAAuB,CAACsa,WAAWra,QAAvC,EAAiD;AAC/C,UAAMua,wBAAwB,MAAM,mBAAK9O,SAAS9D,UAAd,EAA0B;AAC5DrF,sBAAgB+X,WAAW/X;AADiC,KAA1B,CAApC;;AAIA;AACA;AACA,UAAMmL,cAAc,MAAM,qBAAOpd,sBAAP,EAAoBgqB,WAAW3gB,EAA/B,CAA1B;;AAEA;AACA,QAAI,CAAC+T,YAAY1N,OAAb,IAAwB,CAAC0N,YAAYzN,QAAzC,EAAmD;AACjD;;;;;;;AAOA,UAAIyN,YAAY3mB,KAAZ,KAAsB0G,uBAAYI,OAAlC,IAA6C0sB,0BAA0B9sB,uBAAYI,OAAvF,EAAgG;AAC9F;AACA,YAAI2sB,sBAAsBp/B,KAAtB,IAA+Bo/B,sBAAsBp/B,KAAtB,CAA4B8F,IAA5B,KAAqC,EAAxE,EAA4E;AAC1E;AACA,gBAAM,mBAAKw0B,kBAAL,EAAgBvlB,MAAhB,EAAwBmqB,WAAW5pB,eAAnC,CAAN;;AAEA3W,cAAI4G,IAAJ,CAAU,sDAAqD8M,uBAAYQ,KAAM,GAAjF;AACA,gBAAM,kBACJmM,qBAAYpD,aAAZ,CAA0BsjB,WAAW3gB,EAArC,EAAyC;AACvCoG,qBAAS,IAD8B;AAEvC3kB,mBAAOo/B,sBAAsBp/B;AAFU,WAAzC,CADI,CAAN;;AAOA;AACD,SAbD,MAaO,IAAIo/B,sBAAsBp/B,KAA1B,EAAiC;AACtCrB,cAAI+L,KAAJ,CAAW,yBAAwB00B,sBAAsBp/B,KAAtB,CAA4B8F,IAAK,IAApE,EAAyEs5B,sBAAsBp/B,KAA/F;;AAEA;AACD,SAJM,MAIA,IACLo/B,sBAAsBzzB,KAAtB,KAAgC,UAAhC,IACA2mB,YAAY3mB,KAAZ,KAAsB0G,uBAAYM,SADlC,IAEA2f,YAAY3mB,KAAZ,KAAsB0G,uBAAYO,OAH7B,EAIL;AACA;AACA,gBAAM,mBAAK0nB,kBAAL,EAAgB/O,KAAKxW,MAArB,EAA6BmqB,WAAW5pB,eAAxC,CAAN;AACA3W,cAAI4G,IAAJ,CAAU,0DAAyD8M,uBAAYK,SAAU,GAAzF;AACA,gBAAM,kBAAIsM,qBAAY9D,aAAZ,CAA0BgkB,WAAW3gB,EAArC,CAAJ,CAAN;AACD;AACF;AACF;AACF;AACF,C;;;;;;;;;;;;;;kBCzKuB2e,Y;QAoFRmC,c,GAAAA,c;QAkGAC,c,GAAAA,c;;AApNhB;;AAGA;;;;;;AAjBA;;;;;;;;;;;;;AAaA;AAMA,MAAM3gC,MAAM0F,iBAAWC,SAAX,CAAqB,KAArB,CAAZ;;AAEA;;;;;AAKA;;;;;;AAVA;AAcO,MAAMi7B,gDAAoB;AAC/Bvc,SAAO,OADwB;AAE/Bwc,QAAM,MAFyB;AAG/BC,QAAM;;AAGR;;;;;;;;AANiC,CAA1B,CAcQ,SAASvC,YAAT,CAAuBwC,aAAvB,EAAsCC,SAAtC,EAAiD;AAC9D;AACA,QAAMC,UAAUhJ,uBAAaC,KAAb,CAAmB6I,aAAnB,CAAhB;AACA,QAAM3S,MAAM6J,uBAAaC,KAAb,CAAmB8I,SAAnB,CAAZ;;AAEA;AACA;AACA,QAAME,YAAYR,eAAeO,OAAf,CAAlB;AACA,QAAME,YAAYT,eAAetS,GAAf,CAAlB;;AAEA;AACA,QAAMgT,UAAU,EAAhB;AACA;AACA,QAAMC,QAAQ,EAAd;AACA;AACA,QAAMC,UAAU,EAAhB;AACA,QAAMC,YAAY,EAAlB;;AAEA;AACA;AACAL,YAAU9hC,OAAV,CAAkBoiC,SAAS;AACzB,UAAMC,QAAQN,UAAUnX,IAAV,CAAexS,SAASA,MAAMkqB,SAAN,KAAoBF,MAAME,SAAlD,CAAd;AACA,QAAI,CAACD,KAAL,EAAY;AACV;AACAL,cAAQ7jC,IAAR,CAAaikC,KAAb;AACD,KAHD,MAGO;AACL;AACA,YAAMG,UAAUhB,eAAea,KAAf,EAAsBC,KAAtB,CAAhB;;AAEA,UAAIE,QAAQC,OAAR,KAAoBhB,kBAAkBE,IAAtC,IAA8Ca,QAAQE,SAAR,KAAsBjB,kBAAkBE,IAA1F,EAAgG;AAC9F;AACAS,kBAAUhkC,IAAV,CAAeikC,KAAf;AACD,OAHD,MAGO;AACL;AACA;;;;;;AAMAF,gBAAQ/jC,IAAR,CAAa,EAAEia,OAAOiqB,KAAT,EAAgBE,OAAhB,EAAb;AACD;AACF;AACF,GAvBD;;AAyBA;AACA;AACAR,YAAU/hC,OAAV,CAAkBqiC,SAAS;AACzB,UAAMD,QAAQN,UAAUlX,IAAV,CAAexS,SAASA,MAAMkqB,SAAN,KAAoBD,MAAMC,SAAlD,CAAd;AACA,QAAI,CAACF,KAAL,EAAY;AACV;AACAH,YAAM9jC,IAAN,CAAWkkC,KAAX;AACD,KAHD,MAGO;AACL;AACD;AACF,GARD;;AAUA;;;;;;;;AAQA,SAAO;AACLJ,SADK;AAELD,WAFK;AAGLE,WAHK;AAILC;AAJK,GAAP;AAMD;;AAED;;;;;;;;;;;AAWO,SAASb,cAAT,CAAyBtS,GAAzB,EAA8B;AACnC,QAAM0T,WAAW,EAAjB;AACA1T,MAAI5W,KAAJ,CAAUpY,OAAV,CAAkBoY,SAAS;AACzB;;;;;AAKA,UAAMkqB,YAAYlqB,MAAMuqB,GAAxB;;AAEA,QAAIvqB,MAAMwqB,UAAN,IAAoBxqB,MAAMwqB,UAAN,CAAiBjlC,MAAjB,GAA0B,CAAlD,EAAqD;AACnD;;;;;;AAMAiD,UAAI+L,KAAJ,CAAW,4DAA2D21B,SAAU,iBAAhF;AACD;;AAED;AACA,UAAMO,iBAAiBzqB,MAAM6Q,SAAN,IAAmB+F,IAAI/F,SAA9C;;AAEA;AACA,QAAI6Z,QAAJ;AACA,QAAIC,WAAJ;;AAEA,QAAIF,cAAJ,EAAoB;AAClBC,iBAAWD,eAAe/6B,QAAf,CAAwB,MAAxB,CAAX;AACAi7B,oBAAcF,eAAe/6B,QAAf,CAAwB,MAAxB,CAAd;AACD,KAHD,MAGO;AACL;AACA;AACA;AACAg7B,iBAAW,IAAX;AACAC,oBAAc,IAAd;AACD;;AAED,QAAInb,OAAJ,EAAa7E,OAAb;AACA;;;;;;;;AAQA,QAAI+f,QAAJ,EAAc;AACZ;;;;;;;AAOA,UAAI1qB,MAAM4qB,IAAV,EAAgB;AACd,SAAC,CAACpb,OAAD,EAAU7E,OAAV,IAAqB3K,MAAM4qB,IAAN,CAAWh0B,KAAX,CAAiB,GAAjB,CAArB;AACF,OAFD,MAEO,IAAIoJ,MAAM6qB,KAAV,EAAiB;AACtBrb,kBAAUxP,MAAM6qB,KAAN,CAAYrY,IAAZ,CAAiBsY,QAAQA,KAAKC,SAAL,KAAmB,SAA5C,EAAuD/lC,KAAjE;AACA2lB,kBAAU3K,MAAM6qB,KAAN,CAAYrY,IAAZ,CAAiBsY,QAAQA,KAAKC,SAAL,KAAmB,OAA5C,EAAqD/lC,KAA/D;AACD;AACF,KAdD,MAcO;AACL;AACAwqB,gBAAU/Z,SAAV;AACAkV,gBAAUlV,SAAV;AACD;;AAED;;;;;;;;;;AAUA,UAAMu1B,UAAU;AACdd,eADc;AAEdlhC,YAAMgX,MAAMhX,IAFE;AAGd0hC,cAHc;AAIdC,iBAJc;AAKdnb,aALc;AAMd7E;AANc,KAAhB;;AASA2f,aAASvkC,IAAT,CAAcilC,OAAd;AACD,GArFD;AAsFA,SAAOV,QAAP;AACD;;AAED;;;;;;;AAOO,SAASnB,cAAT,CAAyBO,SAAzB,EAAoCC,SAApC,EAA+C;AACpD;;;;;;AAMA,QAAMsB,SAAS;AACbb,aAAS30B,SADI;AAEb40B,eAAW50B;AAFE,GAAf;;AAKA,MAAIi0B,UAAUgB,QAAV,KAAuBf,UAAUe,QAArC,EAA+C;AAC7C,QAAIf,UAAUe,QAAd,EAAwB;AACtB;AACAO,aAAOb,OAAP,GAAiBhB,kBAAkBvc,KAAnC;AACD,KAHD,MAGO;AACL;AACAoe,aAAOb,OAAP,GAAiBhB,kBAAkBC,IAAnC;AACD;AACF,GARD,MAQO;AACL;AACA4B,WAAOb,OAAP,GAAiBhB,kBAAkBE,IAAnC;AACD;;AAED,MAAII,UAAUiB,WAAV,KAA0BhB,UAAUgB,WAAxC,EAAqD;AACnD,QAAIhB,UAAUgB,WAAd,EAA2B;AACzB;AACAM,aAAOZ,SAAP,GAAmBjB,kBAAkBvc,KAArC;AACD,KAHD,MAGO;AACL;AACAoe,aAAOZ,SAAP,GAAmBjB,kBAAkBC,IAArC;AACD;AACF,GARD,MAQO;AACL;AACA4B,WAAOZ,SAAP,GAAmBjB,kBAAkBE,IAArC;AACD;;AAED,SAAO2B,MAAP;AACD,C;;;;;;;;;;;;;kBC7PuBjE,Y;QAmDRkE,O,GAAAA,O;QA2EAC,S,GAAAA,S;QAiEAC,S,GAAAA,S;QAoEAC,W,GAAAA,W;QAmDAC,W,GAAAA,W;QAuDAC,c,GAAAA,c;QAuDAC,W,GAAAA,W;QAuDAC,U,GAAAA,U;QAgDAC,W,GAAAA,W;QAwBAC,e,GAAAA,e;QA4DAtL,e,GAAAA,e;;AA3mBhB;;AAGA;;AAEA;;;;;;;AAOe,SAAS2G,YAAT,CAAuBF,SAAvB,EAAkC;AAC/C;AACA;AACA;AACA;AACA,MAAIoE,QAAQpE,SAAR,KAAsBsE,UAAUtE,SAAV,CAA1B,EAAgD;AAC9C,WAAO/pB,sBAAWkP,IAAlB;AACD,GAFD,MAEO,IAAIkf,UAAUrE,SAAV,KAAwBuE,YAAYvE,SAAZ,CAA5B,EAAoD;AACzD,WAAO/pB,sBAAWmP,MAAlB;AACD,GAFM,MAEA,IAAIsf,YAAY1E,SAAZ,CAAJ,EAA4B;AACjC;AACA;AACA,WAAO/pB,sBAAWoP,SAAlB;AACD,GAJM,MAIA,IAAImf,YAAYxE,SAAZ,CAAJ,EAA4B;AACjC,WAAO/pB,sBAAWoF,SAAlB;AACD,GAFM,MAEA,IAAIspB,WAAW3E,SAAX,CAAJ,EAA2B;AAChC;AACA;AACA,WAAO/pB,sBAAWqP,QAAlB;AACD,GAJM,MAIA,IAAImf,eAAezE,SAAf,CAAJ,EAA+B;AACpC,WAAO/pB,sBAAWuF,YAAlB;AACD,GAFM,MAEA,IAAIopB,YAAY5E,SAAZ,CAAJ,EAA4B;AACjC,WAAO,WAAP;AACD,GAFM,MAEA;AACL,WAAO,SAAP;AACD;AACF;;AAED;;;;;;;;;;;;;;;;;;;;;;;;;AAtCA;AA6DO,SAASoE,OAAT,CAAkBpE,SAAlB,EAA6B;AAClC,QAAM,EAAE+C,KAAF,EAASD,OAAT,EAAkBE,OAAlB,EAA2BC,SAA3B,KAAyCjD,SAA/C;;AAEA;;;;;AAKA,QAAM8E,iBAAiBD,gBAAgB7E,SAAhB,KAA8B,CAACzG,gBAAgByG,SAAhB,CAAtD;;AAEA;;;;AAIA,QAAM+E,qBAAqB,CAAChC,MAAM/I,IAAN,CAAW9gB,SAASA,MAAM0qB,QAAN,IAAkB1qB,MAAM2qB,WAA5C,CAA5B;;AAEA;;;AAGA,QAAMmB,iBAAiBlC,QAAQrkC,MAAR,KAAmB,CAA1C;;AAEA;;;AAGA,QAAMwmC,YAAYjC,QAAQvkC,MAAR,GAAiB,CAAnC;;AAEA;;;;AAIA,QAAMymC,aAAalC,QAAQt8B,KAAR,CAAc,CAAC,EAAEwS,KAAF,EAASmqB,OAAT,EAAD,KAAwB;AACvD;AACA,UAAM8B,aACJ9B,QAAQC,OAAR,KAAoBhB,gCAAkBC,IAAtC,IAA+Cc,QAAQC,OAAR,KAAoBhB,gCAAkBE,IAAtC,IAA8C,CAACtpB,MAAM0qB,QADtG;AAEA;AACA,UAAMwB,eACJ/B,QAAQE,SAAR,KAAsBjB,gCAAkBC,IAAxC,IACCc,QAAQE,SAAR,KAAsBjB,gCAAkBE,IAAxC,IAAgD,CAACtpB,MAAM2qB,WAF1D;;AAIA,WAAOsB,cAAcC,YAArB;AACD,GAVkB,CAAnB;;AAYA;;;;AAIA,QAAMC,eAAepC,UAAUv8B,KAAV,CAAgBwS,SAAS;AAC5C,WAAO,CAACA,MAAM0qB,QAAP,IAAmB,CAAC1qB,MAAM2qB,WAAjC;AACD,GAFoB,CAArB;;AAIA,SAAOiB,kBAAkBC,kBAAlB,IAAwCC,cAAxC,IAA0DC,SAA1D,IAAuEC,UAAvE,IAAqFG,YAA5F;AACD;;AAED;;;;;;;;;;;;;;;;;;;;;;AAsBO,SAAShB,SAAT,CAAoBrE,SAApB,EAA+B;AACpC,QAAM,EAAE+C,KAAF,EAASD,OAAT,EAAkBE,OAAlB,EAA2BC,SAA3B,KAAyCjD,SAA/C;;AAEA;;;;;AAKA,QAAMsF,iBAAiB,CAACT,gBAAgB7E,SAAhB,CAAD,IAA+BzG,gBAAgByG,SAAhB,CAAtD;;AAEA;;;AAGA,QAAMuF,YAAYxC,MAAMtkC,MAAN,KAAiB,CAAjB,IAAsBqkC,QAAQrkC,MAAR,KAAmB,CAA3D;;AAEA;;;;AAIA,QAAM+mC,kBAAkBvC,UAAUv8B,KAAV,CAAgBwS,SAAS;AAC/C,WAAO,CAACA,MAAM0qB,QAAP,IAAmB,CAAC1qB,MAAM2qB,WAAjC;AACD,GAFuB,CAAxB;;AAIA;;;AAGA,QAAMoB,YAAYjC,QAAQvkC,MAAR,GAAiB,CAAnC;;AAEA;;;;AAIA,QAAMgnC,mBAAmBzC,QAAQt8B,KAAR,CAAc,CAAC,EAAEwS,KAAF,EAASmqB,OAAT,EAAD,KAAwB;AAC7D,UAAMqC,mBACJrC,QAAQC,OAAR,KAAoBhB,gCAAkBvc,KAAtC,IAAgDsd,QAAQC,OAAR,KAAoBhB,gCAAkBE,IAAtC,IAA8C,CAACtpB,MAAM0qB,QADvG;;AAGA,UAAM+B,qBACJtC,QAAQE,SAAR,KAAsBjB,gCAAkBvc,KAAxC,IACCsd,QAAQE,SAAR,KAAsBjB,gCAAkBE,IAAxC,IAAgD,CAACtpB,MAAM2qB,WAF1D;;AAIA,WAAO6B,oBAAoBC,kBAA3B;AACD,GATwB,CAAzB;;AAWA,SAAOL,kBAAkBC,SAAlB,IAA+BC,eAA/B,IAAkDP,SAAlD,IAA+DQ,gBAAtE;AACD;;AAED;;;;;;;;;;;;;;;;;;;AAmBO,SAASnB,SAAT,CAAoBtE,SAApB,EAA+B;AACpC,QAAM,EAAE+C,KAAF,EAASD,OAAT,EAAkBE,OAAlB,EAA2BC,SAA3B,KAAyCjD,SAA/C;;AAEA;;;;;AAKA,QAAM4F,aAAaf,gBAAgB7E,SAAhB,CAAnB;AACA,QAAM6F,cAAc7C,QAAQt8B,KAAR,CAAc,CAAC,EAAEwS,KAAF,EAASmqB,OAAT,EAAD,KAAwB;AACxD;;;;;;;;;;AAUA,WACE,CAACA,QAAQC,OAAR,KAAoBhB,gCAAkBvc,KAAtC,IAA+Csd,QAAQC,OAAR,KAAoBhB,gCAAkBE,IAAtF,KACAa,QAAQE,SAAR,KAAsBjB,gCAAkBC,IAF1C;AAID,GAfmB,CAApB;;AAiBA;;;;AAIA,QAAMwC,qBAAqB,CAAChC,MAAM/I,IAAN,CAAW9gB,SAASA,MAAM0qB,QAAN,IAAkB1qB,MAAM2qB,WAA5C,CAA5B;;AAEA;;;AAGA,QAAMmB,iBAAiBlC,QAAQrkC,MAAR,KAAmB,CAA1C;;AAEA;;;;AAIA,QAAM+mC,kBAAkBvC,UAAUv8B,KAAV,CAAgBwS,SAAS;AAC/C,WAAO,CAACA,MAAM0qB,QAAP,IAAmB,CAAC1qB,MAAM2qB,WAAjC;AACD,GAFuB,CAAxB;;AAIA,SAAO+B,cAAcC,WAAd,IAA6Bd,kBAA7B,IAAmDC,cAAnD,IAAqEQ,eAA5E;AACD;;AAED;;;;;;;;;;;;;;;;;;;;AAoBO,SAASjB,WAAT,CAAsBvE,SAAtB,EAAiC;AACtC,QAAM,EAAE+C,KAAF,EAASD,OAAT,EAAkBE,OAAlB,EAA2BC,SAA3B,KAAyCjD,SAA/C;;AAEA;;;;AAIA,QAAM8F,YAAYvM,gBAAgByG,SAAhB,CAAlB;AACA,QAAM+F,aAAa/C,QAAQt8B,KAAR,CAAc,CAAC,EAAEwS,KAAF,EAASmqB,OAAT,EAAD,KAAwB;AACvD,WAAOA,QAAQC,OAAR,KAAoBhB,gCAAkBE,IAAtC,IAA8Ca,QAAQE,SAAR,KAAsBjB,gCAAkBvc,KAA7F;AACD,GAFkB,CAAnB;;AAIA;;;AAGA,QAAMwf,YAAYxC,MAAMtkC,MAAN,KAAiB,CAAjB,IAAsBqkC,QAAQrkC,MAAR,KAAmB,CAA3D;;AAEA;;;;AAIA,QAAM+mC,kBAAkBvC,UAAUv8B,KAAV,CAAgBwS,SAAS;AAC/C,WAAO,CAACA,MAAM0qB,QAAP,IAAmB,CAAC1qB,MAAM2qB,WAAjC;AACD,GAFuB,CAAxB;;AAIA,SAAOiC,aAAaC,UAAb,IAA2BR,SAA3B,IAAwCC,eAA/C;AACD;;AAED;;;;;;;;;;;;;;;;;;;;;;;AAuBO,SAAShB,WAAT,CAAsBxE,SAAtB,EAAiC;AACtC,QAAM,EAAE+C,KAAF,EAASD,OAAT,EAAkBE,OAAlB,KAA8BhD,SAApC;;AAEA;;;AAGA,QAAMgG,eAAelD,QAAQrkC,MAAR,KAAmB,CAAxC;;AAEA;;;AAGA,QAAMwnC,mBAAmBlD,MAAMtkC,MAAN,GAAe,CAAf,IAAoBukC,QAAQvkC,MAAR,GAAiB,CAA9D;;AAEA;;;AAGA,QAAMynC,eAAenD,MAAMr8B,KAAN,CAAYwS,SAASA,MAAM0qB,QAA3B,CAArB;;AAEA;;;AAGA,QAAMuC,iBAAiBnD,QAAQt8B,KAAR,CAAc,CAAC,EAAEwS,KAAF,EAASmqB,OAAT,EAAD,KAAwB;AAC3D,WAAOA,QAAQC,OAAR,KAAoBhB,gCAAkBvc,KAAtC,IAA+Csd,QAAQE,SAAR,KAAsBjB,gCAAkBE,IAA9F;AACD,GAFsB,CAAvB;;AAIA;;;;;AAKA,SAAOwD,gBAAgBC,gBAAhB,IAAoCC,YAApC,IAAoDC,cAA3D;AACD;;AAED;;;;;;;;;;;;;;;;;;;;;;AAsBO,SAAS1B,cAAT,CAAyBzE,SAAzB,EAAoC;AACzC,QAAM,EAAE+C,KAAF,EAASD,OAAT,EAAkBE,OAAlB,KAA8BhD,SAApC;;AAEA;;;AAGA,QAAMoG,aAAarD,MAAMtkC,MAAN,KAAiB,CAApC;AACA,QAAMunC,eAAelD,QAAQrkC,MAAR,KAAmB,CAAxC;;AAEA;;;AAGA,QAAM4nC,aAAarD,QAAQvkC,MAAR,GAAiB,CAApC;;AAEA;;;;AAIA,QAAM6nC,kBAAkBtD,QAAQt8B,KAAR,CAAc,CAAC,EAAEwS,KAAF,EAASmqB,OAAT,EAAD,KAAwB;AAC5D,WACEA,QAAQC,OAAR,KAAoBhB,gCAAkBC,IAAtC;AACA;AACA;AACA;AACAc,YAAQE,SAAR,KAAsBjB,gCAAkBC,IAL1C;AAOD,GARuB,CAAxB;;AAUA;;;;;AAKA,SAAO6D,cAAcJ,YAAd,IAA8BK,UAA9B,IAA4CC,eAAnD;AACD;;AAED;;;;;;;;;;;;;;;;;;;AAmBO,SAAS5B,WAAT,CAAsB1E,SAAtB,EAAiC;AACtC,QAAM,EAAE+C,KAAF,EAASD,OAAT,EAAkBE,OAAlB,EAA2BC,SAA3B,KAAyCjD,SAA/C;;AAEA;AACA,MAAI,CAACwE,YAAYxE,SAAZ,CAAL,EAA6B;AAC3B,WAAO,KAAP;AACD;;AAED;;;AAGA,QAAMuG;AACJ;AACAvD,UAAQvkC,MAAR,KAAmB,CAAnB,IACAukC,QAAQ,CAAR,EAAW9pB,KAAX,CAAiBhX,IAAjB,KAA0B,OAD1B;AAEA;AACA8gC,UAAQ,CAAR,EAAWK,OAAX,CAAmBC,OAAnB,KAA+BhB,gCAAkBvc,KAHjD;AAIA;AACAid,UAAQ,CAAR,EAAWK,OAAX,CAAmBE,SAAnB,KAAiCjB,gCAAkBE,IALnD,IAMA,CAACQ,QAAQ,CAAR,EAAW9pB,KAAX,CAAiB2qB,WARpB;;AAUA;;;AAGA,QAAM0B,YAAYxC,MAAMtkC,MAAN,KAAiB,CAAjB,IAAsBqkC,QAAQrkC,MAAR,KAAmB,CAA3D;;AAEA;;;;AAIA,QAAM+nC,oBAAoBvD,UAAUv8B,KAAV,CAAgBwS,SAAS;AACjD,WAAO,CAACA,MAAM0qB,QAAP,IAAmB,CAAC1qB,MAAM2qB,WAAjC;AACD,GAFyB,CAA1B;;AAIA,SAAO0B,aAAaiB,iBAAb,IAAkCD,eAAzC;AACD;;AAED;;;;;;;;;;;;;;;;;;AAkBO,SAAS5B,UAAT,CAAqB3E,SAArB,EAAgC;AACrC,QAAM,EAAE+C,KAAF,EAASD,OAAT,EAAkBE,OAAlB,EAA2BC,SAA3B,KAAyCjD,SAA/C;;AAEA;AACA,MAAI,CAACyE,eAAezE,SAAf,CAAL,EAAgC;AAC9B,WAAO,KAAP;AACD;;AAED;;;AAGA,QAAMyG;AACJ;AACAzD,UAAQvkC,MAAR,KAAmB,CAAnB,IACAukC,QAAQ,CAAR,EAAW9pB,KAAX,CAAiBhX,IAAjB,KAA0B,OAD1B;AAEA;AACA8gC,UAAQ,CAAR,EAAWK,OAAX,CAAmBC,OAAnB,KAA+BhB,gCAAkBC,IAHjD;AAIA;AACAS,UAAQ,CAAR,EAAWK,OAAX,CAAmBE,SAAnB,KAAiCjB,gCAAkBE,IALnD,IAMA,CAACQ,QAAQ,CAAR,EAAW9pB,KAAX,CAAiB2qB,WARpB;;AAUA;;;AAGA,QAAM0B,YAAYxC,MAAMtkC,MAAN,KAAiB,CAAjB,IAAsBqkC,QAAQrkC,MAAR,KAAmB,CAA3D;;AAEA;;;;AAIA,QAAM+nC,oBAAoBvD,UAAUv8B,KAAV,CAAgBwS,SAAS;AACjD,WAAO,CAACA,MAAM0qB,QAAP,IAAmB,CAAC1qB,MAAM2qB,WAAjC;AACD,GAFyB,CAA1B;;AAIA,SAAO0B,aAAaiB,iBAAb,IAAkCC,aAAzC;AACD;;AAED;;;;;;;;;;;AAWO,SAAS7B,WAAT,CAAsB5E,SAAtB,EAAiC;AACtC,QAAM,EAAE+C,KAAF,EAASD,OAAT,EAAkBE,OAAlB,EAA2BC,SAA3B,KAAyCjD,SAA/C;;AAEA;;;AAGA,QAAM0G,WAAW3D,MAAMtkC,MAAN,KAAiB,CAAjB,IAAsBqkC,QAAQrkC,MAAR,KAAmB,CAAzC,IAA8CukC,QAAQvkC,MAAR,KAAmB,CAAlF;;AAEA;;;AAGA,QAAMkoC,eAAe1D,UAAUxkC,MAAV,GAAmB,CAAxC;;AAEA,SAAOioC,YAAYC,YAAnB;AACD;;AAED;;;;;;;;AAQO,SAAS9B,eAAT,CAA0B7E,SAA1B,EAAqC;AAC1C,QAAM,EAAE8C,OAAF,EAAWE,OAAX,EAAoBC,SAApB,KAAkCjD,SAAxC;;AAEA;;;;AAIA,QAAM4G,mBAAmB3D,UAAUjJ,IAAV,CAAe9gB,SAAS;AAC/C,WAAOA,MAAM0qB,QAAN,IAAkB1qB,MAAM2qB,WAA/B;AACD,GAFwB,CAAzB;;AAIA;;;;AAIA,QAAMgD,iBAAiB7D,QAAQhJ,IAAR,CAAa,CAAC,EAAE9gB,KAAF,EAASmqB,OAAT,EAAD,KAAwB;AAC1D;;;;;AAKA,UAAMyD,aACJzD,QAAQC,OAAR,KAAoBhB,gCAAkBC,IAAtC,IAA+Cc,QAAQC,OAAR,KAAoBhB,gCAAkBE,IAAtC,IAA8CtpB,MAAM0qB,QADrG;;AAGA;;;;;AAKA,UAAMmD,eACJ1D,QAAQE,SAAR,KAAsBjB,gCAAkBC,IAAxC,IACCc,QAAQE,SAAR,KAAsBjB,gCAAkBE,IAAxC,IAAgDtpB,MAAM2qB,WAFzD;;AAIA,WAAOiD,cAAcC,YAArB;AACD,GAnBsB,CAAvB;;AAqBA;;;;AAIA,QAAMC,iBAAiBlE,QAAQ9I,IAAR,CAAa9gB,SAAS;AAC3C,WAAOA,MAAM0qB,QAAN,IAAkB1qB,MAAM2qB,WAA/B;AACD,GAFsB,CAAvB;;AAIA;;;;;AAKA,SAAO+C,oBAAoBC,cAApB,IAAsCG,cAA7C;AACD;;AAED;;;;;;;;AAQO,SAASzN,eAAT,CAA0ByG,SAA1B,EAAqC;AAC1C,QAAM,EAAE+C,KAAF,EAASC,OAAT,EAAkBC,SAAlB,KAAgCjD,SAAtC;;AAEA;;;;AAIA,QAAM4G,mBAAmB3D,UAAUjJ,IAAV,CAAe9gB,SAAS;AAC/C,WAAOA,MAAM0qB,QAAN,IAAkB1qB,MAAM2qB,WAA/B;AACD,GAFwB,CAAzB;;AAIA;;;;AAIA,QAAMgD,iBAAiB7D,QAAQhJ,IAAR,CAAa,CAAC,EAAE9gB,KAAF,EAASmqB,OAAT,EAAD,KAAwB;AAC1D,WAAOnqB,MAAM0qB,QAAN,IAAkB1qB,MAAM2qB,WAA/B;AACD,GAFsB,CAAvB;;AAIA;;;;AAIA,QAAMoD,eAAelE,MAAM/I,IAAN,CAAW9gB,SAAS;AACvC,WAAOA,MAAM0qB,QAAN,IAAkB1qB,MAAM2qB,WAA/B;AACD,GAFoB,CAArB;;AAIA;;;;;AAKA,SAAO+C,oBAAoBC,cAApB,IAAsCI,YAA7C;AACD,C;;;;;;;;;;;;;;;;;;kBCpnBuBtF,W;;AAvBxB;;AAGA;;;;AACA;;;;AAFA;AAIA,MAAMjgC,MAAM0F,iBAAWC,SAAX,CAAqB,KAArB,CAAZ;;AAEA;;;;;;;;;;;;;;;AATA;AAwBe,SAASs6B,WAAT,CAAsBuF,QAAtB,EAAgCpX,GAAhC,EAAqCxnB,IAArC,EAA2C;AACxD,QAAMoxB,YAAYC,uBAAaC,KAAb,CAAmB9J,GAAnB,CAAlB;;AAEA,QAAM9W,cAAc,sBAAc0gB,SAAd,CAApB;AACA,MAAI3gB,SAAS,mBAAUC,WAAV,CAAb;;AAEA,MAAI,iBAAQkuB,QAAR,CAAJ,EAAuB;AACrBA,aAASpmC,OAAT,CAAiBqmC,WAAW;AAC1B,UAAI,oBAAWA,OAAX,CAAJ,EAAyB;AACvBzlC,YAAI+L,KAAJ,CAAW,uBAAsB05B,QAAQ54B,IAAK,GAA9C;AACAwK,iBAASouB,QAAQpuB,MAAR,EAAgBzQ,IAAhB,EAAsB0Q,WAAtB,CAAT;AACD,OAHD,MAGO;AACLtX,YAAIqB,KAAJ,CAAU,uCAAV;AACD;AACF,KAPD;AAQD;;AAED,SAAO42B,uBAAayN,KAAb,CAAmBruB,MAAnB,CAAP;AACD,C;;;;;;;;;;;;;;;;;;QCtCesuB,sB,GAAAA,sB;;;;AAJhB;;;;AAIO,SAASA,sBAAT,CAAiCC,iBAAjC,EAAoD;AACzD,QAAMC,oDAA8BD,iBAA9B,CAAN;;AAEA;AACA,MAAI,CAACA,iBAAD,IAAsB,EAAEA,kBAAkB/kB,KAAlB,IAA2B,OAAO+kB,kBAAkB/kB,KAAzB,KAAmC,QAAhE,CAA1B,EAAqG;AACnGglB,2BAAuBhlB,KAAvB,GAA+B,IAA/B;AACD;AACD,MAAI,CAAC+kB,iBAAD,IAAsB,EAAEA,kBAAkB7kB,KAAlB,IAA2B,OAAO6kB,kBAAkB7kB,KAAzB,KAAmC,QAAhE,CAA1B,EAAqG;AACnG8kB,2BAAuB9kB,KAAvB,GAA+B,IAA/B;AACD;AACD,SAAO8kB,sBAAP;AACD,C;;;;;;;;;;;;;QCNeC,mB,GAAAA,mB;AAThB;;;;;;;;;AASO,SAASA,mBAAT,CAA8BC,WAA9B,EAA2CC,WAA3C,EAAwDC,YAAxD,EAAsE7d,YAAtE,EAAoF;AACzF,QAAM8d,mBAAmB,EAAzB;AACA,MAAI9d,YAAJ,EAAkB;AAChB,QAAIA,aAAa+d,qBAAjB,EAAwC;AACtC,WAAK,MAAMC,WAAX,IAA0BH,YAA1B,EAAwC;AACtCC,yBAAiBE,YAAYxmB,EAA7B,IAAmCwI,aAAa+d,qBAAhD;AACD;AACF;AACD,QAAI/d,aAAaie,oBAAjB,EAAuC;AACrC,WAAK,MAAMC,UAAX,IAAyBP,WAAzB,EAAsC;AACpCG,yBAAiBI,WAAW1mB,EAA5B,IAAkCwI,aAAaie,oBAA/C;AACD;AACF;AACD,QAAIje,aAAame,oBAAjB,EAAuC;AACrC,WAAK,MAAMC,UAAX,IAAyBR,WAAzB,EAAsC;AACpCE,yBAAiBM,WAAW5mB,EAA5B,IAAkCwI,aAAame,oBAA/C;AACD;AACF;AACF;;AAED,SAAOL,gBAAP;AACD,C;;;;;;;;;;;;;QCXe/vB,mB,GAAAA,mB;QAgBAswB,gB,GAAAA,gB;QA0BAC,kB,GAAAA,kB;QA2DAC,iB,GAAAA,iB;;AAvHhB;;AAEA,MAAM3mC,MAAM0F,iBAAWC,SAAX,CAAqB,YAArB,CAAZ;;AAEA;;;;;;;;;;;;;;AALA;AAmBO,SAASwQ,mBAAT,CAA8BkB,MAA9B,EAAsCzQ,IAAtC,EAA4C0Q,WAA5C,EAAyD;AAC9D,OAAK,MAAMC,KAAX,IAAoBF,OAAOG,KAA3B,EAAkC;AAChC,QAAID,MAAME,MAAN,IAAgBF,MAAMG,WAA1B,EAAuC;AACrC1X,UAAI+L,KAAJ,CAAU,4CAAV;AACA,aAAOwL,MAAME,MAAb;AACD;AACF;AACD,SAAOJ,MAAP;AACD;;AAED;;;;;;AAMO,SAASovB,gBAAT,CAA2BG,IAA3B,EAAiC;AACtC,SAAO,SAASC,cAAT,CAAyBxvB,MAAzB,EAAiCzQ,IAAjC,EAAuC0Q,WAAvC,EAAoD;AACzD;AACA;AACA,UAAMwvB,WAAWzvB,OAAOG,KAAP,CAAa,CAAb,EAAgBuvB,KAAjC;AACA/mC,QAAI+L,KAAJ,CAAW,+BAA8B+6B,QAAS,OAAMF,IAAK,GAA7D;;AAEA;AACAvvB,WAAOG,KAAP,CAAatE,GAAb,CAAiBsE,SAAS;AACxBA,YAAMuvB,KAAN,GAAcH,IAAd;AACA,aAAOpvB,KAAP;AACD,KAHD;;AAKA,WAAOH,MAAP;AACD,GAbD;AAcD;;AAED;;;;;;;;;AASO,SAASqvB,kBAAT,CAA6BrvB,MAA7B,EAAqCzQ,IAArC,EAA2C0Q,WAA3C,EAAwD;AAC7D;;;;AAIA,WAAS0vB,wBAAT,CAAmCC,KAAnC,EAA0C;AACxC,WAAO,CACL;AACEzmC,YAAM,IADR,EACc;AACZymC;AAFF,KADK,EAKL;AACEzmC,YAAM,MADR,EACgB;AACdymC,aAAOA,QAAQ;AAFjB,KALK,CAAP;AAUD;;AAED,MAAIrgC,KAAK6hB,SAAT,EAAoB;AAClB;;AAEA,QAAI7hB,KAAK6hB,SAAL,CAAexrB,IAAnB,EAAyB;AACvB;AACAoa,aAAOoR,SAAP,GAAmBue,yBAAyBpgC,KAAK6hB,SAAL,CAAexrB,IAAxC,CAAnB;AACD;;AAED,QAAI2J,KAAK6hB,SAAL,CAAe5H,KAAnB,EAA0B;AACxB;AACAxJ,aAAOG,KAAP,CACGxY,MADH,CACUwY,SAASA,MAAMhX,IAAN,KAAe,OADlC,EAEGpB,OAFH,CAEWoY,SAAS;AAChBA,cAAMiR,SAAN,GAAkBue,yBAAyBpgC,KAAK6hB,SAAL,CAAe5H,KAAxC,CAAlB;AACD,OAJH;AAKD;;AAED,QAAIja,KAAK6hB,SAAL,CAAe1H,KAAnB,EAA0B;AACxB;AACA1J,aAAOG,KAAP,CACGxY,MADH,CACUwY,SAASA,MAAMhX,IAAN,KAAe,OADlC,EAEGpB,OAFH,CAEWoY,SAAS;AAChBA,cAAMiR,SAAN,GAAkBue,yBAAyBpgC,KAAK6hB,SAAL,CAAe1H,KAAxC,CAAlB;AACD,OAJH;AAKD;AACF;AACD,SAAO1J,MAAP;AACD;;AAED;;;;;;;;;;;;AAYO,SAASsvB,iBAAT,CAA4BO,gBAA5B,EAA8ClhB,OAA9C,EAAuDnG,MAAvD,EAA+D;AACpE,QAAMsnB,YAAY;AAChBnhB,WADgB;AAEhB6B,uBAAmB;AACjBG,qBAAenI,OAAOwS,YADL;AAEjBpK,mBAAapI,OAAOsS;AAFH,KAFH;AAMhBxM,gBAAY;AACVvkB,iBAAW8lC;AADD;AANI,GAAlB;AAUA,MAAIrnB,OAAOvN,UAAX,EAAuB;AACrB60B,cAAUxhB,UAAV,CAAqBrT,UAArB,GAAkCuN,OAAOvN,UAAzC;AACD;AACD,MAAIuN,OAAOqT,UAAX,EAAuB;AACrBiU,cAAUxhB,UAAV,CAAqBuN,UAArB,GAAkCrT,OAAOqT,UAAzC;AACD;AACD,SAAOiU,SAAP;AACD,C;;;;;;;;;;;;;QCjIeC,gB,GAAAA,gB;;AAThB;;AAEA;;;;;;;AAOO,SAASA,gBAAT,CAA2BhZ,GAA3B,EAAgC/W,MAAhC,EAAwC;AAC7C,QAAMgwB,oBAAoB,iCAAgBjZ,GAAhB,CAA1B;AACA,QAAMkZ,qBAAqB,iCAAgBjwB,MAAhB,CAA3B;;AAEA,MAAIgwB,qBAAqBC,kBAAzB,EAA6C;AAC3C,WAAOD,sBAAsBC,kBAA7B;AACD;AACF,C;;;;;;;;;;;;;QCCiBpoB,kB,GAAAA,kB;;AAhBlB;;IAAYmB,W;;AAGZ;;AAGA;;;;AAEA;;;;;;;;;;AANA;AAcO,UAAWnB,kBAAX,CAA+B0N,IAA/B,EAAqCzrB,MAArC,EAA6C;AAClD,QAAM,EAAEiV,MAAF,KAAawW,IAAnB;;AAEA,QAAM5sB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,CAAZ;;AAEA,QAAM,EAAEnG,IAAF,KAAW2B,OAAOmF,OAAxB;;AAEA;AACA,MAAI9G,SAAS,OAAT,IAAoBA,SAAS,OAAjC,EAA0C;AACxC,UAAM+nC,WAAY,yCAAwC/nC,IAAK,2CAA/D;AACAQ,QAAI4G,IAAJ,CAAS2gC,QAAT;AACA,UAAM,mBAAK,CAACpmC,OAAOuJ,IAAP,CAAYwV,QAAb,EAAuB,QAAvB,CAAL,EAAuC;AAC3C7e,aAAOkmC;AADoC,KAAvC,CAAN;AAGA;AACD;;AAEDvnC,MAAI4G,IAAJ,CAAU,uDAAsDpH,IAAK,IAArE;;AAEA;AACA,QAAM4nB,SAAS,MAAM,mBAAK,CAAChR,OAAOoxB,aAAR,EAAuB,oBAAvB,CAAL,EAAmDhoC,IAAnD,CAArB;AACAQ,MAAI+L,KAAJ,CAAU,oCAAV,EAAgDqb,MAAhD;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAM,mBAAK,CAACjmB,OAAOuJ,IAAP,CAAYwV,QAAb,EAAuB,SAAvB,CAAL,EAAwCkH,MAAxC,CAAN;;AAEA;AACA;AACA,QAAM,kBACJ/G,YAAYlB,wBAAZ,CAAqC;AACnC3f,QADmC;AAEnC4nB;AAFmC,GAArC,CADI,CAAN;AAMD;;AAjDD;AANA,c;;;;;;;;;;;;;QCsCkBqU,S,GAAAA,S;QAiJAoE,iB,GAAAA,iB;QA6EA9D,mB,GAAAA,mB;;AAnQlB;;AACA;;AAGA;;AACA;;;;AACA;;AAGA;;IAAY0L,Q;;AAGZ;;;;;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;AANA;AA6BO,UAAWhM,SAAX,CAAsB7O,IAAtB,EAA4B7M,gBAA5B,EAA8C+b,cAA9C,EAA8D;AACnE,QAAM,EAAE1lB,MAAF,KAAawW,IAAnB;;AAEA,QAAM5sB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6Bm2B,eAAezlB,MAA5C,CAAZ;AACArW,MAAI4G,IAAJ,CAAS,2CAAT;;AAEA,QAAM;AACJ2gB,gBADI;AAEJqN,YAFI;AAGJ5I,kBAHI;AAIJvD,aAJI;AAKJL,gBALI;AAMJ/R,UANI;AAOJqlB,sBAPI;AAQJjQ,sBARI;AASJC,iBATI;AAUJK;AAVI,MAWF+P,cAXJ;;AAaA,QAAM,EAAEkB,MAAF,EAAU37B,KAAV,KAAoB,MAAM,mBAAKomC,SAASC,WAAd,EAA2BtxB,MAA3B,EAAmC2J,gBAAnC,CAAhC;;AAEA,MAAI1e,KAAJ,EAAW;AACTrB,QAAI+L,KAAJ,CAAU,6CAAV;AACA,WAAO,EAAE1K,KAAF,EAAP;AACD;;AAED;AACA,QAAMwV,UAAU,MAAM,mBAAK,CAACT,OAAOU,cAAR,EAAwB,QAAxB,CAAL,EAAwC;AAC5DgjB,UAAM;AACJ6N,iBAAW;AACTpgB,oBADS;AAETiE,oBAAYoJ,SAASpU;AAFZ,OADP;AAKJwL,oBALI;AAMJ0P,wBANI;AAOJjQ,wBAPI;AAQJC,mBARI;AASJK;AATI;AADsD,GAAxC,CAAtB;AAaA/rB,MAAI+L,KAAJ,CAAU,kCAAV,EAA8C,EAAE4K,iBAAiBE,QAAQ+I,EAA3B,EAA9C;;AAEA;AACA,QAAM,kBACJS,qBAAYtE,cAAZ,CAA2B1F,MAA3B,EAAmC;AACjCM,qBAAiBE,QAAQ+I;AADQ,GAAnC,CADI,CAAN;;AAMA;AACA,MAAIqmB,eAAe,EAAnB;AACA,MAAIF,cAAc,EAAlB;AACA,MAAIC,cAAc,EAAlB;AACA,MAAI4B,YAAY,EAAhB;;AAEA,OAAK,MAAMC,SAAX,IAAwB7K,MAAxB,EAAgC;AAC9B,UAAMlb,SAAS,MAAM,mBAAK,CAAC+lB,UAAUrwB,KAAX,EAAkB,WAAlB,CAAL,CAArB;AACA,QAAIqwB,UAAUrnC,IAAV,KAAmB,QAAvB,EAAiC;AAC/BylC,qBAAe,CAAC,GAAGA,YAAJ,EAAkB,GAAGnkB,MAArB,CAAf;AACD,KAFD,MAEO,IAAI+lB,UAAUrnC,IAAV,KAAmB,OAAvB,EAAgC;AACrCulC,oBAAc,CAAC,GAAGA,WAAJ,EAAiB,GAAGjkB,MAApB,CAAd;AACD,KAFM,MAEA,IAAI+lB,UAAUrnC,IAAV,KAAmB,OAAvB,EAAgC;AACrCwlC,oBAAc,CAAC,GAAGA,WAAJ,EAAiB,GAAGlkB,MAApB,CAAd;AACD;AACD8lB,gBAAY,CAAC,GAAGA,SAAJ,EAAe,GAAG9lB,MAAlB,CAAZ;AACD;;AAED,QAAMokB,mBAAmB,+BAAoBH,WAApB,EAAiCC,WAAjC,EAA8CC,YAA9C,EAA4D7d,YAA5D,CAAzB;;AAEA,QAAM,mBAAK,CAACvR,OAAD,EAAU,WAAV,CAAL,EAA6B+wB,SAA7B,EAAwC1B,gBAAxC,CAAN;;AAEA;;;;AAIA,MAAI7X,QAAQ,MAAM,mBAAK,CAACxX,OAAD,EAAU,aAAV,CAAL,CAAlB;;AAEA,QAAMmpB,oBAAoB,MAAM,qBAAOtW,qBAAP,CAAhC;AACA;AACA;AACA2E,QAAMD,GAAN,GAAY,MAAM,mBAAK6R,kBAAL,EAAkBD,kBAAkBtd,WAApC,EAAiD2L,MAAMD,GAAvD,EAA4D;AAC5E/X,UAD4E;AAE5E7V,UAAM6tB,MAAM7tB,IAFgE;AAG5E0/B,UAAM,KAHsE;AAI5EC,cAAU,OAJkE;AAK5E1X;AAL4E,GAA5D,CAAlB;AAOA,MAAI;AACF4F,YAAQ,MAAM,mBAAK,CAACxX,OAAD,EAAU,qBAAV,CAAL,EAAuCwX,KAAvC,CAAd;AACD,GAFD,CAEE,OAAOnyB,CAAP,EAAU;AACV,WAAO;AACLmF,aAAO,IADF;AAELk6B,gBAAU,IAFL;AAGL9qB,iBAAW,IAHN;AAIL+qB,gBAAU;AAJL,KAAP;AAMD;AACD;AACA;AACA;AACA;AACA;AACA;AACA,QAAMnkB,SAAS,MAAM,mBAAK4oB,kBAAL,EAAkBD,kBAAkBtd,WAApC,EAAiD2L,MAAMD,GAAvD,EAA4D;AAC/E/X,UAD+E;AAE/E7V,UAAM6tB,MAAM7tB,IAFmE;AAG/E0/B,UAAM,MAHyE;AAI/EC,cAAU,OAJqE;AAK/E1X;AAL+E,GAA5D,CAArB;;AAQAzoB,MAAI4G,IAAJ,CAAS,oDAAT;AACA,SAAO;AACLvF,WAAO,KADF;AAELk6B,cAAUlkB,MAFL;AAGL5G,eAAWoG,QAAQ+I,EAHd;AAIL4b,cAAUwB,OAAO9pB,GAAP,CAAWsE,SAASA,MAAMA,KAAN,CAAYoI,EAAhC;AAJL,GAAP;AAMD;;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;AAlJA;;;AARA;AAJA;AAuLO,UAAWigB,iBAAX,CAA8BjT,IAA9B,EAAoCkP,cAApC,EAAoD;AACzD,QAAM,EAAE1lB,MAAF,KAAawW,IAAnB;AACA,QAAM;AACJrF,gBADI;AAEJqN,YAFI;AAGJ5I,kBAHI;AAIJ3V,UAJI;AAKJoV,sBALI;AAMJC,iBANI;AAOJgQ,sBAPI;AAQJ3P;AARI,MASF+P,cATJ;AAUA,QAAMzN,QAAQyN,eAAezN,KAA7B;;AAEA,QAAMruB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6B0Q,MAA7B,CAAZ;AACArW,MAAI4G,IAAJ,CAAS,4CAAT;;AAEA,QAAMiQ,UAAU,MAAM,mBAAK,CAACT,OAAOU,cAAR,EAAwB,QAAxB,CAAL,EAAwC;AAC5DgjB,UAAM;AACJ6N,iBAAW;AACTpgB,oBADS;AAETiE,oBAAYoJ,SAASpU;AAFZ,OADP;AAKJwL,oBALI;AAMJP,wBANI;AAOJC,mBAPI;AAQJgQ,wBARI;AASJ3P;AATI;AADsD,GAAxC,CAAtB;;AAcA;AACA,QAAM,kBACJ1L,qBAAYtE,cAAZ,CAA2B1F,MAA3B,EAAmC;AACjCM,qBAAiBE,QAAQ+I;AADQ,GAAnC,CADI,CAAN;;AAMA;;;;;AAKA,QAAMogB,oBAAoB,MAAM,qBAAOtW,qBAAP,CAAhC;AACA2E,QAAMD,GAAN,GAAY,MAAM,mBAAK6R,kBAAL,EAAkBD,kBAAkBtd,WAApC,EAAiD2L,MAAMD,GAAvD,EAA4D;AAC5E/X,UAD4E;AAE5E7V,UAAM6tB,MAAM7tB,IAFgE;AAG5E0/B,UAAM,KAHsE;AAI5EC,cAAU;AAJkE,GAA5D,CAAlB;;AAOA,QAAM,mBAAK,CAACtpB,OAAD,EAAU,cAAV,CAAL,EAAgC;AACpCrW,UAAM,OAD8B;AAEpC4tB,SAAKC,MAAMD;AAFyB,GAAhC,CAAN;;AAKApuB,MAAI4G,IAAJ,CAAS,qDAAT;AACA,SAAOiQ,QAAQ+I,EAAf;AACD;;AAED;;;;;;;;;;;;;;;;;AAiBO,UAAWmc,mBAAX,CAAgCnP,IAAhC,EAAsC7M,gBAAtC,EAAwD+b,cAAxD,EAAwE;AAC7E,QAAM,EAAE1lB,MAAF,KAAawW,IAAnB;AACA,QAAM,EAAEnc,SAAF,EAAagY,SAAb,EAAwBL,YAAxB,EAAsC/R,MAAtC,KAAiDylB,cAAvD;;AAEA,QAAM97B,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6B0Q,MAA7B,CAAZ;AACArW,MAAI4G,IAAJ,CAAS,2CAAT;;AAEA;AACA,QAAMiQ,UAAU,MAAM,mBAAK,CAACT,OAAOU,cAAR,EAAwB,KAAxB,CAAL,EAAqCrG,SAArC,CAAtB;;AAEA,MAAI,CAACoG,OAAL,EAAc;AACZ7W,QAAIqB,KAAJ,CAAW,yBAAwBoP,SAAU,aAA7C;AACA;AACD;;AAED,QAAM,EAAEusB,MAAF,EAAU37B,KAAV,KAAoB,MAAM,mBAAKomC,SAASC,WAAd,EAA2BtxB,MAA3B,EAAmC2J,gBAAnC,CAAhC;;AAEA,MAAI1e,KAAJ,EAAW;AACTrB,QAAI+L,KAAJ,CAAU,6CAAV;AACA,WAAO,EAAE1K,KAAF,EAAP;AACD;;AAED,MAAI4kC,eAAe,EAAnB;AACA,MAAIF,cAAc,EAAlB;AACA,MAAIC,cAAc,EAAlB;AACA,MAAI4B,YAAY,EAAhB;;AAEA;AACA,OAAK,MAAMC,SAAX,IAAwB7K,MAAxB,EAAgC;AAC9B,UAAMlb,SAAS,MAAM,mBAAK,CAAC+lB,UAAUrwB,KAAX,EAAkB,WAAlB,CAAL,CAArB;AACA,QAAIqwB,UAAUrnC,IAAV,KAAmB,QAAvB,EAAiC;AAC/BylC,qBAAe,CAAC,GAAGA,YAAJ,EAAkB,GAAGnkB,MAArB,CAAf;AACD,KAFD,MAEO,IAAI+lB,UAAUrnC,IAAV,KAAmB,OAAvB,EAAgC;AACrCulC,oBAAc,CAAC,GAAGA,WAAJ,EAAiB,GAAGjkB,MAApB,CAAd;AACD,KAFM,MAEA,IAAI+lB,UAAUrnC,IAAV,KAAmB,OAAvB,EAAgC;AACrCwlC,oBAAc,CAAC,GAAGA,WAAJ,EAAiB,GAAGlkB,MAApB,CAAd;AACD;AACD8lB,gBAAY,CAAC,GAAGA,SAAJ,EAAe,GAAG9lB,MAAlB,CAAZ;AACD;;AAED,QAAMokB,mBAAmB,+BAAoBH,WAApB,EAAiCC,WAAjC,EAA8CC,YAA9C,EAA4D7d,YAA5D,CAAzB;;AAEA,QAAM,mBAAK,CAACvR,OAAD,EAAU,WAAV,CAAL,EAA6B+wB,SAA7B,EAAwC1B,gBAAxC,CAAN;;AAEA;;;;AAIA,MAAI3kB,SAAS,MAAM,mBAAK,CAAC1K,OAAD,EAAU,cAAV,CAAL,CAAnB;AACA,QAAMmpB,oBAAoB,MAAM,qBAAOtW,qBAAP,CAAhC;AACA;AACAnI,SAAO6M,GAAP,GAAa,MAAM,mBAAK6R,kBAAL,EAAkBD,kBAAkBtd,WAApC,EAAiDnB,OAAO6M,GAAxD,EAA6D;AAC9E/X,UAD8E;AAE9E7V,UAAM+gB,OAAO/gB,IAFiE;AAG9E0/B,UAAM,KAHwE;AAI9EC,cAAU,OAJoE;AAK9E1X;AAL8E,GAA7D,CAAnB;AAOA,MAAI;AACFlH,aAAS,MAAM,mBAAK,CAAC1K,OAAD,EAAU,qBAAV,CAAL,EAAuC0K,MAAvC,CAAf;AACD,GAFD,CAEE,OAAOrlB,CAAP,EAAU;AACV,WAAO;AACLmF,aAAO,IADF;AAEL26B,iBAAW,IAFN;AAGLR,gBAAU;AAHL,KAAP;AAKD;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,QAAMnkB,SAAS,MAAM,mBAAK4oB,kBAAL,EAAkBD,kBAAkBtd,WAApC,EAAiDnB,OAAO6M,GAAxD,EAA6D;AAChF/X,UADgF;AAEhF7V,UAAM+gB,OAAO/gB,IAFmE;AAGhF0/B,UAAM,MAH0E;AAIhFC,cAAU,OAJsE;AAKhF1X;AALgF,GAA7D,CAArB;;AAQAzoB,MAAI4G,IAAJ,CAAS,oDAAT;;AAEA,SAAO;AACLvF,WAAO,KADF;AAEL26B,eAAW3kB,MAFN;AAGLmkB,cAAUwB,OAAO9pB,GAAP,CAAWsE,SAASA,MAAMA,KAAN,CAAYoI,EAAhC;AAHL,GAAP;AAKD,C;;;;;;;;;;;;;QC9UiB8nB,W,GAAAA,W;;AAflB;;AACA;;;;AAGA;;;;AAEA,MAAM1nC,MAAM0F,iBAAWC,SAAX,CAAqB,WAArB,CAAZ;;AAEA;;;;;;;;;AALA;AAYO,UAAW+hC,WAAX,CAAwBtxB,MAAxB,EAAgC2J,gBAAhC,EAAkD;AACvD/f,MAAI+L,KAAJ,CAAU,kCAAV,EAA8CgU,gBAA9C;;AAEA;AACA,QAAMrN,SAAS,EAAEsqB,QAAQ,EAAV,EAAc37B,OAAO,KAArB,EAAf;;AAEA,MAAI;AACF,QAAI0e,iBAAiBkB,WAArB,EAAkC;AAChC,YAAM6mB,wBAAwB;AAC5B/mB,eAAOhB,iBAAiBkB;AADI,OAA9B;;AAIA,YAAM8mB,mBAAmB,MAAM,mBAAK,CAAC3xB,OAAOoB,KAAR,EAAe,mBAAf,CAAL,EAA0CswB,qBAA1C,CAA/B;AACAp1B,aAAOsqB,MAAP,CAAcz/B,IAAd,CAAmB;AACjBiD,cAAM,QADW;AAEjBgX,eAAOuwB;AAFU,OAAnB;AAID;;AAED,QAAIhoB,iBAAiBc,KAArB,EAA4B;AAC1B,YAAMmnB,mBAAmB;AACvBnnB,eAAOd,iBAAiBc;AADD,OAAzB;AAGA,YAAMonB,aAAa,MAAM,mBAAK,CAAC7xB,OAAOoB,KAAR,EAAe,aAAf,CAAL,EAAoCwwB,gBAApC,CAAzB;AACAt1B,aAAOsqB,MAAP,CAAcz/B,IAAd,CAAmB;AACjBiD,cAAM,OADW;AAEjBgX,eAAOywB;AAFU,OAAnB;AAID;;AAED,QAAIloB,iBAAiBgB,KAArB,EAA4B;AAC1B,YAAMmnB,mBAAmB;AACvBnnB,eAAOhB,iBAAiBgB;AADD,OAAzB;AAGA,YAAMonB,aAAa,MAAM,mBAAK,CAAC/xB,OAAOoB,KAAR,EAAe,aAAf,CAAL,EAAoC0wB,gBAApC,CAAzB;AACAx1B,aAAOsqB,MAAP,CAAcz/B,IAAd,CAAmB;AACjBiD,cAAM,OADW;AAEjBgX,eAAO2wB;AAFU,OAAnB;AAID;AACF,GAlCD,CAkCE,OAAOpd,GAAP,EAAY;AACZ,QAAIqd,UAAJ;AACA,QAAIrd,IAAIle,IAAJ,KAAa,sBAAjB,EAAyC;AACvCu7B,mBAAc,0CAAyCrd,IAAIsd,UAAW,GAAtE;AACD,KAFD,MAEO;AACLD,mBAAc,gCAA+Brd,IAAIle,IAAK,oBAAmBke,IAAI9kB,OAAQ,GAArF;AACD;;AAEDjG,QAAI4G,IAAJ,CAASwhC,UAAT;;AAEA;AACA,SAAK,MAAMP,SAAX,IAAwBn1B,OAAOsqB,MAA/B,EAAuC;AACrC,YAAM,mBAAK,CAAC6K,UAAUrwB,KAAX,EAAkB,MAAlB,CAAL,CAAN;AACD;;AAED9E,WAAOrR,KAAP,GAAe,IAAI2E,gBAAJ,CAAe;AAC5BC,eAASmiC,UADmB;AAE5BjhC,YAAMqP,kBAAU8xB;AAFY,KAAf,CAAf;AAID;;AAED,SAAO51B,MAAP;AACD,C;;;;;;;;;;;;;;;;;;QCrDiBmsB,Y,GAAAA,Y;QAiBAlD,S,GAAAA,S;QAuBAmD,W,GAAAA,W;QA0FA7C,a,GAAAA,a;QAsEAgB,c,GAAAA,c;QA+FAC,iB,GAAAA,iB;QA+FAa,kB,GAAAA,kB;;AA7ZlB;;;;AACA;;AAGA;;AACA;;;;AACA;;AAGA;;IAAY0J,Q;;AAGZ;;AACA;;;;;;AAFA;;;AARA;AAJA;AAgBA,MAAMznC,MAAM0F,iBAAWC,SAAX,CAAqB,WAArB,CAAZ;;AAEA;;;;;;;;AATA;AAeO,UAAWk5B,YAAX,CAAyBzoB,MAAzB,EAAiC3F,SAAjC,EAA4C;AACjD,QAAMoG,UAAU,MAAM,mBAAK,CAACT,OAAOU,cAAR,EAAwB,KAAxB,CAAL,EAAqCrG,SAArC,CAAtB;AACA,MAAI,CAACoG,OAAL,EAAc;AACZ7W,QAAI+L,KAAJ,CAAW,kBAAiB0E,SAAU,aAAtC;AACA;AACD;;AAED,QAAM,mBAAK,CAACoG,OAAD,EAAU,cAAV,CAAL,CAAN;AACD;;AAED;;;;;;;AAOO,UAAW8kB,SAAX,CAAsBvlB,MAAtB,EAA8B3F,SAA9B,EAAyC;AAC9C,QAAMoG,UAAU,MAAM,mBAAK,CAACT,OAAOU,cAAR,EAAwB,KAAxB,CAAL,EAAqCrG,SAArC,CAAtB;AACA,MAAI,CAACoG,OAAL,EAAc;AACZ7W,QAAI+L,KAAJ,CAAW,kBAAiB0E,SAAU,aAAtC;AACA;AACD;;AAED,QAAM,kBAAIoG,QAAQgT,WAAR,CAAoB3W,GAApB,CAAwBmmB,SAAS,mBAAK,CAACA,KAAD,EAAQ,SAAR,CAAL,CAAjC,CAAJ,CAAN;;AAEA,QAAM,mBAAK,CAACxiB,OAAD,EAAU,KAAV,CAAL,CAAN;AACD;;AAED;;;;;;;;;;;AAWO,UAAWioB,WAAX,CAAwBlS,IAAxB,EAA8ByB,KAA9B,EAAqC1X,eAArC,EAAsD8R,SAAtD,EAAiE;AACtE,QAAM,EAAErS,MAAF,KAAawW,IAAnB;AACA,QAAM/V,UAAU,MAAM,mBAAK,CAACT,OAAOU,cAAR,EAAwB,KAAxB,CAAL,EAAqCH,eAArC,CAAtB;;AAEA,MAAI,CAACE,OAAL,EAAc;AACZ7W,QAAI+L,KAAJ,CAAW,kBAAiB4K,eAAgB,aAA5C;AACA;AACD;;AAED,QAAM,EAAEiJ,IAAIvJ,MAAN,KAAiB,MAAM,qBAAOoT,mCAAP,EAAiC9S,eAAjC,CAA7B;;AAEA;;;;;AAKA,QAAMqpB,oBAAoB,MAAM,qBAAOtW,qBAAP,CAAhC;AACA2E,UAAQ,MAAM,mBAAK4R,kBAAL,EAAkBD,kBAAkBtd,WAApC,EAAiD2L,KAAjD,EAAwD;AACpEhY,UADoE;AAEpE7V,UAAM,OAF8D;AAGpE0/B,UAAM,KAH8D;AAIpEC,cAAU;AAJ0D,GAAxD,CAAd;;AAOA;AACA,QAAM9+B,QAAQ,MAAM,mBAAK,CAACwV,OAAD,EAAU,cAAV,CAAL,EAAgC;AAClDrW,UAAM,OAD4C;AAElD4tB,SAAKC;AAF6C,GAAhC,CAApB;;AAKA,MAAIhtB,KAAJ,EAAW;AACT,WAAO,EAAEA,KAAF,EAAP;AACD;;AAED;;;;AAIA,MAAIkgB,SAAS,MAAM,mBAAK,CAAC1K,OAAD,EAAU,cAAV,CAAL,CAAnB;;AAEA;AACA0K,SAAO6M,GAAP,GAAa,MAAM,mBAAK6R,kBAAL,EAAkBD,kBAAkBtd,WAApC,EAAiDnB,OAAO6M,GAAxD,EAA6D;AAC9E/X,UAD8E;AAE9E7V,UAAM+gB,OAAO/gB,IAFiE;AAG9E0/B,UAAM,KAHwE;AAI9EC,cAAU,OAJoE;AAK9E1X;AAL8E,GAA7D,CAAnB;;AAQA,MAAI;AACFlH,aAAS,MAAM,mBAAK,CAAC1K,OAAD,EAAU,qBAAV,CAAL,EAAuC0K,MAAvC,CAAf;AACD,GAFD,CAEE,OAAOrlB,CAAP,EAAU;AACV,WAAO;AACLmF,aAAO,IADF;AAEL26B,iBAAW;AAFN,KAAP;AAID;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,QAAM3kB,SAAS,MAAM,mBAAK4oB,kBAAL,EAAkBD,kBAAkBtd,WAApC,EAAiDnB,OAAO6M,GAAxD,EAA6D;AAChF/X,UADgF;AAEhF7V,UAAM+gB,OAAO/gB,IAFmE;AAGhF0/B,UAAM,MAH0E;AAIhFC,cAAU,OAJsE;AAKhF1X;AALgF,GAA7D,CAArB;;AAQA,SAAO;AACLuT,eAAW3kB;AADN,GAAP;AAGD;;AAED;;;;;;;;;;;;;AAaO,UAAW4kB,aAAX,CAA0BrP,IAA1B,EAAgCnc,SAAhC,EAA2CuuB,eAA3C,EAA4DvW,SAA5D,EAAuE;AAC5E,QAAM,EAAErS,MAAF,KAAawW,IAAnB;AACA,QAAM/V,UAAU,MAAM,mBAAK,CAACT,OAAOU,cAAR,EAAwB,KAAxB,CAAL,EAAqCrG,SAArC,CAAtB;;AAEA,MAAI,CAACoG,OAAL,EAAc;AACZ7W,QAAI+L,KAAJ,CAAW,kBAAiB0E,SAAU,aAAtC;AACA;AACD;;AAED,QAAM,EAAEmP,IAAIvJ,MAAN,KAAiB,MAAM,qBAAOoT,mCAAP,EAAiChZ,SAAjC,CAA7B;;AAEA;;;;AAIA;AACA;AACA,MAAI4d,QAAQ,MAAM,mBAAK,CAACxX,OAAD,EAAU,aAAV,CAAL,EAA+B;AAC/CmoB;AAD+C,GAA/B,CAAlB;AAGA,QAAMgB,oBAAoB,MAAM,qBAAOtW,qBAAP,CAAhC;AACA;AACA2E,QAAMD,GAAN,GAAY,MAAM,mBAAK6R,kBAAL,EAAkBD,kBAAkBtd,WAApC,EAAiD2L,MAAMD,GAAvD,EAA4D;AAC5E/X,UAD4E;AAE5E7V,UAAM6tB,MAAM7tB,IAFgE;AAG5E0/B,UAAM,KAHsE;AAI5EC,cAAU,OAJkE;AAK5E1X;AAL4E,GAA5D,CAAlB;;AAQA,MAAI;AACF4F,YAAQ,MAAM,mBAAK,CAACxX,OAAD,EAAU,qBAAV,CAAL,EAAuCwX,KAAvC,CAAd;AACD,GAFD,CAEE,OAAOnyB,CAAP,EAAU;AACV,WAAO;AACLmF,aAAO,IADF;AAELb,YAAM,IAFD;AAGL4tB,WAAK;AAHA,KAAP;AAKD;AACD;AACA;AACA;AACA;AACA;AACA,QAAM/W,SAAS,MAAM,mBAAK4oB,kBAAL,EAAkBD,kBAAkBtd,WAApC,EAAiD2L,MAAMD,GAAvD,EAA4D;AAC/E/X,UAD+E;AAE/E7V,UAAM6tB,MAAM7tB,IAFmE;AAG/E0/B,UAAM,MAHyE;AAI/EC,cAAU,OAJqE;AAK/E1X;AAL+E,GAA5D,CAArB;;AAQA,SAAO,EAAEjoB,MAAM6tB,MAAM7tB,IAAd,EAAoB4tB,KAAK/W,MAAzB,EAAP;AACD;;AAED;;;;;;;;;;;;;;;AAeO,UAAW4lB,cAAX,CAA2BrQ,IAA3B,EAAiC7M,gBAAjC,EAAmD+b,cAAnD,EAAmE;AACxE,QAAM,EAAE1lB,MAAF,KAAawW,IAAnB;AACA,QAAM,EAAEoQ,MAAF,EAAU37B,KAAV,KAAoB,MAAM,mBAAKomC,SAASC,WAAd,EAA2BtxB,MAA3B,EAAmC2J,gBAAnC,CAAhC;AACA,QAAM,EAAEtP,SAAF,EAAagY,SAAb,EAAwBL,YAAxB,KAAyC0T,cAA/C;;AAEA,MAAIz6B,KAAJ,EAAW;AACT,WAAO,EAAEA,KAAF,EAAP;AACD;AACD,QAAMwV,UAAU,MAAM,mBAAK,CAACT,OAAOU,cAAR,EAAwB,KAAxB,CAAL,EAAqCrG,SAArC,CAAtB;AACA,QAAM,EAAEmP,IAAIvJ,MAAN,KAAiB,MAAM,qBAAOoT,mCAAP,EAAiChZ,SAAjC,CAA7B;;AAEA,MAAIw1B,eAAe,EAAnB;AACA,MAAIF,cAAc,EAAlB;AACA,MAAIC,cAAc,EAAlB;AACA,MAAI4B,YAAY,EAAhB;;AAEA,OAAK,MAAMC,SAAX,IAAwB7K,MAAxB,EAAgC;AAC9B,UAAMlb,SAAS,MAAM,mBAAK,CAAC+lB,UAAUrwB,KAAX,EAAkB,WAAlB,CAAL,CAArB;AACA,QAAIqwB,UAAUrnC,IAAV,KAAmB,QAAvB,EAAiC;AAC/BylC,qBAAe,CAAC,GAAGA,YAAJ,EAAkB,GAAGnkB,MAArB,CAAf;AACD,KAFD,MAEO,IAAI+lB,UAAUrnC,IAAV,KAAmB,OAAvB,EAAgC;AACrCulC,oBAAc,CAAC,GAAGA,WAAJ,EAAiB,GAAGjkB,MAApB,CAAd;AACD,KAFM,MAEA,IAAI+lB,UAAUrnC,IAAV,KAAmB,OAAvB,EAAgC;AACrCwlC,oBAAc,CAAC,GAAGA,WAAJ,EAAiB,GAAGlkB,MAApB,CAAd;AACD;AACD8lB,gBAAY,CAAC,GAAGA,SAAJ,EAAe,GAAG9lB,MAAlB,CAAZ;AACD;;AAED,QAAMokB,mBAAmB,+BAAoBH,WAApB,EAAiCC,WAAjC,EAA8CC,YAA9C,EAA4D7d,YAA5D,CAAzB;;AAEA,QAAM,mBAAK,CAACvR,OAAD,EAAU,WAAV,CAAL,EAA6B+wB,SAA7B,EAAwC1B,gBAAxC,CAAN;;AAEA;;;;AAIA;AACA;AACA,MAAI7X,QAAQ,MAAM,mBAAK,CAACxX,OAAD,EAAU,aAAV,CAAL,CAAlB;AACA,QAAMmpB,oBAAoB,MAAM,qBAAOtW,qBAAP,CAAhC;AACA;AACA2E,QAAMD,GAAN,GAAY,MAAM,mBAAK6R,kBAAL,EAAkBD,kBAAkBtd,WAApC,EAAiD2L,MAAMD,GAAvD,EAA4D;AAC5E/X,UAD4E;AAE5E7V,UAAM6tB,MAAM7tB,IAFgE;AAG5E0/B,UAAM,KAHsE;AAI5EC,cAAU,OAJkE;AAK5E1X;AAL4E,GAA5D,CAAlB;;AAQA,MAAI;AACF4F,YAAQ,MAAM,mBAAK,CAACxX,OAAD,EAAU,qBAAV,CAAL,EAAuCwX,KAAvC,CAAd;AACD,GAFD,CAEE,OAAOnyB,CAAP,EAAU;AACV,WAAO;AACLmF,aAAO,IADF;AAEL27B,cAAQ,IAFH;AAGL5O,WAAK;AAHA,KAAP;AAKD;;AAED;AACA;AACA;AACA;AACA;AACA,QAAM/W,SAAS,MAAM,mBAAK4oB,kBAAL,EAAkBD,kBAAkBtd,WAApC,EAAiD2L,MAAMD,GAAvD,EAA4D;AAC/E/X,UAD+E;AAE/E7V,UAAM6tB,MAAM7tB,IAFmE;AAG/E0/B,UAAM,MAHyE;AAI/EC,cAAU,OAJqE;AAK/E1X;AAL+E,GAA5D,CAArB;;AAQA,MAAI8f,cAAc,EAAlB;;AAEA,OAAK,MAAMV,SAAX,IAAwB7K,MAAxB,EAAgC;AAC9B,UAAMqB,aAAa,MAAM,mBAAK,CAACwJ,UAAUrwB,KAAX,EAAkB,UAAlB,CAAL,CAAzB;;AAEA+wB,kBAAc,CAAC,GAAGA,WAAJ,EAAiBlK,UAAjB,CAAd;AACD;;AAED,SAAO,EAAEh9B,OAAO,KAAT,EAAgB27B,QAAQuL,WAAxB,EAAqCna,KAAK/W,MAA1C,EAAP;AACD;;AAED;;;;;;;;;;;;AAYO,UAAW6lB,iBAAX,CAA8BtQ,IAA9B,EAAoCkP,cAApC,EAAoD;AACzD,QAAM,EAAE1lB,MAAF,KAAawW,IAAnB;AACA,QAAM,EAAEnc,SAAF,EAAaqR,MAAb,EAAqB2G,SAArB,KAAmCqT,cAAzC;;AAEA;AACA,QAAM0M,sBAAsB,MAAM,mBAAK,CAACpyB,OAAOijB,KAAR,EAAe,WAAf,CAAL,EAAkCvX,MAAlC,CAAlC;AACA;AACA,QAAM2mB,iBAAiBD,oBAAoBE,MAApB,CAA2B,CAACC,GAAD,EAAMC,GAAN,EAAWC,GAAX,KAAmB;AACnE,WAAO,qBAAYD,GAAZ,IAAmBD,IAAIzoC,MAAJ,CAAW2oC,GAAX,CAAnB,GAAqCF,GAA5C;AACD,GAFsB,EAEpB,EAFoB,CAAvB;AAGA;AACA,QAAMG,gBAAgBL,eAAev1B,GAAf,CAAmB21B,OAAO/mB,OAAO+mB,GAAP,CAA1B,CAAtB;;AAEA,MAAI,CAAC,iBAAQC,aAAR,CAAL,EAA6B;AAC3B,UAAM7iC,UAAW,kDAAiD6iC,cAAcjpC,IAAd,CAAmB,IAAnB,CAAyB,EAA3F;AACAG,QAAI+L,KAAJ,CAAU9F,OAAV;AACA,WAAO;AACL5E,aAAO,IAAI2E,gBAAJ,CAAe;AACpBmB,cAAMqP,kBAAUC,aADI;AAEpBxQ;AAFoB,OAAf;AADF,KAAP;AAMD;;AAED,QAAM4Q,UAAU,MAAM,mBAAK,CAACT,OAAOU,cAAR,EAAwB,KAAxB,CAAL,EAAqCrG,SAArC,CAAtB;AACA,QAAM,EAAEmP,IAAIvJ,MAAN,KAAiB,MAAM,qBAAOoT,mCAAP,EAAiChZ,SAAjC,CAA7B;;AAEA;AACA;AACA,QAAM,mBAAK,CAACoG,OAAD,EAAU,cAAV,CAAL,EAAgCiL,MAAhC,CAAN;;AAEA;AACA;AACA;AACA,QAAM,kBAAI0mB,oBAAoBt1B,GAApB,CAAwBmmB,SAAS,mBAAK,CAACA,KAAD,EAAQ,SAAR,CAAL,CAAjC,CAAJ,CAAN;;AAEA;;;;AAIA;AACA;AACA,MAAIhL,QAAQ,MAAM,mBAAK,CAACxX,OAAD,EAAU,aAAV,CAAL,CAAlB;AACA,QAAMmpB,oBAAoB,MAAM,qBAAOtW,qBAAP,CAAhC;AACA;AACA2E,QAAMD,GAAN,GAAY,MAAM,mBAAK6R,kBAAL,EAAkBD,kBAAkBtd,WAApC,EAAiD2L,MAAMD,GAAvD,EAA4D;AAC5E/X,UAD4E;AAE5E7V,UAAM6tB,MAAM7tB,IAFgE;AAG5E0/B,UAAM,KAHsE;AAI5EC,cAAU,OAJkE;AAK5E1X;AAL4E,GAA5D,CAAlB;;AAQA,MAAI;AACF4F,YAAQ,MAAM,mBAAK,CAACxX,OAAD,EAAU,qBAAV,CAAL,EAAuCwX,KAAvC,CAAd;AACD,GAFD,CAEE,OAAOnyB,CAAP,EAAU;AACV,WAAO;AACLmF,aAAO,IADF;AAEL+sB,WAAK;AAFA,KAAP;AAID;AACD;AACA;AACA;AACA;AACA;AACA,QAAM/W,SAAS,MAAM,mBAAK4oB,kBAAL,EAAkBD,kBAAkBtd,WAApC,EAAiD2L,MAAMD,GAAvD,EAA4D;AAC/E/X,UAD+E;AAE/E7V,UAAM6tB,MAAM7tB,IAFmE;AAG/E0/B,UAAM,MAHyE;AAI/EC,cAAU,OAJqE;AAK/E1X;AAL+E,GAA5D,CAArB;;AAQA,SAAO;AACL2F,SAAK/W;AADA,GAAP;AAGD;;AAED;;;;;;;;;;;;;;;;AAgBO,UAAW0mB,kBAAX,CAA+B3nB,MAA/B,EAAuCyJ,MAAvC,EAA+C;AACpD,QAAM,EAAEpP,SAAF,EAAa0R,OAAb,EAAsBpC,gBAAtB,KAA2CF,MAAjD;;AAEA,MAAIkpB,uBAAuB,CAA3B;AACA,MAAIC,YAAJ;AACA,yBAAejpB,gBAAf,EAAiC3gB,OAAjC,CAAyC,CAAC,CAAC6pC,GAAD,EAAMzsC,KAAN,CAAD,KAAkB;AACzD,QAAIA,KAAJ,EAAW;AACTusC;AACAC,qBAAeC,GAAf;AACD;AACF,GALD;;AAOA;AACA;AACA;AACA,MAAIF,yBAAyB,CAA7B,EAAgC;AAC9B;AACA,WAAO;AACL1nC,aAAO,IAAI2E,gBAAJ,CAAe;AACpBmB,cAAMqP,kBAAUC,aADI;AAEpBxQ,iBAAU,6DAA4D8iC,oBAAqB;AAFvE,OAAf,CADF;AAKL9hB,kBAAYha;AALP,KAAP;AAOD;;AAED,QAAM4J,UAAU,MAAM,mBAAK,CAACT,OAAOU,cAAR,EAAwB,KAAxB,CAAL,EAAqCrG,SAArC,CAAtB;AACA,QAAMyW,WAAWrQ,QAAQgT,WAAR,CAAoBG,IAApB,CAAyBqP,SAASA,MAAMzZ,EAAN,KAAauC,OAA/C,CAAjB;;AAEA,MAAI,CAAC+E,QAAL,EAAe;AACb,WAAO;AACL7lB,aAAO,IAAI2E,gBAAJ,CAAe;AACpBmB,cAAMqP,kBAAUC,aADI;AAEpBxQ,iBAAU,aAAYkc,OAAQ;AAFV,OAAf,CADF;AAKL8E,kBAAYha;AALP,KAAP;AAOD;;AAED,QAAMka,gBAAgB,MAAM,mBAAK,CAACD,QAAD,EAAW,UAAX,CAAL,CAA5B;AACA,QAAMgiB,eAAe/hB,cAAc3nB,IAAnC;;AAEA;AACA;AACA;AACA,QAAM2pC,uBACHD,iBAAiB,OAAjB,IAA4BF,iBAAiB,OAA9C,IACCE,iBAAiB,OAAjB,IAA4B,CAAC,OAAD,EAAU,aAAV,EAAyBhiC,QAAzB,CAAkC8hC,YAAlC,CAF/B;;AAIA,MAAI,CAACG,oBAAL,EAA2B;AACzB,WAAO;AACL9nC,aAAO,IAAI2E,gBAAJ,CAAe;AACpBmB,cAAMqP,kBAAUC,aADI;AAEpBxQ,iBAAU,sDAAqDijC,YAAa;AAFxD,OAAf,CADF;AAKLjiB,kBAAYha;AALP,KAAP;AAOD;;AAED;AACA,QAAM,EAAE+vB,QAAQoM,SAAV,EAAqB/nC,OAAOgoC,gBAA5B,KAAiD,MAAM,mBAAK5B,SAASC,WAAd,EAA2BtxB,MAA3B,EAAmC2J,gBAAnC,CAA7D;AACA,MAAIspB,gBAAJ,EAAsB;AACpB,WAAO,EAAEhoC,OAAOgoC,gBAAT,EAA2BpiB,YAAYha,SAAvC,EAAP;AACD;;AAED,MAAIq8B,eAAe,EAAnB;;AAEA;AACA,OAAK,MAAMzB,SAAX,IAAwBuB,SAAxB,EAAmC;AACjC,UAAMG,YAAY,MAAM,mBAAK,CAAC1B,UAAUrwB,KAAX,EAAkB,WAAlB,CAAL,CAAxB;AACA8xB,mBAAe,CAAC,GAAGA,YAAJ,EAAkB,GAAGC,SAArB,CAAf;AACD;;AAED,MAAI3P,QAAJ;AACA,OAAK,MAAMP,KAAX,IAAoBiQ,YAApB,EAAkC;AAChC;AACA;AACA;AACA,UAAMt8B,QAAQ,MAAM,mBAAK,CAACqsB,KAAD,EAAQ,UAAR,CAAL,CAApB;AACA,QAAIrsB,MAAMxN,IAAN,KAAe0pC,YAAnB,EAAiC;AAC/BtP,iBAAWP,KAAX;AACA;AACD;AACF;;AAED,MAAI,CAACO,QAAL,EAAe;AACb,WAAO;AACLv4B,aAAO,IAAI2E,gBAAJ,CAAe;AACpBmB,cAAMqP,kBAAU8xB,gBADI;AAEpBriC,iBAAU,GAAEijC,YAAa;AAFL,OAAf,CADF;AAKLjiB,kBAAYha;AALP,KAAP;AAOD;;AAED;AACA,QAAMu8B,oBAAoB,MAAM,mBAAK,CAAC3yB,OAAD,EAAU,cAAV,CAAL,EAAgC+iB,QAAhC,EAA0C,EAAEzX,OAAF,EAA1C,CAAhC;AACA,MAAIqnB,iBAAJ,EAAuB;AACrB;AACA,UAAM,mBAAK,CAAC5P,QAAD,EAAW,SAAX,CAAL,CAAN;AACA,WAAO;AACLv4B,aAAO,IAAI2E,gBAAJ,CAAe;AACpBmB,cAAMqP,kBAAUwe,aADI;AAEpB/uB,iBAASujC,kBAAkBvjC;AAFP,OAAf,CADF;AAKLghB,kBAAYha;AALP,KAAP;AAOD;;AAED;AACA,QAAM,mBAAK,CAACia,QAAD,EAAW,SAAX,CAAL,CAAN;;AAEA,SAAO;AACLD,gBAAY2S,SAASha,EADhB;AAELuH;AAFK,GAAP;AAID,C;;;;;;;;;;;;;QC5fiByX,kB,GAAAA,kB;QAqCAQ,c,GAAAA,c;;AA1DlB;;AACA;;;;AACA;;AAGA;;AACA;;AACA;;;;AAGA;;;;AAEA;;;;;;;;;;;AARA;AAiBO,UAAWR,kBAAX,CAA+BxoB,MAA/B,EAAuC3F,SAAvC,EAAkD2d,GAAlD,EAAuD;AAC5D,QAAMvX,UAAU,MAAM,mBAAK,CAACT,OAAOU,cAAR,EAAwB,KAAxB,CAAL,EAAqCrG,SAArC,CAAtB;AACA,QAAMg5B,cAAc,MAAM,mBAAK,CAAC5yB,OAAD,EAAU,sBAAV,CAAL,CAA1B;;AAEA;AACA;AACA;AACA,MAAI4yB,eAAeA,YAAYrb,GAA/B,EAAoC;AAClC,UAAMsb,SAAS,MAAM,mBAAKtC,qBAAL,EAAuBqC,YAAYrb,GAAnC,EAAwCA,GAAxC,CAArB;AACA,WAAOsb,MAAP;AACD;AACF;;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;AAzBA;AAVA;AA2DO,UAAWtK,cAAX,CAA2BxS,IAA3B,EAAiCsS,WAAjC,EAA8C5oB,UAA9C,EAA0D;AAC/D,QAAM,EAAEF,MAAF,KAAawW,IAAnB;AACA,QAAM5sB,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6B2Q,WAAWsJ,EAAxC,CAAZ;AACA5f,MAAI+L,KAAJ,CAAW,qCAAoCmzB,YAAYzuB,SAAU,GAArE;;AAEA,QAAMA,YAAYyuB,YAAYzuB,SAA9B;AACA,MAAI0uB,YAAYD,YAAYC,SAA5B;AACA,QAAMtoB,UAAU,MAAM,mBAAK,CAACT,OAAOU,cAAR,EAAwB,KAAxB,CAAL,EAAqCrG,SAArC,CAAtB;;AAEA,MAAI,CAACoG,OAAL,EAAc;AACZ7W,QAAI+L,KAAJ,CAAW,kBAAiB0E,SAAU,aAAtC;AACA;AACA;AACD;AACD;;AAEA,QAAMuvB,oBAAoB,MAAM,qBAAOtW,qBAAP,CAAhC;AACA,MAAIhH,cAAcsd,kBAAkBtd,WAApC;AACA;;;;;AAKA,MAAIyc,UAAUj4B,QAAV,CAAmB,iBAAnB,CAAJ,EAA2C;AACzC;;;;;AAKA,UAAMyiC,UAAUrzB,WAAWgS,QAAX,GAAsB,SAAtB,GAAkC,QAAlD;AACAtoB,QAAI+L,KAAJ,CAAW,wDAAuD49B,OAAQ,GAA1E;AACAjnB,kBAAc,CAAC,GAAGA,WAAJ,EAAiB,6BAAiBinB,OAAjB,CAAjB,CAAd;AACD;;AAED;;;;AAIA,MAAItoC,KAAJ;AACA,MAAI;AACF;;;;;AAKA89B,gBAAY,MAAM,mBAAKc,kBAAL,EAAkBvd,WAAlB,EAA+Byc,SAA/B,EAA0C;AAC1D9oB,cAAQC,WAAWsJ,EADuC;AAE1Dpf,YAAM,QAFoD;AAG1D0/B,YAAM,KAHoD;AAI1DC,gBAAU;AAJgD,KAA1C,CAAlB;AAMA,UAAM,mBAAK,CAACtpB,OAAD,EAAU,eAAV,CAAL,EAAiC;AACrCrW,YAAM,QAD+B;AAErC4tB,WAAK+Q;AAFgC,KAAjC,CAAN;AAID,GAhBD,CAgBE,OAAOpU,GAAP,EAAY;AACZ;AACA/qB,QAAI+L,KAAJ,CAAW,6BAA4Bgf,IAAI9kB,OAAQ,EAAnD;AACA,QAAI2jC,SAAJ;AACA,QAAI7e,IAAI9kB,OAAJ,CAAYiB,QAAZ,CAAqB,sBAArB,CAAJ,EAAkD;AAChD0iC,kBAAY;AACVziC,cAAM,SADI;AAEVlB,iBAAS;AAFC,OAAZ;AAID,KALD,MAKO;AACL2jC,kBAAY;AACVziC,cAAMqP,kBAAUwe,aADN;AAEV/uB,iBAAU,6BAA4B8kB,IAAI9kB,OAAQ;AAFxC,OAAZ;AAID;AACD5E,YAAQ,IAAI2E,gBAAJ,CAAe4jC,SAAf,CAAR;AACD;;AAED;;AAEA,SAAOvoC,KAAP;AACD,C;;;;;;;;;;;;;;ACvID;;AAEA;AACA,MAAMg7B,QAAQ,eAAd;;kBAEeA,K;;;;;;;;;;;;;;;;;;QCQCwN,W,GAAAA,W;QAiBAC,a,GAAAA,a;QAeAC,W,GAAAA,W;QA6BEC,a,GAAAA,a;QAUFC,iB,GAAAA,iB;;AAnFhB;;AACA;;;;AACA;;;;AAEA;;;;;;;;AAQO,SAASJ,WAAT,CAAsB,GAAGK,OAAzB,EAAkC;AACvC,SAAO,sBAAa,CAACC,SAAD,EAAYC,UAAZ,KAA2B;AAC7C;AACA;AACA,QAAI,iBAAQD,SAAR,CAAJ,EAAwB;AACtB,aAAOC,UAAP;AACD;AACF,GANM,EAMJF,OANI,CAAP;AAOD;;AAED;;;;;;;AAvBA;AA8BO,SAASJ,aAAT,CAAwBjqB,SAAS,EAAjC,EAAqC3a,UAAU,EAA/C,EAAmD;AACxD,MAAI,oBAAY2a,MAAZ,EAAoB9iB,MAApB,GAA6B,CAAjC,EAAoC;AAClC,UAAMstC,oBAAoBC,sBAAYC,SAAZ,CAAsB1qB,MAAtB,EAA8B3a,OAA9B,CAA1B;AACA,WAAO,MAAMmlC,iBAAb;AACD;AACD,SAAO,EAAP;AACD;;AAED;;;;;;;AAOO,SAASN,WAAT,CAAsB/c,IAAtB,EAA4B;AACjC,SAAO,UAAWwd,cAAX,CAA2B,GAAGhlB,IAA9B,EAAoC;AACzC;AACA;AACA,QAAIilB,gBAAgB,KAApB;AACA,OAAG;AACD,UAAI;AACF,cAAM,mBAAKzd,IAAL,EAAW,GAAGxH,IAAd,CAAN;AACAilB,wBAAgB,KAAhB;AACD,OAHD,CAGE,OAAOvuC,CAAP,EAAU;AACV;AACA;AACA;AACA;AACA0G,gBAAQ5C,GAAR,CAAa,2BAA0BgtB,KAAKngB,IAAK,GAAjD,EAAqD3Q,CAArD;AACAuuC,wBAAgB,IAAhB;AACD;AACF,KAZD,QAYSA,aAZT;AAaD,GAjBD;AAkBD;;AAED;;;;;;;;AAQO,UAAWT,aAAX,CAA0B7oC,MAA1B,EAAkC;AACvC,QAAM,kBAAIA,MAAJ,CAAN;AACD;;AAED;;;;;;AAMO,SAAS8oC,iBAAT,CAA4Bv7B,WAAW,EAAvC,EAA2C;AAChD,SAAOA,SAASwE,GAAT,CAAa1O,WAAW;AAC7B,QAAI,uBAAcA,OAAd,KAA0BA,QAAQ3F,cAAR,CAAuB,SAAvB,CAA9B,EAAiE;AAC/D,aAAO2F,OAAP;AACD;AACD,WAAO,EAAEA,SAASA,OAAX,EAAP;AACD,GALM,CAAP;AAMD,C;;;;;;;;;;;;;;;;;;;AC1ED;;AACA;;AACA;;;;;;AAEA;AACAG,cAAI+lC,MAAJ,CAAW;AACTC,YAAU,MAAMnuC,SAAS,OAAOA,KAAP,KAAiB;AADjC,CAAX;;AAIA;AA1BA;;;;;;;;;;;;;;;;;AA2BO,MAAMouC,kCAAa,oBAAnB;;AAEP;AACA;AACO,MAAMC,wBAAQC,UAAU;AAC7B;AACA,QAAMC,WAAWvuC,SAAS,qBAAMwuC,KAAN,CAAYxuC,KAAZ,CAA1B;AACA,QAAMyuC,cAAc,aAAIF,QAAJ,EAAcD,MAAd,CAApB;AACA,SAAO,qBAAMI,WAAN,CAAkB,GAAGD,WAArB,CAAP;AACD,CALM;;AAOP;AACO,MAAME,wCAAgBt+B,QAAQu+B,WAAWC,SAC9C,iBAAQC,wBAAwBz+B,IAAxB,CAAR,EAAuC0+B,kBAAkBH,OAAlB,EAA2BC,KAA3B,CAAvC,CADK;;AAGA,MAAME,gDAAoBH,WAAWC,SAASD,QAAQI,OAAR,CAAgBH,KAAhB,CAA9C;;AAEP;AACO,MAAMnT,wBAAQ,CAACrrB,IAAD,EAAOu+B,OAAP,KAAmBC,SAAS;AAC/C,QAAMI,SAASN,cAAct+B,IAAd,EAAoBu+B,OAApB,EAA6BC,KAA7B,CAAf;;AAEA,MAAI,iBAAQI,MAAR,CAAJ,EAAqB;AACnB,WAAOJ,KAAP;AACD,GAFD,MAEO;AACL,UAAMrrC,MAAM0F,iBAAWC,SAAX,CAAqB,YAArB,CAAZ;AACA3F,QAAI4G,IAAJ,CAAS8kC,YAAYD,MAAZ,CAAT,EAFK,CAEyB;AAC9B,WAAOJ,KAAP;AACD;AACF,CAVM;;AAYP;;AAEA;AACA;AACA,MAAMC,0BAA0Bz+B,QAAQ8+B,mBAAmB;AACzD,QAAMC,eAAe,EAArB;AACA,SAAOC,6BAA6BD,YAA7B,EAA2C/+B,IAA3C,EAAiD8+B,eAAjD,CAAP;AACD,CAHD;;AAKA;AACA,MAAME,+BAA+BlD,OAAO97B,QAAQ,CAAC,EAAEi/B,KAAF,EAASC,IAAT,EAAeC,MAAf,EAAuBxvC,KAAvB,EAAD,KAAoC;AACtF,QAAM+C,OAAO,gBAAOopC,GAAP,EAAYqD,UAAUn/B,IAAtB,CAAb;AACA,MAAI,iBAAQi/B,KAAR,CAAJ,EAAoB;AAClB,UAAMG,SAASJ,6BAA6BtsC,IAA7B,EAAmCysC,MAAnC,CAAf;AACA,WAAO,iBAAQC,MAAR,EAAgBH,KAAhB,CAAP;AACD,GAHD,MAGO;AACL,WAAQ,GAAE,cAAK,GAAL,EAAUvsC,IAAV,CAAgB,kBAAiB/C,KAAM,uBAAsB0vC,YAAYH,IAAZ,CAAkB,EAAzF;AACD;AACF,CARD;;AAUA;AACA;AACA,MAAMG,cAAc,CAAC,EAAEr/B,IAAF,EAAQ2Y,IAAR,EAAD,KAAoB;AACtC,UAAQ3Y,IAAR;AACE,SAAK,QAAL;AACE,aAAO,QAAP;;AAEF,SAAK,aAAL;AACE,aAAQ,WAAU,cAAK,MAAL,EAAa,aAAIs/B,QAAJ,EAAc3mB,IAAd,CAAb,CAAkC,GAApD;;AAEF,SAAK,SAAL;AACE,aAAQ,WAAUA,KAAK3lB,IAAL,CAAU,IAAV,CAAgB,EAAlC;;AAEF;AACE,aAAQ,GAAEusC,MAAMv/B,IAAN,CAAY,IAAGA,IAAK,EAA9B;AAXJ;AAaD,CAdD;;AAgBA;AACA,MAAMs/B,WAAWE,OAAOA,IAAIC,KAAJ,CAAU,CAAV,EAAa9mB,IAArC,C,CAA0C;AAC1C,MAAMkmB,cAAc,sCAAwB,CAACa,MAAD,EAAK,IAAL,EAAW,CAAX,CAAxB,CAApB;AACA;AACA,MAAMH,QAAQvnC,UAAW,WAAW9G,IAAX,CAAgB8G,OAAO,CAAP,CAAhB,IAA6B,IAA7B,GAAoC,GAA7D,C;;;;;;;;;;;;;QC5FgB2nC,U,GAAAA,U;AAPhB;;;;;;;AAOO,SAASA,UAAT,GAAuB;AAC5B,SAAO,iBAAP;AACD,C;;;;;;;;;;;;;kBCQuBC,oB;;AAbxB;;;;;;AAEA;;;;;;;AAOA;AACA;;;AAGe,SAASA,oBAAT,GAAiC;AAC9C,SAAO;AACL;AACA5/B,UAAM6f,oBAAgB7f,IAFjB;AAGLogB,kBAAc,CAAC,QAAD,CAHT;AAILnhB,SAAK4gB,oBAAgB5gB,GAJhB;AAKLc,aAAS8f,oBAAgB9f;AALpB,GAAP;AAOD,C,CAzBD;;;;;;;;;;;;;;;;ACAA,MAAM8/B,SAAS,UAAf;;AAEO,MAAMC,wCAAgBD,SAAS,eAA/B;;AAEA,MAAME,8CAAmBF,SAAS,kBAAlC,C;;;;;;;;;;;;;QCOSG,M,GAAAA,M;QAyBApqB,c,GAAAA,c;;AApChB;;IAAYjd,W;;AACZ;;AACA;;;;AAEA;;;;;;;AAOO,SAASqnC,MAAT,CAAiB/B,MAAjB,EAAyBgC,aAAa,EAAtC,EAA0C;AAC/C,MAAIxmC,OAAJ;AACA;AACA,MAAIwmC,UAAJ,EAAgB;AACdxmC,cAAU;AACR,OAACwmC,UAAD,GAAchC;AADN,KAAV;AAGD,GAJD,MAIO;AACLxkC,cAAUwkC,MAAV;AACD;;AAED,SAAO;AACLtqC,UAAMgF,YAAYmnC,aADb;AAELrmC,aAASA;AAFJ,GAAP;AAID;;AAED;;;;;;;;AAQO,SAASmc,cAAT,CAAyBC,WAAzB,EAAsCxd,OAAtC,EAA+C;AACpD;;;;;;;;;;;;;;AAcA,MAAIA,QAAQyd,gBAAZ,EAA8B;AAC5BD,gBAAYnlB,IAAZ,CAAiB,qCAAmB,CAAC,MAAD,CAAnB,CAAjB;AACD;AACDmlB,cAAYnlB,IAAZ,CAAiB4Y,0BAAjB;AACAuM,cAAYnlB,IAAZ,CAAiBmpC,yBAAjB;;AAEA,SAAO;AACLlmC,UAAMgF,YAAYonC,gBADb;AAELtmC,aAAS;AACPoc;AADO;AAFJ,GAAP;AAMD,C;;;;;;;;;;;;;kBCxDuB5W,G;;AAPxB;;IAAYrG,O;;AACZ;;AAEA;;;;AAEA,MAAMzF,MAAM0F,iBAAWC,SAAX,CAAqB,QAArB,CAAZ;;AAEe,SAASmG,GAAT,CAAcqX,OAAd,EAAuB;AACpC,QAAM4pB,YAAY;AAChB;;;;;;;;;AASAC,eAAW,YAAY;AACrBhtC,UAAI+L,KAAJ,CAAUC,oBAAc,WAAxB;AACA,aAAO,iCAAiBmX,QAAQzgB,QAAR,EAAjB,CAAP;AACD,KAbe;;AAehB;;;;;;;;;;AAUAuqC,kBAAc,UAAUC,eAAV,EAA2B;AACvCltC,UAAI+L,KAAJ,CAAUC,oBAAc,gBAAxB,EAA0CkhC,eAA1C;AACA/pB,cAAQxgB,QAAR,CAAiB8C,QAAQonC,MAAR,CAAeK,eAAf,CAAjB;AACD;AA5Be,GAAlB;;AA+BA,SAAOH,SAAP;AACD,C;;;;;;;;;;;;;;ACxCD;;;;AACA;;;;;;AAEA;;;;AAIA,MAAMlgC,OAAO,QAAb;;kBAEe;AACbD,6BADa;AAEbC,MAFa;AAGbf;AAHa,C;;;;;;;;;;;;;;;;;;ACTf;;IAAYtG,W;;AACZ;;AACA;;;;;;AAEA,MAAMsH,WAAW,EAAjB;;AAEAA,SAAStH,YAAYmnC,aAArB,IAAsC;AACpC5/B,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,WAAO,eAAM6L,KAAN,EAAa7L,OAAOmF,OAApB,CAAP;AACD;AAHmC,CAAtC;;AAMAwG,SAAStH,YAAYonC,gBAArB,IAAyC;AACvC7/B,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL;AAEE/P,uCACK+P,MAAM/P,IADX;AAEEylB,qBAAavhB,OAAOmF,OAAP,CAAeoc;AAF9B;AAFF;AAOD;AATsC,CAAzC;;AAYA;AACA,MAAM9V,UAAU,iCAAcE,QAAd,EAAwB,EAAxB,CAAhB;kBACeF,O;;;;;;;;;;;;;QCjBCugC,gB,GAAAA,gB;;AAThB;;AAEA;;;;;;;AAOO,SAASA,gBAAT,CAA2BngC,KAA3B,EAAkC;AACvC,SAAO,mBAAUA,MAAM9G,MAAhB,CAAP;AACD,C;;;;;;;;;;;;;kBCSuBknC,gB;;AAnBxB;;AACA;;;;AACA;;AAGA;;AACA;;AAGA;;AACA;;;;AAEA;;;;;;;;;AAJA;;;AAJA;AAee,SAASA,gBAAT,CAA2BloC,OAA3B,EAAoC;AACjD;AACA,MAAI,OAAOA,QAAQ4M,MAAf,KAA0B,QAA9B,EAAwC;AACtC,UAAMA,SAAS5M,QAAQ4M,MAAvB;AACA5M,YAAQ4M,MAAR,GAAiB;AACftR,YAAMsR,MADS;AAEf;AACAu7B,wBAAkBC,mCAAwBC;AAH3B,KAAjB;AAKD;;AAED,YAAW99B,IAAX,GAAmB;AACjB,UAAM,kBAAI,qBAAavK,OAAb,EAAsB2H,eAAtB,CAAJ,CAAN;AACA,UAAM,kBAAI,yBAAU2gC,gBAAV,CAAJ,CAAN;AACD;;AAED,SAAO;AACLpoC,WAAO,CAACqoC,oBAAD,CADF;AAELh+B,QAFK;AAGL5C,yBAHK;AAILD,+BAJK;AAKLd;AALK,GAAP;AAOD,C,CA3CD,uB;;;;;;;;;;;;;;;;;;QCoBkB2hC,a,GAAAA,a;QAYAC,kB,GAAAA,kB;QAyGAC,c,GAAAA,c;QA0EAC,c,GAAAA,c;QA+HAC,gB,GAAAA,gB;;AAjVlB;;AACA;;AACA;;IAAYroC,W;;AACZ;;IAAYC,O;;AAGZ;;AACA;;AACA;;AAGA;;AAGA;;;;;;AAEA;;;AANA;AAOA,MAAMzF,MAAM0F,iBAAWC,SAAX,CAAqB,cAArB,CAAZ;;AAJA;;;AARA;AANA;AAoBO,UAAW8nC,aAAX,GAA4B;AACjCztC,MAAI4G,IAAJ,CAAS,qDAAT;AACA,QAAMknC,OAAO,MAAM,4BAActoC,YAAYuoC,kBAA1B,CAAnB;AACA/tC,MAAI4G,IAAJ,CAAS,8BAAT;AACA,QAAM,wBAAUknC,IAAV,EAAgBJ,kBAAhB,CAAN;AACD;;AAED;;;;;AAKO,UAAWA,kBAAX,CAA+BM,eAA/B,EAAgD;AACrD,QAAMC,SAASD,gBAAgB1nC,OAA/B;AACA,QAAM,EAAEsE,QAAF,EAAYsjC,WAAZ,KAA4BF,gBAAgBtjC,IAAlD;;AAEA1K,MAAI4G,IAAJ,CAAU,wCAAuCgE,QAAS,MAA1D;AACA;AACA,QAAMnG,YAAY,MAAM,mBAAKopC,gBAAL,EAAuBI,MAAvB,EAA+BrjC,QAA/B,CAAxB;;AAEA;AACA;AACAnG,YAAU0pC,KAAV,GAAkB,MAAM,qBAAOC,gCAAP,CAAxB;;AAEA3pC,YAAU0pC,KAAV,CAAgBF,MAAhB,GAAyBA,MAAzB;AACAxpC,YAAU0pC,KAAV,CAAgBvjC,QAAhB,GAA2BA,QAA3B;;AAEA;AACA,MAAInG,UAAUpD,KAAd,EAAqB;AACnB,QAAI6sC,WAAJ,EAAiB;AACf,YAAM,kBAAIzoC,QAAQ4oC,iBAAR,CAA0BphC,SAA1B,EAAqCrC,QAArC,CAAJ,CAAN;AACA;AACD,KAHD,MAGO;AACL,YAAM,kBAAInF,QAAQ6oC,iBAAR,CAA0B,IAAIlkB,KAAJ,CAAU3lB,UAAUwB,OAApB,CAA1B,EAAwD2E,QAAxD,CAAJ,CAAN;AACA;AACD;AACF;;AAED;AACAnG,YAAU0pC,KAAV,CAAgBI,WAAhB,GAA8BzrC,KAAKD,GAAL,EAA9B;;AAEA,QAAM2rC,WAAW,MAAM,mBAAKC,oBAAL,EAAgBhqC,SAAhB,EAA2BmG,QAA3B,CAAvB;;AAEA;AACA,MAAI8jC,QAAJ;AACA,MAAIjqC,UAAU0pC,KAAV,CAAgBr8B,MAAhB,CAAuBu7B,gBAAvB,KAA4CC,mCAAwBqB,MAAxE,EAAgF;AAC9E3uC,QAAI+L,KAAJ,CAAW,iCAAgCnB,QAAS,MAApD;AACA8jC,eAAW,MAAM,mBAAKf,cAAL,EAAqBlpC,SAArB,EAAgCmG,QAAhC,CAAjB;AACD,GAHD,MAGO;AACL5K,QAAI+L,KAAJ,CAAW,iCAAgCnB,QAAS,MAApD;AACA8jC,eAAW,MAAM,mBAAKd,cAAL,EAAqBnpC,SAArB,EAAgCmG,QAAhC,CAAjB;AACD;;AAED;AACA,QAAM,kBAAInF,QAAQ6oC,iBAAR,CAA0B7pC,SAA1B,EAAqCmG,QAArC,CAAJ,CAAN;;AAEA;AACA;AACA,WAASgkC,qBAAT,CAAgCztC,MAAhC,EAAwC;AACtC,WACE,CAACA,OAAOX,IAAP,KAAgBgF,YAAYqpC,aAA5B,IAA6C1tC,OAAOX,IAAP,KAAgBgF,YAAYmD,eAA1E,KACAxH,OAAOuJ,IAAP,CAAYE,QAAZ,KAAyBA,QAF3B;AAID;;AAED;AACA,QAAMzJ,SAAS,MAAM,mBAAKytC,qBAAL,CAArB;AACA5uC,MAAI+L,KAAJ,CAAW,uDAAsD5K,OAAOX,IAAK,EAA7E;;AAEA;AACA;AACA,QAAM,qBAAO,CAACguC,QAAD,EAAWE,QAAX,CAAP,CAAN;;AAEA,MAAIvtC,OAAOX,IAAP,KAAgBgF,YAAYqpC,aAAhC,EAA+C;AAC7C;AACA7uC,QAAI+L,KAAJ,CAAU,kCAAV;AACA,UAAM,mBAAK+iC,yBAAL,EAAqBrqC,SAArB,CAAN;AACA,UAAM,kBAAIgB,QAAQspC,oBAAR,CAA6B9hC,SAA7B,EAAwCrC,QAAxC,CAAJ,CAAN;AACA5K,QAAI4G,IAAJ,CAAS,2CAAT;AACD,GAND,MAMO;AACL;AACA;AACA,QAAIonC,gBAAgBtjC,IAAhB,CAAqBE,QAArB,KAAkC7D,qBAAUqI,EAAhD,EAAoD;AAClDpP,UAAI4G,IAAJ,CAAS,2BAAT;AACA,YAAM,EAAEY,mBAAF,KAA0B,MAAM,qBAAOoG,+BAAP,CAAtC;AACA,YAAM,EAAEpC,WAAF,EAAewjC,UAAf,KAA8B,MAAM,qBAAO9mC,6BAAP,CAA1C;AACA+lC,aAAO1mC,GAAP,GAAaC,mBAAb;AACA,UAAIwnC,cAAc,CAACxjC,WAAnB,EAAgC;AAC9ByiC,eAAOpuB,MAAP,GAAgB;AACdovB,wBAAcD;AADA,SAAhB;AAGD,OAJD,MAIO;AACLf,eAAOpuB,MAAP,GAAgB;AACd7Q,iBAAOxD;AADO,SAAhB;AAGD;AACF,KAdD,MAcO,IAAIwiC,gBAAgBtjC,IAAhB,CAAqBE,QAArB,KAAkC7D,qBAAUC,IAAhD,EAAsD;AAC3D,YAAM,EAAE6E,iBAAF,KAAwB,MAAM,qBAAO3D,6BAAP,CAApC;AACA+lC,aAAOpuB,MAAP,GAAgB;AACd7Q,eAAOnD;AADO,OAAhB;AAGD;;AAED;AACA;AACA7L,QAAI+L,KAAJ,CAAU,0CAAV;AACA,UAAM,kBAAItG,QAAQypC,gBAAR,CAAyBjB,MAAzB,EAAiCD,gBAAgBtjC,IAAhB,CAAqBE,QAAtD,EAAgE,IAAhE,CAAJ,CAAN;AACD;AACF;;AAED;;;;;;;AAOO,UAAW+iC,cAAX,CAA2BwB,EAA3B,EAA+B;AACpC,QAAM,EAAEZ,WAAF,EAAe3jC,QAAf,EAAyBwkC,cAAzB,EAAyCC,aAAzC,KAA2DF,GAAGhB,KAApE;AACA,MAAImB,iBAAiBxsC,KAAKD,GAAL,EAArB;;AAEA,SAAO,IAAP,EAAa;AACX,QAAI0sC,eAAe,MAAM,qBAAOC,0BAAP,CAAzB;AACAD,mBAAe,OAAOA,YAAP,KAAwB,WAAxB,GAAsCA,YAAtC,GAAqD,MAApE;AACA,UAAME,kBAAkBF,eAAeH,cAAvC;AACApvC,QAAI+L,KAAJ,CAAW,oCAAmCwjC,YAAa,gCAA+BE,eAAgB,EAA1G;;AAEA;AACA,UAAM,EAAEC,UAAF,EAAcvnC,UAAd,KAA6B,MAAM,mBAAK;AAC5CiJ,cAAQ,oBAAMm+B,YAAN,CADoC;AAE5CG,kBAAY,mBAAKlqC,YAAYmqC,mBAAjB,CAFgC;AAG5CxnC,kBAAY,mBAAK3C,YAAYoqC,sBAAjB;AAHgC,KAAL,CAAzC;;AAMA;AACA,QAAIznC,UAAJ,EAAgB;AACdnI,UAAI+L,KAAJ,CAAU,yDAAV;AACA;AACD;;AAED,QAAI2jC,UAAJ,EAAgB;AACd;AACAJ,uBAAiBxsC,KAAKD,GAAL,EAAjB;;AAEA;AACA,YAAMgtC,qBAAqBH,WAAWppC,OAAX,CAAmBwpC,SAAnB,CAA6BC,QAA7B,GAAwC,IAAnE;AACA;AACA,UAAIF,uBAAuBN,YAA3B,EAAyC;AACvC,cAAM,kBAAI9pC,QAAQuqC,kBAAR,CAA2BH,kBAA3B,EAA+CjlC,QAA/C,CAAJ,CAAN;AACD;;AAED,YAAM3E,UAAU,EAAEgqC,SAAS,EAAX,EAAhB;AACAjwC,UAAI+L,KAAJ,CACG,+CAA8C8jC,kBAAmB,QAAOjlC,QAAS,8BAA6B3E,OAAQ,EADzH;AAGA,YAAM5E,QAAQ6uC,eAAef,EAAf,EAAmB,yBAAelpC,OAAf,CAAnB,CAAd;;AAEA;AACA,UAAI5E,KAAJ,EAAW;AACTrB,YAAIqB,KAAJ,CAAW,uCAAsCA,MAAM4E,OAAQ,EAA/D;AACA,YAAIopC,aAAJ,EAAmB;AACjBrvC,cAAI4G,IAAJ,CAAS,8BAAT;AACA,gBAAM,kBAAInB,QAAQ0qC,cAAR,CAAuBljC,SAAvB,EAAkCrC,QAAlC,CAAJ,CAAN;AACD;AACD;AACD;AACF,KA1BD,MA0BO;AACL,UAAI9H,KAAKD,GAAL,KAAaysC,cAAb,IAA+BG,eAAnC,EAAoD;AAClDzvC,YAAIosB,IAAJ,CAAS,2EAAT,EAAsFxhB,QAAtF;;AAEA;AACA,YAAIykC,aAAJ,EAAmB;AACjBrvC,cAAI+L,KAAJ,CAAW,GAAEnB,QAAS,sCAAtB;AACA,gBAAM,kBAAInF,QAAQ0qC,cAAR,CAAuBljC,SAAvB,EAAkCrC,QAAlC,CAAJ,CAAN;AACD;AACD;AACD,OATD,MASO;AACL5K,YAAI+L,KAAJ,CAAW,GAAEnB,QAAS,4BAA2B2jC,WAAY,qBAAoBkB,eAAgB,GAAjG;AACD;AACF;AACF;AACF;;AAED;;;;;;;;AAQO,UAAW7B,cAAX,CAA2BuB,EAA3B,EAA+B;AACpC,QAAM,EAAEZ,WAAF,EAAe3jC,QAAf,EAAyBwkC,cAAzB,EAAyCC,aAAzC,KAA2DF,GAAGhB,KAApE;AACA,QAAM,EAAEiC,iBAAF,EAAqBt+B,MAArB,KAAgC,MAAM,qBAAOs8B,gCAAP,CAA5C;;AAEA,MAAIiC,iBAAiBvtC,KAAKD,GAAL,EAArB;AACA,MAAIoD,UAAU,EAAd;AACA,MAAIqqC,WAAJ;;AAEA,SAAO,IAAP,EAAa;AACX;AACAA,kBAAc,MAAM,qBAAOC,+BAAP,CAApB;AACAD,kBAAc,OAAOA,WAAP,KAAuB,WAAvB,GAAqCA,WAArC,GAAmDF,iBAAjE;;AAEA,UAAM,EAAEb,YAAF,KAAmB,MAAM,qBAAOnB,gCAAP,CAA/B;AACA,UAAMqB,kBAAkBF,eAAeH,cAAvC;AACA,UAAMoB,oBAAoBjB,eAAe,IAAzC;;AAEA,QAAIe,WAAJ,EAAiB;AACf,UAAIx+B,OAAOtR,IAAP,KAAgBiwC,4BAAiBC,SAArC,EAAgD;AAC9CzqC,kBAAU,EAAE6pC,WAAW,EAAEC,UAAUS,iBAAZ,EAAb,EAAV;AACD,OAFD,MAEO,IAAI1+B,OAAOtR,IAAP,KAAgBiwC,4BAAiBE,UAArC,EAAiD;AACtD1qC,kBAAU,EAAE2qC,cAAc,MAAhB,EAAV;AACD,OAFM,MAEA;AACL5wC,YAAIqB,KAAJ,CAAW,gCAA+ByQ,MAAO,EAAjD;AACA;AACD;;AAED9R,UAAI+L,KAAJ,CAAW,GAAEnB,QAAS,iBAAgBkH,OAAOtR,IAAK,UAASgwC,iBAAkB,OAA7E;;AAEA,YAAMnvC,QAAQ6uC,eAAef,EAAf,EAAmB,yBAAelpC,OAAf,CAAnB,CAAd;AACA,UAAI5E,KAAJ,EAAW;AACTrB,YAAIqB,KAAJ,CAAU,mCAAmCA,MAAM4E,OAAnD;AACA,YAAIopC,aAAJ,EAAmB;AACjBrvC,cAAI+L,KAAJ,CAAW,GAAEnB,QAAS,sCAAtB;AACA,gBAAM,kBAAInF,QAAQ0qC,cAAR,CAAuBljC,SAAvB,EAAkCrC,QAAlC,CAAJ,CAAN;AACD;AACD;AACD;AACF,KArBD,MAqBO;AACL5K,UAAI+L,KAAJ,CAAU,qFAAV;;AAEA;AACA,YAAM8kC,0BAA0B,MAAM,mBACpC1vC,UAAUA,OAAOX,IAAP,KAAgB,8BAAhB,IAAkDW,OAAOmF,OAD/B,CAAtC;AAGAtG,UAAI+L,KAAJ,CAAW,4DAA2D8kC,uBAAwB,EAA9F;AACA;AACD;;AAED,UAAMC,iBAAiBhuC,KAAKD,GAAL,EAAvB;AACA;AACA,UAAM,EAAEsF,UAAF,EAAc4oC,UAAd,KAA6B,MAAM,mBAAK;AAC5C3/B,cAAQ,oBAAMm+B,YAAN,CADoC;AAE5CwB,kBAAY,mBAAKvrC,YAAYwrC,mBAAjB,CAFgC;AAG5C7oC,kBAAY,mBAAK3C,YAAYoqC,sBAAjB;AAHgC,KAAL,CAAzC;;AAMA;AACA;AACA;AACA,UAAMqB,cAAcnuC,KAAKD,GAAL,KAAaiuC,cAAjC;;AAEA;AACA,QAAI3oC,UAAJ,EAAgB;AACdnI,UAAI+L,KAAJ,CAAU,yDAAV;AACA;AACD;;AAED,QAAI+F,OAAOtR,IAAP,KAAgBiwC,4BAAiBC,SAArC,EAAgD;AAC9C,UAAIK,UAAJ,EAAgB;AACd;AACAV,yBAAiBvtC,KAAKD,GAAL,EAAjB;;AAEA,cAAMquC,oBAAoB3B,eAAe0B,WAAzC;AACA,cAAM,EAAE9oC,UAAF,KAAiB,MAAM,mBAAK;AAChCiJ,kBAAQ,oBAAM8/B,iBAAN,CADwB;AAEhC/oC,sBAAY,mBAAK3C,YAAYoqC,sBAAjB;AAFoB,SAAL,CAA7B;AAIA;AACA,YAAIznC,UAAJ,EAAgB;AACdnI,cAAI+L,KAAJ,CAAU,yDAAV;AACA;AACD;AACF,OAdD,MAcO;AACL,YAAIjJ,KAAKD,GAAL,KAAawtC,cAAb,IAA+BZ,eAAnC,EAAoD;AAClDzvC,cAAIosB,IAAJ,CAAS,2EAAT,EAAsFxhB,QAAtF;;AAEA;AACA,cAAIykC,aAAJ,EAAmB;AACjB,kBAAM,kBAAI5pC,QAAQ0qC,cAAR,CAAuBljC,SAAvB,EAAkCrC,QAAlC,CAAJ,CAAN;AACD;;AAED;AACD,SATD,MASO;AACL5K,cAAI+L,KAAJ,CAAW,GAAEnB,QAAS,4BAA2B2jC,WAAY,qBAAoBkB,eAAgB,GAAjG;AACD;AACF;AACF;AACF;AACF;;AAED;;;;;AAKA,SAASS,cAAT,CAAyBf,EAAzB,EAA6BlpC,OAA7B,EAAsC;AACpC,MAAI;AACF,QAAIkpC,MAAMA,GAAGgC,UAAH,KAAkB,CAA5B,EAA+B;AAC7BnxC,UAAI+L,KAAJ,CAAU,+BAAV,EAA2C9F,OAA3C;AACAkpC,SAAGiC,IAAH,CAAQnrC,OAAR;AACD,KAHD,MAGO;AACL,YAAM,IAAImkB,KAAJ,CAAU,iCAAV,CAAN;AACD;AACF,GAPD,CAOE,OAAOluB,CAAP,EAAU;AACV,WAAOA,CAAP;AACD;AACF;;AAED;;;;;;;;AAQO,UAAW2xC,gBAAX,CAA6BI,MAA7B,EAAqCrjC,QAArC,EAA+C;AACpD,QAAMymC,UAAU,MAAM,qBAAOjD,gCAAP,CAAtB;AACA,MAAIkD,oBAAoB,CAAxB;AACA,MAAItW,YAAY,CAAhB;AACA,MAAIv2B,SAAJ;;AAEA;AACA;AACA,WAAS8sC,0BAAT,CAAqCpwC,MAArC,EAA6C;AAC3C,WAAOA,OAAOX,IAAP,KAAgBgF,YAAYqpC,aAA5B,IAA6C1tC,OAAOuJ,IAAP,CAAYE,QAAZ,KAAyBA,QAA7E;AACD;;AAED;AACA,MAAI,CAACymC,QAAQG,cAAb,EAA6B;AAC3BxxC,QAAI+L,KAAJ,CAAU,sCAAV;AACD;;AAED,SAAOulC,oBAAoBD,QAAQG,cAA5B,IAA8C,CAACH,QAAQG,cAA9D,EAA8E;AAC5E,QAAI;AACF;AACA/sC,kBAAY,MAAM,mBAAKgtC,wBAAL,EAAoBxD,MAApB,CAAlB;AACAjuC,UAAI4G,IAAJ,CAAU,2CAA0CgE,QAAS,EAA7D;AACA;AACD,KALD,CAKE,OAAOmgB,GAAP,EAAY;AACZumB;AACA7sC,kBAAYsmB,GAAZ;AACA/qB,UAAI+L,KAAJ,CACG,qCAAoCnB,QAAS,eAAc0mC,iBAAkB,eAAc7sC,UAAUwB,OAAQ,GADhH;;AAIA;AACA,UAAIqrC,oBAAoBD,QAAQG,cAA5B,IAA8C,CAACH,QAAQG,cAA3D,EAA2E;AACzE;AACA,YAAIxW,cAAcqW,QAAQK,kBAA1B,EAA8C;AAC5C1W,sBAAYqW,QAAQM,cAAR,GAAyBh0C,KAAKwT,GAAL,CAASkgC,QAAQO,uBAAjB,EAA0CN,oBAAoB,CAA9D,CAArC;AACAtW,sBAAYA,YAAYqW,QAAQK,kBAApB,GAAyC1W,SAAzC,GAAqDqW,QAAQK,kBAAzE;AACD;AACD1xC,YAAI+L,KAAJ,CAAW,qCAAoCivB,SAAU,UAASpwB,QAAS,EAA3E;;AAEA;AACA,cAAM,EAAEzC,UAAF,KAAiB,MAAM,mBAAK;AAChC0pC,iBAAO,oBAAM7W,SAAN,CADyB;AAEhC7yB,sBAAY,mBAAKopC,0BAAL;AAFoB,SAAL,CAA7B;;AAKA,YAAIppC,UAAJ,EAAgB;AACd;AACD;AACF,OAjBD,MAiBO;AACLnI,YAAI+L,KAAJ,CAAW,6CAA4CnB,QAAS,GAAhE;AACD;AACF;AACF;;AAED;AACA,SAAOnG,SAAP;AACD,C;;;;;;;;;;;;;;;;;;QClXegtC,a,GAAAA,a;QAqCA3C,c,GAAAA,c;QAyDEL,S,GAAAA,S;;AAtHlB;;AACA;;AACA;;AAEA;;AAGA;;AACA;;;;AAFA;AAIA,MAAMqD,sBAAsB,EAA5B;AACA,MAAM9xC,MAAM0F,iBAAWC,SAAX,CAAqB,cAArB,CAAZ;;AAEA;;;;;;;;;;;AAWO,SAAS8rC,aAAT,CAAwBvsC,OAAxB,EAAiC;AACtC;AACA,QAAMiqC,KAAK,IAAI4C,SAAJ,CACR,GAAE7sC,QAAQd,QAAS,MAAKc,QAAQb,MAAO,IAAGa,QAAQZ,IAAK,GAAEY,QAAQqC,GAAI,EAAtE,GAA0E,0BAAcrC,QAAQ2a,MAAtB,CADjE,CAAX;;AAIA;AACA;AACA,QAAMmyB,aAAa,sBAAY,CAACC,OAAD,EAAU3wB,MAAV,KAAqB;AAClD,UAAM4wB,SAAS,YAAY;AACzB/C,SAAGgD,MAAH,GAAY,IAAZ;AACAhD,SAAGiD,OAAH,GAAa,IAAb;AACAH,cAAQ9C,EAAR;AACD,KAJD;AAKA,UAAMkD,UAAU,YAAY;AAC1BlD,SAAGgD,MAAH,GAAY,IAAZ;AACAhD,SAAGiD,OAAH,GAAa,IAAb;;AAEA;AACA;AACA9wB,aAAO;AACLjgB,eAAO,IADF;AAEL4E,iBAAS;AAFJ,OAAP;AAID,KAVD;AAWAkpC,OAAGgD,MAAH,GAAYD,MAAZ;AACA/C,OAAGiD,OAAH,GAAaC,OAAb;AACD,GAnBkB,CAAnB;AAoBA,SAAOL,UAAP;AACD;;AAED;;;;;;AAMO,SAASlD,cAAT,CAAyBK,EAAzB,EAA6B;AAClC,MAAIA,GAAGpZ,KAAP,EAAc;AACZoZ,OAAGpZ,KAAH;AACD,GAFD,MAEO;AACLoZ,OAAGmD,OAAH,GAAa,IAAb;AACD;;AAEDnD,KAAGoD,SAAH,GAAe,IAAf;AACApD,KAAGgD,MAAH,GAAY,IAAZ;AACAhD,KAAGiD,OAAH,GAAa,IAAb;AACD;;AAED;;;;;;AAMA,SAASI,eAAT,CAA0BrD,EAA1B,EAA8BvkC,QAA9B,EAAwC;AACtC;AACA,SAAO,6BAAa6nC,QAAQ;AAC1B;AACAtD,OAAGoD,SAAH,GAAetsC,WAAW;AACxB;AACAkpC,SAAGhB,KAAH,CAASI,WAAT,GAAuBzrC,KAAKD,GAAL,EAAvB;;AAEA,UAAI6vC,OAAOC,KAAKza,KAAL,CAAWjyB,QAAQysC,IAAnB,CAAX;AACA1yC,UAAI+L,KAAJ,CAAU,gCAAV,EAA4C2mC,IAA5C;AACA,UAAIA,KAAK5C,SAAT,EAAoB;AAClB;AACA2C,aAAK,gCAAkBC,IAAlB,EAAwB9nC,QAAxB,CAAL;AACD,OAHD,MAGO,IAAI8nC,KAAKzC,OAAT,EAAkB;AACvB;AACAwC,aAAK,gCAAkBC,IAAlB,EAAwB9nC,QAAxB,CAAL;AACD,OAHM,MAGA;AACL6nC,aAAK,qCAAsBC,IAAtB,EAA4B9nC,QAA5B,CAAL;AACD;AACF,KAfD;AAgBAukC,OAAGmD,OAAH,GAAaI,QAAQ;AACnBD,WAAK,uBAASC,IAAT,EAAe9nC,QAAf,CAAL;AACA6nC,WAAKjvB,cAAL;AACD,KAHD;AAIA2rB,OAAGiD,OAAH,GAAarnB,OAAO;AAClB0nB,WAAK,sBAAQ,IAAIroB,KAAJ,CAAUW,GAAV,CAAR,EAAwBngB,QAAxB,CAAL;AACA6nC,WAAKjvB,cAAL;AACD,KAHD;;AAKA,WAAO,MAAMsrB,eAAeK,EAAf,CAAb;AACD,GA5BM,EA4BJyD,mBAAQC,SAAR,CAAkBf,mBAAlB,CA5BI,CAAP;AA6BD;;AAED;;;;;;AAMO,UAAWrD,SAAX,CAAsBU,EAAtB,EAA0BvkC,QAA1B,EAAoC;AACzC,MAAIkoC,YAAY,MAAM,mBAAKN,eAAL,EAAsBrD,EAAtB,EAA0BvkC,QAA1B,CAAtB;AACA,SAAO,IAAP,EAAa;AACX,UAAMzJ,SAAS,MAAM,mBAAK2xC,SAAL,CAArB;AACA,UAAM,kBAAI3xC,MAAJ,CAAN;AACD;AACF,C;;;;;;;;;;;;;AC5HD,MAAMyH,SAAS,eAAf;;AAEA;AACO,MAAMmlC,kDAAqBnlC,SAAS,oBAApC;AACA,MAAM2rB,oDAAsB3rB,SAAS,qBAArC;AACA,MAAMimC,wCAAgBjmC,SAAS,eAA/B;AACA,MAAMgnC,0DAAyBhnC,SAAS,wBAAxC;AACA,MAAM+I,oDAAsB/I,SAAS,qBAArC;;AAEP;AACO,MAAMmqC,gCAAYnqC,SAAS,WAA3B;AACA,MAAMoqC,8BAAWpqC,SAAS,UAA1B;;AAEA,MAAMD,4CAAkBC,SAAS,iBAAjC;;AAEA,MAAM+mC,oDAAsB/mC,SAAS,qBAArC;AACA,MAAMooC,oDAAsBpoC,SAAS,qBAArC;;AAEA,MAAMqqC,sEAA+BrqC,SAAS,8BAA9C;AACA,MAAMsqC,sDAAuBtqC,SAAS,sBAAtC,C;;;;;;;;;;;;;;;ACnBP;;IAAYpD,W;;AAEZ;;;;AAEA;;;AAGA,SAAS2tC,cAAT,CAAyB3yC,IAAzB,EAA+B;AAC7B;;;;;AAKA,WAASW,MAAT,CAAiBmF,OAAjB,EAA0BsE,WAAW7D,qBAAUC,IAA/C,EAAqDknC,cAAc,KAAnE,EAA0E;AACxE,WAAO;AACL1tC,UADK;AAEL;AACAa,aAAOiF,mBAAmB8jB,KAHrB;AAIL9jB,aAJK;AAKLoE,YAAM,EAAEE,QAAF,EAAYsjC,WAAZ;AALD,KAAP;AAOD;AACD,SAAO/sC,MAAP;AACD;AAtBD;AAwBO,MAAM+tC,8CAAmBiE,eAAe3tC,YAAYuoC,kBAA3B,CAAzB;AACA,MAAMqF,sCAAeD,eAAe3tC,YAAYqpC,aAA3B,CAArB;AACA,MAAMP,gDAAoB6E,eAAe3tC,YAAY+uB,mBAA3B,CAA1B;AACA,MAAMwa,sDAAuBoE,eAAe3tC,YAAYoqC,sBAA3B,CAA7B;AACA,MAAMvB,gDAAoB8E,eAAe3tC,YAAYmM,mBAA3B,CAA1B;;AAEA,MAAM0hC,8BAAWF,eAAe3tC,YAAYutC,SAA3B,CAAjB;AACA,MAAMO,4BAAUH,eAAe3tC,YAAYwtC,QAA3B,CAAhB;;AAEA,MAAM7C,0CAAiBgD,eAAe3tC,YAAYmD,eAA3B,CAAvB;;AAEA,MAAM4qC,gDAAoBJ,eAAe3tC,YAAYmqC,mBAA3B,CAA1B;AACA,MAAM6D,gDAAoBL,eAAe3tC,YAAYwrC,mBAA3B,CAA1B;;AAEA,MAAMyC,kEAA6BN,eAAe3tC,YAAYytC,4BAA3B,CAAnC;AACA,MAAMjD,kDAAqBmD,eAAe3tC,YAAY0tC,oBAA3B,CAA3B,C;;;;;;;;;;;;;kBCtBiBpnC,G;;AAjBxB;;AAUA;;AACA;;AAEA;;AAdA;AAgBA,MAAM9L,MAAM0F,iBAAWC,SAAX,CAAqB,cAArB,CAAZ;;AAbA;;;;;;;;AAee,SAASmG,GAAT,CAAc,EAAEnJ,QAAF,EAAYD,QAAZ,EAAd,EAAsC;AACnD,QAAMgxC,kBAAkB;AACtB;;;;;;;AAOAC,mBAAgB/oC,WAAW7D,qBAAUC,IAArC,EAA2C;AACzChH,UAAI+L,KAAJ,CAAUC,oBAAc,6BAAxB,EAAuDpB,QAAvD;AACA,aAAO,mCAAmBlI,UAAnB,EAA+BkI,QAA/B,CAAP;AACD,KAXqB;;AAatB;;;;;;;AAOAgpC,+BAA4BC,MAA5B,EAAoC;AAClC7zC,UAAI+L,KAAJ,CAAUC,oBAAc,yCAAxB,EAAmE6nC,MAAnE;AACAlxC,eAAS,yCAA2BkxC,MAA3B,CAAT;AACD;AAvBqB,GAAxB;AAyBA,SAAO,EAAE7rC,YAAY0rC,eAAd,EAAP;AACD,C;;;;;;;;;;;;;QC3BiB7F,gB,GAAAA,gB;QAoBAiG,mB,GAAAA,mB;;AAtClB;;AACA;;AACA;;AAEA;;;;;;;;;;;;;;AAcO,UAAWjG,gBAAX,CAA6BvmC,aAA7B,EAA4CsD,QAA5C,EAAsD;AAC3D;AACA,QAAM,kBAAI,+BAAiBtD,aAAjB,EAAgCsD,QAAhC,CAAJ,CAAN;;AAEA;AACA,QAAMmpC,iBAAiB,MAAM,mBAAK5yC,UAAU;AAC1C,WAAOA,OAAOX,IAAP,KAAgB+zB,gCAAhB,IAAuCpzB,OAAOuJ,IAAP,CAAYE,QAAZ,KAAyBA,QAAvE;AACD,GAF4B,CAA7B;;AAIA;AACA,SAAOmpC,cAAP;AACD;;AAED;;;;;;;AAOO,UAAWD,mBAAX,CAAgCxtC,OAAhC,EAAyCsE,QAAzC,EAAmD;AACxD;AACA,QAAM,kBAAI,2BAAatE,OAAb,EAAsBsE,QAAtB,CAAJ,CAAN;;AAEA;AACA,QAAMmpC,iBAAiB,MAAM,mBAAK5yC,UAAU;AAC1C,WAAO,CAACA,OAAOX,IAAP,KAAgBovC,mCAAhB,IAA0CzuC,OAAOX,IAAP,KAAgBwyC,qBAA3D,KAAwE7xC,OAAOuJ,IAAP,CAAYE,QAAZ,KAAyBA,QAAxG;AACD,GAF4B,CAA7B;;AAIA;AACA,SAAOmpC,cAAP;AACD,C;;;;;;;;;;;;;ACjDD;;;;;;;;;AASO,MAAMC,gCAAY,WAAlB,C;;;;;;;;;;;;;;ACTP;;IAAY3uB,U;;AACZ;;IAAY7f,W;;;;AAEZ,IAAIqhB,SAAS,EAAb;;AAEAA,OAAOrhB,YAAY+uB,mBAAnB,IAA0C,UAAUpzB,MAAV,EAAkB;AAC1D,MAAIA,OAAOE,KAAX,EAAkB;AAChB;AACD,GAFD,MAEO;AACL,WAAO;AACLb,YAAM6kB,WAAW2uB,SADZ;AAELxuB,YAAM,EAAE5a,UAAUzJ,OAAOuJ,IAAP,CAAYE,QAAxB;AAFD,KAAP;AAID;AACF,CATD;;AAWAic,OAAOrhB,YAAYmD,eAAnB,IAAsC,UAAUxH,MAAV,EAAkB;AACtD,SAAO;AACLX,UAAM6kB,WAAW2uB,SADZ;AAELxuB,UAAM,EAAE5a,UAAUzJ,OAAOuJ,IAAP,CAAYE,QAAxB;AAFD,GAAP;AAID,CALD;AAMA;AACAic,OAAOrhB,YAAYoqC,sBAAnB,IAA6C/oB,OAAOrhB,YAAYmD,eAAnB,CAA7C;;AAEA;AACAke,OAAOrhB,YAAYuoC,kBAAnB,IAAyC,UAAU5sC,MAAV,EAAkB;AACzD,SAAO;AACLX,UAAM6kB,WAAW2uB,SADZ;AAELxuB,UAAM,EAAE5a,UAAUzJ,OAAOuJ,IAAP,CAAYE,QAAxB;AAFD,GAAP;AAID,CALD;;kBAOeic,M;;;;;;;;;;;;;;;ACjCf;;;;AACA;;;;AACA;;;;;;QAESha,I,GAAAA,c;QAAMf,G,GAAAA,a;QAAKc,O,GAAAA,kB;;;;;;;;;;;;;ACJpB,MAAMC,OAAO,cAAb;kBACeA,I;;;;;;;;;;;;;;;;;;ACDf;;IAAYrH,W;;AACZ;;AACA;;;;;;AAEA,MAAMsH,WAAW,EAAjB;;AAEAA,SAAStH,YAAYuoC,kBAArB,IAA2C;AACzChhC,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL;AAEE,OAAC7L,OAAOuJ,IAAP,CAAYE,QAAb,8BACKoC,MAAM7L,OAAOuJ,IAAP,CAAYE,QAAlB,CADL;AAEEkG,mBAAW,KAFb;AAGEmjC,iBAAS;AAHX;AAFF;AAQD;AAVwC,CAA3C;;AAaAnnC,SAAStH,YAAYmM,mBAArB,IAA4C;AAC1C5E,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL;AAEE,OAAC7L,OAAOuJ,IAAP,CAAYE,QAAb,8BACKoC,MAAM7L,OAAOuJ,IAAP,CAAYE,QAAlB,CADL;AAEEkG,mBAAW,KAFb;AAGEmjC,iBAAS;AAHX;AAFF;AAQD;AAVyC,CAA5C;;AAaAnnC,SAAStH,YAAY+uB,mBAArB,IAA4C;AAC1CxnB,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL;AAEE,OAAC7L,OAAOuJ,IAAP,CAAYE,QAAb,8BACKoC,MAAM7L,OAAOuJ,IAAP,CAAYE,QAAlB,CADL;AAEEkG,mBAAW,IAFb;AAGEgB,gBAAQ3Q,OAAOmF,OAAP,CAAe6nC,KAAf,CAAqBr8B,MAH/B;AAIElH,kBAAUzJ,OAAOuJ,IAAP,CAAYE;AAJxB,SAKK,cAAK,mBAAL,EAA0BzJ,OAAOmF,OAAP,CAAe6nC,KAAzC,CALL;AAFF;AAUD,GAZyC;AAa1CjhC,QAAOF,KAAP,EAAc7L,MAAd,EAAsB;AACpB,WAAO;AACL,OAACA,OAAOuJ,IAAP,CAAYE,QAAb,GAAwB;AACtBkG,mBAAW,KADW;AAEtBmjC,iBAAS;AAFa;AADnB,KAAP;AAMD;AApByC,CAA5C;;AAuBAnnC,SAAStH,YAAYmD,eAArB,IAAwC;AACtCoE,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL;AAEE,OAAC7L,OAAOuJ,IAAP,CAAYE,QAAb,8BACKoC,MAAM7L,OAAOuJ,IAAP,CAAYE,QAAlB,CADL;AAEEkG,mBAAW,KAFb;AAGEmjC,iBAAS;AAHX;AAFF;AAQD;AAVqC,CAAxC;;AAaAnnC,SAAStH,YAAYoqC,sBAArB,IAA+C;AAC7C7iC,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,WAAO;AACL,OAACA,OAAOuJ,IAAP,CAAYE,QAAb,GAAwB;AACtBkG,mBAAW,KADW;AAEtBmjC,iBAAS;AAFa;AADnB,KAAP;AAMD,GAR4C;AAS7C/mC,QAAOF,KAAP,EAAc7L,MAAd,EAAsB;AACpB,WAAO;AACL,OAACA,OAAOuJ,IAAP,CAAYE,QAAb,GAAwB;AACtBkG,mBAAW,KADW;AAEtBmjC,iBAAS;AAFa;AADnB,KAAP;AAMD;AAhB4C,CAA/C;;AAmBAnnC,SAAStH,YAAYwtC,QAArB,IAAiC;AAC/BjmC,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,WAAO;AACL,OAACA,OAAOuJ,IAAP,CAAYE,QAAb,GAAwB;AACtBkG,mBAAW,KADW;AAEtBmjC,iBAAS;AAFa;AADnB,KAAP;AAMD,GAR8B;AAS/B/mC,QAAOF,KAAP,EAAc7L,MAAd,EAAsB;AACpB,WAAO;AACL,OAACA,OAAOuJ,IAAP,CAAYE,QAAb,GAAwB;AACtBkG,mBAAW,KADW;AAEtBmjC,iBAAS;AAFa;AADnB,KAAP;AAMD;AAhB8B,CAAjC;;AAmBA;;;AAGAnnC,SAAStH,YAAYytC,4BAArB,IAAqD;AACnDlmC,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL;AAEEojC,yBAAmBjvC,OAAOmF;AAF5B;AAID;AANkD,CAArD;;AASA;;;AAGAwG,SAAStH,YAAY0tC,oBAArB,IAA6C;AAC3CnmC,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL;AAEEuiC,oBAAcpuC,OAAOmF;AAFvB;AAID;AAN0C,CAA7C;;AASA;;;;;;;AAOA,MAAMsG,UAAU,iCAAcE,QAAd,EAAwB,EAAxB,CAAhB;kBACeF,O;;;;;;;;;;;;;QCvICiE,kB,GAAAA,kB;QAaAu9B,qB,GAAAA,qB;QAUAoB,e,GAAAA,e;QAUAe,oB,GAAAA,oB;;AApChB;;AACA;;;;;;AAEO,SAAS1/B,kBAAT,CAA6B7D,KAA7B,EAAoCpC,QAApC,EAA8C;AACnD,MAAIoC,MAAMH,cAAN,EAAYjC,QAAZ,CAAJ,EAA2B;AACzB,WAAO,mBAAUoC,MAAMH,cAAN,EAAYjC,QAAZ,CAAV,CAAP;AACD,GAFD,MAEO;AACL,WAAO,IAAIwf,KAAJ,CAAU,mDAAV,CAAP;AACD;AACF;;AAED;;;;;AAKO,SAASgkB,qBAAT,CAAgCphC,KAAhC,EAAuC;AAC5C,SAAOA,MAAM9G,MAAN,CAAa2G,cAAb,CAAP;AACD;;AAED;;;;;;AAMO,SAAS2iC,eAAT,CAA0BxiC,KAA1B,EAAiC;AACtC,SAAOA,MAAMH,cAAN,EAAY0iC,YAAnB;AACD;;AAED;;;;;;AAMO,SAASgB,oBAAT,CAA+BvjC,KAA/B,EAAsC;AAC3C,SAAOA,MAAMH,cAAN,EAAYujC,iBAAnB;AACD,C;;;;;;;;;;;;;kBCmBuB8D,Y;;AAzDxB;;;;AACA;;AACA;;AAGA;;;;AAEA,MAAMC,gBAAgB;AACpBriC,UAAQ2+B,4BAAiBE,UADL;AAEpBpB,gBAAc,KAFM;AAGpBiC,kBAAgB,CAHI;AAIpBG,kBAAgB,IAJI;AAKpBC,2BAAyB,CALL;AAMpBF,sBAAoB,MANA;AAOpBrC,iBAAe,IAPK;AAQpBD,kBAAgB,CARI;AASpBgB,qBAAmB,IATC;AAUpBgE,sBAAoB;;AAGtB;AAbsB,CAAtB;;AAHA;AAiBA,MAAM1vC,gBAAgBC,uBAAIC,MAAJ,CAAW;AAC/BkN,UAAQ,uBAAM,CAAC2+B,4BAAiBE,UAAlB,CAAN,CADuB;AAE/BpB,gBAAc5qC,uBAAIG,QAAJ,EAFiB;AAG/B0sC,kBAAgB7sC,uBAAIG,QAAJ,EAHe;AAI/B6sC,kBAAgBhtC,uBAAIG,QAAJ,EAJe;AAK/B8sC,2BAAyBjtC,uBAAIG,QAAJ,EALM;AAM/B4sC,sBAAoB/sC,uBAAIG,QAAJ,EANW;AAO/BuqC,iBAAe1qC,uBAAIsnB,OAAJ,EAPgB;AAQ/BmjB,kBAAgBzqC,uBAAIG,QAAJ,EARe;AAS/BsrC,qBAAmBzrC,uBAAIsnB,OAAJ,EATY;AAU/BmoB,sBAAoBzvC,uBAAIE,MAAJ;AAVW,CAAX,CAAtB;AAYA,MAAMI,eAAe,uBAAM,cAAN,EAAsBP,aAAtB,CAArB;;AAEA;;;;;;;;;;;;;;;;;;;;;;AAsBe,SAASwvC,YAAT,CAAuBhvC,UAAU,EAAjC,EAAqC;AAClDA,YAAU,kBAASivC,aAAT,EAAwBjvC,OAAxB,CAAV;AACAD,eAAaC,OAAb;AACA,SAAO,oBAAiBA,OAAjB,CAAP;AACD,C;;;;;;;;;;;;;AC7DM,MAAM6B,gCAAY;AACvBC,QAAM,MADiB;AAEvBoI,MAAI,IAFmB;AAGvBN,SAAO;AAHgB,CAAlB;;AAMA,MAAMulC,gDAAoB;AAC/BC,aAAW,WADoB;AAE/BC,QAAM;AAFyB,CAA1B;;AAKA,MAAMjH,4DAA0B;AACrCC,UAAQ,QAD6B;AAErCoB,UAAQ;AAF6B,CAAhC;;AAKA,MAAM8B,8CAAmB;AAC9BE,cAAY,WADkB;AAE9BD,aAAW;AAFmB,CAAzB,C;;;;;;;;AChBP;;;;;;;;;AASA;;;;;;;;;;AAUA;;;;;;;;;AASA;;;;;;;;;;AAUA;;;;;;;;;;AAUA;;;;;;;;;;;;;;;;;;;;;;AChDA;;;;AAIO,MAAMtpC,gCAAY;AACvBoJ,uBAAqB,kBADE;AAEvBgkC,yBAAuB,kBAFA;AAGvB1hC,yBAAuB,kBAHA;AAIvBL,uBAAqB,kBAJE;AAKvBgiC,iCAA+B,kBALR;AAMvBnjC,iCAA+B,kBANR;AAOvBojC,qBAAmB,kBAPI;AAQvBC,yBAAuB,kBARA;AASvBC,wBAAsB,kBATC;AAUvBC,+BAA6B,mBAVN;AAWvBC,sBAAoB,mBAXG;AAYvBztC,mBAAiB;;AAGnB;;;;AAfyB,CAAlB,CAmBA,MAAMmP,gCAAY;AACvBu+B,iBAAe,QADQ;AAEvB/f,iBAAe,QAFQ;AAGvBggB,qBAAmB,QAHI;AAIvB1M,oBAAkB,QAJK;AAKvB2M,iBAAe,QALQ;AAMvB;AACAv+B,iBAAe,QAPQ;AAQvB;AACAD,iBAAe,QATQ;AAUvB;AACAG,gBAAc,QAXS;AAYvB;AACAslB,iBAAe;;AAGjB;;;;AAhByB,CAAlB,CAoBA,MAAMgZ,8CAAmB;AAC9BH,iBAAe,eADe;AAE9BI,eAAa,eAFiB;AAG9BC,aAAW,eAHmB;AAI9BC,qBAAmB,eAJW;AAK9BC,aAAW;AAEb;;;AAPgC,CAAzB,CAUA,MAAMC,8CAAmB;AAC9BC,gBAAc,eADgB;AAE9BC,kBAAgB;AAElB;;;;AAJgC,CAAzB,CAQA,MAAMC,oCAAc;AACzBX,iBAAe,UADU;AAEzB/f,iBAAe,UAFU;AAGzB2gB,sBAAoB;;AAGtB;;;;AAN2B,CAApB,CAUA,MAAMC,0CAAiB;AAC5BC,qBAAmB,aADS;AAE5BC,kBAAgB,aAFY;AAG5BC,uBAAqB,aAHO;AAI5BC,oBAAkB,aAJU;AAK5BC,qBAAmB,aALS;AAM5BC,uBAAqB,aANO;AAO5BC,oBAAkB,aAPU;AAQ5BC,4BAA0B,aARE;AAS5BC,uBAAqB,aATO;AAU5BC,sBAAoB,cAVQ;AAW5BC,sBAAoB;;AAGtB;;;;AAd8B,CAAvB,CAkBA,MAAMC,8BAAW;AACtBC,kBAAgB;;AAGlB;;;;AAJwB,CAAjB,CAQA,MAAMC,wCAAgB;AAC3B3B,iBAAe,aADY;AAE3B;AACA4B,mBAAiB,aAHU;AAI3B;AACAC,kBAAgB;;AAGlB;;;;AAR6B,CAAtB,CAYA,MAAMC,oCAAc;AACzB9B,iBAAe,eADU;AAEzB;AACA+B,iBAAe,eAHU;AAIzBC,kBAAgB,eAJS;AAKzB3B,aAAW,eALc;AAMzBH,iBAAe,eANU;AAOzB+B,mBAAiB,eAPQ;AAQzBtgC,iBAAe;;AAGjB;;;;AAX2B,CAApB,CAeA,MAAMugC,gDAAoB;AAC/BC,uBAAqB,gBADU;AAE/BC,wBAAsB,gBAFS;AAG/BC,uBAAqB,gBAHU;AAI/BC,wBAAsB,gBAJS;AAK/BC,0BAAwB,gBALO;AAM/BC,4BAA0B,gBANK;AAO/BC,0BAAwB;AAE1B;;;;AATiC,CAA1B,CAaA,MAAMC,wCAAgB;AAC3BC,kBAAgB,YADW;AAE3BC,oBAAkB;;AAGpB;;;;AAL6B,CAAtB,CASA,MAAMC,kCAAa;AACxBC,WAAS,SADe;AAExBC,yBAAuB,SAFC;AAGxBC,0BAAwB,SAHA;AAIxBthC,iBAAe;AAJS,CAAnB,C;;;;;;;;;;;;;;;;;;;kBCvILrP,S;;;;;;kBACAoP,S;;;;;;kBACA0+B,gB;;;;;;kBACAQ,W;;;;;;kBACAE,c;;;;;;kBACAY,Q;;;;;;kBACAE,a;;;;;;kBACAnB,gB;;;;;;kBACAsB,W;;;;;;kBACAI,iB;;;;;;kBACAQ,a;;;;;;kBACAG,U;;;AAGa,MAAM5xC,UAAN,CAAiB;AAC9BzJ,cAAa,EAAE0J,OAAF,EAAWkB,IAAX,EAAb,EAAgC;AAC9B,SAAK0F,IAAL,GAAY,YAAZ;AACA,SAAK1F,IAAL,GAAYA,QAAQ,SAApB;AACA,SAAKlB,OAAL,GAAeA,UAAW,GAAEA,OAAQ,EAArB,GAAyB,oBAAxC;AACD;AAL6B;kBAAXD,U;;;;;;;;;;;;;;;;;;kBCdGgyC,Y;;;;AAXxB;;;;;;;;;;;AAWe,SAASA,YAAT,CAAuB17C,YAAY,EAAnC,EAAuC;AACpD,MAAI27C,WAAW,EAAf;AACA,MAAIC,eAAe,EAAnB;AACA,MAAIC,aAAa,KAAjB;;AAEA;;;AAGA,WAASC,UAAT,CAAqB53C,IAArB,EAA2B;AACzB,QAAI23C,cAAc,CAACF,SAASz3C,IAAT,CAAnB,EAAmC;AACjC,YAAM,IAAI4pB,KAAJ,CAAU,yBAAyB5pB,IAAnC,CAAN;AACD;AACF;;AAED,SAAO,sBAAclE,SAAd,EAAyB;AAC9B;;;;;;AAMA+7C,YAAQ,UAAU73C,IAAV,EAAgB;AACtBy3C,eAASz3C,IAAT,IAAiBy3C,SAASz3C,IAAT,KAAkB,EAAnC;AACD,KAT6B;;AAW9B;;;;;;;;AAQA83C,WAAO,UAAU93C,IAAV,EAAgB83C,KAAhB,EAAuB;AAC5BF,iBAAW53C,IAAX;;AAEAy3C,eAASK,KAAT,IAAkBL,SAASz3C,IAAT,IAAiBy3C,SAASz3C,IAAT,KAAkB,EAArD;AACD,KAvB6B;;AAyB9B;;;;;;;;;AASA+3C,QAAI,UAAU/3C,IAAV,EAAgBg4C,QAAhB,EAA0B;AAC5BJ,iBAAW53C,IAAX,EACC,CAACy3C,SAASz3C,IAAT,IAAiBy3C,SAASz3C,IAAT,KAAkB,EAApC,EAAwCjD,IAAxC,CAA6Ci7C,QAA7C;AACF,KArC6B;;AAuC9B;;;;;;;;AAQAC,SAAK,UAAUj4C,IAAV,EAAgBg4C,QAAhB,EAA0B;AAC7BJ,iBAAW53C,IAAX;;AAEA,UAAIk4C,OAAOT,SAASz3C,IAAT,KAAkB,EAA7B;AACA,UAAIrD,IAAIu7C,KAAK37C,MAAb;AACA,aAAOI,GAAP,EAAY;AACV,YAAIq7C,aAAaE,KAAKv7C,CAAL,CAAjB,EAA0B;AACxBu7C,eAAKC,MAAL,CAAYx7C,CAAZ,EAAe,CAAf;AACD;AACF;AACF,KAzD6B;;AA2D9B;;;;;;;;AAQAs1C,UAAM,UAAUjyC,IAAV,EAAgB;AACpB43C,iBAAW53C,IAAX;;AAEA,UAAIglB,OAAO5nB,MAAMtB,SAAN,CAAgBgB,KAAhB,CAAsBL,IAAtB,CAA2BmF,SAA3B,EAAsC,CAAtC,CAAX;AACA,UAAIs2C,OAAOT,SAASz3C,IAAT,KAAkB,EAA7B;AACA,UAAIrD,IAAI,CAAR;;AAEA,aAAOA,IAAIu7C,KAAK37C,MAAhB,EAAwBI,GAAxB,EAA6B;AAC3Bu7C,aAAKv7C,CAAL,EAAQK,KAAR,CAAcyP,SAAd,EAAyBuY,IAAzB;AACD;AACD,WAAK,IAAI/jB,IAAI,CAAb,EAAgBA,IAAIy2C,aAAan7C,MAAjC,EAAyC0E,GAAzC,EAA8C;AAC5Cy2C,qBAAaz2C,CAAb,EAAgBxE,IAAhB,CAAqBgQ,SAArB,EAAgCzM,IAAhC,EAAsCglB,IAAtC;AACD;AACF,KAhF6B;;AAkF9B;;;;;;;AAOA1e,eAAW,UAAU0xC,QAAV,EAAoB;AAC7B,UAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAClCN,qBAAa36C,IAAb,CAAkBi7C,QAAlB;AACD,OAFD,MAEO;AACL,cAAM,IAAIpuB,KAAJ,CAAU,yBAAV,CAAN;AACD;AACF,KA/F6B;;AAiG9B;;;;;;;AAOAzZ,iBAAa,UAAU6nC,QAAV,EAAoB;AAC/B,UAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAClC,YAAIr7C,IAAI+6C,aAAan7C,MAArB;AACA,eAAOI,GAAP,EAAY;AACV,cAAIq7C,aAAaN,aAAa/6C,CAAb,CAAjB,EAAkC;AAChC+6C,yBAAaS,MAAb,CAAoBx7C,CAApB,EAAuB,CAAvB;AACD;AACF;AACF,OAPD,MAOO;AACL,cAAM,IAAIitB,KAAJ,CAAU,yBAAV,CAAN;AACD;AACF,KAnH6B;;AAqH9B;;;;;;AAMAwuB,mBAAe,UAAUC,MAAV,EAAkB;AAC/BV,mBAAaU,MAAb;AACD;AA7H6B,GAAzB,CAAP;AA+HD,C;;;;;;;;;;;;;;;;;;kBCxIuBC,oB;;AAfxB;;;;AACA;;AACA;;IAAYtzC,W;;AAEZ;;;;AAGA;;;;;;AACA,MAAMxF,MAAM0F,iBAAWC,SAAX,CAAqB,QAArB,CAAZ;;AAEA;;;;;;;AAJA;AAPA;AAgBe,SAASmzC,oBAAT,GAAiC;AAC9C,SAAO;AACLjsC,UAAM6f,oBAAgB7f,IADjB;AAELksC,gBAAYA,UAFP;AAGLjtC,SAAK4gB,oBAAgB5gB,GAHhB;AAILc,aAAS8f,oBAAgB9f;AAJpB,GAAP;AAMD;;AAED;;;;AAIA,SAASmsC,UAAT,CAAqB51B,OAArB,EAA8B;AAC5B,MAAI61B,UAAU,6BAAd;AACA,MAAIf,WAAW,EAAf;;AAEA;;;;;;AAMA,SAAOlrC,QAAQ5L,UAAU;AACvB,YAAQA,OAAOX,IAAf;AACE,WAAKgF,YAAYyzC,SAAjB;AACED,gBAAQT,EAAR,CAAWp3C,OAAOmF,OAAP,CAAeoL,SAA1B,EAAqCvQ,OAAOmF,OAAP,CAAekyC,QAApD;AACA;AACF,WAAKhzC,YAAY0zC,UAAjB;AACEF,gBAAQP,GAAR,CAAYt3C,OAAOmF,OAAP,CAAeoL,SAA3B,EAAsCvQ,OAAOmF,OAAP,CAAekyC,QAArD;AACA;AACF,WAAKhzC,YAAY2zC,gBAAjB;AACEH,gBAAQlyC,SAAR,CAAkB3F,OAAOmF,OAAzB;AACA;AACF,WAAKd,YAAY4zC,kBAAjB;AACEJ,gBAAQroC,WAAR,CAAoBxP,OAAOmF,OAA3B;AACA;AACF,WAAKd,YAAY6zC,YAAjB;AACEL,gBAAQV,KAAR,CAAcn3C,OAAOmF,OAAP,CAAeoL,SAA7B,EAAwCvQ,OAAOmF,OAAP,CAAegyC,KAAvD;AACA;AACF,WAAK9yC,YAAY8zC,WAAjB;AACEt5C,YAAI4G,IAAJ,CAAU,mBAAkBzF,OAAOmF,OAAP,CAAeoL,SAAU,EAArD,EAAwDvQ,OAAOmF,OAAP,CAAekf,IAAf,CAAoB,CAApB,CAAxD;AACAwzB,gBAAQvG,IAAR,CAAatxC,OAAOmF,OAAP,CAAeoL,SAA5B,EAAuC,GAAGvQ,OAAOmF,OAAP,CAAekf,IAAzD;AACA;AACF,WAAKhgB,YAAY+zC,UAAjB;AACE,aAAK,MAAMpvB,UAAX,IAAyBhpB,OAAOmF,OAAhC,EAAyC;AACvC,cAAInF,OAAOmF,OAAP,CAAezH,cAAf,CAA8BsrB,UAA9B,CAAJ,EAA+C;AAC7C,kBAAMqvB,SAASr4C,OAAOmF,OAAP,CAAe6jB,UAAf,CAAf;AACA,gBAAI8tB,SAASp5C,cAAT,CAAwBsrB,UAAxB,CAAJ,EAAyC;AACvC8tB,uBAAS9tB,UAAT,EAAqB5sB,IAArB,CAA0Bi8C,MAA1B;AACD,aAFD,MAEO;AACLvB,uBAAS9tB,UAAT,IAAuB,CAACqvB,MAAD,CAAvB;AACD;AACF;AACF;AACD;AACF;AACE,YAAIvB,SAASp5C,cAAT,CAAwBsC,OAAOX,IAA/B,CAAJ,EAA0C;AACxC;AACA;AACA,gBAAMY,YAAY+hB,QAAQzgB,QAAR,EAAlB;AACA,cAAIgQ,SAAS3F,KAAK5L,MAAL,CAAb;AACA,gBAAM6L,QAAQmW,QAAQzgB,QAAR,EAAd;;AAEA;AACA;AACA;AACA,cAAI,CAACgQ,MAAD,IAAW,CAACA,OAAO+mC,IAAvB,EAA6B;AAC3B/mC,qBAAS,kBAAQu/B,OAAR,CAAgBv/B,MAAhB,CAAT;AACD;AACDA,iBAAO+mC,IAAP,CAAY,YAAY;AACtB,iBAAK,MAAMD,MAAX,IAAqBvB,SAAS92C,OAAOX,IAAhB,CAArB,EAA4C;AAC1C;AACA;AACA,kBAAIqmB,SAAS2yB,OAAOr4C,MAAP,EAAe,EAAEC,SAAF,EAAa4L,KAAb,EAAf,CAAb;AACA,kBAAI,CAAC6Z,MAAL,EAAa;AACXA,yBAAS,EAAT;AACD,eAFD,MAEO,IAAI,CAACjpB,MAAMC,OAAN,CAAcgpB,MAAd,CAAL,EAA4B;AACjCA,yBAAS,CAACA,MAAD,CAAT;AACD;AACD,mBAAK,MAAM6yB,KAAX,IAAoB7yB,MAApB,EAA4B;AAC1B,oBAAI,CAAC6yB,MAAMl0B,IAAX,EAAiB;AACfk0B,wBAAMl0B,IAAN,GAAa,EAAb;AACD;AACDrC,wBAAQxgB,QAAR,CAAiB,wBAAU+2C,MAAMl5C,IAAhB,EAAsBk5C,MAAMl0B,IAA5B,CAAjB;AACD;AACF;AACF,WAjBD;AAkBA,iBAAO9S,MAAP;AACD;AACD;AAlEJ;;AAqEA,WAAO3F,KAAK5L,MAAL,CAAP;AACD,GAvED;AAwED,C;;;;;;;;;;;;;AC/GD,MAAMurC,SAAS,UAAf;;AAEO,MAAMuM,gCAAYvM,SAAS,WAA3B;AACA,MAAMwM,kCAAaxM,SAAS,YAA5B;AACA,MAAMyM,8CAAmBzM,SAAS,kBAAlC;AACA,MAAM0M,kDAAqB1M,SAAS,oBAApC;AACA,MAAM2M,sCAAe3M,SAAS,cAA9B;AACA,MAAM4M,oCAAc5M,SAAS,aAA7B;AACA,MAAM6M,kCAAa7M,SAAS,YAA5B,C;;;;;;;;;;;;;QCDSiN,S,GAAAA,S;QAgBApB,E,GAAAA,E;QAiBAE,G,GAAAA,G;QAgBA3xC,S,GAAAA,S;QAaA6J,W,GAAAA,W;QAiBAipC,S,GAAAA,S;QAkBAC,U,GAAAA,U;;AAxGhB;;IAAYr0C,W;;;;AAEZ;;;;;AAKO,SAASm0C,SAAT,CAAoBG,OAApB,EAA6B;AAClC,SAAO;AACLt5C,UAAMgF,YAAY+zC,UADb;AAELjzC,aAASwzC;AAFJ,GAAP;AAID;;AAED;;AAEA;;;;;;;AAOO,SAASvB,EAAT,CAAa/3C,IAAb,EAAmBg4C,QAAnB,EAA6B;AAClC,SAAO;AACLh4C,UAAMgF,YAAYyzC,SADb;AAEL3yC,aAAS;AACPoL,iBAAWlR,IADJ;AAEPg4C,gBAAUA;AAFH;AAFJ,GAAP;AAOD;;AAED;;;;;;;AAOO,SAASC,GAAT,CAAcj4C,IAAd,EAAoBg4C,QAApB,EAA8B;AACnC,SAAO;AACLh4C,UAAMgF,YAAY0zC,UADb;AAEL5yC,aAAS;AACPoL,iBAAWlR,IADJ;AAEPg4C,gBAAUA;AAFH;AAFJ,GAAP;AAOD;;AAED;;;;;;AAMO,SAAS1xC,SAAT,CAAoB0xC,QAApB,EAA8B;AACnC,SAAO;AACLh4C,UAAMgF,YAAY2zC,gBADb;AAEL7yC,aAASkyC;AAFJ,GAAP;AAID;;AAED;;;;;;AAMO,SAAS7nC,WAAT,CAAsB6nC,QAAtB,EAAgC;AACrC,SAAO;AACLh4C,UAAMgF,YAAY4zC,kBADb;AAEL9yC,aAASkyC;AAFJ,GAAP;AAID;;AAED;;AAEA;;;;;;;;AAQO,SAASoB,SAAT,CAAoBp5C,IAApB,EAA0B,GAAGglB,IAA7B,EAAmC;AACxC,MAAIhlB,SAASyM,SAAb,EAAwB;AACtB,UAAMmd,MAAM,4CAAN,CAAN;AACD;;AAED,SAAO;AACL5pB,UAAMgF,YAAY8zC,WADb;AAELhzC,aAAS,EAAEoL,WAAWlR,IAAb,EAAmBglB,IAAnB;AAFJ,GAAP;AAID;;AAED;;;;;;;AAOO,SAASq0B,UAAT,CAAqBr5C,IAArB,EAA2B83C,KAA3B,EAAkC;AACvC,MAAI93C,SAASyM,SAAT,IAAsBqrC,UAAUrrC,SAApC,EAA+C;AAC7C,UAAMmd,MAAM,oCAAN,CAAN;AACD;;AAED,SAAO;AACL5pB,UAAMgF,YAAY6zC,YADb;AAEL/yC,aAAS,EAAEoL,WAAWlR,IAAb,EAAmB83C,KAAnB;AAFJ,GAAP;AAID,C;;;;;;;;;;;;;kBCpGuBxsC,G;;AAZxB;;AAEA;;AAHA;AAKA,MAAM9L,MAAM0F,iBAAWC,SAAX,CAAqB,QAArB,CAAZ;;AAEA;;;;;;AAMe,SAASmG,GAAT,CAAc,EAAEnJ,QAAF,EAAd,EAA4B;AACzC,MAAImJ,MAAM,EAAV;;AAEA;;;;;;;;;;;;;;;AAeAA,MAAIysC,EAAJ,GAAS,UAAU/3C,IAAV,EAAgBg4C,QAAhB,EAA0B;AACjCx4C,QAAI+L,KAAJ,CAAUC,oBAAc,MAAxB,EAAgCxL,IAAhC;AACAmC,aAAS,iBAAGnC,IAAH,EAASg4C,QAAT,CAAT;AACD,GAHD;;AAKA;;;;;;;;;;AAUA1sC,MAAI2sC,GAAJ,GAAU,UAAUj4C,IAAV,EAAgBg4C,QAAhB,EAA0B;AAClCx4C,QAAI+L,KAAJ,CAAUC,oBAAc,OAAxB,EAAiCxL,IAAjC;AACAmC,aAAS,kBAAInC,IAAJ,EAAUg4C,QAAV,CAAT;AACD,GAHD;;AAKA;;;;;;;;;AASA1sC,MAAIhF,SAAJ,GAAgB,UAAU0xC,QAAV,EAAoB;AAClCx4C,QAAI+L,KAAJ,CAAUC,oBAAc,WAAxB;AACArJ,aAAS,wBAAU61C,QAAV,CAAT;AACD,GAHD;;AAKA;;;;;;;;;AASA1sC,MAAI6E,WAAJ,GAAkB,UAAU6nC,QAAV,EAAoB;AACpCx4C,QAAI+L,KAAJ,CAAUC,oBAAc,aAAxB;AACArJ,aAAS,0BAAY61C,QAAZ,CAAT;AACD,GAHD;;AAKA,SAAO1sC,GAAP;AACD,C;;;;;;;;;;;;;;AC/ED;;;;AACA;;;;;;AAEA;;;;AAJA;AAQA,MAAMe,OAAO,QAAb;;kBAEe;AACbA,MADa;AAEbf,oBAFa;AAGbc;AAHa,C;;;;;;;;;;;;;;;;;;kBCgBSA,O;;AAzBxB;;IAAYpH,W;;AAGZ;;;;;;AAJA;AAMA,SAASu0C,YAAT,CAAuB/sC,QAAQ,EAAEgtC,SAAS,EAAX,EAAeC,OAAO,CAAtB,EAA/B,EAA0D94C,MAA1D,EAAkE;AAChE,UAAQA,OAAOX,IAAf;AACE,SAAKgF,YAAYyzC,SAAjB;AACE,aAAO,gBAAO,OAAP,EAAgB,aAAI,CAAJ,CAAhB,EAAwBjsC,KAAxB,CAAP;AACF,SAAKxH,YAAY0zC,UAAjB;AACE,aAAO,gBAAO,OAAP,EAAgB,aAAI,CAAC,CAAL,CAAhB,EAAyBlsC,KAAzB,CAAP;AACF,SAAKxH,YAAY6zC,YAAjB;AACE,aAAO,gBAAO,SAAP,EAAkB,gBAAOl4C,OAAOmF,OAAP,CAAegyC,KAAtB,CAAlB,EAAgDtrC,KAAhD,CAAP;AACF;AACE,aAAOA,KAAP;AARJ;AAUD;;AAED;;;;;;;;;AAhBA;AAuBe,SAASJ,OAAT,CAAkBI,QAAQ,EAA1B,EAA8B7L,MAA9B,EAAsC;AACnD;AACA,MAAI,CAAC,kBAASA,OAAOX,IAAhB,EAAsBgF,WAAtB,CAAL,EAAyC;AACvC,WAAOwH,KAAP;AACD;;AAED,oCACKA,KADL;AAEE,KAAC7L,OAAOmF,OAAP,CAAeoL,SAAhB,GAA4BqoC,aAAa/sC,MAAM7L,OAAOmF,OAAP,CAAeoL,SAArB,CAAb,EAA8CvQ,MAA9C;AAF9B;AAID,C;;;;;;;;;;;;;;;;;;QCOe+4C,O,GAAAA,O;;AA1ChB;;AACA;;AACA;;;;AACA;;AACA;;AACA;;;;AAGA;;AACA;;AAGA;;AAGA;;;;AAJA;;;AAJA;AARA;AAiBA,MAAMl6C,MAAM0F,iBAAWC,SAAX,CAAqB,SAArB,CAAZ;;AAFA;;;AAIA,MAAMw0C,kBAAkB;AACtBC,uBAAqB,KADC;AAEtBC,qBAAmB,YAFG;AAGtBC,cAAY;;AAGd;AANwB,CAAxB,CAOA,MAAM51C,gBAAgBC,uBAAIC,MAAJ,CAAW;AAC/Bw1C,uBAAqBz1C,uBAAIsnB,OAAJ,EADU;AAE/BouB,qBAAmB11C,uBAAIE,MAAJ,EAFY;AAG/By1C,cAAY31C,uBAAIsnB,OAAJ;AAHmB,CAAX,CAAtB;AAKA,MAAMhnB,eAAe,uBAAM,QAAN,EAAgBP,aAAhB,CAArB;;AAEA;;;;;;;;;;AAUO,SAASw1C,OAAT,CAAkBK,OAAlB,EAA2Br1C,UAAU,EAArC,EAAyC;AAC9C;AACA,QAAMX,UAAU,0BAAhB;AACAvE,MAAI4G,IAAJ,CAAU,gBAAerC,OAAQ,EAAjC;;AAEAW,YAAU,wBAAYi1C,eAAZ,EAA6Bj1C,OAA7B,CAAV;AACAD,eAAaC,OAAb;;AAEA,MAAIE,QAAQ,EAAZ;AACA,MAAIo1C,KAAJ;AACA,MAAIC,YAAY,EAAhB;AACA,MAAIC,cAAc,EAAlB;AACA,MAAI5tC,WAAW,EAAf;AACA,MAAI6tC,YAAY,EAAhB;AACA,MAAIC,cAAJ;AACA,QAAMC,SAAS,EAAf;AACA,MAAI13B,UAAU;AACZ8J,kBAAc,EADF;AAEZnhB,SAAK,EAFO;AAGZgvC,gBAAY,EAHA;AAIZp4C,eAAY;AACV,UAAI,CAAC83C,KAAL,EAAY;AACV,cAAMpwB,MAAM,gDAAN,CAAN;AACD;AACD,UAAI2wB,YAAJ,EAAkB;AAChB,cAAM3wB,MAAM,sDAAN,CAAN;AACD;AACD,aAAOowB,MAAM93C,QAAN,EAAP;AACD,KAZW;AAaZC,aAAU,GAAG6iB,IAAb,EAAmB;AACjB,UAAI,CAACg1B,KAAL,EAAY;AACV,cAAMpwB,MAAM,gDAAN,CAAN;AACD;AACD,aAAOowB,MAAM73C,QAAN,CAAe,GAAG6iB,IAAlB,CAAP;AACD,KAlBW;AAmBZ1e,cAAWk0C,EAAX,EAAe;AACb,UAAI,CAACR,KAAL,EAAY;AACV,cAAMpwB,MAAM,gDAAN,CAAN;AACD;AACD,aAAOowB,MAAM1zC,SAAN,CAAgBk0C,EAAhB,CAAP;AACD;AAxBW,GAAd;;AA2BA;AACA,MAAIC,gBAAJ;;AAEA,MAAIF,eAAe,KAAnB;AACA,MAAIG,yBAAyBV,SAASztC,QAAQ5L,UAAU;AACtD,QAAI45C,YAAJ,EAAkB;AAChB,aAAO,IAAP;AACD,KAFD,MAEO;AACL,aAAOhuC,KAAK5L,MAAL,CAAP;AACD;AACF,GAND;;AAQA;AACAo5C,YAAUA,QAAQv7C,MAAR,CAAem8C,UAAUC,QAAQD,MAAR,CAAzB,CAAV;;AAEA;AACA;AACAZ,UAAQn7C,OAAR,CAAgB,UAAU+7C,MAAV,EAAkB;AAChC;AACA,QAAIA,OAAOtuC,IAAP,KAAgB,OAAhB,IAA2B,CAAC3H,QAAQo1C,UAAxC,EAAoD;AAClDa,eAAS,EAAT;AACD;;AAED,QAAIA,OAAOluB,YAAX,EAAyB;AACvB9J,cAAQ8J,YAAR,GAAuB9J,QAAQ8J,YAAR,CAAqB/sB,MAArB,CAA4Bi7C,OAAOluB,YAAnC,CAAvB;AACD;AACD,QAAIkuB,OAAOvuC,OAAX,EAAoB;AAClBE,eAASquC,OAAOtuC,IAAhB,IAAwBsuC,OAAOvuC,OAA/B;AACD;AACD,QAAIuuC,OAAOE,QAAX,EAAqB;AACnBZ,gBAAUU,OAAOtuC,IAAjB,IAAyB,iBAAQsuC,OAAOE,QAAf,CAAzB;AACD;AACD,QAAIF,OAAOpC,UAAX,EAAuB;AACrB,UAAIoC,OAAOtuC,IAAP,KAAgB,MAApB,EAA4B;AAC1BouC,2BAAmBE,OAAOpC,UAA1B;AACD,OAFD,MAEO;AACL2B,oBAAYn9C,IAAZ,CAAiB,MAAM49C,OAAOpC,UAAP,CAAkB51B,OAAlB,CAAvB,EADK,CAC8C;AACpD;AACF;AACD,QAAIg4B,OAAOrvC,GAAX,EAAgB;AACdqX,cAAQrX,GAAR,GAAc,eAAMqX,QAAQrX,GAAd,EAAmBqvC,OAAOrvC,GAAP,CAAWqX,OAAX,CAAnB,CAAd;AACD;AACD,QAAIg4B,OAAO1rC,IAAX,EAAiB;AACfkrC,gBAAUp9C,IAAV,CAAe49C,OAAO1rC,IAAtB;AACD;AACD,QAAI0rC,OAAO/1C,KAAX,EAAkB;AAChBA,cAAQA,MAAMlF,MAAN,CAAai7C,OAAO/1C,KAApB,CAAR;AACD;AACD;AACA,QAAI+1C,OAAOG,MAAX,EAAmB;AACjB;AACA;AACA,YAAMC,YAAY;AAChBC,6BAAqB;AACnBr4B,mBAAS;AACPyZ,kBAAO;AACL,qBAAOzZ,OAAP;AACD;AAHM;AADU;AADL,OAAlB;AASA,WAAK,MAAMs4B,OAAX,IAAsBN,OAAOG,MAA7B,EAAqC;AACnC,YAAIH,OAAOG,MAAP,CAAcz8C,cAAd,CAA6B48C,OAA7B,CAAJ,EAA2C;AACzC;AACA,cAAI,CAACt4B,QAAQ23B,UAAR,CAAmBj8C,cAAnB,CAAkC48C,OAAlC,CAAL,EAAiD;AAC/Ct4B,oBAAQ23B,UAAR,CAAmBW,OAAnB,IAA8BF,SAA9B;AACD;AACDp4B,kBAAQ23B,UAAR,CAAmBW,OAAnB,IAA8B,uBAAQt4B,QAAQ23B,UAAR,CAAmBW,OAAnB,CAAR,EAAqCN,OAAOG,MAAP,CAAcG,OAAd,CAArC,CAA9B;AACD;AACF;AACF;;AAED;;;;;;;;AAQA,QAAIN,OAAON,MAAX,EAAmB;AACjB,WAAK,MAAM5R,GAAX,IAAkBkS,OAAON,MAAzB,EAAiC;AAC/B,YAAIA,OAAO5R,GAAP,CAAJ,EAAiB;AACfjpC,cAAI+L,KAAJ,CAAW,oBAAmBk9B,GAAI,SAAQA,GAAI,SAAQkS,OAAOtuC,IAAK,GAAlE;AACAguC,iBAAO5R,GAAP,IAAckS,OAAON,MAAP,CAAc5R,GAAd,CAAd;AACD,SAHD,MAGO;AACL4R,iBAAO5R,GAAP,IAAckS,OAAON,MAAP,CAAc5R,GAAd,CAAd;AACD;AACF;AACF;AACF,GAzED;;AA2EA,MAAIgS,gBAAJ,EAAsB;AACpB;AACAP,gBAAYn9C,IAAZ,CAAiB,MAAM09C,iBAAiB93B,OAAjB,CAAvB;AACD;;AAED;AACA,YAAWu4B,QAAX,GAAuB;AACrB;AACA;AACA;AACA;AACA;AACA,SAAK,MAAMjsC,IAAX,IAAmBkrC,SAAnB,EAA8B;AAC5B;AACA;AACA;AACA,aAAQlrC,KAAKorC,MAAL,CAAR;AACD;AACD;AACA,SAAK,MAAM7tB,IAAX,IAAmB5nB,KAAnB,EAA0B;AACxB,YAAM,mBAAK,wBAAY4nB,IAAZ,CAAL,CAAN;AACD;AACF;;AAED;AACA,QAAM2uB,oBAAoBz2C,QAAQk1C,mBAAR,GACtB,iDAAoB,EAAEvtC,MAAM3H,QAAQm1C,iBAAhB,EAApB,CADsB,GAEtBuB,cAFJ;;AAIA;AACA,MAAIjB,UAAU59C,MAAV,GAAmBqI,MAAMrI,MAAzB,GAAkC,CAAtC,EAAyC;AACvC,QAAI8+C,iBAAiB,0BAArB;;AAEA;AACArB,YAAQ,wBACN,4BAAgB1tC,QAAhB,CADM,EAEN6uC,kBAAkB,4BAAgBT,sBAAhB,EAAwCW,cAAxC,EAAwD,GAAGnB,WAA3D,CAAlB,CAFM,CAAR;;AAKAE,qBAAiBiB,eAAeC,GAAf,CAAmBJ,QAAnB,CAAjB;AACD,GAVD,MAUO;AACL;AACAlB,YAAQ,wBACN,4BAAgB1tC,QAAhB,CADM,EAEN6uC,kBAAkB,4BAAgBT,sBAAhB,EAAwC,GAAGR,WAA3C,CAAlB,CAFM,CAAR;AAID;;AAED;AACA,MAAIqB,cAAc,UAAU/uC,KAAV,EAAiB;AACjC,QAAIgvC,eAAe,EAAnB;;AAEA;AACAzB,YAAQn7C,OAAR,CAAgB,UAAU+7C,MAAV,EAAkB;AAChC,YAAMtuC,OAAOsuC,OAAOtuC,IAApB;AACA;AACA,UAAI4tC,UAAU5tC,IAAV,CAAJ,EAAqB;AACnBmvC,qBAAanvC,IAAb,IAAqB4tC,UAAU5tC,IAAV,EAAgBG,MAAMH,IAAN,CAAhB,CAArB;AACD,OAFD,MAEO,IAAIG,MAAMH,IAAN,CAAJ,EAAiB;AACtB;AACA;AACAmvC,qBAAanvC,IAAb,IAAqBG,MAAMH,IAAN,CAArB;AACD;AACF,KAVD;AAWA,WAAOmvC,YAAP;AACD,GAhBD;AAiBAD,gBAAc,iBAAQA,WAAR,CAAd;;AAEA,QAAME,uCACD94B,QAAQrX,GADP;AAEJkB,WAAO;AACL4vB,WAAK,YAAY;AACf,eAAOmf,YAAYvB,MAAM93C,QAAN,EAAZ,CAAP;AACD,OAHI;AAILoE,iBAAW,UAAU,GAAG0e,IAAb,EAAmB;AAC5B,eAAOg1B,MAAM1zC,SAAN,CAAgB,GAAG0e,IAAnB,CAAP;AACD;AANI,KAFH;AAUJ;;;;;;AAMA02B,sBAAmB;AACjB,aAAO/4B,QAAQ8J,YAAf;AACD,KAlBG;AAmBJ;;;;;;;AAOAuf,iBAAc;AACZ,aAAOjoC,OAAP;AACD,KA5BG;AA6BJ;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA43C,cAAW;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAIvB,cAAJ,EAAoBA,eAAewB,MAAf;;AAEpB;AACA,eAASC,mBAAT,CAA8BrvC,KAA9B,EAAqC7L,MAArC,EAA6C;AAC3C,eAAO,EAAP;AACD;AACDq5C,YAAM8B,cAAN,CAAqBD,mBAArB;;AAEA;AACAtB,qBAAe,IAAf;AACD;AA1EG,IAAN;;AA6EA;AACA,SAAOkB,SAAP;AACD,C;;;;;;;;;;;;;kBCrRuBM,oB;AAhDxB;;;;AAIA,SAASC,QAAT,CAAmBC,KAAnB,EAA0B;AACxB,QAAM,EAAEp8C,SAAF,EAAaU,KAAb,KAAuB07C,KAA7B;AACA,QAAMC,UAAW,GAAEr8C,SAAU,eAAcU,KAAM,EAAjD;;AAEA,MAAI,CAAC47C,OAAD,EAAUr2C,OAAV,IAAqBm2C,MAAMG,QAA/B;;AAEA,MAAIh0C,MAAJ;AACA,MAAIi0C,QAAQ,EAAZ;AACA,MAAIF,QAAQz1C,QAAR,CAAiB,OAAjB,CAAJ,EAA+B;AAC7B;AACA0B,aAAU,GAAE8zC,OAAQ,MAAKC,QAAQxpC,WAAR,EAAsB,EAA/C;AACD,GAHD,MAGO,IAAIwpC,QAAQz1C,QAAR,CAAiB,OAAjB,KAA6By1C,QAAQz1C,QAAR,CAAiB,SAAjB,CAA7B,IAA4Dy1C,QAAQz1C,QAAR,CAAiB,OAAjB,CAAhE,EAA2F;AAChG;AACA0B,aAAU,GAAE6zC,MAAMG,QAAN,CAAe,CAAf,CAAkB,KAAIH,MAAMG,QAAN,CAAe,CAAf,CAAkB,EAApD;AACAC,YAAQJ,MAAMG,QAAN,CAAe,CAAf,CAAR;AACAt2C,cAAUm2C,MAAMG,QAAN,CAAe,CAAf,CAAV;AACD,GALM,MAKA,IAAID,QAAQz1C,QAAR,CAAiB,SAAjB,CAAJ,EAAiC;AACtC;AACA0B,aAAU,GAAE6zC,MAAMG,QAAN,CAAe,CAAf,CAAkB,KAAIH,MAAMG,QAAN,CAAe,CAAf,CAAkB,EAApD;AACAC,YAAQJ,MAAMG,QAAN,CAAe,CAAf,CAAR;AACAt2C,cAAW,GAAEm2C,MAAMG,QAAN,CAAe,CAAf,CAAkB,IAAGH,MAAMG,QAAN,CAAe,CAAf,CAAkB,IAAGH,MAAMG,QAAN,CAAe,CAAf,CAAkB,EAAzE;AACD,GALM,MAKA,IAAID,QAAQz1C,QAAR,CAAiB,SAAjB,CAAJ,EAAiC;AACtC;AACA0B,aAAU,GAAE8zC,OAAQ,YAApB;AACAp2C,cAAU,EAAV;AACD,GAJM,MAIA;AACL;AACAsC,aAAU,GAAE8zC,OAAQ,MAAKp2C,QAAQ9F,IAAK,MAAKm8C,OAAQ,EAAnD;AACD;;AAED,SAAO,EAAE/zC,MAAF,EAAUi0C,KAAV,EAAiBv2C,OAAjB,EAAP;AACD;;AAED;;;;;;;;;;;AAWe,SAASi2C,oBAAT,CAA+BE,KAA/B,EAAsC;AACnD;AACA,MAAI,CAAC,OAAD,EAAU,gBAAV,EAA4Bv1C,QAA5B,CAAqCu1C,MAAM3qC,MAA3C,CAAJ,EAAwD;AACtDlP,YAAQ65C,MAAM3qC,MAAd,EAAsB,GAAG2qC,MAAMG,QAA/B;AACA;AACD,GAHD,MAGO,IAAIH,MAAM3qC,MAAN,KAAiB,UAArB,EAAiC;AACtClP,YAAQxC,QAAR;AACA;AACD;;AAED,QAAM,EAAEwI,MAAF,EAAUi0C,KAAV,EAAiBv2C,OAAjB,KAA6Bk2C,SAASC,KAAT,CAAnC;AACA75C,UAAQ65C,MAAM3qC,MAAd,EAAsBlJ,MAAtB,EAA8Bi0C,KAA9B,EAAqCv2C,OAArC;AACD,C;;;;;;;;;;;;;;;;;;kBC5CuBw2C,kB;;AAfxB;;AACA;;AAEA;;;;AACA;;AAGA;;;;AAEA;;;;;;AAMe,SAASA,kBAAT,CAA6B53C,OAA7B,EAAsC;AACnD;AACA,QAAMxE,SAASgF,kBAAWC,SAAX,CAAqB,QAArB,CAAf;AACAjF,SAAOq8C,UAAP,CAAkB73C,QAAQ83C,UAAR,CAAmBvX,OAArC;AACA/kC,SAAOu8C,QAAP,CAAgB/3C,QAAQ83C,UAAR,CAAmBj8C,KAAnC;;AAEA,QAAMk8C,WAAWC,qBAAUh4C,QAAQi4C,QAAlB,CAAjB;;AAEA,MAAIC,gBAAgB,EAApB;AACA;AACA,MAAIH,aAAaC,qBAAUG,IAA3B,EAAiC;AAC/B;AACAD,kBAAcr8C,KAAd,GAAsB,KAAtB;AACAq8C,kBAAcp8C,IAAd,GAAqB,KAArB;AACD,GAJD,MAIO;AACL;AACAo8C,+CACKl4C,QAAQ83C,UADb;AAGD;;AAED,MAAI93C,QAAQ83C,UAAR,CAAmBM,UAAvB,EAAmC;AACjC;AACA;AACAF,kBAAcr8C,KAAd,GAAsB;AACpBK,iBAAW,KADS;AAEpBD,cAAQ,MAFY;AAGpBE,aAAO,MAHa;AAIpBE,iBAAW;AAJS,KAAtB;AAMD;;AAED,MAAI2D,QAAQ83C,UAAR,CAAmBO,cAAvB,EAAuC;AACrCH,kBAAc76C,SAAd,GAA0Bg7C,eAAer4C,QAAQ83C,UAAR,CAAmBO,cAAlC,CAA1B;AACD;;AAED;AACAH,gBAAc18C,MAAd,GAAuBA,MAAvB;AACA;AACA08C,gBAAcx8C,cAAd,GAA+BA,qBAA/B;AACAw8C,gBAAct8C,MAAd,GAAuB,KAAvB;;AAEA;AACA,QAAM08C,eAAe,4BAAkBt4C,QAAQ83C,UAA1B,CAArB;AACA;;AAEA,SAAO,0DACFI,aADE,EAEFI,YAFE,EAAP;AAID;;AAED;;;;;;;;AA7DA;;AAJA;AAHA;AA0EA,SAASD,cAAT,CAAyB93C,OAAzB,EAAkC;AAChC,SAAO,CAAC/C,QAAD,EAAWvB,MAAX,KAAsB,CAACsE,QAAQyB,QAAR,CAAiB/F,OAAOX,IAAxB,CAA9B;AACD,C;;;;;;;;;;;;;kBCnEuBi9C,iB;;AARxB;;AAEA;;;;;;AAMe,SAASA,iBAAT,CAA4Bv4C,OAA5B,EAAqC;AAClD;AACA,WAASw4C,cAAT,CAAyBF,YAAzB,EAAuC;AACrC,WAAO,UAAUr8C,MAAV,EAAkB;AACvBq8C,mBAAap+C,OAAb,CAAqB,UAAUyE,WAAV,EAAuB;AAC1C1C,iBAAS0C,YAAY1C,MAAZ,CAAT;AACD,OAFD;AAGA,aAAOA,MAAP;AACD,KALD;AAMD;;AAED,QAAMq8C,eAAe,EAArB;AACA,QAAMG,qBAAqB,EAA3B;AACA,MAAI,CAACz4C,QAAQ04C,cAAb,EAA6B;AAC3B;AACAD,uBAAmBpgD,IAAnB,CAAwBsgD,cAAxB;AACD,GAHD,MAGO;AACL;AACAF,uBAAmBpgD,IAAnB,CAAwBugD,aAAxB;AACD;AACD;AACAN,eAAa78C,iBAAb,GAAiC+8C,eAAeC,kBAAf,CAAjC;;AAEA,SAAOH,YAAP;AACD;;AAED;AAnCA;AAoCA,SAASM,aAAT,CAAwB38C,MAAxB,EAAgC;AAC9B,MAAIA,OAAOuJ,IAAP,IAAevJ,OAAOuJ,IAAP,CAAYC,WAA/B,EAA4C;AAC1C;AACA,WAAO,cAAK,SAAL,EAAgBxJ,MAAhB,CAAP;AACD;AACD,SAAOA,MAAP;AACD;;AAED;;;;AAIA,SAAS08C,cAAT,CAAyB18C,MAAzB,EAAiC;AAC/B,MAAI,EAAEA,OAAOuJ,IAAP,IAAevJ,OAAOuJ,IAAP,CAAYqzC,MAA7B,CAAJ,EAA0C;AACxC,WAAO,cAAK,SAAL,EAAgB58C,MAAhB,CAAP;AACD;AACD,SAAOA,MAAP;AACD,C;;;;;;;;;;;;;QC3CeP,c,GAAAA,c;AAVhB;;;;;;;;;;AAUO,SAASA,cAAT,CAAyBO,MAAzB,EAAiC68C,IAAjC,EAAuC18C,IAAvC,EAA6C;AAClD,MAAIkpB,QAAQ,CAAC,QAAD,CAAZ;AACAA,QAAMjtB,IAAN,CAAW4D,OAAOX,IAAlB;AACAgqB,QAAMjtB,IAAN,CAAW,OAAOygD,IAAlB;AACAxzB,QAAMjtB,IAAN,CAAW,SAAS+D,KAAKb,OAAL,CAAa,CAAb,CAAT,GAA2B,MAAtC;;AAEA,SAAO+pB,MAAM3qB,IAAN,CAAW,GAAX,CAAP;AACD,C;;;;;;;;;;;;;;;ACjBD;;;;;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CO,MAAMqE,0CAAiB;AAC5Bi5C,YAAU,OADkB;AAE5B1X,WAASx4B,SAFmB;AAG5BgxC,iBAAe,IAHa;AAI5BjB,cAAY;AAJgB,CAAvB;;AAOA,MAAMkB,8DAA2B;AACtCzY,WAAS8W,uBAD6B;AAEtCe,cAAY,KAF0B;AAGtCz8C,aAAW,KAH2B;AAItCG,QAAM,KAJgC;AAKtCD,SAAO,OAL+B;AAMtC68C,kBAAgB;AAElB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AARwC,CAAjC,C;;;;;;;;ACnDP;;;;;;;AAOA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrDA;;;;AACA;;;;;;AAEA;AACO,MAAM5xC,oCAAc,eAApB;;AAEP;;;;;AAKA;;;;;AAKA,MAAMmyC,UAAU,2BAAcj6C,gBAAd,CAAhB;AACO,MAAMwB,kCAAay4C,OAAnB,C;;;;;;;;;;;;;ACjBP,MAAMv1C,SAAS,eAAf;;AAEO,MAAMw1C,gCAAYx1C,SAAS,WAA3B;AACA,MAAMy1C,wCAAgBz1C,SAAS,eAA/B;;AAEA,MAAM01C,oCAAc11C,SAAS,aAA7B;AACA,MAAM21C,4CAAkB31C,SAAS,iBAAjC,C;;;;;;;;;;;;;QCGSq0C,Q,GAAAA,Q;QAaAuB,a,GAAAA,a;QAaAzB,U,GAAAA,U;QAaA0B,e,GAAAA,e;;AA/ChB;;IAAYj5C,W;;;;AAEZ;;;;;;AAMO,SAASy3C,QAAT,CAAmBl8C,KAAnB,EAA0BP,IAA1B,EAAgC;AACrC,SAAO;AACLA,UAAMgF,YAAY44C,SADb;AAEL93C,aAAS,EAAEvF,KAAF,EAASP,IAAT;AAFJ,GAAP;AAID;;AAED;;;;;;AAhBA;AAsBO,SAASg+C,aAAT,CAAwBE,QAAxB,EAAkC;AACvC,SAAO;AACLl+C,UAAMgF,YAAY64C,aADb;AAEL/3C,aAASo4C;AAFJ,GAAP;AAID;;AAED;;;;;;AAMO,SAAS3B,UAAT,CAAqBtX,OAArB,EAA8BjlC,IAA9B,EAAoC;AACzC,SAAO;AACLA,UAAMgF,YAAY84C,WADb;AAELh4C,aAAS,EAAEm/B,OAAF,EAAWjlC,IAAX;AAFJ,GAAP;AAID;;AAED;;;;;;AAMO,SAASi+C,eAAT,CAA0BE,UAA1B,EAAsC;AAC3C,SAAO;AACLn+C,UAAMgF,YAAY+4C,eADb;AAELj4C,aAASq4C;AAFJ,GAAP;AAID,C;;;;;;;;;;;;;kBClBuB7yC,G;;AAlCxB;;AACA;;IAAYrG,O;;AACZ;;;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8Be,SAASqG,GAAT,CAAc,EAAEnJ,QAAF,EAAYD,QAAZ,EAAd,EAAsC;AACnD,QAAM1C,MAAM0F,kBAAWC,SAAX,CAAqB,MAArB,CAAZ;;AAEA,QAAMmG,MAAM;AACV;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA8yC,YAAQ;AACNC,cAAQ,QADF;AAENC,aAAO,OAFD;AAGNC,YAAM,MAHA;AAIN1B,YAAM,MAJA;AAKN2B,aAAO;AALD,KAnCE;;AA2CV;;;;;;;;;;;;;;;;;;;AAmBA/B,aAAUl8C,KAAV,EAAiBP,IAAjB,EAAuB;AACrBR,UAAI+L,KAAJ,CAAUC,qBAAc,mBAAxB,EAA6CjL,KAA7C,EAAoDP,IAApD;;AAEAmC,eAAS8C,QAAQw3C,QAAR,CAAiBl8C,KAAjB,EAAwBP,IAAxB,CAAT;AACD,KAlES;;AAoEV;;;;;;;;;;AAUAy+C,aAAUz+C,IAAV,EAAgB;AACdR,UAAI+L,KAAJ,CAAUC,qBAAc,mBAAxB,EAA6CxL,IAA7C;;AAEA,aAAO,yBAASkC,UAAT,EAAqBlC,IAArB,CAAP;AACD,KAlFS;;AAoFV;;;;;;;;;;;;;;;;;;;;;;;;AAwBAu8C,eAAYtX,OAAZ,EAAqBjlC,IAArB,EAA2B;AACzBR,UAAI+L,KAAJ,CAAUC,qBAAc,qBAAxB,EAA+Cy5B,OAA/C,EAAwDjlC,IAAxD;;AAEAmC,eAAS8C,QAAQs3C,UAAR,CAAmBtX,OAAnB,EAA4BjlC,IAA5B,CAAT;AACD,KAhHS;;AAkHV;;;;;;;;;;;;;;;;;;AAkBA0+C,eAAY;AACVl/C,UAAI+L,KAAJ,CAAUC,qBAAc,iBAAxB;;AAEA,aAAO,yBAAStJ,UAAT,CAAP;AACD;AAxIS,GAAZ;;AA2IA,SAAO;AACLhC,YAAQoL;AADH,GAAP;AAGD,C,CApLD,e;;;;;;;;;;;;;;;;;;ACAA;;IAAYtG,W;;AAGZ;;;;;;AAEA;;;;;;;;;;;AAWA,MAAMsH,WAAW,EAAjB;;AAdA;;;AAgBAA,SAAStH,YAAY64C,aAArB,IAAsC;AACpCtxC,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB;AACA,sCACK6L,KADL,EAEK7L,OAAOmF,OAFZ;AAID;AAPmC,CAAtC;;AAUA,MAAMsG,UAAU,iCAAcE,QAAd,EAAwB,EAAxB,CAAhB;kBACeF,O;;;;;;;;;;;;;;;;;;QCnBCqyC,Q,GAAAA,Q;QAWAC,Q,GAAAA,Q;;AApBhB;;;;AAEA;;;;;;;AAOO,SAASD,QAAT,CAAmBjyC,KAAnB,EAA0BxM,OAAO,SAAjC,EAA4C;AACjD,QAAM2+C,cAAc,mBAAUnyC,KAAV,CAApB;AACA,SAAOmyC,YAAYC,IAAZ,CAAiB5+C,IAAjB,CAAP;AACD;;AAED;;;;;;AAfA;AAqBO,SAAS0+C,QAAT,CAAmBlyC,KAAnB,EAA0B;AAC/B,QAAMmyC,cAAc,mBAAUnyC,KAAV,CAApB;AACA,SAAO,oBAAYmyC,YAAYC,IAAxB,CAAP;AACD,C;;;;;;;;;;;;;;;;;;;;;;kBCQuBC,S;;AApBxB;;;;AACA;;;;AACA;;IAAY55C,O;;AAEZ;;AACA;;AACA;;;;AAGA;;AACA;;AAGA;;AACA;;AACA;;AAGA;;;;;;AANA;;;AAJA;AApBA;;;;;;;;;;;AAWA;AAqBe,SAAS45C,SAAT,CAAoBn6C,UAAU,EAA9B,EAAkC;AAC/C,QAAM2H,OAAO,MAAb;;AAEA,QAAMnM,SAASgF,kBAAWC,SAAX,CAAqB,MAArB,CAAf;;AAEA;AACA,MAAIT,QAAQugC,OAAR,IAAmB,OAAOvgC,QAAQugC,OAAf,KAA2B,UAAlD,EAA8D;AAC5D,WAAOvgC,QAAQugC,OAAf;AACA/kC,WAAO0rB,IAAP,CAAY,oEAAZ;AACD;;AAED;AACA,MAAIlnB,QAAQi4C,QAAR,IAAoB,CAAC,oBAAYD,sBAAZ,EAAuBh2C,QAAvB,CAAgChC,QAAQi4C,QAAR,CAAiBhqC,WAAjB,EAAhC,CAAzB,EAA0F;AACxF,WAAOjO,QAAQi4C,QAAf;AACAz8C,WAAO0rB,IAAP,CAAY,kEAAZ;AACD;;AAEDlnB,YAAU,wBAAYhB,sBAAZ,EAA4BgB,OAA5B,CAAV;;AAEA;AACA,MAAIA,QAAQ83C,UAAR,KAAuB,KAA3B,EAAkC;AAChC,QAAI93C,QAAQ83C,UAAR,YAA8BngD,MAAlC,EAA0C;AACxCqI,cAAQ83C,UAAR,GAAqB,wBAAYkB,gCAAZ,EAAsCh5C,QAAQ83C,UAA9C,CAArB;AACD,KAFD,MAEO;AACL93C,cAAQ83C,UAAR,GAAqBkB,gCAArB;AACD;AACF;;AAED;AACA;AACAx4C,oBAAWu3C,QAAX,CAAoB/3C,QAAQi4C,QAA5B;AACA,MAAIj4C,QAAQugC,OAAZ,EAAqB;AACnB//B,sBAAWq3C,UAAX,CAAsB73C,QAAQugC,OAA9B;AACD;;AAED,wBAAc//B,kBAAW45C,UAAX,EAAd,EAAuClgD,OAAvC,CAA+CsB,UAAU;AACvDA,WAAOu8C,QAAP,CAAgB/3C,QAAQi4C,QAAxB;AACA,QAAIj4C,QAAQugC,OAAZ,EAAqB;AACnB/kC,aAAOq8C,UAAP,CAAkB73C,QAAQugC,OAA1B;AACD;AACF,GALD;;AAOA,YAAWh2B,IAAX,CAAiB,EAAE2G,MAAF,EAAjB,EAA6B;AAC3B;AACA;AACA,UAAM,kBAAI,sBAAalR,OAAb,EAAsB2H,IAAtB,CAAJ,CAAN;AACA;AACA,UAAM,kBAAIpH,QAAQ+4C,aAAR,CAAsB,wBAAY94C,iBAAZ,CAAtB,CAAJ,CAAN;AACA;AACA;AACA,UAAM65C,mBAAmBnpC,OAAOyW,QAAP,CAAgBuyB,IAAzC;AACA,QAAIl6C,QAAQugC,OAAZ,EAAqB;AACnB8Z,uBAAiBxC,UAAjB,CAA4B73C,QAAQugC,OAApC;AACD;AACD,0BAAc8Z,iBAAiBD,UAAjB,EAAd,EAA6ClgD,OAA7C,CAAqDsB,UAAU;AAC7DA,aAAOu8C,QAAP,CAAgB/3C,QAAQi4C,QAAxB;AACA,UAAIj4C,QAAQugC,OAAZ,EAAqB;AACnB/kC,eAAOq8C,UAAP,CAAkB73C,QAAQugC,OAA1B;AACD;AACF,KALD;AAMD;;AAED,QAAM+Z,aAAa;AACjB3yC,QADiB;AAEjBogB,kBAAc,CAAC,MAAD,CAFG;AAGjBxd,QAHiB;AAIjB3D,sBAJiB;AAKjBc,+BALiB;AAMjBxH,WAAO,CAACq6C,oBAAD,EAAgBC,sBAAhB;AANU,GAAnB;;AASAx6C,UAAQi4C,QAAR,GAAmBj4C,QAAQi4C,QAAR,CAAiBhqC,WAAjB,EAAnB;AACA,QAAM8pC,WAAWC,uBAAUh4C,QAAQi4C,QAAlB,CAAjB;AACA;AACA;AACA,MAAIF,YAAYC,uBAAUG,IAAtB,IAA8Bn4C,QAAQ83C,UAAR,KAAuB,KAAzD,EAAgE;AAC9DwC,eAAWzG,UAAX,GAAwB,uBAAmB7zC,OAAnB,CAAxB;AACD;;AAED,SAAOs6C,UAAP;AACD;;AAnFD,iC;;;;;;;;;;;;;;;;;;QCdkBC,a,GAAAA,a;QAQAC,e,GAAAA,e;QAWAC,W,GAAAA,W;QAuCAC,a,GAAAA,a;QAuCFC,W,GAAAA,W;QAuBAC,a,GAAAA,a;;AAtIhB;;IAAYt6C,W;;AACZ;;IAAYC,O;;AACZ;;AAGA;;;;;;AAEA;AARA;AASA,MAAMs6C,cAAc,SAApB;;AAEA;;;;;;AANA;AAUO,UAAWN,aAAX,GAA4B;AACjC,QAAM,wBAAUj6C,YAAY44C,SAAtB,EAAiCuB,WAAjC,CAAN;AACD;;AAED;;;;AAIO,UAAWD,eAAX,GAA8B;AACnC,QAAM,wBAAUl6C,YAAY84C,WAAtB,EAAmCsB,aAAnC,CAAN;AACD;;AAED;;;;;;;AAOO,UAAWD,WAAX,CAAwBx+C,MAAxB,EAAgC;AACrC,QAAM,EAAEJ,KAAF,EAASP,IAAT,KAAkBW,OAAOmF,OAA/B;;AAEA,MAAI;AACF,QAAI,CAAC9F,IAAD,IAASA,SAASu/C,WAAtB,EAAmC;AACjC;AACAr6C,wBAAWu3C,QAAX,CAAoBl8C,KAApB;AACA;AACA2E,wBAAW45C,UAAX,GAAwBlgD,OAAxB,CAAgCsB,UAAU;AACxCA,eAAOu8C,QAAP,CAAgBl8C,KAAhB;AACD,OAFD;;AAIA;AACA;AACA,YAAM,kBAAI0E,QAAQ+4C,aAAR,CAAsBqB,YAAYn6C,iBAAZ,CAAtB,CAAJ,CAAN;AACD,KAXD,MAWO;AACL;AACAA,wBAAWu3C,QAAX,CAAoBz8C,IAApB,EAA0BO,KAA1B;AACA;AACA2E,wBAAW45C,UAAX,CAAsB9+C,IAAtB,EAA4BpB,OAA5B,CAAoCsB,UAAU;AAC5CA,eAAOu8C,QAAP,CAAgBl8C,KAAhB;AACD,OAFD;;AAIA;AACA,YAAM,kBAAI0E,QAAQ+4C,aAAR,CAAsB,EAAE,CAACh+C,IAAD,GAAQO,KAAV,EAAtB,CAAJ,CAAN;AACD;AACF,GAvBD,CAuBE,OAAOgqB,GAAP,EAAY;AACZ,UAAM/qB,MAAM0F,kBAAWC,SAAX,CAAqB,MAArB,CAAZ;AACA3F,QAAIqB,KAAJ,CAAU0pB,IAAI9kB,OAAd;AACD;AACF;;AAED;;;;;;;AAOO,UAAW25C,aAAX,CAA0Bz+C,MAA1B,EAAkC;AACvC,QAAM,EAAEskC,OAAF,EAAWjlC,IAAX,KAAoBW,OAAOmF,OAAjC;;AAEA,MAAI;AACF,QAAI,CAAC9F,IAAD,IAASA,SAASu/C,WAAtB,EAAmC;AACjC;AACAr6C,wBAAWq3C,UAAX,CAAsBtX,OAAtB;AACA;AACA//B,wBAAW45C,UAAX,GAAwBlgD,OAAxB,CAAgCsB,UAAU;AACxCA,eAAOq8C,UAAP,CAAkBtX,OAAlB;AACD,OAFD;;AAIA;AACA;AACA;AACA,YAAM,kBAAIhgC,QAAQg5C,eAAR,CAAwBqB,cAAcp6C,iBAAd,CAAxB,CAAJ,CAAN;AACD,KAZD,MAYO;AACL;AACAA,wBAAWq3C,UAAX,CAAsBv8C,IAAtB,EAA4BilC,OAA5B;AACA;AACA//B,wBAAW45C,UAAX,CAAsB9+C,IAAtB,EAA4BpB,OAA5B,CAAoCsB,UAAU;AAC5CA,eAAOq8C,UAAP,CAAkBtX,OAAlB;AACD,OAFD;;AAIA;AACA,YAAM,kBAAIhgC,QAAQg5C,eAAR,CAAwB,EAAE,CAACj+C,IAAD,GAAQilC,OAAV,EAAxB,CAAJ,CAAN;AACD;AACF,GAxBD,CAwBE,OAAO1a,GAAP,EAAY;AACZ,UAAM/qB,MAAM0F,kBAAWC,SAAX,CAAqB,MAArB,CAAZ;AACA3F,QAAIqB,KAAJ,CAAU0pB,IAAI9kB,OAAd;AACD;AACF;;AAED;;;;;;AAMO,SAAS45C,WAAT,CAAsBn6C,UAAtB,EAAkC;AACvC;AACA,QAAMs6C,UAAUt6C,WAAW45C,UAAX,EAAhB;AACA,QAAMW,QAAQ,CAAC,GAAG,kBAAQD,QAAQ9sC,GAAR,CAAYxS,UAAUA,OAAOF,IAA7B,CAAR,CAAJ,CAAd;;AAEA,QAAMo+C,SAAS,EAAf;AACA;AACAA,SAAOmB,WAAP,IAAsBr6C,WAAWu5C,QAAX,EAAtB;;AAEA;AACAgB,QAAM7gD,OAAN,CAAcoB,QAAQ;AACpBo+C,WAAOp+C,IAAP,IAAekF,WAAWu5C,QAAX,CAAoBz+C,IAApB,CAAf;AACD,GAFD;;AAIA,SAAOo+C,MAAP;AACD;;AAED;;;;;;AAMO,SAASkB,aAAT,CAAwBp6C,UAAxB,EAAoC;AACzC;AACA,QAAMs6C,UAAUt6C,WAAW45C,UAAX,EAAhB;AACA,QAAMW,QAAQ,CAAC,GAAG,kBAAQD,QAAQ9sC,GAAR,CAAYxS,UAAUA,OAAOF,IAA7B,CAAR,CAAJ,CAAd;;AAEA,QAAMglC,WAAW,EAAjB;AACA;AACAA,WAASua,WAAT,IAAwBr6C,WAAWw6C,UAAX,EAAxB;;AAEA;AACAD,QAAM7gD,OAAN,CAAcoB,QAAQ;AACpBglC,aAAShlC,IAAT,IAAiBkF,WAAWw6C,UAAX,CAAsB1/C,IAAtB,CAAjB;AACD,GAFD;;AAIA,SAAOglC,QAAP;AACD,C;;;;;;;;;;;;;ACtJD,MAAM58B,SAAS,UAAf;;AAEO,MAAMu3C,sDAAuBv3C,SAAS,sBAAtC;AACA,MAAMw3C,oEAA8Bx3C,SAAS,6BAA7C;AACA,MAAM4I,wDAAwB5I,SAAS,uBAAvC;;AAEA,MAAMy3C,oEAA8Bz3C,SAAS,6BAA7C;AACA,MAAM03C,kFAAqC13C,SAAS,oCAApD;;AAEA,MAAM23C,8EAAmC33C,SAAS,kCAAlD;AACA,MAAM43C,kFAAqC53C,SAAS,oCAApD;;AAEA,MAAM63C,kFAAqC73C,SAAS,oCAApD;AACA,MAAM83C,sFAAuC93C,SAAS,sCAAtD,C;;;;;;;;;;;;;;;;;;QCiBS+3C,qB,GAAAA,qB;QAWAC,oB,GAAAA,oB;QAYAC,oB,GAAAA,oB;QAmBAC,yB,GAAAA,yB;QAmBAC,yB,GAAAA,yB;QAkBAC,6B,GAAAA,6B;QAmBAC,+B,GAAAA,+B;QAmBAC,+B,GAAAA,+B;QAkBAC,iC,GAAAA,iC;QAsBAC,+B,GAAAA,+B;;AA3LhB;;IAAY57C,W;;AAEZ;;;;;;AAEA;;;;;;;;AAQA,SAAS67C,kBAAT,CAA6BC,OAA7B,EAAsCvsB,YAAtC,EAAoDnqB,QAApD,EAA8D;AAC5D,SAAO;AACLpK,UAAMgF,YAAY26C,oBADb;AAEL75C,aAASyuB,YAFJ;AAGLrqB,UAAM;AACJE,cADI;AAEJ02C;AAFI;AAHD,GAAP;AAQD;;AAED;;;;;;;;AAtBA;AA6BO,SAASX,qBAAT,CAAgC5rB,YAAhC,EAA8CnqB,WAAW7D,qBAAUC,IAAnE,EAAyE;AAC9E,SAAOq6C,mBAAmB,WAAnB,EAAgCtsB,YAAhC,EAA8CnqB,QAA9C,CAAP;AACD;;AAED;;;;;;;AAOO,SAASg2C,oBAAT,CAA+B7rB,YAA/B,EAA6CusB,UAAU,MAAvD,EAA+D12C,QAA/D,EAAyE;AAC9E;AACA,SAAOy2C,mBAAmBC,QAAQnuC,WAAR,EAAnB,EAA0C4hB,YAA1C,EAAwDnqB,QAAxD,CAAP;AACD;;AAED;;;;;;;AAOO,SAASi2C,oBAAT,CAA+B9rB,YAA/B,EAA6CnqB,QAA7C,EAAuD02C,OAAvD,EAAgE;AACrE,SAAO;AACL9gD,UAAMgF,YAAYgM,qBADb;AAELlL,aAASyuB,YAFJ;AAGL1zB,WAAO0zB,wBAAwB3K,KAH1B;AAIL1f,UAAM;AACJE,cADI;AAEJ02C;AAFI;AAJD,GAAP;AASD;;AAED;;;;;;;AAOO,SAASR,yBAAT,CAAoC/rB,YAApC,EAAkDnqB,QAAlD,EAA4D;AACjE,SAAO;AACLpK,UAAMgF,YAAY46C,2BADb;AAEL95C,aAASyuB,YAFJ;AAGL1zB,WAAO0zB,wBAAwB3K,KAH1B;AAIL1f,UAAM;AACJE;AADI;AAJD,GAAP;AAQD;;AAED;;;;;;;;AAQO,SAASm2C,yBAAT,CAAoCO,OAApC,EAA6CzhC,SAAS,EAAtD,EAA0D;AAC/D,SAAO;AACLrf,UAAMgF,YAAY66C,2BADb;AAEL/5C,wCACKuZ,MADL,CAFK;AAKLnV,UAAM;AACJ42C;AADI;AALD,GAAP;AASD;;AAED;;;;;;AAMO,SAASN,6BAAT,CAAwCnhC,MAAxC,EAAgDK,QAAhD,EAA0D;AAC/D,SAAO;AACL1f,UAAMgF,YAAY+6C,gCADb;AAELj6C,wCACKuZ,MADL;AAEE0hC,oBAAc;AAFhB,MAFK;AAML72C,UAAM;AACJwV;AADI;AAND,GAAP;AAUD;;AAED;;;;;;AAMO,SAAS+gC,+BAAT,CAA0CphC,MAA1C,EAAkDK,QAAlD,EAA4D;AACjE,SAAO;AACL1f,UAAMgF,YAAYg7C,kCADb;AAELl6C,wCACKuZ,MADL;AAEE0hC,oBAAc;AAFhB,MAFK;AAML72C,UAAM;AACJwV;AADI;AAND,GAAP;AAUD;;AAED;;;;;;AAMO,SAASghC,+BAAT,CAA0CM,YAA1C,EAAwDthC,QAAxD,EAAkE;AACvE,SAAO;AACL1f,UAAMgF,YAAYi7C,kCADb;AAELn6C,aAAS;AACPk7C;AADO,KAFJ;AAKL92C,UAAM;AACJwV;AADI;AALD,GAAP;AASD;;AAED;;;;;;AAMO,SAASihC,iCAAT,CAA4CK,YAA5C,EAA0DthC,QAA1D,EAAoE;AACzE,SAAO;AACL1f,UAAMgF,YAAYk7C,oCADb;AAELp6C,aAAS;AACPk7C;AADO,KAFJ;AAKL92C,UAAM;AACJwV;AADI;AALD,GAAP;AASD;;AAED;;;;;;;;;;AAUO,SAASkhC,+BAAT,CAA0CE,OAA1C,EAAmD,EAAEzhC,MAAF,EAAUxe,KAAV,KAAoB,EAAvE,EAA2E;AAChF,MAAIF,SAAS;AACXX,UAAMgF,YAAY86C,kCADP;AAEX51C,UAAM;AACJ42C;AADI;AAFK,GAAb;;AAOA,MAAIjgD,KAAJ,EAAW;AACTF,WAAOE,KAAP,GAAe,IAAf;AACAF,WAAOmF,OAAP,GAAiB,IAAI8jB,KAAJ,CAAU/oB,KAAV,CAAjB;AACAF,WAAOmF,OAAP,CAAem7C,cAAf,GAAgC5hC,OAAO4hC,cAAvC;AACD,GAJD,MAIO;AACLtgD,WAAOmF,OAAP,8BACKuZ,MADL;AAGD;;AAED,SAAO1e,MAAP;AACD,C;;;;;;;;;;;;;kBCvLuB2K,G;;AAdxB;;IAAYrG,O;;AACZ;;AAEA;;AAEA;;;;;;;;AAdA;;;;;;;;;AAeA,MAAMzF,MAAM0F,iBAAWC,SAAX,CAAqB,eAArB,CAAZ;;AAEA;;;;;;AAMe,SAASmG,GAAT,CAAc,EAAEnJ,QAAF,EAAd,EAA4B;AACzC,QAAM++C,kBAAkB;AACtB;;;;;;;;;;AAUAC,YAAS5sB,YAAT,EAAuBusB,OAAvB,EAAgC12C,WAAW7D,qBAAUC,IAArD,EAA2D;AACzDhH,UAAI+L,KAAJ,CAAUC,oBAAc,wBAAxB,EAAkD+oB,YAAlD,EAAgEusB,OAAhE,EAAyE12C,QAAzE;AACAjI,eAAS8C,QAAQm7C,oBAAR,CAA6B7rB,YAA7B,EAA2CusB,OAA3C,EAAoD12C,QAApD,CAAT;AACD,KAdqB;;AAgBtB;;;;;;;;;;;;;;;;;;;;;;;;AAwBAg3C,sBAAmB;AACjBlzC,cADiB;AAEjBmzC,qBAFiB;AAGjBC,yBAHiB;AAIjBC,cAJiB;AAKjBpzC,sBALiB;AAMjBpI,WANiB;AAOjBy7C;AAPiB,KAAnB,EAQG;AACD,YAAM5/B,iBAAiB,uBAAvB;AACApiB,UAAI+L,KAAJ,CAAUC,oBAAc,gCAAxB,EAA0D5J,SAA1D;;AAEAO,eACE8C,QAAQu7C,6BAAR,CACE;AACEtyC,gBADF;AAEEmzC,uBAFF;AAGEC,2BAHF;AAIEC,gBAJF;AAKEpzC,wBALF;AAMEpI,aANF;AAOEy7C;AAPF,OADF,EAUE5/B,cAVF,CADF;;AAeA,aAAOA,eAAeC,OAAtB;AACD,KApEqB;;AAsEtB;;;;;;;;;;;;;;;;;;;;AAoBA4/B,wBAAqB,EAAEvzC,QAAF,EAAYwzC,WAAZ,EAAyBH,QAAzB,EAAmCpzC,gBAAnC,EAAqDpI,KAArD,EAArB,EAAmF;AACjF,YAAM6b,iBAAiB,uBAAvB;AACApiB,UAAI+L,KAAJ,CAAUC,oBAAc,kCAAxB,EAA4D5J,SAA5D;;AAEAO,eACE8C,QAAQw7C,+BAAR,CACE;AACEvyC,gBADF;AAEEwzC,mBAFF;AAGEH,gBAHF;AAIEpzC,wBAJF;AAKEpI;AALF,OADF,EAQE6b,cARF,CADF;AAYA,aAAOA,eAAeC,OAAtB;AACD,KA3GqB;;AA6GtB;;;;;;;;;;;AAWA8/B,wBAAqBC,gBAArB,EAAuC;AACrC,YAAMhgC,iBAAiB,uBAAvB;AACApiB,UAAI+L,KAAJ,CAAUC,oBAAc,6BAAxB;AACArJ,eAAS8C,QAAQy7C,+BAAR,CAAwCkB,gBAAxC,EAA0DhgC,cAA1D,CAAT;;AAEA,aAAOA,eAAeC,OAAtB;AACD,KA9HqB;;AAgItB;;;;;;;;;;;AAWAggC,0BAAuBD,gBAAvB,EAAyC;AACvC,YAAMhgC,iBAAiB,uBAAvB;AACApiB,UAAI+L,KAAJ,CAAUC,oBAAc,6BAAxB;AACArJ,eAAS8C,QAAQ07C,iCAAR,CAA0CiB,gBAA1C,EAA4DhgC,cAA5D,CAAT;;AAEA,aAAOA,eAAeC,OAAtB;AACD,KAjJqB;;AAmJtB;;;;;;;;;AASAigC,oBAAiBzO,MAAjB,EAAyB;AACvB7zC,UAAI+L,KAAJ,CAAUC,oBAAc,gCAAxB,EAA0D6nC,MAA1D;AACAlxC,eACE8C,QAAQs7C,yBAAR,CAAkC,WAAlC,EAA+C;AAC7CU,wBAAgB5N;AAD6B,OAA/C,CADF;AAKD;AAnKqB,GAAxB;;AAsKA,SAAO,EAAE9e,cAAc2sB,eAAhB,EAAP;AACD,C;;;;;;;;;;;;;AC/LD;;;;;;;;;;AAUO,MAAMa,oCAAc,sBAApB;;AAEP;;;;;;;;;;;AAWO,MAAMC,kCAAa,qBAAnB;;AAEP;;;;;;;;;AASO,MAAMC,wCAAgB,uBAAtB,C;;;;;;;;;;;;;;AClCP;;IAAYp9B,U;;AACZ;;IAAY7f,W;;;;AAEZ,IAAIqhB,SAAS,EAAb;;AAEAA,OAAOrhB,YAAY86C,kCAAnB,IAAyD,UAAUn/C,MAAV,EAAkB;AACzE,MAAIA,OAAOE,KAAX,EAAkB;AAChB,WAAO;AACLb,YAAM6kB,WAAWm9B,UADZ;AAELh9B,YAAM,EAAE87B,SAASngD,OAAOuJ,IAAP,CAAY42C,OAAvB,EAAgCjgD,OAAOF,OAAOmF,OAA9C;AAFD,KAAP;AAID,GALD,MAKO;AACL,WAAO;AACL9F,YAAM6kB,WAAWk9B,WADZ;AAEL/8B,YAAM,EAAE87B,SAASngD,OAAOuJ,IAAP,CAAY42C,OAAvB;AAFD,KAAP;AAID;AACF,CAZD;;AAcAz6B,OAAOrhB,YAAYgM,qBAAnB,IAA4C,UAAUrQ,MAAV,EAAkB;AAC5D,MAAI,CAACA,OAAOE,KAAZ,EAAmB;AACjB,WAAO;AACLb,YAAM6kB,WAAWo9B,aADZ;AAELj9B,YAAM,EAAElf,SAASnF,OAAOmF,OAAlB;AAFD,KAAP;AAID;AACF,CAPD;;kBASeugB,M;;;;;;;;;;;;;;;AC5Bf;;;;AACA;;;;;;AAEA,MAAMha,OAAO,eAAb;;QAESA,I,GAAAA,I;QAAMf,G,GAAAA,a;QAAKc,O,GAAAA,kB;;;;;;;;;;;;;;;;;;ACLpB;;IAAYpH,W;;AACZ;;AACA;;;;;;AAEA,MAAMsH,WAAW,EAAjB;;AAEAA,SAAStH,YAAY86C,kCAArB,IAA2D;AACzDvzC,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,UAAMmgD,UAAUngD,OAAOuJ,IAAP,CAAY42C,OAA5B;AACA,UAAMoB,UAAUvhD,OAAOmF,OAAP,CAAem7C,cAA/B;;AAEA,QAAIkB,eAAJ;AACA,QAAID,OAAJ,EAAa;AACXC,mDACK31C,MAAMs0C,OAAN,CADL,EAEKngD,OAAOmF,OAFZ;AAID,KALD,MAKO;AACL;AACAq8C,mDACKxhD,OAAOmF,OADZ;AAGD;;AAED,sCACK0G,KADL;AAEE,OAACs0C,OAAD,GAAWqB;AAFb;AAID;AAtBwD,CAA3D;;AAyBA;;;;AAIA71C,SAASynB,iCAAT,IAAgC;AAC9BxnB,OAAMC,KAAN,EAAa;AACX;AACA,sCACKA,KADL;AAEEsnC,4CACKtnC,MAAMsnC,SADX;AAEEmN,wBAAgB;AAFlB;AAFF;AAOD;AAV6B,CAAhC;;AAaA;AACA,MAAMmB,eAAe;AACnBtO,aAAW;AACTmN,oBAAgB;AADP,GADQ;AAInBlN,QAAM;AACJkN,oBAAgB;AADZ;;AAKR;;;;;;;AATqB,CAArB,CAgBA,MAAM70C,UAAU,iCAAcE,QAAd,EAAwB81C,YAAxB,CAAhB;kBACeh2C,O;;;;;;;;;;;;;QC1DCi2C,oB,GAAAA,oB;QAaAC,qB,GAAAA,qB;;AArBhB;;AAEA;;;;;;AAMO,SAASD,oBAAT,CAA+B71C,KAA/B,EAAsCs0C,UAAUr0C,SAAhD,EAA2D;AAChE,MAAIq0C,OAAJ,EAAa;AACX,WAAOt0C,MAAM+1C,aAAN,CAAoBzB,OAApB,CAAP;AACD,GAFD,MAEO;AACL,WAAOt0C,MAAM+1C,aAAb;AACD;AACF;;AAED;;;;;AAKO,SAASD,qBAAT,CAAgC91C,KAAhC,EAAuC;AAC5C,SAAO,mBAAUA,MAAM9G,MAAN,CAAa68C,aAAvB,CAAP;AACD,C;;;;;;;;;;;;;kBCoCuBA,a;;AA1DxB;;AACA;;;;AACA;;IAAYC,qB;;AACZ;;IAAYC,iB;;AAGZ;;AACA;;AAGA;;AACA;;AAGA;;;;;;AAEA;;;;;;;;;;;;;;;;AAgBA,MAAM/+C,iBAAiB;AACrBg/C,iBAAe,GADM;AAErBC,gCAA8B;;AAGhC;AALuB,CAAvB;;AAnBA;;;AAJA;;;AAJA;AANA;AAuCA,MAAMz+C,gBAAgBC,uBAAIC,MAAJ,CAAW;AAC/Bs+C,iBAAev+C,uBAAIG,QAAJ,EADgB;AAE/Bq+C,gCAA8B,uBAAM,CAAC,aAAD,EAAgB,mBAAhB,CAAN,CAFC;AAG/BC,oBAAkBz+C,uBAAI0+C,QAAJ,CAChB1+C,uBAAIC,MAAJ,CAAW;AACTP,YAAQM,uBAAIE,MAAJ,EADC;AAETP,UAAMK,uBAAIE,MAAJ,EAFG;AAGTT,cAAUO,uBAAIE,MAAJ,EAHD;AAITN,aAASI,uBAAIE,MAAJ;AAJA,GAAX,CADgB;AAHa,CAAX,CAAtB;AAYA,MAAMI,eAAe,uBAAM,eAAN,EAAuBP,aAAvB,CAArB;;AAEA;;;;;;AAMe,SAASq+C,aAAT,CAAwB79C,UAAU,EAAlC,EAAsC;AACnD,QAAMo+C,gBAAgB,sBAAap/C,cAAb,EAA6BgB,OAA7B,CAAtB;AACAD,eAAaq+C,aAAb;;AAEA,YAAW7zC,IAAX,GAAmB;AACjB,UAAM,kBAAI,sBAAa6zC,aAAb,EAA4Bz2C,eAA5B,CAAJ,CAAN;AACA,UAAM,kBAAI,wBAAUga,gBAAV,CAAJ,CAAN;AACD;;AAED,QAAMoG,eAAe,CAAC,MAAD,EAAS,2BAAT,EAAsC,uBAAtC,CAArB;;AAEA,SAAO;AACLpgB,yBADK;AAELogB,gBAFK;AAGLxd,QAHK;AAIL3D,uBAJK;AAKLc,+BALK;AAMLxH,WAAO,CAAC,GAAG,gBAAO69C,iBAAP,CAAJ,EAA+B,GAAG,gBAAOD,qBAAP,CAAlC;AANF,GAAP;AAQD,C;;;;;;;;;;;;;;;;;;;;;;QCvDiBO,6B,GAAAA,6B;QAkGAC,+B,GAAAA,+B;QA+CAC,Q,GAAAA,Q;;AAvKlB;;;;AAEA;;;;AAHA;AAIA,MAAMzjD,MAAM0F,iBAAWC,SAAX,CAAqB,eAArB,CAAZ;;AAEA;;;;;;;;;;;;;;;;;;AAJA;AAqBO,UAAW49C,6BAAX,CACLv7C,UADK,EAEL;AACE0G,UADF;AAEE6yC,cAFF;AAGEQ,UAHF;AAIEG,aAJF;AAKEL,iBALF;AAMEC,qBANF;AAOEnzC,kBAPF;AAQEpI,OARF;AASEy7C;AATF,CAFK,EAaL;AACA,QAAM,EAAE39C,MAAF,KAAa2D,UAAnB;AACAu5C,iBAAeA,aAAamC,WAAb,EAAf;AACA,QAAMn8C,MACH,GAAElD,OAAOD,QAAS,MAAKC,OAAOA,MAAO,IAAGA,OAAOC,IAAK,GAArD,GACC,gBAAeD,OAAOE,OAAQ,GAD/B,GAEC,QAAOyD,WAAWH,QAAS,GAF5B,GAGA,OAHA,GAIA05C,YAJA,GAKA,WANF;AAOA,QAAMzvC,SAAS,MAAf;AACA,MAAIC,OAAO;AACT4xC,cAAU5B,QADD;AAETv9C,aAASkK,QAFA;AAGTC,sBAAkBA,gBAHT;AAITpI,WAAOA,KAJE;AAKTy7C,kBAAcA;AALL,GAAX;;AAQA,MAAIT,iBAAiB,OAArB,EAA8B;AAC5BxvC,SAAK8vC,eAAL,GAAuBA,eAAvB;AACA9vC,SAAK+vC,mBAAL,GAA2BA,mBAA3B;AACD,GAHD,MAGO;AACL/vC,SAAKmwC,WAAL,GAAmBA,WAAnB;AACD;;AAEDnwC,SAAO,yBAAeA,IAAf,CAAP;AACA/R,MAAI+L,KAAJ,CAAW,kCAAiC+F,MAAO,IAAGvK,GAAI,EAA1D;;AAEA,QAAMV,WAAW,MAAM,uBAAQ,EAAEU,GAAF,EAAOuK,MAAP,EAAeC,IAAf,EAAR,CAAvB;;AAEA,MAAI6xC,oBAAJ;AACA,QAAMC,eAAetC,eAAe,4BAApC;AACA,MAAI16C,SAASP,OAAT,CAAiByL,IAAjB,IAAyBlL,SAASP,OAAT,CAAiByL,IAAjB,CAAsB8xC,YAAtB,CAA7B,EAAkE;AAChED,2BAAuB/8C,SAASP,OAAT,CAAiByL,IAAjB,CAAsB8xC,YAAtB,CAAvB;AACD;;AAED,MAAIh9C,SAASxF,KAAb,EAAoB;AAClBrB,QAAI4G,IAAJ,CAAS,yDAAT;AACA,QAAIg9C,oBAAJ,EAA0B;AACxB;AACA,YAAMtxC,aAAasxC,qBAAqBtxC,UAAxC;AACAtS,UAAI+L,KAAJ,CAAW,+EAA8EuG,UAAW,EAApG;;AAEA,aAAO;AACLjR,eAAO,IADF;AAELoN,gBAAQ6D,UAFH;AAGLrS,cAAO,iEAAgEqS,UAAW;AAH7E,OAAP;AAKD,KAVD,MAUO;AACL;AACA,YAAM,EAAErM,OAAF,KAAcY,SAASP,OAAT,CAAiBoM,MAArC;AACA1S,UAAI+L,KAAJ,CAAW,2EAA0E9F,OAAQ,GAA7F;;AAEA,aAAO;AACL5E,eAAO,IADF;AAELoN,gBAAQ5H,SAASP,OAAT,CAAiBoM,MAAjB,CAAwBvL,IAF3B;AAGLlH,cAAO,kEAAiE4G,SAASP,OAAT,CAAiBoM,MAAjB,CAAwBzM,OAAQ;AAHnG,OAAP;AAKD;AACF,GAvBD,MAuBO,IAAI29C,wBAAwBA,qBAAqBtxC,UAArB,KAAoC,CAAhE,EAAmE;AACxEtS,QAAI4G,IAAJ,CAAU,iEAAgEg9C,qBAAqBE,UAAW,EAA1G;AACA;AACA,WAAO;AACLziD,aAAO,IADF;AAELoN,cAAQm1C,qBAAqBE,UAFxB;AAGL7jD,YAAO,kEAAiE2jD,qBAAqBtxC,UAAW;AAHnG,KAAP;AAKD,GARM,MAQA;AACLtS,QAAI4G,IAAJ,CAAS,8DAAT;AACA;AACEvF,aAAO;AADT,OAEKuiD,oBAFL;AAID;AACF;;AAED;;;;;;;;AAQO,UAAWJ,+BAAX,CAA4Cx7C,UAA5C,EAAwD,EAAEw5C,YAAF,EAAxD,EAA0E;AAC/E,QAAM,EAAEn9C,MAAF,KAAa2D,UAAnB;AACA,QAAMT,MAAO,GAAElD,OAAOD,QAAS,MAAKC,OAAOA,MAAO,IAAGA,OAAOC,IAAK,GAAEk9C,YAAa,EAAhF;AACA,QAAM1vC,SAAS,QAAf;AACA,QAAMid,eAAe,MAArB;;AAEA/uB,MAAI+L,KAAJ,CAAW,oCAAmC+F,MAAO,IAAGvK,GAAI,EAA5D;AACA,QAAMV,WAAW,MAAM,uBAAQ,EAAEU,GAAF,EAAOuK,MAAP,EAAeid,YAAf,EAAR,CAAvB;;AAEA,MAAIloB,SAASxF,KAAb,EAAoB;AAClBrB,QAAI4G,IAAJ,CAAS,2DAAT;AACA,QAAIC,SAASP,OAAT,CAAiByL,IAArB,EAA2B;AACzB;AACA,YAAM,EAAEO,UAAF,KAAiBzL,SAASP,OAAT,CAAiByL,IAAxC;AACA/R,UAAI+L,KAAJ,CAAW,0EAAyEuG,UAAW,GAA/F;AACA;AACA,aAAO;AACLjR,eAAO,IADF;AAELoN,gBAAQ6D,UAFH;AAGLrS,cAAO,mEAAkEqS,UAAW;AAH/E,OAAP;AAKD,KAVD,MAUO;AACL;AACA,YAAM,EAAErM,OAAF,KAAcY,SAASP,OAAT,CAAiBoM,MAArC;AACA1S,UAAI+L,KAAJ,CAAW,sEAAqE9F,OAAQ,EAAxF;AACA;AACA,aAAO;AACL5E,eAAO,IADF;AAELoN,gBAAQ5H,SAASP,OAAT,CAAiBoM,MAAjB,CAAwBvL,IAF3B;AAGLlH,cAAO,sEAAqEgG,OAAQ;AAH/E,OAAP;AAKD;AACF,GAvBD,MAuBO;AACLjG,QAAI4G,IAAJ,CAAS,gEAAT;AACA;AACA,WAAO;AACLvF,aAAO;AADF,KAAP;AAGD;AACF;;AAED;;;;;;AAMO,UAAWoiD,QAAX,CAAqBz7C,UAArB,EAAiC+7C,UAAjC,EAA6C;AAClD,QAAM,EAAE1/C,MAAF,KAAa2D,UAAnB;AACA,QAAM8J,SAAS,KAAf;AACA,QAAMvK,MAAO,GAAElD,OAAOD,QAAS,MAAKC,OAAOA,MAAO,IAAGA,OAAOC,IAAK,GAAEy/C,UAAW,EAA9E;AACA/jD,MAAI+L,KAAJ,CAAW,iCAAgC+F,MAAO,IAAGvK,GAAI,EAAzD;;AAEA,QAAMV,WAAW,MAAM,uBAAQ;AAC7BU,OAD6B;AAE7BuK;AAF6B,GAAR,CAAvB;;AAKA,MAAI,CAACjL,SAASxF,KAAd,EAAqB;AACnBrB,QAAI4G,IAAJ,CAAS,2BAAT;AACA;AACA,WAAOC,SAASP,OAAT,CAAiByL,IAAxB;AACD,GAJD,MAIO;AACL/R,QAAI+L,KAAJ,CAAW,kCAAiC,yBAAelF,SAASxF,KAAxB,CAA+B,EAA3E;AACD;AACF,C;;;;;;;;;;;;;;;;;;;;;;QCvKiB2iD,2B,GAAAA,2B;QAqBAC,mB,GAAAA,mB;;AAxClB;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;IAAYx+C,O;;AACZ;;IAAYD,W;;AACZ;;AACA;;IAAYmsB,Q;;;;;;AAEZ;AACA,MAAM3xB,MAAM0F,iBAAWC,SAAX,CAAqB,eAArB,CAAZ;;AAEA;;;;AAIO,UAAWq+C,2BAAX,GAA0C;AAC/C,QAAM,wBAAUx+C,YAAY66C,2BAAtB,EAAmD6D,sBAAnD,CAAN;AACD;;AAED,UAAWA,sBAAX,CAAmC/iD,MAAnC,EAA2C;AACzC,MAAIA,OAAOmF,OAAP,CAAeutC,MAAnB,EAA2B,CAE1B;AADC;;;AAGF;AACA;AACA7zC,MAAI4G,IAAJ,CAAS,6CAAT;AACA,QAAM,kBACJnB,QAAQ27C,+BAAR,CAAwCjgD,OAAOuJ,IAAP,CAAY42C,OAApD,EAA6D;AAC3DzhC,YAAQ1e,OAAOmF;AAD4C,GAA7D,CADI,CAAN;AAKD;;AAED,MAAMwrC,sBAAsB,EAA5B;;AAEO,UAAWmS,mBAAX,GAAkC;AACvC,QAAM/9C,SAAS,MAAM,qBAAO48C,iCAAP,CAArB;AACA,MAAIqB,QAAQ,EAAZ;;AAEA,QAAMC,wBAAwB,MAAM,4BAClC5+C,YAAY26C,oBADsB,EAElCvN,mBAAQC,SAAR,CAAkBf,mBAAlB,CAFkC,CAApC;AAIA,SAAO,IAAP,EAAa;AACX,UAAM3wC,SAAS,MAAM,mBAAKijD,qBAAL,CAArB;AACApkD,QAAI4G,IAAJ,CACG,oCAAmCzF,OAAOuJ,IAAP,CAAY42C,OAAQ,kBAAiBngD,OAAOuJ,IAAP,CAAYE,QAAS,eADhG;;AAIA;AACA,UAAM02C,UAAU,MAAM,qBAAOuB,gCAAP,EAA6B1hD,OAAOuJ,IAAP,CAAY42C,OAAzC,CAAtB;AACA,QAAI,CAACA,QAAQG,cAAb,EAA6B;AAC3BzhD,UAAI+L,KAAJ,CAAW,8CAA6C5K,OAAOuJ,IAAP,CAAY42C,OAAQ,mBAA5E;AACA;AACD;;AAED,UAAMvsB,eAAe5zB,OAAOmF,OAA5B;AACA,UAAMmL,sBAAsBsjB,aAAatjB,mBAAzC;AACA,UAAM/J,iBAAiBkY,GAAGze,OAAOuJ,IAAP,CAAYE,QAAf,EAAyBmqB,YAAzB,EAAuCtjB,mBAAvC,CAAvB;;AAEA,QAAI4yC,mBAAmBljD,OAAOmF,OAA9B;AACA,QAAI,aAAI,qDAAJ,EAA2DnF,MAA3D,CAAJ,EAAwE;AACtEnB,UAAI+L,KAAJ,CAAU,yCAAV;AACAs4C,yBAAmB,MAAM,mBAAKC,YAAL,EAAmBnjD,OAAOmF,OAA1B,CAAzB;AACD;;AAED;AACA;AACA;AACA,QACE+9C,iBAAiB5yC,mBAAjB,CAAqCC,SAArC,KAAmD,MAAnD,IACAxL,OAAOi9C,4BAAP,KAAwC,mBADxC,IAEAhiD,OAAOuJ,IAAP,CAAY42C,OAAZ,KAAwB,MAH1B,EAIE;AACA;AACAthD,UAAIosB,IAAJ,CACE,iDACE1kB,cADF,GAEE,6BAFF,GAGEvG,OAAOuJ,IAAP,CAAY42C,OAHd,GAIE,gFALJ;AAOA;AACD,KAdD,MAcO;AACL,YAAMiD,YAAYJ,MAAMj9C,QAAN,CAAeQ,cAAf,CAAlB;AACA,UAAI68C,SAAJ,EAAe;AACbvkD,YAAI4G,IAAJ,CAAS,yCAAT;AACA,cAAMvF,QAAQ,IAAI+oB,KAAJ,CAAW,mBAAkB1iB,cAAe,gBAA5C,CAAd;AACA;AACA;AACA;AACA;AACA,cAAM,kBAAIjC,QAAQq7C,yBAAR,CAAkCz/C,KAAlC,CAAJ,CAAN;AACD,OARD,MAQO;AACL8iD,cAAM5mD,IAAN,CAAWmK,cAAX;AACA,YAAIy8C,MAAMpnD,MAAN,GAAemJ,OAAOg9C,aAA1B,EAAyC;AACvCiB,gBAAMx5B,KAAN;AACD;;AAED,cAAM,EAAE/f,QAAF,EAAY02C,OAAZ,KAAwBngD,OAAOuJ,IAArC;AACA1K,YAAI+L,KAAJ,CAAU,gEAAV;AACA;AACA,cAAM,kBAAItG,QAAQo7C,oBAAR,CAA6BwD,gBAA7B,EAA+Cz5C,QAA/C,EAAyD02C,OAAzD,CAAJ,CAAN;AACD;AACF;AACF;AACF;;AAED,MAAM1hC,KAAKhV,YAAYmqB,gBAAgBtjB,uBAAuB;AAC5D,UAAQ7G,QAAR;AACE,SAAK7D,qBAAUC,IAAf;AACEhH,UAAI+L,KAAJ,CAAW,wCAAuC0F,oBAAoBC,SAAU,GAAhF;AACA,aAAOD,oBAAoB+yC,OAA3B;;AAEF,SAAKz9C,qBAAUqI,EAAf;AACE;AACA,aAAOqC,oBAAoBmO,EAApB,IAA0BnO,oBAAoB+yC,OAArD;;AAEF,SAAKz9C,qBAAU+H,KAAf;AACE;AACA;AACA;AACA,WAAK,MAAMm6B,GAAX,IAAkBlU,YAAlB,EAAgC;AAC9B,YAAIA,aAAakU,GAAb,EAAkBrpB,EAAtB,EAA0B;AACxB,iBAAOmV,aAAakU,GAAb,EAAkBrpB,EAAzB;AACD;AACF;AACD5f,UAAIqB,KAAJ,CAAU,+CAAV,EAA2D,oBAAY0zB,YAAZ,CAA3D;AACA,aAAO,IAAP;;AAEF;AACE/0B,UAAI+L,KAAJ,CAAU,8CAAV;AACA,aAAO,IAAP;AAvBJ;AAyBD,CA1BD;;AA4BA;;;;;;;AAOA,UAAWu4C,YAAX,CAAyBh+C,OAAzB,EAAkC;AAChC;AACAA,uCAAeA,OAAf;;AAEA,MAAIA,QAAQmL,mBAAR,CAA4BygB,aAA5B,CAA0CuyB,SAA1C,KAAwD,YAA5D,EAA0E;AACxEzkD,QAAI+L,KAAJ,CAAU,2DAAV;AACA;AACA,UAAM24C,qBAAqBC,KAAKr+C,QAAQmL,mBAAR,CAA4BygB,aAA5B,CAA0C9D,GAA/C,CAA3B;AACA;AACA,UAAMw2B,uBAAuB,MAAM,mBAAKC,aAAL,EAAcH,kBAAd,CAAnC;AACA;AACA,UAAM1jB,YAAYzgC,OAAOukD,YAAP,CAAoBtnD,KAApB,CAA0B,IAA1B,EAAgC,IAAIunD,WAAJ,CAAgBH,oBAAhB,CAAhC,CAAlB;AACAt+C,YAAQmL,mBAAR,CAA4BygB,aAA5B,CAA0C9D,GAA1C,GAAgD4S,SAAhD;AACAhhC,QAAI+L,KAAJ,CAAW,kDAAiDi1B,SAAU,EAAtE;AACA,WAAO16B,OAAP;AACD,GAXD,MAWO,IAAIA,QAAQmL,mBAAR,CAA4BygB,aAA5B,CAA0CuyB,SAA1C,KAAwD,KAA5D,EAAmE;AACxE,UAAMz8C,aAAa,MAAM,qBAAOE,4BAAP,CAAzB;AACA,UAAM,EAAEk7C,gBAAF,KAAuB,MAAM,qBAAON,iCAAP,CAAnC;AACA9iD,QAAI+L,KAAJ,CAAW,4CAA2Cq3C,gBAAiB,EAAvE;AACA;AACA,QAAIA,gBAAJ,EAAsB;AACpBp7C,iBAAW3D,MAAX,GAAoB,kBAAS2D,WAAW3D,MAApB,EAA4B++C,gBAA5B,CAApB;AACAp7C,iBAAW5D,QAAX,GAAsB,kBAAS4D,WAAW5D,QAApB,EAA8Bg/C,gBAA9B,CAAtB;AACAp7C,iBAAW1D,IAAX,GAAkB,kBAAS0D,WAAW1D,IAApB,EAA0B8+C,gBAA1B,CAAlB;AACAp7C,iBAAWzD,OAAX,GAAqB,kBAASyD,WAAWzD,OAApB,EAA6B6+C,gBAA7B,CAArB;AACD;AACDpjD,QAAI4G,IAAJ,CAAS,iBAAT;AACA,UAAMC,WAAW,MAAM,mBAAK8qB,SAAS8xB,QAAd,EAAwBz7C,UAAxB,EAAoC1B,QAAQmL,mBAAR,CAA4BygB,aAA5B,CAA0C9D,GAA9E,CAAvB;AACA9nB,YAAQmL,mBAAR,CAA4BygB,aAA5B,CAA0C9D,GAA1C,GAAgDvnB,SAASm+C,iBAAT,CAA2B52B,GAA3E;AACA,WAAO9nB,OAAP;AACD,GAfM,MAeA;AACLtG,QAAI+L,KAAJ,CAAW,+BAA8BzF,QAAQmL,mBAAR,CAA4BygB,aAA5B,CAA0CuyB,SAAU,GAA7F;AACA,WAAOn+C,OAAP;AACD;AACF,C;;;;;;;;;;;;;;;;;;QCpKiB2+C,0B,GAAAA,0B;QAQAC,4B,GAAAA,4B;QAyCAC,wB,GAAAA,wB;QAQAC,0B,GAAAA,0B;;AA1ElB;;AACA;;AAEA;;AAEA;;AACA;;IAAY5/C,W;;AACZ;;AACA;;IAAYmsB,Q;;;;;;AAEZ;;AANA;AAOA,MAAM3xB,MAAM0F,iBAAWC,SAAX,CAAqB,eAArB,CAAZ;;AAEA;;;;;AAXA;AAHA;AAkBO,UAAWs/C,0BAAX,GAAyC;AAC9C,QAAM,wBAAUz/C,YAAY+6C,gCAAtB,EAAwD8E,uBAAxD,CAAN;AACD;;AAED;;;;AAIO,UAAWH,4BAAX,GAA2C;AAChD,QAAM,wBAAU1/C,YAAYg7C,kCAAtB,EAA0D6E,uBAA1D,CAAN;AACD;;AAED;;;;AAIA,UAAWA,uBAAX,CAAoClkD,MAApC,EAA4C;AAC1C;AACA,QAAM6G,aAAa,MAAM,qBAAOE,4BAAP,CAAzB;AACA,QAAM,EAAEk7C,gBAAF,KAAuB,MAAM,qBAAON,iCAAP,CAAnC;;AAEA;AACA,MAAIM,gBAAJ,EAAsB;AACpBp7C,eAAW3D,MAAX,GAAoB,kBAAS2D,WAAW3D,MAApB,EAA4B++C,gBAA5B,CAApB;AACAp7C,eAAW5D,QAAX,GAAsB,kBAAS4D,WAAW5D,QAApB,EAA8Bg/C,gBAA9B,CAAtB;AACAp7C,eAAW1D,IAAX,GAAkB,kBAAS0D,WAAW1D,IAApB,EAA0B8+C,gBAA1B,CAAlB;AACAp7C,eAAWzD,OAAX,GAAqB,kBAASyD,WAAWzD,OAApB,EAA6B6+C,gBAA7B,CAArB;AACD;;AAEDpjD,MAAI4G,IAAJ,CAAS,oDAAT;AACA,QAAMC,WAAW,MAAM,mBAAK8qB,SAAS4xB,6BAAd,EAA6Cv7C,UAA7C,6BAClB7G,OAAOmF,OADW,EAAvB;;AAIA,MAAIO,SAASxF,KAAb,EAAoB;AAClB;AACA,UAAM,mBAAK,CAACF,OAAOuJ,IAAP,CAAYwV,QAAb,EAAuB,QAAvB,CAAL,EAAuC;AAC3C7e,aAAOwF,SAAS5G;AAD2B,KAAvC,CAAN;AAGD,GALD,MAKO;AACL;AACA,UAAM,mBAAK,CAACkB,OAAOuJ,IAAP,CAAYwV,QAAb,EAAuB,SAAvB,CAAL,EAAwCrZ,SAAS26C,YAAjD,CAAN;AACD;AACF;;AAED;;;;AAIO,UAAW2D,wBAAX,GAAuC;AAC5C,QAAM,wBAAU3/C,YAAYi7C,kCAAtB,EAA0D6E,yBAA1D,CAAN;AACD;;AAED;;;;AAIO,UAAWF,0BAAX,GAAyC;AAC9C,QAAM,wBAAU5/C,YAAYk7C,oCAAtB,EAA4D4E,yBAA5D,CAAN;AACD;;AAED;;;;AAIA,UAAWA,yBAAX,CAAsCnkD,MAAtC,EAA8C;AAC5C,QAAM6G,aAAa,MAAM,qBAAOE,4BAAP,CAAzB;AACA,QAAM,EAAEk7C,gBAAF,KAAuB,MAAM,qBAAON,iCAAP,CAAnC;;AAEA;AACA,MAAIM,gBAAJ,EAAsB;AACpBp7C,eAAW3D,MAAX,GAAoB,kBAAS2D,WAAW3D,MAApB,EAA4B++C,gBAA5B,CAApB;AACAp7C,eAAW5D,QAAX,GAAsB,kBAAS4D,WAAW5D,QAApB,EAA8Bg/C,gBAA9B,CAAtB;AACAp7C,eAAW1D,IAAX,GAAkB,kBAAS0D,WAAW1D,IAApB,EAA0B8+C,gBAA1B,CAAlB;AACAp7C,eAAWzD,OAAX,GAAqB,kBAASyD,WAAWzD,OAApB,EAA6B6+C,gBAA7B,CAArB;AACD;;AAEDpjD,MAAI4G,IAAJ,CAAS,uDAAT;AACA,QAAMC,WAAW,MAAM,mBAAK8qB,SAAS6xB,+BAAd,EAA+Cx7C,UAA/C,EAA2D;AAChFw5C,kBAAcrgD,OAAOmF,OAAP,CAAek7C;AADmD,GAA3D,CAAvB;AAGA,MAAI36C,SAASxF,KAAb,EAAoB;AAClB,UAAM,mBAAK,CAACF,OAAOuJ,IAAP,CAAYwV,QAAb,EAAuB,QAAvB,CAAL,EAAuC;AAC3C7e,aAAOwF,SAAS5G;AAD2B,KAAvC,CAAN;AAGD,GAJD,MAIO;AACL,UAAM,mBAAK,CAACkB,OAAOuJ,IAAP,CAAYwV,QAAb,EAAuB,SAAvB,CAAL,EAAwCjT,SAAxC,CAAN;AACD;AACF,C;;;;;;;;;;;;;;;;;;QC9Fes4C,iB,GAAAA,iB;QA+CAC,e,GAAAA,e;QAmCAC,kB,GAAAA,kB;;AAzFhB;;;;;;AAEA;;;;;AAKO,SAASF,iBAAT,CAA4B1+C,QAA5B,EAAsC;AAC3C,MAAI,CAACA,SAASxF,KAAd,EAAqB;AACnB;AACD;;AAED;;;;;;;;;;;;;;;AAeA;AACA,QAAMqkD,aAAa,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,EAAY,EAAZ,CAAnB;;AAEA,QAAMpzC,aAAaqzC,cAAc9+C,QAAd,CAAnB;;AAEA;;;;AAIA,MAAIA,SAAS6L,MAAT,CAAgBvL,IAAhB,KAAyB,GAAzB,KAAiCN,SAASkL,IAAT,KAAkB9E,SAAlB,IAA+By4C,WAAWx+C,QAAX,CAAoBoL,UAApB,CAAhE,CAAJ,EAAsG;AACpG,QAAIrM,UAAU,6DAAd;AACA,QAAIqM,UAAJ,EAAgB;AACdrM,iBAAY,iBAAgBqM,UAAW,EAAvC;AACD;AACD,WAAO,IAAItM,gBAAJ,CAAe;AACpBmB,YAAMC,kBAAUoJ,mBADI;AAEpBvK,eAASA;AAFW,KAAf,CAAP;AAID;AACF;;AAED;;;;;;AArDA;;;;;AA2DO,SAASu/C,eAAT,CAA0B3+C,QAA1B,EAAoC;AACzC;;;;;;;;;AASA;;;;AAIA,QAAM6L,SAAS7L,SAAS6L,MAAxB;AACA,MAAIA,OAAOvL,IAAP,KAAgB,GAAhB,IAAuBuL,OAAOzM,OAAP,KAAmB,cAA9C,EAA8D;AAC5D,QAAIA,UAAU,6DAAd;;AAEA,UAAMqM,aAAaqzC,cAAc9+C,QAAd,CAAnB;AACA,QAAIyL,UAAJ,EAAgB;AACdrM,iBAAY,iBAAgBqM,UAAW,EAAvC;AACD;;AAED,WAAO,IAAItM,gBAAJ,CAAe;AACpBmB,YAAMC,kBAAUoJ,mBADI;AAEpBvK;AAFoB,KAAf,CAAP;AAID;AACF;;AAED;;;;;AAKO,SAASw/C,kBAAT,CAA6B5+C,QAA7B,EAAuC;AAC5C;;;AAGA,MAAIA,SAAS6L,MAAT,CAAgBvL,IAAhB,KAAyB,GAA7B,EAAkC;AAChC,WAAO,IAAInB,gBAAJ,CAAe;AACpBmB,YAAMC,kBAAUoJ,mBADI;AAEpBvK,eAAS;AAFW,KAAf,CAAP;AAID;AACF;;AAED;;;;;AAKA,SAAS0/C,aAAT,CAAwB9+C,QAAxB,EAAkC;AAChC,MAAIyL,UAAJ;AACA;;;AAGA,MAAIzL,SAASkL,IAAb,EAAmB;AACjB,QAAIlL,SAASkL,IAAT,CAAcO,UAAlB,EAA8B;AAC5B;AACAA,mBAAazL,SAASkL,IAAT,CAAcO,UAA3B;AACD,KAHD,MAGO;AACL;AACA;AACA;AACA,4BAAczL,SAASkL,IAAvB,EAA6B3S,OAA7B,CAAqC5C,SAAS;AAC5C,YAAIA,MAAM8V,UAAV,EAAsB;AACpBA,uBAAa9V,MAAM8V,UAAnB;AACD;AACF,OAJD;AAKD;AACF;AACD,SAAOA,UAAP;AACD,C;;;;;;;;;;;;;;;ACnID;;AAEA;;;;;;;AAOO,MAAMpO,0CAAiB;AAC5B0hD,4BAA0B;AADE,CAAvB,C,CAVP;;;AAcA,MAAMlhD,gBAAgBC,uBAAIC,MAAJ,CAAW;AAC/BghD,4BAA0BjhD,uBAAIsnB,OAAJ;AADK,CAAX,CAAtB;AAGO,MAAMhnB,sCAAe,uBAAM,SAAN,EAAiBP,aAAjB,CAArB,C;;;;;;;;;;;;;kBCMiBmhD,O;QAONC,W,GAAAA,W;;AA7BlB;;AACA;;IAAYrgD,O;;AACZ;;AAGA;;AACA;;AACA;;;;AAEA;;;;;;;;;;;;;AAVA;AAuBe,SAASogD,OAAT,CAAkB3gD,OAAlB,EAA2B6gD,aAA3B,EAA0C;AACvD,SAAO,mBAAKD,WAAL,EAAkB5gD,OAAlB,EAA2B6gD,aAA3B,CAAP;AACD;;AAED;;;;;AAtBA;AAyBO,UAAWD,WAAX,CAAwB5gD,OAAxB,EAAiC8gD,aAAjC,EAAgD;AACrD;;;;;;;AAOA,MAAIA,aAAJ,EAAmB;AACjB9gD,cAAU,yBAAYA,OAAZ,EAAqB8gD,aAArB,CAAV;AACD,GAFD,MAEO;AACL;AACA,UAAMD,gBAAgB,MAAM,mBAAKE,uBAAL,EAAuB/gD,QAAQqC,GAA/B,CAA5B;;AAEArC,cAAU,yBAAYA,OAAZ,EAAqB6gD,aAArB,CAAV;AACD;;AAED;AACA,QAAMG,gBAAgB,MAAM,kBAAIzgD,QAAQogD,OAAR,CAAgB3gD,OAAhB,CAAJ,CAA5B;AACA,QAAM6uC,iBAAiB,MAAM,mBAC3B5yC,UAAUA,OAAOX,IAAP,KAAgB2lD,qBAAhB,IAA4B,aAAI,gBAAJ,EAAsBhlD,MAAtB,MAAkC+kD,cAAcx7C,IAAd,CAAmB07C,SADhE,CAA7B;;AAIA,SAAOrS,cAAP;AACD,C;;;;;;;;;;;;;;;ACrDD;;AACA;;;;AACA;;;;AAGA;;AACA;;AAGA;;AAGA;;;;AAJA;;;AAJA;AAUA,MAAMjH,aAAa,UAAnB;;AAEA;;;;;AALA;AAZA;kBAoBeuZ,e;;AAEf;;;;;;AAKO,MAAMC,oCAAcD,cAAc,MAAd,CAApB;AACA,MAAME,gCAAYF,cAAc,IAAd,CAAlB;AACA,MAAMG,sCAAeH,cAAc,OAAd,CAArB;;AAEP;;;;;;;AAOA,SAASA,aAAT,CAAwBz7C,QAAxB,EAAkC;AAChC;AACA,QAAMoiB,OAAO,qBAAcpiB,QAAd,CAAb;;AAEA,SAAO,SAASi7C,OAAT,CAAkB3gD,UAAU,EAA5B,EAAgC;AACrCA,cAAU,wBAAYhB,uBAAZ,EAA4BgB,OAA5B,CAAV;AACA,+BAAaA,OAAb;;AAEA,cAAWuK,IAAX,GAAmB;AACjB,YAAM,kBAAI,qBAAavK,OAAb,EAAsB4nC,UAAtB,CAAJ,CAAN;AACA,YAAM,kBAAI,yBAAUU,gBAAV,CAAJ,CAAN;AACD;;AAED,WAAO;AACLpoC,aAAO,CAAC4nB,IAAD,CADF;AAELngB,YAAMigC,UAFD;AAGLr9B,UAHK;AAILwd,oBAAcriB,WAAW,CAAC,mBAAD,CAAX,GAAmC;AAJ5C,KAAP;AAMD,GAfD;AAgBD,C;;;;;;;;;;;;;AC1DD,MAAM8hC,SAAS,UAAf;;AAEO,MAAM+Z,4BAAU/Z,SAAS,SAAzB;AACA,MAAMyZ,8BAAWzZ,SAAS,UAA1B;;AAEA,MAAM/iC,oDAAsB+iC,SAAS,qBAArC,C;;;;;;;;;;;;;QCUSmZ,O,GAAAA,O;QAaAh/C,Q,GAAAA,Q;QAgBA6/C,kB,GAAAA,kB;;AA5ChB;;IAAYlhD,W;;;;AAEZ,IAAImhD,gBAAgB,CAApB;AACA,SAASC,iBAAT,GAA8B;AAC5B,SAAOD,eAAP;AACD;;AAED;;;;;;;;AAQO,SAASd,OAAT,CAAkB3gD,OAAlB,EAA2B;AAChC,SAAO;AACL1E,UAAMgF,YAAYihD,OADb;AAELngD,aAASpB,OAFJ;AAGLwF,UAAM;AACJ07C,iBAAWQ;AADP;AAHD,GAAP;AAOD;;AAED;;;AAGO,SAAS//C,QAAT,CAAmBu/C,SAAnB,EAA8B1zC,MAA9B,EAAsCrR,QAAQ,KAA9C,EAAqD;AAC1D,SAAO;AACLb,UAAMgF,YAAY2gD,QADb;AAEL7/C,aAASoM,MAFJ;AAGLrR,SAHK;AAILqJ,UAAM;AACJ07C,iBAAWA;AADP;AAJD,GAAP;AAQD;;AAED;;;;;AAKO,SAASM,kBAAT,CAA6BrlD,KAA7B,EAAoC;AACzC,SAAO;AACLA,WAAO,IADF;AAELb,UAAMgF,YAAYmE,mBAFb;AAGLrD,aAASjF;AAHJ,GAAP;AAKD,C;;;;;;;;;;;;;AClDD;;;;;;;;;;;;;;AAcO,MAAMwlD,wCAAgB,eAAtB,C;;;;;;;;;;;;;;ACdP;;IAAYxhC,U;;AACZ;;IAAY7f,W;;;;AAEZ,MAAMgoC,YAAY,EAAlB;;AAEAA,UAAUhoC,YAAYmE,mBAAtB,IAA6C,UAAUxI,MAAV,EAAkB;AAC7D,SAAO;AACLX,UAAM6kB,WAAWwhC,aADZ;AAELrhC,UAAM;AACJnkB,aAAOF,OAAOmF;AADV;AAFD,GAAP;AAMD,CAPD;;kBASeknC,S;;;;;;;;;;;;;QCRCoY,wB,GAAAA,wB;AANhB;;;;;;AAMO,SAASA,wBAAT,CAAmC54C,KAAnC,EAA0C;AAC/C,SAAOA,MAAM9G,MAAN,CAAayrB,QAAb,CAAsBi0B,wBAA7B;AACD,C;;;;;;;;;;;;;;;;;;;;;;;;;;ACPD;;AAGA;;;;AAEA;;;AANA;AASA,MAAMkB,gBAAgB,sBAAc;AAClCC,QAAM,MAD4B;AAElCC,QAAM,MAF4B;AAGlC/mD,QAAM,MAH4B;AAIlCgnD,QAAM;AAJ4B,CAAd,CAAtB;;AAOA;;;;;AAbA;AAgBA,MAAMC,eAAe,sBAAc;AACjCC,YAAU,kBADuB;AAEjCC,eAAa,4BAFoB;AAGjCC,iBAAe,YAHkB;AAIjCC,eAAa,UAJoB;AAKjCC,eAAa;AALoB,CAAd,CAArB;;AAQA;;;;;;;;;;;;;;;;;;;;;;kBAqBe,eAAeC,WAAf,CAA4BtiD,OAA5B,EAAqCkhD,SAArC,EAAgD;AAC7D,QAAMpmD,MAAM0F,iBAAWC,SAAX,CAAqB,SAArB,EAAgCygD,SAAhC,CAAZ;;AAEA;;;AAGA,QAAM/kD,QAAQomD,gBAAgBviD,OAAhB,CAAd;AACA,MAAI7D,KAAJ,EAAW;AACTrB,QAAI4G,IAAJ,CAASvF,MAAMqR,MAAN,CAAazM,OAAtB;AACA,WAAO5E,KAAP;AACD;;AAED;AACA,QAAM,EAAEkG,GAAF,EAAOf,WAAP,EAAoBuoB,eAAe,MAAnC,KAA+D7pB,OAArE;AAAA,QAAoDwiD,YAApD,0CAAqExiD,OAArE;;AAEA;AACA,MAAI8pB,SAASznB,IAAI+iB,KAAJ,CAAU,UAAV,EAAsB,CAAtB,CAAb;AACA;AACA0E,WAASA,OAAOjyB,MAAP,GAAgB,EAAhB,GAAqBiyB,OAAO24B,SAAP,CAAiB,CAAjB,EAAoB,EAApB,IAA0B,KAA/C,GAAuD34B,MAAhE;AACAhvB,MAAI4G,IAAJ,CAAU,UAAS8gD,aAAa51C,MAAO,IAAGkd,MAAO,WAAjD;;AAEA,MAAInoB,QAAJ;AACA;;;;;;;;AAQA,MAAI;AACFA,eAAW,MAAM+gD,MAAMrgD,MAAM,0BAAcf,WAAd,CAAZ,EAAwCkhD,YAAxC,CAAjB;AACD,GAFD,CAEE,OAAO38B,GAAP,EAAY;AACZ;AACA/qB,QAAI4G,IAAJ,CAAU,qCAAoCmkB,IAAI9kB,OAAQ,EAA1D;AACA,WAAO4hD,aAAa,EAAExmD,OAAO,OAAT,EAAb,EAAiC,EAAE8F,MAAM4jB,IAAIle,IAAZ,EAAkB5G,SAAS8kB,IAAI9kB,OAA/B,EAAjC,CAAP;AACD;;AAED;AACA,QAAMyM,SAAS;AACbo1C,QAAIjhD,SAASihD,EADA;AAEb3gD,UAAMN,SAAS4H,MAFF;AAGbxI,aAASY,SAASkhD;AAHL,GAAf;;AAMA,MAAIlhD,SAASihD,EAAb,EAAiB;AACf,QAAIjhD,SAAS4H,MAAT,KAAoB,GAAxB,EAA6B;AAC3B;;;;AAIA;AACAzO,UAAI4G,IAAJ,CAAU,qDAAoDC,SAAS4H,MAAO,IAA9E;AACA,aAAOo5C,aAAa56C,SAAb,2BAA0B8E,MAAM,EAAhC,IAAuCW,MAAvC,EAAP;AACD;;AAED,UAAMggC,OAAO,MAAMsV,UAAUnhD,QAAV,EAAoBkoB,YAApB,CAAnB;AACA,QAAI2jB,gBAAgBtoB,KAApB,EAA2B;AACzB;AACApqB,UAAIqB,KAAJ,CAAW,uCAAsC0tB,YAAa,YAAW2jB,IAAK,EAA9E;AACA,aAAOmV,aAAa,EAAExmD,OAAO,SAAT,EAAb,EAAmC,EAAE8F,MAAMurC,KAAK7lC,IAAb,EAAmB5G,SAASysC,KAAKzsC,OAAjC,EAAnC,CAAP;AACD,KAJD,MAIO;AACL;AACAjG,UAAI4G,IAAJ,CAAU,qDAAoDC,SAAS4H,MAAO,IAA9E;AACA,aAAOo5C,aAAa56C,SAAb,2BAA0B8E,MAAM2gC,IAAhC,IAAyChgC,MAAzC,EAAP;AACD;AACF,GArBD,MAqBO;AACL;AACA,QAAIu1C,WAAJ;AACA;AACA,QAAI;AACFA,oBAAc,MAAMphD,SAASoI,OAAT,CAAiB2tB,GAAjB,CAAqB,cAArB,CAApB;AACD,KAFD,CAEE,OAAO7R,GAAP,EAAY;AACZ/qB,UAAI+L,KAAJ,CAAW,8BAA6Bgf,IAAI9kB,OAAQ,GAApD;AACD;AACD;;;;AAIA,QAAIY,SAAS4H,MAAT,KAAoB,GAApB,IAA2Bw5C,YAAY/gD,QAAZ,CAAqB,MAArB,CAA/B,EAA6D;AAC3D,aAAO2gD,aAAa,EAAExmD,OAAO,SAAT,EAAb,EAAmCqR,MAAnC,CAAP;AACD;;AAED;;;;AAIA,UAAMw1C,SAASD,eAAeA,YAAY/gD,QAAZ,CAAqBggD,aAAaC,QAAlC,CAA9B;AACA,UAAMgB,eAAeD,SAAS,MAAMrhD,SAASkgD,IAAT,EAAf,GAAiC,EAAtD;AACA,WAAOc,aAAa,EAAExmD,OAAO,SAAT,EAAb,2BAAqC0Q,MAAMo2C,YAA3C,IAA4Dz1C,MAA5D,EAAP;AACD;AACF,C;;AAED;;;;;;;;AAMA,SAAS+0C,eAAT,CAA0BviD,OAA1B,EAAmC;AACjC,QAAM,EAAEqC,GAAF,EAAOwnB,YAAP,KAAwB7pB,OAA9B;;AAEA,MAAI,CAACqC,GAAD,IAAQ,OAAOA,GAAP,KAAe,QAA3B,EAAqC;AACnC,UAAM6gD,oBAAqB,iEAAgE7gD,GAAI,UAA/F;AACA,WAAOsgD,aAAa,EAAExmD,OAAO,aAAT,EAAwB4E,SAASmiD,iBAAjC,EAAb,CAAP;AACD;;AAED;;;;AAIA,MAAIr5B,gBAAgB,CAAC+3B,cAAcjoD,cAAd,CAA6BkwB,YAA7B,CAArB,EAAiE;AAC/D,UAAMs5B,sBAAsB,sDAA5B;AACA,WAAOR,aAAa,EAAExmD,OAAO,eAAT,EAA0B4E,SAASoiD,mBAAnC,EAAb,CAAP;AACD;AACF;;AAED;;;;AAIA,eAAeL,SAAf,CAA0BnhD,QAA1B,EAAoCyhD,YAApC,EAAkD;AAChD;;;;AAIA,MAAIH,eAAe,EAAnB;AACA,MAAI;AACF,YAAQG,YAAR;AACE,WAAKxB,cAAcC,IAAnB;AACEoB,uBAAe,MAAMthD,SAASkgD,IAAT,EAArB;AACA;AACF,WAAKD,cAAcE,IAAnB;AACEmB,uBAAe,MAAMthD,SAASmgD,IAAT,EAArB;AACA;AACF,WAAKF,cAAc7mD,IAAnB;AACEkoD,uBAAe,MAAMthD,SAAS5G,IAAT,EAArB;AACA;AACF,WAAK6mD,cAAcG,IAAnB;AACE;AACA;AACF;AACE;AACA,cAAM78B,MAAM,kBAAN,CAAN;AAfJ;AAiBD,GAlBD,CAkBE,OAAOluB,CAAP,EAAU;AACV;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAOA,CAAP;AACD;;AAED,SAAOisD,YAAP;AACD;;AAED;;;;;;;;;;;;;;AAcA,SAASN,YAAT,CAAuBU,cAAc,EAArC,EAAyCC,eAAe,EAAxD,EAA4D;AAC1D,SAAO;AACLz2C,UAAMy2C,aAAaz2C,IADd;AAEL1Q,WAAOknD,YAAYlnD,KAFd;AAGLqR,YAAQ;AACNo1C,UAAI1M,QAAQoN,aAAaV,EAArB,CADE;AAEN3gD,YAAMqhD,aAAarhD,IAFb;AAGNlB,eAASsiD,YAAYtiD,OAAZ,IAAuBuiD,aAAaviD;AAHvC;AAHH,GAAP;AASD,C;;;;;;;;;;;;;;kBCnNuBwiD,a;;AAnBxB;;IAAYjjD,W;;AACZ;;IAAYC,O;;AACZ;;;;AACA;;IAAYijD,c;;AAGZ;;AAGA;;AAGA;;AACA;;;;;;AAEA;;;;;;AAJA;;;AANA;AANA;AAoBe,SAASD,aAAT,CAAwB79C,QAAxB,EAAkC;AAC/C;AACA,MAAI,CAAC,CAAC,MAAD,EAAS,IAAT,EAAe,OAAf,EAAwBqC,SAAxB,EAAmC/F,QAAnC,CAA4C0D,QAA5C,CAAL,EAA4D;AAC1D,UAAMwf,MAAM,yCAAN,CAAN;AACD;AACD,SAAO,UAAWq+B,aAAX,GAA4B;AACjC,UAAM,wBAAUjjD,YAAYihD,OAAtB,EAA+BkC,aAA/B,EAA8C/9C,QAA9C,CAAN;AACD,GAFD;AAGD;;AAED;;;;;;;;;AArBA;AA4BA,UAAW+9C,aAAX,CAA0B/9C,QAA1B,EAAoCzJ,MAApC,EAA4C;AAC1C,QAAMnB,MAAM0F,iBAAWC,SAAX,CAAqB,SAArB,EAAgCxE,OAAOuJ,IAAP,CAAY07C,SAA5C,CAAZ;;AAEA,QAAMwC,aAAa,mBAAUznD,OAAOmF,OAAjB,CAAnB;AACA;AACA;AACA;AACA,QAAMuiD,aAAaD,WAAW35C,OAAX,CAAmBE,aAAtC;AACA,MAAI05C,UAAJ,EAAgB;AACdD,eAAW35C,OAAX,CAAmBE,aAAnB,GAAmC05C,WAAWlB,SAAX,CAAqB,CAArB,EAAwB,CAAxB,IAA6B,KAAhE;AACD;AACD3nD,MAAI+L,KAAJ,CAAW,uBAAsB5K,OAAOuJ,IAAP,CAAY07C,SAAU,GAAvD,EAA2DwC,UAA3D;;AAEA;AACA,MAAIl2C,SAAS,MAAM,mBAAK80C,qBAAL,EAAkBrmD,OAAOmF,OAAzB,EAAkCnF,OAAOuJ,IAAP,CAAY07C,SAA9C,CAAnB;;AAEApmD,MAAI+L,KAAJ,CAAW,0BAAyB5K,OAAOuJ,IAAP,CAAY07C,SAAU,GAA1D,EAA8D1zC,MAA9D;;AAEA;AACA;AACA,MAAI9H,YAAY,CAAC,2BAAa0C,UAAb,CAAwB,GAAxB,CAAjB,EAA+C;AAC7C;AACA;AACA,UAAMjM,QAAQqnD,eAAgB,GAAE99C,QAAS,eAA3B,EAA2C8H,MAA3C,CAAd;;AAEA,QAAIrR,KAAJ,EAAW;AACT,YAAM,kBAAIoE,QAAQihD,kBAAR,CAA2BrlD,KAA3B,CAAJ,CAAN;AACD;AACF;;AAED,QAAM,kBAAIoE,QAAQoB,QAAR,CAAiB1F,OAAOuJ,IAAP,CAAY07C,SAA7B,EAAwC1zC,MAAxC,EAAgD,CAAC,CAACA,OAAOrR,KAAzD,CAAJ,CAAN;AACD;;AAED;AACO,MAAMynD,sCAAe,EAAEL,aAAF,EAAiBE;AAC7C;;AAD4B,CAArB,C;;;;;;;;;;;;;QCpDW1C,gB,GAAAA,gB;QAuCF8C,wB,GAAAA,wB;;AAzDhB;;AAGA;;AAGA;;AACA;;AAGA;;AAEA;;;;;;;;AAVA;AAgBO,UAAW9C,gBAAX,CAA6B1+C,GAA7B,EAAkC;AACvC,QAAMqD,WAAW,MAAM,qBAAOoD,uBAAP,CAAvB;AACA,QAAMa,cAAc,MAAM,qBAAOZ,0BAAP,EAAuBrD,QAAvB,CAA1B;AACA,QAAMo+C,kBAAkB,MAAM,qBAAOpD,mCAAP,CAA9B;;AAEA;AACA;AACA,MAAI1gD,OAAJ;AACA,MAAI0F,aAAa,OAAjB,EAA0B;AACxB;AACA;AACA1F,cAAU2J,YAAY3J,OAAZ,IAAuB,EAAjC;AACD,GAJD,MAIO;AACLA,cAAU2J,YAAYzI,cAAZ,IAA8B,EAAxC;AACD;;AAED;AACAlB,UAAQ+J,OAAR,GAAkB/J,QAAQ+J,OAAR,IAAmB,EAArC;;AAEA;AACA/J,UAAQ+J,OAAR,CAAgB,cAAhB,IAAkC,kBAAlC;AACA/J,UAAQ+J,OAAR,CAAgBC,MAAhB,GAAyB,kBAAzB;;AAEA;AACA,MAAI85C,eAAJ,EAAqB;AACnB9jD,YAAQ+J,OAAR,CAAgB,eAAhB,IAAmC85C,yBAAyBn+C,QAAzB,EAAmCrD,GAAnC,CAAnC;AACD;;AAED,SAAOrC,OAAP;AACD;;AAED;;;;;;;;;;AAxCA;;;AAJA;AANA;AA0DO,SAAS6jD,wBAAT,CAAmCn+C,QAAnC,EAA6CrD,GAA7C,EAAkD;AACvD;AACA,MAAI0hD,cAAe,gBAAe,0BAAa,EAA/C;;AAEA;AACA;AACA,MAAI1hD,OAAOA,IAAIL,QAAJ,CAAa,aAAb,CAAX,EAAwC;AACtC+hD,kBAAe,iBAAgB,0BAAa,EAA5C;AACD,GAFD,MAEO;AACL;AACA,QAAIr+C,aAAa7D,qBAAUqI,EAA3B,EAA+B;AAC7B65C,oBAAe,aAAY,0BAAa,EAAxC;AACD,KAFD,MAEO,IAAIr+C,aAAa7D,qBAAUC,IAA3B,EAAiC;AACtCiiD,oBAAe,eAAc,0BAAa,EAA1C;AACD;AACF;AACD,SAAOA,WAAP;AACD,C;;;;;;;;;;;;;AC3ED,MAAMrgD,SAAS,uBAAf;;AAEO,MAAMsgD,gCAAYtgD,SAAS,WAA3B;AACA,MAAM+rB,kDAAqB/rB,SAAS,oBAApC;;AAEA,MAAMugD,oCAAcvgD,SAAS,aAA7B;AACA,MAAMwgD,sDAAuBxgD,SAAS,sBAAtC;;AAEA,MAAMO,4DAA0BP,SAAS,yBAAzC;;AAEA,MAAMygD,sDAAuBzgD,SAAS,sBAAtC;AACA,MAAM0gD,oDAAsB1gD,SAAS,qBAArC;AACA,MAAM2gD,sEAA+B3gD,SAAS,8BAA9C;AACA,MAAM4gD,wDAAwB5gD,SAAS,uBAAvC;AACA,MAAM6gD,0EAAiC7gD,SAAS,gCAAhD;;AAEA,MAAM8gD,0CAAiB9gD,SAAS,gBAAhC;AACA,MAAM+gD,0CAAiB/gD,SAAS,gBAAhC,C;;;;;;;;;;;;;QCJS+E,e,GAAAA,e;QAYAi8C,qB,GAAAA,qB;QASAC,qB,GAAAA,qB;QAUAC,uB,GAAAA,uB;QAaAC,qB,GAAAA,qB;QA2BAn8C,mB,GAAAA,mB;QAmBAo8C,gB,GAAAA,gB;QAaAC,qB,GAAAA,qB;QAwBAC,kB,GAAAA,kB;;AA5IhB;;AAGA;;AAGA;;AAEA;;;;;;;AANA;AAWO,SAASv8C,eAAT,CAA0BO,WAA1B,EAAuC;AAC5C,SAAO,mBAAUA,WAAV,CAAP;AACD;;AAED;;;;;;;;;;AAZA;AAoBO,SAAS07C,qBAAT,CAAgC58C,KAAhC,EAAuC;AAC5C,SAAO,mBAAUA,MAAM9G,MAAN,CAAa/B,YAAvB,CAAP;AACD;;AAED;;;;;AAKO,SAAS0lD,qBAAT,CAAgC78C,KAAhC,EAAuC;AAC5C,SAAO,mBAAUA,MAAM7I,YAAN,CAAmBgmD,kBAA7B,CAAP;AACD;;AAED;;;;;AAKA;AACO,SAASL,uBAAT,CAAkC98C,KAAlC,EAAyC;AAC9C,SAAO,mBAAU;AACfo9C,0BAAsBp9C,MAAM7I,YAAN,CAAmBimD,oBAD1B;AAEf/2C,mBAAerG,MAAM7I,YAAN,CAAmBkP;AAFnB,GAAV,CAAP;AAID;;AAED;;;;;;AAMO,SAAS02C,qBAAT,CAAgC/8C,KAAhC,EAAuCxM,IAAvC,EAA6C;AAClD,QAAMoG,OAAOgH,oBAAoBZ,KAApB,CAAb;AACA;AACA;AACA,MAAIqG,gBAAgBzV,MAAMC,OAAN,CAAc+I,IAAd,IAAsBA,IAAtB,GAA6B,CAACA,IAAD,CAAjD;;AAEA;AACA,MAAIpG,IAAJ,EAAU;AACR6S,oBAAgBA,cAAcrU,MAAd,CAAqBmF,gBAAgBA,aAAakmD,WAAb,KAA6B7pD,IAAlE,CAAhB;AACD;;AAED;;AAEA;AACA;AACA;AACA;AACA,SAAO6S,cAAcq1B,MAAd,CAAqB,CAACC,GAAD,EAAM2hB,UAAN,KAAqB;AAC/C,WAAO3hB,IAAIzoC,MAAJ,CAAWoqD,WAAW9lD,OAAtB,CAAP;AACD,GAFM,EAEJ,EAFI,CAAP;AAGD;;AAED;;;;;AAKO,SAASoJ,mBAAT,CAA8BZ,KAA9B,EAAqC;AAC1C,MAAIA,MAAM7I,YAAV,EAAwB;AACtB,WAAO,mBAAU6I,MAAM7I,YAAN,CAAmBkP,aAA7B,CAAP;AACD,GAFD,MAEO;AACL;AACA;AACA;AACA;AACA,WAAO,mBAAU,oCAAwBrG,KAAxB,CAAV,CAAP;AACD;AACF;;AAED;;;;;;;AAOO,SAASg9C,gBAAT,CAA2Bh9C,KAA3B,EAAkCxI,OAAlC,EAA2ChE,IAA3C,EAAiD;AACtD,MAAI6S,gBAAgBrG,MAAM7I,YAAN,CAAmBkP,aAAvC;AACAA,kBAAgBA,cAAcrU,MAAd,CACdmF,gBAAgBA,aAAaK,OAAb,KAAyBA,OAAzB,IAAoCL,aAAakmD,WAAb,KAA6B7pD,IADnE,CAAhB;AAGA,SAAO,mBAAU6S,aAAV,CAAP;AACD;;AAED;;;;;AAKO,SAAS42C,qBAAT,CAAgCj9C,KAAhC,EAAuC;AAC5C,QAAMu9C,YAAYv9C,MAAM9G,MAAN,CAAa/B,YAA/B;AACA,QAAMqmD,aAAax9C,MAAM9G,MAAN,CAAaqG,cAAhC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAMiD,UACJg7C,WAAWrmD,YAAX,IAA2BqmD,WAAWrmD,YAAX,CAAwBqL,OAAnD,GAA6Dg7C,WAAWrmD,YAAX,CAAwBqL,OAArF,GAA+F+6C,UAAU/6C,OAD3G;;AAGA,SAAOA,OAAP;AACD;;AAED;;;;;;;;AAQO,SAAS06C,kBAAT,CAA6Bl9C,KAA7B,EAAoC;AACzC,QAAMu9C,YAAYv9C,MAAM9G,MAAN,CAAa/B,YAA/B;AACA,QAAMqmD,aAAax9C,MAAM9G,MAAN,CAAaqG,cAAhC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAO,wBAAYg+C,UAAU9lD,SAAtB,EAAiC+lD,WAAW/lD,SAA5C,CAAP;AACD,C;;;;;;;;;;;;;kBC3IyBgmD,iB;QAyBVC,Y,GAAAA,Y;;AArChB;;AACA;;AAGA;;AACA;;AAEA;;;;;;;AAJA;AAJA;AAae,UAAWD,iBAAX,CAA8BtM,OAA9B,EAAuC;AACpD;;;;AAIA,QAAMwM,iBAAiB,6BAAalY,QAAQ;AAC1C,WAAOiY,aAAavM,OAAb,EAAsB1L,IAAtB,CAAP;AACD,GAFsB,CAAvB;;AAIA;AACA;AACA,QAAM,wBAAUkY,cAAV,EAA0B3gB,oBAA1B,CAAN;AACD;;AAED;;;;;;;;;;;AAWO,SAAS0gB,YAAT,CAAuBvM,OAAvB,EAAgC1L,IAAhC,EAAsCjvB,MAAM,KAA5C,EAAmD;AACxD;AACA,QAAMif,SAAS,MAAM;AACnB;AACA;AACA0b,YAAQyM,YAAR,GAAuBnR,IAAvB,CAA4BoR,WAAW;AACrCpY,WAAKqY,uBAAcC,cAAd,CAA6BF,OAA7B,CAAL;AACD,KAFD;AAGD,GAND;;AAQA1M,UAAQ5F,EAAR,CAAW,QAAX,EAAqB9V,MAArB;;AAEA;AACA,QAAM9xB,cAAc,MAAM;AACxBwtC,YAAQ1F,GAAR,CAAY,QAAZ,EAAsBhW,MAAtB;AACD,GAFD;;AAIA,SAAO9xB,WAAP;AACD,C;;;;;;;;;;;;;;;ACpDD;;;;;4CAMS3M,O;;;;AALT;;;;;iDAMSA,O;;;;AAJT;;;;;iDAKSA,O;;;kBAOiBgnD,a;;AAlB1B;;;;;;AAKA;;;;;;;;AAQA;;;;;AAKe,UAAWA,aAAX,CAA0Bn+B,QAA1B,EAAoCzW,MAApC,EAA4C;AACzD,QAAM,mBAAKq0C,iBAAL,EAAwB59B,SAASg+B,OAAjC,CAAN;AACA,QAAM,mBAAKI,sBAAL,EAA8Bp+B,SAASwM,KAAvC,CAAN;AACA,QAAM,mBAAK6xB,wBAAL,EAAgCr+B,SAAS/V,cAAzC,EAAyDV,MAAzD,CAAN;AACA,QAAM,mBAAK+0C,sBAAL,EAA8Bt+B,SAASrV,KAAvC,CAAN;AACD,C;;;;;;;;;;;;;kBCRyB4zC,gB;QAsBVV,Y,GAAAA,Y;;AArChB;;AACA;;AAGA;;AACA;;AAEA;;;;;;;;;;AAJA;AAJA;AAgBe,UAAWU,gBAAX,CAA6B5zC,KAA7B,EAAoCpB,MAApC,EAA4C;AACzD;;;;AAIA,QAAMi1C,eAAe,6BAAa5Y,QAAQ;AACxC,WAAOiY,aAAalzC,KAAb,EAAoBi7B,IAApB,EAA0BjvB,cAA1B,CAAP;AACD,GAFoB,CAArB;AAGA,QAAM,wBAAU6nC,YAAV,EAAwBrhB,oBAAxB,CAAN;AACD;;AAED;;;;;;;;;;;AAWO,SAAS0gB,YAAT,CAAuBlzC,KAAvB,EAA8Bi7B,IAA9B,EAAoCjvB,MAAM,KAA1C,EAAiD;AACtD;AACA,QAAMoW,WAAW,CAAC,EAAE5S,OAAF,EAAW7E,OAAX,EAAD,KAA0B;AACzC;;;;AAIAswB,SAAK6Y,sBAAaC,aAAb,CAA2BvkC,OAA3B,EAAoC,EAAE7E,OAAF,EAApC,CAAL;AACD,GAND;;AAQA;AACA;AACA,QAAMqpC,eAAerpC,WAAW;AAC9BswB,SAAK6Y,sBAAaG,iBAAb,CAA+Bj0C,MAAMoI,EAArC,EAAyC,EAAEuC,OAAF,EAAzC,CAAL;AACD,GAFD;;AAIA,QAAMupC,aAAa,CAAC,EAAE1kC,OAAF,EAAW7E,OAAX,EAAD,KAA0B;AAC3C;;;;;AAKAswB,SAAK6Y,sBAAaK,eAAb,CAA6B3kC,OAA7B,EAAsC,EAAE7E,OAAF,EAAtC,CAAL;AACD,GAPD;AAQA,QAAMypC,eAAehsC,MAAM;AACzB;;;;AAIA6yB,SAAKjvB,GAAL;AACD,GAND;;AAQAhM,QAAM+gC,EAAN,CAAS,WAAT,EAAsB3e,QAAtB;AACApiB,QAAM+gC,EAAN,CAAS,eAAT,EAA0BiT,YAA1B;AACAh0C,QAAM+gC,EAAN,CAAS,aAAT,EAAwBmT,UAAxB;AACAl0C,QAAM+gC,EAAN,CAAS,eAAT,EAA0BqT,YAA1B;;AAEA,QAAMj7C,cAAc,MAAM;AACxB6G,UAAMihC,GAAN,CAAU,WAAV,EAAuB7e,QAAvB;AACApiB,UAAMihC,GAAN,CAAU,eAAV,EAA2B+S,YAA3B;AACAh0C,UAAMihC,GAAN,CAAU,aAAV,EAAyBiT,UAAzB;AACAl0C,UAAMihC,GAAN,CAAU,eAAV,EAA2BmT,YAA3B;AACD,GALD;AAMA,SAAOj7C,WAAP;AACD,C;;;;;;;;;;;;;kBCnEyBw6C,uB;QAiCVT,Y,GAAAA,Y;;AA/ChB;;AACA;;IAAYllD,W;;AACZ;;;;AAGA;;AACA;;;;;;AAEA;;;;;;;;AAJA;AAUe,UAAW2lD,uBAAX,CAAoChN,OAApC,EAA6C;AAC1D;;;;AAIA,QAAMwM,iBAAiB,6BAAalY,QAAQ;AAC1C,WAAOiY,aAAavM,OAAb,EAAsB1L,IAAtB,CAAP;AACD,GAFsB,CAAvB;;AAIA,QAAM,wBAAUkY,cAAV,EAA0BkB,yBAA1B,CAAN;AACD,C,CAzBD;;;AA2BA,UAAWA,yBAAX,CAAsC,EAAEr0C,KAAF,EAASrW,MAAT,EAAtC,EAAyD;AACvD;AACA,MAAIA,OAAOX,IAAP,KAAgBgF,YAAYsmD,SAAhC,EAA2C;AACzC,UAAM,mBAAKV,eAAL,EAAuB5zC,KAAvB,CAAN;AACD;;AAED;AACA,QAAM,kBAAIrW,MAAJ,CAAN;AACD;;AAED;;;;;;;;;;;AAWO,SAASupD,YAAT,CAAuBvM,OAAvB,EAAgC1L,IAAhC,EAAsCjvB,MAAM,KAA5C,EAAmD;AACxD,QAAMuoC,WAAWnsC,MAAM;AACrB,UAAMpI,QAAQ2mC,QAAQvhB,GAAR,CAAYhd,EAAZ,CAAd;AACA;;;;;AAKA6yB,SAAK;AACHj7B,WADG;AAEHrW,cAAQmqD,sBAAaS,QAAb,CAAsBnsC,EAAtB,EAA0B;AAChCmH,eAAOvP,MAAM9U,QAAN,GAAiBsjB,OADQ;AAEhClE,gBAAQtK,MAAM4lB,SAAN,GAAkBlqB,GAAlB,CAAsBmmB,SAASA,MAAMzZ,EAArC;AAFwB,OAA1B;AAFL,KAAL;AAOD,GAdD;;AAgBA,QAAMosC,eAAepsC,MAAM;AACzB;;;;;AAKA6yB,SAAK;AACHtxC,cAAQmqD,sBAAaU,YAAb,CAA0BpsC,EAA1B;AADL,KAAL;AAGD,GATD;;AAWAu+B,UAAQ5F,EAAR,CAAW,WAAX,EAAwBwT,QAAxB;AACA5N,UAAQ5F,EAAR,CAAW,eAAX,EAA4ByT,YAA5B;;AAEA,QAAMr7C,cAAc,MAAM;AACxBwtC,YAAQ1F,GAAR,CAAY,WAAZ,EAAyBsT,QAAzB;AACA5N,YAAQ1F,GAAR,CAAY,eAAZ,EAA6BuT,YAA7B;AACD,GAHD;AAIA,SAAOr7C,WAAP;AACD,C;;;;;;;;;;;;;kBCpEyBs7C,kB;QAyBVvB,Y,GAAAA,Y;;AAxChB;;AACA;;AAGA;;AACA;;AAEA;;;;;;;;;;AAJA;AAJA;AAgBe,UAAWuB,kBAAX,CAA+Bp1C,OAA/B,EAAwCT,MAAxC,EAAgD;AAC7D;;;;AAIA,QAAM81C,iBAAiB,6BAAazZ,QAAQ;AAC1C,WAAOiY,aAAa7zC,OAAb,EAAsB47B,IAAtB,CAAP;AACD,GAFsB,CAAvB;AAGA;AACA;AACA;AACA,QAAM,wBAAUyZ,cAAV,EAA0BliB,oBAA1B,CAAN;AACD;;AAED;;;;;;;;;;;AAWO,SAAS0gB,YAAT,CAAuB7zC,OAAvB,EAAgC47B,IAAhC,EAAsCjvB,MAAM,KAA5C,EAAmD;AACxD;AACA,QAAMoW,WAAW,CAAC,EAAE7S,KAAF,EAAS5E,OAAT,EAAD,KAAwB;AACvC;;;;;;AAMAswB,SACE0Z,wBAAeC,eAAf,CAA+Bv1C,QAAQ+I,EAAvC,EAA2C;AACzCmH,WADyC;AAEzC5E;AAFyC,KAA3C,CADF;AAMD,GAbD;;AAeA,QAAMqpC,eAAe,CAAC,EAAEzkC,KAAF,EAAS5E,OAAT,EAAD,KAAwB;AAC3CswB,SACE0Z,wBAAeE,mBAAf,CAAmCx1C,QAAQ+I,EAA3C,EAA+C;AAC7CmH,WAD6C;AAE7C5E;AAF6C,KAA/C,CADF;AAMD,GAPD;;AASA,QAAMupC,aAAa,CAAC,EAAE3kC,KAAF,EAAS5E,OAAT,EAAkBgb,oBAAlB,EAAD,KAA8C;AAC/D;;;;;;AAMAsV,SACE0Z,wBAAeG,iBAAf,CAAiCz1C,QAAQ+I,EAAzC,EAA6C;AAC3CmH,WAD2C;AAE3C5E,aAF2C;AAG3Cgb;AAH2C,KAA7C,CADF;AAOD,GAdD;;AAgBA,QAAMovB,gBAAgB,CAAC,EAAEC,UAAF,EAAcrqC,OAAd,EAAD,KAA6B;AACjDswB,SACE0Z,wBAAeM,oBAAf,CAAoC51C,QAAQ+I,EAA5C,EAAgD;AAC9C4sC,gBAD8C;AAE9CrqC;AAF8C,KAAhD,CADF;AAMD,GAPD;;AASA;AACA;AACA;AACA,QAAMuqC,WAAW,MAAM;AACrB,UAAM1/C,QAAQ6J,QAAQnU,QAAR,EAAd;;AAEA+vC,SACE0Z,wBAAeQ,aAAf,CAA6B91C,QAAQ+I,EAArC,EAAyC;AACvCA,UAAI5S,MAAM4S,EAD6B;AAEvCiK,mBAAa7c,MAAM6c,WAAN,CAAkB3W,GAAlB,CAAsBmmB,SAASA,MAAMzZ,EAArC,CAF0B;AAGvCkK,oBAAc9c,MAAM8c,YAAN,CAAmB5W,GAAnB,CAAuBmmB,SAASA,MAAMzZ,EAAtC;AAHyB,KAAzC,CADF;AAOD,GAVD;;AAYA/I,UAAQ0hC,EAAR,CAAW,WAAX,EAAwB3e,QAAxB;AACA/iB,UAAQ0hC,EAAR,CAAW,eAAX,EAA4BiT,YAA5B;AACA30C,UAAQ0hC,EAAR,CAAW,aAAX,EAA0BmT,UAA1B;AACA70C,UAAQ0hC,EAAR,CAAW,gBAAX,EAA6BgU,aAA7B;;AAEA,QAAM57C,cAAc,MAAM;AACxBkG,YAAQ4hC,GAAR,CAAY,WAAZ,EAAyB7e,QAAzB;AACA/iB,YAAQ4hC,GAAR,CAAY,eAAZ,EAA6B+S,YAA7B;AACA30C,YAAQ4hC,GAAR,CAAY,aAAZ,EAA2BiT,UAA3B;AACA70C,YAAQ4hC,GAAR,CAAY,gBAAZ,EAA8B8T,aAA9B;AACD,GALD;AAMA,SAAO57C,WAAP;AACD,C;;;;;;;;;;;;;kBCtGyBu6C,yB;QAiCVR,Y,GAAAA,Y;;AAjDhB;;AACA;;IAAYllD,W;;AACZ;;;;AAGA;;AACA;;;;;;AAEA;;;;;;;;;;AAJA;AAYe,UAAW0lD,yBAAX,CAAsC/M,OAAtC,EAA+C/nC,MAA/C,EAAuD;AACpE;;;;AAIA,QAAMu0C,iBAAiB,6BAAalY,QAAQ;AAC1C,WAAOiY,aAAavM,OAAb,EAAsB1L,IAAtB,CAAP;AACD,GAFsB,CAAvB;;AAIA,SAAO,IAAP,EAAa;AACX,UAAM,EAAE57B,OAAF,EAAW1V,MAAX,KAAsB,MAAM,mBAAKwpD,cAAL,CAAlC;;AAEA;AACA,QAAIxpD,OAAOX,IAAP,KAAgBgF,YAAYonD,aAAhC,EAA+C;AAC7C,YAAM,mBAAKX,iBAAL,EAAyBp1C,OAAzB,EAAkCT,MAAlC,CAAN;AACD;;AAED;AACA,UAAM,kBAAIjV,MAAJ,CAAN;AACD;AACF;;AAED;;;;;;;;;;;AAvCA;AAkDO,SAASupD,YAAT,CAAuBvM,OAAvB,EAAgC1L,IAAhC,EAAsCjvB,MAAM,KAA5C,EAAmD;AACxD;AACA,QAAMqpC,eAAejtC,MAAM;AACzB,UAAM/I,UAAUsnC,QAAQvhB,GAAR,CAAYhd,EAAZ,CAAhB;AACA,UAAM5S,QAAQ6J,QAAQnU,QAAR,EAAd;AACA,WAAOsK,MAAM4S,EAAb;;AAEA6yB,SAAK;AACH57B,eAASA,OADN;AAEH1V,cAAQgrD,wBAAeU,YAAf,CAA4BjtC,EAA5B,EAAgC5S,KAAhC;AAFL,KAAL;AAID,GATD;;AAWA;AACA,QAAM8/C,iBAAiBltC,MAAM;AAC3B6yB,SAAK;AACHtxC,cAAQgrD,wBAAeW,cAAf,CAA8BltC,EAA9B;AADL,KAAL;AAGD,GAJD;;AAMAu+B,UAAQ5F,EAAR,CAAW,aAAX,EAA0BsU,YAA1B;AACA1O,UAAQ5F,EAAR,CAAW,iBAAX,EAA8BuU,cAA9B;AACA,QAAMn8C,cAAc,MAAM;AACxBwtC,YAAQ1F,GAAR,CAAY,aAAZ,EAA2BoU,YAA3B;AACA1O,YAAQ1F,GAAR,CAAY,iBAAZ,EAA+BqU,cAA/B;AACD,GAHD;AAIA,SAAOn8C,WAAP;AACD,C;;;;;;;;;;;;;kBC/DyBo8C,gB;QAsBVrC,Y,GAAAA,Y;;AAnChB;;AACA;;AACA;;AACA;;AAEA;;;;;;;;AANA;AAce,UAAWqC,gBAAX,CAA6B1zB,KAA7B,EAAoCjjB,MAApC,EAA4C;AACzD;;;;AAIA,QAAM42C,eAAe,6BAAava,QAAQ;AACxC,WAAOiY,aAAarxB,KAAb,EAAoBoZ,IAApB,EAA0BjvB,cAA1B,CAAP;AACD,GAFoB,CAArB;AAGA,QAAM,wBAAUwpC,YAAV,EAAwBhjB,oBAAxB,CAAN;AACD;;AAED;;;;;;;;;;;AAWO,SAAS0gB,YAAT,CAAuBrxB,KAAvB,EAA8BoZ,IAA9B,EAAoCjvB,MAAM,KAA1C,EAAiD;AACtD;AACA,QAAMkoC,aAAauB,aAAa;AAC9B;;;;AAIAxa,SAAKjvB,GAAL;AACD,GAND;;AAQA;AACA;AACA;AACA,QAAM0pC,mBAAmBD,aAAa;AACpCxa,SAAK0a,sBAAaD,gBAAb,CAA8B,CAACD,UAAU9qC,OAAX,CAA9B,CAAL;AACD,GAFD;;AAIA;AACA,QAAMirC,qBAAqBH,aAAa;AACtCxa,SAAK0a,sBAAaC,kBAAb,CAAgC,CAACH,UAAU9qC,OAAX,CAAhC,CAAL;AACD,GAFD;;AAIAkX,QAAMkf,EAAN,CAAS,OAAT,EAAkBmT,UAAlB;AACAryB,QAAMkf,EAAN,CAAS,OAAT,EAAkB2U,gBAAlB;AACA7zB,QAAMkf,EAAN,CAAS,SAAT,EAAoB6U,kBAApB;;AAEA,QAAMz8C,cAAc,MAAM;AACxB0oB,UAAMof,GAAN,CAAU,OAAV,EAAmBiT,UAAnB;AACAryB,UAAMof,GAAN,CAAU,OAAV,EAAmByU,gBAAnB;AACA7zB,UAAMof,GAAN,CAAU,SAAV,EAAqB2U,kBAArB;AACD,GAJD;AAKA,SAAOz8C,WAAP;AACD,C;;;;;;;;;;;;;kBCpDyBs6C,uB;QAqCVP,Y,GAAAA,Y;;AApDhB;;AACA;;IAAYllD,W;;AACZ;;;;AAGA;;AACA;;;;;;AAEA;;;;;;;;;AAJA;AAWe,UAAWylD,uBAAX,CAAoC9M,OAApC,EAA6C;AAC1D;;;;AAIA,QAAMwM,iBAAiB,6BAAalY,QAAQ;AAC1C,WAAOiY,aAAavM,OAAb,EAAsB1L,IAAtB,CAAP;AACD,GAFsB,CAAvB;;AAIA;AACA;AACA;AACA;AACA,QAAM,wBAAUkY,cAAV,EAA0B0C,yBAA1B,CAAN;AACD,C,CA9BD;;;AAgCA,UAAWA,yBAAX,CAAsC,EAAEh0B,KAAF,EAASl4B,MAAT,EAAtC,EAAyD;AACvD;AACA,MAAIA,OAAOX,IAAP,KAAgBgF,YAAYmW,WAAhC,EAA6C;AAC3C,UAAM,mBAAKoxC,eAAL,EAAuB1zB,KAAvB,CAAN;AACD;;AAED;AACA,QAAM,kBAAIl4B,MAAJ,CAAN;AACD;;AAED;;;;;;;;;;;AAWO,SAASupD,YAAT,CAAuBvM,OAAvB,EAAgC1L,IAAhC,EAAsCjvB,MAAM,KAA5C,EAAmD;AACxD;AACA,QAAM8pC,aAAa1tC,MAAM;AACvB,UAAMyZ,QAAQ8kB,QAAQvhB,GAAR,CAAYhd,EAAZ,CAAd;AACA,UAAM5S,QAAQqsB,MAAM32B,QAAN,EAAd;;AAEA;AACA;AACA;AACAsK,UAAMugD,WAAN,GAAoBvgD,MAAMwgD,KAA1B;AACAxgD,UAAMwgD,KAAN,GAAc,CAACxgD,MAAM01C,OAArB;;AAEA,WAAO11C,MAAM01C,OAAb;AACA,WAAO11C,MAAM4S,EAAb;;AAEA;;;;AAIA6yB,SAAK;AACHpZ,WADG;AAEHl4B,cAAQgsD,sBAAaG,UAAb,CAAwB1tC,EAAxB,EAA4B5S,KAA5B;AAFL,KAAL;AAID,GArBD;;AAuBA;AACA,QAAMw+C,eAAe5rC,MAAM;AACzB;;;;;AAKA6yB,SAAK;AACHtxC,cAAQgsD,sBAAa3B,YAAb,CAA0B5rC,EAA1B;AADL,KAAL;AAGD,GATD;;AAWAu+B,UAAQ5F,EAAR,CAAW,KAAX,EAAkB+U,UAAlB;AACAnP,UAAQ5F,EAAR,CAAW,QAAX,EAAqBiT,YAArB;AACA,QAAM76C,cAAc,MAAM;AACxBwtC,YAAQ1F,GAAR,CAAY,KAAZ,EAAmB6U,UAAnB;AACAnP,YAAQ1F,GAAR,CAAY,QAAZ,EAAsB+S,YAAtB;AACD,GAHD;AAIA,SAAO76C,WAAP;AACD,C;;;;;;;;;;;;;QC5Ee88C,e,GAAAA,e;kBAIQC,Y;;AAxBxB;;;;AACA;;;;AACA;;;;AACA;;IAAYtoD,K;;AACZ;;AAGA;;AACA;;AAGA;;AAGA;;;;AACA;;AACA;;;;;;AANA;;;AAJA;AAYA,MAAMpF,MAAM0F,iBAAWC,SAAX,CAAqB,QAArB,CAAZ;;AALA;AAdA;AAqBO,SAAS8nD,eAAT,GAA4B;AACjC,SAAO,4BAAP;AACD;;AAEc,SAASC,YAAT,GAAyB;AACtC,QAAM,EAAExhC,YAAF,EAAgBC,cAAhB,KAAmC,gDAAzC;AACA,MAAI,CAACD,YAAD,IAAiB,CAACC,cAAtB,EAAsC;AACpCnsB,QAAIosB,IAAJ,CACE,2GADF;AAGA;AACD;;AAED;AACA,QAAMhW,SAAS,4BAAf;;AAEA,YAAW3G,IAAX,CAAiB,EAAE2G,MAAF,EAAjB,EAA6B;AAC3B,UAAM,kBAAI,yBAAUyQ,gBAAV,CAAJ,CAAN;;AAEA;AACA,UAAMkG,eAAe,gBAAO3nB,KAAP,EAAc8N,GAAd,CAAkB8Z,QAAQ;AAC7C,aAAO,wBAAY,MAAMA,KAAK5W,OAAOyW,QAAZ,CAAlB,CAAP;AACD,KAFoB,CAArB;;AAIA;AACA,SAAK,MAAMG,IAAX,IAAmBD,YAAnB,EAAiC;AAC/B,YAAM,mBAAKC,IAAL,CAAN;AACD;;AAED;AACA;AACA,UAAM,mBAAKg+B,kBAAL,EAAoB50C,OAAOyW,QAA3B,EAAqCzW,MAArC,CAAN;;AAEA;AACA,UAAMmmB,UAAU,MAAM,mBAAK,CAACnmB,MAAD,EAAS,mBAAT,CAAL,CAAtB;AACApW,QAAI4G,IAAJ,CAAU,oBAAmB21B,QAAQ9P,OAAQ,aAAY8P,QAAQh4B,OAAQ,GAAzE;AACA,UAAM,kBAAIopD,qBAAYC,iBAAZ,CAA8BrxB,OAA9B,CAAJ,CAAN;AACD;;AAED,SAAO;AACL1vB,UAAM6f,oBAAgB7f,IADjB;AAELf,SAAK4gB,oBAAgB5gB,GAFhB;AAGLc,aAAS8f,oBAAgB9f,OAHpB;AAIL6C,QAJK;AAKLorC,YAAQ;AACNzkC;AADM;AALH,GAAP;AASD,C;;;;;;;;;;;;;ACrED,MAAMxN,SAAS,iBAAf;;AAEA;;;AAGO,MAAMilD,0CAAiBjlD,SAAS,gBAAhC;AACA,MAAMklD,kDAAqBllD,SAAS,oBAApC;AACA,MAAMmlD,gEAA4BnlD,SAAS,2BAA3C;;AAEP;;;AAGA,MAAM8S,cAAc9S,SAAS,QAA7B;;AAEO,MAAM+S,oCAAcD,cAAc,OAAlC;AACA,MAAME,wCAAgBF,cAAc,SAApC;;AAEA,MAAMsyC,wCAAgBtyC,cAAc,QAApC;AACA,MAAMuyC,sDAAuBvyC,cAAc,eAA3C;;AAEA,MAAMwyC,wCAAgBxyC,cAAc,QAApC;AACA,MAAMyyC,sDAAuBzyC,cAAc,eAA3C;;AAEA,MAAM0yC,oCAAc1yC,cAAc,MAAlC;AACA,MAAM2yC,kDAAqB3yC,cAAc,aAAzC;AACA,MAAM4yC,wCAAgB5yC,cAAc,QAApC;AACA,MAAM6yC,sDAAuB7yC,cAAc,eAA3C;;AAEA,MAAM8yC,kDAAqB9yC,cAAc,cAAzC;AACA,MAAM+yC,sDAAuB/yC,cAAc,gBAA3C;;AAEP;;;AAGA,MAAMgzC,gBAAgB9lD,SAAS,UAA/B;;AAEO,MAAMgkD,wCAAgB8B,gBAAgB,OAAtC;AACA,MAAMC,4CAAkBD,gBAAgB,SAAxC;;AAEA,MAAMrnC,gDAAoBqnC,gBAAgB,WAA1C;AACA,MAAMpnC,wDAAwBonC,gBAAgB,eAA9C;AACA,MAAMlnC,oDAAsBknC,gBAAgB,aAA5C;AACA,MAAME,0CAAiBF,gBAAgB,QAAvC;AACA,MAAMG,0DAAyBH,gBAAgB,gBAA/C;;AAEP;;;AAGA,MAAMI,cAAclmD,SAAS,QAA7B;;AAEO,MAAMkjD,gCAAYgD,cAAc,KAAhC;AACA,MAAMC,wCAAgBD,cAAc,SAApC;AACA,MAAME,sCAAeF,cAAc,QAAnC;;AAEA,MAAMG,4CAAkBH,cAAc,WAAtC;AACA,MAAMI,oDAAsBJ,cAAc,eAA1C;AACA,MAAMK,gDAAoBL,cAAc,aAAxC;;AAEP;;;AAGO,MAAMM,oDAAsBxmD,SAAS,qBAArC,C;;;;;;;;;;;;;QC1DSmiD,c,GAAAA,c;QAOAsE,gB,GAAAA,gB;QAcAC,sB,GAAAA,sB;;AAvBhB;;IAAY9pD,W;;;;AAEL,SAASulD,cAAT,CAAyBF,OAAzB,EAAkC;AACvC,SAAO;AACLrqD,UAAMgF,YAAYqoD,cADb;AAELvnD,aAASukD;AAFJ,GAAP;AAID,C,CARD;AAUO,SAASwE,gBAAT,CAA2BE,kBAA3B,EAA+C;AACpD,SAAO;AACL/uD,UAAMgF,YAAYsoD,kBADb;AAELxnD,aAASipD;AAFJ,GAAP;AAID;;AAED;;;;;;;AAOO,SAASD,sBAAT,CAAiC,EAAEzE,OAAF,EAAWxpD,KAAX,EAAjC,EAAqD;AAC1D,SAAO;AACLiF,aAASjF,SAASwpD,OADb;AAELxpD,WAAO+5C,QAAQ/5C,KAAR,CAFF;AAGLb,UAAMgF,YAAYuoD;AAHb,GAAP;AAKD,C;;;;;;;;;;;;;;;AC9BD;;IAAYyB,mB;;AACZ;;IAAYC,kB;;AACZ;;IAAYC,oB;;AACZ;;IAAYC,kB;;AACZ;;IAAYC,iB;;;;AAEZ;AACA;AACA;AACO,MAAM9E,wCAAgB0E,mBAAtB;AACA,MAAMrC,sCAAesC,kBAArB;AACA,MAAMtD,0CAAiBuD,oBAAvB;AACA,MAAMpE,sCAAeqE,kBAArB;AACA,MAAMhC,oCAAciC,iBAApB,C;;;;;;;;;;;;;;;;;;QCYS7D,Q,GAAAA,Q;QAIAC,Y,GAAAA,Y;QAIAT,a,GAAAA,a;QAIAE,iB,GAAAA,iB;QAIAE,e,GAAAA,e;;AAxChB;;IAAYnmD,W;;AAGZ;;;;;;AAJA;AAMA,SAASqqD,iBAAT,CAA4BrvD,IAA5B,EAAkCof,EAAlC,EAAsCtZ,UAAU,EAAhD,EAAoDoE,OAAO,EAA3D,EAA+D;AAC7D,QAAMvJ,SAAS;AACbX,QADa;AAEb8F,wCACKA,OADL;AAEEsZ;AAFF;;AAMF;AARe,GAAf,CASA,IAAI,CAAC,iBAAQlV,IAAR,CAAL,EAAoB;AAClBvJ,WAAOuJ,IAAP,GAAcA,IAAd;AACD;AACD,MAAIpE,QAAQjF,KAAZ,EAAmB;AACjBF,WAAOE,KAAP,GAAe,IAAf;AACD;AACD,SAAOF,MAAP;AACD;;AApBD;AAsBO,SAAS4qD,QAAT,CAAmBnsC,EAAnB,EAAuBC,MAAvB,EAA+B;AACpC,SAAOgwC,kBAAkBrqD,YAAYsmD,SAA9B,EAAyClsC,EAAzC,EAA6CC,MAA7C,CAAP;AACD;;AAEM,SAASmsC,YAAT,CAAuBpsC,EAAvB,EAA2BC,MAA3B,EAAmC;AACxC,SAAOgwC,kBAAkBrqD,YAAYupD,aAA9B,EAA6CnvC,EAA7C,EAAiDC,MAAjD,CAAP;AACD;;AAEM,SAAS0rC,aAAT,CAAwB3rC,EAAxB,EAA4BC,MAA5B,EAAoC;AACzC,SAAOgwC,kBAAkBrqD,YAAYypD,eAA9B,EAA+CrvC,EAA/C,EAAmDC,MAAnD,CAAP;AACD;;AAEM,SAAS4rC,iBAAT,CAA4B7rC,EAA5B,EAAgCC,MAAhC,EAAwC;AAC7C,SAAOgwC,kBAAkBrqD,YAAY0pD,mBAA9B,EAAmDtvC,EAAnD,EAAuDC,MAAvD,CAAP;AACD;;AAEM,SAAS8rC,eAAT,CAA0B/rC,EAA1B,EAA8BC,MAA9B,EAAsC;AAC3C,SAAOgwC,kBAAkBrqD,YAAY2pD,iBAA9B,EAAiDvvC,EAAjD,EAAqDC,MAArD,CAAP;AACD,C;;;;;;;;;;;;;QChCe+tC,iB,GAAAA,iB;;AAVhB;;IAAYpoD,W;;;;AAEZ;;;;;;;;AAQO,SAASooD,iBAAT,CAA4BrxB,OAA5B,EAAqC;AAC1C,SAAO;AACL/7B,UAAMgF,YAAY4pD,mBADb;AAEL9oD,aAASi2B;AAFJ,GAAP;AAID,C,CAhBD,iB;;;;;;;;;;;;;;;;;;QCyBgBswB,Y,GAAAA,Y;QAIAC,c,GAAAA,c;QAIAV,e,GAAAA,e;QAIAC,mB,GAAAA,mB;QAIAC,iB,GAAAA,iB;QAIAK,a,GAAAA,a;QAIAF,oB,GAAAA,oB;;AAhDhB;;IAAYjnD,W;;AAGZ;;;;;;AAJA;AAMA,SAASsqD,mBAAT,CAA8BtvD,IAA9B,EAAoCof,EAApC,EAAwCtZ,UAAU,EAAlD,EAAsDoE,OAAO,EAA7D,EAAiE;AAC/D,QAAMvJ,SAAS;AACbX,QADa;AAEb8F,wCACKA,OADL;AAEEsZ;AAFF;;AAMF;AARe,GAAf,CASA,IAAI,CAAC,iBAAQlV,IAAR,CAAL,EAAoB;AAClBvJ,WAAOuJ,IAAP,GAAcA,IAAd;AACD;AACD,MAAIpE,QAAQjF,KAAZ,EAAmB;AACjBF,WAAOE,KAAP,GAAe,IAAf;AACD;AACD,SAAOF,MAAP;AACD;;AApBD;AAsBO,SAAS0rD,YAAT,CAAuBjtC,EAAvB,EAA2BC,MAA3B,EAAmC;AACxC,SAAOiwC,oBAAoBtqD,YAAYonD,aAAhC,EAA+ChtC,EAA/C,EAAmDC,MAAnD,CAAP;AACD;;AAEM,SAASitC,cAAT,CAAyBltC,EAAzB,EAA6BC,MAA7B,EAAqC;AAC1C,SAAOiwC,oBAAoBtqD,YAAYmpD,eAAhC,EAAiD/uC,EAAjD,EAAqDC,MAArD,CAAP;AACD;;AAEM,SAASusC,eAAT,CAA0BxsC,EAA1B,EAA8BC,MAA9B,EAAsC;AAC3C,SAAOiwC,oBAAoBtqD,YAAY6hB,iBAAhC,EAAmDzH,EAAnD,EAAuDC,MAAvD,CAAP;AACD;;AAEM,SAASwsC,mBAAT,CAA8BzsC,EAA9B,EAAkCC,MAAlC,EAA0C;AAC/C,SAAOiwC,oBAAoBtqD,YAAY8hB,qBAAhC,EAAuD1H,EAAvD,EAA2DC,MAA3D,CAAP;AACD;;AAEM,SAASysC,iBAAT,CAA4B1sC,EAA5B,EAAgCC,MAAhC,EAAwC;AAC7C,SAAOiwC,oBAAoBtqD,YAAYgiB,mBAAhC,EAAqD5H,EAArD,EAAyDC,MAAzD,CAAP;AACD;;AAEM,SAAS8sC,aAAT,CAAwB/sC,EAAxB,EAA4BC,MAA5B,EAAoC;AACzC,SAAOiwC,oBAAoBtqD,YAAYopD,cAAhC,EAAgDhvC,EAAhD,EAAoDC,MAApD,CAAP;AACD;;AAEM,SAAS4sC,oBAAT,CAA+B7sC,EAA/B,EAAmCC,MAAnC,EAA2C;AAChD,SAAOiwC,oBAAoBtqD,YAAYqpD,sBAAhC,EAAwDjvC,EAAxD,EAA4DC,MAA5D,CAAP;AACD,C;;;;;;;;;;;;;;;;;;QCrCeytC,U,GAAAA,U;QAIA9B,Y,GAAAA,Y;QAYAuE,U,GAAAA,U;QAIAC,gB,GAAAA,gB;QAIAC,Y,GAAAA,Y;QAIAC,kB,GAAAA,kB;QAIAhD,gB,GAAAA,gB;QAIAE,kB,GAAAA,kB;QAIA+C,Y,GAAAA,Y;QAOAC,kB,GAAAA,kB;QAOAC,Y,GAAAA,Y;QAOAC,kB,GAAAA,kB;;AA1EhB;;IAAY9qD,W;;;;;;AAEZ,SAAS+qD,kBAAT,CAA6B/vD,IAA7B,EAAmC2hB,OAAnC,EAA4C7b,UAAU,EAAtD,EAA0DoE,OAAO,EAAjE,EAAqE;AACnE,SAAO;AACLlK,QADK;AAEL8F,wCACKA,OADL;AAEE6b;AAFF,MAFK;AAMLzX;AANK,GAAP;AAQD,C,CAZD;AAcO,SAAS4iD,UAAT,CAAqBnrC,OAArB,EAA8BtC,MAA9B,EAAsC;AAC3C,SAAO0wC,mBAAmB/qD,YAAYmW,WAA/B,EAA4CwG,OAA5C,EAAqDtC,MAArD,CAAP;AACD;;AAEM,SAAS2rC,YAAT,CAAuBrpC,OAAvB,EAAgCtC,MAAhC,EAAwC;AAC7C,SAAO0wC,mBAAmB/qD,YAAYoW,aAA/B,EAA8CuG,OAA9C,EAAuDtC,MAAvD,CAAP;AACD;;AAED,SAAS2wC,WAAT,CAAsBhwD,IAAtB,EAA4B8F,UAAU,EAAtC,EAA0CoE,OAAO,EAAjD,EAAqD;AACnD,SAAO;AACLlK,QADK;AAEL8F,WAFK;AAGLoE;AAHK,GAAP;AAKD;;AAEM,SAASqlD,UAAT,CAAqBU,QAArB,EAA+B;AACpC,SAAOD,YAAYhrD,YAAY4oD,WAAxB,EAAqCqC,QAArC,CAAP;AACD;;AAEM,SAAST,gBAAT,CAA2BS,QAA3B,EAAqC;AAC1C,SAAOD,YAAYhrD,YAAY6oD,kBAAxB,EAA4C,EAAEoC,UAAUA,QAAZ,EAA5C,CAAP;AACD;;AAEM,SAASR,YAAT,CAAuBQ,QAAvB,EAAiC;AACtC,SAAOD,YAAYhrD,YAAY8oD,aAAxB,EAAuCmC,QAAvC,CAAP;AACD;;AAEM,SAASP,kBAAT,CAA6BO,QAA7B,EAAuC;AAC5C,SAAOD,YAAYhrD,YAAY+oD,oBAAxB,EAA8C,EAAEkC,UAAUA,QAAZ,EAA9C,CAAP;AACD;;AAEM,SAASvD,gBAAT,CAA2BuD,QAA3B,EAAqC;AAC1C,SAAOD,YAAYhrD,YAAYgpD,kBAAxB,EAA4C,EAAEiC,UAAUA,QAAZ,EAA5C,CAAP;AACD;;AAEM,SAASrD,kBAAT,CAA6BqD,QAA7B,EAAuC;AAC5C,SAAOD,YAAYhrD,YAAYipD,oBAAxB,EAA8C,EAAEgC,UAAUA,QAAZ,EAA9C,CAAP;AACD;;AAEM,SAASN,YAAT,CAAuBM,QAAvB,EAAiC5wC,MAAjC,EAAyC;AAC9C,SAAO2wC,YAAYhrD,YAAYwoD,aAAxB;AACLyC;AADK,KAEF5wC,MAFE,EAAP;AAID;;AAEM,SAASuwC,kBAAT,CAA6BK,QAA7B,EAAuC5wC,MAAvC,EAA+C;AACpD,SAAO2wC,YAAYhrD,YAAYyoD,oBAAxB;AACLwC;AADK,KAEF5wC,MAFE,EAAP;AAID;;AAEM,SAASwwC,YAAT,CAAuBI,QAAvB,EAAiC5wC,MAAjC,EAAyC;AAC9C,SAAO2wC,YAAYhrD,YAAY0oD,aAAxB;AACLuC;AADK,KAEF5wC,MAFE,EAAP;AAID;;AAEM,SAASywC,kBAAT,CAA6BG,QAA7B,EAAuC5wC,MAAvC,EAA+C;AACpD,SAAO2wC,YAAYhrD,YAAY2oD,oBAAxB;AACLsC;AADK,KAEF5wC,MAFE,EAAP;AAID,C;;;;;;;;;;;;;kBCjEuB/T,G;;AAdxB;;AAGA;;;;AAEA;;;;AAHA;AAKA,MAAM9L,MAAM0F,iBAAWC,SAAX,CAAqB,QAArB,CAAZ;;AAEA;;;;;AAVA;AAee,SAASmG,GAAT,CAAcqX,OAAd,EAAuB;AACpC,SAAO;AACL3L,WAAO,qBAAS2L,OAAT,CADF;;AAGL;;;;;;;;;;;;;;AAcAqJ,wBAAqB;AACnBxsB,UAAI+L,KAAJ,CAAUC,oBAAc,mBAAxB;AACA,aAAO,kCAAkBmX,QAAQzgB,QAAR,EAAlB,CAAP;AACD;AApBI,GAAP;AAsBD,C;;;;;;;;;;;;;;;;;;kBCvBuBguD,Q;;AAdxB;;AACA;;AAEA;;;;AAEA,MAAM1wD,MAAM0F,iBAAWC,SAAX,CAAqB,OAArB,CAAZ;;AAEA;;;;;;;AARA;AAee,SAAS+qD,QAAT,CAAmB,EAAE/tD,QAAF,EAAYD,QAAZ,EAAnB,EAA2C;AACxD,SAAO;AACL;;;;;;;;;;;;AAYAiuD,iBAAc;AACZ3wD,UAAI+L,KAAJ,CAAUC,oBAAc,kBAAxB;AACA,aAAO,2BAAWtJ,UAAX,CAAP;AACD,KAhBI;;AAkBL;;;;;;;;;AASAkf,YAASoF,OAAT,EAAkB;AAChBhnB,UAAI+L,KAAJ,CAAUC,oBAAc,iBAAxB,EAA2Cgb,OAA3C;AACA,aAAO,6BAAatkB,UAAb,EAAyBskB,OAAzB,CAAP;AACD,KA9BI;;AAgCL;;;;;;;;;AASAqW,iBAAclb,OAAd,EAAuB;AACrBniB,UAAI+L,KAAJ,CAAUC,oBAAc,sBAAxB,EAAgDmW,OAAhD;AACA,aAAO,6BAAazf,UAAb,EAAyByf,OAAzB,CAAP;AACD,KA5CI;;AA8CL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDAyuC,sBAAmBC,WAAnB,EAAgC;AAC9B7wD,UAAI+L,KAAJ,CAAUC,oBAAc,2BAAxB,EAAqD6kD,WAArD;AACA,YAAMC,oBAAoB;AACxBjwC,eAAOgwC,gBAAgB5jD,SAAhB,GAA4B,IAA5B,GAAmC4jD,YAAYhwC,KAD9B;AAExBE,eAAO8vC,gBAAgB5jD,SAAhB,GAA4B,IAA5B,GAAmC4jD,YAAY9vC;AAF9B,OAA1B;AAIApe,eAASmoD,uBAAcuE,gBAAd,CAA+ByB,iBAA/B,CAAT;AACD,KAtGI;AAuGL;;;;;;;;;;;;;;;;;;;;;;;;;AAyBAX,iBAAcM,QAAd,EAAwBM,WAAxB,EAAqC7rD,UAAU,EAA/C,EAAmD;AACjDlF,UAAI+L,KAAJ,CAAUC,oBAAc,sBAAxB,EAAgDykD,QAAhD,EAA0DM,WAA1D,EAAuE7rD,OAAvE;AACAvC,eACEwqD,sBAAagD,YAAb,CAA0BM,QAA1B;AACEpV,kBAAU0V;AADZ,SAEK7rD,OAFL,EADF;AAMD,KAxII;;AA0IL;;;;;;;;;;;;;;AAcAmrD,iBAAcI,QAAd,EAAwBM,WAAxB,EAAqC;AACnC/wD,UAAI+L,KAAJ,CAAUC,oBAAc,sBAAxB,EAAgDykD,QAAhD,EAA0DM,WAA1D;AACApuD,eAASwqD,sBAAakD,YAAb,CAA0BI,QAA1B,EAAoC,EAAEpV,UAAU0V,WAAZ,EAApC,CAAT;AACD,KA3JI;;AA6JL;;;;;;;;;;;;;;;;;;AAkBAhB,eAAYU,QAAZ,EAAsB;AACpBzwD,UAAI+L,KAAJ,CAAUC,oBAAc,oBAAxB,EAA8CykD,QAA9C;AACA9tD,eAASwqD,sBAAa4C,UAAb,CAAwBU,QAAxB,CAAT;AACD,KAlLI;;AAoLL;;;;;;;;;;;;;AAaAR,iBAAcQ,QAAd,EAAwB;AACtBzwD,UAAI+L,KAAJ,CAAUC,oBAAc,sBAAxB,EAAgDykD,QAAhD;AACA9tD,eAASwqD,sBAAa8C,YAAb,CAA0BQ,QAA1B,CAAT;AACD;AApMI,GAAP;AAsMD,C;;;;;;;;;;;;;ACtND;;;;;;;;;;;;;;;;;AAiBO,MAAMO,4CAAkB,gBAAxB;;AAEP;;;;;;;;;;;;;;;AAeO,MAAMC,8DAA2B,eAAjC;;AAEP;;;;;;;;;;AAUO,MAAMC,sCAAe,aAArB;;AAEP;;;;;;;;;;;AAWO,MAAMC,0CAAiB,eAAvB;;AAEP;;;;;;;;;;;;;;;;;;;;;;;;AAwBO,MAAM3C,kDAAqB,mBAA3B;;AAEP;;;;;;;;;;;;;;;;;;;;AAoBO,MAAMC,sDAAuB,qBAA7B,C;;;;;;;;;;;;;;AC3GP;;IAAYppC,U;;AACZ;;IAAY7f,W;;;;AAEZ,MAAMqhB,SAAS,EAAf;;AAEA;AACAA,OAAOrhB,YAAYqoD,cAAnB,IAAqC1sD,UAAU;AAC7C,SAAO;AACLX,UAAM6kB,WAAW2rC;AADZ,GAAP;AAGD,CAJD;;AAMAnqC,OAAOrhB,YAAYuoD,yBAAnB,IAAgD5sD,UAAU;AACxD,MAAIA,OAAOE,KAAX,EAAkB;AAChB,WAAO;AACLb,YAAM6kB,WAAW4rC,wBADZ;AAELzrC,YAAM,EAAEnkB,OAAOF,OAAOmF,OAAhB;AAFD,KAAP;AAID,GALD,MAKO;AACL,WAAO;AACL9F,YAAM6kB,WAAW2rC;AADZ,KAAP;AAGD;AACF,CAXD;;kBAaenqC,M;;;;;;;;;;;;;;;;;;ACzBf;;;;AACA;;;;;;6CAGKuqC,iB,EACAC,gB;;;;;;;;;;;;;;ACLL;;IAAYhsC,U;;AACZ;;IAAY7f,W;;;;AAEZ,MAAMqhB,SAAS,EAAf;;AAEAA,OAAOrhB,YAAY6oD,kBAAnB,IAAyCltD,UAAU;AACjD,SAAO;AACLX,UAAM6kB,WAAW6rC,YADZ;AAEL1rC,UAAM;AACJirC,gBAAUtvD,OAAOmF,OAAP,CAAemqD,QADrB;AAEJ3uC,cAAQ3gB,OAAOmF,OAAP,CAAemqD;AAFnB;AAFD,GAAP;AAOD,CARD;;AAUA5pC,OAAOrhB,YAAY+oD,oBAAnB,IAA2CptD,UAAU;AACnD,SAAO;AACLX,UAAM6kB,WAAW8rC,cADZ;AAEL3rC,UAAM;AACJirC,gBAAUtvD,OAAOmF,OAAP,CAAemqD,QADrB;AAEJ3uC,cAAQ3gB,OAAOmF,OAAP,CAAemqD;AAFnB;AAFD,GAAP;AAOD,CARD;;AAUA5pC,OAAOrhB,YAAYgpD,kBAAnB,IAAyCrtD,UAAU;AACjD,SAAO;AACLX,UAAM6kB,WAAWmpC,kBADZ;AAELhpC,UAAM;AACJirC,gBAAUtvD,OAAOmF,OAAP,CAAemqD,QADrB;AAEJtuC,eAAShhB,OAAOmF,OAAP,CAAemqD,QAAf,CAAwB,CAAxB;AAFL;AAFD,GAAP;AAOD,CARD;;AAUA5pC,OAAOrhB,YAAYipD,oBAAnB,IAA2CttD,UAAU;AACnD,SAAO;AACLX,UAAM6kB,WAAWopC,oBADZ;AAELjpC,UAAM;AACJirC,gBAAUtvD,OAAOmF,OAAP,CAAemqD,QADrB;AAEJtuC,eAAShhB,OAAOmF,OAAP,CAAemqD,QAAf,CAAwB,CAAxB;AAFL;AAFD,GAAP;AAOD,CARD;;kBAUe5pC,M;;;;;;;;;;;;;;AC7Cf;;;;AACA;;;;;;kBAEe;AACbha,QAAM,QADO;AAEbf,oBAFa;AAGbc;AAHa,C;;;;;;;;;;;;;;ACFf;;IAAYpH,W;;AAGZ;;;;AAEA;;;AANA;AASA,MAAMsH,WAAW,EAAjB;;AAEA;;;AARA;AASAA,SAAStH,YAAY4pD,mBAArB,IAA4C;AAC1CriD,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,WAAOA,OAAOmF,OAAd;AACD;AAHyC,CAA5C;;AAMA,MAAMsG,UAAU,iCAAcE,QAAd,EAAwB,EAAxB,CAAhB;kBACeF,O;;;;;;;;;;;;;;AClBf;;IAAYpH,W;;AAGZ;;;;AAEA;;;AANA;AASA,MAAMsH,WAAW,EAAjB;;AAEA;;;AARA;AASAA,SAAStH,YAAYqoD,cAArB,IAAuC;AACrC9gD,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,WAAOA,OAAOmF,OAAd;AACD;AAHoC,CAAvC;;AAMA;AACAwG,SAAStH,YAAYuoD,yBAArB,IAAkD;AAChDhhD,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,WAAOA,OAAOmF,OAAd;AACD;AAH+C,CAAlD;;AAMA;AACA,MAAMs8C,eAAe;AACnB0O,UAAQ,EADW;AAEnBC,cAAY,EAFO;AAGnBC,WAAS;AAHU,CAArB;;AAMA,MAAM5kD,UAAU,iCAAcE,QAAd,EAAwB81C,YAAxB,CAAhB;kBACeh2C,O;;;;;;;;;;;;;;kBCpBA,UAAUI,QAAQ,EAAlB,EAAsB7L,MAAtB,EAA8B;AAC3C,SAAO;AACL0pD,aAAS,uBAAQ79C,MAAM69C,OAAd,EAAuB1pD,MAAvB,CADJ;AAEL2gB,YAAQ,sBAAO9U,MAAM8U,MAAb,EAAqB3gB,MAArB,CAFH;AAGLswD,cAAU,wBAASzkD,MAAMykD,QAAf,EAAyBtwD,MAAzB,CAHL;AAILqW,WAAO,qBAAMxK,MAAMwK,KAAZ,EAAmBrW,MAAnB,CAJF;AAKLsrB,aAAS,uBAAQzf,MAAMyf,OAAd,EAAuBtrB,MAAvB;AALJ,GAAP;AAOD,C;;AArBD;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;;;;;;;;;;;ACHA;;IAAYqE,W;;AAGZ;;AACA;;;;;;AAEA;;;AAJA;AAKA,MAAMsH,WAAW,EAAjB;;AAEA;AAVA;AAWAA,SAAStH,YAAYsmD,SAArB,IAAkC;AAChC/+C,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,WAAO,gBAAO6L,KAAP,6BACF7L,OAAOmF,OADL,EAAP;AAGD;AAL+B,CAAlC;;AAQA;AACAwG,SAAStH,YAAYupD,aAArB,IAAsC;AACpChiD,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,UAAM0c,cAAcrG,SAASA,MAAMoI,EAAN,KAAaze,OAAOmF,OAAP,CAAesZ,EAAzD;AACA,WAAO,gBAAO/B,WAAP,EAAoB7Q,KAApB,CAAP;AACD;AAJmC,CAAtC;;AAOA;AACA,MAAM0kD,gBAAgB,EAAtB;;AAEAA,cAAclsD,YAAYypD,eAA1B,IAA6C;AAC3CliD,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,sCACK6L,KADL;AAEE8U,cAAQ,gBAAO9U,MAAM8U,MAAb,EAAqB,CAAC3gB,OAAOmF,OAAP,CAAe6b,OAAhB,CAArB;AAFV;AAID;AAN0C,CAA7C;;AASA;AACAuvC,cAAclsD,YAAY0pD,mBAA1B,IAAiD;AAC/CniD,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,UAAMwwD,cAAcxvC,WAAWA,YAAYhhB,OAAOmF,OAAP,CAAe6b,OAA1D;AACA,sCACKnV,KADL;AAEE8U,cAAQ,gBAAO6vC,WAAP,EAAoB3kD,MAAM8U,MAA1B;AAFV;AAID;AAP8C,CAAjD;;AAUA;AACA4vC,cAAclsD,YAAY2pD,iBAA1B,IAA+C;AAC7CpiD,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,UAAMwwD,cAAcxvC,WAAWA,YAAYhhB,OAAOmF,OAAP,CAAe6b,OAA1D;AACA,sCACKnV,KADL;AAEE8U,cAAQ,gBAAO6vC,WAAP,EAAoB3kD,MAAM8U,MAA1B;AAFV;AAID;AAP4C,CAA/C;AASA,MAAM8vC,eAAe,iCAAcF,aAAd,EAA6B,EAA7B,CAArB;;AAEA,MAAMG,uBAAuB,kCAC3BrsD,YAAYypD,eADe,EAE3BzpD,YAAY0pD,mBAFe,EAG3B1pD,YAAY2pD,iBAHe,CAA7B;;AAMAriD,SAAS+kD,oBAAT,IAAiC,CAAC7kD,KAAD,EAAQ7L,MAAR,KAAmB;AAClD,SAAO6L,MAAMkG,GAAN,CAAUsE,SAAS;AACxB,QAAIA,MAAMoI,EAAN,KAAaze,OAAOmF,OAAP,CAAesZ,EAAhC,EAAoC;AAClC,aAAOgyC,aAAap6C,KAAb,EAAoBrW,MAApB,CAAP;AACD,KAFD,MAEO;AACL,aAAOqW,KAAP;AACD;AACF,GANM,CAAP;AAOD,CARD;;AAUA;;;;AAIA,MAAM5K,UAAU,iCAAcE,QAAd,EAAwB,EAAxB,CAAhB;kBACeF,O;;;;;;;;;;;;;;;;;;AClFf;;IAAYpH,W;;AAGZ;;AACA;;;;;;AAFA;AAIA,MAAMsH,WAAW,EAAjB,C,CAPA;;;AASAA,SAAStH,YAAYonD,aAArB,IAAsC;AACpC7/C,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,WAAO,gBAAO6L,KAAP,EAAc7L,OAAOmF,OAArB,CAAP;AACD;AAHmC,CAAtC;;AAMAwG,SAAStH,YAAYmpD,eAArB,IAAwC;AACtC5hD,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,UAAM2wD,gBAAgBj7C,WAAWA,QAAQ+I,EAAR,KAAeze,OAAOmF,OAAP,CAAesZ,EAA/D;AACA,WAAO,gBAAOkyC,aAAP,EAAsB9kD,KAAtB,CAAP;AACD;AAJqC,CAAxC;;AAOA,MAAM+kD,kBAAkB,EAAxB;;AAEAA,gBAAgBvsD,YAAY6hB,iBAA5B,IAAiD;AAC/Cta,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,QAAIA,OAAOmF,OAAP,CAAeygB,KAAnB,EAA0B;AACxB,wCACK/Z,KADL;AAEE6c,qBAAa,gBAAO7c,MAAM6c,WAAb,EAA0B,CAAC1oB,OAAOmF,OAAP,CAAe6b,OAAhB,CAA1B;AAFf;AAID,KALD,MAKO;AACL,wCACKnV,KADL;AAEE8c,sBAAc,gBAAO9c,MAAM8c,YAAb,EAA2B,CAAC3oB,OAAOmF,OAAP,CAAe6b,OAAhB,CAA3B;AAFhB;AAID;AACF;AAb8C,CAAjD;;AAgBA4vC,gBAAgBvsD,YAAY8hB,qBAA5B,IAAqD;AACnDva,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,UAAMwwD,cAAcxvC,WAAWA,YAAYhhB,OAAOmF,OAAP,CAAe6b,OAA1D;AACA,QAAIhhB,OAAOmF,OAAP,CAAeygB,KAAnB,EAA0B;AACxB,wCACK/Z,KADL;AAEE6c,qBAAa,gBAAO8nC,WAAP,EAAoB3kD,MAAM6c,WAA1B;AAFf;AAID,KALD,MAKO;AACL,wCACK7c,KADL;AAEE8c,sBAAc,gBAAO6nC,WAAP,EAAoB3kD,MAAM8c,YAA1B;AAFhB;AAID;AACF;AAdkD,CAArD;;AAiBAioC,gBAAgBvsD,YAAYgiB,mBAA5B,IAAmD;AACjDza,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,UAAMwwD,cAAcxvC,WAAWA,YAAYhhB,OAAOmF,OAAP,CAAe6b,OAA1D;AACA,QAAIhhB,OAAOmF,OAAP,CAAeygB,KAAnB,EAA0B;AACxB,wCACK/Z,KADL;AAEE6c,qBAAa,gBAAO8nC,WAAP,EAAoB3kD,MAAM6c,WAA1B;AAFf;AAID,KALD,MAKO;AACL,wCACK7c,KADL;AAEE8c,sBAAc,gBAAO6nC,WAAP,EAAoB3kD,MAAM8c,YAA1B;AAFhB;AAID;AACF;AAdgD,CAAnD;;AAiBAioC,gBAAgBvsD,YAAYqpD,sBAA5B,IAAsD;AACpD9hD,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB;AACA,UAAMwwD,cAAcxvC,WAAWA,YAAYhhB,OAAOmF,OAAP,CAAekmD,UAA1D;AACA,UAAMwF,iBAAiB,gBAAOL,WAAP,EAAoB3kD,MAAM6c,WAA1B,CAAvB;AACA;AACA,QAAImoC,eAAe3yD,OAAf,CAAuB8B,OAAOmF,OAAP,CAAe6b,OAAtC,MAAmD,CAAC,CAAxD,EAA2D;AACzD6vC,qBAAez0D,IAAf,CAAoB4D,OAAOmF,OAAP,CAAe6b,OAAnC;AACD;AACD,sCACKnV,KADL;AAEE6c,mBAAamoC;AAFf;AAID;AAbmD,CAAtD;;AAgBA,MAAMC,iBAAiB,iCAAcF,eAAd,EAA+B,EAA/B,CAAvB;;AAEA,MAAMG,yBAAyB,kCAC7B1sD,YAAY6hB,iBADiB,EAE7B7hB,YAAY8hB,qBAFiB,EAG7B9hB,YAAYgiB,mBAHiB,EAI7BhiB,YAAYqpD,sBAJiB,CAA/B;;AAOA/hD,SAASolD,sBAAT,IAAmC,CAACllD,KAAD,EAAQ7L,MAAR,KAAmB;AACpD,SAAO6L,MAAMkG,GAAN,CAAU2D,WAAW;AAC1B,QAAIA,QAAQ+I,EAAR,KAAeze,OAAOmF,OAAP,CAAesZ,EAAlC,EAAsC;AACpC,aAAOqyC,eAAep7C,OAAf,EAAwB1V,MAAxB,CAAP;AACD,KAFD,MAEO;AACL,aAAO0V,OAAP;AACD;AACF,GANM,CAAP;AAOD,CARD;;AAUA;;;;AAIA,MAAMjK,UAAU,iCAAcE,QAAd,EAAwB,EAAxB,CAAhB;kBACeF,O;;;;;;;;;;;;;;;;;;ACjHf;;IAAYpH,W;;AAGZ;;AACA;;;;;;AAFA;AAIA,MAAMsH,WAAW,EAAjB;;AAEA;AATA;AAUAA,SAAStH,YAAYmW,WAArB,IAAoC;AAClC5O,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,WAAO,gBAAO6L,KAAP,EAAc7L,OAAOmF,OAArB,CAAP;AACD;AAHiC,CAApC;;AAMA;AACAwG,SAAStH,YAAYoW,aAArB,IAAsC;AACpC7O,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,UAAMwwD,cAAct4B,SAASA,MAAMlX,OAAN,KAAkBhhB,OAAOmF,OAAP,CAAe6b,OAA9D;AACA,WAAO,gBAAOwvC,WAAP,EAAoB3kD,KAApB,CAAP;AACD;AAJmC,CAAtC;;AAOA;AACAF,SAAStH,YAAYyoD,oBAArB,IAA6C;AAC3ClhD,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,WAAO6L,MAAMkG,GAAN,CAAUmmB,SAAS;AACxB,UAAIl4B,OAAOmF,OAAP,CAAemqD,QAAf,CAAwBvpD,QAAxB,CAAiCmyB,MAAMlX,OAAvC,CAAJ,EAAqD;AACnD,0CACKkX,KADL;AAEE84B,sBAAY,gBAAO94B,MAAM84B,UAAb,EAAyBhxD,OAAOmF,OAAP,CAAe+0C,QAAxC;AAFd;AAID,OALD,MAKO;AACL,eAAOhiB,KAAP;AACD;AACF,KATM,CAAP;AAUD;AAZ0C,CAA7C;;AAeA;AACAvsB,SAAStH,YAAY2oD,oBAArB,IAA6C;AAC3CphD,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB;AACA,UAAMixD,kBAAkBC,aAAaA,cAAclxD,OAAOmF,OAAP,CAAe+0C,QAAlE;AACA,WAAOruC,MAAMkG,GAAN,CAAUmmB,SAAS;AACxB,UAAIl4B,OAAOmF,OAAP,CAAemqD,QAAf,CAAwBvpD,QAAxB,CAAiCmyB,MAAMlX,OAAvC,CAAJ,EAAqD;AACnD,0CACKkX,KADL;AAEE84B,sBAAY,gBAAOC,eAAP,EAAwB/4B,MAAM84B,UAA9B;AAFd;AAID,OALD,MAKO;AACL,eAAO94B,KAAP;AACD;AACF,KATM,CAAP;AAUD;AAd0C,CAA7C;;AAiBA;AACAvsB,SAAStH,YAAY6oD,kBAArB,IAA2C;AACzCthD,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,WAAO6L,MAAMkG,GAAN,CAAUmmB,SAAS;AACxB,UAAIl4B,OAAOmF,OAAP,CAAemqD,QAAf,CAAwBvpD,QAAxB,CAAiCmyB,MAAMlX,OAAvC,CAAJ,EAAqD;AACnD,0CACKkX,KADL;AAEEm0B,iBAAO;AAFT;AAID,OALD,MAKO;AACL,eAAOn0B,KAAP;AACD;AACF,KATM,CAAP;AAUD;AAZwC,CAA3C;;AAeAvsB,SAAStH,YAAY+oD,oBAArB,IAA6C;AAC3CxhD,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,WAAO6L,MAAMkG,GAAN,CAAUmmB,SAAS;AACxB,UAAIl4B,OAAOmF,OAAP,CAAemqD,QAAf,CAAwBvpD,QAAxB,CAAiCmyB,MAAMlX,OAAvC,CAAJ,EAAqD;AACnD,0CACKkX,KADL;AAEEm0B,iBAAO;AAFT;AAID,OALD,MAKO;AACL,eAAOn0B,KAAP;AACD;AACF,KATM,CAAP;AAUD;AAZ0C,CAA7C;;AAeAvsB,SAAStH,YAAYgpD,kBAArB,IAA2C;AACzCzhD,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,WAAO6L,MAAMkG,GAAN,CAAUmmB,SAAS;AACxB,UAAIl4B,OAAOmF,OAAP,CAAemqD,QAAf,CAAwBvpD,QAAxB,CAAiCmyB,MAAMlX,OAAvC,CAAJ,EAAqD;AACnD,0CACKkX,KADL;AAEEk0B,uBAAa;AAFf;AAID,OALD,MAKO;AACL,eAAOl0B,KAAP;AACD;AACF,KATM,CAAP;AAUD;AAZwC,CAA3C;;AAeAvsB,SAAStH,YAAYipD,oBAArB,IAA6C;AAC3C1hD,OAAMC,KAAN,EAAa7L,MAAb,EAAqB;AACnB,WAAO6L,MAAMkG,GAAN,CAAUmmB,SAAS;AACxB,UAAIl4B,OAAOmF,OAAP,CAAemqD,QAAf,CAAwBvpD,QAAxB,CAAiCmyB,MAAMlX,OAAvC,CAAJ,EAAqD;AACnD,0CACKkX,KADL;AAEEk0B,uBAAa;AAFf;AAID,OALD,MAKO;AACL,eAAOl0B,KAAP;AACD;AACF,KATM,CAAP;AAUD;AAZ0C,CAA7C;;AAeA;;;;AAIA,MAAMzsB,UAAU,iCAAcE,QAAd,EAAwB,EAAxB,CAAhB;kBACeF,O;;;;;;;;;;;;;QCtHC+jD,U,GAAAA,U;QAOAn8B,W,GAAAA,W;QAIA89B,c,GAAAA,c;QAOAl1B,S,GAAAA,S;QAIAC,Y,GAAAA,Y;QAeAk1B,Q,GAAAA,Q;QAWAC,Y,GAAAA,Y;QAUAhmC,iB,GAAAA,iB;AAhEhB;;;;;;AAMO,SAASmkC,UAAT,CAAqB3jD,KAArB,EAA4B;AACjC,SAAOA,MAAMylD,MAAN,CAAa5H,OAApB;AACD;;AAED;;;AAGO,SAASr2B,WAAT,CAAsBxnB,KAAtB,EAA6B;AAClC,SAAOA,MAAMylD,MAAN,CAAahB,QAApB;AACD;;AAEM,SAASa,cAAT,CAAyBtlD,KAAzB,EAAgCyD,SAAhC,EAA2C;AAChD,SAAO+jB,YAAYxnB,KAAZ,EAAmBgd,IAAnB,CAAwBnT,WAAWA,QAAQ+I,EAAR,KAAenP,SAAlD,CAAP;AACD;;AAED;;;AAGO,SAAS2sB,SAAT,CAAoBpwB,KAApB,EAA2B;AAChC,SAAOA,MAAMylD,MAAN,CAAa3wC,MAApB;AACD;;AAEM,SAASub,YAAT,CAAuBrwB,KAAvB,EAA8BmV,OAA9B,EAAuC;AAC5C,SAAOib,UAAUpwB,KAAV,EAAiBgd,IAAjB,CAAsBqP,SAASA,MAAMlX,OAAN,KAAkBA,OAAjD,CAAP;AACD;;AAED;;;;;AAKA;;;;;;AAMO,SAASowC,QAAT,CAAmBvlD,KAAnB,EAA0B;AAC/B,SAAOA,MAAMylD,MAAN,CAAaj7C,KAApB;AACD;;AAED;;;;;;;AAOO,SAASg7C,YAAT,CAAuBxlD,KAAvB,EAA8Bga,OAA9B,EAAuC;AAC5C,SAAOurC,SAASvlD,KAAT,EAAgBgd,IAAhB,CAAqBxS,SAASA,MAAMoI,EAAN,KAAaoH,OAA3C,CAAP;AACD;;AAED;;;;;;AAMO,SAASwF,iBAAT,CAA4Bxf,KAA5B,EAAmC;AACxC,SAAOA,MAAMylD,MAAN,CAAahmC,OAApB;AACD,C;;;;;;;;;;;;;QC7CiB0jC,Y,GAAAA,Y;QASAE,Y,GAAAA,Y;QASAN,U,GAAAA,U;QASAE,Y,GAAAA,Y;QASAW,iB,GAAAA,iB;QASA8B,mB,GAAAA,mB;QASAC,qB,GAAAA,qB;QAeAC,Y,GAAAA,Y;;AAzFlB;;IAAYC,U;;AACZ;;IAAYC,Q;;AACZ;;IAAYttD,W;;AAGZ;;AACA;;AAGA;;;;AAEA;;;;AAIA;;;;;AAhBA;AAqBO,UAAW2qD,YAAX,CAAyB/5C,MAAzB,EAAiC;AACtC,QAAM,wBAAU5Q,YAAYwoD,aAAtB,EAAqC6E,WAAW1C,YAAhD,EAA8D/5C,MAA9D,CAAN;AACD;;AAED;;;;;;;AAhBA;;;AAJA;AAyBO,UAAWi6C,YAAX,CAAyBj6C,MAAzB,EAAiC;AACtC,QAAM,wBAAU5Q,YAAY0oD,aAAtB,EAAqC2E,WAAWxC,YAAhD,EAA8Dj6C,MAA9D,CAAN;AACD;;AAED;;;;;AAKO,UAAW25C,UAAX,CAAuB35C,MAAvB,EAA+B;AACpC,QAAM,wBAAU5Q,YAAY4oD,WAAtB,EAAmCyE,WAAW9C,UAA9C,EAA0D35C,MAA1D,CAAN;AACD;;AAED;;;;;AAKO,UAAW65C,YAAX,CAAyB75C,MAAzB,EAAiC;AACtC,QAAM,wBAAU5Q,YAAY8oD,aAAtB,EAAqCuE,WAAW5C,YAAhD,EAA8D75C,MAA9D,CAAN;AACD;;AAED;;;;;AAKO,UAAWw6C,iBAAX,CAA8Bx6C,MAA9B,EAAsC;AAC3C,QAAM,wBAAU5Q,YAAYsoD,kBAAtB,EAA0C+E,WAAWjC,iBAArD,EAAwEx6C,MAAxE,CAAN;AACD;;AAED;;;;;AAKO,UAAWs8C,mBAAX,CAAgCt8C,MAAhC,EAAwC;AAC7C,QAAM,wBAAUioC,2BAAV,EAAyByU,SAASC,cAAlC,EAAkD38C,MAAlD,CAAN;AACD;;AAED;;;;;AAKO,UAAWu8C,qBAAX,CAAkCv8C,MAAlC,EAA0C;AAC/C,QAAM,wBAAUmoC,6BAAV,EAA2BuU,SAASE,gBAApC,EAAsD58C,MAAtD,CAAN;AACD;;AAED;;;;;;;;;;;AAWO,UAAWw8C,YAAX,CAAyBx8C,MAAzB,EAAiC;AACtC;AACA,QAAMrV,QAAQ,MAAM,qBAAOk+C,mBAAP,EAAiB,QAAjB,CAApB;AACA;AACA;AACA,QAAM,mBAAK6T,SAASC,cAAd,EAA8B38C,MAA9B,EAAsC,EAAE9P,SAAS,EAAE2sD,QAAQlyD,KAAV,EAAX,EAAtC,CAAN;AACD,C;;;;;;;;;;;;;QCvFiBgyD,c,GAAAA,c;QAgBAC,gB,GAAAA,gB;;AAxBlB;;AAEA;;;;;;AAMO,UAAWD,cAAX,CAA2B38C,MAA3B,EAAmCjV,MAAnC,EAA2C;AAChD;AACA,MAAIA,OAAOmF,OAAP,CAAe2sD,MAAnB,EAA2B;AACzB,UAAM,mBAAK,CAAC78C,OAAOgpC,IAAR,EAAc,UAAd,CAAL,EAAgCj+C,OAAOmF,OAAP,CAAe2sD,MAA/C,CAAN;AACA,UAAMjT,UAAU,MAAM,mBAAK,CAAC5pC,OAAOgpC,IAAR,EAAc,YAAd,CAAL,CAAtB;;AAEA,UAAM,kBAAIY,QAAQ9sC,GAAR,CAAYxS,UAAU,mBAAK,CAACA,MAAD,EAAS,UAAT,CAAL,EAA2BS,OAAOmF,OAAP,CAAe2sD,MAA1C,CAAtB,CAAJ,CAAN;AACD;AACF;;AAED;;;;;;AAnBA;AAyBO,UAAWD,gBAAX,CAA6B58C,MAA7B,EAAqCjV,MAArC,EAA6C;AAClD;AACA,MAAIA,OAAOmF,OAAP,CAAe2sD,MAAnB,EAA2B;AACzB,UAAM,mBAAK,CAAC78C,OAAOgpC,IAAR,EAAc,YAAd,CAAL,EAAkCj+C,OAAOmF,OAAP,CAAe2sD,MAAjD,CAAN;AACA,UAAMjT,UAAU,MAAM,mBAAK,CAAC5pC,OAAOgpC,IAAR,EAAc,YAAd,CAAL,CAAtB;;AAEA,UAAM,kBAAIY,QAAQ9sC,GAAR,CAAYxS,UAAU,mBAAK,CAACA,MAAD,EAAS,YAAT,CAAL,EAA6BS,OAAOmF,OAAP,CAAe2sD,MAA5C,CAAtB,CAAJ,CAAN;AACD;AACF,C;;;;;;;;;;;;;QChBiB9C,Y,GAAAA,Y;QA+BAE,Y,GAAAA,Y;QAgCAN,U,GAAAA,U;QAuBAE,Y,GAAAA,Y;QAuBAW,iB,GAAAA,iB;;AA7HlB;;AAGA;;AAGA;;AACA;;AAFA;AANA;AAUA,MAAM5wD,MAAM0F,iBAAWC,SAAX,CAAqB,OAArB,CAAZ;;AAEA;;;;;;;AATA;AAcO,UAAWwqD,YAAX,CAAyB/5C,MAAzB,EAAiCjV,MAAjC,EAAyC;AAC9C,QAAM,EAAEsvD,QAAF,EAAYpV,QAAZ,EAAsB6X,SAAtB,KAAoC/xD,OAAOmF,OAAjD;AACAtG,MAAI4G,IAAJ,CAAU,iCAAgCy0C,QAAS,GAAnD,EAAuDoV,QAAvD;;AAEA;AACA,QAAM3uC,SAAS,MAAM,mBAAK,CAAC1L,OAAOijB,KAAR,EAAe,WAAf,CAAL,EAAkCo3B,QAAlC,CAArB;AACA,QAAM0C,iBAAiBrxC,OAAO9iB,MAAP,CAAcq6B,SAAS,CAAC,qBAAYA,KAAZ,CAAxB,CAAvB;;AAEA;AACA,QAAM,kBAAI85B,eAAejgD,GAAf,CAAmBmmB,SAAS,mBAAK,CAACA,KAAD,EAAQ,UAAR,CAAL,EAA0BgiB,QAA1B,EAAoC6X,SAApC,CAA5B,CAAJ,CAAN;;AAEAlzD,MAAI4G,IAAJ,CACE,8BADF,EAEEusD,eAAejgD,GAAf,CAAmBmmB,SAASA,MAAMzZ,EAAlC,CAFF;AAIA;AACA,QAAM,kBACJutC,sBAAaiD,kBAAb,CACE+C,eAAejgD,GAAf,CAAmBmmB,SAASA,MAAMzZ,EAAlC,CADF,EAEE;AACEy7B;AADF,GAFF,CADI,CAAN;AAQD;;AAED;;;;;AAKO,UAAWgV,YAAX,CAAyBj6C,MAAzB,EAAiCjV,MAAjC,EAAyC;AAC9C,QAAM,EAAEsvD,QAAF,EAAYpV,QAAZ,KAAyBl6C,OAAOmF,OAAtC;AACAtG,MAAI4G,IAAJ,CAAU,kCAAiCy0C,QAAS,GAApD,EAAwDoV,QAAxD;;AAEA;AACA,QAAM7oB,YAAY,MAAM,mBAAK,CAACxxB,OAAOijB,KAAR,EAAe,WAAf,CAAL,CAAxB;AACA,QAAMvX,SAAS8lB,UAAU5oC,MAAV,CAAiBq6B,SAASo3B,SAASvpD,QAAT,CAAkBmyB,MAAMzZ,EAAxB,CAA1B,CAAf;;AAEA;AACA,QAAM,kBAAIkC,OAAO5O,GAAP,CAAWmmB,SAAS,mBAAK,CAACA,KAAD,EAAQ,YAAR,CAAL,EAA4BgiB,QAA5B,CAApB,CAAJ,CAAN;;AAEAr7C,MAAI4G,IAAJ,CACE,6BADF,EAEEkb,OAAO5O,GAAP,CAAWmmB,SAASA,MAAMzZ,EAA1B,CAFF;AAIA;AACA,QAAM,kBACJutC,sBAAamD,kBAAb,CACExuC,OAAO5O,GAAP,CAAWmmB,SAASA,MAAMzZ,EAA1B,CADF,EAEE;AACEy7B;AADF,GAFF,CADI,CAAN;AAQD;;AAED;;;;;;AAMO,UAAW0U,UAAX,CAAuB35C,MAAvB,EAA+BjV,MAA/B,EAAuC;AAC5CnB,MAAI4G,IAAJ,CAAS,kBAAT,EAA6BzF,OAAOmF,OAApC;AACA;AACA,QAAMshC,YAAY,MAAM,mBAAK,CAACxxB,OAAOijB,KAAR,EAAe,WAAf,CAAL,CAAxB;AACA,QAAMvX,SAAS8lB,UAAU5oC,MAAV,CAAiBq6B,SAASl4B,OAAOmF,OAAP,CAAeY,QAAf,CAAwBmyB,MAAMzZ,EAA9B,CAA1B,CAAf;;AAEA;AACA,QAAM,kBAAIkC,OAAO5O,GAAP,CAAWmmB,SAAS,mBAAK,CAACA,KAAD,EAAQ,MAAR,CAAL,CAApB,CAAJ,CAAN;;AAEAr5B,MAAI4G,IAAJ,CACE,2BADF,EAEEkb,OAAO5O,GAAP,CAAWmmB,SAASA,MAAMzZ,EAA1B,CAFF;AAIA;AACA,QAAM,kBAAIutC,sBAAa6C,gBAAb,CAA8BluC,OAAO5O,GAAP,CAAWmmB,SAASA,MAAMzZ,EAA1B,CAA9B,CAAJ,CAAN;AACD;;AAED;;;;;;AAMO,UAAWqwC,YAAX,CAAyB75C,MAAzB,EAAiCjV,MAAjC,EAAyC;AAC9CnB,MAAI4G,IAAJ,CAAS,oBAAT,EAA+BzF,OAAOmF,OAAtC;;AAEA;AACA,QAAMshC,YAAY,MAAM,mBAAK,CAACxxB,OAAOijB,KAAR,EAAe,WAAf,CAAL,CAAxB;AACA,QAAMvX,SAAS8lB,UAAU5oC,MAAV,CAAiBq6B,SAASl4B,OAAOmF,OAAP,CAAeY,QAAf,CAAwBmyB,MAAMzZ,EAA9B,CAA1B,CAAf;;AAEA;AACA,QAAM,kBAAIkC,OAAO5O,GAAP,CAAWmmB,SAAS,mBAAK,CAACA,KAAD,EAAQ,QAAR,CAAL,CAApB,CAAJ,CAAN;;AAEAr5B,MAAI4G,IAAJ,CACE,6BADF,EAEEkb,OAAO5O,GAAP,CAAWmmB,SAASA,MAAMzZ,EAA1B,CAFF;AAIA;AACA,QAAM,kBAAIutC,sBAAa+C,kBAAb,CAAgCpuC,OAAO5O,GAAP,CAAWmmB,SAASA,MAAMzZ,EAA1B,CAAhC,CAAJ,CAAN;AACD;;AAED;;;;;AAKO,UAAWgxC,iBAAX,CAA8Bx6C,MAA9B,EAAsCjV,MAAtC,EAA8C;AACnD;AACA,MAAI;AACF,UAAM0pD,UAAU,MAAM,mBAAK,CAACz0C,OAAOy0C,OAAR,EAAiB,2BAAjB,CAAL,EAAoD1pD,OAAOmF,OAA3D,CAAtB;;AAEA,QAAIukD,QAAQxpD,KAAZ,EAAmB;AACjB,YAAMwpD,OAAN;AACD,KAFD,MAEO;AACL7qD,UAAI4G,IAAJ,CAAS,mCAAT,EAA8CikD,OAA9C;AACA,YAAM,kBAAIC,uBAAcwE,sBAAd,CAAqC,EAAEzE,OAAF,EAArC,CAAJ,CAAN;AACD;AACF,GATD,CASE,OAAOxpD,KAAP,EAAc;AACdrB,QAAI4G,IAAJ,CAAU,iDAAgDvF,MAAM4E,OAAQ,GAAxE;AACA,UAAM,kBAAI6kD,uBAAcwE,sBAAd,CAAqC,EAAEjuD,KAAF,EAArC,CAAJ,CAAN;AACD;AACF,C;;;;;;;;;;;;;AC7ID;;;;;AAKO,MAAM67C,gCAAY;AACvBkW,SAAO,OADgB;AAEvBpU,SAAO,OAFgB;AAGvB3B,QAAM,MAHiB;AAIvB0B,QAAM,MAJiB;AAKvBD,SAAO,OALgB;AAMvBD,UAAQ;;AAGV;;;;;AATyB,CAAlB,CAcA,MAAMwU,oCAAc;AACzBD,SAAO,CADkB;AAEzBpU,SAAO,CAFkB;AAGzB3B,QAAM,CAHmB;AAIzB0B,QAAM,CAJmB;AAKzBD,SAAO,CALkB;AAMzBD,UAAQ;;AAGV;;;;;AAT2B,CAApB,CAcA,MAAMyU,kCAAa;AACxB;AACAC,SAAOrW,UAAUkW,KAFO;AAGxBrnD,SAAOmxC,UAAU8B,KAHO;AAIxBp4C,QAAMs2C,UAAUG,IAJQ;AAKxBjxB,QAAM8wB,UAAU6B,IALQ;AAMxB19C,SAAO67C,UAAU4B,KANO;AAOxB;AACA9+C,OAAKk9C,UAAU8B,KARS;AASxBj/C,SAAOm9C,UAAU8B,KATO;AAUxB5+C,YAAU88C,UAAU8B,KAVI;AAWxBl/C,kBAAgBo9C,UAAU8B;;AAG5B;;;;AAd0B,CAAnB,CAkBA,MAAMwU,gCAAYtW,UAAU8B,KAA5B,C;;;;;;;;;;;;;;;ACnDP;;;;AACA;;;;AAEA;;;;AAIA;kBACeyU,oB;;AAEf;;AACO,MAAMvW,gCAAYwW,oBAAlB,C;;;;;;;;;;;;;kBCLiBC,iB;AANxB;;;;;;AAMe,SAASA,iBAAT,CAA4BlX,KAA5B,EAAmC;AAChD;AACA,QAAM,EAAEp8C,SAAF,EAAaU,KAAb,EAAoBirC,MAApB,KAA+ByQ,KAArC;AACA,MAAI,EAAE3qC,MAAF,KAAa2qC,KAAjB;;AAEA;AACA;AACA,QAAMmX,UAAU5nB,OAAOpsB,EAAP,IAAaosB,OAAOpsB,EAAP,CAAU7iB,MAAV,GAAmB,CAAhC,GAAoCivC,OAAOpsB,EAAP,CAAU+nC,SAAV,CAAoB,CAApB,EAAuB,CAAvB,CAApC,GAAgE3b,OAAOpsB,EAAvF;AACA,QAAMi0C,YAAYD,UAAW,GAAE5nB,OAAOxrC,IAAK,IAAGozD,OAAQ,EAApC,GAAwC5nB,OAAOxrC,IAAjE;;AAEA,QAAMk8C,UAAW,GAAEr8C,SAAU,MAAKwzD,SAAU,MAAK9yD,KAAM,EAAvD;;AAEA;AACA,QAAM,CAACf,GAAD,EAAM,GAAG8zD,KAAT,IAAkBrX,MAAMG,QAA9B;;AAEA;AACA;AACA,MAAI9qC,OAAO5K,QAAP,CAAgB,MAAhB,CAAJ,EAA6B;AAC3B4K,aAAS,OAAT;AACD;;AAEDlP,UAAQkP,MAAR,EAAiB,GAAE4qC,OAAQ,MAAK18C,GAAI,EAApC,EAAuC,GAAG8zD,KAA1C;AACD,C;;;;;;;;;;;;;;;;;;;;;;kBCXuBL,a;;AAjBxB;;;;AACA;;;;AACA;;AACA;;;;AAEA,MAAM1T,cAAc,sBAAO,SAAP,CAApB;;AAEA;;;;;;;;;;AAUe,SAAS0T,aAAT,CAAwBvuD,UAAU,EAAlC,EAAsC;AACnD,QAAM86C,UAAU,EAAhB;;AAEA;;;;;;AAMA,QAAM+T,WAAW;AACf,KAAChU,WAAD,GAAe;AACbta,eAASvgC,QAAQugC,OAAR,GAAkB,8BAAavgC,QAAQugC,OAArB,CAAlB,GAAkDkuB,oBAD9C;AAEb5yD,aAAOmE,QAAQnE,KAAR,GAAgB,4BAAWmE,QAAQnE,KAAnB,CAAhB,GAA4Cm8C,qBAAUG;AAFhD;;AAMjB;;;;;;;;AAPiB,GAAjB,CAeA,SAAS13C,SAAT,CAAoBnF,IAApB,EAA0Bof,KAAK,EAA/B,EAAmC;AACjCA,SAAKrf,OAAOqf,EAAP,CAAL;;AAEA;AACA,UAAMo0C,aAAap0C,KAAM,GAAEpf,IAAK,IAAGof,EAAG,EAAnB,GAAuBpf,IAA1C;;AAEA,QAAIE,SAASs/C,QAAQgU,UAAR,CAAb;AACA;AACA,QAAI,CAACtzD,MAAL,EAAa;AACX;AACA,YAAMsrC,SAAS,EAAExrC,IAAF,EAAQof,EAAR,EAAY/S,MAAMmnD,UAAlB,EAAf;AACA,YAAM9uD,UAAU;AACdnE,eAAOk+C,SAASz+C,IAAT,CADO;AAEdilC,iBAASya,WAAW1/C,IAAX;AAFK,OAAhB;;AAKAE,eAAS,sBAAasrC,MAAb,EAAqB9mC,OAArB,CAAT;;AAEA;AACA86C,cAAQgU,UAAR,IAAsBtzD,MAAtB;AACD;;AAED,WAAOA,MAAP;AACD;;AAED;;;;;;AAMA,WAAS4+C,UAAT,CAAqB9+C,IAArB,EAA2B;AACzB,QAAIA,IAAJ,EAAU;AACR,aAAO,sBAAcw/C,OAAd,EAAuBhhD,MAAvB,CAA8B0B,UAAUA,OAAOF,IAAP,KAAgBA,IAAxD,CAAP;AACD,KAFD,MAEO;AACL,aAAO,sBAAcw/C,OAAd,CAAP;AACD;AACF;;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA,WAAS/C,QAAT,CAAmBz8C,IAAnB,EAAyBO,KAAzB,EAAgC;AAC9B;AACA;AACA,QAAIA,UAAUkM,SAAd,EAAyB;AACvBlM,cAAQP,IAAR;AACAA,aAAOu/C,WAAP;AACD;;AAED;AACA,QAAI,CAACgU,SAASvzD,IAAT,CAAL,EAAqB;AACnBuzD,eAASvzD,IAAT,IAAiB,EAAjB;AACD;;AAED;AACAuzD,aAASvzD,IAAT,EAAeO,KAAf,GAAuB,4BAAWA,KAAX,CAAvB;AACD;;AAED;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA,WAASk+C,QAAT,CAAmBz+C,IAAnB,EAAyB;AACvB;AACA;AACAA,WAAOA,QAAQu/C,WAAf;;AAEA,WAAQgU,SAASvzD,IAAT,KAAkBuzD,SAASvzD,IAAT,EAAeO,KAAlC,IAA4CgzD,SAAShU,WAAT,EAAsBh/C,KAAzE;AACD;;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA,WAASg8C,UAAT,CAAqBv8C,IAArB,EAA2BilC,OAA3B,EAAoC;AAClC;AACA;AACA,QAAI,OAAOjlC,IAAP,KAAgB,UAAhB,IAA8BilC,YAAYx4B,SAA9C,EAAyD;AACvDw4B,gBAAUjlC,IAAV;AACAA,aAAOu/C,WAAP;AACD;;AAED;AACA,QAAI,CAACgU,SAASvzD,IAAT,CAAL,EAAqB;AACnBuzD,eAASvzD,IAAT,IAAiB,EAAjB;AACD;;AAED;AACAuzD,aAASvzD,IAAT,EAAeilC,OAAf,GAAyB,8BAAaA,OAAb,CAAzB;AACD;;AAED;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA,WAASya,UAAT,CAAqB1/C,IAArB,EAA2B;AACzB;AACA;AACAA,WAAOA,QAAQu/C,WAAf;;AAEA,WAAQgU,SAASvzD,IAAT,KAAkBuzD,SAASvzD,IAAT,EAAeilC,OAAlC,IAA8CsuB,SAAShU,WAAT,EAAsBta,OAA3E;AACD;;AAED,SAAO;AACL9/B,aADK;AAEL25C,cAFK;AAGLrC,YAHK;AAILgC,YAJK;AAKLlC,cALK;AAMLmD;AANK,GAAP;AAQD,C;;;;;;;;;;;;;;;;;;kBCrPuBn8C,Y;;AAbxB;;AACA;;AACA;;;;;;AAEA;;;;;;;;;AASe,SAASA,YAAT,CAAuBioC,MAAvB,EAA+B9mC,UAAU,EAAzC,EAA6C;AAC1D;AACA,QAAMnE,QAAQ,4BAAWmE,QAAQnE,KAAnB,CAAd;AACA,QAAM0kC,UAAU,8BAAavgC,QAAQugC,OAArB,CAAhB;;AAEA;;;;;;;AAOA,QAAM/kC,SAAS;AACbsrC,UADa;AAEbjrC,SAFa;AAGb0kC;;AAGF;;;;;;;;AANe,GAAf,CAcA,SAASwuB,OAAT,CAAkBniD,MAAlB,EAA0BqrC,QAA1B,EAAoC+W,WAApC,EAAiD;AAC/C;;;AAGA,WAAO,UAAU,GAAG1uC,IAAb,EAAmB;AACxB;AACA,YAAM2uC,YAAYd,uBAAYlW,QAAZ,KAAyBkW,uBAAY3yD,OAAOK,KAAnB,CAA3C;AACA;AACA,UAAI,CAACozD,SAAL,EAAgB;AACd;AACD;;AAED;AACA,YAAM1X,mCAEDyX,WAFC;AAGJ;AACApiD,cAJI;AAKJzR,mBAAWyC,KAAKD,GAAL,EALP;AAMJ9B,eAAOo8C,QANH;AAOJnR,gBAAQtrC,OAAOsrC,MAPX;AAQJ;AACA4Q,kBAAU,CAAC,GAAGp3B,IAAJ;AATN,QAAN;;AAYA9kB,aAAO+kC,OAAP,CAAegX,KAAf;AACD,KAtBD;AAuBD;;AAED;;;;;;;;;;AAUA,WAASQ,QAAT,CAAmBl8C,KAAnB,EAA0B;AACxBL,WAAOK,KAAP,GAAe,4BAAWA,KAAX,CAAf;AACD;;AAED;;;;;;;;;AASA,WAASk+C,QAAT,GAAqB;AACnB,WAAOv+C,OAAOK,KAAd;AACD;;AAED;;;;;;;;;;;;;AAaA,WAASg8C,UAAT,CAAqBtX,OAArB,EAA8B;AAC5B/kC,WAAO+kC,OAAP,GAAiB,8BAAaA,OAAb,CAAjB;AACD;;AAED;;;;;;;;;AASA,WAASya,UAAT,GAAuB;AACrB,WAAOx/C,OAAO+kC,OAAd;AACD;;AAED,QAAM35B,MAAM;AACVo0C,cADU;AAEVnD,cAFU;AAGVkC,YAHU;AAIVhC,YAJU;AAKV,QAAIz8C,IAAJ,GAAY;AACV,aAAOE,OAAOsrC,MAAP,CAAcxrC,IAArB;AACD,KAPS;AAQV,QAAIof,EAAJ,GAAU;AACR,aAAOlf,OAAOsrC,MAAP,CAAcpsB,EAArB;AACD,KAVS;AAWV,QAAI/S,IAAJ,GAAY;AACV,aAAOnM,OAAOsrC,MAAP,CAAcn/B,IAArB;AACD;AAbS,GAAZ;;AAgBA;AACA,OAAK,MAAMiF,MAAX,IAAqBwhD,qBAArB,EAAiC;AAC/BxnD,QAAIgG,MAAJ,IAAcmiD,QAAQniD,MAAR,EAAgBwhD,sBAAWxhD,MAAX,CAAhB,CAAd;AACD;;AAED;AACA;AACA;AACA,QAAMsiD,UAAU,CAACnuD,OAAD,EAAUysC,IAAV,KAAmBuhB,QAAQvhB,KAAKgH,KAAb,EAAoB8Z,oBAApB,EAA+B,EAAEa,OAAO3hB,IAAT,EAA/B,EAAgDzsC,OAAhD,CAAnC;AACA,QAAMquD,WAAW,CAACruD,OAAD,EAAUysC,IAAV,KAAmBuhB,QAAQ,MAAR,EAAgB/W,qBAAU6B,IAA1B,EAAgC,EAAEsV,OAAO3hB,IAAT,EAAhC,EAAiDzsC,OAAjD,CAApC;AACA,QAAMouD,QAAQ,qBAAYD,OAAZ,EAAqBE,QAArB,CAAd;;AAEA,oCACKxoD,GADL,EAEKuoD,KAFL;AAID,C;;;;;;;;;;;;;kBClJuBE,W;;AAXxB;;AAEA;;;;;;;;;AASe,SAASA,WAAT,CAAsBv0D,GAAtB,EAA2BosB,IAA3B,EAAiC;AAC9C;AACA;AACA,gCAAapsB,GAAb;AACA,gCAAaosB,IAAb;;AAEA;;;;AAIA,QAAMooC,SAAS,EAAf;;AAEA;;;;;;AAMA,WAASxW,IAAT,CAAenxC,IAAf,EAAqB;AACnB,UAAMhK,MAAMC,KAAKD,GAAL,EAAZ;AACA;AACA,UAAM6vC,OAAO;AACXgH,aAAO,MADI;AAEX7sC;AAFW,KAAb;;AAKA,QAAI2nD,OAAO31D,cAAP,CAAsBgO,IAAtB,CAAJ,EAAiC;AAC/B6lC,WAAKlY,KAAL,GAAag6B,OAAO3nD,IAAP,CAAb;AACAuf,WAAM,SAAQvf,IAAK,mBAAnB,EAAuC6lC,IAAvC;AACD,KAHD,MAGO;AACL;AACA8hB,aAAO3nD,IAAP,IAAehK,GAAf;;AAEA6vC,WAAKlY,KAAL,GAAa33B,GAAb;AACA7C,UAAK,SAAQ6M,IAAK,WAAlB,EAA8B6lC,IAA9B;AACD;AACF;;AAED;;;;;AAKA,WAAS+hB,OAAT,CAAkB5nD,IAAlB,EAAwB;AACtB,UAAMhK,MAAMC,KAAKD,GAAL,EAAZ;AACA;AACA,UAAM6vC,OAAO;AACXgH,aAAO,SADI;AAEX7sC,UAFW;AAGX2tB,aAAOg6B,OAAO3nD,IAAP;AAHI,KAAb;;AAMA,QAAI2nD,OAAO31D,cAAP,CAAsBgO,IAAtB,CAAJ,EAAiC;AAC/B,YAAM2tB,QAAQg6B,OAAO3nD,IAAP,CAAd;AACA;AACA,aAAO2nD,OAAO3nD,IAAP,CAAP;;AAEA,YAAM6nD,UAAU7xD,MAAM23B,KAAtB;AACAkY,WAAK7wB,GAAL,GAAWhf,GAAX;AACA6vC,WAAKgiB,OAAL,GAAeA,OAAf;;AAEA10D,UAAK,SAAQ6M,IAAK,kBAAiB6nD,OAAQ,KAA3C,EAAiDhiB,IAAjD;AACD,KAVD,MAUO;AACLtmB,WAAM,SAAQvf,IAAK,wBAAnB,EAA4C6lC,IAA5C;AACD;AACF;;AAED;;;;;;AAMA,WAAS0hB,OAAT,CAAkBvnD,IAAlB,EAAwB;AACtB,UAAMhK,MAAMC,KAAKD,GAAL,EAAZ;AACA;AACA,UAAM6vC,OAAO;AACXgH,aAAO,SADI;AAEX7sC,UAFW;AAGX2tB,aAAOg6B,OAAO3nD,IAAP;AAHI,KAAb;;AAMA,QAAI2nD,OAAO31D,cAAP,CAAsBgO,IAAtB,CAAJ,EAAiC;AAC/B,YAAM6nD,UAAU7xD,MAAM2xD,OAAO3nD,IAAP,CAAtB;AACA6lC,WAAKtkC,KAAL,GAAavL,GAAb;AACA6vC,WAAKgiB,OAAL,GAAeA,OAAf;;AAEA10D,UAAK,SAAQ6M,IAAK,cAAa6nD,OAAQ,YAAvC,EAAoDhiB,IAApD;AACD,KAND,MAMO;AACLtmB,WAAM,SAAQvf,IAAK,wBAAnB,EAA4C6lC,IAA5C;AACD;AACF;;AAED,SAAO;AACLsL,QADK;AAELyW,WAFK;AAGLL;AAHK,GAAP;AAKD,C;;;;;;;;;;;;;QCpGeO,U,GAAAA,U;QAoBAC,Y,GAAAA,Y;;AA7BhB;;AAEA;;;;;;;AAOO,SAASD,UAAT,CAAqB5zD,KAArB,EAA4B;AACjC;AACA,QAAM8zD,aAAa9zD,SAASA,MAAMoS,WAAf,IAA8BpS,MAAMoS,WAAN,EAAjD;;AAEA;AACA,MAAI0hD,cAAc3X,qBAAU2X,UAAV,CAAlB,EAAyC;AACvC,WAAO3X,qBAAU2X,UAAV,CAAP;AACD,GAFD,MAEO;AACL,UAAM,IAAIzqC,KAAJ,CAAU,0CAAV,CAAN;AACD;AACF;;AAED;;;;;;;;AAQO,SAASwqC,YAAT,CAAuBnvB,OAAvB,EAAgC;AACrC,MAAIA,WAAW,OAAOA,OAAP,KAAmB,UAAlC,EAA8C;AAC5C,WAAOA,OAAP;AACD,GAFD,MAEO;AACL,UAAM,IAAIrb,KAAJ,CAAU,yCAAV,CAAN;AACD;AACF,C;;;;;;;;ACnCD;AAAA;AACA;AACA;AACA;AACA;;AAEA,eAAe,SAAS;AACxB;AACA;;AAEA;AACA;AACA,sBAAsB;;AAEtB;AACA;;AAEe,0EAAW,E;;;;;;;;ACjB1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwC;AACA;AACA;;;;;;;;;ACFxC;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;;AAElD;;AAEA,mBAAmB,gBAAgB;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa,cAAc;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa,cAAc;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA,aAAa,mBAAmB;AAChC;AACA;;AAEA;;AAEA,aAAa,aAAa;AAC1B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEe,kEAAG,E;;;;;;;;ACzNlB;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;;AAEhB;AACf;AACA;AACA;;AAEA;AACA,C;;;;;;;;ACdA;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,kDAAkD;;AAElD;;AAEA,mBAAmB,gBAAgB;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,OAAO;AACxB;;AAEA,mBAAmB,QAAQ;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,OAAO;AACxB;;AAEA,mBAAmB,QAAQ;AAC3B;AACA;;AAEA,oBAAoB,QAAQ;AAC5B;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,QAAQ;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEe,mEAAI,E;;;;;;;;AC1FnB;AAAA;AAAA;AAA2B;AACgB;AAC3C;AACA;AACA;;AAEA;;AAEA,cAAc;;;AAGd;AACA,mBAAmB;;AAEnB;AACA;AACA;AACA;AACA;AACA,+EAA+E;AAC/E;AACA;;AAEA;AACA,sDAAsD,+CAAG;;AAEzD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;AAGA,iFAAiF;AACjF;;AAEA,2EAA2E;;AAE3E,6DAA6D;;AAE7D;AACA;AACA,GAAG;AACH;;;AAGA;AACA;AACA,GAAG;;;AAGH;AACA;AACA;;AAEA;AACA;AACA,uBAAuB;;AAEvB,0BAA0B;;AAE1B;AACA;AACA;AACA;AACA,qBAAqB;;AAErB;AACA;AACA,sBAAsB;;AAEtB,mCAAmC;;AAEnC,6BAA6B;;AAE7B,iCAAiC;;AAEjC,2BAA2B;;AAE3B,iBAAiB,OAAO;AACxB;AACA;;AAEA,qBAAqB,+DAAW;AAChC;;AAEe,iEAAE,E;;;;;;;;AC9FjB;AAAA;AAAA;AAA2B;AACA;AAC3B,SAAS,uDAAG,aAAa,+CAAG;AACb,iEAAE,E;;;;;;;;ACHjB;AAAA;AAAA;AAAA;AAA2C;;AAE3C;AACA;AACA;AACA,4BAA4B,EAAE;AAC9B;AACA,GAAG;AACH;AACA;;AAEA;AACA,0CAA0C;;AAE1C;;AAEA,iBAAiB,gBAAgB;AACjC;AACA;;AAEA;AACA;;AAEO;AACA;AACQ;AACf;AACA;AACA;AACA;AACA;AACA,6IAA6I;;AAE7I;AACA;AACA;;AAEA;AACA,uBAAuB,UAAU;AACjC;AACA;AACA;;AAEA,kBAAkB,+DAAW;AAC7B,IAAI;;;AAGJ;AACA;AACA,GAAG,eAAe;;;AAGlB;AACA;AACA;AACA,C;;;;;;;;ACvDA;AAAA;AAAA;AAA2B;AACgB;;AAE3C;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,+CAA+C,+CAAG,IAAI;;AAEtD;AACA,kCAAkC;;AAElC;AACA,oBAAoB,SAAS;AAC7B;AACA;AACA;;AAEA,gBAAgB,+DAAW;AAC3B;;AAEe,iEAAE,E;;;;;;;;AC1BjB;AAAA;AAAA;AAA2B;AACE;AAC7B,SAAS,uDAAG,aAAa,gDAAI;AACd,iEAAE,E;;;;;;;;;;;;;;ACHjB;;AAEA;;;;;;;;;;;;kBAYe;AACbud,aAAW;AACTpgB,kBAAcutC,gBAAKC,aAAL,CAAmBC;AADxB,GADE;AAIbhpC,kBAAgB8oC,gBAAKG,WAAL,CAAiB3sD,IAJpB;AAKbyjB,kBAAgB,KALH;AAMbmpC,wBAAsBC,4BANT;AAOb1pC,sBAAoB,IAPP;AAQbC,iBAAe,IARF;AASbgQ,sBAAoBA;;AAGtB;;;;;;;;;;AAZe,C;AAsBf,SAASy5B,4BAAT,CAAuC,EAAE/mC,GAAF,EAAOgnC,YAAP,EAAqBpX,IAArB,EAAvC,EAAoE;AAClE,QAAMqX,aAAaD,aAAaE,SAAb,CAAuBj2D,OAAvB,CAA+B,OAA/B,MAA4C,CAAC,CAAhE;AACA,SAAOg2D,UAAP;AACD;;AAED;;;;;;;AAOA,SAAS35B,kBAAT,CAA6B65B,aAA7B,EAA4C;AAC1C,SAAOA,cAAcj9B,IAAd,CAAmBg9B,aAAaA,UAAU90D,IAAV,KAAmB,OAAnD,CAAP;AACD,C;;;;;;;;;;;;;kBCzCuBg1D,c;;AATxB;;AAEA;;;;;;;AAOe,SAASA,cAAT,CAAyBhd,QAAzB,EAAmC;AAChD,QAAM,EAAEid,UAAF,EAAcC,SAAd,EAAyBxvD,MAAzB,EAAiCyvD,QAAjC,EAA2C3c,OAA3C,EAAoDuc,aAApD,EAAmEv1D,GAAnE,KAA2E,IAAjF;;AAEA;;;;;;;;;AASAy1D,aAAWD,cAAX,GAA4B9b,SAAS;AACnC15C,QAAI+L,KAAJ,CACG,uCAAsC7F,OAAO8lB,cAAP,KAA0B8oC,gBAAKG,WAAL,CAAiB3sD,IAAK,KADzF,EAEEoxC,MAAM4b,SAFR;;AAKA;AACA,QAAI5b,MAAM4b,SAAN,KAAoB,IAAxB,EAA8B;AAC5BC,oBAAch4D,IAAd,CAAmBm8C,MAAM4b,SAAzB;AACD;;AAED,QAAIpvD,OAAO8lB,cAAP,KAA0B8oC,gBAAKG,WAAL,CAAiB3sD,IAA/C,EAAqD;AACnD;AACA;AACA,UAAIoxC,MAAM4b,SAAV,EAAqB;AACnB;AACA9c,iBAASkB,KAAT;AACD;AACF,KAPD,MAOO,IAAIA,MAAM4b,SAAN,KAAoB,IAAxB,EAA8B;AACnC;AACA;AACAt1D,UAAI+L,KAAJ,CAAU,yDAAV;;AAEA;AACAwpD,oBAAcx4D,MAAd,GAAuB,CAAvB;;AAEAi8C,cAAQvG,IAAR,CAAa,oBAAb;AACD,KATM,MASA,IAAIvsC,OAAO8lB,cAAP,KAA0B8oC,gBAAKG,WAAL,CAAiBW,IAA/C,EAAqD;AAC1D;AACA;AACA,YAAMC,WAAW3vD,OAAOgvD,oBAAP,CAA4B;AAC3C9mC,aAAKsnC,UAAUI,gBAAV,CAA2B1nC,GADW;AAE3CgnC,sBAAc1b,MAAM4b,SAFuB;AAG3CtX,cAAM2X,SAASI,aAAT;AAHqC,OAA5B,CAAjB;;AAMA,UAAIF,QAAJ,EAAc;AACZ71D,YAAI+L,KAAJ,CAAU,8DAAV;AACA7F,eAAO8lB,cAAP,GAAwB8oC,gBAAKG,WAAL,CAAiB3sD,IAAzC;AACA0wC,gBAAQvG,IAAR,CAAa,oBAAb;AACD,OAJD,MAIO;AACLzyC,YAAI+L,KAAJ,CAAU,4CAAV;AACD;AACF;AACF,GA5CD;;AA8CA,SAAO,IAAP;AACD,C;;;;;;;;;;;;;kBC7DuBiqD,0B;AAPxB;;;;;;;AAOe,SAASA,0BAAT,CAAqCxd,QAArC,EAA+C;AAC5D,QAAM,EAAEid,UAAF,EAAcz1D,GAAd,KAAsB,IAA5B;;AAEAy1D,aAAWO,0BAAX,GAAwC,UAAUtc,KAAV,EAAiB;AACvD15C,QAAI+L,KAAJ,CAAW,iDAAgD0pD,WAAWQ,kBAAmB,EAAzF;AACAzd,aAASkB,KAAT;AACD,GAHD;;AAKA,SAAO,IAAP;AACD,C;;;;;;;;;;;;;kBCPuBwc,yB;;AATxB;;AAEA;;;;;;;AAOe,SAASA,yBAAT,CAAoC1d,QAApC,EAA8C;AAC3D,QAAM,EAAEid,UAAF,EAAcE,QAAd,EAAwB31D,GAAxB,KAAgC,IAAtC;;AAEA;;;;;AAKAy1D,aAAWS,yBAAX,GAAuCxc,SAAS;AAC9C,UAAMyc,iBAAiBzc,MAAM1N,MAAN,CAAaoqB,iBAApC;AACAp2D,QAAI+L,KAAJ,CAAW,qCAAoCoqD,cAAe,GAA9D;;AAEA,QAAIA,mBAAmBrB,gBAAKuB,mBAAL,CAAyBC,SAAhD,EAA2D;AACzDX,eAASn7B,KAAT;AACA;AACD,KAHD,MAGO,IAAI27B,mBAAmBrB,gBAAKuB,mBAAL,CAAyBE,QAAhD,EAA0D;AAC/Dv2D,UAAI+L,KAAJ,CAAW,aAAY4pD,SAASI,aAAT,EAAyB,+BAAhD;AACAJ,eAAS16B,IAAT;AACD;AACD;AACAud,aAASkB,KAAT;AACD,GAbD;;AAeA,SAAO,IAAP;AACD,C;;;;;;;;;;;;;;ACjCD;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;kBAEe;AACb8b,wCADa;AAEbQ,gEAFa;AAGbE,8DAHa;AAIbM,kDAJa;AAKbC,wDALa;AAMbC;AANa,C;;;;;;;;;;;;;kBCASF,mB;AAPxB;;;;;;;AAOe,SAASA,mBAAT,CAA8Bhe,QAA9B,EAAwC;AACrD,QAAM,EAAEid,UAAF,EAAcz1D,GAAd,KAAsB,IAA5B;;AAEAy1D,aAAWe,mBAAX,GAAiC,UAAU9c,KAAV,EAAiB;AAChD15C,QAAI+L,KAAJ,CAAU,wCAAV;AACAysC,aAASkB,KAAT;AACD,GAHD;;AAKA,SAAO,IAAP;AACD,C;;;;;;;;;;;;;kBCTuB+c,sB;AAPxB;;;;;;;AAOe,SAASA,sBAAT,CAAiCje,QAAjC,EAA2C;AACxD,QAAM,EAAEid,UAAF,EAAcz1D,GAAd,KAAsB,IAA5B;;AAEAy1D,aAAWgB,sBAAX,GAAoC,UAAU/c,KAAV,EAAiB;AACnD15C,QAAI+L,KAAJ,CAAW,6CAA4C0pD,WAAWkB,cAAe,EAAjF;AACAne,aAASkB,KAAT;AACD,GAHD;;AAKA,SAAO,IAAP;AACD,C;;;;;;;;;;;;;kBCTuBgd,O;AAPxB;;;;;;;AAOe,SAASA,OAAT,CAAkBle,QAAlB,EAA4B;AACzC,QAAM,EAAEid,UAAF,EAAcmB,YAAd,EAA4B52D,GAA5B,KAAoC,IAA1C;;AAEAy1D,aAAWiB,OAAX,GAAqBhd,SAAS;AAC5B;;;;;;AAMA;AACA,UAAM,EAAErgB,OAAOw9B,WAAT,EAAsBC,OAAtB,KAAkCpd,KAAxC;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAIqd,YAAJ;AACA,QAAID,QAAQ/5D,MAAR,KAAmB,CAAvB,EAA0B;AACxBg6D,qBAAe,IAAIC,WAAJ,CAAgB,CAACH,WAAD,CAAhB,CAAf;AACD,KAFD,MAEO;AACLE,qBAAeD,QAAQ,CAAR,CAAf;AACD;;AAED;AACA,UAAMz9B,QAAQu9B,aAAaK,GAAb,CAAiBJ,WAAjB,EAA8BE,YAA9B,CAAd;;AAEA/2D,QAAI+L,KAAJ,CAAW,iBAAgB8qD,YAAYr3D,IAAK,UAAS65B,MAAMzZ,EAAG,GAA9D;AACA44B,aAASnf,KAAT;AACD,GA3BD;;AA6BA,SAAO,IAAP;AACD,C;;;;;;;;;;;;;;;;;;;;;;;;;;kBCfuBS,I;;AArBxB;;;;AACA;;;;AACA;;;;AAEA;;AACA;;;;AACA;;AAGA;;;;AACA;;;;AAEA;;;;;;;;;;;AAJA;AAZA;;;;AAyBe,SAASA,IAAT,CAAela,EAAf,EAAmB1Z,SAAS,EAA5B,EAAgC0wD,YAAhC,EAA8C;AAC3D,QAAM52D,MAAM0F,iBAAWC,SAAX,CAAqB,MAArB,EAA6Bia,EAA7B,CAAZ;AACA1Z,WAAS,wBAAYpC,gBAAZ,EAAsBoC,MAAtB,CAAT;AACAlG,MAAI4G,IAAJ,CAAS,oBAAT;;AAEA,QAAM+uD,WAAW,yBAAjB;AACA,QAAM3c,UAAU,IAAIke,sBAAJ,EAAhB;;AAEA;AACAl3D,MAAI+L,KAAJ,CAAU,iCAAV,EAA6C7F,OAAOyhC,SAApD;AACA,QAAM8tB,aAAa,IAAI0B,iBAAJ,CAAsBjxD,OAAOyhC,SAA7B,EAAwC,EAAE0b,UAAU,CAAC,EAAE+T,UAAU,IAAZ,EAAD,CAAZ,EAAxC,CAAnB;;AAEA;AACA,QAAMC,2CACDC,iBADC;AAEJ/e,QAAIS,QAAQT,EAAR,CAAWgf,IAAX,CAAgBve,OAAhB,CAFA;AAGJP,SAAKO,QAAQP,GAAR,CAAY8e,IAAZ,CAAiBve,OAAjB,CAHD;AAIJwe,UAAMxe,QAAQwe,IAAR,CAAaD,IAAb,CAAkBve,OAAlB;;AAGR;;;;;;;;;;;;AAPM,IAAN,CAmBA,MAAMpqC,OAAO;AACX6mD,cADW;AAEXC,eAAWzoD,SAFA;AAGX2S,MAHW;AAIX63C,cAAU,IAJC;AAKXvxD,UALW;AAMX0wD,gBANW;AAOX52D,OAPW;AAQX21D,YARW;AASX3c,WATW;AAUXuc,mBAAe;;AAGjB;;;;;;;;;AAba,GAAb,CAsBA3mD,KAAK8mD,SAAL,GAAiB,IAAIgC,KAAJ,CAAU9oD,IAAV,EAAgB;AAC/B;;;;;;;;AAQAguB,SAAK,UAAUoP,MAAV,EAAkB50B,IAAlB,EAAwBugD,QAAxB,EAAkC;AACrC,UAAI,OAAO/oD,KAAK6mD,UAAL,CAAgBr+C,IAAhB,CAAP,KAAiC,UAArC,EAAiD;AAC/C;;;;AAIA,YAAI,oBAAYigD,aAAZ,EAA2BnwD,QAA3B,CAAoCkQ,IAApC,CAAJ,EAA+C;AAC7C;AACA,iBAAOigD,cAAcjgD,IAAd,EAAoBmgD,IAApB,CAAyB3oD,IAAzB,CAAP;AACD,SAHD,MAGO;AACL;AACA,iBAAOA,KAAK6mD,UAAL,CAAgBr+C,IAAhB,EAAsBmgD,IAAtB,CAA2B3oD,KAAK6mD,UAAhC,CAAP;AACD;AACF,OAZD,MAYO,IAAI4B,cAAcjgD,IAAd,KAAuB,OAAOigD,cAAcjgD,IAAd,CAAP,KAA+B,UAA1D,EAAsE;AAC3E;;;;;AAKA;AACA,eAAOigD,cAAcjgD,IAAd,EAAoBmgD,IAApB,CAAyB3oD,IAAzB,CAAP;AACD,OARM,MAQA,IAAIgpD,qBAAWxgD,IAAX,CAAJ,EAAsB;AAC3B;;;;AAIA,YAAI,OAAOwgD,qBAAWxgD,IAAX,CAAP,KAA4B,UAAhC,EAA4C;AAC1C;AACA;AACA,iBAAOwgD,qBAAWxgD,IAAX,EAAiBmgD,IAAjB,CAAsB3oD,IAAtB,GAAP;AACD,SAJD,MAIO;AACL;AACA,iBAAOA,KAAK6mD,UAAL,CAAgBr+C,IAAhB,CAAP;AACD;AACF,OAbM,MAaA,IAAIA,SAAS,YAAT,IAAyBxI,KAAKwI,IAAL,CAA7B,EAAyC;AAC9C;;;;;AAKA,eAAOxI,KAAKwI,IAAL,CAAP;AACD,OAPM,MAOA;AACL;AACA,eAAOxI,KAAK6mD,UAAL,CAAgBr+C,IAAhB,CAAP;AACD;AACF,KAtD8B;;AAwD/B;;;;;;;;;;;AAWAH,SAAK,UAAU+0B,MAAV,EAAkB50B,IAAlB,EAAwB5a,KAAxB,EAA+Bm7D,QAA/B,EAAyC;AAC5C,UAAI9wC,iBAAOzP,IAAP,CAAJ,EAAkB;AAChB;AACA;AACA,eAAOyP,iBAAOzP,IAAP,EAAamgD,IAAb,CAAkB3oD,IAAlB,EAAwBpS,KAAxB,CAAP;AACD,OAJD,MAIO,IAAI4a,SAAS,UAAb,EAAyB;AAC9B;;;;;;;AAOAxI,aAAK6oD,QAAL,GAAgBj7D,KAAhB;AACA,eAAO,IAAP;AACD,OAVM,MAUA;AACL;AACA,eAAO,mBAAYoS,KAAK6mD,UAAjB,EAA6Br+C,IAA7B,EAAmC5a,KAAnC,CAAP;AACD;AACF;AAtF8B,GAAhB,CAAjB;;AAyFA;;;;;;AAMA,OAAK,MAAMq7D,SAAX,IAAwBhxC,gBAAxB,EAAgC;AAC9BjY,SAAK8mD,SAAL,CAAemC,SAAf,IAA4B,MAAM,CAAE,CAApC;AACD;;AAED,SAAOjpD,KAAK8mD,SAAZ;AACD,C;;;;;;;;;;;;;;;;;;kBC7KuBoC,e;;;;AANxB;;;;;;AAMe,SAASA,eAAT,CAA0BxC,SAA1B,EAAqC;AAClD,QAAM,EAAEG,UAAF,EAAcC,SAAd,EAAyB91C,EAAzB,EAA6B5f,GAA7B,KAAqC,IAA3C;AACAA,MAAI4G,IAAJ,CAAS,uBAAT;;AAEA,SAAO,sBAAY,CAACqrC,OAAD,EAAU3wB,MAAV,KAAqB;AACtC,QAAIo0C,UAAUqC,iBAAV,CAA4Bv3D,IAA5B,IAAoCk1D,UAAUqC,iBAAV,CAA4B3pC,GAApE,EAAyE;AACvEqnC,iBACGqC,eADH,CACmBxC,SADnB,EAEG7b,IAFH,CAEQxH,OAFR,EAGG+lB,KAHH,CAGS12C,MAHT;AAID,KALD,MAKO;AACLthB,UAAI4G,IAAJ,CAAS,+DAAT;AACA;AACA0a,aAAO,IAAI8I,KAAJ,CAAW,QAAOxK,EAAG,gEAArB,CAAP;AACD;AACF,GAXM,CAAP;AAYD,C;;;;;;;;;;;;;kBChBuBq4C,Q;AANxB;;;;;;AAMe,SAASA,QAAT,CAAmB5+B,KAAnB,EAA0B;AACvC,QAAM,EAAEo8B,UAAF,EAAcz1D,GAAd,KAAsB,IAA5B;AACAA,MAAI4G,IAAJ,CAAU,cAAayyB,MAAMA,KAAN,CAAY75B,IAAK,SAAxC;;AAEA,MAAI04D,MAAJ;AACA,MAAI;AACFA,aAASzC,WAAWwC,QAAX,CAAoB5+B,MAAMA,KAA1B,EAAiCA,MAAM8+B,SAAN,EAAjC,CAAT;AACD,GAFD,CAEE,OAAOptC,GAAP,EAAY;AACZ;AACA/qB,QAAI4G,IAAJ,CAAU,wBAAuBmkB,IAAI9kB,OAAQ,EAA7C;AACD;AACD;AACA,SAAOiyD,MAAP;AACD,C;;;;;;;;;;;;;kBCfuBniC,K;AAJxB;;;;AAIe,SAASA,KAAT,GAAkB;AAC/B,QAAM,EAAE0/B,UAAF,EAAc71C,EAAd,EAAkBo5B,OAAlB,EAA2Bh5C,GAA3B,KAAmC,IAAzC;AACAA,MAAI4G,IAAJ,CAAS,eAAT;;AAEA6uD,aAAW1/B,KAAX;AACAijB,UAAQvG,IAAR,CAAa,aAAb,EAA4B7yB,EAA5B;AACD,C;;;;;;;;;;;;;;;;;;kBCKuBw4C,Y;;AAfxB;;AAEA;;AACA;;AACA;;;;AAEA;;;;;;;;;AASe,SAASA,YAAT,CAAuBlzD,UAAU,EAAjC,EAAqC;AAClD,QAAM,EAAEuwD,UAAF,EAAcvvD,MAAd,EAAsBuxD,QAAtB,EAAgCz3D,GAAhC,KAAwC,IAA9C;AACAA,MAAI4G,IAAJ,CAAS,wBAAT;;AAEA;AACA;AACA,MAAI,iCAAcV,OAAOyhC,SAAP,CAAiBpgB,YAA/B,CAAJ,EAAkD;AAChD,WAAOriB,QAAQ85B,eAAf;AACD;;AAED,SAAO,sBAAY,CAACiT,OAAD,EAAU3wB,MAAV,KAAqB;AACtCm0C,eACG2C,YADH,CACgBlzD,OADhB,EAEGu0C,IAFH,CAEQl4B,UAAU;AACd,YAAMmB,cAAc,EAApB;;AAEA;;;;AAIAA,kBAAYnlB,IAAZ,CAAiB86D,+BAAjB;;AAEA,UAAInyD,OAAO8lB,cAAP,KAA0B8oC,gBAAKG,WAAL,CAAiBzsD,IAA/C,EAAqD;AACnD;AACAka,oBAAYnlB,IAAZ,CAAiB+6D,0BAAjB;AACD;AACD,UAAIpyD,OAAO6lB,cAAX,EAA2B;AACzB;AACArJ,oBAAYnlB,IAAZ,CAAiBwuB,wBAAjB;AACD;AACD,UAAI7mB,QAAQ85B,eAAZ,EAA6B;AAC3B;AACAtc,oBAAYnlB,IAAZ,CAAiB,oCAAqB2H,QAAQ85B,eAA7B,CAAjB;AACD;AACD,UAAItc,YAAY3lB,MAAZ,GAAqB,CAAzB,EAA4B;AAC1B;AACAwkB,eAAO6M,GAAP,GAAa,2BAAY1L,WAAZ,EAAyBnB,OAAO6M,GAAhC,EAAqC;AAChD5tB,gBAAM+gB,OAAO/gB,IADmC;AAEhD2/B,oBAAU20B,gBAAKyD,QAAL,CAAcx0C,KAFwB;AAGhD0zC,oBAAUA;AAHsC,SAArC,CAAb;AAKD;;AAEDz3D,UAAI4G,IAAJ,CAAS,iCAAT;AACAqrC,cAAQ1wB,MAAR;AACD,KAlCH,EAmCGy2C,KAnCH,CAmCS12C,MAnCT;AAoCD,GArCM,CAAP;AAsCD,C;;;;;;;;;;;;;;;;;;kBChDuBk3C,W;;AAfxB;;AAEA;;AACA;;AACA;;;;AAEA;;;;;;;;;AASe,SAASA,WAAT,CAAsBtzD,UAAU,EAAhC,EAAoC;AACjD,QAAM,EAAEuwD,UAAF,EAAcvvD,MAAd,EAAsBlG,GAAtB,KAA8B,IAApC;AACAA,MAAI4G,IAAJ,CAAS,uBAAT;;AAEA;AACA;AACA,MAAI,iCAAcV,OAAOyhC,SAAP,CAAiBpgB,YAA/B,CAAJ,EAAkD;AAChD,WAAOriB,QAAQ85B,eAAf;AACD;;AAED,SAAO,sBAAY,CAACiT,OAAD,EAAU3wB,MAAV,KAAqB;AACtCm0C,eACG+C,WADH,CACetzD,OADf,EAEGu0C,IAFH,CAEQprB,SAAS;AACb,YAAM3L,cAAc,EAApB;AACA,UAAIxc,OAAO8lB,cAAP,KAA0B8oC,gBAAKG,WAAL,CAAiBzsD,IAA/C,EAAqD;AACnD;AACAka,oBAAYnlB,IAAZ,CAAiB+6D,0BAAjB;AACD;AACD,UAAIpyD,OAAO6lB,cAAX,EAA2B;AACzB;AACArJ,oBAAYnlB,IAAZ,CAAiBwuB,wBAAjB;AACD;AACD,UAAI7mB,QAAQ85B,eAAZ,EAA6B;AAC3B;AACAtc,oBAAYnlB,IAAZ,CAAiB,oCAAqB2H,QAAQ85B,eAA7B,CAAjB;AACD;AACD,UAAItc,YAAY3lB,MAAZ,GAAqB,CAAzB,EAA4B;AAC1B;AACAsxB,cAAMD,GAAN,GAAY,2BAAY1L,WAAZ,EAAyB2L,MAAMD,GAA/B,EAAoC;AAC9C5tB,gBAAM6tB,MAAM7tB,IADkC;AAE9C2/B,oBAAU20B,gBAAKyD,QAAL,CAAcx0C;AAFsB,SAApC,CAAZ;AAID;;AAED/jB,UAAI4G,IAAJ,CAAS,gCAAT;AACAqrC,cAAQ5jB,KAAR;AACD,KA1BH,EA2BG2pC,KA3BH,CA2BS12C,MA3BT;AA4BD,GA7BM,CAAP;AA8BD,C;;;;;;;;;;;;;kBC3CuBm3C,uB;;AAZxB;;AAEA;;;;;;;;;;AAUe,SAASA,uBAAT,CAAkCj5D,IAAlC,EAAwC;AACrD,QAAM,EAAEk2D,SAAF,EAAaxvD,MAAb,KAAwB,IAA9B;;AAEA,MAAI,iCAAcA,OAAOyhC,SAAP,CAAiBpgB,YAA/B,CAAJ,EAAkD;AAChD,UAAMmxC,eAAehD,UAAUiD,eAAV,EAArB;AACA,WAAOD,aAAa1uC,IAAb,CACL4uC,eACEA,YAAYV,MAAZ,CAAmB7+B,KAAnB,IAA4B,IAA5B,IACAu/B,YAAYjB,QADZ,IAEAiB,YAAYjB,QAAZ,CAAqBt+B,KAFrB,IAGAu/B,YAAYjB,QAAZ,CAAqBt+B,KAArB,CAA2B75B,IAA3B,KAAoCA,IAHpC,IAIAo5D,YAAYC,gBANT,CAM0B;AAN1B,KAAP;AAQD;AACF,C;;;;;;;;;;;;;kBCrBuBn2D,Q;AALxB;;;;;AAKe,SAASA,QAAT,GAAqB;AAClC,QAAM,EAAEgzD,SAAF,EAAaxvD,MAAb,EAAqB0Z,EAArB,KAA4B,IAAlC;;AAEA,SAAO;AACLA,MADK;AAEL1Z,YAAQA,MAFH;AAGL4yD,eAAWpD,UAAUI,gBAHhB;AAILa,oBAAgBjB,UAAUiB,cAJrB;AAKL9sC,iBAAa6rC,UAAU7rC,WALlB;AAMLC,kBAAc4rC,UAAU5rC,YANnB;AAOLivC,kBAAcrD,UAAUqD;AAPnB,GAAP;AASD,C;;;;;;;;;;;;;;;;;;kBCXuB36C,Q;;;;AANxB;;;;;;AAMe,SAASA,QAAT,CAAmB+D,OAAnB,EAA4B;AACzC,QAAM,EAAEszC,UAAF,EAAcC,SAAd,EAAyB11D,GAAzB,KAAiC,IAAvC;AACAA,MAAI4G,IAAJ,CAAU,iBAAgBub,UAAU,YAAV,GAAyB,GAAI,EAAvD;AACA;AACA;;AAEA;AACA,MAAIA,OAAJ,EAAa;AACX,WAAO,sBAAY,CAAC8vB,OAAD,EAAU3wB,MAAV,KAAqB;AACtC,YAAM03C,UAAUtD,UAAUuD,UAAV,EAAhB;AACA;AACA,YAAMf,SAASc,QAAQhvC,IAAR,CAAakuC,UAAUA,OAAO7+B,KAAP,CAAazZ,EAAb,KAAoBuC,OAA3C,CAAf;AACA,UAAI+1C,MAAJ,EAAY;AACVA,eACG95C,QADH,GAEGq7B,IAFH,CAEQxH,OAFR,EAGG+lB,KAHH,CAGS12C,MAHT;AAID,OALD,MAKO;AACL,cAAM43C,SAAU,oCAAmC/2C,OAAQ,EAA3D;AACAniB,YAAI4G,IAAJ,CAASsyD,MAAT;AACA53C,eAAO,IAAI8I,KAAJ,CAAU8uC,MAAV,CAAP;AACD;AACF,KAdM,CAAP;AAeD,GAhBD,MAgBO;AACL;AACA,WAAOzD,WAAWr3C,QAAX,EAAP;AACD;AACF,C;;;;;;;;;;;;;;ACjCD;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,MAAMk5C,UAAU;AACdQ,4CADc;AAEdG,8BAFc;AAGdliC,wBAHc;AAIdqiC,sCAJc;AAKdI,oCALc;AAMdC,4DANc;AAOd/1D,8BAPc;AAQd0b,8BARc;AASduzC,oCATc;AAUd5yC,sCAVc;AAWdb,8BAXc;AAYdi7C,oDAZc;AAadC,sDAbc;AAcdC;AAdc,CAAhB;;kBAiBe/B,O;;;;;;;;;;;;;kBC3BS3F,W;AALxB;;;;;AAKe,SAASA,WAAT,CAAsBxvC,OAAtB,EAA+B;AAC5C,QAAM,EAAEszC,UAAF,EAAcC,SAAd,EAAyB11D,GAAzB,KAAiC,IAAvC;AACAA,MAAI4G,IAAJ,CAAU,kBAAiBub,OAAQ,GAAnC;;AAEA,QAAMkX,QAAQq8B,UAAUqD,YAAV,CAAuB/uC,IAAvB,CAA4BqP,SAASA,MAAMzZ,EAAN,KAAauC,OAAlD,CAAd;AACA,MAAI,CAACkX,KAAL,EAAY;AACVr5B,QAAI4G,IAAJ,CAAU,oBAAmBub,OAAQ,wBAArC;AACA;AACD,GAHD,MAGO,IAAIuzC,UAAUiB,cAAV,KAA6B,SAAjC,EAA4C;AACjD32D,QAAI4G,IAAJ,CAAS,sCAAT;AACA;AACD;;AAED;AACA,QAAMsxD,SAASxC,UACZuD,UADY,GAEZj6D,MAFY,CAELk5D,UAAUA,OAAO7+B,KAAP,KAAiB,IAFtB,EAGZrP,IAHY,CAGPkuC,UAAUA,OAAO7+B,KAAP,CAAazZ,EAAb,KAAoBuC,OAHvB,CAAf;AAIAszC,aAAW9D,WAAX,CAAuBuG,MAAvB;AACD,C;;;;;;;;;;;;;;;;;;kBCduBn5C,Y;;AAVxB;;;;AAEA;;;;;;;;AAQe,SAASA,YAAT,CAAuB6a,QAAvB,EAAiC10B,OAAjC,EAA0C;AACvD,QAAM,EAAEwwD,SAAF,EAAaxvD,MAAb,EAAqBlG,GAArB,KAA6B,IAAnC;AACAA,MAAI4G,IAAJ,CAAU,mBAAkB1B,QAAQid,OAAQ,aAAYyX,SAASp6B,IAAK,SAAtE;;AAEA,SAAO,sBAAY,CAACyyC,OAAD,EAAU3wB,MAAV,KAAqB;AACtC,QAAI42C,MAAJ;AACA,QAAI,iCAAchyD,OAAOyhC,SAAP,CAAiBpgB,YAA/B,CAAJ,EAAkD;AAChD;AACA,YAAM+xC,oBAAoB5D,UACvBiD,eADuB,GAEvB3uC,IAFuB,CAElB4uC,eAAeA,YAAYV,MAAZ,CAAmB7+B,KAAnB,IAA4Bu/B,YAAYV,MAAZ,CAAmB7+B,KAAnB,CAAyBzZ,EAAzB,KAAgC1a,QAAQid,OAFjE,CAA1B;;AAIA+1C,eAASoB,oBAAoBA,kBAAkBpB,MAAtC,GAA+CjrD,SAAxD;AACD,KAPD,MAOO;AACLirD,eAASxC,UAAUuD,UAAV,GAAuBjvC,IAAvB,CAA4BkuC,UAAUA,OAAO7+B,KAAP,CAAazZ,EAAb,KAAoB1a,QAAQid,OAAlE,CAAT;AACD;;AAED,QAAI+1C,MAAJ,EAAY;AACVA,aACGn5C,YADH,CACgB6a,QADhB,EAEG6f,IAFH,CAEQxH,OAFR,EAGG+lB,KAHH,CAGS32D,SAAS;AACdrB,YAAI4G,IAAJ,CAAU,4BAA2BvF,MAAM4E,OAAQ,EAAnD;AACAqb,eAAOjgB,KAAP;AACD,OANH;AAOD,KARD,MAQO;AACLrB,UAAI4G,IAAJ,CAAU,iDAAgD1B,QAAQid,OAAQ,GAA1E;AACAb,aAAO,IAAI8I,KAAJ,CAAW,oBAAmBllB,QAAQid,OAAQ,aAA9C,CAAP;AACD;AACF,GAzBM,CAAP;AA0BD,C;;;;;;;;;;;;;kBC5BuBjE,Q;AAZxB;;;;;;;;;;;;AAYe,SAASA,QAAT,CAAmB,EAAE+D,IAAF,EAAQ3hB,WAAW,GAAnB,EAAwB4hB,eAAe,EAAvC,EAAnB,EAAgE,EAAEq3C,QAAF,EAAYp3C,OAAZ,EAAhE,EAAuF;AACpG,QAAM,EAAEuzC,SAAF,EAAa11D,GAAb,KAAqB,IAA3B;AACAA,MAAI4G,IAAJ,CAAS,qBAAT,EAAgCqb,IAAhC;;AAEA,MAAI,CAACyzC,UAAUuD,UAAf,EAA2B;AACzBj5D,QAAI4G,IAAJ,CAAS,oEAAT;AACA,WAAO,KAAP;AACD;AACD,QAAMoyD,UAAUtD,UAAUuD,UAAV,EAAhB;AACA;AACA,MAAI92C,OAAJ,EAAa;AACX,UAAM+1C,SAASc,QAAQhvC,IAAR,CAAakuC,UAAUA,OAAO7+B,KAAP,CAAazZ,EAAb,KAAoBuC,OAA3C,CAAf;AACA,QAAI,CAAC+1C,MAAL,EAAa;AACXl4D,UAAI4G,IAAJ,CAAU,8CAA6Cub,OAAQ,GAA/D;AACA,aAAO,KAAP;AACD;AACDq3C,eAAWtB,MAAX,EAAmBj2C,IAAnB,EAAyB3hB,QAAzB,EAAmC4hB,YAAnC,EAAiDq3C,QAAjD,EAA2Dv5D,GAA3D;AACA,WAAO,IAAP;AACD,GARD,MAQO;AACL,QAAI0S,MAAJ;AACA,SAAK,IAAIvV,IAAI,CAAb,EAAgBA,IAAI67D,QAAQj8D,MAA5B,EAAoCI,GAApC,EAAyC;AACvCuV,eAAS8mD,WAAWR,QAAQ77D,CAAR,CAAX,EAAuB8kB,IAAvB,EAA6B3hB,QAA7B,EAAuC4hB,YAAvC,EAAqDq3C,QAArD,EAA+Dv5D,GAA/D,CAAT;AACA,UAAI0S,MAAJ,EAAY;AACV,eAAO,IAAP;AACD;AACF;;AAED1S,QAAI4G,IAAJ,CAAS,4DAAT;AACA,WAAO,KAAP;AACD;AACF;;AAED;;;;;;;;;;AAUA,SAAS4yD,UAAT,CAAqBtB,MAArB,EAA6Bj2C,IAA7B,EAAmC3hB,QAAnC,EAA6C4hB,YAA7C,EAA2Dq3C,QAA3D,EAAqEv5D,GAArE,EAA0E;AACxE;;;;;;AAMA,WAASy5D,qBAAT,CAAgC/f,KAAhC,EAAuC;AACrC,QAAIA,MAAMz3B,IAAN,KAAe,EAAnB,EAAuB;AACrBjiB,UAAI+L,KAAJ,CAAU,kBAAkB2tC,MAAMz3B,IAAlC;AACD,KAFD,MAEO;AACLjiB,UAAI+L,KAAJ,CAAU,wBAAV;AACD;AACF;;AAED,MAAImsD,OAAOwB,IAAX,EAAiB;AACf,UAAMC,aAAazB,OAAOwB,IAA1B;AACA,QAAIH,QAAJ,EAAc;AACZI,iBAAWC,YAAX,GAA0BL,QAA1B;AACD,KAFD,MAEO;AACLI,iBAAWC,YAAX,GAA0BH,qBAA1B;AACD;AACD,QAAI;AACFE,iBAAWH,UAAX,CAAsBv3C,IAAtB,EAA4B3hB,QAA5B,EAAsC4hB,YAAtC;AACA,aAAO,IAAP;AACD,KAHD,CAGE,OAAO6I,GAAP,EAAY;AACZ/qB,UAAI+L,KAAJ,CAAUgf,IAAI9kB,OAAd;AACA,aAAO,KAAP;AACD;AACF,GAdD,MAcO;AACLjG,QAAI+L,KAAJ,CAAU,gEAAV;AACA,WAAO,KAAP;AACD;AACF,C;;;;;;;;;;;;;;;;;;kBC1EuBotD,mB;;AAbxB;;AAGA;;;;;;AAEA;;;;;;;;AAQe,SAASA,mBAAT,CAA8BU,IAA9B,EAAoC;AACjD,QAAM,EAAEpE,UAAF,EAAcC,SAAd,EAAyBxvD,MAAzB,EAAiC0Z,EAAjC,EAAqCo5B,OAArC,EAA8C2c,QAA9C,EAAwD31D,GAAxD,KAAgE,IAAtE;;AAEA;AACAA,MAAI4G,IAAJ,CAAU,6BAA4BizD,KAAKr5D,IAAK,OAAMk1D,UAAUiB,cAAe,SAA/E;AACA32D,MAAI+L,KAAJ,CAAW,6BAA4B8tD,KAAKr5D,IAAK,GAAjD,EAAqDq5D,KAAKzrC,GAA1D;;AAEA;;;;;;;AAOA,MAAI,CAAC,KAAKqpC,QAAN,IAAkBoC,KAAKr5D,IAAL,KAAc,QAApC,EAA8C;AAC5C,UAAMs5D,YAAYD,KAAKzrC,GAAL,CAAS9D,KAAT,CAAe,sBAAf,CAAlB;AACA,QAAIwvC,SAAJ,EAAe;AACb95D,UAAI+L,KAAJ,CAAW,uBAAsB+tD,UAAU,CAAV,CAAa,GAA9C;AACA,WAAKrC,QAAL,GAAgBqC,UAAU,CAAV,CAAhB;AACD;AACF;;AAED,SAAO,sBAAY,CAAC7nB,OAAD,EAAU3wB,MAAV,KAAqB;AACtC;AACA;AACA;AACA03B,YAAQwe,IAAR,CAAa,oBAAb,EAAmC,MAAM;AACvC,UAAI7B,SAASoE,SAAT,EAAJ,EAA0B;AACxB;AACA;AACA/5D,YAAI+L,KAAJ,CAAW,QAAO4pD,SAASI,aAAT,EAAyB,kDAA3C;AACD;AACD9jB;AACD,KAPD;;AASAwjB,eACG0D,mBADH,CACuBU,IADvB,EAEGpgB,IAFH,CAEQ,MAAM;AACVz5C,UAAI4G,IAAJ,CAAS,qCAAT;AACA5G,UAAI+L,KAAJ,CAAW,gBAAe2pD,UAAUiB,cAAe,GAAnD;;AAEA,UAAIzwD,OAAO8lB,cAAP,KAA0B8oC,gBAAKG,WAAL,CAAiB3sD,IAA/C,EAAqD;AACnD;AACAtI,YAAI+L,KAAJ,CAAU,0CAAV;AACAitC,gBAAQvG,IAAR,CAAa,oBAAb;AACD,OAJD,MAIO;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAunB,mBAAW,MAAM;AACf,cAAItE,UAAUU,iBAAV,KAAgC,UAApC,EAAgD;AAC9C;AACAp2D,gBAAI+L,KAAJ,CAAU,6DAAV;AACAitC,oBAAQvG,IAAR,CAAa,oBAAb;AACD,WAJD,MAIO;AACLzyC,gBAAI+L,KAAJ,CAAW,uCAAsC7F,OAAO8lB,cAAe,IAAvE;AACA;AACA;AACAguC,uBAAW,MAAM;AACf,+CAAkB,IAAlB,EAAwB9zD,OAAOulB,kBAA/B;AACD,aAFD,EAEGvlB,OAAOulB,kBAFV;AAGD;AACF,SAbD,EAaG,EAbH;AAcD;AACF,KAlCH,EAmCGusC,KAnCH,CAmCSjtC,OAAO;AACZ/qB,UAAI4G,IAAJ,CAAS,kCAAT;AACA5G,UAAI+L,KAAJ,CAAW,QAAO6T,EAAG,KAAImL,GAAI,EAA7B;AACA;AACA;AACAzJ,aAAOyJ,GAAP;AACD,KAzCH;AA0CD,GAvDM,CAAP;AAwDD;;AAzFD,S;;;;;;;;;;;;;;;;;;kBCGwBquC,oB;;;;AALxB;;;;;AAKe,SAASA,oBAAT,CAA+BS,IAA/B,EAAqC;AAClD,QAAM,EAAEpE,UAAF,EAAcC,SAAd,EAAyB91C,EAAzB,EAA6B5f,GAA7B,KAAqC,IAA3C;;AAEA;AACAA,MAAI4G,IAAJ,CAAU,8BAA6BizD,KAAKr5D,IAAK,OAAMk1D,UAAUiB,cAAe,SAAhF;AACA32D,MAAI+L,KAAJ,CAAW,8BAA6B8tD,KAAKr5D,IAAK,GAAlD,EAAsDq5D,KAAKzrC,GAA3D;;AAEA;;;;;;;AAOA,MAAI,CAAC,KAAKqpC,QAAN,IAAkBoC,KAAKr5D,IAAL,KAAc,QAApC,EAA8C;AAC5C,UAAMs5D,YAAYD,KAAKzrC,GAAL,CAAS9D,KAAT,CAAe,sBAAf,CAAlB;AACA,QAAIwvC,SAAJ,EAAe;AACb,YAAMG,YAAYH,UAAU,CAAV,MAAiB,QAAjB,GAA4B,SAA5B,GAAwC,QAA1D;AACA95D,UAAI+L,KAAJ,CAAW,uBAAsBkuD,SAAU,0BAAyBH,UAAU,CAAV,CAAa,aAAjF;AACA,WAAKrC,QAAL,GAAgBwC,SAAhB;AACD;AACF;;AAED;AACA;AACA,SAAO,sBAAY,CAAChoB,OAAD,EAAU3wB,MAAV,KAAqB;AACtCm0C,eACG2D,oBADH,CACwBS,IADxB,EAEGpgB,IAFH,CAEQ,MAAM;AACVz5C,UAAI4G,IAAJ,CAAS,sCAAT;AACA5G,UAAI+L,KAAJ,CAAW,gBAAe2pD,UAAUiB,cAAe,GAAnD;AACA1kB;AACD,KANH,EAOG+lB,KAPH,CAOSjtC,OAAO;AACZ/qB,UAAI4G,IAAJ,CAAS,mCAAT;AACA5G,UAAI+L,KAAJ,CAAW,QAAO6T,EAAG,KAAImL,GAAI,EAA7B;AACA;AACA;AACAzJ,aAAOyJ,GAAP;AACD,KAbH;AAcD,GAfM,CAAP;AAgBD,C;;;;;;;;;;;;;kBClCuBsuC,wB;;AAZxB;;AACA;;AACA;;AAEA;;;;;;;;AAQe,SAASA,wBAAT,CAAmCa,eAAnC,EAAoDh1D,UAAU,EAA9D,EAAkE;AAC/E,QAAM,EAAEwwD,SAAF,EAAaxvD,MAAb,EAAqBlG,GAArB,KAA6B,IAAnC;AACAA,MAAI4G,IAAJ,CAAU,oCAAmCszD,eAAgB,GAA7D;;AAEA,MAAI,iCAAch0D,OAAOyhC,SAAP,CAAiBpgB,YAA/B,CAAJ,EAAkD;AAChD,QAAImxC,eAAehD,UAAUiD,eAAV,EAAnB;;AAEA,QAAIzzD,QAAQurD,QAAZ,EAAsB;AACpBiI,qBAAeA,aAAa15D,MAAb,CAAoB45D,eAAe;AAChD,eACE1zD,QAAQurD,QAAR,CAAiBvpD,QAAjB,CAA0B,aAAI,CAAC,QAAD,EAAW,OAAX,EAAoB,IAApB,CAAJ,EAA+B0xD,WAA/B,CAA1B,KACA1zD,QAAQurD,QAAR,CAAiBvpD,QAAjB,CAA0B,aAAI,CAAC,UAAD,EAAa,OAAb,EAAsB,IAAtB,CAAJ,EAAiC0xD,WAAjC,CAA1B,CAFF;AAID,OALc,CAAf;AAMD;;AAED,UAAMuB,WAAW,EAAjB;AACAzB,iBAAat5D,OAAb,CAAqBw5D,eAAe;AAClC,UAAI,CAAC,+CAAwBA,WAAxB,EAAqCsB,eAArC,CAAL,EAA4D;AAC1DC,iBAAS58D,IAAT,CAAcq7D,WAAd;AACD;AACF,KAJD;AAKA,WAAO;AACLv3D,aAAO84D,SAASp9D,MAAT,KAAoB,CADtB;AAELo9D;AAFK,KAAP;AAID,GAtBD,MAsBO;AACLn6D,QAAI4G,IAAJ,CAAS,uEAAT;AACA,WAAO;AACLvF,aAAO;AADF,KAAP;AAGD;AACF,C;;;;;;;;;;;;;;AC5CD;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;kBAEe,EAAEy0D,4CAAF,EAAoBjsC,kCAApB,EAAiCkuC,8CAAjC,EAAoDjuC,0CAApD,EAAkEswC,uCAAlE,EAAmFrB,oCAAnF,E;;;;;;;;;;;;;kBCHSsB,mB;AAJxB;;;;AAIe,SAASA,mBAAT,GAAgC;AAC7C,QAAM,EAAE5E,UAAF,EAAcz1D,GAAd,KAAsB,IAA5B;AACAA,MAAI4G,IAAJ,CAAS,4BAAT;;AAEA,QAAMkyD,YAAYrD,WAAWK,gBAA7B;AACA;;;;;;;AAOA,MAAIgD,aAAaA,UAAU1qC,GAAvB,IAA8B0qC,UAAUt4D,IAA5C,EAAkD;AAChD,WAAOs4D,SAAP;AACD,GAFD,MAEO;AACL,WAAO7rD,SAAP;AACD;AACF,C;;;;;;;;;;;;;kBCjBuB4c,W;AAJxB;;;;AAIe,SAASA,WAAT,GAAwB;AACrC,QAAM,EAAE6rC,SAAF,EAAakB,YAAb,EAA2B52D,GAA3B,KAAmC,IAAzC;AACAA,MAAI4G,IAAJ,CAAS,uBAAT;;AAEA;AACA,SACE8uD,UACGuD,UADH;AAEE;;;;;;;;AAFF,GAUGj6D,MAVH,CAUUk5D,UAAU9c,QAAQ8c,OAAO7+B,KAAf,CAVpB,EAWGnmB,GAXH,CAWOglD,UAAUtB,aAAah6B,GAAb,CAAiBs7B,OAAO7+B,KAAP,CAAazZ,EAA9B,CAXjB,EAYG5gB,MAZH,CAYUq6B,SAAS;AACf;AACA;AACA,WAAOA,SAASA,MAAM32B,QAAN,GAAiBsK,KAAjB,KAA2B,MAApC,IAA8CqsB,MAAM8+B,SAAN,GAAkBmC,MAAvE;AACD,GAhBH,CADF;AAmBD,C;;;;;;;;;;;;;kBCxBuBC,oB;AAJxB;;;;AAIe,SAASA,oBAAT,GAAiC;AAC9C,QAAM,EAAE9E,UAAF,EAAcz1D,GAAd,KAAsB,IAA5B;AACAA,MAAI4G,IAAJ,CAAS,6BAAT;;AAEA,QAAMqyB,aAAaw8B,WAAWsC,iBAA9B;AACA;;;;;;;AAOA,MAAI9+B,cAAcA,WAAW7K,GAAzB,IAAgC6K,WAAWz4B,IAA/C,EAAqD;AACnD,WAAOy4B,UAAP;AACD,GAFD,MAEO;AACL,WAAOhsB,SAAP;AACD;AACF,C;;;;;;;;;;;;;kBCjBuButD,e;AAJxB;;;;AAIe,SAASA,eAAT,GAA4B;AACzC,QAAM,EAAE9E,SAAF,EAAakB,YAAb,EAA2B52D,GAA3B,KAAmC,IAAzC;AACAA,MAAI4G,IAAJ,CAAS,wBAAT;;AAEA;AACA,SACE8uD,UACG+E,YADH;AAEE;;;;;;;;AAFF,GAUGz7D,MAVH,CAUU24D,YAAYvc,QAAQuc,SAASt+B,KAAjB,CAVtB,EAWGnmB,GAXH,CAWOykD,YAAYf,aAAah6B,GAAb,CAAiB+6B,SAASt+B,KAAT,CAAezZ,EAAhC,CAXnB,EAYG5gB,MAZH,CAYUq6B,SAAS;AACf;AACA,WAAOA,SAASA,MAAM32B,QAAN,GAAiBsK,KAAjB,KAA2B,MAA3C;AACD,GAfH,CADF;AAkBD,C;;;;;;;;;;;;;kBCvBuBwtD,e;AAJxB;;;;AAIe,SAASA,eAAT,GAA4B;AACzC,QAAM,EAAE9E,SAAF,EAAakB,YAAb,EAA2B52D,GAA3B,KAAmC,IAAzC;AACAA,MAAI4G,IAAJ,CAAS,wBAAT;;AAEA;AACA,SACE8uD,UACG+E,YADH;AAEE;;;;;;;;AAFF,GAUGz7D,MAVH,CAUU24D,YAAYvc,QAAQuc,SAASt+B,KAAjB,CAVtB,EAWGnmB,GAXH,CAWOykD,YAAYf,aAAah6B,GAAb,CAAiB+6B,SAASt+B,KAAT,CAAezZ,EAAhC,CAXnB,EAYG5gB,MAZH,CAYUq6B,SAAS;AACf;AACA;AACA,WAAOA,SAASA,MAAM32B,QAAN,GAAiBsK,KAAjB,KAA2B,MAApC,IAA8CqsB,MAAM8+B,SAAN,GAAkBmC,MAAvE;AACD,GAhBH,CADF;AAmBD,C;;;;;;;;;;;;;kBCrBuBvB,Y;AAPxB;;;;;;;AAOe,SAASA,YAAT,GAAyB;AACtC,QAAM,EAAErD,SAAF,EAAa11D,GAAb,KAAqB,IAA3B;AACAA,MAAI4G,IAAJ,CAAS,wBAAT;;AAEA;AACA,SACE8uD,UACGuD,UADH;AAEE;;;;;;;;AAFF,GAUGj6D,MAVH,CAUUk5D,UAAU9c,QAAQ8c,OAAO7+B,KAAf,CAVpB,EAWGnmB,GAXH,CAWOglD,UAAUA,OAAO7+B,KAXxB,CADF;AAcD,C;;;;;;;;;;;;;kBCXuBqhC,iB;AAfxB;;;;;;;;;;;;;;;AAee,SAASA,iBAAT,CAA4BC,SAA5B,EAAuCC,WAAvC,EAAoD;AACjE,QAAM,EAAElF,SAAF,EAAaH,aAAb,EAA4Bvc,OAA5B,EAAqC9yC,MAArC,EAA6ClG,GAA7C,KAAqD26D,SAA3D;;AAEA;AACA,MAAIjF,UAAUU,iBAAV,KAAgC,UAApC,EAAgD;AAC9Cp2D,QAAI+L,KAAJ,CAAU,0DAAV;AACA;AACA;;AAEA;AACAwpD,kBAAcx4D,MAAd,GAAuB,CAAvB;AACA;AACD;;AAED,QAAM89D,mBAAmB30D,OAAOw1B,kBAAP,CAA0B65B,aAA1B,CAAzB;AACA,QAAMuF,oBAAoBF,eAAe10D,OAAOwlB,aAAhD;;AAEA,MAAIovC,iBAAJ,EAAuB;AACrB96D,QAAI+L,KAAJ,CAAU,8DAAV;AACAwpD,kBAAcx4D,MAAd,GAAuB,CAAvB;AACAi8C,YAAQvG,IAAR,CAAa,oBAAb;AACD,GAJD,MAIO,IAAIooB,gBAAJ,EAAsB;AAC3B76D,QAAI+L,KAAJ,CAAU,wDAAV;AACAwpD,kBAAcx4D,MAAd,GAAuB,CAAvB;AACAi8C,YAAQvG,IAAR,CAAa,oBAAb;AACD,GAJM,MAIA;AACLzyC,QAAI+L,KAAJ,CAAW,mEAAkE7F,OAAOulB,kBAAmB,KAAvG;AACAuuC,eAAW,YAAY;AACrBU,wBAAkBC,SAAlB,EAA6BC,cAAc10D,OAAOulB,kBAAlD;AACD,KAFD,EAEGvlB,OAAOulB,kBAFV;AAGD;AACF,C;;;;;;;;;;;;;;;;;;QCUe8oC,W,GAAAA,W;;;;AAxDhB;;;AAGA,MAAMwG,iBAAiB;AACrB;;;;AAIAvgC,UAAS;AACP,QAAI,CAAC,KAAKu/B,SAAL,EAAL,EAAuB;AACrB,WAAKiB,UAAL,GAAkBn4D,KAAlB;AACA,aAAO,IAAP;AACD;AACD,WAAO,KAAP;AACD,GAXoB;;AAarB;;;;AAIAo4B,SAAQ;AACN,QAAI,KAAK8+B,SAAL,EAAJ,EAAsB;AACpB,WAAKiB,UAAL,GAAkB/tD,SAAlB;AACA,aAAO,IAAP;AACD;;AAED,WAAO,KAAP;AACD,GAxBoB;;AA0BrB;;;AAGA8sD,cAAa;AACX,WAAO3e,QAAQ,KAAK4f,UAAb,CAAP;AACD,GA/BoB;;AAiCrB;;;AAGAjF,kBAAiB;AACf,WAAO,KAAKgE,SAAL,KAAmBl3D,QAAQ,KAAKm4D,UAAhC,GAA6C,CAApD;AACD;AAtCoB,CAAvB;;AAyCA;;;AAGA,SAASn4D,GAAT,GAAgB;AACd,SAAO,IAAIC,IAAJ,GAAWm4D,OAAX,EAAP;AACD;;AAED;;;;;AAKO,SAAS1G,WAAT,GAAwB;AAC7B,SAAO,sBAAcwG,cAAd,CAAP;AACD,C;;;;;;;;;;;;;AC1DD;;;AAGO,MAAMjG,sBAAO;AAClBG,eAAa;AACX3sD,UAAM,MADK;AAEXstD,UAAM,MAFK;AAGXptD,UAAM;AAHK,GADK;AAMlB;AACA6tD,uBAAqB;AACnB6E,SAAK,KADc;AAEnB5E,eAAW,WAFQ;AAGnBC,cAAU;AAHS,GAPH;AAYlBgC,YAAU;AACRx0C,WAAO,OADC;AAERC,YAAQ;AAFA,GAZQ;AAgBlB+wC,iBAAe;AACbC,YAAQ,QADK;AAEbmG,kBAAc;AAFD;;AAMjB;;;;AAtBoB,CAAb,CA0BA,MAAMC,gCAAY;AACvBC,YAAU,UADa;AAEvBC,aAAW,UAFY;AAGvBC,aAAW,UAHY;AAIvBC,aAAW;AAJY,CAAlB,C;;;;;;;;;;;;;QCJSC,4B,GAAAA,4B;kBAOQC,U;;AA/BxB;;;;AACA;;;;AACA;;;;AAGA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;AAGA;;;;AACA;;IAAYh5C,W;;AAGZ;;;;;;AAEA;;;;;AAjBA;AAoBO,SAAS+4C,4BAAT,GAAyC;AAC9C,SAAO;AACLvvC,kBAAckvB,QAAQugB,UAAUzvC,YAAlB,CADT;AAELC,oBAAgBivB,QAAQ/3C,OAAO8zD,iBAAf;AAFX,GAAP;AAID;;AAXD;;;AAJA;AAfA;AAgCe,SAASuE,UAAT,GAAuB;AACpC,QAAM17D,MAAM0F,iBAAWC,SAAX,CAAqB,QAArB,CAAZ;;AAEA,QAAMmnB,iBAAiB,+BAAvB;AACA,MAAIA,eAAevoB,OAAnB,EAA4B;AAC1BvE,QAAI+L,KAAJ,CAAW,oBAAmB+gB,eAAeL,OAAQ,aAAYK,eAAevoB,OAAQ,GAAxF;AACD,GAFD,MAEO;AACLvE,QAAI+L,KAAJ,CAAU,mDAAV;AACD;;AAED,QAAM6vD,gBAAgB,IAAIC,uBAAJ,EAAtB;AACA,QAAMjF,eAAe,IAAIkF,sBAAJ,EAArB;AACA,QAAMC,eAAe,IAAIC,sBAAJ,CAAiB,EAAEpF,YAAF,EAAjB,CAArB;AACA,QAAMqF,cAAc,IAAIC,qBAAJ,CAAgB,EAAEtF,YAAF,EAAhB,CAApB;AACA,QAAM9/C,iBAAiB,IAAIqlD,wBAAJ,CAAmB;AACxCF,eADwC;AAExCF,gBAFwC;AAGxCnF;AAHwC,GAAnB,CAAvB;AAKA,QAAMpvB,gBAAgB,IAAI40B,uBAAJ,EAAtB;;AAEA,SAAO;AACLC,YAAQ;AACNC,4BADM;AAENC,4BAFM;AAGNC;AAHM,KADH;AAML;AACA3vC,cAAU;AACRg+B,eAAS+Q,aADD;AAERpkD,aAAOukD,YAFC;AAGRE,mBAAaA,WAHL;AAIRnlD,oBAJQ;AAKRuiB,aAAOu9B,YALC;AAMR;AACA;AACA;AACAxX,YAAM15C,gBATE;AAUR8hC;AAVQ,KAPL;AAmBLpZ,SAAK;AACHquC,gBAAUC,kBADP;AAEHl3B,gBAAU9iB;AAFP,KAnBA;AAuBL;AACA8J;AAxBK,GAAP;AA0BD,C;;;;;;;;;;;;;;;AC/ED;;;;;;AAEA,MAAM2xB,UAAU,2BAAc,EAAEp9C,OAAO,OAAT,EAAd,CAAhB;AACO,MAAM2E,kCAAay4C,OAAnB,C;;;;;;;;;;;;;;;;;;;kBCkBiB0d,a;;AArBxB;;AAGA;;;;;;AAEA;;;;;AAKO,MAAMlmD,oDAAsB;AACjCC,cAAY,YADqB;AAEjCC,cAAY,QAFqB;AAGjCC,eAAa;;AAGf;;;;;AANmC,CAA5B;;AARP;AAmBe,SAAS+lD,aAAT,GAA0B;AACvC,QAAM77D,MAAM0F,iBAAWC,SAAX,CAAqB,SAArB,EAAgC,QAAhC,CAAZ;;AAEA;AACA,QAAMqzC,UAAU,IAAIke,sBAAJ,EAAhB;AACA;AACA;AACA,MAAI3F,aAAa,EAAjB;AACA,MAAID,SAAS,EAAb;AACA,MAAIE,UAAU,EAAd;;AAEA;AACA5G,iBAAenR,IAAf,CAAoB,MAAM;AACxB;AACAT,YAAQvG,IAAR,CAAa,QAAb;AACD,GAHD;;AAKA;AACA,MAAIkqB,qBAAqB,KAAzB;AACAhB,YAAUzvC,YAAV,CAAuB0wC,gBAAvB,CAAwC,cAAxC,EAAwD,MAAM;AAC5D58D,QAAI4G,IAAJ,CAAS,+BAAT;AACA;AACA;AACA,QAAI,CAAC+1D,kBAAL,EAAyB;AACvBA,2BAAqB,IAArB;AACA3C,iBAAW,MAAM;AACf2C,6BAAqB,KAArB;AACA/R,uBAAenR,IAAf,CAAoB,MAAM;AACxB;AACAT,kBAAQvG,IAAR,CAAa,QAAb;AACD,SAHD;AAID,OAND,EAMG,EANH;AAOD;AACF,GAdD;;AAgBA;;;;;AAKA,WAASmY,YAAT,GAAyB;AACvB5qD,QAAI4G,IAAJ,CAAS,yBAAT;AACA,WAAO,sBAAY,CAACqrC,OAAD,EAAU3wB,MAAV,KAAqB;AACtCq6C,gBAAUzvC,YAAV,CACG2wC,gBADH,GAEGpjB,IAFH,CAEQoR,WAAW;AACf;AACA0G,qBAAa,EAAb;AACAD,iBAAS,EAAT;AACAE,kBAAU,EAAV;AACA3G,gBAAQzrD,OAAR,CAAgB09D,UAAU;AACxB,gBAAMt9D,OAAOmW,oBAAoBmnD,OAAOt9D,IAA3B,CAAb;AACA,kBAAQA,IAAR;AACE,iBAAK,YAAL;AACE+xD,yBAAWh0D,IAAX,CAAgBu/D,MAAhB;AACA;AACF,iBAAK,QAAL;AACExL,qBAAO/zD,IAAP,CAAYu/D,MAAZ;AACA;AACF,iBAAK,SAAL;AACEtL,sBAAQj0D,IAAR,CAAau/D,MAAb;AACA;AATJ;AAWD,SAbD;AAcA7qB,gBAAQrV,KAAR;AACD,OAtBH,EAuBGo7B,KAvBH,CAuBS12C,MAvBT;AAwBD,KAzBM,CAAP;AA0BD;;AAED;;;;;;;AAOA,WAASy7C,yBAAT,CAAoCjM,iBAApC,EAAuD;AACrD,WAAO,sBAAY,CAAC7e,OAAD,EAAU3wB,MAAV,KAAqB;AACtCq6C,gBAAUzvC,YAAV,CACG8wC,YADH,CACgBlM,iBADhB,EAEGrX,IAFH,CAEQwjB,eAAe;AACnBA,oBAAY7/B,SAAZ,GAAwBh+B,OAAxB,CAAgCi6B,SAAS;AACvCA,gBAAM4B,IAAN;AACD,SAFD;AAGA,cAAM4vB,UAAUD,cAAhB;AACA3Y,gBAAQ4Y,OAAR;AACD,OARH,EASGmN,KATH,CASS12C,MATT;AAUD,KAXM,CAAP;AAYD;;AAED;;;;;AAKA,WAASsb,GAAT,GAAgB;AACd,WAAO;AACL20B,gBADK;AAELD,YAFK;AAGLE;AAHK,KAAP;AAKD;;AAED,WAASjZ,EAAT,CAAa,GAAG/yB,IAAhB,EAAsB;AACpB,WAAOwzB,QAAQT,EAAR,CAAW,GAAG/yB,IAAd,CAAP;AACD;;AAED,WAASgyC,IAAT,CAAe,GAAGhyC,IAAlB,EAAwB;AACtB,WAAOwzB,QAAQwe,IAAR,CAAa,GAAGhyC,IAAhB,CAAP;AACD;;AAED,WAASizB,GAAT,CAAc,GAAGjzB,IAAjB,EAAuB;AACrB,WAAOwzB,QAAQP,GAAR,CAAY,GAAGjzB,IAAf,CAAP;AACD;;AAED;;;AAGA,SAAO;AACLolC,gBADK;AAELmS,6BAFK;AAGLngC,OAHK;AAIL2b,MAJK;AAKLif,QALK;AAML/e;AANK,GAAP;AAQD,C;;;;;;;;;;;;;;;;;;;;;;;;;;kBCxIuBujB,Y;;AAbxB;;AAGA;;;;AAGA;;;;;;AAEA;;;;;;;AANA;AAWe,SAASA,YAAT,CAAuBnvC,QAAvB,EAAiC;AAC9C,QAAM7sB,MAAM0F,iBAAWC,SAAX,CAAqB,SAArB,EAAgC,OAAhC,CAAZ;;AAEA;AACA,QAAMixD,eAAe/pC,SAAS+pC,YAA9B;AACA,QAAM55B,SAAS,mBAAf;AACA,QAAMgc,UAAU,IAAIke,sBAAJ,EAAhB;;AAEA;;;;;AAKA,WAASx0D,QAAT,GAAqB;AACnB,WAAOif,SAASzO,GAAT,CAAa0M,MAAMgd,IAAIhd,EAAJ,EAAQld,QAAR,EAAnB,CAAP;AACD;;AAED;;;;;;;AAOA,WAASw6D,2BAAT,CAAsCrM,WAAtC,EAAmD;AACjD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA,SAAK,MAAMrxD,IAAX,IAAmBqxD,WAAnB,EAAgC;AAC9B,UACEA,YAAYrxD,IAAZ,KACA,OAAOqxD,YAAYrxD,IAAZ,CAAP,KAA6B,QAD7B,IAEA,OAAOqxD,YAAYrxD,IAAZ,EAAkB29D,QAAzB,KAAsC,QAHxC,EAIE;AACA;AACA;AACA,cAAMv9C,KAAKixC,YAAYrxD,IAAZ,EAAkB29D,QAA7B;AACAtM,oBAAYrxD,IAAZ,EAAkB29D,QAAlB,GAA6B,EAAEnyB,OAAOprB,EAAT,EAA7B;AACD;AACF;AACD,WAAOixC,WAAP;AACD;;AAED;;;;;;;AAOA,WAASuM,UAAT,CAAqBH,WAArB,EAAkC;AAChC,UAAMzlD,QAAQ,IAAI+kD,eAAJ,CAAUU,WAAV,EAAuB,IAAvB,CAAd;AACAj9D,QAAI+L,KAAJ,CAAW,2BAA0ByL,MAAMoI,EAAG,GAA9C;;AAEA;AACAq9C,gBAAY7/B,SAAZ,GAAwBh+B,OAAxB,CAAgCy3D,eAAe;AAC7C,YAAMwG,eAAezG,aAAaK,GAAb,CAAiBJ,WAAjB,EAA8BoG,WAA9B,CAArB;AACAzlD,YAAMygD,QAAN,CAAeoF,YAAf;AACD,KAHD;;AAKA7lD,UAAMggD,IAAN,CAAW,eAAX,EAA4BxwC,WAAW;AACrCs2C,aAAOt2C,OAAP;AACD,KAFD;;AAIAxP,UAAM+gC,EAAN,CAAS,eAAT,EAA0Bp2B,WAAW;AACnC,UAAI3K,MAAMsK,MAAN,CAAay7C,IAAb,KAAsB,CAA1B,EAA6B;AAC3BD,eAAO9lD,MAAMoI,EAAb;AACD;AACF,KAJD;;AAMApI,UAAM+gC,EAAN,CAAS,aAAT,EAAwB,CAAC,EAAEvxB,OAAF,EAAW7E,OAAX,EAAD,KAA0B;AAChD,UAAI3K,MAAM4lB,SAAN,GAAkBrgC,MAAlB,KAA6B,CAAjC,EAAoC;AAClCugE,eAAOt2C,OAAP;AACD;AACF,KAJD;;AAMAxP,UAAM+gC,EAAN,CAAS,aAAT,EAAwB,CAAC,EAAEvxB,OAAF,EAAW7E,OAAX,EAAD,KAA0B;AAChD;AACD,KAFD;;AAIA,WAAO3K,KAAP;AACD;;AAED;;;;;;;AAOA,WAASkwB,WAAT,CAAsBmpB,WAAtB,EAAmC;AACjC,UAAM2M,wBAAwBN,4BAA4BrM,WAA5B,CAA9B;;AAEA;AACA,WAAO,sBAAY,CAAC5e,OAAD,EAAU3wB,MAAV,KAAqB;AACtC;AACA;AACAq6C,gBAAUzvC,YAAV,CACG8wC,YADH,CACgBQ,qBADhB,EAEG/jB,IAFH,CAEQwjB,eAAe;AACnB,cAAMzlD,QAAQ4lD,WAAWH,WAAX,CAAd;;AAEAjgC,eAAO/lB,GAAP,CAAWO,MAAMoI,EAAjB,EAAqBpI,KAArB;AACA;AACAwhC,gBAAQvG,IAAR,CAAa,WAAb,EAA0Bj7B,MAAMoI,EAAhC;;AAEAqyB,gBAAQz6B,KAAR;AACD,OAVH,EAWGwgD,KAXH,CAWS12C,MAXT;AAYD,KAfM,CAAP;AAgBD;;AAED;;;;;;;;AAQA,WAASm8C,iBAAT,CAA4B5M,WAA5B,EAAyC;AACvC,UAAM2M,wBAAwBN,4BAA4BrM,WAA5B,CAA9B;;AAEA,WAAO,sBAAY,CAAC5e,OAAD,EAAU3wB,MAAV,KAAqB;AACtCq6C,gBAAUzvC,YAAV,CACGwxC,eADH,CACmBF,qBADnB,EAEG/jB,IAFH,CAEQwjB,eAAe;AACnB,cAAMzlD,QAAQ4lD,WAAWH,WAAX,CAAd;;AAEAjgC,eAAO/lB,GAAP,CAAWO,MAAMoI,EAAjB,EAAqBpI,KAArB;AACA;AACAwhC,gBAAQvG,IAAR,CAAa,WAAb,EAA0Bj7B,MAAMoI,EAAhC;;AAEAqyB,gBAAQz6B,KAAR;AACD,OAVH,EAWGwgD,KAXH,CAWS12C,MAXT;AAYD,KAbM,CAAP;AAcD;;AAED;;;;;;;;AAQA,WAASq8C,YAAT,CAAuBpkC,MAAvB,EAA+BzX,SAAS,EAAxC,EAA4C;AAC1C,UAAMtK,QAAQ,IAAI+kD,eAAJ,CAAUhjC,MAAV,EAAkB,KAAlB,CAAd;;AAEAzX,WAAO1iB,OAAP,CAAei6B,SAAS;AACtB7hB,YAAMygD,QAAN,CAAe5+B,KAAf;AACD,KAFD;;AAIA7hB,UAAMggD,IAAN,CAAW,eAAX,EAA4BxwC,WAAW;AACrCs2C,aAAOt2C,OAAP;AACD,KAFD;;AAIAxP,UAAM+gC,EAAN,CAAS,eAAT,EAA0Bp2B,WAAW;AACnC,UAAI3K,MAAMsK,MAAN,CAAay7C,IAAb,KAAsB,CAA1B,EAA6B;AAC3BD,eAAO9lD,MAAMoI,EAAb;AACD;AACF,KAJD;;AAMApI,UAAM+gC,EAAN,CAAS,aAAT,EAAwB,CAAC,EAAEvxB,OAAF,EAAW7E,OAAX,EAAD,KAA0B;AAChD,UAAI3K,MAAM4lB,SAAN,GAAkBrgC,MAAlB,KAA6B,CAAjC,EAAoC;AAClCugE,eAAOt2C,OAAP;AACD;AACF,KAJD;;AAMAgW,WAAO/lB,GAAP,CAAWO,MAAMoI,EAAjB,EAAqBpI,KAArB;AACA;AACAwhC,YAAQvG,IAAR,CAAa,WAAb,EAA0Bj7B,MAAMoI,EAAhC;AACA,WAAOpI,KAAP;AACD;;AAED;;;;;;AAMA,WAAS8lD,MAAT,CAAiBt2C,OAAjB,EAA0B;AACxB,UAAMxP,QAAQolB,IAAI5V,OAAJ,CAAd;AACA,QAAIxP,KAAJ,EAAW;AACTwlB,aAAO4gC,MAAP,CAAc52C,OAAd;AACAgyB,cAAQvG,IAAR,CAAa,eAAb,EAA8BzrB,OAA9B;AACD;AACF;;AAED;;;;;;AAMA,WAAS4V,GAAT,CAAc5V,OAAd,EAAuB;AACrB,UAAMxP,QAAQwlB,OAAOJ,GAAP,CAAW5V,OAAX,CAAd;AACA,QAAI,CAACxP,KAAL,EAAY;AACVxX,UAAI+L,KAAJ,CAAW,2BAA0Bib,OAAQ,GAA7C;AACD;AACD,WAAOxP,KAAP;AACD;;AAED;;;;;AAKA,WAASmK,MAAT,GAAmB;AACjB,WAAO,oBAAWqb,OAAON,IAAP,EAAX,CAAP;AACD;;AAED;;;;;;AAMA,WAASmhC,SAAT,CAAoB17C,OAApB,EAA6B;AAC3B;AACA,UAAM27C,WAAW,oBAAW9gC,OAAO8N,MAAP,EAAX,CAAjB;AACA,UAAMtzB,QAAQsmD,SAAS9zC,IAAT,CAAcxS,SAASA,MAAMumD,QAAN,CAAe57C,OAAf,CAAvB,CAAd;AACA,QAAI3K,KAAJ,EAAW;AACTxX,UAAI+L,KAAJ,CAAW,gBAAeyL,MAAMoI,EAAG,gBAAeuC,OAAQ,GAA1D;AACA,aAAO3K,MAAMoI,EAAb;AACD,KAHD,MAGO;AACL5f,UAAI+L,KAAJ,CAAW,6BAA4BoW,OAAQ,GAA/C;AACD;AACF;;AAED,WAASo2B,EAAT,CAAa,GAAG/yB,IAAhB,EAAsB;AACpB,WAAOwzB,QAAQT,EAAR,CAAW,GAAG/yB,IAAd,CAAP;AACD;;AAED,WAASgyC,IAAT,CAAe,GAAGhyC,IAAlB,EAAwB;AACtB,WAAOwzB,QAAQwe,IAAR,CAAa,GAAGhyC,IAAhB,CAAP;AACD;;AAED,WAASizB,GAAT,CAAc,GAAGjzB,IAAjB,EAAuB;AACrB,WAAOwzB,QAAQP,GAAR,CAAY,GAAGjzB,IAAf,CAAP;AACD;;AAED;;;AAGA,SAAO;AACL;AACAoX,OAFK;AAGLjb,UAHK;AAILjf,YAJK;AAKLm7D,aALK;AAML;AACAn2B,eAPK;AAQL+1B,qBARK;AASLE,gBATK;AAUL;AACAplB,MAXK;AAYLif,QAZK;AAaL/e;AAbK,GAAP;AAeD;;AArTD,a;;;;;;;;;;;;;;;;;;;;;;kBCQwByjB,W;;AAbxB;;AAEA;;;;AAGA;;AACA;;;;;;AAEA;;;;;;;AAJA;AASe,SAASA,WAAT,CAAsBrvC,QAAtB,EAAgC;AAC7C,QAAM7sB,MAAM0F,iBAAWC,SAAX,CAAqB,SAArB,EAAgC,MAAhC,CAAZ;;AAEA;AACA,QAAMixD,eAAe/pC,SAAS+pC,YAA9B;AACA,QAAMoH,QAAQ,mBAAd;AACA,QAAMhlB,UAAU,IAAIke,sBAAJ,EAAhB;;AAEA;;;;;AAKA,WAASx0D,QAAT,GAAqB;AACnB,WAAOif,SAASzO,GAAT,CAAa0M,MAAMgd,IAAIhd,EAAJ,EAAQld,QAAR,EAAnB,CAAP;AACD;;AAED;;;;;;AAMA,WAASu7D,MAAT,CAAiB/3D,SAAS,EAA1B,EAA8B;AAC5B,UAAM4zB,OAAO,IAAI0iC,cAAJ,CAAS,eAAT,EAAmBt2D,MAAnB,EAA2B0wD,YAA3B,CAAb;AACA98B,SAAK09B,IAAL,CAAU,aAAV,EAAyB53C,MAAMo+C,MAAMJ,MAAN,CAAah+C,EAAb,CAA/B;AACAo+C,UAAM/mD,GAAN,CAAU6iB,KAAKla,EAAf,EAAmBka,IAAnB;AACAkf,YAAQvG,IAAR,CAAa,UAAb,EAAyB3Y,KAAKla,EAA9B;AACA,WAAOka,IAAP;AACD;;AAED;;;;;;AAMA,WAAS8C,GAAT,CAAchd,EAAd,EAAkB;AAChB,UAAMka,OAAOkkC,MAAMphC,GAAN,CAAUhd,EAAV,CAAb;AACA,QAAI,CAACka,IAAL,EAAW;AACT95B,UAAI+L,KAAJ,CAAW,0BAAyB6T,EAAG,GAAvC;AACD;AACD,WAAOka,IAAP;AACD;;AAED;;;;;AAKA,WAASnY,MAAT,GAAmB;AACjB,WAAO,oBAAWq8C,MAAMthC,IAAN,EAAX,CAAP;AACD;;AAED,WAAS6b,EAAT,CAAa,GAAG/yB,IAAhB,EAAsB;AACpB,WAAOwzB,QAAQT,EAAR,CAAW,GAAG/yB,IAAd,CAAP;AACD;;AAED,WAASgyC,IAAT,CAAe,GAAGhyC,IAAlB,EAAwB;AACtB,WAAOwzB,QAAQwe,IAAR,CAAa,GAAGhyC,IAAhB,CAAP;AACD;;AAED,WAASizB,GAAT,CAAc,GAAGjzB,IAAjB,EAAuB;AACrB,WAAOwzB,QAAQP,GAAR,CAAY,GAAGjzB,IAAf,CAAP;AACD;;AAED;;;AAGA,SAAO;AACL9iB,YADK;AAELk6B,OAFK;AAGLjb,UAHK;AAILs8C,UAJK;AAKL;AACA1lB,MANK;AAOLif,QAPK;AAQL/e;AARK,GAAP;AAUD,C;;;;;;;;;;;;;;;;;;;;;;kBChFuB0jB,c;;AAZxB;;AACA;;;;AAGA;;AACA;;;;;;AAEA;;;;;;;AAJA;AASe,SAASA,cAAT,CAAyBtvC,QAAzB,EAAmC;AAChD,QAAM7sB,MAAM0F,iBAAWC,SAAX,CAAqB,SAArB,EAAgC,SAAhC,CAAZ;AACA;AACA,QAAM8rD,WAAW,mBAAjB;AACA,QAAMzY,UAAU,IAAIke,sBAAJ,EAAhB;;AAEA;;;;;;;AAOA,WAAS+G,MAAT,CAAiB/3D,SAAS,EAA1B,EAA8B;AAC5B,UAAM2Q,UAAU,IAAIqnD,iBAAJ,CAAY,eAAZ,EAAsBrxC,QAAtB,EAAgC3mB,MAAhC,CAAhB;AACA2Q,YAAQ2gD,IAAR,CAAa,eAAb,EAA8B53C,MAAM;AAClC6xC,eAASmM,MAAT,CAAgBh+C,EAAhB;AACAo5B,cAAQvG,IAAR,CAAa,iBAAb,EAAgC7yB,EAAhC;AACD,KAHD;AAIA6xC,aAASx6C,GAAT,CAAaJ,QAAQ+I,EAArB,EAAyB/I,OAAzB;AACAmiC,YAAQvG,IAAR,CAAa,aAAb,EAA4B57B,QAAQ+I,EAApC;AACA,WAAO/I,OAAP;AACD;;AAED;;;;;;AAMA,WAAS+lB,GAAT,CAAcnsB,SAAd,EAAyB;AACvB,UAAMoG,UAAU46C,SAAS70B,GAAT,CAAansB,SAAb,CAAhB;AACA,QAAI,CAACoG,OAAL,EAAc;AACZ7W,UAAI+L,KAAJ,CAAW,6BAA4B0E,SAAU,GAAjD;AACD;AACD,WAAOoG,OAAP;AACD;;AAED;;;;;AAKA,WAAS8K,MAAT,GAAmB;AACjB,WAAO,oBAAW8vC,SAAS3mB,MAAT,EAAX,CAAP;AACD;;AAED,WAASyN,EAAT,CAAa,GAAG/yB,IAAhB,EAAsB;AACpB,WAAOwzB,QAAQT,EAAR,CAAW,GAAG/yB,IAAd,CAAP;AACD;;AAED,WAASgyC,IAAT,CAAe,GAAGhyC,IAAlB,EAAwB;AACtB,WAAOwzB,QAAQwe,IAAR,CAAa,GAAGhyC,IAAhB,CAAP;AACD;;AAED,WAASizB,GAAT,CAAc,GAAGjzB,IAAjB,EAAuB;AACrB,WAAOwzB,QAAQP,GAAR,CAAY,GAAGjzB,IAAf,CAAP;AACD;;AAED;;;AAGA,SAAO;AACLy4C,UADK;AAELrhC,OAFK;AAGLjb,UAHK;AAIL42B,MAJK;AAKLif,QALK;AAML/e;AANK,GAAP;AAQD,C;;;;;;;;;;;;;;;;;;;;;;kBCzEuBqjB,Y;;AATxB;;;;AAGA;;;;;;AAEA;;;;AAIe,SAASA,YAAT,GAAyB;AACtC;;;;AAIA,QAAMh6C,SAAS,mBAAf;AACA,QAAMk3B,UAAU,IAAIke,sBAAJ,EAAhB;;AAEA;;;;;;AAMA,WAASt6B,GAAT,CAAcza,OAAd,EAAuB;AACrB,WAAOL,OAAO8a,GAAP,CAAWza,OAAX,CAAP;AACD;;AAED;;;;;;;AAOA,WAASib,SAAT,CAAoBqzB,QAApB,EAA8B;AAC5B,QAAIA,QAAJ,EAAc;AACZ,aAAOA,SAASv9C,GAAT,CAAaiP,WAAWL,OAAO8a,GAAP,CAAWza,OAAX,CAAxB,CAAP;AACD,KAFD,MAEO;AACL,aAAO,oBAAWL,OAAOgpB,MAAP,EAAX,CAAP;AACD;AACF;;AAED;;;;;;;;AAQA,WAASmsB,GAAT,CAAc59B,KAAd,EAAqBE,MAArB,EAA6B;AAC3B,UAAM4kC,cAAcr8C,OAAO8a,GAAP,CAAWvD,MAAMzZ,EAAjB,CAApB;;AAEA;AACA;AACA;AACA;AACA,QAAIu+C,eAAe,CAACA,YAAYhG,SAAZ,GAAwBmC,MAAxC,IAAkD/gC,OAAO+gC,MAA7D,EAAqE;AACnE;AACA6D,kBAAYC,SAAZ,CAAsB7kC,MAAtB;AACA,aAAO4kC,WAAP;AACD,KAJD,MAIO,IAAIA,WAAJ,EAAiB;AACtB;AACA,aAAOA,WAAP;AACD,KAHM,MAGA;AACL;AACA,YAAMd,eAAe,IAAIf,eAAJ,CAAUjjC,KAAV,EAAiBE,MAAjB,CAArB;AACAzX,aAAO7K,GAAP,CAAWoiB,MAAMzZ,EAAjB,EAAqBy9C,YAArB;;AAEA;AACAA,mBAAa7F,IAAb,CAAkB,OAAlB,EAA2B8F,MAA3B;;AAEAtkB,cAAQvG,IAAR,CAAa,KAAb,EAAoB4qB,aAAaz9C,EAAjC;AACA,aAAOy9C,YAAP;AACD;AACF;;AAED;;;;;;AAMA,WAASC,MAAT,CAAiB,EAAEn7C,OAAF,EAAjB,EAA8B;AAC5B,UAAMkX,QAAQuD,IAAIza,OAAJ,CAAd;AACA,QAAIkX,KAAJ,EAAW;AACTvX,aAAO87C,MAAP,CAAcz7C,OAAd;AACA;AACAkX,YAAMof,GAAN,CAAU,OAAV,EAAmB6kB,MAAnB;AACAtkB,cAAQvG,IAAR,CAAa,QAAb,EAAuBtwB,OAAvB;AACD;;AAED,WAAOi5B,QAAQ/hB,KAAR,CAAP;AACD;;AAED,WAASkf,EAAT,CAAa,GAAG/yB,IAAhB,EAAsB;AACpB,WAAOwzB,QAAQT,EAAR,CAAW,GAAG/yB,IAAd,CAAP;AACD;;AAED,WAASgyC,IAAT,CAAe,GAAGhyC,IAAlB,EAAwB;AACtB,WAAOwzB,QAAQwe,IAAR,CAAa,GAAGhyC,IAAhB,CAAP;AACD;;AAED,WAASizB,GAAT,CAAc,GAAGjzB,IAAjB,EAAuB;AACrB,WAAOwzB,QAAQP,GAAR,CAAY,GAAGjzB,IAAf,CAAP;AACD;;AAED;;;AAGA,SAAO;AACLoX,OADK;AAELQ,aAFK;AAGL65B,OAHK;AAILqG,UAJK;AAKL/kB,MALK;AAMLif,QANK;AAOL/e;AAPK,GAAP;AASD;;AArHD,a;;;;;;;;;;;;;kBCEwB2jB,a;AAJxB;;;;AAIe,SAASA,aAAT,CAAwBvvC,QAAxB,EAAkC;AAC/C;;;;;;AAMA,WAAS3N,kBAAT,CAA6B1f,IAA7B,EAAmC;AACjC,WAAO6+D,aAAaniB,eAAb,CAA6B18C,IAA7B,EAAmC4nB,MAA1C;AACD;AACD;;;AAGA,SAAO;AACLlI;AADK,GAAP;AAGD,C;;;;;;;;;;;;;;;;;;;;;;kBCRuBq9C,K;;AAZxB;;AAGA;;;;;;AAEA;;;;;;;AAOe,SAASA,KAAT,CAAgB+B,YAAhB,EAA8Bt4C,OAA9B,EAAuC;AACpD,QAAMhmB,MAAM0F,iBAAWC,SAAX,CAAqB,OAArB,EAA8B24D,aAAa1+C,EAA3C,CAAZ;AACA5f,MAAI4G,IAAJ,CAAU,gBAAeof,UAAU,OAAV,GAAoB,QAAS,SAAtD;;AAEA;AACA,QAAMpG,KAAK0+C,aAAa1+C,EAAxB;AACA,QAAM2Z,SAAS+kC,YAAf;AACA,QAAMtlB,UAAU,IAAIke,sBAAJ,EAAhB;;AAEA;;;;AAIA,QAAMp1C,SAAS,mBAAf;;AAEAyX,SAAOglC,aAAP,GAAuB7kB,SAAS;AAC9B53B,WAAO87C,MAAP,CAAclkB,MAAMrgB,KAAN,CAAYzZ,EAA1B;AACAo5B,YAAQvG,IAAR,CAAa,eAAb,EAA8BiH,MAAMrgB,KAAN,CAAYzZ,EAA1C;AACD,GAHD;;AAKA;;;;;AAKA,WAASld,QAAT,GAAqB;AACnB,WAAO;AACLkd,UAAIA,EADC;AAELkC,cAAQ,oBAAWA,OAAOgpB,MAAP,EAAX,EAA4B53B,GAA5B,CAAgCmmB,SAASA,MAAM32B,QAAN,EAAzC,CAFH;AAGLsjB,eAASA;AAHJ,KAAP;AAKD;;AAED;;;;;AAKA,WAASiyC,QAAT,CAAmB5+B,KAAnB,EAA0B;AACxB,QAAIvX,OAAO08C,GAAP,CAAWnlC,MAAMzZ,EAAjB,CAAJ,EAA0B;AACxB5f,UAAI+L,KAAJ,CAAW,UAASstB,MAAMzZ,EAAG,0BAAyBA,EAAG,IAAzD;AACA;AACD;;AAED;AACA2Z,WAAO0+B,QAAP,CAAgB5+B,MAAMA,KAAtB;AACA;AACAvX,WAAO7K,GAAP,CAAWoiB,MAAMzZ,EAAjB,EAAqByZ,KAArB;;AAEA;;;AAGAA,UAAMkf,EAAN,CAAS,OAAT,EAAkB,MAAM;AACtB,YAAMkmB,eAAe9M,YAAYt4B,MAAMzZ,EAAlB,CAArB;AACA;AACA,UAAI6+C,YAAJ,EAAkB;AAChBA,qBAAaC,OAAb;AACA1lB,gBAAQvG,IAAR,CAAa,aAAb,EAA4B;AAC1BzrB,mBAASpH,EADiB;AAE1BuC,mBAASs8C,aAAa7+C;AAFI,SAA5B;AAID;AACF,KAVD;AAWA;AACAo5B,YAAQvG,IAAR,CAAa,WAAb,EAA0B;AACxBzrB,eAASpH,EADe;AAExBuC,eAASkX,MAAMzZ;AAFS,KAA1B;;AAKA;;;AAGAyZ,UAAMkf,EAAN,CAAS,OAAT,EAAkBmB,SAAS;AACzB,YAAM2jB,eAAeU,SAASrkB,MAAMv3B,OAAf,CAArB;AACA,UAAIk7C,gBAAgBA,aAAahkC,KAA7B,IAAsCgkC,aAAahkC,KAAb,CAAmBm0B,KAA7D,EAAoE;AAClE;AACA;AACAxU,gBAAQvG,IAAR,CAAa,aAAb,EAA4B;AAC1BzrB,mBAASpH,EADiB;AAE1BuC,mBAASu3B,MAAMv3B;AAFW,SAA5B;AAID;AACF,KAVD;;AAYA;;;AAGAkX,UAAMkf,EAAN,CAAS,SAAT,EAAoBmB,SAAS;AAC3B,YAAM2jB,eAAeU,SAASrkB,MAAMv3B,OAAf,CAArB;AACA,UAAIk7C,gBAAgBA,aAAahkC,KAA7B,IAAsCgkC,aAAahkC,KAAb,CAAmBm0B,KAAnB,KAA6B,KAAvE,EAA8E;AAC5E;AACA;AACAxU,gBAAQvG,IAAR,CAAa,eAAb,EAA8B;AAC5BzrB,mBAASpH,EADmB;AAE5BuC,mBAASu3B,MAAMv3B;AAFa,SAA9B;AAID;AACF,KAVD;AAWD;;AAED;;;;;;AAMA,WAASwvC,WAAT,CAAsBxvC,OAAtB,EAA+B;AAC7B,UAAMkX,QAAQ0kC,SAAS57C,OAAT,CAAd;AACA,QAAIkX,KAAJ,EAAW;AACTvX,aAAO87C,MAAP,CAAcz7C,OAAd;AACA,aAAOkX,KAAP;AACD;AACF;;AAED;;;;;;AAMA,WAASslC,QAAT,CAAmBC,OAAnB,EAA4B1L,SAA5B,EAAuC;AACrC91B,gBAAYh+B,OAAZ,CAAoBi6B,SAAS;AAC3BA,YAAMslC,QAAN,CAAeC,OAAf,EAAwB1L,SAAxB;AACD,KAFD;AAGD;;AAED;;;;;AAKA,WAAS2L,UAAT,CAAqBD,OAArB,EAA8B;AAC5BxhC,gBAAYh+B,OAAZ,CAAoBi6B,SAAS;AAC3BA,YAAMwlC,UAAN,CAAiBD,OAAjB;AACD,KAFD;AAGD;;AAED;;;;;AAKA,WAASE,MAAT,CAAiBF,OAAjB,EAA0B;AACxBxhC,gBAAYh+B,OAAZ,CAAoBi6B,SAAS;AAC3BA,YAAMylC,MAAN,CAAaF,OAAb;AACD,KAFD;AAGD;;AAED;;;;AAIA,WAAS3jC,IAAT,GAAiB;AACfmC,gBAAYh+B,OAAZ,CAAoBi6B,SAAS;AAC3BA,YAAM4B,IAAN;AACD,KAFD;AAGA+d,YAAQvG,IAAR,CAAa,eAAb,EAA8B,KAAK7yB,EAAnC;AACD;;AAED;;;;AAIA,WAAS8+C,OAAT,GAAoB;AAClBthC,gBAAYh+B,OAAZ,CAAoBi6B,SAAS;AAC3BA,YAAMqlC,OAAN;AACD,KAFD;AAGA1lB,YAAQvG,IAAR,CAAa,eAAb,EAA8B,KAAK7yB,EAAnC;AACD;;AAED;;;;;AAKA,WAASwd,SAAT,GAAsB;AACpB,WAAO,oBAAWtb,OAAOgpB,MAAP,EAAX,CAAP;AACD;;AAED;;;;;;AAMA,WAASizB,QAAT,CAAmB57C,OAAnB,EAA4B;AAC1B,WAAOL,OAAO8a,GAAP,CAAWza,OAAX,CAAP;AACD;;AAED,WAASo2B,EAAT,CAAa,GAAG/yB,IAAhB,EAAsB;AACpB,WAAOwzB,QAAQT,EAAR,CAAW,GAAG/yB,IAAd,CAAP;AACD;;AAED,WAASgyC,IAAT,CAAe,GAAGhyC,IAAlB,EAAwB;AACtB,WAAOwzB,QAAQwe,IAAR,CAAa,GAAGhyC,IAAhB,CAAP;AACD;;AAED,WAASizB,GAAT,CAAc,GAAGjzB,IAAjB,EAAuB;AACrB,WAAOwzB,QAAQP,GAAR,CAAY,GAAGjzB,IAAf,CAAP;AACD;;AAED;;;AAGA,SAAO;AACL5F,MADK;AAELkC,UAFK;AAGLkE,WAHK;AAIL;AACAtjB,YALK;AAML06B,aANK;AAOL2gC,YAPK;AAQL;AACA9F,YATK;AAUL;AACA0G,YAXK;AAYLE,cAZK;AAaLC,UAbK;AAcL;AACA7jC,QAfK;AAgBLyjC,WAhBK;AAiBL;AACAnmB,MAlBK;AAmBLif,QAnBK;AAoBL/e;AApBK,GAAP;AAsBD;;AA5OD,a;;;;;;;;;;;;;;;;;;;;;;kBCqBwBylB,O;;AAvBxB;;AAGA;;AAGA;;;;AACA;;AACA;;AAGA;;AAGA;;;;;;AAEA;;;;;;;;;AANA;;;AARA;AAqBe,SAASA,OAAT,CAAkBt+C,EAAlB,EAAsBiN,QAAtB,EAAgC3mB,SAAS,EAAzC,EAA6C;AAC1D,QAAMlG,MAAM0F,iBAAWC,SAAX,CAAqB,SAArB,EAAgCia,EAAhC,CAAZ;AACA5f,MAAI4G,IAAJ,CAAS,uBAAT;AACA,QAAM2gB,eAAerhB,OAAO4zB,IAAP,IAAe5zB,OAAO4zB,IAAP,CAAY6N,SAA3B,IAAwCzhC,OAAO4zB,IAAP,CAAY6N,SAAZ,CAAsBpgB,YAAnF;AACAvnB,MAAI+L,KAAJ,CAAW,0BAAyBwb,gBAAgB,SAAU,iBAA9D;;AAEA;AACA,QAAM9W,YAAYmP,EAAlB;AACA,MAAIm/C,MAAJ;AACA,QAAM9C,cAAcpvC,SAASovC,WAA7B;AACA,QAAMF,eAAelvC,SAASkvC,YAA9B;AACA,QAAMnF,eAAe/pC,SAAS+pC,YAA9B;AACA,QAAM5d,UAAU,IAAIke,sBAAJ,EAAhB;;AAEA;AACA,QAAMnD,WAAW;AACf3rC,kBAAc;;AAGhB;AACA;AACA;AACA;AACA;AARiB,GAAjB,CASA,MAAM42C,iBAAiB,mBAAvB;;AAEA;AACA;AACA,MAAIC,uBAAJ;;AAEA;AACA,MAAInlC,OAAOmiC,YAAYgC,MAAZ,CAAmB/3D,OAAO4zB,IAA1B,CAAX;AACA,MAAIA,IAAJ,EAAU;AACR;AACAilC,aAASjlC,KAAKla,EAAd;AACAs/C,2BAAuBplC,IAAvB;AACD,GAJD,MAIO;AACL,UAAM,IAAI1P,KAAJ,CAAW,kCAAiC3Z,SAAU,GAAtD,CAAN;AACD;;AAED;;;;AAIA,WAAS0uD,iBAAT,GAA8B;AAC5B,UAAMC,qBAAqB,iCAAgBtlC,KAAKi+B,iBAAL,CAAuB3pC,GAAvC,CAA3B;AACA,QAAI,CAAC4wC,eAAepiC,GAAf,CAAmBwiC,kBAAnB,CAAL,EAA6C;AAC3CJ,qBAAe/nD,GAAf,CAAmBmoD,kBAAnB,EAAuCtlC,KAAK29B,QAA5C;AACD;AACF;;AAED;;;AAGA,WAAS4H,cAAT,GAA2B;AACzB,UAAMvlC,OAAOmiC,YAAYr/B,GAAZ,CAAgBmiC,MAAhB,CAAb;AACA,QAAIjlC,IAAJ,EAAU;AACR,aAAOA,KAAKjQ,WAAZ;AACD,KAFD,MAEO;AACL,aAAO,EAAP;AACD;AACF;;AAED;;;AAGA,WAAS2wC,eAAT,GAA4B;AAC1B,UAAM1gC,OAAOmiC,YAAYr/B,GAAZ,CAAgBmiC,MAAhB,CAAb;AACA,QAAIjlC,IAAJ,EAAU;AACR,aAAOA,KAAKhQ,YAAZ;AACD,KAFD,MAEO;AACL,aAAO,EAAP;AACD;AACF;;AAED;;;;;AAKA,WAASpnB,QAAT,GAAqB;AACnB,WAAO;AACLkd,UAAInP,SADC;AAELoZ,mBAAaw1C,gBAFR;AAGLv1C,oBAAc0wC;AAHT,KAAP;AAKD;;AAED;;;;AAIA,WAAS8E,MAAT,GAAmB,CAAE;;AAErB;;;;;;AAMA,WAASC,SAAT,CAAoBz9C,MAApB,EAA4BokB,gBAA5B,EAA8C;AAC5C,UAAMpM,OAAOmiC,YAAYr/B,GAAZ,CAAgBmiC,MAAhB,CAAb;AACA;AACA,QAAIjlC,IAAJ,EAAU;AACR,YAAM0lC,qCAAqC19C,OAAO5O,GAAP,CAAWmmB,SAAS;AAC7D,eAAO,sBAAY,CAAC4Y,OAAD,EAAU3wB,MAAV,KAAqB;AACtC;AACA;AACA;AACA;AACA,gBAAMm+C,sBAAsB3lC,KAAK2+B,uBAAL,CAA6Bp/B,MAAMA,KAAN,CAAY75B,IAAzC,CAA5B;;AAEA;AACA,cAAI,iCAAc0G,OAAO4zB,IAAP,CAAY6N,SAAZ,CAAsBpgB,YAApC,KAAqDk4C,mBAAzD,EAA8E;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,gCAAoBvH,MAApB,CACGn5C,YADH,CACgBsa,MAAMA,KADtB,EAEGogB,IAFH,CAEQ,MAAM;AACVgmB,kCAAoBp3C,SAApB,GAAgCo3C,oBAAoBp3C,SAApB,KAAkC,UAAlC,GAA+C,UAA/C,GAA4D,UAA5F;AACA4pB,sBACG,UAAS5Y,MAAMA,KAAN,CAAY75B,IAAK,MAAK65B,MAAMzZ,EAAG,8BAA6B6/C,oBAAoB19B,GAAI,IADhG;AAGD,aAPH,EAQGi2B,KARH,CAQSjtC,OAAO;AACZ/qB,kBAAIqB,KAAJ,CAAU0pB,GAAV;AACAzJ,qBAAOyJ,GAAP;AACD,aAXH;AAYD,WAtBD,MAsBO;AACL;AACA;AACA;AACA;AACA+O,iBAAKm+B,QAAL,CAAc5+B,KAAd;AACA4Y,oBAAS,gBAAe5Y,MAAMA,KAAN,CAAY75B,IAAK,MAAK65B,MAAMzZ,EAAG,IAAvD;AACD;AACF,SAtCM,EAsCJ65B,IAtCI,CAsCCxzC,WAAW;AACjB;AACAjG,cAAI4G,IAAJ,CAASX,OAAT;;AAEA;AACA+yC,kBAAQvG,IAAR,CAAa,WAAb,EAA0B;AACxB1rB,mBAAO,IADiB;AAExB5E,qBAASkX,MAAMzZ;AAFS,WAA1B;;AAKAm0C,mBAAS3rC,YAAT,GAAwB,wBAAY2rC,SAAS3rC,YAArB,EAAmC8d,gBAAnC,CAAxB;;AAEA,gBAAM1uB,QAAQukD,aAAan/B,GAAb,CAAiBvD,MAAM8+B,SAAN,GAAkBv4C,EAAnC,CAAd;AACA,cAAIpI,KAAJ,EAAW;AACTA,kBAAM+gC,EAAN,CAAS,eAAT,EAA0Bp2B,WAAW;AACnC62B,sBAAQvG,IAAR,CAAa,eAAb,EAA8B;AAC5B1rB,uBAAO,IADqB;AAE5B5E,yBAASA;AAFmB,eAA9B;AAID,aALD;AAMD;;AAEDkX,gBAAMm+B,IAAN,CAAW,OAAX,EAAoB,CAAC,EAAEr6B,oBAAF,EAAD,KAA8B;AAChD;AACA;AACA,gBAAIrD,KAAK68B,cAAL,KAAwB,QAA5B,EAAsC;AACpC78B,mBAAK63B,WAAL,CAAiBt4B,MAAMzZ,EAAvB;AACAo5B,sBAAQvG,IAAR,CAAa,aAAb,EAA4B;AAC1B1rB,uBAAO,IADmB;AAE1B5E,yBAASkX,MAAMzZ,EAFW;AAG1Bud,sCAAsBA;AAHI,eAA5B;AAKA;AACA,kBAAI42B,SAAS3rC,YAAT,CAAsBvpB,cAAtB,CAAqCw6B,MAAMzZ,EAA3C,CAAJ,EAAoD;AAClD5f,oBAAI+L,KAAJ,CAAW,kBAAiBstB,MAAMzZ,EAAG,6BAArC;AACA,uBAAOm0C,SAAS3rC,YAAT,CAAsBiR,MAAMzZ,EAA5B,CAAP;AACD;AACF;AACF,WAhBD;AAiBD,SA7EM,CAAP;AA8ED,OA/E0C,CAA3C;;AAiFA,aAAO,kBAAQ8/C,GAAR,CAAYF,kCAAZ,CAAP;AACD;AACF;;AAED;;;;;;;;AAQA,WAAShH,WAAT,CAAsBtzD,UAAU,EAAhC,EAAoC;AAClC,WAAO,sBAAY,CAAC+sC,OAAD,EAAU3wB,MAAV,KAAqB;AACtC,YAAMwY,OAAOmiC,YAAYr/B,GAAZ,CAAgBmiC,MAAhB,CAAb;AACA,UAAI,CAACjlC,IAAL,EAAW;AACTxY,eAAO,IAAI8I,KAAJ,CAAW,6BAA4B3Z,SAAU,GAAjD,CAAP;AACD;;AAED;AACA;AACA,UAAI,iCAAcvK,OAAO4zB,IAAP,CAAY6N,SAAZ,CAAsBpgB,YAApC,CAAJ,EAAuD;AACrD,YAAIriB,QAAQ85B,eAAZ,EAA6B;AAC3B,gBAAM2gC,4BAA4Bz6D,QAAQ85B,eAAR,CAAwBne,KAA1D;AACA,gBAAM++C,4BAA4B16D,QAAQ85B,eAAR,CAAwBje,KAA1D;;AAEA,cAAI4+C,yBAAJ,EAA+B;AAC7B,kBAAME,gBAAgB/lC,KAAKjQ,WAAL,CAAiB7qB,MAAjB,CAAwBq6B,SAASA,MAAMA,KAAN,CAAY75B,IAAZ,KAAqB,OAAtD,EAA+D0T,GAA/D,CAAmEmmB,SAASA,MAAMzZ,EAAlF,CAAtB;AACA,kBAAMkgD,iBAAiBhmC,KAAKsgC,eAAL,CACpBp7D,MADoB,CACbq6B,SAASA,MAAMA,KAAN,CAAY75B,IAAZ,KAAqB,OADjB,EAEpB0T,GAFoB,CAEhBmmB,SAASA,MAAMzZ,EAFC,CAAvB;;AAIA,kBAAMlN,SAASonB,KAAKu/B,wBAAL,CAA8BsG,yBAA9B,EAAyD;AACtElP,wBAAU,CAAC,GAAGoP,aAAJ,EAAmB,GAAGC,cAAtB;AAD4D,aAAzD,CAAf;AAGA,gBAAIptD,OAAOrR,KAAX,EAAkB;AAChBrB,kBAAI4G,IAAJ,CAAU,iDAAgD8L,OAAOynD,QAAS,EAA1E;AACD;AACF;AACD,cAAIyF,yBAAJ,EAA+B;AAC7B,kBAAMC,gBAAgB/lC,KAAKjQ,WAAL,CAAiB7qB,MAAjB,CAAwBq6B,SAASA,MAAMA,KAAN,CAAY75B,IAAZ,KAAqB,OAAtD,EAA+D0T,GAA/D,CAAmEmmB,SAASA,MAAMzZ,EAAlF,CAAtB;AACA,kBAAMkgD,iBAAiBhmC,KAAKsgC,eAAL,CACpBp7D,MADoB,CACbq6B,SAASA,MAAMA,KAAN,CAAY75B,IAAZ,KAAqB,OADjB,EAEpB0T,GAFoB,CAEhBmmB,SAASA,MAAMzZ,EAFC,CAAvB;;AAIA,kBAAMlN,SAASonB,KAAKu/B,wBAAL,CAA8BuG,yBAA9B,EAAyD;AACtEnP,wBAAU,CAAC,GAAGoP,aAAJ,EAAmB,GAAGC,cAAtB;AAD4D,aAAzD,CAAf;AAGA,gBAAIptD,OAAOrR,KAAX,EAAkB;AAChBrB,kBAAI4G,IAAJ,CAAU,iDAAgD8L,OAAOynD,QAAS,EAA1E;AACD;AACF;AACD,iBAAOj1D,QAAQ85B,eAAf;AACD;AACF;;AAEDlF,WACG0+B,WADH,CACetzD,OADf,EAEGu0C,IAFH,CAEQprB,SAAS;AACb,YAAInpB,QAAQwd,WAAR,IAAuBg6C,mBAAYqD,WAAZ,GAA0BhjE,MAArD,EAA6D;AAC3DiD,cAAI+L,KAAJ,CAAU,0CAAV;AACAsiB,gBAAMD,GAAN,GAAYsuC,mBAAY5gB,GAAZ,CAAgB52C,QAAQwd,WAAxB,EAAqC2L,MAAMD,GAA3C,EAAgD;AAC1D5tB,kBAAM6tB,MAAM7tB,IAD8C;AAE1D2/B,sBAAU20B,gBAAKyD,QAAL,CAAcx0C;AAFkC,WAAhD,CAAZ;AAID;;AAEDkuB,gBAAQ5jB,KAAR;AACD,OAZH,EAaG2pC,KAbH,CAaS12C,MAbT;AAcD,KAzDM,CAAP;AA0DD;;AAED;;;;;;AAMA,WAAS63C,mBAAT,CAA8B6G,WAA9B,EAA2C;AACzC,WAAO,sBAAY,CAAC/tB,OAAD,EAAU3wB,MAAV,KAAqB;AACtC,YAAMwY,OAAOmiC,YAAYr/B,GAAZ,CAAgBmiC,MAAhB,CAAb;AACA,UAAI,CAACjlC,IAAL,EAAW;AACTxY,eAAO,IAAI8I,KAAJ,CAAW,6BAA4B3Z,SAAU,GAAjD,CAAP;AACD;;AAEDqpB,WACGq/B,mBADH,CACuB6G,WADvB,EAEGvmB,IAFH,CAEQ,MAAM;AACV;AACA,YAAIumB,YAAYx/D,IAAZ,KAAqB,QAAzB,EAAmC;AACjC2+D;AACD;;AAED;AACAc;;AAEA;AACA;AACAhuB,gBAAQnY,KAAKg8B,gBAAb;AACD,OAdH,EAeGkC,KAfH,CAeS12C,MAfT;AAgBD,KAtBM,CAAP;AAuBD;;AAED;;;;AAIA,WAAS2+C,aAAT,CAAwBlgD,gBAAxB,EAA0C;AACxC;AACA,QAAI,gCAAoB0M,OAApB,KAAgC,SAApC,EAA+C;AAC7CzsB,UAAI+L,KAAJ,CAAU,+DAAV;AACA;AACD;;AAED,UAAMm0D,WAAW,EAAjB;;AAEA;AACA,SAAK,MAAM/9C,OAAX,IAAsB4xC,SAAS3rC,YAA/B,EAA6C;AAC3C83C,eAAS3iE,IAAT,CACE,sBAAY,CAAC00C,OAAD,EAAU3wB,MAAV,KAAqB;AAC/BthB,YAAI+L,KAAJ,CAAW,2BAA0BgoD,SAAS3rC,YAAT,CAAsBjG,OAAtB,CAA+B,0BAAyBA,OAAQ,EAArG;AACAg+C,2BAAmBh+C,OAAnB,EAA4B4xC,SAAS3rC,YAAT,CAAsBjG,OAAtB,CAA5B,EACGs3B,IADH,CACQxH,OADR,EAEG+lB,KAFH,CAES12C,MAFT;AAGD,OALD,CADF;AAQD;;AAED,WAAO,kBAAQo+C,GAAR,CAAYQ,QAAZ,CAAP;AACD;;AAED;;;;;;;AAOA,WAASC,kBAAT,CAA6Bh+C,OAA7B,EAAsCi+C,eAAtC,EAAuD;AACrD,UAAMtmC,OAAOmiC,YAAYr/B,GAAZ,CAAgBmiC,MAAhB,CAAb;AACA,UAAM/F,UAAUl/B,KAAKm/B,UAAL,EAAhB;;AAEA;AACA,UAAMf,SAASc,QAAQhvC,IAAR,CAAakuC,UAAUA,OAAO7+B,KAAP,CAAazZ,EAAb,KAAoBuC,OAA3C,CAAf;AACA,QAAI+1C,MAAJ,EAAY;AACV;AACA,YAAMmI,aAAanI,OAAOoI,aAAP,EAAnB;AACAD,iBAAWE,SAAX,CAAqBnhE,OAArB,CAA6BohE,YAAY;AACvCA,iBAASJ,eAAT,GAA2BA,eAA3B;AACD,OAFD;AAGA,aAAOlI,OAAO+H,aAAP,CAAqBI,UAArB,CAAP;AACD,KAPD,MAOO;AACL,YAAMnH,SAAU,+CAA8C/2C,OAAQ,EAAtE;AACAniB,UAAI4G,IAAJ,CAASsyD,MAAT;AACA,aAAO,kBAAQ53C,MAAR,CAAe43C,MAAf,CAAP;AACD;AACF;;AAED;;;;;;;;AAQA,WAASj9B,aAAT,CAAwB/2B,UAAU,EAAlC,EAAsC;AACpC;AACA,WAAO,sBAAY,CAAC+sC,OAAD,EAAU3wB,MAAV,KAAqB;AACtCk3C,kBAAYtzD,OAAZ,EACGu0C,IADH,CACQ0f,mBADR,EAEG1f,IAFH,CAEQxH,OAFR,EAGG+lB,KAHH,CAGS12C,MAHT;AAID,KALM,CAAP;AAMD;;AAED;;;;;;;;;AASA,WAASvC,YAAT,CAAuB6a,QAAvB,EAAiC10B,OAAjC,EAA0C;AACxC,UAAM40B,OAAOmiC,YAAYr/B,GAAZ,CAAgBmiC,MAAhB,CAAb;AACA,UAAM1lC,QAAQu9B,aAAah6B,GAAb,CAAiBhD,SAASha,EAA1B,CAAd;AACA,WAAOka,KACJ/a,YADI,CACSsa,MAAMA,KADf,EACsBn0B,OADtB,EAEJu0C,IAFI,CAEC,MAAM;AACV;AACA,YAAMjiC,QAAQukD,aAAan/B,GAAb,CAAiBvD,MAAM8+B,SAAN,GAAkBv4C,EAAnC,CAAd;AACA,UAAIpI,KAAJ,EAAW;AACTA,cAAM+gC,EAAN,CAAS,eAAT,EAA0Bp2B,WAAW;AACnC62B,kBAAQvG,IAAR,CAAa,eAAb,EAA8B;AAC5B1rB,mBAAO,IADqB;AAE5B5E,qBAASA;AAFmB,WAA9B;AAID,SALD;AAMD;;AAEDkX,YAAMm+B,IAAN,CAAW,OAAX,EAAoB,CAAC,EAAEr6B,oBAAF,EAAD,KAA8B;AAChD;AACA;AACA,YAAIrD,KAAK68B,cAAL,KAAwB,QAA5B,EAAsC;AACpC78B,eAAK63B,WAAL,CAAiBt4B,MAAMzZ,EAAvB;AACAo5B,kBAAQvG,IAAR,CAAa,aAAb,EAA4B;AAC1B1rB,mBAAO,IADmB;AAE1B5E,qBAASkX,MAAMzZ,EAFW;AAG1Bud,kCAAsBA;AAHI,WAA5B;AAKA;AACA,cAAI42B,SAAS3rC,YAAT,CAAsBvpB,cAAtB,CAAqCw6B,MAAMzZ,EAA3C,CAAJ,EAAoD;AAClD5f,gBAAI+L,KAAJ,CAAW,kBAAiBstB,MAAMzZ,EAAG,6BAArC;AACA,mBAAOm0C,SAAS3rC,YAAT,CAAsBiR,MAAMzZ,EAA5B,CAAP;AACD;AACF;AACF,OAhBD;;AAkBAo5B,cAAQvG,IAAR,CAAa,gBAAb,EAA+B;AAC7B+Z,oBAAYtnD,QAAQid,OADS;AAE7BA,iBAASyX,SAASha;AAFW,OAA/B;AAID,KApCI,EAqCJo4C,KArCI,CAqCEjtC,OAAOA,GArCT,CAAP;AAsCD;;AAED;;;;;;;;;AASA,WAASsuC,wBAAT,CAAmCa,eAAnC,EAAoDh1D,UAAU,EAA9D,EAAkE;AAChE,QAAI,iCAAcgB,OAAO4zB,IAAP,CAAY6N,SAAZ,CAAsBpgB,YAApC,CAAJ,EAAuD;AACrD,YAAMuS,OAAOmiC,YAAYr/B,GAAZ,CAAgBmiC,MAAhB,CAAb;AACA,aAAOjlC,KAAKu/B,wBAAL,CAA8Ba,eAA9B,EAA+Ch1D,OAA/C,CAAP;AACD,KAHD,MAGO;AACLlF,UAAI4G,IAAJ,CAAS,uEAAT;AACA,aAAO,EAAEvF,OAAO,IAAT,EAAP;AACD;AACF;;AAED;;;;;;;;AAQA,WAASo/D,YAAT,CAAuBpyC,KAAvB,EAA8BnpB,UAAU,EAAxC,EAA4C;AAC1C,WAAO,sBAAY,CAAC+sC,OAAD,EAAU3wB,MAAV,KAAqB;AACtC,YAAMwY,OAAOmiC,YAAYr/B,GAAZ,CAAgBmiC,MAAhB,CAAb;AACA,UAAI,CAACjlC,IAAL,EAAW;AACTxY,eAAO,IAAI8I,KAAJ,CAAW,6BAA4B3Z,SAAU,GAAjD,CAAP;AACD;;AAED,UAAIvL,QAAQwd,WAAR,IAAuBg6C,mBAAYqD,WAAZ,GAA0BhjE,MAArD,EAA6D;AAC3DiD,YAAI+L,KAAJ,CAAU,2CAAV;AACAsiB,cAAMD,GAAN,GAAYsuC,mBAAY5gB,GAAZ,CAAgB52C,QAAQwd,WAAxB,EAAqC2L,MAAMD,GAA3C,EAAgD;AAC1D5tB,gBAAM6tB,MAAM7tB,IAD8C;AAE1D2/B,oBAAU20B,gBAAKyD,QAAL,CAAcv0C;AAFkC,SAAhD,CAAZ;AAID;;AAED8V,WACGs/B,oBADH,CACwB/qC,KADxB,EAEGorB,IAFH,CAEQ,MAAM;AACV;AACAwlB,kCAA0B5wC,KAA1B;AACA4jB;AACD,OANH,EAOG+lB,KAPH,CAOS12C,MAPT;AAQD,KAtBM,CAAP;AAuBD;;AAED;;;;;;;;AAQA,WAAS82C,YAAT,CAAuBlzD,UAAU,EAAjC,EAAqC;AACnC,WAAO,sBAAY,CAAC+sC,OAAD,EAAU3wB,MAAV,KAAqB;AACtC,YAAMwY,OAAOmiC,YAAYr/B,GAAZ,CAAgBmiC,MAAhB,CAAb;AACA,UAAI,CAACjlC,IAAL,EAAW;AACTxY,eAAO,IAAI8I,KAAJ,CAAW,6BAA4B3Z,SAAU,GAAjD,CAAP;AACD;;AAED;AACA;AACA,UAAI,iCAAcvK,OAAO4zB,IAAP,CAAY6N,SAAZ,CAAsBpgB,YAApC,CAAJ,EAAuD;AACrD,YAAIriB,QAAQ85B,eAAZ,EAA6B;AAC3B,gBAAM2gC,4BAA4Bz6D,QAAQ85B,eAAR,CAAwBne,KAA1D;AACA,gBAAM++C,4BAA4B16D,QAAQ85B,eAAR,CAAwBje,KAA1D;;AAEA,cAAI4+C,yBAAJ,EAA+B;AAC7B,kBAAMjtD,SAASonB,KAAKu/B,wBAAL,CAA8BsG,yBAA9B,EAAyD;AACtElP,wBAAU32B,KAAKjQ,WAAL,CAAiB7qB,MAAjB,CAAwBq6B,SAASA,MAAMA,KAAN,CAAY75B,IAAZ,KAAqB,OAAtD,EAA+D0T,GAA/D,CAAmEmmB,SAASA,MAAMzZ,EAAlF;AAD4D,aAAzD,CAAf;AAGA,gBAAIlN,OAAOrR,KAAX,EAAkB;AAChBrB,kBAAI4G,IAAJ,CAAU,iDAAgD8L,OAAOynD,QAAS,EAA1E;AACD;AACF;AACD,cAAIyF,yBAAJ,EAA+B;AAC7B,kBAAMltD,SAASonB,KAAKu/B,wBAAL,CAA8BuG,yBAA9B,EAAyD;AACtEnP,wBAAU32B,KAAKjQ,WAAL,CAAiB7qB,MAAjB,CAAwBq6B,SAASA,MAAMA,KAAN,CAAY75B,IAAZ,KAAqB,OAAtD,EAA+D0T,GAA/D,CAAmEmmB,SAASA,MAAMzZ,EAAlF;AAD4D,aAAzD,CAAf;AAGA,gBAAIlN,OAAOrR,KAAX,EAAkB;AAChBrB,kBAAI4G,IAAJ,CAAU,iDAAgD8L,OAAOynD,QAAS,EAA1E;AACD;AACF;AACD,iBAAOj1D,QAAQ85B,eAAf;AACD;AACF;;AAED;AACA;AACA;AACA,YAAMogC,qBAAqB,iCAAgBtlC,KAAKi+B,iBAAL,CAAuB3pC,GAAvC,CAA3B;AACA,YAAMsyC,mBAAmB1B,eAAepiC,GAAf,CAAmBwiC,kBAAnB,CAAzB;AACA,UAAI,CAACtlC,KAAK29B,QAAN,IAAkBiJ,gBAAtB,EAAwC;AACtC5mC,aAAK29B,QAAL,GAAgBiJ,gBAAhB;AACD;;AAED5mC,WACGs+B,YADH,CACgBlzD,OADhB,EAEGu0C,IAFH,CAEQl4B,UAAU;AACd,YAAIrc,QAAQwd,WAAR,IAAuBg6C,mBAAYqD,WAAZ,GAA0BhjE,MAArD,EAA6D;AAC3DiD,cAAI+L,KAAJ,CAAU,2CAAV;AACAwV,iBAAO6M,GAAP,GAAasuC,mBAAY5gB,GAAZ,CAAgB52C,QAAQwd,WAAxB,EAAqCnB,OAAO6M,GAA5C,EAAiD;AAC5D5tB,kBAAM+gB,OAAO/gB,IAD+C;AAE5D2/B,sBAAU20B,gBAAKyD,QAAL,CAAcx0C;AAFoC,WAAjD,CAAb;AAID;AACDkuB,gBAAQ1wB,MAAR;AACD,OAXH,EAYGy2C,KAZH,CAYS12C,MAZT;AAaD,KAvDM,CAAP;AAwDD;;AAED;;;;;;;;AAQA,WAASq/C,cAAT,CAAyBz7D,UAAU,EAAnC,EAAuC;AACrC;AACA,WAAO,sBAAY,CAAC+sC,OAAD,EAAU3wB,MAAV,KAAqB;AACtC82C,mBAAalzD,OAAb,EACGu0C,IADH,CACQ0f,mBADR,EAEG1f,IAFH,CAEQxH,OAFR,EAGG+lB,KAHH,CAGS12C,MAHT;AAID,KALM,CAAP;AAMD;;AAED;;;;;;;;AAQA,WAASs/C,aAAT,CAAwBr/C,MAAxB,EAAgCrc,UAAU,EAA1C,EAA8C;AAC5C,QAAIA,QAAQwd,WAAR,IAAuBg6C,mBAAYqD,WAAZ,GAA0BhjE,MAArD,EAA6D;AAC3DiD,UAAI+L,KAAJ,CAAU,4CAAV;AACAwV,aAAO6M,GAAP,GAAasuC,mBAAY5gB,GAAZ,CAAgB52C,QAAQwd,WAAxB,EAAqCnB,OAAO6M,GAA5C,EAAiD;AAC5D5tB,cAAM+gB,OAAO/gB,IAD+C;AAE5D2/B,kBAAU20B,gBAAKyD,QAAL,CAAcv0C;AAFoC,OAAjD,CAAb;AAID;;AAED,WAAO,sBAAY,CAACiuB,OAAD,EAAU3wB,MAAV,KAAqB;AACtC,YAAMwY,OAAOmiC,YAAYr/B,GAAZ,CAAgBmiC,MAAhB,CAAb;AACA,UAAI,CAACjlC,IAAL,EAAW;AACTxY,eAAO,IAAI8I,KAAJ,CAAW,6BAA4B3Z,SAAU,GAAjD,CAAP;AACD;;AAEDqpB,WACGs/B,oBADH,CACwB73C,MADxB,EAEGk4B,IAFH,CAEQ,MAAM;AACV;AACA0lB;;AAEA;AACAF,kCAA0B19C,MAA1B;;AAEA0wB;AACD,OAVH,EAWG+lB,KAXH,CAWS12C,MAXT;AAYD,KAlBM,CAAP;AAmBD;;AAED;;;;;;;;AAQA,WAASw2C,eAAT,CAA0BxC,SAA1B,EAAqCpwD,UAAU,EAA/C,EAAmD;AACjD,WAAO,sBAAY,CAAC+sC,OAAD,EAAU3wB,MAAV,KAAqB;AACtC,YAAMwY,OAAOmiC,YAAYr/B,GAAZ,CAAgBmiC,MAAhB,CAAb;AACA,UAAI,CAACjlC,IAAL,EAAW;AACTxY,eAAO,IAAI8I,KAAJ,CAAW,6BAA4B3Z,SAAU,GAAjD,CAAP;AACD;;AAEDqpB,WACGg+B,eADH,CACmBxC,SADnB,EAEG7b,IAFH,CAEQxH,OAFR,EAGG+lB,KAHH,CAGS12C,MAHT;AAID,KAVM,CAAP;AAWD;;AAED;;;;AAIA,WAASO,GAAT,GAAgB;AACd7hB,QAAI4G,IAAJ,CAAS,iBAAT;AACA,UAAMkzB,OAAOmiC,YAAYr/B,GAAZ,CAAgBmiC,MAAhB,CAAb;AACA,QAAIjlC,IAAJ,EAAU;AACRA,WAAK/D,KAAL;AACD;AACDijB,YAAQvG,IAAR,CAAa,eAAb,EAA8BhiC,SAA9B;AACD;;AAED;;;;;AAKA,WAAS4/C,YAAT,CAAuBI,QAAvB,EAAiC;AAC/B,UAAM32B,OAAOmiC,YAAYr/B,GAAZ,CAAgBmiC,MAAhB,CAAb;AACA,QAAIjlC,IAAJ,EAAU;AACR22B,eAASrxD,OAAT,CAAiB+iB,WAAW;AAC1B,YAAIk9C,iBAAiBwB,SAAjB,CAA2BxnC,SAASA,MAAMzZ,EAAN,KAAauC,OAAjD,IAA4D,CAAC,CAAjE,EAAoE;AAClE2X,eAAK63B,WAAL,CAAiBxvC,OAAjB;AACA;AACA,cAAI4xC,SAAS3rC,YAAT,CAAsBvpB,cAAtB,CAAqCsjB,OAArC,CAAJ,EAAmD;AACjDniB,gBAAI+L,KAAJ,CAAW,kBAAiBoW,OAAQ,6BAApC;AACA,mBAAO4xC,SAAS3rC,YAAT,CAAsBjG,OAAtB,CAAP;AACD;AACF;AACF,OATD;AAUD;AACF;;AAED;;;;;;;;;;;;AAYA,WAASjE,QAAT,CAAmB4iD,WAAnB,EAAgCC,cAAc,EAA9C,EAAkD;AAChD,UAAMjnC,OAAOmiC,YAAYr/B,GAAZ,CAAgBmiC,MAAhB,CAAb;AACA,QAAIjlC,IAAJ,EAAU;AACR,aAAOA,KAAK5b,QAAL,CAAc4iD,WAAd,EAA2BC,WAA3B,CAAP;AACD,KAFD,MAEO;AACL,aAAO,KAAP;AACD;AACF;;AAED;;;;;;AAMA,WAAS3iD,QAAT,CAAmB+D,OAAnB,EAA4B;AAC1B,WAAO,sBAAY,CAAC8vB,OAAD,EAAU3wB,MAAV,KAAqB;AACtC,YAAMwY,OAAOmiC,YAAYr/B,GAAZ,CAAgBmiC,MAAhB,CAAb;AACA,UAAI,CAACjlC,IAAL,EAAW;AACTxY,eAAO,IAAI8I,KAAJ,CAAW,6BAA4B3Z,SAAU,GAAjD,CAAP;AACA;AACD;AACDqpB,WACG1b,QADH,CACY+D,OADZ,EAEGs3B,IAFH,CAEQxH,OAFR,EAGG+lB,KAHH,CAGS12C,MAHT;AAID,KAVM,CAAP;AAWD;;AAED,WAASi3B,EAAT,CAAa,GAAG/yB,IAAhB,EAAsB;AACpB,WAAOwzB,QAAQT,EAAR,CAAW,GAAG/yB,IAAd,CAAP;AACD;;AAED,WAASgyC,IAAT,CAAe,GAAGhyC,IAAlB,EAAwB;AACtB,WAAOwzB,QAAQwe,IAAR,CAAa,GAAGhyC,IAAhB,CAAP;AACD;;AAED,WAASizB,GAAT,CAAc,GAAGjzB,IAAjB,EAAuB;AACrB,WAAOwzB,QAAQP,GAAR,CAAY,GAAGjzB,IAAf,CAAP;AACD;;AAED;;;;;AAKA,WAAS05C,sBAAT,CAAiC8B,UAAjC,EAA6C;AAC3C;AACA;AACA;AACAA,eAAWxL,cAAX,GAA4B9b,SAAS;AACnCV,cAAQvG,IAAR,CAAa,gBAAb,EAA+B;AAC7B6iB,mBAAW5b,MAAM4b;AADY,OAA/B;AAGD,KAJD;;AAMA;AACA0L,eAAWtK,OAAX,GAAqBr9B,SAAS;AAC5B,UAAI7hB,QAAQukD,aAAan/B,GAAb,CAAiBvD,MAAM8+B,SAAN,GAAkBv4C,EAAnC,CAAZ;AACA,UAAIpI,KAAJ,EAAW;AACT;AACAA,cAAMygD,QAAN,CAAe5+B,KAAf;AACD,OAHD,MAGO;AACL;AACA7hB,gBAAQukD,aAAa4B,YAAb,CAA0BtkC,MAAM8+B,SAAN,EAA1B,EAA6C,CAAC9+B,KAAD,CAA7C,CAAR;AACD;;AAED7hB,YAAM+gC,EAAN,CAAS,eAAT,EAA0Bp2B,WAAW;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,YAAI,CAAC,iCAAcjc,OAAO4zB,IAAP,CAAY6N,SAAZ,CAAsBpgB,YAApC,CAAL,EAAwD;AACtD,gBAAM05C,iBAAiBrK,aAAah6B,GAAb,CAAiBza,OAAjB,CAAvB;AACA,cAAI8+C,cAAJ,EAAoB;AAClBA,2BAAevC,OAAf;AACA1+D,gBAAI4G,IAAJ,CAAU,qBAAoBub,OAAQ,GAAtC;AACD,WAHD,MAGO;AACLniB,gBAAI4G,IAAJ,CAAU,SAAQub,OAAQ,aAA1B;AACD;AACF;;AAED62B,gBAAQvG,IAAR,CAAa,eAAb,EAA8B;AAC5B1rB,iBAAO,KADqB;AAE5B5E,mBAASA;AAFmB,SAA9B;AAID,OArBD;;AAuBAkX,YAAMm+B,IAAN,CAAW,OAAX,EAAoB,MAAM;AACxBxe,gBAAQvG,IAAR,CAAa,aAAb,EAA4B;AAC1B1rB,iBAAO,KADmB;AAE1B5E,mBAASkX,MAAMzZ,EAFW;AAG1B;AACAud,gCAAsB;AAJI,SAA5B;AAMD,OAPD;;AASA,YAAM,EAAE39B,IAAF,KAAW65B,MAAM32B,QAAN,EAAjB;AACA1C,UAAI4G,IAAJ,CAAU,uBAAsBpH,IAAK,MAAK65B,MAAMzZ,EAAG,GAAnD;;AAEA;AACAo5B,cAAQvG,IAAR,CAAa,WAAb,EAA0B;AACxB1rB,eAAO,KADiB;AAExB5E,iBAASkX,MAAMzZ;AAFS,OAA1B;AAID,KAlDD;AAmDD;;AAED;;;;;AAKA,WAASif,YAAT,GAAyB;AACvB,UAAMqiC,UAAUpnC,IAAhB;AACA,UAAMqnC,UAAUlF,YAAYgC,MAAZ,CAAmB/3D,OAAO4zB,IAA1B,CAAhB;AACA,QAAIqnC,OAAJ,EAAa;AACX;AACApC,eAASoC,QAAQvhD,EAAjB;AACAka,aAAOqnC,OAAP;;AAEA;AACAD,cAAQr3C,WAAR,CAAoBzqB,OAApB,CAA4BgiE,iBAAiB;AAC3CD,gBAAQlJ,QAAR,CAAiBmJ,aAAjB;AACD,OAFD;;AAIA;AACAlC,6BAAuBiC,OAAvB;;AAEA;AACAD,cAAQnrC,KAAR;AACD,KAfD,MAeO;AACL,YAAM,IAAI3L,KAAJ,CAAW,kCAAiC3Z,SAAU,GAAtD,CAAN;AACD;AACF;;AAED,WAAS4wD,OAAT,GAAoB;AAClB,WAAOvnC,IAAP;AACD;;AAED,WAASygC,oBAAT,GAAiC;AAC/B,WAAOzgC,KAAKi+B,iBAAZ;AACD;;AAED,WAASuJ,mBAAT,GAAgC;AAC9B,WAAOrC,uBAAP;AACD;;AAED;;;AAGA,SAAO;AACLr/C,QAAInP,SADC;AAELvK,UAFK;AAGL;AACA,QAAI4zB,IAAJ,GAAY;AACV,aAAOunC,SAAP;AACD,KANI;AAOL3+D,YAPK;AAQL,QAAImnB,WAAJ,GAAmB;AACjB,aAAOw1C,gBAAP;AACD,KAVI;AAWL,QAAIv1C,YAAJ,GAAoB;AAClB,aAAO0wC,iBAAP;AACD,KAbI;AAcL8E,UAdK;AAeLC,aAfK;AAgBLlP,gBAhBK;AAiBLtxC,gBAjBK;AAkBLs6C,4BAlBK;AAmBL;AACAb,eApBK;AAqBLJ,gBArBK;AAsBLe,uBAtBK;AAuBLoB,wBAvBK;AAwBL+G,uBAxBK;AAyBLrlC,iBAzBK;AA0BLwkC,gBA1BK;AA2BLE,kBA3BK;AA4BLC,iBA5BK;AA6BL;AACA/hC,gBA9BK;AA+BLi5B,mBA/BK;AAgCLj2C,OAhCK;AAiCL3D,YAjCK;AAkCLE,YAlCK;AAmCL6hD,iBAnCK;AAoCL;AACA1nB,MArCK;AAsCLif,QAtCK;AAuCL/e;AAvCK,GAAP;AAyCD;;AA/1BD;;;AARA,e;;;;;;;;;;;;;kBCMwB6jB,K;;AAXxB;;AAGA;;;;AACA;;;;AAEA;;;;;;;AAJA;AASe,SAASA,KAAT,CAAgBiF,UAAhB,EAA4BtE,WAA5B,EAAyC;AACtD,QAAMj9D,MAAM0F,iBAAWC,SAAX,CAAqB,OAArB,EAA8B47D,WAAW3hD,EAAzC,CAAZ;AACA5f,MAAI4G,IAAJ,CAAU,gBAAe26D,WAAW/hE,IAAK,SAAzC;;AAEA;AACA,QAAMogB,KAAK2hD,WAAW3hD,EAAtB;AACA,QAAMyZ,QAAQkoC,UAAd;AACA,MAAIhoC,SAAS0jC,WAAb;AACA,QAAM9K,aAAa,EAAnB;AACA,MAAItB,cAAc,EAAlB;AACA,QAAM7X,UAAU,IAAIke,sBAAJ,EAAhB;;AAEA;;;;AAIA79B,QAAMmoC,OAAN,GAAgB9nB,SAAS;AACvB15C,QAAI+L,KAAJ,CAAU,iBAAV,EAA6B2tC,KAA7B;AACAV,YAAQvG,IAAR,CAAa,OAAb,EAAsB;AACpBtwB,eAASkX,MAAMzZ,EADK;AAEpB;AACA;AACA;AACA;AACA;AACA;AACA;AACAud,4BAAsB,CAAC,CAACuc;AATJ,KAAtB;AAWD,GAbD;;AAeA;;;;;AAKArgB,QAAMooC,MAAN,GAAe/nB,SAAS;AACtB15C,QAAI+L,KAAJ,CAAU,iBAAV,EAA6B2tC,KAA7B;AACAV,YAAQvG,IAAR,CAAa,OAAb,EAAsB;AACpBtwB,eAASkX,MAAMzZ;AADK,KAAtB;AAGD,GALD;;AAOA;;;;;AAKAyZ,QAAMqoC,QAAN,GAAiBhoB,SAAS;AACxB15C,QAAI+L,KAAJ,CAAU,iBAAV,EAA6B2tC,KAA7B;AACAV,YAAQvG,IAAR,CAAa,SAAb,EAAwB;AACtBtwB,eAASkX,MAAMzZ;AADO,KAAxB;AAGD,GALD;;AAOA,WAASw+C,SAAT,CAAoBuD,SAApB,EAA+B;AAC7BpoC,aAASooC,SAAT;AACD;AACD,WAASxJ,SAAT,GAAsB;AACpB,WAAO5+B,MAAP;AACD;;AAED;;;;;AAKA,WAAS72B,QAAT,GAAqB;AACnB,WAAO;AACLkd,QADK;AAELgiD,gBAAUroC,OAAO3Z,EAFZ;AAGLpgB,YAAM65B,MAAM75B,IAHP;AAILqiE,aAAOxoC,MAAMwoC,KAJR;AAKLrU,aAAOn0B,MAAMm0B,KALR;AAML9K,eAASrpB,MAAMqpB,OANV;AAOL11C,aAAOqsB,MAAM8X,UAPR;AAQLghB,kBAAYA,WAAWj/C,GAAX,CAAe0rD,WAAWA,QAAQh/C,EAAlC;AARP,KAAP;AAUD;;AAED;;;;;;;AAOA,WAAS++C,QAAT,CAAmBtM,SAAnB,EAA8Ba,SAA9B,EAAyC;AACvC,QAAI0L,OAAJ;AACA;AACA,QAAI,OAAOvM,SAAP,KAAqB,QAAzB,EAAmC;AACjCryD,UAAI4G,IAAJ,CAAU,8CAA6CyrD,SAAU,EAAjE;;AAEAuM,gBAAUkD,SAASC,aAAT,CAAuB1P,SAAvB,CAAV;AACA,UAAI,CAACuM,OAAL,EAAc;AACZ5+D,YAAIqB,KAAJ,CAAW,0CAAyCgxD,SAAU,GAA9D;AACA,eAAO,KAAP;AACD;AACF,KARD,MAQO;AACLryD,UAAI4G,IAAJ,CAAS,0CAAT;;AAEAg4D,gBAAUvM,SAAV;AACD;;AAED;;AAEA,QAAIF,WAAW9yD,OAAX,CAAmBu/D,OAAnB,IAA8B,CAAC,CAAnC,EAAsC;AACpC;AACA5+D,UAAI4G,IAAJ,CAAS,sDAAT;AACA;AACD;;AAEDurD,eAAW50D,IAAX,CAAgBqhE,OAAhB;;AAEA,UAAMp+D,OAAO64B,MAAM75B,IAAnB;AACA,UAAMwiE,WAAWF,SAASG,aAAT,CAAuBzhE,IAAvB,CAAjB;;AAEA;AACA;AACA;AACAwhE,aAASpiD,EAAT,GAAe,GAAEpf,IAAK,IAAG,2BAAeof,EAAf,CAAmB,EAA5C;AACAoiD,aAASnlB,KAAT,CAAeqlB,MAAf,GAAwB,MAAxB;AACAF,aAASnlB,KAAT,CAAeslB,KAAf,GAAuB,MAAvB;;AAEA,QAAI;AACFH,eAASI,SAAT,GAAqB7oC,MAArB;AACD,KAFD,CAEE,OAAOl4B,KAAP,EAAc;AACdrB,UAAI+L,KAAJ,CAAU,iEAAV;AACA;AACAi2D,eAASK,GAAT,GAAeh/D,OAAOi/D,GAAP,CAAWC,eAAX,CAA2BhpC,MAA3B,CAAf;AACD;;AAEDyoC,aAASQ,QAAT,GAAoB,MAApB;;AAEA,QAAIhiE,SAAS,OAAb,EAAsB;AACpBwhE,eAASxU,KAAT,GAAiB,MAAjB;AACA;AACAwU,eAASS,WAAT,GAAuB,MAAvB;AACA;AACAT,eAASU,IAAT,GAAgB1K,KAAhB,CAAsBjtC,OAAO;AAC3B/qB,YAAI+L,KAAJ,CAAW,gCAA+Bi2D,SAASpiD,EAAG,KAAImL,IAAI9kB,OAAQ,EAAtE;AACD,OAFD;AAGD;;AAED;AACA,QAAIitD,aAAa,OAAO8O,SAASW,SAAhB,KAA8B,WAA/C,EAA4D;AAC1D;AACAX,eACGW,SADH,CACazP,SADb,EAEGzZ,IAFH,CAEQ,MAAM;AACVz5C,YAAI+L,KAAJ,CAAW,uBAAsBmnD,SAAU,GAA3C;AACD,OAJH,EAKG8E,KALH,CAKS32D,SAAS;AACdrB,YAAI+L,KAAJ,CAAW,gCAA+BmnD,SAAU,KAAI7xD,MAAM4E,OAAQ,EAAtE;AACD,OAPH;AAQD,KAVD,MAUO,IAAIitD,aAAa,OAAO8O,SAASW,SAAhB,KAA8B,WAA/C,EAA4D;AACjE3iE,UAAI4G,IAAJ,CAAS,iEAAT;AACD;;AAEDg4D,YAAQgE,WAAR,CAAoBZ,QAApB;;AAEA;AACA,WAAO,IAAP;AACD;;AAED;;;;;;AAMA,WAASnD,UAAT,CAAqBxM,SAArB,EAAgC;AAC9B,QAAIuM,OAAJ;AACA;AACA,QAAI,OAAOvM,SAAP,KAAqB,QAAzB,EAAmC;AACjCryD,UAAI4G,IAAJ,CAAU,+CAA8CyrD,SAAU,EAAlE;;AAEAuM,gBAAUkD,SAASC,aAAT,CAAuB1P,SAAvB,CAAV;AACA,UAAI,CAACuM,OAAL,EAAc;AACZ5+D,YAAIqB,KAAJ,CAAW,0CAAyCgxD,SAAU,GAA9D;AACA,eAAO,KAAP;AACD;AACF,KARD,MAQO;AACLryD,UAAI4G,IAAJ,CAAS,2CAAT;;AAEAg4D,gBAAUvM,SAAV;AACD;;AAED,UAAM5yD,QAAQ0yD,WAAW9yD,OAAX,CAAmBu/D,OAAnB,CAAd;AACA,QAAIn/D,UAAU,CAAC,CAAf,EAAkB;AAChB;AACAO,UAAI4G,IAAJ,CAAS,kDAAT;AACA;AACD;AACDurD,eAAWxZ,MAAX,CAAkBl5C,KAAlB,EAAyB,CAAzB;;AAEA;AACA;AACA;AACA;AACA,UAAMojE,aAAc,GAAExpC,MAAM75B,IAAK,IAAG,2BAAeogB,EAAf,CAAmB,EAAvD;AACA,UAAMoiD,WAAWpD,QAAQmD,aAAR,CAAuB,IAAGc,UAAW,EAArC,CAAjB;;AAEA,QAAIb,SAASI,SAAb,EAAwB;AACtBJ,eAASI,SAAT,GAAqB,IAArB;AACD,KAFD,MAEO,IAAIJ,SAASK,GAAb,EAAkB;AACvBL,eAASK,GAAT,GAAe,IAAf;AACD;AACDzD,YAAQkE,WAAR,CAAoBd,QAApB;;AAEA;AACA,WAAO,IAAP;AACD;;AAED;;;;;AAKA,WAASlD,MAAT,CAAiBF,OAAjB,EAA0B;AACxB;AACA;AACA,SAAK,IAAIzhE,IAAIg1D,WAAWp1D,MAAxB,EAAgCI,IAAI,CAApC,EAAuCA,GAAvC,EAA4C;AAC1C0hE,iBAAW1M,WAAWh1D,IAAI,CAAf,CAAX;AACD;AACDwhE,aAASC,OAAT;AACD;;AAED;;;;;AAKA,WAASF,OAAT,GAAoB;AAClB1+D,QAAI4G,IAAJ,CAAS,oBAAT;AACA;AACA;AACA,SAAK,IAAIzJ,IAAIg1D,WAAWp1D,MAAxB,EAAgCI,IAAI,CAApC,EAAuCA,GAAvC,EAA4C;AAC1C0hE,iBAAW1M,WAAWh1D,IAAI,CAAf,CAAX;AACD;AACD;AACA,QAAIk8B,MAAM8X,UAAN,KAAqB,MAAzB,EAAiC;AAC/BlW;AACD;AACF;;AAED;;;;AAIA,WAAS8nC,IAAT,GAAiB;AACf1pC,UAAMqpB,OAAN,GAAgB,KAAhB;AACD;;AAED;;;;AAIA,WAASsgB,MAAT,GAAmB;AACjB3pC,UAAMqpB,OAAN,GAAgB,IAAhB;AACD;;AAED;;;;AAIA,WAASznB,IAAT,GAAiB;AACf5B,UAAM4B,IAAN;AACA;;;;;AAKA5B,UAAMmoC,OAAN;AACD;;AAED;;;;;AAKA,WAASyB,cAAT,GAA2B;AACzB,WAAOpS,WAAP;AACD;;AAED;;;;;AAKA,WAASqS,cAAT,CAAyBC,MAAzB,EAAiC;AAC/BtS,kBAAcsS,MAAd;AACD;;AAED;;;;;AAKA,WAASC,aAAT,GAA0B;AACxB,WAAOjR,UAAP;AACD;;AAED,WAAS5Z,EAAT,CAAa,GAAG/yB,IAAhB,EAAsB;AACpB,WAAOwzB,QAAQT,EAAR,CAAW,GAAG/yB,IAAd,CAAP;AACD;;AAED,WAASgyC,IAAT,CAAe,GAAGhyC,IAAlB,EAAwB;AACtB,WAAOwzB,QAAQwe,IAAR,CAAa,GAAGhyC,IAAhB,CAAP;AACD;;AAED,WAASizB,GAAT,CAAc,GAAGjzB,IAAjB,EAAuB;AACrB,WAAOwzB,QAAQP,GAAR,CAAY,GAAGjzB,IAAf,CAAP;AACD;;AAED;;;AAGA,SAAO;AACL5F,MADK;AAEL;AACAld,YAHK;AAILi8D,YAJK;AAKLE,cALK;AAMLC,UANK;AAOLJ,WAPK;AAQLqE,QARK;AASLC,UATK;AAUL/nC,QAVK;AAWLgoC,kBAXK;AAYLC,kBAZK;AAaLE,iBAbK;AAcL;AACA7qB,MAfK;AAgBLE,OAhBK;AAiBL+e,QAjBK;AAkBL;AACA;AACA;AACAn+B,SArBK;AAsBL+kC,aAtBK;AAuBLjG;AAvBK,GAAP;AAyBD,C;;;;;;;;;;;;;QC1VekL,e,GAAAA,e;AARhB;;;;;;;;AAQO,SAASA,eAAT,CAA0Bj1C,GAA1B,EAA+B;AACpC,QAAMk1C,QAAQl1C,IAAI9D,KAAJ,CAAU,QAAV,CAAd;;AAEA,MAAIg5C,SAASA,MAAM,CAAN,CAAb,EAAuB;AACrB,WAAOA,MAAM,CAAN,EAASl1D,KAAT,CAAe,GAAf,EAAoB,CAApB,CAAP;AACD;AACF,C;;;;;;;;;;;;;;;;;;QCGekqD,gB,GAAAA,gB;QAuBAvsC,c,GAAAA,c;QAkBAw3C,oB,GAAAA,oB;QA8CAlL,qB,GAAAA,qB;;AAxGhB;;AAEA;;;;AAEA,MAAMr4D,MAAM0F,iBAAWC,SAAX,CAAqB,aAArB,CAAZ;;AAEA;;;;;;;;;;;;AALA;AAgBO,SAAS2yD,gBAAT,CAA2BlqC,GAA3B,EAAgCxnB,IAAhC,EAAsC0Q,WAAtC,EAAmD;AACxD8W,MAAI5W,KAAJ,CAAUpY,OAAV,CAAkBoY,SAAS;AACzB,QAAIA,MAAMgsD,UAAN,KAAqB,SAAzB,EAAoC;AAClCxjE,UAAI+L,KAAJ,CAAW,oCAAmCyL,MAAMhX,IAAK,SAAzD;AACA,aAAOgX,MAAMgsD,UAAb;AACD;AACF,GALD;;AAOA,SAAOp1C,GAAP;AACD;;AAED;;;;;;;;;;;;AAYO,SAASrC,cAAT,CAAyBqC,GAAzB,EAA8BxnB,IAA9B,EAAoC0Q,WAApC,EAAiD;AACtD,MAAI8W,IAAIq1C,MAAR,EAAgB;AACdzjE,QAAI+L,KAAJ,CAAU,+BAAV;AACA,WAAOqiB,IAAIq1C,MAAX;AACD;;AAED,SAAOr1C,GAAP;AACD;;AAED;;;;;;;;;AASO,SAASm1C,oBAAT,CAA+B,EAAE1iD,KAAF,EAASE,KAAT,EAA/B,EAAiD;AACtD,WAAS2iD,OAAT,CAAkBr7C,SAAlB,EAA6B;AAC3B,WAAO,sBAAc+yC,oBAAd,EAAyBl0D,QAAzB,CAAkCmhB,SAAlC,CAAP;AACD;;AAED;;;AAGA,SAAO,CAAC+F,GAAD,EAAMxnB,IAAN,EAAY0Q,WAAZ,KAA4B;AACjC8W,QAAI5W,KAAJ,CAAUpY,OAAV,CAAkBoY,SAAS;AACzB,UAAIA,MAAMhX,IAAN,KAAe,OAAf,IAA0BkjE,QAAQ7iD,KAAR,CAA9B,EAA8C;AAC5CrJ,cAAM6Q,SAAN,GAAkBxH,KAAlB;AACD,OAFD,MAEO,IAAIrJ,MAAMhX,IAAN,KAAe,OAAf,IAA0BkjE,QAAQ3iD,KAAR,CAA9B,EAA8C;AACnDvJ,cAAM6Q,SAAN,GAAkBtH,KAAlB;AACD;AACF,KAND;AAOA,WAAOqN,GAAP;AACD,GATD;AAUD;;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BO,SAASiqC,qBAAT,CAAgChhD,MAAhC,EAAwCzQ,IAAxC,EAA8C0Q,WAA9C,EAA2D;AAChE;;;;;;AAMA,MAAI1Q,KAAKu5B,QAAL,KAAkB,OAAlB,IAA6Bv5B,KAAKpG,IAAL,KAAc,QAA/C,EAAyD;AACvD,SAAK,MAAM+W,KAAX,IAAoBF,OAAOG,KAA3B,EAAkC;AAChC;;;;;AAKA,UAAID,MAAMwvB,KAAN,IAAengC,KAAK6wD,QAApB,IAAgClgD,MAAMwvB,KAAN,KAAgBngC,KAAK6wD,QAAzD,EAAmE;AACjEz3D,YAAI+L,KAAJ,CAAW,2BAA0BwL,MAAMwvB,KAAM,OAAMngC,KAAK6wD,QAAS,GAArE;AACAlgD,cAAMwvB,KAAN,GAAcngC,KAAK6wD,QAAnB;AACD;AACF;AACF;AACD,SAAOpgD,MAAP;AACD,C;;;;;;;;;;;;;;;;;;QCzGe4oB,W,GAAAA,W;;AAnBhB;;;;AACA;;AAEA;;;;AACA,MAAMjgC,MAAM0F,iBAAWC,SAAX,CAAqB,aAArB,CAAZ;;AAEA;;;;;;;;;;;;;AAPA;AAoBO,SAASs6B,WAAT,CAAsBuF,QAAtB,EAAgCpX,GAAhC,EAAqCxnB,IAArC,EAA2C;AAChD,QAAMoxB,YAAYC,uBAAaC,KAAb,CAAmB9J,GAAnB,CAAlB;;AAEA,QAAM9W,cAAc,sBAAc0gB,SAAd,CAApB;AACA,MAAI3gB,SAAS,mBAAUC,WAAV,CAAb;;AAEA,MAAI,iBAAQkuB,QAAR,CAAJ,EAAuB;AACrBA,aAASpmC,OAAT,CAAiBqmC,WAAW;AAC1B,UAAI,oBAAWA,OAAX,CAAJ,EAAyB;AACvBpuB,iBAASouB,QAAQpuB,MAAR,EAAgBzQ,IAAhB,EAAsB0Q,WAAtB,CAAT;AACD,OAFD,MAEO;AACLtX,YAAIqB,KAAJ,CAAU,uCAAV;AACD;AACF,KAND;AAOD;;AAED,SAAO42B,uBAAayN,KAAb,CAAmBruB,MAAnB,CAAP;AACD;;AAED;;;;;;AAMA,SAASssD,cAAT,GAA2B;AACzB;;;;AAIA,MAAIC,kBAAkB,EAAtB;;AAEA;;;;;;;;;;AAUA,WAAS9nB,GAAT,CAActW,WAAW,EAAzB,EAA6BpX,GAA7B,EAAkCxnB,IAAlC,EAAwC;AACtC,WAAOq5B,YAAYuF,SAAStlC,MAAT,CAAgB0jE,eAAhB,CAAZ,EAA8Cx1C,GAA9C,EAAmDxnB,IAAnD,CAAP;AACD;;AAED;;;;;AAKA,WAASi9D,WAAT,CAAsBr+B,QAAtB,EAAgC;AAC9B,QAAI,iBAAQA,QAAR,CAAJ,EAAuB;AACrBo+B,wBAAkBA,gBAAgB1jE,MAAhB,CAAuBslC,QAAvB,CAAlB;AACD;AACF;;AAED;;;;;AAKA,WAASu6B,WAAT,GAAwB;AACtB,WAAO6D,eAAP;AACD;;AAED,SAAO;AACL9nB,OADK;AAEL+nB,eAFK;AAGL9D;AAHK,GAAP;AAKD;;AAED;kBACe4D,gB;;;;;;;;;;;;;QCrFCG,a,GAAAA,a;QASAC,mB,GAAAA,mB;;AAlBhB;;AACA;;AAEA;;;;;;AAMO,SAASD,aAAT,CAAwBv8C,YAAxB,EAAsC;AAC3C,SAAOA,iBAAiButC,gBAAKC,aAAL,CAAmBoG,YAA3C;AACD;;AAED;;;;;AAKO,SAAS4I,mBAAT,GAAgC;AACrC,SAAO,gBAAOjP,gBAAKC,aAAZ,CAAP;AACD,C;;;;;;;;;;;;;QCNeiP,uB,GAAAA,uB;;AAdhB;;AACA;;AAEA;;AACA,MAAMhkE,MAAM0F,iBAAWC,SAAX,CAAqB,aAArB,CAAZ;;AAEA;;;;;;;;AAQO,SAASq+D,uBAAT,CAAkCpL,WAAlC,EAA+CsB,eAA/C,EAAgE;AACrE,MAAI,CAAC,kBAASA,eAAT,EAA0B,gBAAOkB,oBAAP,CAA1B,CAAL,EAAmD;AACjDp7D,QAAI4G,IAAJ,CAAU,sBAAqBszD,eAAgB,GAA/C;AACA,WAAO,KAAP;AACD;;AAED;AACA;AACA;AACA,MAAItB,YAAYqL,YAAhB,EAA8B;AAC5BrL,gBAAYqL,YAAZ,CAAyB/J,eAAzB;AACD,GAFD,MAEO;AACLtB,gBAAYvwC,SAAZ,GAAwB6xC,eAAxB;AACD;AACD,SAAO,IAAP;AACD,C;;;;;;;;;;;;;QCferwB,W,GAAAA,W;QAUAq6B,c,GAAAA,c;QAWA13C,iB,GAAAA,iB;;AAnChB;;;;AACA;;;;AAEA;AACA;;AAEA;;;;;;;;AAQO,SAASqd,WAAT,CAAsB,GAAGK,OAAzB,EAAkC;AACvC,SAAO,sBAAa,CAACC,SAAD,EAAYC,UAAZ,KAA2B;AAC7C;AACA;AACA,QAAI,iBAAQD,SAAR,CAAJ,EAAwB;AACtB,aAAOC,UAAP;AACD;AACF,GANM,EAMJF,OANI,CAAP;AAOD;;AAEM,SAASg6B,cAAT,CAAyBr3D,IAAzB,EAA+B;AACpC,MAAI,CAACA,IAAL,EAAW;AACT,WAAOA,IAAP;AACD,GAFD,MAEO;AACL,WAAOA,KAAKoqB,OAAL,CAAa,YAAb,EAA2B,EAA3B,CAAP;AACD;AACF;;AAED;;;AAGO,SAASzK,iBAAT,GAA8B;AACnC,SAAO23C,0BAAQr3C,cAAf;AACD,C;;;;;;;;;;;;;;ACrCD;;;;AACA;;;;AACA;;;;;;AAEA;;;;kBAIe,CACb,EAAEjgB,MAAM,MAAR,EAAgBmuC,IAAIoE,gBAApB,EADa,EAEb,EAAEvyC,MAAM,QAAR,EAAkBmuC,IAAI90C,gBAAtB,EAFa,EAGb,EAAE2G,MAAM,QAAR,EAAkBmuC,IAAIn0B,gBAAtB,EAHa,C;;;;;;;;;;;;;kBCyHSu9C,W;;AATxB;;AACA;;AAEA;AACA;AACA;AACA;AA9HA;AACA;AACA;;;;;;;;;;;;;;;;;;;AAmBA;;;;;;;;;AASA;;;;;;;AAOA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;;;;;;;;;;;;AAYA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;;;AAUA,IAAIjiE,KAAJ,EAAOA,MAAEyB,UAAF;;AAEQ,SAASwgE,WAAT,CAAsBl/D,UAAU,EAAhC,EAAoCq1C,UAAU,EAA9C,EAAkD;AAC/D,QAAM8pB,kBAAkB,aAAI,UAAUlpB,MAAV,EAAkB;AAC5C,WAAOA,OAAOH,EAAP,CAAU91C,QAAQi2C,OAAOtuC,IAAf,CAAV,CAAP;AACD,GAFuB,EAErB0tC,OAFqB,CAAxB;;AAIA,SAAO,sBAAQ8pB,eAAR,EAAyBn/D,QAAQo/D,MAAjC,CAAP;AACD,C;;;;;;;;;;ACvID;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;AAEA;;;;AAEA,MAAMC,iBAAiB,CACrB,GAAGC,qBADkB,EAErB,EAAE33D,MAAM,gBAAR,EAA0BmuC,IAAI/2C,gBAA9B,EAFqB,EAGrB,EAAE4I,MAAM,QAAR,EAAkBmuC,IAAIyX,gBAAtB,EAHqB,EAIrB,EAAE5lD,MAAM,MAAR,EAAgBmuC,IAAIypB,mBAApB,EAJqB,EAKrB,EAAE53D,MAAM,cAAR,EAAwBmuC,IAAI9G,cAA5B,EALqB,EAMrB,EAAErnC,MAAM,eAAR,EAAyBmuC,IAAI+H,cAA7B,EANqB,EAOrB,EAAEl2C,MAAM,SAAR,EAAmBmuC,IAAIsL,oBAAvB,EAPqB,CAAvB;;AAUA,SAASoe,IAAT,CAAex/D,UAAU,EAAzB,EAA6Bq1C,UAAU,EAAvC,EAA2C;AACzC,SAAO,oBAAYr1C,OAAZ,EAAqB,CAAC,GAAGq/D,cAAJ,EAAoB,GAAGhqB,OAAvB,CAArB,CAAP;AACD;;AAED;AACAmqB,KAAKzG,MAAL,GAAcyG,IAAd;;AAEAA,KAAKhiD,WAAL,GAAmB;AACjBiiD;AAEF;AACA;AAJmB,CAAnB,CAKAC,OAAOxoE,OAAP,GAAiBsoE,IAAjB,C","file":"kandy.newCallMe.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Kandy\"] = factory();\n\telse\n\t\troot[\"Kandy\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./index.js\");\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","/**\n * Creates and returns an SDP Handler function that will remove the desired codecs\n *  from the SDP when passed to the pipeline.\n *\n * @method createCodecRemover\n * @param  {Array<string|Object} codecs An array of strings or objects representing the desired codecs to be removed.\n * @example\n * // `codecs` paramters can be an array of strings (i.e., ['VP8', 'VP9']) or as objects with the following signature:\n * const codecsToBeRemoved = [{\n *   name: 'codecname',\n *   fmtpParams: 'specific ftmp parameter target'\n * }]\n * const codecRemover = createCodecRemover(codecsToBeRemoved)\n * @return {Function} returns an SDP handler function\n */\nexport function createCodecRemover (codecs = []) {\n  // We allow the user to pass in a codecs of objects or strings, so here we format the strings into objects for uniformity.\n  codecs = codecs.map(item => (typeof item === 'string' ? { name: item } : item))\n\n  return function (newSdp, info, originalSdp) {\n    // This is an array of strings representing codec names we want to remove.\n    const codecStringsToRemove = codecs.map(codec => codec.name)\n\n    newSdp.media.forEach(media => {\n      // This is an array of just the codes (codec payloads) that we FOR SURE want to remove.\n      const finalRemoveList = []\n      // This is an array of RTP objects who have codecs that are the same as strings passed in via codecs.\n      let filteredRtp = []\n\n      // If the current rtp.codec is in the codecStringsToRemove list, add the rtp to filteredRtp\n      filteredRtp = media.rtp.filter(rtp => codecStringsToRemove.includes(rtp.codec))\n\n      filteredRtp.forEach(rtp => {\n        // We grab the relevantCodec codecs object from the passed in codecs, based on the name string.\n        const relevantCodecs = codecs.filter(codec => codec.name === rtp.codec)\n\n        // We check the relevantCodec. If it is not present, then we have no codecs info for this specific rtp.\n        relevantCodecs.forEach(relevantCodec => {\n          // If fmtpParams doesnt exist or is of length 0 then we assume we can remove all instances of this codec\n          if (!relevantCodec.fmtpParams || (relevantCodec.fmtpParams && relevantCodec.fmtpParams.length === 0)) {\n            // We want to delete this codec no matter what, since no fmtp params were included.\n            finalRemoveList.push(rtp.payload)\n          } else {\n            // There are fmtp values for this codec. Therefore we have to check each media.fmtp object to see if it is the right one.\n            // Then when we find the right fmtp object, we check its config to see if it has the parameters specified in the input.\n            media.fmtp.forEach(fmtp => {\n              // We check each iteration to see if we found the right fmtp object.\n              if (fmtp.payload === rtp.payload) {\n                // If we found the right fmtp object, we have to make sure each config param is in the fmtp.config.\n                if (relevantCodec.fmtpParams.every(c => fmtp.config.includes(c))) {\n                  finalRemoveList.push(rtp.payload)\n                }\n              }\n            })\n          }\n        })\n      })\n\n      // At this point we should have an array (finalRemoveList) that contains all ORIGINAL codec payloads that we need to remove.\n      // We now need to check fmtp for all rtx payloads ASSOCIATED with the original codec payload.\n      media.fmtp.forEach(fmtp => {\n        // Check if the config contains apt=, which indicates this fmtp is associated with another.\n        if (fmtp.config.includes('apt=')) {\n          // If so, lets grab the whole string WITHOUT the apt= part, and convet it into an integer. This should be a payload number.\n          var payload = parseInt(fmtp.config.replace('apt=', ''))\n\n          // Check if the finalRemoveList contains the payload that this fmtp is associated with.\n          if (finalRemoveList.includes(payload)) {\n            // If so, then we need to add this fmtp.payload to the finalRemoveList\n            finalRemoveList.push(fmtp.payload)\n          }\n        }\n      })\n\n      // We assume past this point that the finalRemoveList is all powerful.\n      // For each codec in the media.payloads string, if it is in our finalRemoveList list, we remove it.\n      let isNumber = false\n      if (typeof media.payloads === 'number') {\n        media.payloads = media.payloads.toString()\n        isNumber = true\n      }\n      if (media.payloads) {\n        media.payloads = media.payloads\n          .split(' ')\n          .filter(payload => !finalRemoveList.includes(parseInt(payload)))\n          .join(' ')\n      }\n      if (media.payloads && isNumber) {\n        media.payloads = parseInt(media.payloads)\n      }\n\n      // For each codec object, if the payload is in our filteredCodes list, we remove the object.\n      media.rtp = media.rtp.filter(rtp => !finalRemoveList.includes(rtp.payload))\n      media.fmtp = media.fmtp.filter(fmtp => !finalRemoveList.includes(fmtp.payload))\n\n      if (media.rtcpFb) {\n        media.rtcpFb = media.rtcpFb.filter(rtcpFb => !finalRemoveList.includes(rtcpFb.payload))\n      }\n    })\n\n    return newSdp\n  }\n}\n","// SDP Handlers\nexport * from './codecRemover.js'\n","import { TASK_CANCEL, TERMINATE, SAGA_LOCATION, SAGA_ACTION, IO, SELF_CANCELLATION } from '@redux-saga/symbols';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport { array, notUndef, pattern, multicast, channel, undef, effect, task, func, buffer, string, object } from '@redux-saga/is';\nimport delayP from '@redux-saga/delay-p';\n\nvar konst = function konst(v) {\n  return function () {\n    return v;\n  };\n};\nvar kTrue =\n/*#__PURE__*/\nkonst(true);\n\nvar noop = function noop() {};\n\nif (process.env.NODE_ENV !== 'production' && typeof Proxy !== 'undefined') {\n  noop =\n  /*#__PURE__*/\n  new Proxy(noop, {\n    set: function set() {\n      throw internalErr('There was an attempt to assign a property to internal `noop` function.');\n    }\n  });\n}\nvar identity = function identity(v) {\n  return v;\n};\nvar hasSymbol = typeof Symbol === 'function';\nvar asyncIteratorSymbol = hasSymbol && Symbol.asyncIterator ? Symbol.asyncIterator : '@@asyncIterator';\nfunction check(value, predicate, error) {\n  if (!predicate(value)) {\n    throw new Error(error);\n  }\n}\nvar assignWithSymbols = function assignWithSymbols(target, source) {\n  _extends(target, source);\n\n  if (Object.getOwnPropertySymbols) {\n    Object.getOwnPropertySymbols(source).forEach(function (s) {\n      target[s] = source[s];\n    });\n  }\n};\nvar flatMap = function flatMap(mapper, arr) {\n  var _ref;\n\n  return (_ref = []).concat.apply(_ref, arr.map(mapper));\n};\nfunction remove(array, item) {\n  var index = array.indexOf(item);\n\n  if (index >= 0) {\n    array.splice(index, 1);\n  }\n}\nfunction once(fn) {\n  var called = false;\n  return function () {\n    if (called) {\n      return;\n    }\n\n    called = true;\n    fn();\n  };\n}\n\nvar kThrow = function kThrow(err) {\n  throw err;\n};\n\nvar kReturn = function kReturn(value) {\n  return {\n    value: value,\n    done: true\n  };\n};\n\nfunction makeIterator(next, thro, name) {\n  if (thro === void 0) {\n    thro = kThrow;\n  }\n\n  if (name === void 0) {\n    name = 'iterator';\n  }\n\n  var iterator = {\n    meta: {\n      name: name\n    },\n    next: next,\n    throw: thro,\n    return: kReturn,\n    isSagaIterator: true\n  };\n\n  if (typeof Symbol !== 'undefined') {\n    iterator[Symbol.iterator] = function () {\n      return iterator;\n    };\n  }\n\n  return iterator;\n}\nfunction logError(error, _ref2) {\n  var sagaStack = _ref2.sagaStack;\n\n  /*eslint-disable no-console*/\n  console.error(error);\n  console.error(sagaStack);\n}\nvar internalErr = function internalErr(err) {\n  return new Error(\"\\n  redux-saga: Error checking hooks detected an inconsistent state. This is likely a bug\\n  in redux-saga code and not yours. Thanks for reporting this in the project's github repo.\\n  Error: \" + err + \"\\n\");\n};\nvar createSetContextWarning = function createSetContextWarning(ctx, props) {\n  return (ctx ? ctx + '.' : '') + \"setContext(props): argument \" + props + \" is not a plain object\";\n};\nvar FROZEN_ACTION_ERROR = \"You can't put (a.k.a. dispatch from saga) frozen actions.\\nWe have to define a special non-enumerable property on those actions for scheduling purposes.\\nOtherwise you wouldn't be able to communicate properly between sagas & other subscribers (action ordering would become far less predictable).\\nIf you are using redux and you care about this behaviour (frozen actions),\\nthen you might want to switch to freezing actions in a middleware rather than in action creator.\\nExample implementation:\\n\\nconst freezeActions = store => next => action => next(Object.freeze(action))\\n\"; // creates empty, but not-holey array\n\nvar createEmptyArray = function createEmptyArray(n) {\n  return Array.apply(null, new Array(n));\n};\nvar wrapSagaDispatch = function wrapSagaDispatch(dispatch) {\n  return function (action) {\n    if (process.env.NODE_ENV !== 'production') {\n      check(action, function (ac) {\n        return !Object.isFrozen(ac);\n      }, FROZEN_ACTION_ERROR);\n    }\n\n    return dispatch(Object.defineProperty(action, SAGA_ACTION, {\n      value: true\n    }));\n  };\n};\nvar shouldTerminate = function shouldTerminate(res) {\n  return res === TERMINATE;\n};\nvar shouldCancel = function shouldCancel(res) {\n  return res === TASK_CANCEL;\n};\nvar shouldComplete = function shouldComplete(res) {\n  return shouldTerminate(res) || shouldCancel(res);\n};\nfunction createAllStyleChildCallbacks(shape, parentCallback) {\n  var keys = Object.keys(shape);\n  var totalCount = keys.length;\n\n  if (process.env.NODE_ENV !== 'production') {\n    check(totalCount, function (c) {\n      return c > 0;\n    }, 'createAllStyleChildCallbacks: get an empty array or object');\n  }\n\n  var completedCount = 0;\n  var completed;\n  var results = array(shape) ? createEmptyArray(totalCount) : {};\n  var childCallbacks = {};\n\n  function checkEnd() {\n    if (completedCount === totalCount) {\n      completed = true;\n      parentCallback(results);\n    }\n  }\n\n  keys.forEach(function (key) {\n    var chCbAtKey = function chCbAtKey(res, isErr) {\n      if (completed) {\n        return;\n      }\n\n      if (isErr || shouldComplete(res)) {\n        parentCallback.cancel();\n        parentCallback(res, isErr);\n      } else {\n        results[key] = res;\n        completedCount++;\n        checkEnd();\n      }\n    };\n\n    chCbAtKey.cancel = noop;\n    childCallbacks[key] = chCbAtKey;\n  });\n\n  parentCallback.cancel = function () {\n    if (!completed) {\n      completed = true;\n      keys.forEach(function (key) {\n        return childCallbacks[key].cancel();\n      });\n    }\n  };\n\n  return childCallbacks;\n}\nfunction getMetaInfo(fn) {\n  return {\n    name: fn.name || 'anonymous',\n    location: getLocation(fn)\n  };\n}\nfunction getLocation(instrumented) {\n  return instrumented[SAGA_LOCATION];\n}\n\nvar BUFFER_OVERFLOW = \"Channel's Buffer overflow!\";\nvar ON_OVERFLOW_THROW = 1;\nvar ON_OVERFLOW_DROP = 2;\nvar ON_OVERFLOW_SLIDE = 3;\nvar ON_OVERFLOW_EXPAND = 4;\nvar zeroBuffer = {\n  isEmpty: kTrue,\n  put: noop,\n  take: noop\n};\n\nfunction ringBuffer(limit, overflowAction) {\n  if (limit === void 0) {\n    limit = 10;\n  }\n\n  var arr = new Array(limit);\n  var length = 0;\n  var pushIndex = 0;\n  var popIndex = 0;\n\n  var push = function push(it) {\n    arr[pushIndex] = it;\n    pushIndex = (pushIndex + 1) % limit;\n    length++;\n  };\n\n  var take = function take() {\n    if (length != 0) {\n      var it = arr[popIndex];\n      arr[popIndex] = null;\n      length--;\n      popIndex = (popIndex + 1) % limit;\n      return it;\n    }\n  };\n\n  var flush = function flush() {\n    var items = [];\n\n    while (length) {\n      items.push(take());\n    }\n\n    return items;\n  };\n\n  return {\n    isEmpty: function isEmpty() {\n      return length == 0;\n    },\n    put: function put(it) {\n      if (length < limit) {\n        push(it);\n      } else {\n        var doubledLimit;\n\n        switch (overflowAction) {\n          case ON_OVERFLOW_THROW:\n            throw new Error(BUFFER_OVERFLOW);\n\n          case ON_OVERFLOW_SLIDE:\n            arr[pushIndex] = it;\n            pushIndex = (pushIndex + 1) % limit;\n            popIndex = pushIndex;\n            break;\n\n          case ON_OVERFLOW_EXPAND:\n            doubledLimit = 2 * limit;\n            arr = flush();\n            length = arr.length;\n            pushIndex = arr.length;\n            popIndex = 0;\n            arr.length = doubledLimit;\n            limit = doubledLimit;\n            push(it);\n            break;\n\n          default: // DROP\n\n        }\n      }\n    },\n    take: take,\n    flush: flush\n  };\n}\n\nvar none = function none() {\n  return zeroBuffer;\n};\nvar fixed = function fixed(limit) {\n  return ringBuffer(limit, ON_OVERFLOW_THROW);\n};\nvar dropping = function dropping(limit) {\n  return ringBuffer(limit, ON_OVERFLOW_DROP);\n};\nvar sliding = function sliding(limit) {\n  return ringBuffer(limit, ON_OVERFLOW_SLIDE);\n};\nvar expanding = function expanding(initialSize) {\n  return ringBuffer(initialSize, ON_OVERFLOW_EXPAND);\n};\n\nvar buffers = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  none: none,\n  fixed: fixed,\n  dropping: dropping,\n  sliding: sliding,\n  expanding: expanding\n});\n\nvar TAKE = 'TAKE';\nvar PUT = 'PUT';\nvar ALL = 'ALL';\nvar RACE = 'RACE';\nvar CALL = 'CALL';\nvar CPS = 'CPS';\nvar FORK = 'FORK';\nvar JOIN = 'JOIN';\nvar CANCEL = 'CANCEL';\nvar SELECT = 'SELECT';\nvar ACTION_CHANNEL = 'ACTION_CHANNEL';\nvar CANCELLED = 'CANCELLED';\nvar FLUSH = 'FLUSH';\nvar GET_CONTEXT = 'GET_CONTEXT';\nvar SET_CONTEXT = 'SET_CONTEXT';\n\nvar effectTypes = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  TAKE: TAKE,\n  PUT: PUT,\n  ALL: ALL,\n  RACE: RACE,\n  CALL: CALL,\n  CPS: CPS,\n  FORK: FORK,\n  JOIN: JOIN,\n  CANCEL: CANCEL,\n  SELECT: SELECT,\n  ACTION_CHANNEL: ACTION_CHANNEL,\n  CANCELLED: CANCELLED,\n  FLUSH: FLUSH,\n  GET_CONTEXT: GET_CONTEXT,\n  SET_CONTEXT: SET_CONTEXT\n});\n\nvar TEST_HINT = '\\n(HINT: if you are getting these errors in tests, consider using createMockTask from @redux-saga/testing-utils)';\n\nvar makeEffect = function makeEffect(type, payload) {\n  var _ref;\n\n  return _ref = {}, _ref[IO] = true, _ref.combinator = false, _ref.type = type, _ref.payload = payload, _ref;\n};\n\nvar isForkEffect = function isForkEffect(eff) {\n  return effect(eff) && eff.type === FORK;\n};\n\nvar detach = function detach(eff) {\n  if (process.env.NODE_ENV !== 'production') {\n    check(eff, isForkEffect, 'detach(eff): argument must be a fork effect');\n  }\n\n  return makeEffect(FORK, _extends({}, eff.payload, {\n    detached: true\n  }));\n};\nfunction take(patternOrChannel, multicastPattern) {\n  if (patternOrChannel === void 0) {\n    patternOrChannel = '*';\n  }\n\n  if (process.env.NODE_ENV !== 'production' && arguments.length) {\n    check(arguments[0], notUndef, 'take(patternOrChannel): patternOrChannel is undefined');\n  }\n\n  if (pattern(patternOrChannel)) {\n    return makeEffect(TAKE, {\n      pattern: patternOrChannel\n    });\n  }\n\n  if (multicast(patternOrChannel) && notUndef(multicastPattern) && pattern(multicastPattern)) {\n    return makeEffect(TAKE, {\n      channel: patternOrChannel,\n      pattern: multicastPattern\n    });\n  }\n\n  if (channel(patternOrChannel)) {\n    return makeEffect(TAKE, {\n      channel: patternOrChannel\n    });\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    throw new Error(\"take(patternOrChannel): argument \" + patternOrChannel + \" is not valid channel or a valid pattern\");\n  }\n}\nvar takeMaybe = function takeMaybe() {\n  var eff = take.apply(void 0, arguments);\n  eff.payload.maybe = true;\n  return eff;\n};\nfunction put(channel$1, action) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (arguments.length > 1) {\n      check(channel$1, notUndef, 'put(channel, action): argument channel is undefined');\n      check(channel$1, channel, \"put(channel, action): argument \" + channel$1 + \" is not a valid channel\");\n      check(action, notUndef, 'put(channel, action): argument action is undefined');\n    } else {\n      check(channel$1, notUndef, 'put(action): argument action is undefined');\n    }\n  }\n\n  if (undef(action)) {\n    action = channel$1; // `undefined` instead of `null` to make default parameter work\n\n    channel$1 = undefined;\n  }\n\n  return makeEffect(PUT, {\n    channel: channel$1,\n    action: action\n  });\n}\nvar putResolve = function putResolve() {\n  var eff = put.apply(void 0, arguments);\n  eff.payload.resolve = true;\n  return eff;\n};\nfunction all(effects) {\n  var eff = makeEffect(ALL, effects);\n  eff.combinator = true;\n  return eff;\n}\nfunction race(effects) {\n  var eff = makeEffect(RACE, effects);\n  eff.combinator = true;\n  return eff;\n} // this match getFnCallDescriptor logic\n\nvar validateFnDescriptor = function validateFnDescriptor(effectName, fnDescriptor) {\n  check(fnDescriptor, notUndef, effectName + \": argument fn is undefined or null\");\n\n  if (func(fnDescriptor)) {\n    return;\n  }\n\n  var context = null;\n  var fn;\n\n  if (array(fnDescriptor)) {\n    context = fnDescriptor[0];\n    fn = fnDescriptor[1];\n    check(fn, notUndef, effectName + \": argument of type [context, fn] has undefined or null `fn`\");\n  } else if (object(fnDescriptor)) {\n    context = fnDescriptor.context;\n    fn = fnDescriptor.fn;\n    check(fn, notUndef, effectName + \": argument of type {context, fn} has undefined or null `fn`\");\n  } else {\n    check(fnDescriptor, func, effectName + \": argument fn is not function\");\n    return;\n  }\n\n  if (context && string(fn)) {\n    check(context[fn], func, effectName + \": context arguments has no such method - \\\"\" + fn + \"\\\"\");\n    return;\n  }\n\n  check(fn, func, effectName + \": unpacked fn argument (from [context, fn] or {context, fn}) is not a function\");\n};\n\nfunction getFnCallDescriptor(fnDescriptor, args) {\n  var context = null;\n  var fn;\n\n  if (func(fnDescriptor)) {\n    fn = fnDescriptor;\n  } else {\n    if (array(fnDescriptor)) {\n      context = fnDescriptor[0];\n      fn = fnDescriptor[1];\n    } else {\n      context = fnDescriptor.context;\n      fn = fnDescriptor.fn;\n    }\n\n    if (context && string(fn) && func(context[fn])) {\n      fn = context[fn];\n    }\n  }\n\n  return {\n    context: context,\n    fn: fn,\n    args: args\n  };\n}\n\nvar isNotDelayEffect = function isNotDelayEffect(fn) {\n  return fn !== delay;\n};\n\nfunction call(fnDescriptor) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    var arg0 = typeof args[0] === 'number' ? args[0] : 'ms';\n    check(fnDescriptor, isNotDelayEffect, \"instead of writing `yield call(delay, \" + arg0 + \")` where delay is an effect from `redux-saga/effects` you should write `yield delay(\" + arg0 + \")`\");\n    validateFnDescriptor('call', fnDescriptor);\n  }\n\n  return makeEffect(CALL, getFnCallDescriptor(fnDescriptor, args));\n}\nfunction apply(context, fn, args) {\n  if (args === void 0) {\n    args = [];\n  }\n\n  var fnDescriptor = [context, fn];\n\n  if (process.env.NODE_ENV !== 'production') {\n    validateFnDescriptor('apply', fnDescriptor);\n  }\n\n  return makeEffect(CALL, getFnCallDescriptor([context, fn], args));\n}\nfunction cps(fnDescriptor) {\n  if (process.env.NODE_ENV !== 'production') {\n    validateFnDescriptor('cps', fnDescriptor);\n  }\n\n  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n\n  return makeEffect(CPS, getFnCallDescriptor(fnDescriptor, args));\n}\nfunction fork(fnDescriptor) {\n  if (process.env.NODE_ENV !== 'production') {\n    validateFnDescriptor('fork', fnDescriptor);\n    check(fnDescriptor, function (arg) {\n      return !effect(arg);\n    }, 'fork: argument must not be an effect');\n  }\n\n  for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n    args[_key3 - 1] = arguments[_key3];\n  }\n\n  return makeEffect(FORK, getFnCallDescriptor(fnDescriptor, args));\n}\nfunction spawn(fnDescriptor) {\n  if (process.env.NODE_ENV !== 'production') {\n    validateFnDescriptor('spawn', fnDescriptor);\n  }\n\n  for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n    args[_key4 - 1] = arguments[_key4];\n  }\n\n  return detach(fork.apply(void 0, [fnDescriptor].concat(args)));\n}\nfunction join(taskOrTasks) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (arguments.length > 1) {\n      throw new Error('join(...tasks) is not supported any more. Please use join([...tasks]) to join multiple tasks.');\n    }\n\n    if (array(taskOrTasks)) {\n      taskOrTasks.forEach(function (t) {\n        check(t, task, \"join([...tasks]): argument \" + t + \" is not a valid Task object \" + TEST_HINT);\n      });\n    } else {\n      check(taskOrTasks, task, \"join(task): argument \" + taskOrTasks + \" is not a valid Task object \" + TEST_HINT);\n    }\n  }\n\n  return makeEffect(JOIN, taskOrTasks);\n}\nfunction cancel(taskOrTasks) {\n  if (taskOrTasks === void 0) {\n    taskOrTasks = SELF_CANCELLATION;\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (arguments.length > 1) {\n      throw new Error('cancel(...tasks) is not supported any more. Please use cancel([...tasks]) to cancel multiple tasks.');\n    }\n\n    if (array(taskOrTasks)) {\n      taskOrTasks.forEach(function (t) {\n        check(t, task, \"cancel([...tasks]): argument \" + t + \" is not a valid Task object \" + TEST_HINT);\n      });\n    } else if (taskOrTasks !== SELF_CANCELLATION && notUndef(taskOrTasks)) {\n      check(taskOrTasks, task, \"cancel(task): argument \" + taskOrTasks + \" is not a valid Task object \" + TEST_HINT);\n    }\n  }\n\n  return makeEffect(CANCEL, taskOrTasks);\n}\nfunction select(selector) {\n  if (selector === void 0) {\n    selector = identity;\n  }\n\n  for (var _len5 = arguments.length, args = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n    args[_key5 - 1] = arguments[_key5];\n  }\n\n  if (process.env.NODE_ENV !== 'production' && arguments.length) {\n    check(arguments[0], notUndef, 'select(selector, [...]): argument selector is undefined');\n    check(selector, func, \"select(selector, [...]): argument \" + selector + \" is not a function\");\n  }\n\n  return makeEffect(SELECT, {\n    selector: selector,\n    args: args\n  });\n}\n/**\n  channel(pattern, [buffer])    => creates a proxy channel for store actions\n**/\n\nfunction actionChannel(pattern$1, buffer$1) {\n  if (process.env.NODE_ENV !== 'production') {\n    check(pattern$1, pattern, 'actionChannel(pattern,...): argument pattern is not valid');\n\n    if (arguments.length > 1) {\n      check(buffer$1, notUndef, 'actionChannel(pattern, buffer): argument buffer is undefined');\n      check(buffer$1, buffer, \"actionChannel(pattern, buffer): argument \" + buffer$1 + \" is not a valid buffer\");\n    }\n  }\n\n  return makeEffect(ACTION_CHANNEL, {\n    pattern: pattern$1,\n    buffer: buffer$1\n  });\n}\nfunction cancelled() {\n  return makeEffect(CANCELLED, {});\n}\nfunction flush(channel$1) {\n  if (process.env.NODE_ENV !== 'production') {\n    check(channel$1, channel, \"flush(channel): argument \" + channel$1 + \" is not valid channel\");\n  }\n\n  return makeEffect(FLUSH, channel$1);\n}\nfunction getContext(prop) {\n  if (process.env.NODE_ENV !== 'production') {\n    check(prop, string, \"getContext(prop): argument \" + prop + \" is not a string\");\n  }\n\n  return makeEffect(GET_CONTEXT, prop);\n}\nfunction setContext(props) {\n  if (process.env.NODE_ENV !== 'production') {\n    check(props, object, createSetContextWarning(null, props));\n  }\n\n  return makeEffect(SET_CONTEXT, props);\n}\nvar delay =\n/*#__PURE__*/\ncall.bind(null, delayP);\n\nexport { apply as $, ALL as A, logError as B, CALL as C, wrapSagaDispatch as D, identity as E, FORK as F, GET_CONTEXT as G, buffers as H, detach as I, JOIN as J, take as K, fork as L, cancel as M, call as N, actionChannel as O, PUT as P, sliding as Q, RACE as R, SELECT as S, TAKE as T, delay as U, race as V, effectTypes as W, takeMaybe as X, put as Y, putResolve as Z, all as _, CPS as a, cps as a0, spawn as a1, join as a2, select as a3, cancelled as a4, flush as a5, getContext as a6, setContext as a7, CANCEL as b, check as c, ACTION_CHANNEL as d, expanding as e, CANCELLED as f, FLUSH as g, SET_CONTEXT as h, internalErr as i, getMetaInfo as j, kTrue as k, createAllStyleChildCallbacks as l, createEmptyArray as m, none as n, once as o, assignWithSymbols as p, makeIterator as q, remove as r, shouldComplete as s, noop as t, flatMap as u, getLocation as v, createSetContextWarning as w, asyncIteratorSymbol as x, shouldCancel as y, shouldTerminate as z };\n","import { CHANNEL_END_TYPE, MULTICAST, MATCH, SAGA_ACTION, CANCEL, SELF_CANCELLATION, TERMINATE, TASK, TASK_CANCEL, IO } from '@redux-saga/symbols';\nexport { CANCEL, SAGA_LOCATION } from '@redux-saga/symbols';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { string as string$1, array as array$1, stringableFunc, func, symbol as symbol$1, buffer, notUndef, promise, iterator, undef, object, channel as channel$1 } from '@redux-saga/is';\nimport { k as kTrue, e as expanding, c as check, o as once, r as remove, n as none, i as internalErr, T as TAKE, P as PUT, A as ALL, R as RACE, C as CALL, a as CPS, F as FORK, J as JOIN, b as CANCEL$1, S as SELECT, d as ACTION_CHANNEL, f as CANCELLED$1, g as FLUSH, G as GET_CONTEXT, h as SET_CONTEXT, j as getMetaInfo, l as createAllStyleChildCallbacks, m as createEmptyArray, p as assignWithSymbols, q as makeIterator, s as shouldComplete, t as noop, u as flatMap, v as getLocation, w as createSetContextWarning, x as asyncIteratorSymbol, y as shouldCancel, z as shouldTerminate, B as logError, D as wrapSagaDispatch, E as identity } from './io-6de156f3.js';\nexport { H as buffers, I as detach } from './io-6de156f3.js';\nimport { compose } from 'redux';\nimport deferred from '@redux-saga/deferred';\nimport '@redux-saga/delay-p';\n\nvar queue = [];\n/**\n  Variable to hold a counting semaphore\n  - Incrementing adds a lock and puts the scheduler in a `suspended` state (if it's not\n    already suspended)\n  - Decrementing releases a lock. Zero locks puts the scheduler in a `released` state. This\n    triggers flushing the queued tasks.\n**/\n\nvar semaphore = 0;\n/**\n  Executes a task 'atomically'. Tasks scheduled during this execution will be queued\n  and flushed after this task has finished (assuming the scheduler endup in a released\n  state).\n**/\n\nfunction exec(task) {\n  try {\n    suspend();\n    task();\n  } finally {\n    release();\n  }\n}\n/**\n  Executes or queues a task depending on the state of the scheduler (`suspended` or `released`)\n**/\n\n\nfunction asap(task) {\n  queue.push(task);\n\n  if (!semaphore) {\n    suspend();\n    flush();\n  }\n}\n/**\n * Puts the scheduler in a `suspended` state and executes a task immediately.\n */\n\nfunction immediately(task) {\n  try {\n    suspend();\n    return task();\n  } finally {\n    flush();\n  }\n}\n/**\n  Puts the scheduler in a `suspended` state. Scheduled tasks will be queued until the\n  scheduler is released.\n**/\n\nfunction suspend() {\n  semaphore++;\n}\n/**\n  Puts the scheduler in a `released` state.\n**/\n\n\nfunction release() {\n  semaphore--;\n}\n/**\n  Releases the current lock. Executes all queued tasks if the scheduler is in the released state.\n**/\n\n\nfunction flush() {\n  release();\n  var task;\n\n  while (!semaphore && (task = queue.shift()) !== undefined) {\n    exec(task);\n  }\n}\n\nvar array = function array(patterns) {\n  return function (input) {\n    return patterns.some(function (p) {\n      return matcher(p)(input);\n    });\n  };\n};\nvar predicate = function predicate(_predicate) {\n  return function (input) {\n    return _predicate(input);\n  };\n};\nvar string = function string(pattern) {\n  return function (input) {\n    return input.type === String(pattern);\n  };\n};\nvar symbol = function symbol(pattern) {\n  return function (input) {\n    return input.type === pattern;\n  };\n};\nvar wildcard = function wildcard() {\n  return kTrue;\n};\nfunction matcher(pattern) {\n  // prettier-ignore\n  var matcherCreator = pattern === '*' ? wildcard : string$1(pattern) ? string : array$1(pattern) ? array : stringableFunc(pattern) ? string : func(pattern) ? predicate : symbol$1(pattern) ? symbol : null;\n\n  if (matcherCreator === null) {\n    throw new Error(\"invalid pattern: \" + pattern);\n  }\n\n  return matcherCreator(pattern);\n}\n\nvar END = {\n  type: CHANNEL_END_TYPE\n};\nvar isEnd = function isEnd(a) {\n  return a && a.type === CHANNEL_END_TYPE;\n};\nvar CLOSED_CHANNEL_WITH_TAKERS = 'Cannot have a closed channel with pending takers';\nvar INVALID_BUFFER = 'invalid buffer passed to channel factory function';\nvar UNDEFINED_INPUT_ERROR = \"Saga or channel was provided with an undefined action\\nHints:\\n  - check that your Action Creator returns a non-undefined value\\n  - if the Saga was started using runSaga, check that your subscribe source provides the action to its listeners\";\nfunction channel(buffer$1) {\n  if (buffer$1 === void 0) {\n    buffer$1 = expanding();\n  }\n\n  var closed = false;\n  var takers = [];\n\n  if (process.env.NODE_ENV !== 'production') {\n    check(buffer$1, buffer, INVALID_BUFFER);\n  }\n\n  function checkForbiddenStates() {\n    if (closed && takers.length) {\n      throw internalErr(CLOSED_CHANNEL_WITH_TAKERS);\n    }\n\n    if (takers.length && !buffer$1.isEmpty()) {\n      throw internalErr('Cannot have pending takers with non empty buffer');\n    }\n  }\n\n  function put(input) {\n    if (process.env.NODE_ENV !== 'production') {\n      checkForbiddenStates();\n      check(input, notUndef, UNDEFINED_INPUT_ERROR);\n    }\n\n    if (closed) {\n      return;\n    }\n\n    if (takers.length === 0) {\n      return buffer$1.put(input);\n    }\n\n    var cb = takers.shift();\n    cb(input);\n  }\n\n  function take(cb) {\n    if (process.env.NODE_ENV !== 'production') {\n      checkForbiddenStates();\n      check(cb, func, \"channel.take's callback must be a function\");\n    }\n\n    if (closed && buffer$1.isEmpty()) {\n      cb(END);\n    } else if (!buffer$1.isEmpty()) {\n      cb(buffer$1.take());\n    } else {\n      takers.push(cb);\n\n      cb.cancel = function () {\n        remove(takers, cb);\n      };\n    }\n  }\n\n  function flush(cb) {\n    if (process.env.NODE_ENV !== 'production') {\n      checkForbiddenStates();\n      check(cb, func, \"channel.flush' callback must be a function\");\n    }\n\n    if (closed && buffer$1.isEmpty()) {\n      cb(END);\n      return;\n    }\n\n    cb(buffer$1.flush());\n  }\n\n  function close() {\n    if (process.env.NODE_ENV !== 'production') {\n      checkForbiddenStates();\n    }\n\n    if (closed) {\n      return;\n    }\n\n    closed = true;\n    var arr = takers;\n    takers = [];\n\n    for (var i = 0, len = arr.length; i < len; i++) {\n      var taker = arr[i];\n      taker(END);\n    }\n  }\n\n  return {\n    take: take,\n    put: put,\n    flush: flush,\n    close: close\n  };\n}\nfunction eventChannel(subscribe, buffer) {\n  if (buffer === void 0) {\n    buffer = none();\n  }\n\n  var closed = false;\n  var unsubscribe;\n  var chan = channel(buffer);\n\n  var close = function close() {\n    if (closed) {\n      return;\n    }\n\n    closed = true;\n\n    if (func(unsubscribe)) {\n      unsubscribe();\n    }\n\n    chan.close();\n  };\n\n  unsubscribe = subscribe(function (input) {\n    if (isEnd(input)) {\n      close();\n      return;\n    }\n\n    chan.put(input);\n  });\n\n  if (process.env.NODE_ENV !== 'production') {\n    check(unsubscribe, func, 'in eventChannel: subscribe should return a function to unsubscribe');\n  }\n\n  unsubscribe = once(unsubscribe);\n\n  if (closed) {\n    unsubscribe();\n  }\n\n  return {\n    take: chan.take,\n    flush: chan.flush,\n    close: close\n  };\n}\nfunction multicastChannel() {\n  var _ref;\n\n  var closed = false;\n  var currentTakers = [];\n  var nextTakers = currentTakers;\n\n  function checkForbiddenStates() {\n    if (closed && nextTakers.length) {\n      throw internalErr(CLOSED_CHANNEL_WITH_TAKERS);\n    }\n  }\n\n  var ensureCanMutateNextTakers = function ensureCanMutateNextTakers() {\n    if (nextTakers !== currentTakers) {\n      return;\n    }\n\n    nextTakers = currentTakers.slice();\n  };\n\n  var close = function close() {\n    if (process.env.NODE_ENV !== 'production') {\n      checkForbiddenStates();\n    }\n\n    closed = true;\n    var takers = currentTakers = nextTakers;\n    nextTakers = [];\n    takers.forEach(function (taker) {\n      taker(END);\n    });\n  };\n\n  return _ref = {}, _ref[MULTICAST] = true, _ref.put = function put(input) {\n    if (process.env.NODE_ENV !== 'production') {\n      checkForbiddenStates();\n      check(input, notUndef, UNDEFINED_INPUT_ERROR);\n    }\n\n    if (closed) {\n      return;\n    }\n\n    if (isEnd(input)) {\n      close();\n      return;\n    }\n\n    var takers = currentTakers = nextTakers;\n\n    for (var i = 0, len = takers.length; i < len; i++) {\n      var taker = takers[i];\n\n      if (taker[MATCH](input)) {\n        taker.cancel();\n        taker(input);\n      }\n    }\n  }, _ref.take = function take(cb, matcher) {\n    if (matcher === void 0) {\n      matcher = wildcard;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      checkForbiddenStates();\n    }\n\n    if (closed) {\n      cb(END);\n      return;\n    }\n\n    cb[MATCH] = matcher;\n    ensureCanMutateNextTakers();\n    nextTakers.push(cb);\n    cb.cancel = once(function () {\n      ensureCanMutateNextTakers();\n      remove(nextTakers, cb);\n    });\n  }, _ref.close = close, _ref;\n}\nfunction stdChannel() {\n  var chan = multicastChannel();\n  var put = chan.put;\n\n  chan.put = function (input) {\n    if (input[SAGA_ACTION]) {\n      put(input);\n      return;\n    }\n\n    asap(function () {\n      put(input);\n    });\n  };\n\n  return chan;\n}\n\nvar RUNNING = 0;\nvar CANCELLED = 1;\nvar ABORTED = 2;\nvar DONE = 3;\n\nfunction resolvePromise(promise, cb) {\n  var cancelPromise = promise[CANCEL];\n\n  if (func(cancelPromise)) {\n    cb.cancel = cancelPromise;\n  }\n\n  promise.then(cb, function (error) {\n    cb(error, true);\n  });\n}\n\nvar current = 0;\nvar nextSagaId = (function () {\n  return ++current;\n});\n\nvar _effectRunnerMap;\n\nfunction getIteratorMetaInfo(iterator, fn) {\n  if (iterator.isSagaIterator) {\n    return {\n      name: iterator.meta.name\n    };\n  }\n\n  return getMetaInfo(fn);\n}\n\nfunction createTaskIterator(_ref) {\n  var context = _ref.context,\n      fn = _ref.fn,\n      args = _ref.args;\n\n  // catch synchronous failures; see #152 and #441\n  try {\n    var result = fn.apply(context, args); // i.e. a generator function returns an iterator\n\n    if (iterator(result)) {\n      return result;\n    }\n\n    var resolved = false;\n\n    var next = function next(arg) {\n      if (!resolved) {\n        resolved = true; // Only promises returned from fork will be interpreted. See #1573\n\n        return {\n          value: result,\n          done: !promise(result)\n        };\n      } else {\n        return {\n          value: arg,\n          done: true\n        };\n      }\n    };\n\n    return makeIterator(next);\n  } catch (err) {\n    // do not bubble up synchronous failures for detached forks\n    // instead create a failed task. See #152 and #441\n    return makeIterator(function () {\n      throw err;\n    });\n  }\n}\n\nfunction runPutEffect(env, _ref2, cb) {\n  var channel = _ref2.channel,\n      action = _ref2.action,\n      resolve = _ref2.resolve;\n\n  /**\n   Schedule the put in case another saga is holding a lock.\n   The put will be executed atomically. ie nested puts will execute after\n   this put has terminated.\n   **/\n  asap(function () {\n    var result;\n\n    try {\n      result = (channel ? channel.put : env.dispatch)(action);\n    } catch (error) {\n      cb(error, true);\n      return;\n    }\n\n    if (resolve && promise(result)) {\n      resolvePromise(result, cb);\n    } else {\n      cb(result);\n    }\n  }); // Put effects are non cancellables\n}\n\nfunction runTakeEffect(env, _ref3, cb) {\n  var _ref3$channel = _ref3.channel,\n      channel = _ref3$channel === void 0 ? env.channel : _ref3$channel,\n      pattern = _ref3.pattern,\n      maybe = _ref3.maybe;\n\n  var takeCb = function takeCb(input) {\n    if (input instanceof Error) {\n      cb(input, true);\n      return;\n    }\n\n    if (isEnd(input) && !maybe) {\n      cb(TERMINATE);\n      return;\n    }\n\n    cb(input);\n  };\n\n  try {\n    channel.take(takeCb, notUndef(pattern) ? matcher(pattern) : null);\n  } catch (err) {\n    cb(err, true);\n    return;\n  }\n\n  cb.cancel = takeCb.cancel;\n}\n\nfunction runCallEffect(env, _ref4, cb, _ref5) {\n  var context = _ref4.context,\n      fn = _ref4.fn,\n      args = _ref4.args;\n  var task = _ref5.task;\n\n  // catch synchronous failures; see #152\n  try {\n    var result = fn.apply(context, args);\n\n    if (promise(result)) {\n      resolvePromise(result, cb);\n      return;\n    }\n\n    if (iterator(result)) {\n      // resolve iterator\n      proc(env, result, task.context, current, getMetaInfo(fn),\n      /* isRoot */\n      false, cb);\n      return;\n    }\n\n    cb(result);\n  } catch (error) {\n    cb(error, true);\n  }\n}\n\nfunction runCPSEffect(env, _ref6, cb) {\n  var context = _ref6.context,\n      fn = _ref6.fn,\n      args = _ref6.args;\n\n  // CPS (ie node style functions) can define their own cancellation logic\n  // by setting cancel field on the cb\n  // catch synchronous failures; see #152\n  try {\n    var cpsCb = function cpsCb(err, res) {\n      if (undef(err)) {\n        cb(res);\n      } else {\n        cb(err, true);\n      }\n    };\n\n    fn.apply(context, args.concat(cpsCb));\n\n    if (cpsCb.cancel) {\n      cb.cancel = cpsCb.cancel;\n    }\n  } catch (error) {\n    cb(error, true);\n  }\n}\n\nfunction runForkEffect(env, _ref7, cb, _ref8) {\n  var context = _ref7.context,\n      fn = _ref7.fn,\n      args = _ref7.args,\n      detached = _ref7.detached;\n  var parent = _ref8.task;\n  var taskIterator = createTaskIterator({\n    context: context,\n    fn: fn,\n    args: args\n  });\n  var meta = getIteratorMetaInfo(taskIterator, fn);\n  immediately(function () {\n    var child = proc(env, taskIterator, parent.context, current, meta, detached, undefined);\n\n    if (detached) {\n      cb(child);\n    } else {\n      if (child.isRunning()) {\n        parent.queue.addTask(child);\n        cb(child);\n      } else if (child.isAborted()) {\n        parent.queue.abort(child.error());\n      } else {\n        cb(child);\n      }\n    }\n  }); // Fork effects are non cancellables\n}\n\nfunction runJoinEffect(env, taskOrTasks, cb, _ref9) {\n  var task = _ref9.task;\n\n  var joinSingleTask = function joinSingleTask(taskToJoin, cb) {\n    if (taskToJoin.isRunning()) {\n      var joiner = {\n        task: task,\n        cb: cb\n      };\n\n      cb.cancel = function () {\n        if (taskToJoin.isRunning()) remove(taskToJoin.joiners, joiner);\n      };\n\n      taskToJoin.joiners.push(joiner);\n    } else {\n      if (taskToJoin.isAborted()) {\n        cb(taskToJoin.error(), true);\n      } else {\n        cb(taskToJoin.result());\n      }\n    }\n  };\n\n  if (array$1(taskOrTasks)) {\n    if (taskOrTasks.length === 0) {\n      cb([]);\n      return;\n    }\n\n    var childCallbacks = createAllStyleChildCallbacks(taskOrTasks, cb);\n    taskOrTasks.forEach(function (t, i) {\n      joinSingleTask(t, childCallbacks[i]);\n    });\n  } else {\n    joinSingleTask(taskOrTasks, cb);\n  }\n}\n\nfunction cancelSingleTask(taskToCancel) {\n  if (taskToCancel.isRunning()) {\n    taskToCancel.cancel();\n  }\n}\n\nfunction runCancelEffect(env, taskOrTasks, cb, _ref10) {\n  var task = _ref10.task;\n\n  if (taskOrTasks === SELF_CANCELLATION) {\n    cancelSingleTask(task);\n  } else if (array$1(taskOrTasks)) {\n    taskOrTasks.forEach(cancelSingleTask);\n  } else {\n    cancelSingleTask(taskOrTasks);\n  }\n\n  cb(); // cancel effects are non cancellables\n}\n\nfunction runAllEffect(env, effects, cb, _ref11) {\n  var digestEffect = _ref11.digestEffect;\n  var effectId = current;\n  var keys = Object.keys(effects);\n\n  if (keys.length === 0) {\n    cb(array$1(effects) ? [] : {});\n    return;\n  }\n\n  var childCallbacks = createAllStyleChildCallbacks(effects, cb);\n  keys.forEach(function (key) {\n    digestEffect(effects[key], effectId, childCallbacks[key], key);\n  });\n}\n\nfunction runRaceEffect(env, effects, cb, _ref12) {\n  var digestEffect = _ref12.digestEffect;\n  var effectId = current;\n  var keys = Object.keys(effects);\n  var response = array$1(effects) ? createEmptyArray(keys.length) : {};\n  var childCbs = {};\n  var completed = false;\n  keys.forEach(function (key) {\n    var chCbAtKey = function chCbAtKey(res, isErr) {\n      if (completed) {\n        return;\n      }\n\n      if (isErr || shouldComplete(res)) {\n        // Race Auto cancellation\n        cb.cancel();\n        cb(res, isErr);\n      } else {\n        cb.cancel();\n        completed = true;\n        response[key] = res;\n        cb(response);\n      }\n    };\n\n    chCbAtKey.cancel = noop;\n    childCbs[key] = chCbAtKey;\n  });\n\n  cb.cancel = function () {\n    // prevents unnecessary cancellation\n    if (!completed) {\n      completed = true;\n      keys.forEach(function (key) {\n        return childCbs[key].cancel();\n      });\n    }\n  };\n\n  keys.forEach(function (key) {\n    if (completed) {\n      return;\n    }\n\n    digestEffect(effects[key], effectId, childCbs[key], key);\n  });\n}\n\nfunction runSelectEffect(env, _ref13, cb) {\n  var selector = _ref13.selector,\n      args = _ref13.args;\n\n  try {\n    var state = selector.apply(void 0, [env.getState()].concat(args));\n    cb(state);\n  } catch (error) {\n    cb(error, true);\n  }\n}\n\nfunction runChannelEffect(env, _ref14, cb) {\n  var pattern = _ref14.pattern,\n      buffer = _ref14.buffer;\n  var chan = channel(buffer);\n  var match = matcher(pattern);\n\n  var taker = function taker(action) {\n    if (!isEnd(action)) {\n      env.channel.take(taker, match);\n    }\n\n    chan.put(action);\n  };\n\n  var close = chan.close;\n\n  chan.close = function () {\n    taker.cancel();\n    close();\n  };\n\n  env.channel.take(taker, match);\n  cb(chan);\n}\n\nfunction runCancelledEffect(env, data, cb, _ref15) {\n  var task = _ref15.task;\n  cb(task.isCancelled());\n}\n\nfunction runFlushEffect(env, channel, cb) {\n  channel.flush(cb);\n}\n\nfunction runGetContextEffect(env, prop, cb, _ref16) {\n  var task = _ref16.task;\n  cb(task.context[prop]);\n}\n\nfunction runSetContextEffect(env, props, cb, _ref17) {\n  var task = _ref17.task;\n  assignWithSymbols(task.context, props);\n  cb();\n}\n\nvar effectRunnerMap = (_effectRunnerMap = {}, _effectRunnerMap[TAKE] = runTakeEffect, _effectRunnerMap[PUT] = runPutEffect, _effectRunnerMap[ALL] = runAllEffect, _effectRunnerMap[RACE] = runRaceEffect, _effectRunnerMap[CALL] = runCallEffect, _effectRunnerMap[CPS] = runCPSEffect, _effectRunnerMap[FORK] = runForkEffect, _effectRunnerMap[JOIN] = runJoinEffect, _effectRunnerMap[CANCEL$1] = runCancelEffect, _effectRunnerMap[SELECT] = runSelectEffect, _effectRunnerMap[ACTION_CHANNEL] = runChannelEffect, _effectRunnerMap[CANCELLED$1] = runCancelledEffect, _effectRunnerMap[FLUSH] = runFlushEffect, _effectRunnerMap[GET_CONTEXT] = runGetContextEffect, _effectRunnerMap[SET_CONTEXT] = runSetContextEffect, _effectRunnerMap);\n\n/**\n Used to track a parent task and its forks\n In the fork model, forked tasks are attached by default to their parent\n We model this using the concept of Parent task && main Task\n main task is the main flow of the current Generator, the parent tasks is the\n aggregation of the main tasks + all its forked tasks.\n Thus the whole model represents an execution tree with multiple branches (vs the\n linear execution tree in sequential (non parallel) programming)\n\n A parent tasks has the following semantics\n - It completes if all its forks either complete or all cancelled\n - If it's cancelled, all forks are cancelled as well\n - It aborts if any uncaught error bubbles up from forks\n - If it completes, the return value is the one returned by the main task\n **/\n\nfunction forkQueue(mainTask, onAbort, cont) {\n  var tasks = [];\n  var result;\n  var completed = false;\n  addTask(mainTask);\n\n  var getTasks = function getTasks() {\n    return tasks;\n  };\n\n  function abort(err) {\n    onAbort();\n    cancelAll();\n    cont(err, true);\n  }\n\n  function addTask(task) {\n    tasks.push(task);\n\n    task.cont = function (res, isErr) {\n      if (completed) {\n        return;\n      }\n\n      remove(tasks, task);\n      task.cont = noop;\n\n      if (isErr) {\n        abort(res);\n      } else {\n        if (task === mainTask) {\n          result = res;\n        }\n\n        if (!tasks.length) {\n          completed = true;\n          cont(result);\n        }\n      }\n    };\n  }\n\n  function cancelAll() {\n    if (completed) {\n      return;\n    }\n\n    completed = true;\n    tasks.forEach(function (t) {\n      t.cont = noop;\n      t.cancel();\n    });\n    tasks = [];\n  }\n\n  return {\n    addTask: addTask,\n    cancelAll: cancelAll,\n    abort: abort,\n    getTasks: getTasks\n  };\n}\n\n// there can be only a single saga error created at any given moment\n\nfunction formatLocation(fileName, lineNumber) {\n  return fileName + \"?\" + lineNumber;\n}\n\nfunction effectLocationAsString(effect) {\n  var location = getLocation(effect);\n\n  if (location) {\n    var code = location.code,\n        fileName = location.fileName,\n        lineNumber = location.lineNumber;\n    var source = code + \"  \" + formatLocation(fileName, lineNumber);\n    return source;\n  }\n\n  return '';\n}\n\nfunction sagaLocationAsString(sagaMeta) {\n  var name = sagaMeta.name,\n      location = sagaMeta.location;\n\n  if (location) {\n    return name + \"  \" + formatLocation(location.fileName, location.lineNumber);\n  }\n\n  return name;\n}\n\nfunction cancelledTasksAsString(sagaStack) {\n  var cancelledTasks = flatMap(function (i) {\n    return i.cancelledTasks;\n  }, sagaStack);\n\n  if (!cancelledTasks.length) {\n    return '';\n  }\n\n  return ['Tasks cancelled due to error:'].concat(cancelledTasks).join('\\n');\n}\n\nvar crashedEffect = null;\nvar sagaStack = [];\nvar addSagaFrame = function addSagaFrame(frame) {\n  frame.crashedEffect = crashedEffect;\n  sagaStack.push(frame);\n};\nvar clear = function clear() {\n  crashedEffect = null;\n  sagaStack.length = 0;\n}; // this sets crashed effect for the soon-to-be-reported saga frame\n// this slightly streatches the singleton nature of this module into wrong direction\n// as it's even less obvious what's the data flow here, but it is what it is for now\n\nvar setCrashedEffect = function setCrashedEffect(effect) {\n  crashedEffect = effect;\n};\n/**\n  @returns {string}\n\n  @example\n  The above error occurred in task errorInPutSaga {pathToFile}\n  when executing effect put({type: 'REDUCER_ACTION_ERROR_IN_PUT'}) {pathToFile}\n      created by fetchSaga {pathToFile}\n      created by rootSaga {pathToFile}\n*/\n\nvar toString = function toString() {\n  var firstSaga = sagaStack[0],\n      otherSagas = sagaStack.slice(1);\n  var crashedEffectLocation = firstSaga.crashedEffect ? effectLocationAsString(firstSaga.crashedEffect) : null;\n  var errorMessage = \"The above error occurred in task \" + sagaLocationAsString(firstSaga.meta) + (crashedEffectLocation ? \" \\n when executing effect \" + crashedEffectLocation : '');\n  return [errorMessage].concat(otherSagas.map(function (s) {\n    return \"    created by \" + sagaLocationAsString(s.meta);\n  }), [cancelledTasksAsString(sagaStack)]).join('\\n');\n};\n\nfunction newTask(env, mainTask, parentContext, parentEffectId, meta, isRoot, cont) {\n  var _task;\n\n  if (cont === void 0) {\n    cont = noop;\n  }\n\n  var status = RUNNING;\n  var taskResult;\n  var taskError;\n  var deferredEnd = null;\n  var cancelledDueToErrorTasks = [];\n  var context = Object.create(parentContext);\n  var queue = forkQueue(mainTask, function onAbort() {\n    cancelledDueToErrorTasks.push.apply(cancelledDueToErrorTasks, queue.getTasks().map(function (t) {\n      return t.meta.name;\n    }));\n  }, end);\n  /**\n   This may be called by a parent generator to trigger/propagate cancellation\n   cancel all pending tasks (including the main task), then end the current task.\n    Cancellation propagates down to the whole execution tree held by this Parent task\n   It's also propagated to all joiners of this task and their execution tree/joiners\n    Cancellation is noop for terminated/Cancelled tasks tasks\n   **/\n\n  function cancel() {\n    if (status === RUNNING) {\n      // Setting status to CANCELLED does not necessarily mean that the task/iterators are stopped\n      // effects in the iterator's finally block will still be executed\n      status = CANCELLED;\n      queue.cancelAll(); // Ending with a TASK_CANCEL will propagate the Cancellation to all joiners\n\n      end(TASK_CANCEL, false);\n    }\n  }\n\n  function end(result, isErr) {\n    if (!isErr) {\n      // The status here may be RUNNING or CANCELLED\n      // If the status is CANCELLED, then we do not need to change it here\n      if (result === TASK_CANCEL) {\n        status = CANCELLED;\n      } else if (status !== CANCELLED) {\n        status = DONE;\n      }\n\n      taskResult = result;\n      deferredEnd && deferredEnd.resolve(result);\n    } else {\n      status = ABORTED;\n      addSagaFrame({\n        meta: meta,\n        cancelledTasks: cancelledDueToErrorTasks\n      });\n\n      if (task.isRoot) {\n        var sagaStack = toString(); // we've dumped the saga stack to string and are passing it to user's code\n        // we know that it won't be needed anymore and we need to clear it\n\n        clear();\n        env.onError(result, {\n          sagaStack: sagaStack\n        });\n      }\n\n      taskError = result;\n      deferredEnd && deferredEnd.reject(result);\n    }\n\n    task.cont(result, isErr);\n    task.joiners.forEach(function (joiner) {\n      joiner.cb(result, isErr);\n    });\n    task.joiners = null;\n  }\n\n  function setContext(props) {\n    if (process.env.NODE_ENV !== 'production') {\n      check(props, object, createSetContextWarning('task', props));\n    }\n\n    assignWithSymbols(context, props);\n  }\n\n  function toPromise() {\n    if (deferredEnd) {\n      return deferredEnd.promise;\n    }\n\n    deferredEnd = deferred();\n\n    if (status === ABORTED) {\n      deferredEnd.reject(taskError);\n    } else if (status !== RUNNING) {\n      deferredEnd.resolve(taskResult);\n    }\n\n    return deferredEnd.promise;\n  }\n\n  var task = (_task = {}, _task[TASK] = true, _task.id = parentEffectId, _task.meta = meta, _task.isRoot = isRoot, _task.context = context, _task.joiners = [], _task.queue = queue, _task.cancel = cancel, _task.cont = cont, _task.end = end, _task.setContext = setContext, _task.toPromise = toPromise, _task.isRunning = function isRunning() {\n    return status === RUNNING;\n  }, _task.isCancelled = function isCancelled() {\n    return status === CANCELLED || status === RUNNING && mainTask.status === CANCELLED;\n  }, _task.isAborted = function isAborted() {\n    return status === ABORTED;\n  }, _task.result = function result() {\n    return taskResult;\n  }, _task.error = function error() {\n    return taskError;\n  }, _task);\n  return task;\n}\n\nfunction proc(env, iterator$1, parentContext, parentEffectId, meta, isRoot, cont) {\n  if (process.env.NODE_ENV !== 'production' && iterator$1[asyncIteratorSymbol]) {\n    throw new Error(\"redux-saga doesn't support async generators, please use only regular ones\");\n  }\n\n  var finalRunEffect = env.finalizeRunEffect(runEffect);\n  /**\n    Tracks the current effect cancellation\n    Each time the generator progresses. calling runEffect will set a new value\n    on it. It allows propagating cancellation to child effects\n  **/\n\n  next.cancel = noop;\n  /** Creates a main task to track the main flow */\n\n  var mainTask = {\n    meta: meta,\n    cancel: cancelMain,\n    status: RUNNING\n  };\n  /**\n   Creates a new task descriptor for this generator.\n   A task is the aggregation of it's mainTask and all it's forked tasks.\n   **/\n\n  var task = newTask(env, mainTask, parentContext, parentEffectId, meta, isRoot, cont);\n  var executingContext = {\n    task: task,\n    digestEffect: digestEffect\n  };\n  /**\n    cancellation of the main task. We'll simply resume the Generator with a TASK_CANCEL\n  **/\n\n  function cancelMain() {\n    if (mainTask.status === RUNNING) {\n      mainTask.status = CANCELLED;\n      next(TASK_CANCEL);\n    }\n  }\n  /**\n    attaches cancellation logic to this task's continuation\n    this will permit cancellation to propagate down the call chain\n  **/\n\n\n  if (cont) {\n    cont.cancel = task.cancel;\n  } // kicks up the generator\n\n\n  next(); // then return the task descriptor to the caller\n\n  return task;\n  /**\n   * This is the generator driver\n   * It's a recursive async/continuation function which calls itself\n   * until the generator terminates or throws\n   * @param {internal commands(TASK_CANCEL | TERMINATE) | any} arg - value, generator will be resumed with.\n   * @param {boolean} isErr - the flag shows if effect finished with an error\n   *\n   * receives either (command | effect result, false) or (any thrown thing, true)\n   */\n\n  function next(arg, isErr) {\n    try {\n      var result;\n\n      if (isErr) {\n        result = iterator$1.throw(arg); // user handled the error, we can clear bookkept values\n\n        clear();\n      } else if (shouldCancel(arg)) {\n        /**\n          getting TASK_CANCEL automatically cancels the main task\n          We can get this value here\n           - By cancelling the parent task manually\n          - By joining a Cancelled task\n        **/\n        mainTask.status = CANCELLED;\n        /**\n          Cancels the current effect; this will propagate the cancellation down to any called tasks\n        **/\n\n        next.cancel();\n        /**\n          If this Generator has a `return` method then invokes it\n          This will jump to the finally block\n        **/\n\n        result = func(iterator$1.return) ? iterator$1.return(TASK_CANCEL) : {\n          done: true,\n          value: TASK_CANCEL\n        };\n      } else if (shouldTerminate(arg)) {\n        // We get TERMINATE flag, i.e. by taking from a channel that ended using `take` (and not `takem` used to trap End of channels)\n        result = func(iterator$1.return) ? iterator$1.return() : {\n          done: true\n        };\n      } else {\n        result = iterator$1.next(arg);\n      }\n\n      if (!result.done) {\n        digestEffect(result.value, parentEffectId, next);\n      } else {\n        /**\n          This Generator has ended, terminate the main task and notify the fork queue\n        **/\n        if (mainTask.status !== CANCELLED) {\n          mainTask.status = DONE;\n        }\n\n        mainTask.cont(result.value);\n      }\n    } catch (error) {\n      if (mainTask.status === CANCELLED) {\n        throw error;\n      }\n\n      mainTask.status = ABORTED;\n      mainTask.cont(error, true);\n    }\n  }\n\n  function runEffect(effect, effectId, currCb) {\n    /**\n      each effect runner must attach its own logic of cancellation to the provided callback\n      it allows this generator to propagate cancellation downward.\n       ATTENTION! effect runners must setup the cancel logic by setting cb.cancel = [cancelMethod]\n      And the setup must occur before calling the callback\n       This is a sort of inversion of control: called async functions are responsible\n      of completing the flow by calling the provided continuation; while caller functions\n      are responsible for aborting the current flow by calling the attached cancel function\n       Library users can attach their own cancellation logic to promises by defining a\n      promise[CANCEL] method in their returned promises\n      ATTENTION! calling cancel must have no effect on an already completed or cancelled effect\n    **/\n    if (promise(effect)) {\n      resolvePromise(effect, currCb);\n    } else if (iterator(effect)) {\n      // resolve iterator\n      proc(env, effect, task.context, effectId, meta,\n      /* isRoot */\n      false, currCb);\n    } else if (effect && effect[IO]) {\n      var effectRunner = effectRunnerMap[effect.type];\n      effectRunner(env, effect.payload, currCb, executingContext);\n    } else {\n      // anything else returned as is\n      currCb(effect);\n    }\n  }\n\n  function digestEffect(effect, parentEffectId, cb, label) {\n    if (label === void 0) {\n      label = '';\n    }\n\n    var effectId = nextSagaId();\n    env.sagaMonitor && env.sagaMonitor.effectTriggered({\n      effectId: effectId,\n      parentEffectId: parentEffectId,\n      label: label,\n      effect: effect\n    });\n    /**\n      completion callback and cancel callback are mutually exclusive\n      We can't cancel an already completed effect\n      And We can't complete an already cancelled effectId\n    **/\n\n    var effectSettled; // Completion callback passed to the appropriate effect runner\n\n    function currCb(res, isErr) {\n      if (effectSettled) {\n        return;\n      }\n\n      effectSettled = true;\n      cb.cancel = noop; // defensive measure\n\n      if (env.sagaMonitor) {\n        if (isErr) {\n          env.sagaMonitor.effectRejected(effectId, res);\n        } else {\n          env.sagaMonitor.effectResolved(effectId, res);\n        }\n      }\n\n      if (isErr) {\n        setCrashedEffect(effect);\n      }\n\n      cb(res, isErr);\n    } // tracks down the current cancel\n\n\n    currCb.cancel = noop; // setup cancellation logic on the parent cb\n\n    cb.cancel = function () {\n      // prevents cancelling an already completed effect\n      if (effectSettled) {\n        return;\n      }\n\n      effectSettled = true;\n      currCb.cancel(); // propagates cancel downward\n\n      currCb.cancel = noop; // defensive measure\n\n      env.sagaMonitor && env.sagaMonitor.effectCancelled(effectId);\n    };\n\n    finalRunEffect(effect, effectId, currCb);\n  }\n}\n\nvar RUN_SAGA_SIGNATURE = 'runSaga(options, saga, ...args)';\nvar NON_GENERATOR_ERR = RUN_SAGA_SIGNATURE + \": saga argument must be a Generator function!\";\nfunction runSaga(_ref, saga) {\n  var _ref$channel = _ref.channel,\n      channel = _ref$channel === void 0 ? stdChannel() : _ref$channel,\n      dispatch = _ref.dispatch,\n      getState = _ref.getState,\n      _ref$context = _ref.context,\n      context = _ref$context === void 0 ? {} : _ref$context,\n      sagaMonitor = _ref.sagaMonitor,\n      effectMiddlewares = _ref.effectMiddlewares,\n      _ref$onError = _ref.onError,\n      onError = _ref$onError === void 0 ? logError : _ref$onError;\n\n  if (process.env.NODE_ENV !== 'production') {\n    check(saga, func, NON_GENERATOR_ERR);\n  }\n\n  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n\n  var iterator$1 = saga.apply(void 0, args);\n\n  if (process.env.NODE_ENV !== 'production') {\n    check(iterator$1, iterator, NON_GENERATOR_ERR);\n  }\n\n  var effectId = nextSagaId();\n\n  if (sagaMonitor) {\n    // monitors are expected to have a certain interface, let's fill-in any missing ones\n    sagaMonitor.rootSagaStarted = sagaMonitor.rootSagaStarted || noop;\n    sagaMonitor.effectTriggered = sagaMonitor.effectTriggered || noop;\n    sagaMonitor.effectResolved = sagaMonitor.effectResolved || noop;\n    sagaMonitor.effectRejected = sagaMonitor.effectRejected || noop;\n    sagaMonitor.effectCancelled = sagaMonitor.effectCancelled || noop;\n    sagaMonitor.actionDispatched = sagaMonitor.actionDispatched || noop;\n    sagaMonitor.rootSagaStarted({\n      effectId: effectId,\n      saga: saga,\n      args: args\n    });\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (notUndef(dispatch)) {\n      check(dispatch, func, 'dispatch must be a function');\n    }\n\n    if (notUndef(getState)) {\n      check(getState, func, 'getState must be a function');\n    }\n\n    if (notUndef(effectMiddlewares)) {\n      var MIDDLEWARE_TYPE_ERROR = 'effectMiddlewares must be an array of functions';\n      check(effectMiddlewares, array$1, MIDDLEWARE_TYPE_ERROR);\n      effectMiddlewares.forEach(function (effectMiddleware) {\n        return check(effectMiddleware, func, MIDDLEWARE_TYPE_ERROR);\n      });\n    }\n\n    check(onError, func, 'onError passed to the redux-saga is not a function!');\n  }\n\n  var finalizeRunEffect;\n\n  if (effectMiddlewares) {\n    var middleware = compose.apply(void 0, effectMiddlewares);\n\n    finalizeRunEffect = function finalizeRunEffect(runEffect) {\n      return function (effect, effectId, currCb) {\n        var plainRunEffect = function plainRunEffect(eff) {\n          return runEffect(eff, effectId, currCb);\n        };\n\n        return middleware(plainRunEffect)(effect);\n      };\n    };\n  } else {\n    finalizeRunEffect = identity;\n  }\n\n  var env = {\n    channel: channel,\n    dispatch: wrapSagaDispatch(dispatch),\n    getState: getState,\n    sagaMonitor: sagaMonitor,\n    onError: onError,\n    finalizeRunEffect: finalizeRunEffect\n  };\n  return immediately(function () {\n    var task = proc(env, iterator$1, context, effectId, getMetaInfo(saga),\n    /* isRoot */\n    true, undefined);\n\n    if (sagaMonitor) {\n      sagaMonitor.effectResolved(effectId, task);\n    }\n\n    return task;\n  });\n}\n\nfunction sagaMiddlewareFactory(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      _ref$context = _ref.context,\n      context = _ref$context === void 0 ? {} : _ref$context,\n      _ref$channel = _ref.channel,\n      channel = _ref$channel === void 0 ? stdChannel() : _ref$channel,\n      sagaMonitor = _ref.sagaMonitor,\n      options = _objectWithoutPropertiesLoose(_ref, [\"context\", \"channel\", \"sagaMonitor\"]);\n\n  var boundRunSaga;\n\n  if (process.env.NODE_ENV !== 'production') {\n    check(channel, channel$1, 'options.channel passed to the Saga middleware is not a channel');\n  }\n\n  function sagaMiddleware(_ref2) {\n    var getState = _ref2.getState,\n        dispatch = _ref2.dispatch;\n    boundRunSaga = runSaga.bind(null, _extends({}, options, {\n      context: context,\n      channel: channel,\n      dispatch: dispatch,\n      getState: getState,\n      sagaMonitor: sagaMonitor\n    }));\n    return function (next) {\n      return function (action) {\n        if (sagaMonitor && sagaMonitor.actionDispatched) {\n          sagaMonitor.actionDispatched(action);\n        }\n\n        var result = next(action); // hit reducers\n\n        channel.put(action);\n        return result;\n      };\n    };\n  }\n\n  sagaMiddleware.run = function () {\n    if (process.env.NODE_ENV !== 'production' && !boundRunSaga) {\n      throw new Error('Before running a Saga, you must mount the Saga middleware on the Store using applyMiddleware');\n    }\n\n    return boundRunSaga.apply(void 0, arguments);\n  };\n\n  sagaMiddleware.setContext = function (props) {\n    if (process.env.NODE_ENV !== 'production') {\n      check(props, object, createSetContextWarning('sagaMiddleware', props));\n    }\n\n    assignWithSymbols(context, props);\n  };\n\n  return sagaMiddleware;\n}\n\nexport default sagaMiddlewareFactory;\nexport { END, channel, eventChannel, isEnd, multicastChannel, runSaga, stdChannel };\n","import '@redux-saga/symbols';\nimport '@babel/runtime/helpers/esm/extends';\nimport { channel, stringableFunc, func, notUndef } from '@redux-saga/is';\nimport { q as makeIterator, K as take, L as fork, M as cancel, N as call, O as actionChannel, Q as sliding, U as delay, V as race, c as check } from './io-6de156f3.js';\nexport { O as actionChannel, _ as all, $ as apply, N as call, M as cancel, a4 as cancelled, a0 as cps, U as delay, W as effectTypes, a5 as flush, L as fork, a6 as getContext, a2 as join, Y as put, Z as putResolve, V as race, a3 as select, a7 as setContext, a1 as spawn, K as take, X as takeMaybe } from './io-6de156f3.js';\nimport '@redux-saga/delay-p';\n\nvar done = function done(value) {\n  return {\n    done: true,\n    value: value\n  };\n};\n\nvar qEnd = {};\nfunction safeName(patternOrChannel) {\n  if (channel(patternOrChannel)) {\n    return 'channel';\n  }\n\n  if (stringableFunc(patternOrChannel)) {\n    return String(patternOrChannel);\n  }\n\n  if (func(patternOrChannel)) {\n    return patternOrChannel.name;\n  }\n\n  return String(patternOrChannel);\n}\nfunction fsmIterator(fsm, startState, name) {\n  var stateUpdater,\n      errorState,\n      effect,\n      nextState = startState;\n\n  function next(arg, error) {\n    if (nextState === qEnd) {\n      return done(arg);\n    }\n\n    if (error && !errorState) {\n      nextState = qEnd;\n      throw error;\n    } else {\n      stateUpdater && stateUpdater(arg);\n      var currentState = error ? fsm[errorState](error) : fsm[nextState]();\n      nextState = currentState.nextState;\n      effect = currentState.effect;\n      stateUpdater = currentState.stateUpdater;\n      errorState = currentState.errorState;\n      return nextState === qEnd ? done(arg) : effect;\n    }\n  }\n\n  return makeIterator(next, function (error) {\n    return next(null, error);\n  }, name);\n}\n\nfunction takeEvery(patternOrChannel, worker) {\n  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n\n  var yTake = {\n    done: false,\n    value: take(patternOrChannel)\n  };\n\n  var yFork = function yFork(ac) {\n    return {\n      done: false,\n      value: fork.apply(void 0, [worker].concat(args, [ac]))\n    };\n  };\n\n  var action,\n      setAction = function setAction(ac) {\n    return action = ac;\n  };\n\n  return fsmIterator({\n    q1: function q1() {\n      return {\n        nextState: 'q2',\n        effect: yTake,\n        stateUpdater: setAction\n      };\n    },\n    q2: function q2() {\n      return {\n        nextState: 'q1',\n        effect: yFork(action)\n      };\n    }\n  }, 'q1', \"takeEvery(\" + safeName(patternOrChannel) + \", \" + worker.name + \")\");\n}\n\nfunction takeLatest(patternOrChannel, worker) {\n  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n\n  var yTake = {\n    done: false,\n    value: take(patternOrChannel)\n  };\n\n  var yFork = function yFork(ac) {\n    return {\n      done: false,\n      value: fork.apply(void 0, [worker].concat(args, [ac]))\n    };\n  };\n\n  var yCancel = function yCancel(task) {\n    return {\n      done: false,\n      value: cancel(task)\n    };\n  };\n\n  var task, action;\n\n  var setTask = function setTask(t) {\n    return task = t;\n  };\n\n  var setAction = function setAction(ac) {\n    return action = ac;\n  };\n\n  return fsmIterator({\n    q1: function q1() {\n      return {\n        nextState: 'q2',\n        effect: yTake,\n        stateUpdater: setAction\n      };\n    },\n    q2: function q2() {\n      return task ? {\n        nextState: 'q3',\n        effect: yCancel(task)\n      } : {\n        nextState: 'q1',\n        effect: yFork(action),\n        stateUpdater: setTask\n      };\n    },\n    q3: function q3() {\n      return {\n        nextState: 'q1',\n        effect: yFork(action),\n        stateUpdater: setTask\n      };\n    }\n  }, 'q1', \"takeLatest(\" + safeName(patternOrChannel) + \", \" + worker.name + \")\");\n}\n\nfunction takeLeading(patternOrChannel, worker) {\n  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n\n  var yTake = {\n    done: false,\n    value: take(patternOrChannel)\n  };\n\n  var yCall = function yCall(ac) {\n    return {\n      done: false,\n      value: call.apply(void 0, [worker].concat(args, [ac]))\n    };\n  };\n\n  var action;\n\n  var setAction = function setAction(ac) {\n    return action = ac;\n  };\n\n  return fsmIterator({\n    q1: function q1() {\n      return {\n        nextState: 'q2',\n        effect: yTake,\n        stateUpdater: setAction\n      };\n    },\n    q2: function q2() {\n      return {\n        nextState: 'q1',\n        effect: yCall(action)\n      };\n    }\n  }, 'q1', \"takeLeading(\" + safeName(patternOrChannel) + \", \" + worker.name + \")\");\n}\n\nfunction throttle(delayLength, pattern, worker) {\n  for (var _len = arguments.length, args = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    args[_key - 3] = arguments[_key];\n  }\n\n  var action, channel;\n  var yActionChannel = {\n    done: false,\n    value: actionChannel(pattern, sliding(1))\n  };\n\n  var yTake = function yTake() {\n    return {\n      done: false,\n      value: take(channel)\n    };\n  };\n\n  var yFork = function yFork(ac) {\n    return {\n      done: false,\n      value: fork.apply(void 0, [worker].concat(args, [ac]))\n    };\n  };\n\n  var yDelay = {\n    done: false,\n    value: delay(delayLength)\n  };\n\n  var setAction = function setAction(ac) {\n    return action = ac;\n  };\n\n  var setChannel = function setChannel(ch) {\n    return channel = ch;\n  };\n\n  return fsmIterator({\n    q1: function q1() {\n      return {\n        nextState: 'q2',\n        effect: yActionChannel,\n        stateUpdater: setChannel\n      };\n    },\n    q2: function q2() {\n      return {\n        nextState: 'q3',\n        effect: yTake(),\n        stateUpdater: setAction\n      };\n    },\n    q3: function q3() {\n      return {\n        nextState: 'q4',\n        effect: yFork(action)\n      };\n    },\n    q4: function q4() {\n      return {\n        nextState: 'q2',\n        effect: yDelay\n      };\n    }\n  }, 'q1', \"throttle(\" + safeName(pattern) + \", \" + worker.name + \")\");\n}\n\nfunction retry(maxTries, delayLength, fn) {\n  var counter = maxTries;\n\n  for (var _len = arguments.length, args = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    args[_key - 3] = arguments[_key];\n  }\n\n  var yCall = {\n    done: false,\n    value: call.apply(void 0, [fn].concat(args))\n  };\n  var yDelay = {\n    done: false,\n    value: delay(delayLength)\n  };\n  return fsmIterator({\n    q1: function q1() {\n      return {\n        nextState: 'q2',\n        effect: yCall,\n        errorState: 'q10'\n      };\n    },\n    q2: function q2() {\n      return {\n        nextState: qEnd\n      };\n    },\n    q10: function q10(error) {\n      counter -= 1;\n\n      if (counter <= 0) {\n        throw error;\n      }\n\n      return {\n        nextState: 'q1',\n        effect: yDelay\n      };\n    }\n  }, 'q1', \"retry(\" + fn.name + \")\");\n}\n\nfunction debounceHelper(delayLength, patternOrChannel, worker) {\n  for (var _len = arguments.length, args = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    args[_key - 3] = arguments[_key];\n  }\n\n  var action, raceOutput;\n  var yTake = {\n    done: false,\n    value: take(patternOrChannel)\n  };\n  var yRace = {\n    done: false,\n    value: race({\n      action: take(patternOrChannel),\n      debounce: delay(delayLength)\n    })\n  };\n\n  var yFork = function yFork(ac) {\n    return {\n      done: false,\n      value: fork.apply(void 0, [worker].concat(args, [ac]))\n    };\n  };\n\n  var yNoop = function yNoop(value) {\n    return {\n      done: false,\n      value: value\n    };\n  };\n\n  var setAction = function setAction(ac) {\n    return action = ac;\n  };\n\n  var setRaceOutput = function setRaceOutput(ro) {\n    return raceOutput = ro;\n  };\n\n  return fsmIterator({\n    q1: function q1() {\n      return {\n        nextState: 'q2',\n        effect: yTake,\n        stateUpdater: setAction\n      };\n    },\n    q2: function q2() {\n      return {\n        nextState: 'q3',\n        effect: yRace,\n        stateUpdater: setRaceOutput\n      };\n    },\n    q3: function q3() {\n      return raceOutput.debounce ? {\n        nextState: 'q1',\n        effect: yFork(action)\n      } : {\n        nextState: 'q2',\n        effect: yNoop(raceOutput.action),\n        stateUpdater: setAction\n      };\n    }\n  }, 'q1', \"debounce(\" + safeName(patternOrChannel) + \", \" + worker.name + \")\");\n}\n\nvar validateTakeEffect = function validateTakeEffect(fn, patternOrChannel, worker) {\n  check(patternOrChannel, notUndef, fn.name + \" requires a pattern or channel\");\n  check(worker, notUndef, fn.name + \" requires a saga parameter\");\n};\n\nfunction takeEvery$1(patternOrChannel, worker) {\n  if (process.env.NODE_ENV !== 'production') {\n    validateTakeEffect(takeEvery$1, patternOrChannel, worker);\n  }\n\n  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n\n  return fork.apply(void 0, [takeEvery, patternOrChannel, worker].concat(args));\n}\nfunction takeLatest$1(patternOrChannel, worker) {\n  if (process.env.NODE_ENV !== 'production') {\n    validateTakeEffect(takeLatest$1, patternOrChannel, worker);\n  }\n\n  for (var _len2 = arguments.length, args = new Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n    args[_key2 - 2] = arguments[_key2];\n  }\n\n  return fork.apply(void 0, [takeLatest, patternOrChannel, worker].concat(args));\n}\nfunction takeLeading$1(patternOrChannel, worker) {\n  if (process.env.NODE_ENV !== 'production') {\n    validateTakeEffect(takeLeading$1, patternOrChannel, worker);\n  }\n\n  for (var _len3 = arguments.length, args = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n    args[_key3 - 2] = arguments[_key3];\n  }\n\n  return fork.apply(void 0, [takeLeading, patternOrChannel, worker].concat(args));\n}\nfunction throttle$1(ms, pattern, worker) {\n  if (process.env.NODE_ENV !== 'production') {\n    check(pattern, notUndef, 'throttle requires a pattern');\n    check(worker, notUndef, 'throttle requires a saga parameter');\n  }\n\n  for (var _len4 = arguments.length, args = new Array(_len4 > 3 ? _len4 - 3 : 0), _key4 = 3; _key4 < _len4; _key4++) {\n    args[_key4 - 3] = arguments[_key4];\n  }\n\n  return fork.apply(void 0, [throttle, ms, pattern, worker].concat(args));\n}\nfunction retry$1(maxTries, delayLength, worker) {\n  for (var _len5 = arguments.length, args = new Array(_len5 > 3 ? _len5 - 3 : 0), _key5 = 3; _key5 < _len5; _key5++) {\n    args[_key5 - 3] = arguments[_key5];\n  }\n\n  return call.apply(void 0, [retry, maxTries, delayLength, worker].concat(args));\n}\nfunction debounce(delayLength, pattern, worker) {\n  for (var _len6 = arguments.length, args = new Array(_len6 > 3 ? _len6 - 3 : 0), _key6 = 3; _key6 < _len6; _key6++) {\n    args[_key6 - 3] = arguments[_key6];\n  }\n\n  return fork.apply(void 0, [debounceHelper, delayLength, pattern, worker].concat(args));\n}\n\nexport { debounce, retry$1 as retry, takeEvery$1 as takeEvery, takeLatest$1 as takeLatest, takeLeading$1 as takeLeading, throttle$1 as throttle };\n","function deferred() {\n  var def = {};\n  def.promise = new Promise(function (resolve, reject) {\n    def.resolve = resolve;\n    def.reject = reject;\n  });\n  return def;\n}\nfunction arrayOfDeferred(length) {\n  var arr = [];\n\n  for (var i = 0; i < length; i++) {\n    arr.push(deferred());\n  }\n\n  return arr;\n}\n\nexport default deferred;\nexport { arrayOfDeferred };\n","import { CANCEL } from '@redux-saga/symbols';\n\nfunction delayP(ms, val) {\n  if (val === void 0) {\n    val = true;\n  }\n\n  var timeoutId;\n  var promise = new Promise(function (resolve) {\n    timeoutId = setTimeout(resolve, ms, val);\n  });\n\n  promise[CANCEL] = function () {\n    clearTimeout(timeoutId);\n  };\n\n  return promise;\n}\n\nexport default delayP;\n","import { TASK, SAGA_ACTION, MULTICAST, IO } from '@redux-saga/symbols';\n\nvar undef = function undef(v) {\n  return v === null || v === undefined;\n};\nvar notUndef = function notUndef(v) {\n  return v !== null && v !== undefined;\n};\nvar func = function func(f) {\n  return typeof f === 'function';\n};\nvar number = function number(n) {\n  return typeof n === 'number';\n};\nvar string = function string(s) {\n  return typeof s === 'string';\n};\nvar array = Array.isArray;\nvar object = function object(obj) {\n  return obj && !array(obj) && typeof obj === 'object';\n};\nvar promise = function promise(p) {\n  return p && func(p.then);\n};\nvar iterator = function iterator(it) {\n  return it && func(it.next) && func(it.throw);\n};\nvar iterable = function iterable(it) {\n  return it && func(Symbol) ? func(it[Symbol.iterator]) : array(it);\n};\nvar task = function task(t) {\n  return t && t[TASK];\n};\nvar sagaAction = function sagaAction(a) {\n  return Boolean(a && a[SAGA_ACTION]);\n};\nvar observable = function observable(ob) {\n  return ob && func(ob.subscribe);\n};\nvar buffer = function buffer(buf) {\n  return buf && func(buf.isEmpty) && func(buf.take) && func(buf.put);\n};\nvar pattern = function pattern(pat) {\n  return pat && (string(pat) || symbol(pat) || func(pat) || array(pat) && pat.every(pattern));\n};\nvar channel = function channel(ch) {\n  return ch && func(ch.take) && func(ch.close);\n};\nvar stringableFunc = function stringableFunc(f) {\n  return func(f) && f.hasOwnProperty('toString');\n};\nvar symbol = function symbol(sym) {\n  return Boolean(sym) && typeof Symbol === 'function' && sym.constructor === Symbol && sym !== Symbol.prototype;\n};\nvar multicast = function multicast(ch) {\n  return channel(ch) && ch[MULTICAST];\n};\nvar effect = function effect(eff) {\n  return eff && eff[IO];\n};\n\nexport { array, buffer, channel, effect, func, iterable, iterator, multicast, notUndef, number, object, observable, pattern, promise, sagaAction, string, stringableFunc, symbol, task, undef };\n","var createSymbol = function createSymbol(name) {\n  return \"@@redux-saga/\" + name;\n};\n\nvar CANCEL =\n/*#__PURE__*/\ncreateSymbol('CANCEL_PROMISE');\nvar CHANNEL_END_TYPE =\n/*#__PURE__*/\ncreateSymbol('CHANNEL_END');\nvar IO =\n/*#__PURE__*/\ncreateSymbol('IO');\nvar MATCH =\n/*#__PURE__*/\ncreateSymbol('MATCH');\nvar MULTICAST =\n/*#__PURE__*/\ncreateSymbol('MULTICAST');\nvar SAGA_ACTION =\n/*#__PURE__*/\ncreateSymbol('SAGA_ACTION');\nvar SELF_CANCELLATION =\n/*#__PURE__*/\ncreateSymbol('SELF_CANCELLATION');\nvar TASK =\n/*#__PURE__*/\ncreateSymbol('TASK');\nvar TASK_CANCEL =\n/*#__PURE__*/\ncreateSymbol('TASK_CANCEL');\nvar TERMINATE =\n/*#__PURE__*/\ncreateSymbol('TERMINATE');\nvar SAGA_LOCATION =\n/*#__PURE__*/\ncreateSymbol('LOCATION');\n\nexport { CANCEL, CHANNEL_END_TYPE, IO, MATCH, MULTICAST, SAGA_ACTION, SAGA_LOCATION, SELF_CANCELLATION, TASK, TASK_CANCEL, TERMINATE };\n","var isArray = require('@stamp/is/array');\nvar isFunction = require('@stamp/is/function');\nvar isObject = require('@stamp/is/object');\nvar isStamp = require('@stamp/is/stamp');\nvar isComposable = require('@stamp/is/composable');\n\nvar assign = require('@stamp/core/assign');\nvar merge = require('@stamp/core/merge');\n\nvar slice = Array.prototype.slice;\n\n/**\n * Creates new factory instance.\n * @returns {Function} The new factory function.\n */\nfunction createFactory() {\n  return function Stamp(options) {\n    var descriptor = Stamp.compose || {};\n    // Next line was optimized for most JS VMs. Please, be careful here!\n    var obj = {__proto__: descriptor.methods}; // jshint ignore:line\n\n    merge(obj, descriptor.deepProperties);\n    assign(obj, descriptor.properties);\n    Object.defineProperties(obj, descriptor.propertyDescriptors || {});\n\n    if (!descriptor.initializers || descriptor.initializers.length === 0) return obj;\n\n    if (options === undefined) options = {};\n    var inits = descriptor.initializers;\n    var length = inits.length;\n    for (var i = 0; i < length; i += 1) {\n      var initializer = inits[i];\n      if (isFunction(initializer)) {\n        var returnedValue = initializer.call(obj, options,\n          {instance: obj, stamp: Stamp, args: slice.apply(arguments)});\n        obj = returnedValue === undefined ? obj : returnedValue;\n      }\n    }\n\n    return obj;\n  };\n}\n\n/**\n * Returns a new stamp given a descriptor and a compose function implementation.\n * @param {Descriptor} [descriptor={}] The information about the object the stamp will be creating.\n * @param {Compose} composeFunction The \"compose\" function implementation.\n * @returns {Stamp}\n */\nfunction createStamp(descriptor, composeFunction) {\n  var Stamp = createFactory();\n\n  if (descriptor.staticDeepProperties) {\n    merge(Stamp, descriptor.staticDeepProperties);\n  }\n  if (descriptor.staticProperties) {\n    assign(Stamp, descriptor.staticProperties);\n  }\n  if (descriptor.staticPropertyDescriptors) {\n    Object.defineProperties(Stamp, descriptor.staticPropertyDescriptors);\n  }\n\n  var composeImplementation = isFunction(Stamp.compose) ? Stamp.compose : composeFunction;\n  Stamp.compose = function _compose() {\n    'use strict'; // to make sure `this` is not pointing to `global` or `window`\n    return composeImplementation.apply(this, arguments);\n  };\n  assign(Stamp.compose, descriptor);\n\n  return Stamp;\n}\n\nfunction concatAssignFunctions(dstObject, srcArray, propName) {\n  if (!isArray(srcArray)) return;\n\n  var length = srcArray.length;\n  var dstArray = dstObject[propName] || [];\n  dstObject[propName] = dstArray;\n  for (var i = 0; i < length; i += 1) {\n    var fn = srcArray[i];\n    if (isFunction(fn) && dstArray.indexOf(fn) < 0) {\n      dstArray.push(fn);\n    }\n  }\n}\n\n\nfunction combineProperties(dstObject, srcObject, propName, action) {\n  if (!isObject(srcObject[propName])) return;\n  if (!isObject(dstObject[propName])) dstObject[propName] = {};\n  action(dstObject[propName], srcObject[propName]);\n}\n\nfunction deepMergeAssign(dstObject, srcObject, propName) {\n  combineProperties(dstObject, srcObject, propName, merge);\n}\nfunction mergeAssign(dstObject, srcObject, propName) {\n  combineProperties(dstObject, srcObject, propName, assign);\n}\n\n/**\n * Mutates the dstDescriptor by merging the srcComposable data into it.\n * @param {Descriptor} dstDescriptor The descriptor object to merge into.\n * @param {Composable} [srcComposable] The composable\n * (either descriptor or stamp) to merge data form.\n */\nfunction mergeComposable(dstDescriptor, srcComposable) {\n  var srcDescriptor = (srcComposable && srcComposable.compose) || srcComposable;\n\n  mergeAssign(dstDescriptor, srcDescriptor, 'methods');\n  mergeAssign(dstDescriptor, srcDescriptor, 'properties');\n  deepMergeAssign(dstDescriptor, srcDescriptor, 'deepProperties');\n  mergeAssign(dstDescriptor, srcDescriptor, 'propertyDescriptors');\n  mergeAssign(dstDescriptor, srcDescriptor, 'staticProperties');\n  deepMergeAssign(dstDescriptor, srcDescriptor, 'staticDeepProperties');\n  mergeAssign(dstDescriptor, srcDescriptor, 'staticPropertyDescriptors');\n  mergeAssign(dstDescriptor, srcDescriptor, 'configuration');\n  deepMergeAssign(dstDescriptor, srcDescriptor, 'deepConfiguration');\n  concatAssignFunctions(dstDescriptor, srcDescriptor.initializers, 'initializers');\n  concatAssignFunctions(dstDescriptor, srcDescriptor.composers, 'composers');\n}\n\n/**\n * Given the list of composables (stamp descriptors and stamps) returns\n * a new stamp (composable factory function).\n * @typedef {Function} Compose\n * @param {...(Composable)} [arguments] The list of composables.\n * @returns {Stamp} A new stamp (aka composable factory function)\n */\nmodule.exports = function compose() {\n  'use strict'; // to make sure `this` is not pointing to `global` or `window`\n  var descriptor = {};\n  var composables = [];\n  if (isComposable(this)) {\n    mergeComposable(descriptor, this);\n    composables.push(this);\n  }\n\n  for (var i = 0; i < arguments.length; i++) {\n    var arg = arguments[i];\n    if (isComposable(arg)) {\n      mergeComposable(descriptor, arg);\n      composables.push(arg);\n    }\n  }\n\n  var stamp = createStamp(descriptor, compose);\n\n  var composers = descriptor.composers;\n  if (isArray(composers) && composers.length > 0) {\n    for (var j = 0; j < composers.length; j += 1) {\n      var composer = composers[j];\n      var returnedValue = composer({stamp: stamp, composables: composables});\n      stamp = isStamp(returnedValue) ? returnedValue : stamp;\n    }\n  }\n\n  return stamp;\n};\n\n\n/**\n * The Stamp Descriptor\n * @typedef {Function|Object} Descriptor\n * @returns {Stamp} A new stamp based on this Stamp\n * @property {Object} [methods] Methods or other data used as object instances' prototype\n * @property {Array<Function>} [initializers] List of initializers called for each object instance\n * @property {Array<Function>} [composers] List of callbacks called each time a composition happens\n * @property {Object} [properties] Shallow assigned properties of object instances\n * @property {Object} [deepProperties] Deeply merged properties of object instances\n * @property {Object} [staticProperties] Shallow assigned properties of Stamps\n * @property {Object} [staticDeepProperties] Deeply merged properties of Stamps\n * @property {Object} [configuration] Shallow assigned properties of Stamp arbitrary metadata\n * @property {Object} [deepConfiguration] Deeply merged properties of Stamp arbitrary metadata\n * @property {Object} [propertyDescriptors] ES5 Property Descriptors applied to object instances\n * @property {Object} [staticPropertyDescriptors] ES5 Property Descriptors applied to Stamps\n */\n\n/**\n * The Stamp factory function\n * @typedef {Function} Stamp\n * @returns {*} Instantiated object\n * @property {Descriptor} compose - The Stamp descriptor and composition function\n */\n\n/**\n * A composable object - stamp or descriptor\n * @typedef {Stamp|Descriptor} Composable\n */\n\n","module.exports = Object.assign;\n","var isPlainObject = require('@stamp/is/plain-object');\nvar isObject = require('@stamp/is/object');\nvar isArray = require('@stamp/is/array');\n\n/**\n * The 'src' argument plays the command role.\n * The returned values is always of the same type as the 'src'.\n * @param dst The object to merge into\n * @param src The object to merge from\n * @returns {*}\n */\nfunction mergeOne(dst, src) {\n  if (src === undefined) return dst;\n\n  // According to specification arrays must be concatenated.\n  // Also, the '.concat' creates a new array instance. Overrides the 'dst'.\n  if (isArray(src)) return (isArray(dst) ? dst : []).concat(src);\n\n  // Now deal with non plain 'src' object. 'src' overrides 'dst'\n  // Note that functions are also assigned! We do not deep merge functions.\n  if (!isPlainObject(src)) return src;\n\n  // See if 'dst' is allowed to be mutated.\n  // If not - it's overridden with a new plain object.\n  var returnValue = isObject(dst) ? dst : {};\n\n  var keys = Object.keys(src);\n  for (var i = 0; i < keys.length; i += 1) {\n    var key = keys[i];\n\n    var srcValue = src[key];\n    // Do not merge properties with the 'undefined' value.\n    if (srcValue !== undefined) {\n      var dstValue = returnValue[key];\n      // Recursive calls to mergeOne() must allow only plain objects or arrays in dst\n      var newDst = isPlainObject(dstValue) || isArray(srcValue) ? dstValue : {};\n\n      // deep merge each property. Recursion!\n      returnValue[key] = mergeOne(newDst, srcValue);\n    }\n  }\n\n  return returnValue;\n}\n\nmodule.exports = function (dst) {\n  for (var i = 1; i < arguments.length; i++) {\n    dst = mergeOne(dst, arguments[i]);\n  }\n  return dst;\n};\n","module.exports = Array.isArray;\n","// More proper implementation would be\n// isDescriptor(obj) || isStamp(obj)\n// but there is no sense since stamp is function and function is object.\nmodule.exports = require('./object');\n","module.exports = function isFunction(arg) {\n  return typeof arg === 'function';\n};\n","module.exports = function isObject(arg) {\n  var type = typeof arg;\n  return Boolean(arg) && (type === 'object' || type === 'function');\n};\n","module.exports = function isPlainObject(value) {\n  return Boolean(value) && typeof value === 'object' &&\n    Object.getPrototypeOf(value) === Object.prototype;\n};\n","var isFunction = require('./function');\n\nmodule.exports = function isStamp(arg) {\n  return isFunction(arg) && isFunction(arg.compose);\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/array/from\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/map\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/assign\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/define-properties\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/entries\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/freeze\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/values\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/promise\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/reflect/set\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/set\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/symbol/iterator\"), __esModule: true };","\"use strict\";\n\nexports.__esModule = true;\n\nvar _assign = require(\"../core-js/object/assign\");\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _assign2.default || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};","/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */\n;(function(root) {\n\n\t// Detect free variables `exports`.\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`.\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code, and use\n\t// it as `root`.\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar InvalidCharacterError = function(message) {\n\t\tthis.message = message;\n\t};\n\tInvalidCharacterError.prototype = new Error;\n\tInvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\n\tvar error = function(message) {\n\t\t// Note: the error messages used throughout this file match those used by\n\t\t// the native `atob`/`btoa` implementation in Chromium.\n\t\tthrow new InvalidCharacterError(message);\n\t};\n\n\tvar TABLE = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\t// http://whatwg.org/html/common-microsyntaxes.html#space-character\n\tvar REGEX_SPACE_CHARACTERS = /[\\t\\n\\f\\r ]/g;\n\n\t// `decode` is designed to be fully compatible with `atob` as described in the\n\t// HTML Standard. http://whatwg.org/html/webappapis.html#dom-windowbase64-atob\n\t// The optimized base64-decoding algorithm used is based on @atk’s excellent\n\t// implementation. https://gist.github.com/atk/1020396\n\tvar decode = function(input) {\n\t\tinput = String(input)\n\t\t\t.replace(REGEX_SPACE_CHARACTERS, '');\n\t\tvar length = input.length;\n\t\tif (length % 4 == 0) {\n\t\t\tinput = input.replace(/==?$/, '');\n\t\t\tlength = input.length;\n\t\t}\n\t\tif (\n\t\t\tlength % 4 == 1 ||\n\t\t\t// http://whatwg.org/C#alphanumeric-ascii-characters\n\t\t\t/[^+a-zA-Z0-9/]/.test(input)\n\t\t) {\n\t\t\terror(\n\t\t\t\t'Invalid character: the string to be decoded is not correctly encoded.'\n\t\t\t);\n\t\t}\n\t\tvar bitCounter = 0;\n\t\tvar bitStorage;\n\t\tvar buffer;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\twhile (++position < length) {\n\t\t\tbuffer = TABLE.indexOf(input.charAt(position));\n\t\t\tbitStorage = bitCounter % 4 ? bitStorage * 64 + buffer : buffer;\n\t\t\t// Unless this is the first of a group of 4 characters…\n\t\t\tif (bitCounter++ % 4) {\n\t\t\t\t// …convert the first 8 bits to a single ASCII character.\n\t\t\t\toutput += String.fromCharCode(\n\t\t\t\t\t0xFF & bitStorage >> (-2 * bitCounter & 6)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t};\n\n\t// `encode` is designed to be fully compatible with `btoa` as described in the\n\t// HTML Standard: http://whatwg.org/html/webappapis.html#dom-windowbase64-btoa\n\tvar encode = function(input) {\n\t\tinput = String(input);\n\t\tif (/[^\\0-\\xFF]/.test(input)) {\n\t\t\t// Note: no need to special-case astral symbols here, as surrogates are\n\t\t\t// matched, and the input is supposed to only contain ASCII anyway.\n\t\t\terror(\n\t\t\t\t'The string to be encoded contains characters outside of the ' +\n\t\t\t\t'Latin1 range.'\n\t\t\t);\n\t\t}\n\t\tvar padding = input.length % 3;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\tvar a;\n\t\tvar b;\n\t\tvar c;\n\t\tvar d;\n\t\tvar buffer;\n\t\t// Make sure any padding is handled outside of the loop.\n\t\tvar length = input.length - padding;\n\n\t\twhile (++position < length) {\n\t\t\t// Read three bytes, i.e. 24 bits.\n\t\t\ta = input.charCodeAt(position) << 16;\n\t\t\tb = input.charCodeAt(++position) << 8;\n\t\t\tc = input.charCodeAt(++position);\n\t\t\tbuffer = a + b + c;\n\t\t\t// Turn the 24 bits into four chunks of 6 bits each, and append the\n\t\t\t// matching character for each of them to the output.\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 18 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 12 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 6 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer & 0x3F)\n\t\t\t);\n\t\t}\n\n\t\tif (padding == 2) {\n\t\t\ta = input.charCodeAt(position) << 8;\n\t\t\tb = input.charCodeAt(++position);\n\t\t\tbuffer = a + b;\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 10) +\n\t\t\t\tTABLE.charAt((buffer >> 4) & 0x3F) +\n\t\t\t\tTABLE.charAt((buffer << 2) & 0x3F) +\n\t\t\t\t'='\n\t\t\t);\n\t\t} else if (padding == 1) {\n\t\t\tbuffer = input.charCodeAt(position);\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 2) +\n\t\t\t\tTABLE.charAt((buffer << 4) & 0x3F) +\n\t\t\t\t'=='\n\t\t\t);\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tvar base64 = {\n\t\t'encode': encode,\n\t\t'decode': decode,\n\t\t'version': '0.1.0'\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn base64;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = base64;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (var key in base64) {\n\t\t\t\tbase64.hasOwnProperty(key) && (freeExports[key] = base64[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.base64 = base64;\n\t}\n\n}(this));\n","require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/_core').Array.from;\n","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.map');\nrequire('../modules/es7.map.to-json');\nrequire('../modules/es7.map.of');\nrequire('../modules/es7.map.from');\nmodule.exports = require('../modules/_core').Map;\n","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};\n","require('../../modules/es6.object.define-properties');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperties(T, D) {\n  return $Object.defineProperties(T, D);\n};\n","require('../../modules/es7.object.entries');\nmodule.exports = require('../../modules/_core').Object.entries;\n","require('../../modules/es6.object.freeze');\nmodule.exports = require('../../modules/_core').Object.freeze;\n","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/_core').Object.keys;\n","require('../../modules/es7.object.values');\nmodule.exports = require('../../modules/_core').Object.values;\n","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.promise');\nrequire('../modules/es7.promise.finally');\nrequire('../modules/es7.promise.try');\nmodule.exports = require('../modules/_core').Promise;\n","require('../../modules/es6.reflect.set');\nmodule.exports = require('../../modules/_core').Reflect.set;\n","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.set');\nrequire('../modules/es7.set.to-json');\nrequire('../modules/es7.set.of');\nrequire('../modules/es7.set.from');\nmodule.exports = require('../modules/_core').Set;\n","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;\n","require('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');\n","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n","module.exports = function () { /* empty */ };\n","module.exports = function (it, Constructor, name, forbiddenField) {\n  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n","var forOf = require('./_for-of');\n\nmodule.exports = function (iter, ITERATOR) {\n  var result = [];\n  forOf(iter, false, result.push, result, ITERATOR);\n  return result;\n};\n","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx = require('./_ctx');\nvar IObject = require('./_iobject');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar asc = require('./_array-species-create');\nmodule.exports = function (TYPE, $create) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  var create = $create || asc;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IObject(O);\n    var f = ctx(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var val, res;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      val = self[index];\n      res = f(val, index, O);\n      if (TYPE) {\n        if (IS_MAP) result[index] = res;   // map\n        else if (res) switch (TYPE) {\n          case 3: return true;             // some\n          case 5: return val;              // find\n          case 6: return index;            // findIndex\n          case 2: result.push(val);        // filter\n        } else if (IS_EVERY) return false; // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n","var isObject = require('./_is-object');\nvar isArray = require('./_is-array');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (original) {\n  var C;\n  if (isArray(original)) {\n    C = original.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function (original, length) {\n  return new (speciesConstructor(original))(length);\n};\n","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof');\nvar TAG = require('./_wks')('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","'use strict';\nvar dP = require('./_object-dp').f;\nvar create = require('./_object-create');\nvar redefineAll = require('./_redefine-all');\nvar ctx = require('./_ctx');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar $iterDefine = require('./_iter-define');\nvar step = require('./_iter-step');\nvar setSpecies = require('./_set-species');\nvar DESCRIPTORS = require('./_descriptors');\nvar fastKey = require('./_meta').fastKey;\nvar validate = require('./_validate-collection');\nvar SIZE = DESCRIPTORS ? '_s' : 'size';\n\nvar getEntry = function (that, key) {\n  // fast case\n  var index = fastKey(key);\n  var entry;\n  if (index !== 'F') return that._i[index];\n  // frozen object case\n  for (entry = that._f; entry; entry = entry.n) {\n    if (entry.k == key) return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function (wrapper, NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, NAME, '_i');\n      that._t = NAME;         // collection type\n      that._i = create(null); // index\n      that._f = undefined;    // first entry\n      that._l = undefined;    // last entry\n      that[SIZE] = 0;         // size\n      if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear() {\n        for (var that = validate(this, NAME), data = that._i, entry = that._f; entry; entry = entry.n) {\n          entry.r = true;\n          if (entry.p) entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function (key) {\n        var that = validate(this, NAME);\n        var entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.n;\n          var prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if (prev) prev.n = next;\n          if (next) next.p = prev;\n          if (that._f == entry) that._f = next;\n          if (that._l == entry) that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /* , that = undefined */) {\n        validate(this, NAME);\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n        var entry;\n        while (entry = entry ? entry.n : this._f) {\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while (entry && entry.r) entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key) {\n        return !!getEntry(validate(this, NAME), key);\n      }\n    });\n    if (DESCRIPTORS) dP(C.prototype, 'size', {\n      get: function () {\n        return validate(this, NAME)[SIZE];\n      }\n    });\n    return C;\n  },\n  def: function (that, key, value) {\n    var entry = getEntry(that, key);\n    var prev, index;\n    // change existing entry\n    if (entry) {\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if (!that._f) that._f = entry;\n      if (prev) prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if (index !== 'F') that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function (C, NAME, IS_MAP) {\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function (iterated, kind) {\n      this._t = validate(iterated, NAME); // target\n      this._k = kind;                     // kind\n      this._l = undefined;                // previous\n    }, function () {\n      var that = this;\n      var kind = that._k;\n      var entry = that._l;\n      // revert to the last existing entry\n      while (entry && entry.r) entry = entry.p;\n      // get next entry\n      if (!that._t || !(that._l = entry = entry ? entry.n : that._t._f)) {\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if (kind == 'keys') return step(0, entry.k);\n      if (kind == 'values') return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};\n","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar classof = require('./_classof');\nvar from = require('./_array-from-iterable');\nmodule.exports = function (NAME) {\n  return function toJSON() {\n    if (classof(this) != NAME) throw TypeError(NAME + \"#toJSON isn't generic\");\n    return from(this);\n  };\n};\n","'use strict';\nvar global = require('./_global');\nvar $export = require('./_export');\nvar meta = require('./_meta');\nvar fails = require('./_fails');\nvar hide = require('./_hide');\nvar redefineAll = require('./_redefine-all');\nvar forOf = require('./_for-of');\nvar anInstance = require('./_an-instance');\nvar isObject = require('./_is-object');\nvar setToStringTag = require('./_set-to-string-tag');\nvar dP = require('./_object-dp').f;\nvar each = require('./_array-methods')(0);\nvar DESCRIPTORS = require('./_descriptors');\n\nmodule.exports = function (NAME, wrapper, methods, common, IS_MAP, IS_WEAK) {\n  var Base = global[NAME];\n  var C = Base;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var proto = C && C.prototype;\n  var O = {};\n  if (!DESCRIPTORS || typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function () {\n    new C().entries().next();\n  }))) {\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n    meta.NEED = true;\n  } else {\n    C = wrapper(function (target, iterable) {\n      anInstance(target, C, NAME, '_c');\n      target._c = new Base();\n      if (iterable != undefined) forOf(iterable, IS_MAP, target[ADDER], target);\n    });\n    each('add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON'.split(','), function (KEY) {\n      var IS_ADDER = KEY == 'add' || KEY == 'set';\n      if (KEY in proto && !(IS_WEAK && KEY == 'clear')) hide(C.prototype, KEY, function (a, b) {\n        anInstance(this, C, KEY);\n        if (!IS_ADDER && IS_WEAK && !isObject(a)) return KEY == 'get' ? undefined : false;\n        var result = this._c[KEY](a === 0 ? 0 : a, b);\n        return IS_ADDER ? this : result;\n      });\n    });\n    IS_WEAK || dP(C.prototype, 'size', {\n      get: function () {\n        return this._c.size;\n      }\n    });\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F, O);\n\n  if (!IS_WEAK) common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};\n","var core = module.exports = { version: '2.6.11' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n","'use strict';\nvar $defineProperty = require('./_object-dp');\nvar createDesc = require('./_property-desc');\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n","var ctx = require('./_ctx');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar anObject = require('./_an-object');\nvar toLength = require('./_to-length');\nvar getIterFn = require('./core.get-iterator-method');\nvar BREAK = {};\nvar RETURN = {};\nvar exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {\n  var iterFn = ITERATOR ? function () { return iterable; } : getIterFn(iterable);\n  var f = ctx(fn, that, entries ? 2 : 1);\n  var index = 0;\n  var length, step, iterator, result;\n  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if (result === BREAK || result === RETURN) return result;\n  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {\n    result = call(iterator, f, step.value, entries);\n    if (result === BREAK || result === RETURN) return result;\n  }\n};\nexports.BREAK = BREAK;\nexports.RETURN = RETURN;\n","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n","// check on default Array iterator\nvar Iterators = require('./_iterators');\nvar ITERATOR = require('./_wks')('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n","var ITERATOR = require('./_wks')('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n","module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n","module.exports = {};\n","module.exports = true;\n","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n","var global = require('./_global');\nvar macrotask = require('./_task').set;\nvar Observer = global.MutationObserver || global.WebKitMutationObserver;\nvar process = global.process;\nvar Promise = global.Promise;\nvar isNode = require('./_cof')(process) == 'process';\n\nmodule.exports = function () {\n  var head, last, notify;\n\n  var flush = function () {\n    var parent, fn;\n    if (isNode && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (e) {\n        if (head) notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // Node.js\n  if (isNode) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver, except iOS Safari - https://github.com/zloirock/core-js/issues/339\n  } else if (Observer && !(global.navigator && global.navigator.standalone)) {\n    var toggle = true;\n    var node = document.createTextNode('');\n    new Observer(flush).observe(node, { characterData: true }); // eslint-disable-line no-new\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    var promise = Promise.resolve(undefined);\n    notify = function () {\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function (fn) {\n    var task = { fn: fn, next: undefined };\n    if (last) last.next = task;\n    if (!head) {\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n","'use strict';\n// 25.4.1.5 NewPromiseCapability(C)\nvar aFunction = require('./_a-function');\n\nfunction PromiseCapability(C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n}\n\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar DESCRIPTORS = require('./_descriptors');\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || isEnum.call(S, key)) T[key] = S[key];\n    }\n  } return T;\n} : $assign;\n","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject');\nvar gOPN = require('./_object-gopn').f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n","exports.f = Object.getOwnPropertySymbols;\n","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n","exports.f = {}.propertyIsEnumerable;\n","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\nvar core = require('./_core');\nvar fails = require('./_fails');\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n","var DESCRIPTORS = require('./_descriptors');\nvar getKeys = require('./_object-keys');\nvar toIObject = require('./_to-iobject');\nvar isEnum = require('./_object-pie').f;\nmodule.exports = function (isEntries) {\n  return function (it) {\n    var O = toIObject(it);\n    var keys = getKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || isEnum.call(O, key)) {\n        result.push(isEntries ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n","module.exports = function (exec) {\n  try {\n    return { e: false, v: exec() };\n  } catch (e) {\n    return { e: true, v: e };\n  }\n};\n","var anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar newPromiseCapability = require('./_new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var hide = require('./_hide');\nmodule.exports = function (target, src, safe) {\n  for (var key in src) {\n    if (safe && target[key]) target[key] = src[key];\n    else hide(target, key, src[key]);\n  } return target;\n};\n","module.exports = require('./_hide');\n","'use strict';\n// https://tc39.github.io/proposal-setmap-offrom/\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar ctx = require('./_ctx');\nvar forOf = require('./_for-of');\n\nmodule.exports = function (COLLECTION) {\n  $export($export.S, COLLECTION, { from: function from(source /* , mapFn, thisArg */) {\n    var mapFn = arguments[1];\n    var mapping, A, n, cb;\n    aFunction(this);\n    mapping = mapFn !== undefined;\n    if (mapping) aFunction(mapFn);\n    if (source == undefined) return new this();\n    A = [];\n    if (mapping) {\n      n = 0;\n      cb = ctx(mapFn, arguments[2], 2);\n      forOf(source, false, function (nextItem) {\n        A.push(cb(nextItem, n++));\n      });\n    } else {\n      forOf(source, false, A.push, A);\n    }\n    return new this(A);\n  } });\n};\n","'use strict';\n// https://tc39.github.io/proposal-setmap-offrom/\nvar $export = require('./_export');\n\nmodule.exports = function (COLLECTION) {\n  $export($export.S, COLLECTION, { of: function of() {\n    var length = arguments.length;\n    var A = new Array(length);\n    while (length--) A[length] = arguments[length];\n    return new this(A);\n  } });\n};\n","'use strict';\nvar global = require('./_global');\nvar core = require('./_core');\nvar dP = require('./_object-dp');\nvar DESCRIPTORS = require('./_descriptors');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (KEY) {\n  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {\n    configurable: true,\n    get: function () { return this; }\n  });\n};\n","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: '© 2019 Denis Pushkarev (zloirock.ru)'\n});\n","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject = require('./_an-object');\nvar aFunction = require('./_a-function');\nvar SPECIES = require('./_wks')('species');\nmodule.exports = function (O, D) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n","var toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n","var ctx = require('./_ctx');\nvar invoke = require('./_invoke');\nvar html = require('./_html');\nvar cel = require('./_dom-create');\nvar global = require('./_global');\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\nvar run = function () {\n  var id = +this;\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function (event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (require('./_cof')(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n","var global = require('./_global');\nvar navigator = global.navigator;\n\nmodule.exports = navigator && navigator.userAgent || '';\n","var isObject = require('./_is-object');\nmodule.exports = function (it, TYPE) {\n  if (!isObject(it) || it._t !== TYPE) throw TypeError('Incompatible receiver, ' + TYPE + ' required!');\n  return it;\n};\n","var global = require('./_global');\nvar core = require('./_core');\nvar LIBRARY = require('./_library');\nvar wksExt = require('./_wks-ext');\nvar defineProperty = require('./_object-dp').f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n","exports.f = require('./_wks');\n","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n","'use strict';\nvar ctx = require('./_ctx');\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar toLength = require('./_to-length');\nvar createProperty = require('./_create-property');\nvar getIterFn = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables');\nvar step = require('./_iter-step');\nvar Iterators = require('./_iterators');\nvar toIObject = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","'use strict';\nvar strong = require('./_collection-strong');\nvar validate = require('./_validate-collection');\nvar MAP = 'Map';\n\n// 23.1 Map Objects\nmodule.exports = require('./_collection')(MAP, function (get) {\n  return function Map() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.1.3.6 Map.prototype.get(key)\n  get: function get(key) {\n    var entry = strong.getEntry(validate(this, MAP), key);\n    return entry && entry.v;\n  },\n  // 23.1.3.9 Map.prototype.set(key, value)\n  set: function set(key, value) {\n    return strong.def(validate(this, MAP), key === 0 ? 0 : key, value);\n  }\n}, strong, true);\n","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { assign: require('./_object-assign') });\n","var $export = require('./_export');\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: require('./_object-create') });\n","var $export = require('./_export');\n// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperties: require('./_object-dps') });\n","// 19.1.2.5 Object.freeze(O)\nvar isObject = require('./_is-object');\nvar meta = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('freeze', function ($freeze) {\n  return function freeze(it) {\n    return $freeze && isObject(it) ? $freeze(meta(it)) : it;\n  };\n});\n","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object');\nvar $keys = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n","'use strict';\nvar LIBRARY = require('./_library');\nvar global = require('./_global');\nvar ctx = require('./_ctx');\nvar classof = require('./_classof');\nvar $export = require('./_export');\nvar isObject = require('./_is-object');\nvar aFunction = require('./_a-function');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar speciesConstructor = require('./_species-constructor');\nvar task = require('./_task').set;\nvar microtask = require('./_microtask')();\nvar newPromiseCapabilityModule = require('./_new-promise-capability');\nvar perform = require('./_perform');\nvar userAgent = require('./_user-agent');\nvar promiseResolve = require('./_promise-resolve');\nvar PROMISE = 'Promise';\nvar TypeError = global.TypeError;\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8 || '';\nvar $Promise = global[PROMISE];\nvar isNode = classof(process) == 'process';\nvar empty = function () { /* empty */ };\nvar Internal, newGenericPromiseCapability, OwnPromiseCapability, Wrapper;\nvar newPromiseCapability = newGenericPromiseCapability = newPromiseCapabilityModule.f;\n\nvar USE_NATIVE = !!function () {\n  try {\n    // correct subclassing with @@species support\n    var promise = $Promise.resolve(1);\n    var FakePromise = (promise.constructor = {})[require('./_wks')('species')] = function (exec) {\n      exec(empty, empty);\n    };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function')\n      && promise.then(empty) instanceof FakePromise\n      // v8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n      // we can't detect it synchronously, so just check versions\n      && v8.indexOf('6.6') !== 0\n      && userAgent.indexOf('Chrome/66') === -1;\n  } catch (e) { /* empty */ }\n}();\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar notify = function (promise, isReject) {\n  if (promise._n) return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function () {\n    var value = promise._v;\n    var ok = promise._s == 1;\n    var i = 0;\n    var run = function (reaction) {\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (promise._h == 2) onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if (handler === true) result = value;\n          else {\n            if (domain) domain.enter();\n            result = handler(value); // may throw\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (e) {\n        if (domain && !exited) domain.exit();\n        reject(e);\n      }\n    };\n    while (chain.length > i) run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if (isReject && !promise._h) onUnhandled(promise);\n  });\n};\nvar onUnhandled = function (promise) {\n  task.call(global, function () {\n    var value = promise._v;\n    var unhandled = isUnhandled(promise);\n    var result, handler, console;\n    if (unhandled) {\n      result = perform(function () {\n        if (isNode) {\n          process.emit('unhandledRejection', value, promise);\n        } else if (handler = global.onunhandledrejection) {\n          handler({ promise: promise, reason: value });\n        } else if ((console = global.console) && console.error) {\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if (unhandled && result.e) throw result.v;\n  });\n};\nvar isUnhandled = function (promise) {\n  return promise._h !== 1 && (promise._a || promise._c).length === 0;\n};\nvar onHandleUnhandled = function (promise) {\n  task.call(global, function () {\n    var handler;\n    if (isNode) {\n      process.emit('rejectionHandled', promise);\n    } else if (handler = global.onrejectionhandled) {\n      handler({ promise: promise, reason: promise._v });\n    }\n  });\n};\nvar $reject = function (value) {\n  var promise = this;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if (!promise._a) promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function (value) {\n  var promise = this;\n  var then;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if (promise === value) throw TypeError(\"Promise can't be resolved itself\");\n    if (then = isThenable(value)) {\n      microtask(function () {\n        var wrapper = { _w: promise, _d: false }; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch (e) {\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch (e) {\n    $reject.call({ _w: promise, _d: false }, e); // wrap\n  }\n};\n\n// constructor polyfill\nif (!USE_NATIVE) {\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor) {\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch (err) {\n      $reject.call(this, err);\n    }\n  };\n  // eslint-disable-next-line no-unused-vars\n  Internal = function Promise(executor) {\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = require('./_redefine-all')($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected) {\n      var reaction = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if (this._a) this._a.push(reaction);\n      if (this._s) notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject = ctx($reject, promise, 1);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === $Promise || C === Wrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Promise: $Promise });\nrequire('./_set-to-string-tag')($Promise, PROMISE);\nrequire('./_set-species')(PROMISE);\nWrapper = require('./_core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    var $$reject = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x) {\n    return promiseResolve(LIBRARY && this === Wrapper ? $Promise : this, x);\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./_iter-detect')(function (iter) {\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var values = [];\n      var index = 0;\n      var remaining = 1;\n      forOf(iterable, false, function (promise) {\n        var $index = index++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      forOf(iterable, false, function (promise) {\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  }\n});\n","// 26.1.13 Reflect.set(target, propertyKey, V [, receiver])\nvar dP = require('./_object-dp');\nvar gOPD = require('./_object-gopd');\nvar getPrototypeOf = require('./_object-gpo');\nvar has = require('./_has');\nvar $export = require('./_export');\nvar createDesc = require('./_property-desc');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\n\nfunction set(target, propertyKey, V /* , receiver */) {\n  var receiver = arguments.length < 4 ? target : arguments[3];\n  var ownDesc = gOPD.f(anObject(target), propertyKey);\n  var existingDescriptor, proto;\n  if (!ownDesc) {\n    if (isObject(proto = getPrototypeOf(target))) {\n      return set(proto, propertyKey, V, receiver);\n    }\n    ownDesc = createDesc(0);\n  }\n  if (has(ownDesc, 'value')) {\n    if (ownDesc.writable === false || !isObject(receiver)) return false;\n    if (existingDescriptor = gOPD.f(receiver, propertyKey)) {\n      if (existingDescriptor.get || existingDescriptor.set || existingDescriptor.writable === false) return false;\n      existingDescriptor.value = V;\n      dP.f(receiver, propertyKey, existingDescriptor);\n    } else dP.f(receiver, propertyKey, createDesc(0, V));\n    return true;\n  }\n  return ownDesc.set === undefined ? false : (ownDesc.set.call(receiver, V), true);\n}\n\n$export($export.S, 'Reflect', { set: set });\n","'use strict';\nvar strong = require('./_collection-strong');\nvar validate = require('./_validate-collection');\nvar SET = 'Set';\n\n// 23.2 Set Objects\nmodule.exports = require('./_collection')(SET, function (get) {\n  return function Set() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.2.3.1 Set.prototype.add(value)\n  add: function add(value) {\n    return strong.def(validate(this, SET), value = value === 0 ? 0 : value, value);\n  }\n}, strong);\n","'use strict';\nvar $at = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n","'use strict';\n// ECMAScript 6 symbols shim\nvar global = require('./_global');\nvar has = require('./_has');\nvar DESCRIPTORS = require('./_descriptors');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar META = require('./_meta').KEY;\nvar $fails = require('./_fails');\nvar shared = require('./_shared');\nvar setToStringTag = require('./_set-to-string-tag');\nvar uid = require('./_uid');\nvar wks = require('./_wks');\nvar wksExt = require('./_wks-ext');\nvar wksDefine = require('./_wks-define');\nvar enumKeys = require('./_enum-keys');\nvar isArray = require('./_is-array');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar toObject = require('./_to-object');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar createDesc = require('./_property-desc');\nvar _create = require('./_object-create');\nvar gOPNExt = require('./_object-gopn-ext');\nvar $GOPD = require('./_object-gopd');\nvar $GOPS = require('./_object-gops');\nvar $DP = require('./_object-dp');\nvar $keys = require('./_object-keys');\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function' && !!$GOPS.f;\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f = $propertyIsEnumerable;\n  $GOPS.f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !require('./_library')) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives\n// https://bugs.chromium.org/p/v8/issues/detail?id=3443\nvar FAILS_ON_PRIMITIVES = $fails(function () { $GOPS.f(1); });\n\n$export($export.S + $export.F * FAILS_ON_PRIMITIVES, 'Object', {\n  getOwnPropertySymbols: function getOwnPropertySymbols(it) {\n    return $GOPS.f(toObject(it));\n  }\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-map.from\nrequire('./_set-collection-from')('Map');\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-map.of\nrequire('./_set-collection-of')('Map');\n","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export = require('./_export');\n\n$export($export.P + $export.R, 'Map', { toJSON: require('./_collection-to-json')('Map') });\n","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $entries = require('./_object-to-array')(true);\n\n$export($export.S, 'Object', {\n  entries: function entries(it) {\n    return $entries(it);\n  }\n});\n","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $values = require('./_object-to-array')(false);\n\n$export($export.S, 'Object', {\n  values: function values(it) {\n    return $values(it);\n  }\n});\n","// https://github.com/tc39/proposal-promise-finally\n'use strict';\nvar $export = require('./_export');\nvar core = require('./_core');\nvar global = require('./_global');\nvar speciesConstructor = require('./_species-constructor');\nvar promiseResolve = require('./_promise-resolve');\n\n$export($export.P + $export.R, 'Promise', { 'finally': function (onFinally) {\n  var C = speciesConstructor(this, core.Promise || global.Promise);\n  var isFunction = typeof onFinally == 'function';\n  return this.then(\n    isFunction ? function (x) {\n      return promiseResolve(C, onFinally()).then(function () { return x; });\n    } : onFinally,\n    isFunction ? function (e) {\n      return promiseResolve(C, onFinally()).then(function () { throw e; });\n    } : onFinally\n  );\n} });\n","'use strict';\n// https://github.com/tc39/proposal-promise-try\nvar $export = require('./_export');\nvar newPromiseCapability = require('./_new-promise-capability');\nvar perform = require('./_perform');\n\n$export($export.S, 'Promise', { 'try': function (callbackfn) {\n  var promiseCapability = newPromiseCapability.f(this);\n  var result = perform(callbackfn);\n  (result.e ? promiseCapability.reject : promiseCapability.resolve)(result.v);\n  return promiseCapability.promise;\n} });\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-set.from\nrequire('./_set-collection-from')('Set');\n","// https://tc39.github.io/proposal-setmap-offrom/#sec-set.of\nrequire('./_set-collection-of')('Set');\n","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export = require('./_export');\n\n$export($export.P + $export.R, 'Set', { toJSON: require('./_collection-to-json')('Set') });\n","require('./_wks-define')('asyncIterator');\n","require('./_wks-define')('observable');\n","require('./es6.array.iterator');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar TO_STRING_TAG = require('./_wks')('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n","'use strict';\nvar token = '%[a-f0-9]{2}';\nvar singleMatcher = new RegExp(token, 'gi');\nvar multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n\ttry {\n\t\t// Try to decode the entire string first\n\t\treturn decodeURIComponent(components.join(''));\n\t} catch (err) {\n\t\t// Do nothing\n\t}\n\n\tif (components.length === 1) {\n\t\treturn components;\n\t}\n\n\tsplit = split || 1;\n\n\t// Split the array in 2 parts\n\tvar left = components.slice(0, split);\n\tvar right = components.slice(split);\n\n\treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n\ttry {\n\t\treturn decodeURIComponent(input);\n\t} catch (err) {\n\t\tvar tokens = input.match(singleMatcher);\n\n\t\tfor (var i = 1; i < tokens.length; i++) {\n\t\t\tinput = decodeComponents(tokens, i).join('');\n\n\t\t\ttokens = input.match(singleMatcher);\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nfunction customDecodeURIComponent(input) {\n\t// Keep track of all the replacements and prefill the map with the `BOM`\n\tvar replaceMap = {\n\t\t'%FE%FF': '\\uFFFD\\uFFFD',\n\t\t'%FF%FE': '\\uFFFD\\uFFFD'\n\t};\n\n\tvar match = multiMatcher.exec(input);\n\twhile (match) {\n\t\ttry {\n\t\t\t// Decode as big chunks as possible\n\t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n\t\t} catch (err) {\n\t\t\tvar result = decode(match[0]);\n\n\t\t\tif (result !== match[0]) {\n\t\t\t\treplaceMap[match[0]] = result;\n\t\t\t}\n\t\t}\n\n\t\tmatch = multiMatcher.exec(input);\n\t}\n\n\t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\treplaceMap['%C2'] = '\\uFFFD';\n\n\tvar entries = Object.keys(replaceMap);\n\n\tfor (var i = 0; i < entries.length; i++) {\n\t\t// Replace all decoded components\n\t\tvar key = entries[i];\n\t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n\t}\n\n\treturn input;\n}\n\nmodule.exports = function (encodedURI) {\n\tif (typeof encodedURI !== 'string') {\n\t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n\t}\n\n\ttry {\n\t\tencodedURI = encodedURI.replace(/\\+/g, ' ');\n\n\t\t// Try the built in decoder first\n\t\treturn decodeURIComponent(encodedURI);\n\t} catch (err) {\n\t\t// Fallback to a more advanced decoder\n\t\treturn customDecodeURIComponent(encodedURI);\n\t}\n};\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar invariant = function(condition, format, a, b, c, d, e, f) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  }\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error(\n        'Minified exception occurred; use the non-minified dev environment ' +\n        'for the full error message and additional helpful warnings.'\n      );\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(\n        format.replace(/%s/g, function() { return args[argIndex++]; })\n      );\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n};\n\nmodule.exports = invariant;\n","module.exports = curry;\n\n/*\n  function add(a, b, c) {\n    return a + b + c;\n  }\n  curry(add)(1)(2)(3); // 6\n  curry(add)(1)(2)(2); // 5\n  curry(add)(2)(4, 3); // 9\n\n  function add(...args) {\n    return args.reduce((sum, n) => sum + n, 0)\n  }\n  var curryAdd4 = curry(add, 4)\n  curryAdd4(1)(2, 3)(4); // 10\n\n  function converter(ratio, input) {\n    return (input*ratio).toFixed(1);\n  }\n  const curriedConverter = curry(converter)\n  const milesToKm = curriedConverter(1.62);\n  milesToKm(35); // 56.7\n  milesToKm(10); // 16.2\n*/\n\nfunction curry(fn, arity) {\n  return function curried() {\n    if (arity == null) {\n      arity = fn.length;\n    }\n    var args = [].slice.call(arguments);\n    if (args.length >= arity) {\n      return fn.apply(this, args);\n    } else {\n      return function() {\n        return curried.apply(this, args.concat([].slice.call(arguments)));\n      };\n    }\n  };\n}\n","/**\n * The code was extracted from:\n * https://github.com/davidchambers/Base64.js\n */\n\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\nfunction InvalidCharacterError(message) {\n  this.message = message;\n}\n\nInvalidCharacterError.prototype = new Error();\nInvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\nfunction polyfill (input) {\n  var str = String(input).replace(/=+$/, '');\n  if (str.length % 4 == 1) {\n    throw new InvalidCharacterError(\"'atob' failed: The string to be decoded is not correctly encoded.\");\n  }\n  for (\n    // initialize result and counters\n    var bc = 0, bs, buffer, idx = 0, output = '';\n    // get next character\n    buffer = str.charAt(idx++);\n    // character found in table? initialize bit storage and add its ascii value;\n    ~buffer && (bs = bc % 4 ? bs * 64 + buffer : buffer,\n      // and if not first of each 4 characters,\n      // convert the first 8 bits to one ascii character\n      bc++ % 4) ? output += String.fromCharCode(255 & bs >> (-2 * bc & 6)) : 0\n  ) {\n    // try to find character in table (0-63, not found => -1)\n    buffer = chars.indexOf(buffer);\n  }\n  return output;\n}\n\n\nmodule.exports = typeof window !== 'undefined' && window.atob && window.atob.bind(window) || polyfill;\n","var atob = require('./atob');\n\nfunction b64DecodeUnicode(str) {\n  return decodeURIComponent(atob(str).replace(/(.)/g, function (m, p) {\n    var code = p.charCodeAt(0).toString(16).toUpperCase();\n    if (code.length < 2) {\n      code = '0' + code;\n    }\n    return '%' + code;\n  }));\n}\n\nmodule.exports = function(str) {\n  var output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n  switch (output.length % 4) {\n    case 0:\n      break;\n    case 2:\n      output += \"==\";\n      break;\n    case 3:\n      output += \"=\";\n      break;\n    default:\n      throw \"Illegal base64url string!\";\n  }\n\n  try{\n    return b64DecodeUnicode(output);\n  } catch (err) {\n    return atob(output);\n  }\n};\n","'use strict';\n\nvar base64_url_decode = require('./base64_url_decode');\n\nfunction InvalidTokenError(message) {\n  this.message = message;\n}\n\nInvalidTokenError.prototype = new Error();\nInvalidTokenError.prototype.name = 'InvalidTokenError';\n\nmodule.exports = function (token,options) {\n  if (typeof token !== 'string') {\n    throw new InvalidTokenError('Invalid token specified');\n  }\n\n  options = options || {};\n  var pos = options.header === true ? 0 : 1;\n  try {\n    return JSON.parse(base64_url_decode(token.split('.')[pos]));\n  } catch (e) {\n    throw new InvalidTokenError('Invalid token specified: ' + e.message);\n  }\n};\n\nmodule.exports.InvalidTokenError = InvalidTokenError;\n","var _ = require('./lodash.min').runInContext();\nmodule.exports = require('./fp/_baseConvert')(_, _);\n","var mapping = require('./_mapping'),\n    fallbackHolder = require('./placeholder');\n\n/** Built-in value reference. */\nvar push = Array.prototype.push;\n\n/**\n * Creates a function, with an arity of `n`, that invokes `func` with the\n * arguments it receives.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} n The arity of the new function.\n * @returns {Function} Returns the new function.\n */\nfunction baseArity(func, n) {\n  return n == 2\n    ? function(a, b) { return func.apply(undefined, arguments); }\n    : function(a) { return func.apply(undefined, arguments); };\n}\n\n/**\n * Creates a function that invokes `func`, with up to `n` arguments, ignoring\n * any additional arguments.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @param {number} n The arity cap.\n * @returns {Function} Returns the new function.\n */\nfunction baseAry(func, n) {\n  return n == 2\n    ? function(a, b) { return func(a, b); }\n    : function(a) { return func(a); };\n}\n\n/**\n * Creates a clone of `array`.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the cloned array.\n */\nfunction cloneArray(array) {\n  var length = array ? array.length : 0,\n      result = Array(length);\n\n  while (length--) {\n    result[length] = array[length];\n  }\n  return result;\n}\n\n/**\n * Creates a function that clones a given object using the assignment `func`.\n *\n * @private\n * @param {Function} func The assignment function.\n * @returns {Function} Returns the new cloner function.\n */\nfunction createCloner(func) {\n  return function(object) {\n    return func({}, object);\n  };\n}\n\n/**\n * A specialized version of `_.spread` which flattens the spread array into\n * the arguments of the invoked `func`.\n *\n * @private\n * @param {Function} func The function to spread arguments over.\n * @param {number} start The start position of the spread.\n * @returns {Function} Returns the new function.\n */\nfunction flatSpread(func, start) {\n  return function() {\n    var length = arguments.length,\n        lastIndex = length - 1,\n        args = Array(length);\n\n    while (length--) {\n      args[length] = arguments[length];\n    }\n    var array = args[start],\n        otherArgs = args.slice(0, start);\n\n    if (array) {\n      push.apply(otherArgs, array);\n    }\n    if (start != lastIndex) {\n      push.apply(otherArgs, args.slice(start + 1));\n    }\n    return func.apply(this, otherArgs);\n  };\n}\n\n/**\n * Creates a function that wraps `func` and uses `cloner` to clone the first\n * argument it receives.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} cloner The function to clone arguments.\n * @returns {Function} Returns the new immutable function.\n */\nfunction wrapImmutable(func, cloner) {\n  return function() {\n    var length = arguments.length;\n    if (!length) {\n      return;\n    }\n    var args = Array(length);\n    while (length--) {\n      args[length] = arguments[length];\n    }\n    var result = args[0] = cloner.apply(undefined, args);\n    func.apply(undefined, args);\n    return result;\n  };\n}\n\n/**\n * The base implementation of `convert` which accepts a `util` object of methods\n * required to perform conversions.\n *\n * @param {Object} util The util object.\n * @param {string} name The name of the function to convert.\n * @param {Function} func The function to convert.\n * @param {Object} [options] The options object.\n * @param {boolean} [options.cap=true] Specify capping iteratee arguments.\n * @param {boolean} [options.curry=true] Specify currying.\n * @param {boolean} [options.fixed=true] Specify fixed arity.\n * @param {boolean} [options.immutable=true] Specify immutable operations.\n * @param {boolean} [options.rearg=true] Specify rearranging arguments.\n * @returns {Function|Object} Returns the converted function or object.\n */\nfunction baseConvert(util, name, func, options) {\n  var isLib = typeof name == 'function',\n      isObj = name === Object(name);\n\n  if (isObj) {\n    options = func;\n    func = name;\n    name = undefined;\n  }\n  if (func == null) {\n    throw new TypeError;\n  }\n  options || (options = {});\n\n  var config = {\n    'cap': 'cap' in options ? options.cap : true,\n    'curry': 'curry' in options ? options.curry : true,\n    'fixed': 'fixed' in options ? options.fixed : true,\n    'immutable': 'immutable' in options ? options.immutable : true,\n    'rearg': 'rearg' in options ? options.rearg : true\n  };\n\n  var defaultHolder = isLib ? func : fallbackHolder,\n      forceCurry = ('curry' in options) && options.curry,\n      forceFixed = ('fixed' in options) && options.fixed,\n      forceRearg = ('rearg' in options) && options.rearg,\n      pristine = isLib ? func.runInContext() : undefined;\n\n  var helpers = isLib ? func : {\n    'ary': util.ary,\n    'assign': util.assign,\n    'clone': util.clone,\n    'curry': util.curry,\n    'forEach': util.forEach,\n    'isArray': util.isArray,\n    'isError': util.isError,\n    'isFunction': util.isFunction,\n    'isWeakMap': util.isWeakMap,\n    'iteratee': util.iteratee,\n    'keys': util.keys,\n    'rearg': util.rearg,\n    'toInteger': util.toInteger,\n    'toPath': util.toPath\n  };\n\n  var ary = helpers.ary,\n      assign = helpers.assign,\n      clone = helpers.clone,\n      curry = helpers.curry,\n      each = helpers.forEach,\n      isArray = helpers.isArray,\n      isError = helpers.isError,\n      isFunction = helpers.isFunction,\n      isWeakMap = helpers.isWeakMap,\n      keys = helpers.keys,\n      rearg = helpers.rearg,\n      toInteger = helpers.toInteger,\n      toPath = helpers.toPath;\n\n  var aryMethodKeys = keys(mapping.aryMethod);\n\n  var wrappers = {\n    'castArray': function(castArray) {\n      return function() {\n        var value = arguments[0];\n        return isArray(value)\n          ? castArray(cloneArray(value))\n          : castArray.apply(undefined, arguments);\n      };\n    },\n    'iteratee': function(iteratee) {\n      return function() {\n        var func = arguments[0],\n            arity = arguments[1],\n            result = iteratee(func, arity),\n            length = result.length;\n\n        if (config.cap && typeof arity == 'number') {\n          arity = arity > 2 ? (arity - 2) : 1;\n          return (length && length <= arity) ? result : baseAry(result, arity);\n        }\n        return result;\n      };\n    },\n    'mixin': function(mixin) {\n      return function(source) {\n        var func = this;\n        if (!isFunction(func)) {\n          return mixin(func, Object(source));\n        }\n        var pairs = [];\n        each(keys(source), function(key) {\n          if (isFunction(source[key])) {\n            pairs.push([key, func.prototype[key]]);\n          }\n        });\n\n        mixin(func, Object(source));\n\n        each(pairs, function(pair) {\n          var value = pair[1];\n          if (isFunction(value)) {\n            func.prototype[pair[0]] = value;\n          } else {\n            delete func.prototype[pair[0]];\n          }\n        });\n        return func;\n      };\n    },\n    'nthArg': function(nthArg) {\n      return function(n) {\n        var arity = n < 0 ? 1 : (toInteger(n) + 1);\n        return curry(nthArg(n), arity);\n      };\n    },\n    'rearg': function(rearg) {\n      return function(func, indexes) {\n        var arity = indexes ? indexes.length : 0;\n        return curry(rearg(func, indexes), arity);\n      };\n    },\n    'runInContext': function(runInContext) {\n      return function(context) {\n        return baseConvert(util, runInContext(context), options);\n      };\n    }\n  };\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Casts `func` to a function with an arity capped iteratee if needed.\n   *\n   * @private\n   * @param {string} name The name of the function to inspect.\n   * @param {Function} func The function to inspect.\n   * @returns {Function} Returns the cast function.\n   */\n  function castCap(name, func) {\n    if (config.cap) {\n      var indexes = mapping.iterateeRearg[name];\n      if (indexes) {\n        return iterateeRearg(func, indexes);\n      }\n      var n = !isLib && mapping.iterateeAry[name];\n      if (n) {\n        return iterateeAry(func, n);\n      }\n    }\n    return func;\n  }\n\n  /**\n   * Casts `func` to a curried function if needed.\n   *\n   * @private\n   * @param {string} name The name of the function to inspect.\n   * @param {Function} func The function to inspect.\n   * @param {number} n The arity of `func`.\n   * @returns {Function} Returns the cast function.\n   */\n  function castCurry(name, func, n) {\n    return (forceCurry || (config.curry && n > 1))\n      ? curry(func, n)\n      : func;\n  }\n\n  /**\n   * Casts `func` to a fixed arity function if needed.\n   *\n   * @private\n   * @param {string} name The name of the function to inspect.\n   * @param {Function} func The function to inspect.\n   * @param {number} n The arity cap.\n   * @returns {Function} Returns the cast function.\n   */\n  function castFixed(name, func, n) {\n    if (config.fixed && (forceFixed || !mapping.skipFixed[name])) {\n      var data = mapping.methodSpread[name],\n          start = data && data.start;\n\n      return start  === undefined ? ary(func, n) : flatSpread(func, start);\n    }\n    return func;\n  }\n\n  /**\n   * Casts `func` to an rearged function if needed.\n   *\n   * @private\n   * @param {string} name The name of the function to inspect.\n   * @param {Function} func The function to inspect.\n   * @param {number} n The arity of `func`.\n   * @returns {Function} Returns the cast function.\n   */\n  function castRearg(name, func, n) {\n    return (config.rearg && n > 1 && (forceRearg || !mapping.skipRearg[name]))\n      ? rearg(func, mapping.methodRearg[name] || mapping.aryRearg[n])\n      : func;\n  }\n\n  /**\n   * Creates a clone of `object` by `path`.\n   *\n   * @private\n   * @param {Object} object The object to clone.\n   * @param {Array|string} path The path to clone by.\n   * @returns {Object} Returns the cloned object.\n   */\n  function cloneByPath(object, path) {\n    path = toPath(path);\n\n    var index = -1,\n        length = path.length,\n        lastIndex = length - 1,\n        result = clone(Object(object)),\n        nested = result;\n\n    while (nested != null && ++index < length) {\n      var key = path[index],\n          value = nested[key];\n\n      if (value != null &&\n          !(isFunction(value) || isError(value) || isWeakMap(value))) {\n        nested[key] = clone(index == lastIndex ? value : Object(value));\n      }\n      nested = nested[key];\n    }\n    return result;\n  }\n\n  /**\n   * Converts `lodash` to an immutable auto-curried iteratee-first data-last\n   * version with conversion `options` applied.\n   *\n   * @param {Object} [options] The options object. See `baseConvert` for more details.\n   * @returns {Function} Returns the converted `lodash`.\n   */\n  function convertLib(options) {\n    return _.runInContext.convert(options)(undefined);\n  }\n\n  /**\n   * Create a converter function for `func` of `name`.\n   *\n   * @param {string} name The name of the function to convert.\n   * @param {Function} func The function to convert.\n   * @returns {Function} Returns the new converter function.\n   */\n  function createConverter(name, func) {\n    var realName = mapping.aliasToReal[name] || name,\n        methodName = mapping.remap[realName] || realName,\n        oldOptions = options;\n\n    return function(options) {\n      var newUtil = isLib ? pristine : helpers,\n          newFunc = isLib ? pristine[methodName] : func,\n          newOptions = assign(assign({}, oldOptions), options);\n\n      return baseConvert(newUtil, realName, newFunc, newOptions);\n    };\n  }\n\n  /**\n   * Creates a function that wraps `func` to invoke its iteratee, with up to `n`\n   * arguments, ignoring any additional arguments.\n   *\n   * @private\n   * @param {Function} func The function to cap iteratee arguments for.\n   * @param {number} n The arity cap.\n   * @returns {Function} Returns the new function.\n   */\n  function iterateeAry(func, n) {\n    return overArg(func, function(func) {\n      return typeof func == 'function' ? baseAry(func, n) : func;\n    });\n  }\n\n  /**\n   * Creates a function that wraps `func` to invoke its iteratee with arguments\n   * arranged according to the specified `indexes` where the argument value at\n   * the first index is provided as the first argument, the argument value at\n   * the second index is provided as the second argument, and so on.\n   *\n   * @private\n   * @param {Function} func The function to rearrange iteratee arguments for.\n   * @param {number[]} indexes The arranged argument indexes.\n   * @returns {Function} Returns the new function.\n   */\n  function iterateeRearg(func, indexes) {\n    return overArg(func, function(func) {\n      var n = indexes.length;\n      return baseArity(rearg(baseAry(func, n), indexes), n);\n    });\n  }\n\n  /**\n   * Creates a function that invokes `func` with its first argument transformed.\n   *\n   * @private\n   * @param {Function} func The function to wrap.\n   * @param {Function} transform The argument transform.\n   * @returns {Function} Returns the new function.\n   */\n  function overArg(func, transform) {\n    return function() {\n      var length = arguments.length;\n      if (!length) {\n        return func();\n      }\n      var args = Array(length);\n      while (length--) {\n        args[length] = arguments[length];\n      }\n      var index = config.rearg ? 0 : (length - 1);\n      args[index] = transform(args[index]);\n      return func.apply(undefined, args);\n    };\n  }\n\n  /**\n   * Creates a function that wraps `func` and applys the conversions\n   * rules by `name`.\n   *\n   * @private\n   * @param {string} name The name of the function to wrap.\n   * @param {Function} func The function to wrap.\n   * @returns {Function} Returns the converted function.\n   */\n  function wrap(name, func, placeholder) {\n    var result,\n        realName = mapping.aliasToReal[name] || name,\n        wrapped = func,\n        wrapper = wrappers[realName];\n\n    if (wrapper) {\n      wrapped = wrapper(func);\n    }\n    else if (config.immutable) {\n      if (mapping.mutate.array[realName]) {\n        wrapped = wrapImmutable(func, cloneArray);\n      }\n      else if (mapping.mutate.object[realName]) {\n        wrapped = wrapImmutable(func, createCloner(func));\n      }\n      else if (mapping.mutate.set[realName]) {\n        wrapped = wrapImmutable(func, cloneByPath);\n      }\n    }\n    each(aryMethodKeys, function(aryKey) {\n      each(mapping.aryMethod[aryKey], function(otherName) {\n        if (realName == otherName) {\n          var data = mapping.methodSpread[realName],\n              afterRearg = data && data.afterRearg;\n\n          result = afterRearg\n            ? castFixed(realName, castRearg(realName, wrapped, aryKey), aryKey)\n            : castRearg(realName, castFixed(realName, wrapped, aryKey), aryKey);\n\n          result = castCap(realName, result);\n          result = castCurry(realName, result, aryKey);\n          return false;\n        }\n      });\n      return !result;\n    });\n\n    result || (result = wrapped);\n    if (result == func) {\n      result = forceCurry ? curry(result, 1) : function() {\n        return func.apply(this, arguments);\n      };\n    }\n    result.convert = createConverter(realName, func);\n    result.placeholder = func.placeholder = placeholder;\n\n    return result;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  if (!isObj) {\n    return wrap(name, func, defaultHolder);\n  }\n  var _ = func;\n\n  // Convert methods by ary cap.\n  var pairs = [];\n  each(aryMethodKeys, function(aryKey) {\n    each(mapping.aryMethod[aryKey], function(key) {\n      var func = _[mapping.remap[key] || key];\n      if (func) {\n        pairs.push([key, wrap(key, func, _)]);\n      }\n    });\n  });\n\n  // Convert remaining methods.\n  each(keys(_), function(key) {\n    var func = _[key];\n    if (typeof func == 'function') {\n      var length = pairs.length;\n      while (length--) {\n        if (pairs[length][0] == key) {\n          return;\n        }\n      }\n      func.convert = createConverter(key, func);\n      pairs.push([key, func]);\n    }\n  });\n\n  // Assign to `_` leaving `_.prototype` unchanged to allow chaining.\n  each(pairs, function(pair) {\n    _[pair[0]] = pair[1];\n  });\n\n  _.convert = convertLib;\n  _.placeholder = _;\n\n  // Assign aliases.\n  each(keys(_), function(key) {\n    each(mapping.realToAlias[key] || [], function(alias) {\n      _[alias] = _[key];\n    });\n  });\n\n  return _;\n}\n\nmodule.exports = baseConvert;\n","/** Used to map aliases to their real names. */\nexports.aliasToReal = {\n\n  // Lodash aliases.\n  'each': 'forEach',\n  'eachRight': 'forEachRight',\n  'entries': 'toPairs',\n  'entriesIn': 'toPairsIn',\n  'extend': 'assignIn',\n  'extendAll': 'assignInAll',\n  'extendAllWith': 'assignInAllWith',\n  'extendWith': 'assignInWith',\n  'first': 'head',\n\n  // Methods that are curried variants of others.\n  'conforms': 'conformsTo',\n  'matches': 'isMatch',\n  'property': 'get',\n\n  // Ramda aliases.\n  '__': 'placeholder',\n  'F': 'stubFalse',\n  'T': 'stubTrue',\n  'all': 'every',\n  'allPass': 'overEvery',\n  'always': 'constant',\n  'any': 'some',\n  'anyPass': 'overSome',\n  'apply': 'spread',\n  'assoc': 'set',\n  'assocPath': 'set',\n  'complement': 'negate',\n  'compose': 'flowRight',\n  'contains': 'includes',\n  'dissoc': 'unset',\n  'dissocPath': 'unset',\n  'dropLast': 'dropRight',\n  'dropLastWhile': 'dropRightWhile',\n  'equals': 'isEqual',\n  'identical': 'eq',\n  'indexBy': 'keyBy',\n  'init': 'initial',\n  'invertObj': 'invert',\n  'juxt': 'over',\n  'omitAll': 'omit',\n  'nAry': 'ary',\n  'path': 'get',\n  'pathEq': 'matchesProperty',\n  'pathOr': 'getOr',\n  'paths': 'at',\n  'pickAll': 'pick',\n  'pipe': 'flow',\n  'pluck': 'map',\n  'prop': 'get',\n  'propEq': 'matchesProperty',\n  'propOr': 'getOr',\n  'props': 'at',\n  'symmetricDifference': 'xor',\n  'symmetricDifferenceBy': 'xorBy',\n  'symmetricDifferenceWith': 'xorWith',\n  'takeLast': 'takeRight',\n  'takeLastWhile': 'takeRightWhile',\n  'unapply': 'rest',\n  'unnest': 'flatten',\n  'useWith': 'overArgs',\n  'where': 'conformsTo',\n  'whereEq': 'isMatch',\n  'zipObj': 'zipObject'\n};\n\n/** Used to map ary to method names. */\nexports.aryMethod = {\n  '1': [\n    'assignAll', 'assignInAll', 'attempt', 'castArray', 'ceil', 'create',\n    'curry', 'curryRight', 'defaultsAll', 'defaultsDeepAll', 'floor', 'flow',\n    'flowRight', 'fromPairs', 'invert', 'iteratee', 'memoize', 'method', 'mergeAll',\n    'methodOf', 'mixin', 'nthArg', 'over', 'overEvery', 'overSome','rest', 'reverse',\n    'round', 'runInContext', 'spread', 'template', 'trim', 'trimEnd', 'trimStart',\n    'uniqueId', 'words', 'zipAll'\n  ],\n  '2': [\n    'add', 'after', 'ary', 'assign', 'assignAllWith', 'assignIn', 'assignInAllWith',\n    'at', 'before', 'bind', 'bindAll', 'bindKey', 'chunk', 'cloneDeepWith',\n    'cloneWith', 'concat', 'conformsTo', 'countBy', 'curryN', 'curryRightN',\n    'debounce', 'defaults', 'defaultsDeep', 'defaultTo', 'delay', 'difference',\n    'divide', 'drop', 'dropRight', 'dropRightWhile', 'dropWhile', 'endsWith', 'eq',\n    'every', 'filter', 'find', 'findIndex', 'findKey', 'findLast', 'findLastIndex',\n    'findLastKey', 'flatMap', 'flatMapDeep', 'flattenDepth', 'forEach',\n    'forEachRight', 'forIn', 'forInRight', 'forOwn', 'forOwnRight', 'get',\n    'groupBy', 'gt', 'gte', 'has', 'hasIn', 'includes', 'indexOf', 'intersection',\n    'invertBy', 'invoke', 'invokeMap', 'isEqual', 'isMatch', 'join', 'keyBy',\n    'lastIndexOf', 'lt', 'lte', 'map', 'mapKeys', 'mapValues', 'matchesProperty',\n    'maxBy', 'meanBy', 'merge', 'mergeAllWith', 'minBy', 'multiply', 'nth', 'omit',\n    'omitBy', 'overArgs', 'pad', 'padEnd', 'padStart', 'parseInt', 'partial',\n    'partialRight', 'partition', 'pick', 'pickBy', 'propertyOf', 'pull', 'pullAll',\n    'pullAt', 'random', 'range', 'rangeRight', 'rearg', 'reject', 'remove',\n    'repeat', 'restFrom', 'result', 'sampleSize', 'some', 'sortBy', 'sortedIndex',\n    'sortedIndexOf', 'sortedLastIndex', 'sortedLastIndexOf', 'sortedUniqBy',\n    'split', 'spreadFrom', 'startsWith', 'subtract', 'sumBy', 'take', 'takeRight',\n    'takeRightWhile', 'takeWhile', 'tap', 'throttle', 'thru', 'times', 'trimChars',\n    'trimCharsEnd', 'trimCharsStart', 'truncate', 'union', 'uniqBy', 'uniqWith',\n    'unset', 'unzipWith', 'without', 'wrap', 'xor', 'zip', 'zipObject',\n    'zipObjectDeep'\n  ],\n  '3': [\n    'assignInWith', 'assignWith', 'clamp', 'differenceBy', 'differenceWith',\n    'findFrom', 'findIndexFrom', 'findLastFrom', 'findLastIndexFrom', 'getOr',\n    'includesFrom', 'indexOfFrom', 'inRange', 'intersectionBy', 'intersectionWith',\n    'invokeArgs', 'invokeArgsMap', 'isEqualWith', 'isMatchWith', 'flatMapDepth',\n    'lastIndexOfFrom', 'mergeWith', 'orderBy', 'padChars', 'padCharsEnd',\n    'padCharsStart', 'pullAllBy', 'pullAllWith', 'rangeStep', 'rangeStepRight',\n    'reduce', 'reduceRight', 'replace', 'set', 'slice', 'sortedIndexBy',\n    'sortedLastIndexBy', 'transform', 'unionBy', 'unionWith', 'update', 'xorBy',\n    'xorWith', 'zipWith'\n  ],\n  '4': [\n    'fill', 'setWith', 'updateWith'\n  ]\n};\n\n/** Used to map ary to rearg configs. */\nexports.aryRearg = {\n  '2': [1, 0],\n  '3': [2, 0, 1],\n  '4': [3, 2, 0, 1]\n};\n\n/** Used to map method names to their iteratee ary. */\nexports.iterateeAry = {\n  'dropRightWhile': 1,\n  'dropWhile': 1,\n  'every': 1,\n  'filter': 1,\n  'find': 1,\n  'findFrom': 1,\n  'findIndex': 1,\n  'findIndexFrom': 1,\n  'findKey': 1,\n  'findLast': 1,\n  'findLastFrom': 1,\n  'findLastIndex': 1,\n  'findLastIndexFrom': 1,\n  'findLastKey': 1,\n  'flatMap': 1,\n  'flatMapDeep': 1,\n  'flatMapDepth': 1,\n  'forEach': 1,\n  'forEachRight': 1,\n  'forIn': 1,\n  'forInRight': 1,\n  'forOwn': 1,\n  'forOwnRight': 1,\n  'map': 1,\n  'mapKeys': 1,\n  'mapValues': 1,\n  'partition': 1,\n  'reduce': 2,\n  'reduceRight': 2,\n  'reject': 1,\n  'remove': 1,\n  'some': 1,\n  'takeRightWhile': 1,\n  'takeWhile': 1,\n  'times': 1,\n  'transform': 2\n};\n\n/** Used to map method names to iteratee rearg configs. */\nexports.iterateeRearg = {\n  'mapKeys': [1],\n  'reduceRight': [1, 0]\n};\n\n/** Used to map method names to rearg configs. */\nexports.methodRearg = {\n  'assignInAllWith': [1, 0],\n  'assignInWith': [1, 2, 0],\n  'assignAllWith': [1, 0],\n  'assignWith': [1, 2, 0],\n  'differenceBy': [1, 2, 0],\n  'differenceWith': [1, 2, 0],\n  'getOr': [2, 1, 0],\n  'intersectionBy': [1, 2, 0],\n  'intersectionWith': [1, 2, 0],\n  'isEqualWith': [1, 2, 0],\n  'isMatchWith': [2, 1, 0],\n  'mergeAllWith': [1, 0],\n  'mergeWith': [1, 2, 0],\n  'padChars': [2, 1, 0],\n  'padCharsEnd': [2, 1, 0],\n  'padCharsStart': [2, 1, 0],\n  'pullAllBy': [2, 1, 0],\n  'pullAllWith': [2, 1, 0],\n  'rangeStep': [1, 2, 0],\n  'rangeStepRight': [1, 2, 0],\n  'setWith': [3, 1, 2, 0],\n  'sortedIndexBy': [2, 1, 0],\n  'sortedLastIndexBy': [2, 1, 0],\n  'unionBy': [1, 2, 0],\n  'unionWith': [1, 2, 0],\n  'updateWith': [3, 1, 2, 0],\n  'xorBy': [1, 2, 0],\n  'xorWith': [1, 2, 0],\n  'zipWith': [1, 2, 0]\n};\n\n/** Used to map method names to spread configs. */\nexports.methodSpread = {\n  'assignAll': { 'start': 0 },\n  'assignAllWith': { 'start': 0 },\n  'assignInAll': { 'start': 0 },\n  'assignInAllWith': { 'start': 0 },\n  'defaultsAll': { 'start': 0 },\n  'defaultsDeepAll': { 'start': 0 },\n  'invokeArgs': { 'start': 2 },\n  'invokeArgsMap': { 'start': 2 },\n  'mergeAll': { 'start': 0 },\n  'mergeAllWith': { 'start': 0 },\n  'partial': { 'start': 1 },\n  'partialRight': { 'start': 1 },\n  'without': { 'start': 1 },\n  'zipAll': { 'start': 0 }\n};\n\n/** Used to identify methods which mutate arrays or objects. */\nexports.mutate = {\n  'array': {\n    'fill': true,\n    'pull': true,\n    'pullAll': true,\n    'pullAllBy': true,\n    'pullAllWith': true,\n    'pullAt': true,\n    'remove': true,\n    'reverse': true\n  },\n  'object': {\n    'assign': true,\n    'assignAll': true,\n    'assignAllWith': true,\n    'assignIn': true,\n    'assignInAll': true,\n    'assignInAllWith': true,\n    'assignInWith': true,\n    'assignWith': true,\n    'defaults': true,\n    'defaultsAll': true,\n    'defaultsDeep': true,\n    'defaultsDeepAll': true,\n    'merge': true,\n    'mergeAll': true,\n    'mergeAllWith': true,\n    'mergeWith': true,\n  },\n  'set': {\n    'set': true,\n    'setWith': true,\n    'unset': true,\n    'update': true,\n    'updateWith': true\n  }\n};\n\n/** Used to map real names to their aliases. */\nexports.realToAlias = (function() {\n  var hasOwnProperty = Object.prototype.hasOwnProperty,\n      object = exports.aliasToReal,\n      result = {};\n\n  for (var key in object) {\n    var value = object[key];\n    if (hasOwnProperty.call(result, value)) {\n      result[value].push(key);\n    } else {\n      result[value] = [key];\n    }\n  }\n  return result;\n}());\n\n/** Used to map method names to other names. */\nexports.remap = {\n  'assignAll': 'assign',\n  'assignAllWith': 'assignWith',\n  'assignInAll': 'assignIn',\n  'assignInAllWith': 'assignInWith',\n  'curryN': 'curry',\n  'curryRightN': 'curryRight',\n  'defaultsAll': 'defaults',\n  'defaultsDeepAll': 'defaultsDeep',\n  'findFrom': 'find',\n  'findIndexFrom': 'findIndex',\n  'findLastFrom': 'findLast',\n  'findLastIndexFrom': 'findLastIndex',\n  'getOr': 'get',\n  'includesFrom': 'includes',\n  'indexOfFrom': 'indexOf',\n  'invokeArgs': 'invoke',\n  'invokeArgsMap': 'invokeMap',\n  'lastIndexOfFrom': 'lastIndexOf',\n  'mergeAll': 'merge',\n  'mergeAllWith': 'mergeWith',\n  'padChars': 'pad',\n  'padCharsEnd': 'padEnd',\n  'padCharsStart': 'padStart',\n  'propertyOf': 'get',\n  'rangeStep': 'range',\n  'rangeStepRight': 'rangeRight',\n  'restFrom': 'rest',\n  'spreadFrom': 'spread',\n  'trimChars': 'trim',\n  'trimCharsEnd': 'trimEnd',\n  'trimCharsStart': 'trimStart',\n  'zipAll': 'zip'\n};\n\n/** Used to track methods that skip fixing their arity. */\nexports.skipFixed = {\n  'castArray': true,\n  'flow': true,\n  'flowRight': true,\n  'iteratee': true,\n  'mixin': true,\n  'rearg': true,\n  'runInContext': true\n};\n\n/** Used to track methods that skip rearranging arguments. */\nexports.skipRearg = {\n  'add': true,\n  'assign': true,\n  'assignIn': true,\n  'bind': true,\n  'bindKey': true,\n  'concat': true,\n  'difference': true,\n  'divide': true,\n  'eq': true,\n  'gt': true,\n  'gte': true,\n  'isEqual': true,\n  'lt': true,\n  'lte': true,\n  'matchesProperty': true,\n  'merge': true,\n  'multiply': true,\n  'overArgs': true,\n  'partial': true,\n  'partialRight': true,\n  'propertyOf': true,\n  'random': true,\n  'range': true,\n  'rangeRight': true,\n  'subtract': true,\n  'zip': true,\n  'zipObject': true,\n  'zipObjectDeep': true\n};\n","/**\n * The default argument placeholder value for methods.\n *\n * @type {Object}\n */\nmodule.exports = {};\n","/**\n * @license\n * Lodash <https://lodash.com/>\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n(function(){function n(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}function t(n,t,r,e){for(var u=-1,i=null==n?0:n.length;++u<i;){var o=n[u];t(e,o,r(o),n)}return e}function r(n,t){for(var r=-1,e=null==n?0:n.length;++r<e&&t(n[r],r,n)!==!1;);return n}function e(n,t){for(var r=null==n?0:n.length;r--&&t(n[r],r,n)!==!1;);return n}function u(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(!t(n[r],r,n))return!1;\nreturn!0}function i(n,t){for(var r=-1,e=null==n?0:n.length,u=0,i=[];++r<e;){var o=n[r];t(o,r,n)&&(i[u++]=o)}return i}function o(n,t){return!!(null==n?0:n.length)&&y(n,t,0)>-1}function f(n,t,r){for(var e=-1,u=null==n?0:n.length;++e<u;)if(r(t,n[e]))return!0;return!1}function c(n,t){for(var r=-1,e=null==n?0:n.length,u=Array(e);++r<e;)u[r]=t(n[r],r,n);return u}function a(n,t){for(var r=-1,e=t.length,u=n.length;++r<e;)n[u+r]=t[r];return n}function l(n,t,r,e){var u=-1,i=null==n?0:n.length;for(e&&i&&(r=n[++u]);++u<i;)r=t(r,n[u],u,n);\nreturn r}function s(n,t,r,e){var u=null==n?0:n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function h(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function p(n){return n.split(\"\")}function _(n){return n.match(Bt)||[]}function v(n,t,r){var e;return r(n,function(n,r,u){if(t(n,r,u))return e=r,!1}),e}function g(n,t,r,e){for(var u=n.length,i=r+(e?1:-1);e?i--:++i<u;)if(t(n[i],i,n))return i;return-1}function y(n,t,r){return t===t?q(n,t,r):g(n,b,r)}function d(n,t,r,e){\nfor(var u=r-1,i=n.length;++u<i;)if(e(n[u],t))return u;return-1}function b(n){return n!==n}function w(n,t){var r=null==n?0:n.length;return r?k(n,t)/r:Sn}function m(n){return function(t){return null==t?Y:t[n]}}function x(n){return function(t){return null==n?Y:n[t]}}function j(n,t,r,e,u){return u(n,function(n,u,i){r=e?(e=!1,n):t(r,n,u,i)}),r}function A(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].value;return n}function k(n,t){for(var r,e=-1,u=n.length;++e<u;){var i=t(n[e]);i!==Y&&(r=r===Y?i:r+i);\n}return r}function O(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function I(n,t){return c(t,function(t){return[t,n[t]]})}function R(n){return function(t){return n(t)}}function z(n,t){return c(t,function(t){return n[t]})}function E(n,t){return n.has(t)}function S(n,t){for(var r=-1,e=n.length;++r<e&&y(t,n[r],0)>-1;);return r}function W(n,t){for(var r=n.length;r--&&y(t,n[r],0)>-1;);return r}function L(n,t){for(var r=n.length,e=0;r--;)n[r]===t&&++e;return e}function C(n){return\"\\\\\"+Gr[n]}function U(n,t){\nreturn null==n?Y:n[t]}function B(n){return Dr.test(n)}function T(n){return Mr.test(n)}function $(n){for(var t,r=[];!(t=n.next()).done;)r.push(t.value);return r}function D(n){var t=-1,r=Array(n.size);return n.forEach(function(n,e){r[++t]=[e,n]}),r}function M(n,t){return function(r){return n(t(r))}}function F(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r];o!==t&&o!==un||(n[r]=un,i[u++]=r)}return i}function N(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=n}),r}function P(n){\nvar t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=[n,n]}),r}function q(n,t,r){for(var e=r-1,u=n.length;++e<u;)if(n[e]===t)return e;return-1}function Z(n,t,r){for(var e=r+1;e--;)if(n[e]===t)return e;return e}function K(n){return B(n)?G(n):se(n)}function V(n){return B(n)?H(n):p(n)}function G(n){for(var t=Tr.lastIndex=0;Tr.test(n);)++t;return t}function H(n){return n.match(Tr)||[]}function J(n){return n.match($r)||[]}var Y,Q=\"4.17.19\",X=200,nn=\"Unsupported core-js use. Try https://npms.io/search?q=ponyfill.\",tn=\"Expected a function\",rn=\"__lodash_hash_undefined__\",en=500,un=\"__lodash_placeholder__\",on=1,fn=2,cn=4,an=1,ln=2,sn=1,hn=2,pn=4,_n=8,vn=16,gn=32,yn=64,dn=128,bn=256,wn=512,mn=30,xn=\"...\",jn=800,An=16,kn=1,On=2,In=3,Rn=1/0,zn=9007199254740991,En=1.7976931348623157e308,Sn=NaN,Wn=4294967295,Ln=Wn-1,Cn=Wn>>>1,Un=[[\"ary\",dn],[\"bind\",sn],[\"bindKey\",hn],[\"curry\",_n],[\"curryRight\",vn],[\"flip\",wn],[\"partial\",gn],[\"partialRight\",yn],[\"rearg\",bn]],Bn=\"[object Arguments]\",Tn=\"[object Array]\",$n=\"[object AsyncFunction]\",Dn=\"[object Boolean]\",Mn=\"[object Date]\",Fn=\"[object DOMException]\",Nn=\"[object Error]\",Pn=\"[object Function]\",qn=\"[object GeneratorFunction]\",Zn=\"[object Map]\",Kn=\"[object Number]\",Vn=\"[object Null]\",Gn=\"[object Object]\",Hn=\"[object Promise]\",Jn=\"[object Proxy]\",Yn=\"[object RegExp]\",Qn=\"[object Set]\",Xn=\"[object String]\",nt=\"[object Symbol]\",tt=\"[object Undefined]\",rt=\"[object WeakMap]\",et=\"[object WeakSet]\",ut=\"[object ArrayBuffer]\",it=\"[object DataView]\",ot=\"[object Float32Array]\",ft=\"[object Float64Array]\",ct=\"[object Int8Array]\",at=\"[object Int16Array]\",lt=\"[object Int32Array]\",st=\"[object Uint8Array]\",ht=\"[object Uint8ClampedArray]\",pt=\"[object Uint16Array]\",_t=\"[object Uint32Array]\",vt=/\\b__p \\+= '';/g,gt=/\\b(__p \\+=) '' \\+/g,yt=/(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g,dt=/&(?:amp|lt|gt|quot|#39);/g,bt=/[&<>\"']/g,wt=RegExp(dt.source),mt=RegExp(bt.source),xt=/<%-([\\s\\S]+?)%>/g,jt=/<%([\\s\\S]+?)%>/g,At=/<%=([\\s\\S]+?)%>/g,kt=/\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,Ot=/^\\w*$/,It=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,Rt=/[\\\\^$.*+?()[\\]{}|]/g,zt=RegExp(Rt.source),Et=/^\\s+|\\s+$/g,St=/^\\s+/,Wt=/\\s+$/,Lt=/\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/,Ct=/\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,Ut=/,? & /,Bt=/[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g,Tt=/\\\\(\\\\)?/g,$t=/\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g,Dt=/\\w*$/,Mt=/^[-+]0x[0-9a-f]+$/i,Ft=/^0b[01]+$/i,Nt=/^\\[object .+?Constructor\\]$/,Pt=/^0o[0-7]+$/i,qt=/^(?:0|[1-9]\\d*)$/,Zt=/[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g,Kt=/($^)/,Vt=/['\\n\\r\\u2028\\u2029\\\\]/g,Gt=\"\\\\ud800-\\\\udfff\",Ht=\"\\\\u0300-\\\\u036f\",Jt=\"\\\\ufe20-\\\\ufe2f\",Yt=\"\\\\u20d0-\\\\u20ff\",Qt=Ht+Jt+Yt,Xt=\"\\\\u2700-\\\\u27bf\",nr=\"a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff\",tr=\"\\\\xac\\\\xb1\\\\xd7\\\\xf7\",rr=\"\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf\",er=\"\\\\u2000-\\\\u206f\",ur=\" \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\",ir=\"A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde\",or=\"\\\\ufe0e\\\\ufe0f\",fr=tr+rr+er+ur,cr=\"['\\u2019]\",ar=\"[\"+Gt+\"]\",lr=\"[\"+fr+\"]\",sr=\"[\"+Qt+\"]\",hr=\"\\\\d+\",pr=\"[\"+Xt+\"]\",_r=\"[\"+nr+\"]\",vr=\"[^\"+Gt+fr+hr+Xt+nr+ir+\"]\",gr=\"\\\\ud83c[\\\\udffb-\\\\udfff]\",yr=\"(?:\"+sr+\"|\"+gr+\")\",dr=\"[^\"+Gt+\"]\",br=\"(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}\",wr=\"[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]\",mr=\"[\"+ir+\"]\",xr=\"\\\\u200d\",jr=\"(?:\"+_r+\"|\"+vr+\")\",Ar=\"(?:\"+mr+\"|\"+vr+\")\",kr=\"(?:\"+cr+\"(?:d|ll|m|re|s|t|ve))?\",Or=\"(?:\"+cr+\"(?:D|LL|M|RE|S|T|VE))?\",Ir=yr+\"?\",Rr=\"[\"+or+\"]?\",zr=\"(?:\"+xr+\"(?:\"+[dr,br,wr].join(\"|\")+\")\"+Rr+Ir+\")*\",Er=\"\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])\",Sr=\"\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])\",Wr=Rr+Ir+zr,Lr=\"(?:\"+[pr,br,wr].join(\"|\")+\")\"+Wr,Cr=\"(?:\"+[dr+sr+\"?\",sr,br,wr,ar].join(\"|\")+\")\",Ur=RegExp(cr,\"g\"),Br=RegExp(sr,\"g\"),Tr=RegExp(gr+\"(?=\"+gr+\")|\"+Cr+Wr,\"g\"),$r=RegExp([mr+\"?\"+_r+\"+\"+kr+\"(?=\"+[lr,mr,\"$\"].join(\"|\")+\")\",Ar+\"+\"+Or+\"(?=\"+[lr,mr+jr,\"$\"].join(\"|\")+\")\",mr+\"?\"+jr+\"+\"+kr,mr+\"+\"+Or,Sr,Er,hr,Lr].join(\"|\"),\"g\"),Dr=RegExp(\"[\"+xr+Gt+Qt+or+\"]\"),Mr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Fr=[\"Array\",\"Buffer\",\"DataView\",\"Date\",\"Error\",\"Float32Array\",\"Float64Array\",\"Function\",\"Int8Array\",\"Int16Array\",\"Int32Array\",\"Map\",\"Math\",\"Object\",\"Promise\",\"RegExp\",\"Set\",\"String\",\"Symbol\",\"TypeError\",\"Uint8Array\",\"Uint8ClampedArray\",\"Uint16Array\",\"Uint32Array\",\"WeakMap\",\"_\",\"clearTimeout\",\"isFinite\",\"parseInt\",\"setTimeout\"],Nr=-1,Pr={};\nPr[ot]=Pr[ft]=Pr[ct]=Pr[at]=Pr[lt]=Pr[st]=Pr[ht]=Pr[pt]=Pr[_t]=!0,Pr[Bn]=Pr[Tn]=Pr[ut]=Pr[Dn]=Pr[it]=Pr[Mn]=Pr[Nn]=Pr[Pn]=Pr[Zn]=Pr[Kn]=Pr[Gn]=Pr[Yn]=Pr[Qn]=Pr[Xn]=Pr[rt]=!1;var qr={};qr[Bn]=qr[Tn]=qr[ut]=qr[it]=qr[Dn]=qr[Mn]=qr[ot]=qr[ft]=qr[ct]=qr[at]=qr[lt]=qr[Zn]=qr[Kn]=qr[Gn]=qr[Yn]=qr[Qn]=qr[Xn]=qr[nt]=qr[st]=qr[ht]=qr[pt]=qr[_t]=!0,qr[Nn]=qr[Pn]=qr[rt]=!1;var Zr={\"\\xc0\":\"A\",\"\\xc1\":\"A\",\"\\xc2\":\"A\",\"\\xc3\":\"A\",\"\\xc4\":\"A\",\"\\xc5\":\"A\",\"\\xe0\":\"a\",\"\\xe1\":\"a\",\"\\xe2\":\"a\",\"\\xe3\":\"a\",\"\\xe4\":\"a\",\"\\xe5\":\"a\",\n\"\\xc7\":\"C\",\"\\xe7\":\"c\",\"\\xd0\":\"D\",\"\\xf0\":\"d\",\"\\xc8\":\"E\",\"\\xc9\":\"E\",\"\\xca\":\"E\",\"\\xcb\":\"E\",\"\\xe8\":\"e\",\"\\xe9\":\"e\",\"\\xea\":\"e\",\"\\xeb\":\"e\",\"\\xcc\":\"I\",\"\\xcd\":\"I\",\"\\xce\":\"I\",\"\\xcf\":\"I\",\"\\xec\":\"i\",\"\\xed\":\"i\",\"\\xee\":\"i\",\"\\xef\":\"i\",\"\\xd1\":\"N\",\"\\xf1\":\"n\",\"\\xd2\":\"O\",\"\\xd3\":\"O\",\"\\xd4\":\"O\",\"\\xd5\":\"O\",\"\\xd6\":\"O\",\"\\xd8\":\"O\",\"\\xf2\":\"o\",\"\\xf3\":\"o\",\"\\xf4\":\"o\",\"\\xf5\":\"o\",\"\\xf6\":\"o\",\"\\xf8\":\"o\",\"\\xd9\":\"U\",\"\\xda\":\"U\",\"\\xdb\":\"U\",\"\\xdc\":\"U\",\"\\xf9\":\"u\",\"\\xfa\":\"u\",\"\\xfb\":\"u\",\"\\xfc\":\"u\",\"\\xdd\":\"Y\",\"\\xfd\":\"y\",\"\\xff\":\"y\",\"\\xc6\":\"Ae\",\n\"\\xe6\":\"ae\",\"\\xde\":\"Th\",\"\\xfe\":\"th\",\"\\xdf\":\"ss\",\"\\u0100\":\"A\",\"\\u0102\":\"A\",\"\\u0104\":\"A\",\"\\u0101\":\"a\",\"\\u0103\":\"a\",\"\\u0105\":\"a\",\"\\u0106\":\"C\",\"\\u0108\":\"C\",\"\\u010a\":\"C\",\"\\u010c\":\"C\",\"\\u0107\":\"c\",\"\\u0109\":\"c\",\"\\u010b\":\"c\",\"\\u010d\":\"c\",\"\\u010e\":\"D\",\"\\u0110\":\"D\",\"\\u010f\":\"d\",\"\\u0111\":\"d\",\"\\u0112\":\"E\",\"\\u0114\":\"E\",\"\\u0116\":\"E\",\"\\u0118\":\"E\",\"\\u011a\":\"E\",\"\\u0113\":\"e\",\"\\u0115\":\"e\",\"\\u0117\":\"e\",\"\\u0119\":\"e\",\"\\u011b\":\"e\",\"\\u011c\":\"G\",\"\\u011e\":\"G\",\"\\u0120\":\"G\",\"\\u0122\":\"G\",\"\\u011d\":\"g\",\"\\u011f\":\"g\",\"\\u0121\":\"g\",\n\"\\u0123\":\"g\",\"\\u0124\":\"H\",\"\\u0126\":\"H\",\"\\u0125\":\"h\",\"\\u0127\":\"h\",\"\\u0128\":\"I\",\"\\u012a\":\"I\",\"\\u012c\":\"I\",\"\\u012e\":\"I\",\"\\u0130\":\"I\",\"\\u0129\":\"i\",\"\\u012b\":\"i\",\"\\u012d\":\"i\",\"\\u012f\":\"i\",\"\\u0131\":\"i\",\"\\u0134\":\"J\",\"\\u0135\":\"j\",\"\\u0136\":\"K\",\"\\u0137\":\"k\",\"\\u0138\":\"k\",\"\\u0139\":\"L\",\"\\u013b\":\"L\",\"\\u013d\":\"L\",\"\\u013f\":\"L\",\"\\u0141\":\"L\",\"\\u013a\":\"l\",\"\\u013c\":\"l\",\"\\u013e\":\"l\",\"\\u0140\":\"l\",\"\\u0142\":\"l\",\"\\u0143\":\"N\",\"\\u0145\":\"N\",\"\\u0147\":\"N\",\"\\u014a\":\"N\",\"\\u0144\":\"n\",\"\\u0146\":\"n\",\"\\u0148\":\"n\",\"\\u014b\":\"n\",\"\\u014c\":\"O\",\n\"\\u014e\":\"O\",\"\\u0150\":\"O\",\"\\u014d\":\"o\",\"\\u014f\":\"o\",\"\\u0151\":\"o\",\"\\u0154\":\"R\",\"\\u0156\":\"R\",\"\\u0158\":\"R\",\"\\u0155\":\"r\",\"\\u0157\":\"r\",\"\\u0159\":\"r\",\"\\u015a\":\"S\",\"\\u015c\":\"S\",\"\\u015e\":\"S\",\"\\u0160\":\"S\",\"\\u015b\":\"s\",\"\\u015d\":\"s\",\"\\u015f\":\"s\",\"\\u0161\":\"s\",\"\\u0162\":\"T\",\"\\u0164\":\"T\",\"\\u0166\":\"T\",\"\\u0163\":\"t\",\"\\u0165\":\"t\",\"\\u0167\":\"t\",\"\\u0168\":\"U\",\"\\u016a\":\"U\",\"\\u016c\":\"U\",\"\\u016e\":\"U\",\"\\u0170\":\"U\",\"\\u0172\":\"U\",\"\\u0169\":\"u\",\"\\u016b\":\"u\",\"\\u016d\":\"u\",\"\\u016f\":\"u\",\"\\u0171\":\"u\",\"\\u0173\":\"u\",\"\\u0174\":\"W\",\"\\u0175\":\"w\",\n\"\\u0176\":\"Y\",\"\\u0177\":\"y\",\"\\u0178\":\"Y\",\"\\u0179\":\"Z\",\"\\u017b\":\"Z\",\"\\u017d\":\"Z\",\"\\u017a\":\"z\",\"\\u017c\":\"z\",\"\\u017e\":\"z\",\"\\u0132\":\"IJ\",\"\\u0133\":\"ij\",\"\\u0152\":\"Oe\",\"\\u0153\":\"oe\",\"\\u0149\":\"'n\",\"\\u017f\":\"s\"},Kr={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\"},Vr={\"&amp;\":\"&\",\"&lt;\":\"<\",\"&gt;\":\">\",\"&quot;\":'\"',\"&#39;\":\"'\"},Gr={\"\\\\\":\"\\\\\",\"'\":\"'\",\"\\n\":\"n\",\"\\r\":\"r\",\"\\u2028\":\"u2028\",\"\\u2029\":\"u2029\"},Hr=parseFloat,Jr=parseInt,Yr=\"object\"==typeof global&&global&&global.Object===Object&&global,Qr=\"object\"==typeof self&&self&&self.Object===Object&&self,Xr=Yr||Qr||Function(\"return this\")(),ne=\"object\"==typeof exports&&exports&&!exports.nodeType&&exports,te=ne&&\"object\"==typeof module&&module&&!module.nodeType&&module,re=te&&te.exports===ne,ee=re&&Yr.process,ue=function(){\ntry{var n=te&&te.require&&te.require(\"util\").types;return n?n:ee&&ee.binding&&ee.binding(\"util\")}catch(n){}}(),ie=ue&&ue.isArrayBuffer,oe=ue&&ue.isDate,fe=ue&&ue.isMap,ce=ue&&ue.isRegExp,ae=ue&&ue.isSet,le=ue&&ue.isTypedArray,se=m(\"length\"),he=x(Zr),pe=x(Kr),_e=x(Vr),ve=function p(x){function q(n){if(oc(n)&&!yh(n)&&!(n instanceof Bt)){if(n instanceof H)return n;if(yl.call(n,\"__wrapped__\"))return to(n)}return new H(n)}function G(){}function H(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,\nthis.__index__=0,this.__values__=Y}function Bt(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Wn,this.__views__=[]}function Gt(){var n=new Bt(this.__wrapped__);return n.__actions__=Uu(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Uu(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Uu(this.__views__),n}function Ht(){if(this.__filtered__){var n=new Bt(this);n.__dir__=-1,\nn.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function Jt(){var n=this.__wrapped__.value(),t=this.__dir__,r=yh(n),e=t<0,u=r?n.length:0,i=Ai(0,u,this.__views__),o=i.start,f=i.end,c=f-o,a=e?f:o-1,l=this.__iteratees__,s=l.length,h=0,p=Vl(c,this.__takeCount__);if(!r||!e&&u==c&&p==c)return du(n,this.__actions__);var _=[];n:for(;c--&&h<p;){a+=t;for(var v=-1,g=n[a];++v<s;){var y=l[v],d=y.iteratee,b=y.type,w=d(g);if(b==On)g=w;else if(!w){if(b==kn)continue n;break n}}_[h++]=g}return _}function Yt(n){\nvar t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function Qt(){this.__data__=es?es(null):{},this.size=0}function Xt(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}function nr(n){var t=this.__data__;if(es){var r=t[n];return r===rn?Y:r}return yl.call(t,n)?t[n]:Y}function tr(n){var t=this.__data__;return es?t[n]!==Y:yl.call(t,n)}function rr(n,t){var r=this.__data__;return this.size+=this.has(n)?0:1,r[n]=es&&t===Y?rn:t,this}function er(n){\nvar t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function ur(){this.__data__=[],this.size=0}function ir(n){var t=this.__data__,r=Er(t,n);return!(r<0)&&(r==t.length-1?t.pop():Sl.call(t,r,1),--this.size,!0)}function or(n){var t=this.__data__,r=Er(t,n);return r<0?Y:t[r][1]}function fr(n){return Er(this.__data__,n)>-1}function cr(n,t){var r=this.__data__,e=Er(r,n);return e<0?(++this.size,r.push([n,t])):r[e][1]=t,this}function ar(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){\nvar e=n[t];this.set(e[0],e[1])}}function lr(){this.size=0,this.__data__={hash:new Yt,map:new(Xl||er),string:new Yt}}function sr(n){var t=wi(this,n).delete(n);return this.size-=t?1:0,t}function hr(n){return wi(this,n).get(n)}function pr(n){return wi(this,n).has(n)}function _r(n,t){var r=wi(this,n),e=r.size;return r.set(n,t),this.size+=r.size==e?0:1,this}function vr(n){var t=-1,r=null==n?0:n.length;for(this.__data__=new ar;++t<r;)this.add(n[t])}function gr(n){return this.__data__.set(n,rn),this}function yr(n){\nreturn this.__data__.has(n)}function dr(n){this.size=(this.__data__=new er(n)).size}function br(){this.__data__=new er,this.size=0}function wr(n){var t=this.__data__,r=t.delete(n);return this.size=t.size,r}function mr(n){return this.__data__.get(n)}function xr(n){return this.__data__.has(n)}function jr(n,t){var r=this.__data__;if(r instanceof er){var e=r.__data__;if(!Xl||e.length<X-1)return e.push([n,t]),this.size=++r.size,this;r=this.__data__=new ar(e)}return r.set(n,t),this.size=r.size,this}function Ar(n,t){\nvar r=yh(n),e=!r&&gh(n),u=!r&&!e&&bh(n),i=!r&&!e&&!u&&Ah(n),o=r||e||u||i,f=o?O(n.length,ll):[],c=f.length;for(var a in n)!t&&!yl.call(n,a)||o&&(\"length\"==a||u&&(\"offset\"==a||\"parent\"==a)||i&&(\"buffer\"==a||\"byteLength\"==a||\"byteOffset\"==a)||Wi(a,c))||f.push(a);return f}function kr(n){var t=n.length;return t?n[Xe(0,t-1)]:Y}function Or(n,t){return Yi(Uu(n),$r(t,0,n.length))}function Ir(n){return Yi(Uu(n))}function Rr(n,t,r){(r===Y||Kf(n[t],r))&&(r!==Y||t in n)||Cr(n,t,r)}function zr(n,t,r){var e=n[t];\nyl.call(n,t)&&Kf(e,r)&&(r!==Y||t in n)||Cr(n,t,r)}function Er(n,t){for(var r=n.length;r--;)if(Kf(n[r][0],t))return r;return-1}function Sr(n,t,r,e){return vs(n,function(n,u,i){t(e,n,r(n),i)}),e}function Wr(n,t){return n&&Bu(t,Fc(t),n)}function Lr(n,t){return n&&Bu(t,Nc(t),n)}function Cr(n,t,r){\"__proto__\"==t&&Ul?Ul(n,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):n[t]=r}function Tr(n,t){for(var r=-1,e=t.length,u=el(e),i=null==n;++r<e;)u[r]=i?Y:$c(n,t[r]);return u}function $r(n,t,r){return n===n&&(r!==Y&&(n=n<=r?n:r),\nt!==Y&&(n=n>=t?n:t)),n}function Dr(n,t,e,u,i,o){var f,c=t&on,a=t&fn,l=t&cn;if(e&&(f=i?e(n,u,i,o):e(n)),f!==Y)return f;if(!ic(n))return n;var s=yh(n);if(s){if(f=Ii(n),!c)return Uu(n,f)}else{var h=Is(n),p=h==Pn||h==qn;if(bh(n))return ku(n,c);if(h==Gn||h==Bn||p&&!i){if(f=a||p?{}:Ri(n),!c)return a?$u(n,Lr(f,n)):Tu(n,Wr(f,n))}else{if(!qr[h])return i?n:{};f=zi(n,h,c)}}o||(o=new dr);var _=o.get(n);if(_)return _;o.set(n,f),jh(n)?n.forEach(function(r){f.add(Dr(r,t,e,r,n,o))}):mh(n)&&n.forEach(function(r,u){\nf.set(u,Dr(r,t,e,u,n,o))});var v=l?a?gi:vi:a?Nc:Fc,g=s?Y:v(n);return r(g||n,function(r,u){g&&(u=r,r=n[u]),zr(f,u,Dr(r,t,e,u,n,o))}),f}function Mr(n){var t=Fc(n);return function(r){return Zr(r,n,t)}}function Zr(n,t,r){var e=r.length;if(null==n)return!e;for(n=cl(n);e--;){var u=r[e],i=t[u],o=n[u];if(o===Y&&!(u in n)||!i(o))return!1}return!0}function Kr(n,t,r){if(\"function\"!=typeof n)throw new sl(tn);return Es(function(){n.apply(Y,r)},t)}function Vr(n,t,r,e){var u=-1,i=o,a=!0,l=n.length,s=[],h=t.length;\nif(!l)return s;r&&(t=c(t,R(r))),e?(i=f,a=!1):t.length>=X&&(i=E,a=!1,t=new vr(t));n:for(;++u<l;){var p=n[u],_=null==r?p:r(p);if(p=e||0!==p?p:0,a&&_===_){for(var v=h;v--;)if(t[v]===_)continue n;s.push(p)}else i(t,_,e)||s.push(p)}return s}function Gr(n,t){var r=!0;return vs(n,function(n,e,u){return r=!!t(n,e,u)}),r}function Yr(n,t,r){for(var e=-1,u=n.length;++e<u;){var i=n[e],o=t(i);if(null!=o&&(f===Y?o===o&&!yc(o):r(o,f)))var f=o,c=i}return c}function Qr(n,t,r,e){var u=n.length;for(r=jc(r),r<0&&(r=-r>u?0:u+r),\ne=e===Y||e>u?u:jc(e),e<0&&(e+=u),e=r>e?0:Ac(e);r<e;)n[r++]=t;return n}function ne(n,t){var r=[];return vs(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function te(n,t,r,e,u){var i=-1,o=n.length;for(r||(r=Si),u||(u=[]);++i<o;){var f=n[i];t>0&&r(f)?t>1?te(f,t-1,r,e,u):a(u,f):e||(u[u.length]=f)}return u}function ee(n,t){return n&&ys(n,t,Fc)}function ue(n,t){return n&&ds(n,t,Fc)}function se(n,t){return i(t,function(t){return rc(n[t])})}function ve(n,t){t=ju(t,n);for(var r=0,e=t.length;null!=n&&r<e;)n=n[Qi(t[r++])];\nreturn r&&r==e?n:Y}function ye(n,t,r){var e=t(n);return yh(n)?e:a(e,r(n))}function de(n){return null==n?n===Y?tt:Vn:Cl&&Cl in cl(n)?ji(n):qi(n)}function be(n,t){return n>t}function we(n,t){return null!=n&&yl.call(n,t)}function me(n,t){return null!=n&&t in cl(n)}function xe(n,t,r){return n>=Vl(t,r)&&n<Kl(t,r)}function je(n,t,r){for(var e=r?f:o,u=n[0].length,i=n.length,a=i,l=el(i),s=1/0,h=[];a--;){var p=n[a];a&&t&&(p=c(p,R(t))),s=Vl(p.length,s),l[a]=!r&&(t||u>=120&&p.length>=120)?new vr(a&&p):Y}p=n[0];\nvar _=-1,v=l[0];n:for(;++_<u&&h.length<s;){var g=p[_],y=t?t(g):g;if(g=r||0!==g?g:0,!(v?E(v,y):e(h,y,r))){for(a=i;--a;){var d=l[a];if(!(d?E(d,y):e(n[a],y,r)))continue n}v&&v.push(y),h.push(g)}}return h}function Ae(n,t,r,e){return ee(n,function(n,u,i){t(e,r(n),u,i)}),e}function ke(t,r,e){r=ju(r,t),t=Ki(t,r);var u=null==t?t:t[Qi(mo(r))];return null==u?Y:n(u,t,e)}function Oe(n){return oc(n)&&de(n)==Bn}function Ie(n){return oc(n)&&de(n)==ut}function Re(n){return oc(n)&&de(n)==Mn}function ze(n,t,r,e,u){\nreturn n===t||(null==n||null==t||!oc(n)&&!oc(t)?n!==n&&t!==t:Ee(n,t,r,e,ze,u))}function Ee(n,t,r,e,u,i){var o=yh(n),f=yh(t),c=o?Tn:Is(n),a=f?Tn:Is(t);c=c==Bn?Gn:c,a=a==Bn?Gn:a;var l=c==Gn,s=a==Gn,h=c==a;if(h&&bh(n)){if(!bh(t))return!1;o=!0,l=!1}if(h&&!l)return i||(i=new dr),o||Ah(n)?si(n,t,r,e,u,i):hi(n,t,c,r,e,u,i);if(!(r&an)){var p=l&&yl.call(n,\"__wrapped__\"),_=s&&yl.call(t,\"__wrapped__\");if(p||_){var v=p?n.value():n,g=_?t.value():t;return i||(i=new dr),u(v,g,r,e,i)}}return!!h&&(i||(i=new dr),pi(n,t,r,e,u,i));\n}function Se(n){return oc(n)&&Is(n)==Zn}function We(n,t,r,e){var u=r.length,i=u,o=!e;if(null==n)return!i;for(n=cl(n);u--;){var f=r[u];if(o&&f[2]?f[1]!==n[f[0]]:!(f[0]in n))return!1}for(;++u<i;){f=r[u];var c=f[0],a=n[c],l=f[1];if(o&&f[2]){if(a===Y&&!(c in n))return!1}else{var s=new dr;if(e)var h=e(a,l,c,n,t,s);if(!(h===Y?ze(l,a,an|ln,e,s):h))return!1}}return!0}function Le(n){return!(!ic(n)||Ti(n))&&(rc(n)?jl:Nt).test(Xi(n))}function Ce(n){return oc(n)&&de(n)==Yn}function Ue(n){return oc(n)&&Is(n)==Qn;\n}function Be(n){return oc(n)&&uc(n.length)&&!!Pr[de(n)]}function Te(n){return\"function\"==typeof n?n:null==n?Sa:\"object\"==typeof n?yh(n)?Pe(n[0],n[1]):Ne(n):Da(n)}function $e(n){if(!$i(n))return Zl(n);var t=[];for(var r in cl(n))yl.call(n,r)&&\"constructor\"!=r&&t.push(r);return t}function De(n){if(!ic(n))return Pi(n);var t=$i(n),r=[];for(var e in n)(\"constructor\"!=e||!t&&yl.call(n,e))&&r.push(e);return r}function Me(n,t){return n<t}function Fe(n,t){var r=-1,e=Vf(n)?el(n.length):[];return vs(n,function(n,u,i){\ne[++r]=t(n,u,i)}),e}function Ne(n){var t=mi(n);return 1==t.length&&t[0][2]?Mi(t[0][0],t[0][1]):function(r){return r===n||We(r,n,t)}}function Pe(n,t){return Ci(n)&&Di(t)?Mi(Qi(n),t):function(r){var e=$c(r,n);return e===Y&&e===t?Mc(r,n):ze(t,e,an|ln)}}function qe(n,t,r,e,u){n!==t&&ys(t,function(i,o){if(u||(u=new dr),ic(i))Ze(n,t,o,r,qe,e,u);else{var f=e?e(Gi(n,o),i,o+\"\",n,t,u):Y;f===Y&&(f=i),Rr(n,o,f)}},Nc)}function Ze(n,t,r,e,u,i,o){var f=Gi(n,r),c=Gi(t,r),a=o.get(c);if(a)return Rr(n,r,a),Y;var l=i?i(f,c,r+\"\",n,t,o):Y,s=l===Y;\nif(s){var h=yh(c),p=!h&&bh(c),_=!h&&!p&&Ah(c);l=c,h||p||_?yh(f)?l=f:Gf(f)?l=Uu(f):p?(s=!1,l=ku(c,!0)):_?(s=!1,l=Eu(c,!0)):l=[]:_c(c)||gh(c)?(l=f,gh(f)?l=Oc(f):ic(f)&&!rc(f)||(l=Ri(c))):s=!1}s&&(o.set(c,l),u(l,c,e,i,o),o.delete(c)),Rr(n,r,l)}function Ke(n,t){var r=n.length;if(r)return t+=t<0?r:0,Wi(t,r)?n[t]:Y}function Ve(n,t,r){t=t.length?c(t,function(n){return yh(n)?function(t){return ve(t,1===n.length?n[0]:n)}:n}):[Sa];var e=-1;return t=c(t,R(bi())),A(Fe(n,function(n,r,u){return{criteria:c(t,function(t){\nreturn t(n)}),index:++e,value:n}}),function(n,t){return Wu(n,t,r)})}function Ge(n,t){return He(n,t,function(t,r){return Mc(n,r)})}function He(n,t,r){for(var e=-1,u=t.length,i={};++e<u;){var o=t[e],f=ve(n,o);r(f,o)&&iu(i,ju(o,n),f)}return i}function Je(n){return function(t){return ve(t,n)}}function Ye(n,t,r,e){var u=e?d:y,i=-1,o=t.length,f=n;for(n===t&&(t=Uu(t)),r&&(f=c(n,R(r)));++i<o;)for(var a=0,l=t[i],s=r?r(l):l;(a=u(f,s,a,e))>-1;)f!==n&&Sl.call(f,a,1),Sl.call(n,a,1);return n}function Qe(n,t){for(var r=n?t.length:0,e=r-1;r--;){\nvar u=t[r];if(r==e||u!==i){var i=u;Wi(u)?Sl.call(n,u,1):vu(n,u)}}return n}function Xe(n,t){return n+Ml(Jl()*(t-n+1))}function nu(n,t,r,e){for(var u=-1,i=Kl(Dl((t-n)/(r||1)),0),o=el(i);i--;)o[e?i:++u]=n,n+=r;return o}function tu(n,t){var r=\"\";if(!n||t<1||t>zn)return r;do t%2&&(r+=n),t=Ml(t/2),t&&(n+=n);while(t);return r}function ru(n,t){return Ss(Zi(n,t,Sa),n+\"\")}function eu(n){return kr(na(n))}function uu(n,t){var r=na(n);return Yi(r,$r(t,0,r.length))}function iu(n,t,r,e){if(!ic(n))return n;t=ju(t,n);\nfor(var u=-1,i=t.length,o=i-1,f=n;null!=f&&++u<i;){var c=Qi(t[u]),a=r;if(\"__proto__\"===c||\"constructor\"===c||\"prototype\"===c)return n;if(u!=o){var l=f[c];a=e?e(l,c,f):Y,a===Y&&(a=ic(l)?l:Wi(t[u+1])?[]:{})}zr(f,c,a),f=f[c]}return n}function ou(n){return Yi(na(n))}function fu(n,t,r){var e=-1,u=n.length;t<0&&(t=-t>u?0:u+t),r=r>u?u:r,r<0&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var i=el(u);++e<u;)i[e]=n[e+t];return i}function cu(n,t){var r;return vs(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function au(n,t,r){\nvar e=0,u=null==n?e:n.length;if(\"number\"==typeof t&&t===t&&u<=Cn){for(;e<u;){var i=e+u>>>1,o=n[i];null!==o&&!yc(o)&&(r?o<=t:o<t)?e=i+1:u=i}return u}return lu(n,t,Sa,r)}function lu(n,t,r,e){var u=0,i=null==n?0:n.length;if(0===i)return 0;t=r(t);for(var o=t!==t,f=null===t,c=yc(t),a=t===Y;u<i;){var l=Ml((u+i)/2),s=r(n[l]),h=s!==Y,p=null===s,_=s===s,v=yc(s);if(o)var g=e||_;else g=a?_&&(e||h):f?_&&h&&(e||!p):c?_&&h&&!p&&(e||!v):!p&&!v&&(e?s<=t:s<t);g?u=l+1:i=l}return Vl(i,Ln)}function su(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){\nvar o=n[r],f=t?t(o):o;if(!r||!Kf(f,c)){var c=f;i[u++]=0===o?0:o}}return i}function hu(n){return\"number\"==typeof n?n:yc(n)?Sn:+n}function pu(n){if(\"string\"==typeof n)return n;if(yh(n))return c(n,pu)+\"\";if(yc(n))return ps?ps.call(n):\"\";var t=n+\"\";return\"0\"==t&&1/n==-Rn?\"-0\":t}function _u(n,t,r){var e=-1,u=o,i=n.length,c=!0,a=[],l=a;if(r)c=!1,u=f;else if(i>=X){var s=t?null:js(n);if(s)return N(s);c=!1,u=E,l=new vr}else l=t?[]:a;n:for(;++e<i;){var h=n[e],p=t?t(h):h;if(h=r||0!==h?h:0,c&&p===p){for(var _=l.length;_--;)if(l[_]===p)continue n;\nt&&l.push(p),a.push(h)}else u(l,p,r)||(l!==a&&l.push(p),a.push(h))}return a}function vu(n,t){return t=ju(t,n),n=Ki(n,t),null==n||delete n[Qi(mo(t))]}function gu(n,t,r,e){return iu(n,t,r(ve(n,t)),e)}function yu(n,t,r,e){for(var u=n.length,i=e?u:-1;(e?i--:++i<u)&&t(n[i],i,n););return r?fu(n,e?0:i,e?i+1:u):fu(n,e?i+1:0,e?u:i)}function du(n,t){var r=n;return r instanceof Bt&&(r=r.value()),l(t,function(n,t){return t.func.apply(t.thisArg,a([n],t.args))},r)}function bu(n,t,r){var e=n.length;if(e<2)return e?_u(n[0]):[];\nfor(var u=-1,i=el(e);++u<e;)for(var o=n[u],f=-1;++f<e;)f!=u&&(i[u]=Vr(i[u]||o,n[f],t,r));return _u(te(i,1),t,r)}function wu(n,t,r){for(var e=-1,u=n.length,i=t.length,o={};++e<u;){r(o,n[e],e<i?t[e]:Y)}return o}function mu(n){return Gf(n)?n:[]}function xu(n){return\"function\"==typeof n?n:Sa}function ju(n,t){return yh(n)?n:Ci(n,t)?[n]:Ws(Rc(n))}function Au(n,t,r){var e=n.length;return r=r===Y?e:r,!t&&r>=e?n:fu(n,t,r)}function ku(n,t){if(t)return n.slice();var r=n.length,e=Il?Il(r):new n.constructor(r);\nreturn n.copy(e),e}function Ou(n){var t=new n.constructor(n.byteLength);return new Ol(t).set(new Ol(n)),t}function Iu(n,t){return new n.constructor(t?Ou(n.buffer):n.buffer,n.byteOffset,n.byteLength)}function Ru(n){var t=new n.constructor(n.source,Dt.exec(n));return t.lastIndex=n.lastIndex,t}function zu(n){return hs?cl(hs.call(n)):{}}function Eu(n,t){return new n.constructor(t?Ou(n.buffer):n.buffer,n.byteOffset,n.length)}function Su(n,t){if(n!==t){var r=n!==Y,e=null===n,u=n===n,i=yc(n),o=t!==Y,f=null===t,c=t===t,a=yc(t);\nif(!f&&!a&&!i&&n>t||i&&o&&c&&!f&&!a||e&&o&&c||!r&&c||!u)return 1;if(!e&&!i&&!a&&n<t||a&&r&&u&&!e&&!i||f&&r&&u||!o&&u||!c)return-1}return 0}function Wu(n,t,r){for(var e=-1,u=n.criteria,i=t.criteria,o=u.length,f=r.length;++e<o;){var c=Su(u[e],i[e]);if(c){if(e>=f)return c;return c*(\"desc\"==r[e]?-1:1)}}return n.index-t.index}function Lu(n,t,r,e){for(var u=-1,i=n.length,o=r.length,f=-1,c=t.length,a=Kl(i-o,0),l=el(c+a),s=!e;++f<c;)l[f]=t[f];for(;++u<o;)(s||u<i)&&(l[r[u]]=n[u]);for(;a--;)l[f++]=n[u++];return l;\n}function Cu(n,t,r,e){for(var u=-1,i=n.length,o=-1,f=r.length,c=-1,a=t.length,l=Kl(i-f,0),s=el(l+a),h=!e;++u<l;)s[u]=n[u];for(var p=u;++c<a;)s[p+c]=t[c];for(;++o<f;)(h||u<i)&&(s[p+r[o]]=n[u++]);return s}function Uu(n,t){var r=-1,e=n.length;for(t||(t=el(e));++r<e;)t[r]=n[r];return t}function Bu(n,t,r,e){var u=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var f=t[i],c=e?e(r[f],n[f],f,r,n):Y;c===Y&&(c=n[f]),u?Cr(r,f,c):zr(r,f,c)}return r}function Tu(n,t){return Bu(n,ks(n),t)}function $u(n,t){return Bu(n,Os(n),t);\n}function Du(n,r){return function(e,u){var i=yh(e)?t:Sr,o=r?r():{};return i(e,n,bi(u,2),o)}}function Mu(n){return ru(function(t,r){var e=-1,u=r.length,i=u>1?r[u-1]:Y,o=u>2?r[2]:Y;for(i=n.length>3&&\"function\"==typeof i?(u--,i):Y,o&&Li(r[0],r[1],o)&&(i=u<3?Y:i,u=1),t=cl(t);++e<u;){var f=r[e];f&&n(t,f,e,i)}return t})}function Fu(n,t){return function(r,e){if(null==r)return r;if(!Vf(r))return n(r,e);for(var u=r.length,i=t?u:-1,o=cl(r);(t?i--:++i<u)&&e(o[i],i,o)!==!1;);return r}}function Nu(n){return function(t,r,e){\nfor(var u=-1,i=cl(t),o=e(t),f=o.length;f--;){var c=o[n?f:++u];if(r(i[c],c,i)===!1)break}return t}}function Pu(n,t,r){function e(){return(this&&this!==Xr&&this instanceof e?i:n).apply(u?r:this,arguments)}var u=t&sn,i=Ku(n);return e}function qu(n){return function(t){t=Rc(t);var r=B(t)?V(t):Y,e=r?r[0]:t.charAt(0),u=r?Au(r,1).join(\"\"):t.slice(1);return e[n]()+u}}function Zu(n){return function(t){return l(Oa(oa(t).replace(Ur,\"\")),n,\"\")}}function Ku(n){return function(){var t=arguments;switch(t.length){\ncase 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=_s(n.prototype),e=n.apply(r,t);return ic(e)?e:r}}function Vu(t,r,e){function u(){for(var o=arguments.length,f=el(o),c=o,a=di(u);c--;)f[c]=arguments[c];var l=o<3&&f[0]!==a&&f[o-1]!==a?[]:F(f,a);\nreturn o-=l.length,o<e?ui(t,r,Ju,u.placeholder,Y,f,l,Y,Y,e-o):n(this&&this!==Xr&&this instanceof u?i:t,this,f)}var i=Ku(t);return u}function Gu(n){return function(t,r,e){var u=cl(t);if(!Vf(t)){var i=bi(r,3);t=Fc(t),r=function(n){return i(u[n],n,u)}}var o=n(t,r,e);return o>-1?u[i?t[o]:o]:Y}}function Hu(n){return _i(function(t){var r=t.length,e=r,u=H.prototype.thru;for(n&&t.reverse();e--;){var i=t[e];if(\"function\"!=typeof i)throw new sl(tn);if(u&&!o&&\"wrapper\"==yi(i))var o=new H([],!0)}for(e=o?e:r;++e<r;){\ni=t[e];var f=yi(i),c=\"wrapper\"==f?As(i):Y;o=c&&Bi(c[0])&&c[1]==(dn|_n|gn|bn)&&!c[4].length&&1==c[9]?o[yi(c[0])].apply(o,c[3]):1==i.length&&Bi(i)?o[f]():o.thru(i)}return function(){var n=arguments,e=n[0];if(o&&1==n.length&&yh(e))return o.plant(e).value();for(var u=0,i=r?t[u].apply(this,n):e;++u<r;)i=t[u].call(this,i);return i}})}function Ju(n,t,r,e,u,i,o,f,c,a){function l(){for(var y=arguments.length,d=el(y),b=y;b--;)d[b]=arguments[b];if(_)var w=di(l),m=L(d,w);if(e&&(d=Lu(d,e,u,_)),i&&(d=Cu(d,i,o,_)),\ny-=m,_&&y<a){return ui(n,t,Ju,l.placeholder,r,d,F(d,w),f,c,a-y)}var x=h?r:this,j=p?x[n]:n;return y=d.length,f?d=Vi(d,f):v&&y>1&&d.reverse(),s&&c<y&&(d.length=c),this&&this!==Xr&&this instanceof l&&(j=g||Ku(j)),j.apply(x,d)}var s=t&dn,h=t&sn,p=t&hn,_=t&(_n|vn),v=t&wn,g=p?Y:Ku(n);return l}function Yu(n,t){return function(r,e){return Ae(r,n,t(e),{})}}function Qu(n,t){return function(r,e){var u;if(r===Y&&e===Y)return t;if(r!==Y&&(u=r),e!==Y){if(u===Y)return e;\"string\"==typeof r||\"string\"==typeof e?(r=pu(r),\ne=pu(e)):(r=hu(r),e=hu(e)),u=n(r,e)}return u}}function Xu(t){return _i(function(r){return r=c(r,R(bi())),ru(function(e){var u=this;return t(r,function(t){return n(t,u,e)})})})}function ni(n,t){t=t===Y?\" \":pu(t);var r=t.length;if(r<2)return r?tu(t,n):t;var e=tu(t,Dl(n/K(t)));return B(t)?Au(V(e),0,n).join(\"\"):e.slice(0,n)}function ti(t,r,e,u){function i(){for(var r=-1,c=arguments.length,a=-1,l=u.length,s=el(l+c),h=this&&this!==Xr&&this instanceof i?f:t;++a<l;)s[a]=u[a];for(;c--;)s[a++]=arguments[++r];\nreturn n(h,o?e:this,s)}var o=r&sn,f=Ku(t);return i}function ri(n){return function(t,r,e){return e&&\"number\"!=typeof e&&Li(t,r,e)&&(r=e=Y),t=xc(t),r===Y?(r=t,t=0):r=xc(r),e=e===Y?t<r?1:-1:xc(e),nu(t,r,e,n)}}function ei(n){return function(t,r){return\"string\"==typeof t&&\"string\"==typeof r||(t=kc(t),r=kc(r)),n(t,r)}}function ui(n,t,r,e,u,i,o,f,c,a){var l=t&_n,s=l?o:Y,h=l?Y:o,p=l?i:Y,_=l?Y:i;t|=l?gn:yn,t&=~(l?yn:gn),t&pn||(t&=~(sn|hn));var v=[n,t,u,p,s,_,h,f,c,a],g=r.apply(Y,v);return Bi(n)&&zs(g,v),g.placeholder=e,\nHi(g,n,t)}function ii(n){var t=fl[n];return function(n,r){if(n=kc(n),r=null==r?0:Vl(jc(r),292),r&&Pl(n)){var e=(Rc(n)+\"e\").split(\"e\");return e=(Rc(t(e[0]+\"e\"+(+e[1]+r)))+\"e\").split(\"e\"),+(e[0]+\"e\"+(+e[1]-r))}return t(n)}}function oi(n){return function(t){var r=Is(t);return r==Zn?D(t):r==Qn?P(t):I(t,n(t))}}function fi(n,t,r,e,u,i,o,f){var c=t&hn;if(!c&&\"function\"!=typeof n)throw new sl(tn);var a=e?e.length:0;if(a||(t&=~(gn|yn),e=u=Y),o=o===Y?o:Kl(jc(o),0),f=f===Y?f:jc(f),a-=u?u.length:0,t&yn){var l=e,s=u;\ne=u=Y}var h=c?Y:As(n),p=[n,t,r,e,u,l,s,i,o,f];if(h&&Ni(p,h),n=p[0],t=p[1],r=p[2],e=p[3],u=p[4],f=p[9]=p[9]===Y?c?0:n.length:Kl(p[9]-a,0),!f&&t&(_n|vn)&&(t&=~(_n|vn)),t&&t!=sn)_=t==_n||t==vn?Vu(n,t,f):t!=gn&&t!=(sn|gn)||u.length?Ju.apply(Y,p):ti(n,t,r,e);else var _=Pu(n,t,r);return Hi((h?bs:zs)(_,p),n,t)}function ci(n,t,r,e){return n===Y||Kf(n,_l[r])&&!yl.call(e,r)?t:n}function ai(n,t,r,e,u,i){return ic(n)&&ic(t)&&(i.set(t,n),qe(n,t,Y,ai,i),i.delete(t)),n}function li(n){return _c(n)?Y:n}function si(n,t,r,e,u,i){\nvar o=r&an,f=n.length,c=t.length;if(f!=c&&!(o&&c>f))return!1;var a=i.get(n),l=i.get(t);if(a&&l)return a==t&&l==n;var s=-1,p=!0,_=r&ln?new vr:Y;for(i.set(n,t),i.set(t,n);++s<f;){var v=n[s],g=t[s];if(e)var y=o?e(g,v,s,t,n,i):e(v,g,s,n,t,i);if(y!==Y){if(y)continue;p=!1;break}if(_){if(!h(t,function(n,t){if(!E(_,t)&&(v===n||u(v,n,r,e,i)))return _.push(t)})){p=!1;break}}else if(v!==g&&!u(v,g,r,e,i)){p=!1;break}}return i.delete(n),i.delete(t),p}function hi(n,t,r,e,u,i,o){switch(r){case it:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;\nn=n.buffer,t=t.buffer;case ut:return!(n.byteLength!=t.byteLength||!i(new Ol(n),new Ol(t)));case Dn:case Mn:case Kn:return Kf(+n,+t);case Nn:return n.name==t.name&&n.message==t.message;case Yn:case Xn:return n==t+\"\";case Zn:var f=D;case Qn:var c=e&an;if(f||(f=N),n.size!=t.size&&!c)return!1;var a=o.get(n);if(a)return a==t;e|=ln,o.set(n,t);var l=si(f(n),f(t),e,u,i,o);return o.delete(n),l;case nt:if(hs)return hs.call(n)==hs.call(t)}return!1}function pi(n,t,r,e,u,i){var o=r&an,f=vi(n),c=f.length;if(c!=vi(t).length&&!o)return!1;\nfor(var a=c;a--;){var l=f[a];if(!(o?l in t:yl.call(t,l)))return!1}var s=i.get(n),h=i.get(t);if(s&&h)return s==t&&h==n;var p=!0;i.set(n,t),i.set(t,n);for(var _=o;++a<c;){l=f[a];var v=n[l],g=t[l];if(e)var y=o?e(g,v,l,t,n,i):e(v,g,l,n,t,i);if(!(y===Y?v===g||u(v,g,r,e,i):y)){p=!1;break}_||(_=\"constructor\"==l)}if(p&&!_){var d=n.constructor,b=t.constructor;d!=b&&\"constructor\"in n&&\"constructor\"in t&&!(\"function\"==typeof d&&d instanceof d&&\"function\"==typeof b&&b instanceof b)&&(p=!1)}return i.delete(n),\ni.delete(t),p}function _i(n){return Ss(Zi(n,Y,ho),n+\"\")}function vi(n){return ye(n,Fc,ks)}function gi(n){return ye(n,Nc,Os)}function yi(n){for(var t=n.name+\"\",r=is[t],e=yl.call(is,t)?r.length:0;e--;){var u=r[e],i=u.func;if(null==i||i==n)return u.name}return t}function di(n){return(yl.call(q,\"placeholder\")?q:n).placeholder}function bi(){var n=q.iteratee||Wa;return n=n===Wa?Te:n,arguments.length?n(arguments[0],arguments[1]):n}function wi(n,t){var r=n.__data__;return Ui(t)?r[\"string\"==typeof t?\"string\":\"hash\"]:r.map;\n}function mi(n){for(var t=Fc(n),r=t.length;r--;){var e=t[r],u=n[e];t[r]=[e,u,Di(u)]}return t}function xi(n,t){var r=U(n,t);return Le(r)?r:Y}function ji(n){var t=yl.call(n,Cl),r=n[Cl];try{n[Cl]=Y;var e=!0}catch(n){}var u=wl.call(n);return e&&(t?n[Cl]=r:delete n[Cl]),u}function Ai(n,t,r){for(var e=-1,u=r.length;++e<u;){var i=r[e],o=i.size;switch(i.type){case\"drop\":n+=o;break;case\"dropRight\":t-=o;break;case\"take\":t=Vl(t,n+o);break;case\"takeRight\":n=Kl(n,t-o)}}return{start:n,end:t}}function ki(n){var t=n.match(Ct);\nreturn t?t[1].split(Ut):[]}function Oi(n,t,r){t=ju(t,n);for(var e=-1,u=t.length,i=!1;++e<u;){var o=Qi(t[e]);if(!(i=null!=n&&r(n,o)))break;n=n[o]}return i||++e!=u?i:(u=null==n?0:n.length,!!u&&uc(u)&&Wi(o,u)&&(yh(n)||gh(n)))}function Ii(n){var t=n.length,r=new n.constructor(t);return t&&\"string\"==typeof n[0]&&yl.call(n,\"index\")&&(r.index=n.index,r.input=n.input),r}function Ri(n){return\"function\"!=typeof n.constructor||$i(n)?{}:_s(Rl(n))}function zi(n,t,r){var e=n.constructor;switch(t){case ut:return Ou(n);\ncase Dn:case Mn:return new e(+n);case it:return Iu(n,r);case ot:case ft:case ct:case at:case lt:case st:case ht:case pt:case _t:return Eu(n,r);case Zn:return new e;case Kn:case Xn:return new e(n);case Yn:return Ru(n);case Qn:return new e;case nt:return zu(n)}}function Ei(n,t){var r=t.length;if(!r)return n;var e=r-1;return t[e]=(r>1?\"& \":\"\")+t[e],t=t.join(r>2?\", \":\" \"),n.replace(Lt,\"{\\n/* [wrapped with \"+t+\"] */\\n\")}function Si(n){return yh(n)||gh(n)||!!(Wl&&n&&n[Wl])}function Wi(n,t){var r=typeof n;\nreturn t=null==t?zn:t,!!t&&(\"number\"==r||\"symbol\"!=r&&qt.test(n))&&n>-1&&n%1==0&&n<t}function Li(n,t,r){if(!ic(r))return!1;var e=typeof t;return!!(\"number\"==e?Vf(r)&&Wi(t,r.length):\"string\"==e&&t in r)&&Kf(r[t],n)}function Ci(n,t){if(yh(n))return!1;var r=typeof n;return!(\"number\"!=r&&\"symbol\"!=r&&\"boolean\"!=r&&null!=n&&!yc(n))||(Ot.test(n)||!kt.test(n)||null!=t&&n in cl(t))}function Ui(n){var t=typeof n;return\"string\"==t||\"number\"==t||\"symbol\"==t||\"boolean\"==t?\"__proto__\"!==n:null===n}function Bi(n){\nvar t=yi(n),r=q[t];if(\"function\"!=typeof r||!(t in Bt.prototype))return!1;if(n===r)return!0;var e=As(r);return!!e&&n===e[0]}function Ti(n){return!!bl&&bl in n}function $i(n){var t=n&&n.constructor;return n===(\"function\"==typeof t&&t.prototype||_l)}function Di(n){return n===n&&!ic(n)}function Mi(n,t){return function(r){return null!=r&&(r[n]===t&&(t!==Y||n in cl(r)))}}function Fi(n){var t=Wf(n,function(n){return r.size===en&&r.clear(),n}),r=t.cache;return t}function Ni(n,t){var r=n[1],e=t[1],u=r|e,i=u<(sn|hn|dn),o=e==dn&&r==_n||e==dn&&r==bn&&n[7].length<=t[8]||e==(dn|bn)&&t[7].length<=t[8]&&r==_n;\nif(!i&&!o)return n;e&sn&&(n[2]=t[2],u|=r&sn?0:pn);var f=t[3];if(f){var c=n[3];n[3]=c?Lu(c,f,t[4]):f,n[4]=c?F(n[3],un):t[4]}return f=t[5],f&&(c=n[5],n[5]=c?Cu(c,f,t[6]):f,n[6]=c?F(n[5],un):t[6]),f=t[7],f&&(n[7]=f),e&dn&&(n[8]=null==n[8]?t[8]:Vl(n[8],t[8])),null==n[9]&&(n[9]=t[9]),n[0]=t[0],n[1]=u,n}function Pi(n){var t=[];if(null!=n)for(var r in cl(n))t.push(r);return t}function qi(n){return wl.call(n)}function Zi(t,r,e){return r=Kl(r===Y?t.length-1:r,0),function(){for(var u=arguments,i=-1,o=Kl(u.length-r,0),f=el(o);++i<o;)f[i]=u[r+i];\ni=-1;for(var c=el(r+1);++i<r;)c[i]=u[i];return c[r]=e(f),n(t,this,c)}}function Ki(n,t){return t.length<2?n:ve(n,fu(t,0,-1))}function Vi(n,t){for(var r=n.length,e=Vl(t.length,r),u=Uu(n);e--;){var i=t[e];n[e]=Wi(i,r)?u[i]:Y}return n}function Gi(n,t){if((\"constructor\"!==t||\"function\"!=typeof n[t])&&\"__proto__\"!=t)return n[t]}function Hi(n,t,r){var e=t+\"\";return Ss(n,Ei(e,no(ki(e),r)))}function Ji(n){var t=0,r=0;return function(){var e=Gl(),u=An-(e-r);if(r=e,u>0){if(++t>=jn)return arguments[0]}else t=0;\nreturn n.apply(Y,arguments)}}function Yi(n,t){var r=-1,e=n.length,u=e-1;for(t=t===Y?e:t;++r<t;){var i=Xe(r,u),o=n[i];n[i]=n[r],n[r]=o}return n.length=t,n}function Qi(n){if(\"string\"==typeof n||yc(n))return n;var t=n+\"\";return\"0\"==t&&1/n==-Rn?\"-0\":t}function Xi(n){if(null!=n){try{return gl.call(n)}catch(n){}try{return n+\"\"}catch(n){}}return\"\"}function no(n,t){return r(Un,function(r){var e=\"_.\"+r[0];t&r[1]&&!o(n,e)&&n.push(e)}),n.sort()}function to(n){if(n instanceof Bt)return n.clone();var t=new H(n.__wrapped__,n.__chain__);\nreturn t.__actions__=Uu(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}function ro(n,t,r){t=(r?Li(n,t,r):t===Y)?1:Kl(jc(t),0);var e=null==n?0:n.length;if(!e||t<1)return[];for(var u=0,i=0,o=el(Dl(e/t));u<e;)o[i++]=fu(n,u,u+=t);return o}function eo(n){for(var t=-1,r=null==n?0:n.length,e=0,u=[];++t<r;){var i=n[t];i&&(u[e++]=i)}return u}function uo(){var n=arguments.length;if(!n)return[];for(var t=el(n-1),r=arguments[0],e=n;e--;)t[e-1]=arguments[e];return a(yh(r)?Uu(r):[r],te(t,1));\n}function io(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===Y?1:jc(t),fu(n,t<0?0:t,e)):[]}function oo(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===Y?1:jc(t),t=e-t,fu(n,0,t<0?0:t)):[]}function fo(n,t){return n&&n.length?yu(n,bi(t,3),!0,!0):[]}function co(n,t){return n&&n.length?yu(n,bi(t,3),!0):[]}function ao(n,t,r,e){var u=null==n?0:n.length;return u?(r&&\"number\"!=typeof r&&Li(n,t,r)&&(r=0,e=u),Qr(n,t,r,e)):[]}function lo(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=null==r?0:jc(r);\nreturn u<0&&(u=Kl(e+u,0)),g(n,bi(t,3),u)}function so(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e-1;return r!==Y&&(u=jc(r),u=r<0?Kl(e+u,0):Vl(u,e-1)),g(n,bi(t,3),u,!0)}function ho(n){return(null==n?0:n.length)?te(n,1):[]}function po(n){return(null==n?0:n.length)?te(n,Rn):[]}function _o(n,t){return(null==n?0:n.length)?(t=t===Y?1:jc(t),te(n,t)):[]}function vo(n){for(var t=-1,r=null==n?0:n.length,e={};++t<r;){var u=n[t];e[u[0]]=u[1]}return e}function go(n){return n&&n.length?n[0]:Y}function yo(n,t,r){\nvar e=null==n?0:n.length;if(!e)return-1;var u=null==r?0:jc(r);return u<0&&(u=Kl(e+u,0)),y(n,t,u)}function bo(n){return(null==n?0:n.length)?fu(n,0,-1):[]}function wo(n,t){return null==n?\"\":ql.call(n,t)}function mo(n){var t=null==n?0:n.length;return t?n[t-1]:Y}function xo(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e;return r!==Y&&(u=jc(r),u=u<0?Kl(e+u,0):Vl(u,e-1)),t===t?Z(n,t,u):g(n,b,u,!0)}function jo(n,t){return n&&n.length?Ke(n,jc(t)):Y}function Ao(n,t){return n&&n.length&&t&&t.length?Ye(n,t):n;\n}function ko(n,t,r){return n&&n.length&&t&&t.length?Ye(n,t,bi(r,2)):n}function Oo(n,t,r){return n&&n.length&&t&&t.length?Ye(n,t,Y,r):n}function Io(n,t){var r=[];if(!n||!n.length)return r;var e=-1,u=[],i=n.length;for(t=bi(t,3);++e<i;){var o=n[e];t(o,e,n)&&(r.push(o),u.push(e))}return Qe(n,u),r}function Ro(n){return null==n?n:Yl.call(n)}function zo(n,t,r){var e=null==n?0:n.length;return e?(r&&\"number\"!=typeof r&&Li(n,t,r)?(t=0,r=e):(t=null==t?0:jc(t),r=r===Y?e:jc(r)),fu(n,t,r)):[]}function Eo(n,t){\nreturn au(n,t)}function So(n,t,r){return lu(n,t,bi(r,2))}function Wo(n,t){var r=null==n?0:n.length;if(r){var e=au(n,t);if(e<r&&Kf(n[e],t))return e}return-1}function Lo(n,t){return au(n,t,!0)}function Co(n,t,r){return lu(n,t,bi(r,2),!0)}function Uo(n,t){if(null==n?0:n.length){var r=au(n,t,!0)-1;if(Kf(n[r],t))return r}return-1}function Bo(n){return n&&n.length?su(n):[]}function To(n,t){return n&&n.length?su(n,bi(t,2)):[]}function $o(n){var t=null==n?0:n.length;return t?fu(n,1,t):[]}function Do(n,t,r){\nreturn n&&n.length?(t=r||t===Y?1:jc(t),fu(n,0,t<0?0:t)):[]}function Mo(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===Y?1:jc(t),t=e-t,fu(n,t<0?0:t,e)):[]}function Fo(n,t){return n&&n.length?yu(n,bi(t,3),!1,!0):[]}function No(n,t){return n&&n.length?yu(n,bi(t,3)):[]}function Po(n){return n&&n.length?_u(n):[]}function qo(n,t){return n&&n.length?_u(n,bi(t,2)):[]}function Zo(n,t){return t=\"function\"==typeof t?t:Y,n&&n.length?_u(n,Y,t):[]}function Ko(n){if(!n||!n.length)return[];var t=0;return n=i(n,function(n){\nif(Gf(n))return t=Kl(n.length,t),!0}),O(t,function(t){return c(n,m(t))})}function Vo(t,r){if(!t||!t.length)return[];var e=Ko(t);return null==r?e:c(e,function(t){return n(r,Y,t)})}function Go(n,t){return wu(n||[],t||[],zr)}function Ho(n,t){return wu(n||[],t||[],iu)}function Jo(n){var t=q(n);return t.__chain__=!0,t}function Yo(n,t){return t(n),n}function Qo(n,t){return t(n)}function Xo(){return Jo(this)}function nf(){return new H(this.value(),this.__chain__)}function tf(){this.__values__===Y&&(this.__values__=mc(this.value()));\nvar n=this.__index__>=this.__values__.length;return{done:n,value:n?Y:this.__values__[this.__index__++]}}function rf(){return this}function ef(n){for(var t,r=this;r instanceof G;){var e=to(r);e.__index__=0,e.__values__=Y,t?u.__wrapped__=e:t=e;var u=e;r=r.__wrapped__}return u.__wrapped__=n,t}function uf(){var n=this.__wrapped__;if(n instanceof Bt){var t=n;return this.__actions__.length&&(t=new Bt(this)),t=t.reverse(),t.__actions__.push({func:Qo,args:[Ro],thisArg:Y}),new H(t,this.__chain__)}return this.thru(Ro);\n}function of(){return du(this.__wrapped__,this.__actions__)}function ff(n,t,r){var e=yh(n)?u:Gr;return r&&Li(n,t,r)&&(t=Y),e(n,bi(t,3))}function cf(n,t){return(yh(n)?i:ne)(n,bi(t,3))}function af(n,t){return te(vf(n,t),1)}function lf(n,t){return te(vf(n,t),Rn)}function sf(n,t,r){return r=r===Y?1:jc(r),te(vf(n,t),r)}function hf(n,t){return(yh(n)?r:vs)(n,bi(t,3))}function pf(n,t){return(yh(n)?e:gs)(n,bi(t,3))}function _f(n,t,r,e){n=Vf(n)?n:na(n),r=r&&!e?jc(r):0;var u=n.length;return r<0&&(r=Kl(u+r,0)),\ngc(n)?r<=u&&n.indexOf(t,r)>-1:!!u&&y(n,t,r)>-1}function vf(n,t){return(yh(n)?c:Fe)(n,bi(t,3))}function gf(n,t,r,e){return null==n?[]:(yh(t)||(t=null==t?[]:[t]),r=e?Y:r,yh(r)||(r=null==r?[]:[r]),Ve(n,t,r))}function yf(n,t,r){var e=yh(n)?l:j,u=arguments.length<3;return e(n,bi(t,4),r,u,vs)}function df(n,t,r){var e=yh(n)?s:j,u=arguments.length<3;return e(n,bi(t,4),r,u,gs)}function bf(n,t){return(yh(n)?i:ne)(n,Lf(bi(t,3)))}function wf(n){return(yh(n)?kr:eu)(n)}function mf(n,t,r){return t=(r?Li(n,t,r):t===Y)?1:jc(t),\n(yh(n)?Or:uu)(n,t)}function xf(n){return(yh(n)?Ir:ou)(n)}function jf(n){if(null==n)return 0;if(Vf(n))return gc(n)?K(n):n.length;var t=Is(n);return t==Zn||t==Qn?n.size:$e(n).length}function Af(n,t,r){var e=yh(n)?h:cu;return r&&Li(n,t,r)&&(t=Y),e(n,bi(t,3))}function kf(n,t){if(\"function\"!=typeof t)throw new sl(tn);return n=jc(n),function(){if(--n<1)return t.apply(this,arguments)}}function Of(n,t,r){return t=r?Y:t,t=n&&null==t?n.length:t,fi(n,dn,Y,Y,Y,Y,t)}function If(n,t){var r;if(\"function\"!=typeof t)throw new sl(tn);\nreturn n=jc(n),function(){return--n>0&&(r=t.apply(this,arguments)),n<=1&&(t=Y),r}}function Rf(n,t,r){t=r?Y:t;var e=fi(n,_n,Y,Y,Y,Y,Y,t);return e.placeholder=Rf.placeholder,e}function zf(n,t,r){t=r?Y:t;var e=fi(n,vn,Y,Y,Y,Y,Y,t);return e.placeholder=zf.placeholder,e}function Ef(n,t,r){function e(t){var r=h,e=p;return h=p=Y,d=t,v=n.apply(e,r)}function u(n){return d=n,g=Es(f,t),b?e(n):v}function i(n){var r=n-y,e=n-d,u=t-r;return w?Vl(u,_-e):u}function o(n){var r=n-y,e=n-d;return y===Y||r>=t||r<0||w&&e>=_;\n}function f(){var n=ih();return o(n)?c(n):(g=Es(f,i(n)),Y)}function c(n){return g=Y,m&&h?e(n):(h=p=Y,v)}function a(){g!==Y&&xs(g),d=0,h=y=p=g=Y}function l(){return g===Y?v:c(ih())}function s(){var n=ih(),r=o(n);if(h=arguments,p=this,y=n,r){if(g===Y)return u(y);if(w)return xs(g),g=Es(f,t),e(y)}return g===Y&&(g=Es(f,t)),v}var h,p,_,v,g,y,d=0,b=!1,w=!1,m=!0;if(\"function\"!=typeof n)throw new sl(tn);return t=kc(t)||0,ic(r)&&(b=!!r.leading,w=\"maxWait\"in r,_=w?Kl(kc(r.maxWait)||0,t):_,m=\"trailing\"in r?!!r.trailing:m),\ns.cancel=a,s.flush=l,s}function Sf(n){return fi(n,wn)}function Wf(n,t){if(\"function\"!=typeof n||null!=t&&\"function\"!=typeof t)throw new sl(tn);var r=function(){var e=arguments,u=t?t.apply(this,e):e[0],i=r.cache;if(i.has(u))return i.get(u);var o=n.apply(this,e);return r.cache=i.set(u,o)||i,o};return r.cache=new(Wf.Cache||ar),r}function Lf(n){if(\"function\"!=typeof n)throw new sl(tn);return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:\nreturn!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}function Cf(n){return If(2,n)}function Uf(n,t){if(\"function\"!=typeof n)throw new sl(tn);return t=t===Y?t:jc(t),ru(n,t)}function Bf(t,r){if(\"function\"!=typeof t)throw new sl(tn);return r=null==r?0:Kl(jc(r),0),ru(function(e){var u=e[r],i=Au(e,0,r);return u&&a(i,u),n(t,this,i)})}function Tf(n,t,r){var e=!0,u=!0;if(\"function\"!=typeof n)throw new sl(tn);return ic(r)&&(e=\"leading\"in r?!!r.leading:e,u=\"trailing\"in r?!!r.trailing:u),\nEf(n,t,{leading:e,maxWait:t,trailing:u})}function $f(n){return Of(n,1)}function Df(n,t){return sh(xu(t),n)}function Mf(){if(!arguments.length)return[];var n=arguments[0];return yh(n)?n:[n]}function Ff(n){return Dr(n,cn)}function Nf(n,t){return t=\"function\"==typeof t?t:Y,Dr(n,cn,t)}function Pf(n){return Dr(n,on|cn)}function qf(n,t){return t=\"function\"==typeof t?t:Y,Dr(n,on|cn,t)}function Zf(n,t){return null==t||Zr(n,t,Fc(t))}function Kf(n,t){return n===t||n!==n&&t!==t}function Vf(n){return null!=n&&uc(n.length)&&!rc(n);\n}function Gf(n){return oc(n)&&Vf(n)}function Hf(n){return n===!0||n===!1||oc(n)&&de(n)==Dn}function Jf(n){return oc(n)&&1===n.nodeType&&!_c(n)}function Yf(n){if(null==n)return!0;if(Vf(n)&&(yh(n)||\"string\"==typeof n||\"function\"==typeof n.splice||bh(n)||Ah(n)||gh(n)))return!n.length;var t=Is(n);if(t==Zn||t==Qn)return!n.size;if($i(n))return!$e(n).length;for(var r in n)if(yl.call(n,r))return!1;return!0}function Qf(n,t){return ze(n,t)}function Xf(n,t,r){r=\"function\"==typeof r?r:Y;var e=r?r(n,t):Y;return e===Y?ze(n,t,Y,r):!!e;\n}function nc(n){if(!oc(n))return!1;var t=de(n);return t==Nn||t==Fn||\"string\"==typeof n.message&&\"string\"==typeof n.name&&!_c(n)}function tc(n){return\"number\"==typeof n&&Pl(n)}function rc(n){if(!ic(n))return!1;var t=de(n);return t==Pn||t==qn||t==$n||t==Jn}function ec(n){return\"number\"==typeof n&&n==jc(n)}function uc(n){return\"number\"==typeof n&&n>-1&&n%1==0&&n<=zn}function ic(n){var t=typeof n;return null!=n&&(\"object\"==t||\"function\"==t)}function oc(n){return null!=n&&\"object\"==typeof n}function fc(n,t){\nreturn n===t||We(n,t,mi(t))}function cc(n,t,r){return r=\"function\"==typeof r?r:Y,We(n,t,mi(t),r)}function ac(n){return pc(n)&&n!=+n}function lc(n){if(Rs(n))throw new il(nn);return Le(n)}function sc(n){return null===n}function hc(n){return null==n}function pc(n){return\"number\"==typeof n||oc(n)&&de(n)==Kn}function _c(n){if(!oc(n)||de(n)!=Gn)return!1;var t=Rl(n);if(null===t)return!0;var r=yl.call(t,\"constructor\")&&t.constructor;return\"function\"==typeof r&&r instanceof r&&gl.call(r)==ml}function vc(n){\nreturn ec(n)&&n>=-zn&&n<=zn}function gc(n){return\"string\"==typeof n||!yh(n)&&oc(n)&&de(n)==Xn}function yc(n){return\"symbol\"==typeof n||oc(n)&&de(n)==nt}function dc(n){return n===Y}function bc(n){return oc(n)&&Is(n)==rt}function wc(n){return oc(n)&&de(n)==et}function mc(n){if(!n)return[];if(Vf(n))return gc(n)?V(n):Uu(n);if(Ll&&n[Ll])return $(n[Ll]());var t=Is(n);return(t==Zn?D:t==Qn?N:na)(n)}function xc(n){if(!n)return 0===n?n:0;if(n=kc(n),n===Rn||n===-Rn){return(n<0?-1:1)*En}return n===n?n:0}function jc(n){\nvar t=xc(n),r=t%1;return t===t?r?t-r:t:0}function Ac(n){return n?$r(jc(n),0,Wn):0}function kc(n){if(\"number\"==typeof n)return n;if(yc(n))return Sn;if(ic(n)){var t=\"function\"==typeof n.valueOf?n.valueOf():n;n=ic(t)?t+\"\":t}if(\"string\"!=typeof n)return 0===n?n:+n;n=n.replace(Et,\"\");var r=Ft.test(n);return r||Pt.test(n)?Jr(n.slice(2),r?2:8):Mt.test(n)?Sn:+n}function Oc(n){return Bu(n,Nc(n))}function Ic(n){return n?$r(jc(n),-zn,zn):0===n?n:0}function Rc(n){return null==n?\"\":pu(n)}function zc(n,t){var r=_s(n);\nreturn null==t?r:Wr(r,t)}function Ec(n,t){return v(n,bi(t,3),ee)}function Sc(n,t){return v(n,bi(t,3),ue)}function Wc(n,t){return null==n?n:ys(n,bi(t,3),Nc)}function Lc(n,t){return null==n?n:ds(n,bi(t,3),Nc)}function Cc(n,t){return n&&ee(n,bi(t,3))}function Uc(n,t){return n&&ue(n,bi(t,3))}function Bc(n){return null==n?[]:se(n,Fc(n))}function Tc(n){return null==n?[]:se(n,Nc(n))}function $c(n,t,r){var e=null==n?Y:ve(n,t);return e===Y?r:e}function Dc(n,t){return null!=n&&Oi(n,t,we)}function Mc(n,t){return null!=n&&Oi(n,t,me);\n}function Fc(n){return Vf(n)?Ar(n):$e(n)}function Nc(n){return Vf(n)?Ar(n,!0):De(n)}function Pc(n,t){var r={};return t=bi(t,3),ee(n,function(n,e,u){Cr(r,t(n,e,u),n)}),r}function qc(n,t){var r={};return t=bi(t,3),ee(n,function(n,e,u){Cr(r,e,t(n,e,u))}),r}function Zc(n,t){return Kc(n,Lf(bi(t)))}function Kc(n,t){if(null==n)return{};var r=c(gi(n),function(n){return[n]});return t=bi(t),He(n,r,function(n,r){return t(n,r[0])})}function Vc(n,t,r){t=ju(t,n);var e=-1,u=t.length;for(u||(u=1,n=Y);++e<u;){var i=null==n?Y:n[Qi(t[e])];\ni===Y&&(e=u,i=r),n=rc(i)?i.call(n):i}return n}function Gc(n,t,r){return null==n?n:iu(n,t,r)}function Hc(n,t,r,e){return e=\"function\"==typeof e?e:Y,null==n?n:iu(n,t,r,e)}function Jc(n,t,e){var u=yh(n),i=u||bh(n)||Ah(n);if(t=bi(t,4),null==e){var o=n&&n.constructor;e=i?u?new o:[]:ic(n)&&rc(o)?_s(Rl(n)):{}}return(i?r:ee)(n,function(n,r,u){return t(e,n,r,u)}),e}function Yc(n,t){return null==n||vu(n,t)}function Qc(n,t,r){return null==n?n:gu(n,t,xu(r))}function Xc(n,t,r,e){return e=\"function\"==typeof e?e:Y,\nnull==n?n:gu(n,t,xu(r),e)}function na(n){return null==n?[]:z(n,Fc(n))}function ta(n){return null==n?[]:z(n,Nc(n))}function ra(n,t,r){return r===Y&&(r=t,t=Y),r!==Y&&(r=kc(r),r=r===r?r:0),t!==Y&&(t=kc(t),t=t===t?t:0),$r(kc(n),t,r)}function ea(n,t,r){return t=xc(t),r===Y?(r=t,t=0):r=xc(r),n=kc(n),xe(n,t,r)}function ua(n,t,r){if(r&&\"boolean\"!=typeof r&&Li(n,t,r)&&(t=r=Y),r===Y&&(\"boolean\"==typeof t?(r=t,t=Y):\"boolean\"==typeof n&&(r=n,n=Y)),n===Y&&t===Y?(n=0,t=1):(n=xc(n),t===Y?(t=n,n=0):t=xc(t)),n>t){\nvar e=n;n=t,t=e}if(r||n%1||t%1){var u=Jl();return Vl(n+u*(t-n+Hr(\"1e-\"+((u+\"\").length-1))),t)}return Xe(n,t)}function ia(n){return Jh(Rc(n).toLowerCase())}function oa(n){return n=Rc(n),n&&n.replace(Zt,he).replace(Br,\"\")}function fa(n,t,r){n=Rc(n),t=pu(t);var e=n.length;r=r===Y?e:$r(jc(r),0,e);var u=r;return r-=t.length,r>=0&&n.slice(r,u)==t}function ca(n){return n=Rc(n),n&&mt.test(n)?n.replace(bt,pe):n}function aa(n){return n=Rc(n),n&&zt.test(n)?n.replace(Rt,\"\\\\$&\"):n}function la(n,t,r){n=Rc(n),t=jc(t);\nvar e=t?K(n):0;if(!t||e>=t)return n;var u=(t-e)/2;return ni(Ml(u),r)+n+ni(Dl(u),r)}function sa(n,t,r){n=Rc(n),t=jc(t);var e=t?K(n):0;return t&&e<t?n+ni(t-e,r):n}function ha(n,t,r){n=Rc(n),t=jc(t);var e=t?K(n):0;return t&&e<t?ni(t-e,r)+n:n}function pa(n,t,r){return r||null==t?t=0:t&&(t=+t),Hl(Rc(n).replace(St,\"\"),t||0)}function _a(n,t,r){return t=(r?Li(n,t,r):t===Y)?1:jc(t),tu(Rc(n),t)}function va(){var n=arguments,t=Rc(n[0]);return n.length<3?t:t.replace(n[1],n[2])}function ga(n,t,r){return r&&\"number\"!=typeof r&&Li(n,t,r)&&(t=r=Y),\n(r=r===Y?Wn:r>>>0)?(n=Rc(n),n&&(\"string\"==typeof t||null!=t&&!xh(t))&&(t=pu(t),!t&&B(n))?Au(V(n),0,r):n.split(t,r)):[]}function ya(n,t,r){return n=Rc(n),r=null==r?0:$r(jc(r),0,n.length),t=pu(t),n.slice(r,r+t.length)==t}function da(n,t,r){var e=q.templateSettings;r&&Li(n,t,r)&&(t=Y),n=Rc(n),t=zh({},t,e,ci);var u,i,o=zh({},t.imports,e.imports,ci),f=Fc(o),c=z(o,f),a=0,l=t.interpolate||Kt,s=\"__p += '\",h=al((t.escape||Kt).source+\"|\"+l.source+\"|\"+(l===At?$t:Kt).source+\"|\"+(t.evaluate||Kt).source+\"|$\",\"g\"),p=\"//# sourceURL=\"+(yl.call(t,\"sourceURL\")?(t.sourceURL+\"\").replace(/\\s/g,\" \"):\"lodash.templateSources[\"+ ++Nr+\"]\")+\"\\n\";\nn.replace(h,function(t,r,e,o,f,c){return e||(e=o),s+=n.slice(a,c).replace(Vt,C),r&&(u=!0,s+=\"' +\\n__e(\"+r+\") +\\n'\"),f&&(i=!0,s+=\"';\\n\"+f+\";\\n__p += '\"),e&&(s+=\"' +\\n((__t = (\"+e+\")) == null ? '' : __t) +\\n'\"),a=c+t.length,t}),s+=\"';\\n\";var _=yl.call(t,\"variable\")&&t.variable;_||(s=\"with (obj) {\\n\"+s+\"\\n}\\n\"),s=(i?s.replace(vt,\"\"):s).replace(gt,\"$1\").replace(yt,\"$1;\"),s=\"function(\"+(_||\"obj\")+\") {\\n\"+(_?\"\":\"obj || (obj = {});\\n\")+\"var __t, __p = ''\"+(u?\", __e = _.escape\":\"\")+(i?\", __j = Array.prototype.join;\\nfunction print() { __p += __j.call(arguments, '') }\\n\":\";\\n\")+s+\"return __p\\n}\";\nvar v=Yh(function(){return ol(f,p+\"return \"+s).apply(Y,c)});if(v.source=s,nc(v))throw v;return v}function ba(n){return Rc(n).toLowerCase()}function wa(n){return Rc(n).toUpperCase()}function ma(n,t,r){if(n=Rc(n),n&&(r||t===Y))return n.replace(Et,\"\");if(!n||!(t=pu(t)))return n;var e=V(n),u=V(t);return Au(e,S(e,u),W(e,u)+1).join(\"\")}function xa(n,t,r){if(n=Rc(n),n&&(r||t===Y))return n.replace(Wt,\"\");if(!n||!(t=pu(t)))return n;var e=V(n);return Au(e,0,W(e,V(t))+1).join(\"\")}function ja(n,t,r){if(n=Rc(n),\nn&&(r||t===Y))return n.replace(St,\"\");if(!n||!(t=pu(t)))return n;var e=V(n);return Au(e,S(e,V(t))).join(\"\")}function Aa(n,t){var r=mn,e=xn;if(ic(t)){var u=\"separator\"in t?t.separator:u;r=\"length\"in t?jc(t.length):r,e=\"omission\"in t?pu(t.omission):e}n=Rc(n);var i=n.length;if(B(n)){var o=V(n);i=o.length}if(r>=i)return n;var f=r-K(e);if(f<1)return e;var c=o?Au(o,0,f).join(\"\"):n.slice(0,f);if(u===Y)return c+e;if(o&&(f+=c.length-f),xh(u)){if(n.slice(f).search(u)){var a,l=c;for(u.global||(u=al(u.source,Rc(Dt.exec(u))+\"g\")),\nu.lastIndex=0;a=u.exec(l);)var s=a.index;c=c.slice(0,s===Y?f:s)}}else if(n.indexOf(pu(u),f)!=f){var h=c.lastIndexOf(u);h>-1&&(c=c.slice(0,h))}return c+e}function ka(n){return n=Rc(n),n&&wt.test(n)?n.replace(dt,_e):n}function Oa(n,t,r){return n=Rc(n),t=r?Y:t,t===Y?T(n)?J(n):_(n):n.match(t)||[]}function Ia(t){var r=null==t?0:t.length,e=bi();return t=r?c(t,function(n){if(\"function\"!=typeof n[1])throw new sl(tn);return[e(n[0]),n[1]]}):[],ru(function(e){for(var u=-1;++u<r;){var i=t[u];if(n(i[0],this,e))return n(i[1],this,e);\n}})}function Ra(n){return Mr(Dr(n,on))}function za(n){return function(){return n}}function Ea(n,t){return null==n||n!==n?t:n}function Sa(n){return n}function Wa(n){return Te(\"function\"==typeof n?n:Dr(n,on))}function La(n){return Ne(Dr(n,on))}function Ca(n,t){return Pe(n,Dr(t,on))}function Ua(n,t,e){var u=Fc(t),i=se(t,u);null!=e||ic(t)&&(i.length||!u.length)||(e=t,t=n,n=this,i=se(t,Fc(t)));var o=!(ic(e)&&\"chain\"in e&&!e.chain),f=rc(n);return r(i,function(r){var e=t[r];n[r]=e,f&&(n.prototype[r]=function(){\nvar t=this.__chain__;if(o||t){var r=n(this.__wrapped__);return(r.__actions__=Uu(this.__actions__)).push({func:e,args:arguments,thisArg:n}),r.__chain__=t,r}return e.apply(n,a([this.value()],arguments))})}),n}function Ba(){return Xr._===this&&(Xr._=xl),this}function Ta(){}function $a(n){return n=jc(n),ru(function(t){return Ke(t,n)})}function Da(n){return Ci(n)?m(Qi(n)):Je(n)}function Ma(n){return function(t){return null==n?Y:ve(n,t)}}function Fa(){return[]}function Na(){return!1}function Pa(){return{};\n}function qa(){return\"\"}function Za(){return!0}function Ka(n,t){if(n=jc(n),n<1||n>zn)return[];var r=Wn,e=Vl(n,Wn);t=bi(t),n-=Wn;for(var u=O(e,t);++r<n;)t(r);return u}function Va(n){return yh(n)?c(n,Qi):yc(n)?[n]:Uu(Ws(Rc(n)))}function Ga(n){var t=++dl;return Rc(n)+t}function Ha(n){return n&&n.length?Yr(n,Sa,be):Y}function Ja(n,t){return n&&n.length?Yr(n,bi(t,2),be):Y}function Ya(n){return w(n,Sa)}function Qa(n,t){return w(n,bi(t,2))}function Xa(n){return n&&n.length?Yr(n,Sa,Me):Y}function nl(n,t){\nreturn n&&n.length?Yr(n,bi(t,2),Me):Y}function tl(n){return n&&n.length?k(n,Sa):0}function rl(n,t){return n&&n.length?k(n,bi(t,2)):0}x=null==x?Xr:ge.defaults(Xr.Object(),x,ge.pick(Xr,Fr));var el=x.Array,ul=x.Date,il=x.Error,ol=x.Function,fl=x.Math,cl=x.Object,al=x.RegExp,ll=x.String,sl=x.TypeError,hl=el.prototype,pl=ol.prototype,_l=cl.prototype,vl=x[\"__core-js_shared__\"],gl=pl.toString,yl=_l.hasOwnProperty,dl=0,bl=function(){var n=/[^.]+$/.exec(vl&&vl.keys&&vl.keys.IE_PROTO||\"\");return n?\"Symbol(src)_1.\"+n:\"\";\n}(),wl=_l.toString,ml=gl.call(cl),xl=Xr._,jl=al(\"^\"+gl.call(yl).replace(Rt,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\"),Al=re?x.Buffer:Y,kl=x.Symbol,Ol=x.Uint8Array,Il=Al?Al.allocUnsafe:Y,Rl=M(cl.getPrototypeOf,cl),zl=cl.create,El=_l.propertyIsEnumerable,Sl=hl.splice,Wl=kl?kl.isConcatSpreadable:Y,Ll=kl?kl.iterator:Y,Cl=kl?kl.toStringTag:Y,Ul=function(){try{var n=xi(cl,\"defineProperty\");return n({},\"\",{}),n}catch(n){}}(),Bl=x.clearTimeout!==Xr.clearTimeout&&x.clearTimeout,Tl=ul&&ul.now!==Xr.Date.now&&ul.now,$l=x.setTimeout!==Xr.setTimeout&&x.setTimeout,Dl=fl.ceil,Ml=fl.floor,Fl=cl.getOwnPropertySymbols,Nl=Al?Al.isBuffer:Y,Pl=x.isFinite,ql=hl.join,Zl=M(cl.keys,cl),Kl=fl.max,Vl=fl.min,Gl=ul.now,Hl=x.parseInt,Jl=fl.random,Yl=hl.reverse,Ql=xi(x,\"DataView\"),Xl=xi(x,\"Map\"),ns=xi(x,\"Promise\"),ts=xi(x,\"Set\"),rs=xi(x,\"WeakMap\"),es=xi(cl,\"create\"),us=rs&&new rs,is={},os=Xi(Ql),fs=Xi(Xl),cs=Xi(ns),as=Xi(ts),ls=Xi(rs),ss=kl?kl.prototype:Y,hs=ss?ss.valueOf:Y,ps=ss?ss.toString:Y,_s=function(){\nfunction n(){}return function(t){if(!ic(t))return{};if(zl)return zl(t);n.prototype=t;var r=new n;return n.prototype=Y,r}}();q.templateSettings={escape:xt,evaluate:jt,interpolate:At,variable:\"\",imports:{_:q}},q.prototype=G.prototype,q.prototype.constructor=q,H.prototype=_s(G.prototype),H.prototype.constructor=H,Bt.prototype=_s(G.prototype),Bt.prototype.constructor=Bt,Yt.prototype.clear=Qt,Yt.prototype.delete=Xt,Yt.prototype.get=nr,Yt.prototype.has=tr,Yt.prototype.set=rr,er.prototype.clear=ur,er.prototype.delete=ir,\ner.prototype.get=or,er.prototype.has=fr,er.prototype.set=cr,ar.prototype.clear=lr,ar.prototype.delete=sr,ar.prototype.get=hr,ar.prototype.has=pr,ar.prototype.set=_r,vr.prototype.add=vr.prototype.push=gr,vr.prototype.has=yr,dr.prototype.clear=br,dr.prototype.delete=wr,dr.prototype.get=mr,dr.prototype.has=xr,dr.prototype.set=jr;var vs=Fu(ee),gs=Fu(ue,!0),ys=Nu(),ds=Nu(!0),bs=us?function(n,t){return us.set(n,t),n}:Sa,ws=Ul?function(n,t){return Ul(n,\"toString\",{configurable:!0,enumerable:!1,value:za(t),\nwritable:!0})}:Sa,ms=ru,xs=Bl||function(n){return Xr.clearTimeout(n)},js=ts&&1/N(new ts([,-0]))[1]==Rn?function(n){return new ts(n)}:Ta,As=us?function(n){return us.get(n)}:Ta,ks=Fl?function(n){return null==n?[]:(n=cl(n),i(Fl(n),function(t){return El.call(n,t)}))}:Fa,Os=Fl?function(n){for(var t=[];n;)a(t,ks(n)),n=Rl(n);return t}:Fa,Is=de;(Ql&&Is(new Ql(new ArrayBuffer(1)))!=it||Xl&&Is(new Xl)!=Zn||ns&&Is(ns.resolve())!=Hn||ts&&Is(new ts)!=Qn||rs&&Is(new rs)!=rt)&&(Is=function(n){var t=de(n),r=t==Gn?n.constructor:Y,e=r?Xi(r):\"\";\nif(e)switch(e){case os:return it;case fs:return Zn;case cs:return Hn;case as:return Qn;case ls:return rt}return t});var Rs=vl?rc:Na,zs=Ji(bs),Es=$l||function(n,t){return Xr.setTimeout(n,t)},Ss=Ji(ws),Ws=Fi(function(n){var t=[];return 46===n.charCodeAt(0)&&t.push(\"\"),n.replace(It,function(n,r,e,u){t.push(e?u.replace(Tt,\"$1\"):r||n)}),t}),Ls=ru(function(n,t){return Gf(n)?Vr(n,te(t,1,Gf,!0)):[]}),Cs=ru(function(n,t){var r=mo(t);return Gf(r)&&(r=Y),Gf(n)?Vr(n,te(t,1,Gf,!0),bi(r,2)):[]}),Us=ru(function(n,t){\nvar r=mo(t);return Gf(r)&&(r=Y),Gf(n)?Vr(n,te(t,1,Gf,!0),Y,r):[]}),Bs=ru(function(n){var t=c(n,mu);return t.length&&t[0]===n[0]?je(t):[]}),Ts=ru(function(n){var t=mo(n),r=c(n,mu);return t===mo(r)?t=Y:r.pop(),r.length&&r[0]===n[0]?je(r,bi(t,2)):[]}),$s=ru(function(n){var t=mo(n),r=c(n,mu);return t=\"function\"==typeof t?t:Y,t&&r.pop(),r.length&&r[0]===n[0]?je(r,Y,t):[]}),Ds=ru(Ao),Ms=_i(function(n,t){var r=null==n?0:n.length,e=Tr(n,t);return Qe(n,c(t,function(n){return Wi(n,r)?+n:n}).sort(Su)),e}),Fs=ru(function(n){\nreturn _u(te(n,1,Gf,!0))}),Ns=ru(function(n){var t=mo(n);return Gf(t)&&(t=Y),_u(te(n,1,Gf,!0),bi(t,2))}),Ps=ru(function(n){var t=mo(n);return t=\"function\"==typeof t?t:Y,_u(te(n,1,Gf,!0),Y,t)}),qs=ru(function(n,t){return Gf(n)?Vr(n,t):[]}),Zs=ru(function(n){return bu(i(n,Gf))}),Ks=ru(function(n){var t=mo(n);return Gf(t)&&(t=Y),bu(i(n,Gf),bi(t,2))}),Vs=ru(function(n){var t=mo(n);return t=\"function\"==typeof t?t:Y,bu(i(n,Gf),Y,t)}),Gs=ru(Ko),Hs=ru(function(n){var t=n.length,r=t>1?n[t-1]:Y;return r=\"function\"==typeof r?(n.pop(),\nr):Y,Vo(n,r)}),Js=_i(function(n){var t=n.length,r=t?n[0]:0,e=this.__wrapped__,u=function(t){return Tr(t,n)};return!(t>1||this.__actions__.length)&&e instanceof Bt&&Wi(r)?(e=e.slice(r,+r+(t?1:0)),e.__actions__.push({func:Qo,args:[u],thisArg:Y}),new H(e,this.__chain__).thru(function(n){return t&&!n.length&&n.push(Y),n})):this.thru(u)}),Ys=Du(function(n,t,r){yl.call(n,r)?++n[r]:Cr(n,r,1)}),Qs=Gu(lo),Xs=Gu(so),nh=Du(function(n,t,r){yl.call(n,r)?n[r].push(t):Cr(n,r,[t])}),th=ru(function(t,r,e){var u=-1,i=\"function\"==typeof r,o=Vf(t)?el(t.length):[];\nreturn vs(t,function(t){o[++u]=i?n(r,t,e):ke(t,r,e)}),o}),rh=Du(function(n,t,r){Cr(n,r,t)}),eh=Du(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),uh=ru(function(n,t){if(null==n)return[];var r=t.length;return r>1&&Li(n,t[0],t[1])?t=[]:r>2&&Li(t[0],t[1],t[2])&&(t=[t[0]]),Ve(n,te(t,1),[])}),ih=Tl||function(){return Xr.Date.now()},oh=ru(function(n,t,r){var e=sn;if(r.length){var u=F(r,di(oh));e|=gn}return fi(n,e,t,r,u)}),fh=ru(function(n,t,r){var e=sn|hn;if(r.length){var u=F(r,di(fh));e|=gn;\n}return fi(t,e,n,r,u)}),ch=ru(function(n,t){return Kr(n,1,t)}),ah=ru(function(n,t,r){return Kr(n,kc(t)||0,r)});Wf.Cache=ar;var lh=ms(function(t,r){r=1==r.length&&yh(r[0])?c(r[0],R(bi())):c(te(r,1),R(bi()));var e=r.length;return ru(function(u){for(var i=-1,o=Vl(u.length,e);++i<o;)u[i]=r[i].call(this,u[i]);return n(t,this,u)})}),sh=ru(function(n,t){return fi(n,gn,Y,t,F(t,di(sh)))}),hh=ru(function(n,t){return fi(n,yn,Y,t,F(t,di(hh)))}),ph=_i(function(n,t){return fi(n,bn,Y,Y,Y,t)}),_h=ei(be),vh=ei(function(n,t){\nreturn n>=t}),gh=Oe(function(){return arguments}())?Oe:function(n){return oc(n)&&yl.call(n,\"callee\")&&!El.call(n,\"callee\")},yh=el.isArray,dh=ie?R(ie):Ie,bh=Nl||Na,wh=oe?R(oe):Re,mh=fe?R(fe):Se,xh=ce?R(ce):Ce,jh=ae?R(ae):Ue,Ah=le?R(le):Be,kh=ei(Me),Oh=ei(function(n,t){return n<=t}),Ih=Mu(function(n,t){if($i(t)||Vf(t))return Bu(t,Fc(t),n),Y;for(var r in t)yl.call(t,r)&&zr(n,r,t[r])}),Rh=Mu(function(n,t){Bu(t,Nc(t),n)}),zh=Mu(function(n,t,r,e){Bu(t,Nc(t),n,e)}),Eh=Mu(function(n,t,r,e){Bu(t,Fc(t),n,e);\n}),Sh=_i(Tr),Wh=ru(function(n,t){n=cl(n);var r=-1,e=t.length,u=e>2?t[2]:Y;for(u&&Li(t[0],t[1],u)&&(e=1);++r<e;)for(var i=t[r],o=Nc(i),f=-1,c=o.length;++f<c;){var a=o[f],l=n[a];(l===Y||Kf(l,_l[a])&&!yl.call(n,a))&&(n[a]=i[a])}return n}),Lh=ru(function(t){return t.push(Y,ai),n($h,Y,t)}),Ch=Yu(function(n,t,r){null!=t&&\"function\"!=typeof t.toString&&(t=wl.call(t)),n[t]=r},za(Sa)),Uh=Yu(function(n,t,r){null!=t&&\"function\"!=typeof t.toString&&(t=wl.call(t)),yl.call(n,t)?n[t].push(r):n[t]=[r]},bi),Bh=ru(ke),Th=Mu(function(n,t,r){\nqe(n,t,r)}),$h=Mu(function(n,t,r,e){qe(n,t,r,e)}),Dh=_i(function(n,t){var r={};if(null==n)return r;var e=!1;t=c(t,function(t){return t=ju(t,n),e||(e=t.length>1),t}),Bu(n,gi(n),r),e&&(r=Dr(r,on|fn|cn,li));for(var u=t.length;u--;)vu(r,t[u]);return r}),Mh=_i(function(n,t){return null==n?{}:Ge(n,t)}),Fh=oi(Fc),Nh=oi(Nc),Ph=Zu(function(n,t,r){return t=t.toLowerCase(),n+(r?ia(t):t)}),qh=Zu(function(n,t,r){return n+(r?\"-\":\"\")+t.toLowerCase()}),Zh=Zu(function(n,t,r){return n+(r?\" \":\"\")+t.toLowerCase()}),Kh=qu(\"toLowerCase\"),Vh=Zu(function(n,t,r){\nreturn n+(r?\"_\":\"\")+t.toLowerCase()}),Gh=Zu(function(n,t,r){return n+(r?\" \":\"\")+Jh(t)}),Hh=Zu(function(n,t,r){return n+(r?\" \":\"\")+t.toUpperCase()}),Jh=qu(\"toUpperCase\"),Yh=ru(function(t,r){try{return n(t,Y,r)}catch(n){return nc(n)?n:new il(n)}}),Qh=_i(function(n,t){return r(t,function(t){t=Qi(t),Cr(n,t,oh(n[t],n))}),n}),Xh=Hu(),np=Hu(!0),tp=ru(function(n,t){return function(r){return ke(r,n,t)}}),rp=ru(function(n,t){return function(r){return ke(n,r,t)}}),ep=Xu(c),up=Xu(u),ip=Xu(h),op=ri(),fp=ri(!0),cp=Qu(function(n,t){\nreturn n+t},0),ap=ii(\"ceil\"),lp=Qu(function(n,t){return n/t},1),sp=ii(\"floor\"),hp=Qu(function(n,t){return n*t},1),pp=ii(\"round\"),_p=Qu(function(n,t){return n-t},0);return q.after=kf,q.ary=Of,q.assign=Ih,q.assignIn=Rh,q.assignInWith=zh,q.assignWith=Eh,q.at=Sh,q.before=If,q.bind=oh,q.bindAll=Qh,q.bindKey=fh,q.castArray=Mf,q.chain=Jo,q.chunk=ro,q.compact=eo,q.concat=uo,q.cond=Ia,q.conforms=Ra,q.constant=za,q.countBy=Ys,q.create=zc,q.curry=Rf,q.curryRight=zf,q.debounce=Ef,q.defaults=Wh,q.defaultsDeep=Lh,\nq.defer=ch,q.delay=ah,q.difference=Ls,q.differenceBy=Cs,q.differenceWith=Us,q.drop=io,q.dropRight=oo,q.dropRightWhile=fo,q.dropWhile=co,q.fill=ao,q.filter=cf,q.flatMap=af,q.flatMapDeep=lf,q.flatMapDepth=sf,q.flatten=ho,q.flattenDeep=po,q.flattenDepth=_o,q.flip=Sf,q.flow=Xh,q.flowRight=np,q.fromPairs=vo,q.functions=Bc,q.functionsIn=Tc,q.groupBy=nh,q.initial=bo,q.intersection=Bs,q.intersectionBy=Ts,q.intersectionWith=$s,q.invert=Ch,q.invertBy=Uh,q.invokeMap=th,q.iteratee=Wa,q.keyBy=rh,q.keys=Fc,q.keysIn=Nc,\nq.map=vf,q.mapKeys=Pc,q.mapValues=qc,q.matches=La,q.matchesProperty=Ca,q.memoize=Wf,q.merge=Th,q.mergeWith=$h,q.method=tp,q.methodOf=rp,q.mixin=Ua,q.negate=Lf,q.nthArg=$a,q.omit=Dh,q.omitBy=Zc,q.once=Cf,q.orderBy=gf,q.over=ep,q.overArgs=lh,q.overEvery=up,q.overSome=ip,q.partial=sh,q.partialRight=hh,q.partition=eh,q.pick=Mh,q.pickBy=Kc,q.property=Da,q.propertyOf=Ma,q.pull=Ds,q.pullAll=Ao,q.pullAllBy=ko,q.pullAllWith=Oo,q.pullAt=Ms,q.range=op,q.rangeRight=fp,q.rearg=ph,q.reject=bf,q.remove=Io,q.rest=Uf,\nq.reverse=Ro,q.sampleSize=mf,q.set=Gc,q.setWith=Hc,q.shuffle=xf,q.slice=zo,q.sortBy=uh,q.sortedUniq=Bo,q.sortedUniqBy=To,q.split=ga,q.spread=Bf,q.tail=$o,q.take=Do,q.takeRight=Mo,q.takeRightWhile=Fo,q.takeWhile=No,q.tap=Yo,q.throttle=Tf,q.thru=Qo,q.toArray=mc,q.toPairs=Fh,q.toPairsIn=Nh,q.toPath=Va,q.toPlainObject=Oc,q.transform=Jc,q.unary=$f,q.union=Fs,q.unionBy=Ns,q.unionWith=Ps,q.uniq=Po,q.uniqBy=qo,q.uniqWith=Zo,q.unset=Yc,q.unzip=Ko,q.unzipWith=Vo,q.update=Qc,q.updateWith=Xc,q.values=na,q.valuesIn=ta,\nq.without=qs,q.words=Oa,q.wrap=Df,q.xor=Zs,q.xorBy=Ks,q.xorWith=Vs,q.zip=Gs,q.zipObject=Go,q.zipObjectDeep=Ho,q.zipWith=Hs,q.entries=Fh,q.entriesIn=Nh,q.extend=Rh,q.extendWith=zh,Ua(q,q),q.add=cp,q.attempt=Yh,q.camelCase=Ph,q.capitalize=ia,q.ceil=ap,q.clamp=ra,q.clone=Ff,q.cloneDeep=Pf,q.cloneDeepWith=qf,q.cloneWith=Nf,q.conformsTo=Zf,q.deburr=oa,q.defaultTo=Ea,q.divide=lp,q.endsWith=fa,q.eq=Kf,q.escape=ca,q.escapeRegExp=aa,q.every=ff,q.find=Qs,q.findIndex=lo,q.findKey=Ec,q.findLast=Xs,q.findLastIndex=so,\nq.findLastKey=Sc,q.floor=sp,q.forEach=hf,q.forEachRight=pf,q.forIn=Wc,q.forInRight=Lc,q.forOwn=Cc,q.forOwnRight=Uc,q.get=$c,q.gt=_h,q.gte=vh,q.has=Dc,q.hasIn=Mc,q.head=go,q.identity=Sa,q.includes=_f,q.indexOf=yo,q.inRange=ea,q.invoke=Bh,q.isArguments=gh,q.isArray=yh,q.isArrayBuffer=dh,q.isArrayLike=Vf,q.isArrayLikeObject=Gf,q.isBoolean=Hf,q.isBuffer=bh,q.isDate=wh,q.isElement=Jf,q.isEmpty=Yf,q.isEqual=Qf,q.isEqualWith=Xf,q.isError=nc,q.isFinite=tc,q.isFunction=rc,q.isInteger=ec,q.isLength=uc,q.isMap=mh,\nq.isMatch=fc,q.isMatchWith=cc,q.isNaN=ac,q.isNative=lc,q.isNil=hc,q.isNull=sc,q.isNumber=pc,q.isObject=ic,q.isObjectLike=oc,q.isPlainObject=_c,q.isRegExp=xh,q.isSafeInteger=vc,q.isSet=jh,q.isString=gc,q.isSymbol=yc,q.isTypedArray=Ah,q.isUndefined=dc,q.isWeakMap=bc,q.isWeakSet=wc,q.join=wo,q.kebabCase=qh,q.last=mo,q.lastIndexOf=xo,q.lowerCase=Zh,q.lowerFirst=Kh,q.lt=kh,q.lte=Oh,q.max=Ha,q.maxBy=Ja,q.mean=Ya,q.meanBy=Qa,q.min=Xa,q.minBy=nl,q.stubArray=Fa,q.stubFalse=Na,q.stubObject=Pa,q.stubString=qa,\nq.stubTrue=Za,q.multiply=hp,q.nth=jo,q.noConflict=Ba,q.noop=Ta,q.now=ih,q.pad=la,q.padEnd=sa,q.padStart=ha,q.parseInt=pa,q.random=ua,q.reduce=yf,q.reduceRight=df,q.repeat=_a,q.replace=va,q.result=Vc,q.round=pp,q.runInContext=p,q.sample=wf,q.size=jf,q.snakeCase=Vh,q.some=Af,q.sortedIndex=Eo,q.sortedIndexBy=So,q.sortedIndexOf=Wo,q.sortedLastIndex=Lo,q.sortedLastIndexBy=Co,q.sortedLastIndexOf=Uo,q.startCase=Gh,q.startsWith=ya,q.subtract=_p,q.sum=tl,q.sumBy=rl,q.template=da,q.times=Ka,q.toFinite=xc,q.toInteger=jc,\nq.toLength=Ac,q.toLower=ba,q.toNumber=kc,q.toSafeInteger=Ic,q.toString=Rc,q.toUpper=wa,q.trim=ma,q.trimEnd=xa,q.trimStart=ja,q.truncate=Aa,q.unescape=ka,q.uniqueId=Ga,q.upperCase=Hh,q.upperFirst=Jh,q.each=hf,q.eachRight=pf,q.first=go,Ua(q,function(){var n={};return ee(q,function(t,r){yl.call(q.prototype,r)||(n[r]=t)}),n}(),{chain:!1}),q.VERSION=Q,r([\"bind\",\"bindKey\",\"curry\",\"curryRight\",\"partial\",\"partialRight\"],function(n){q[n].placeholder=q}),r([\"drop\",\"take\"],function(n,t){Bt.prototype[n]=function(r){\nr=r===Y?1:Kl(jc(r),0);var e=this.__filtered__&&!t?new Bt(this):this.clone();return e.__filtered__?e.__takeCount__=Vl(r,e.__takeCount__):e.__views__.push({size:Vl(r,Wn),type:n+(e.__dir__<0?\"Right\":\"\")}),e},Bt.prototype[n+\"Right\"]=function(t){return this.reverse()[n](t).reverse()}}),r([\"filter\",\"map\",\"takeWhile\"],function(n,t){var r=t+1,e=r==kn||r==In;Bt.prototype[n]=function(n){var t=this.clone();return t.__iteratees__.push({iteratee:bi(n,3),type:r}),t.__filtered__=t.__filtered__||e,t}}),r([\"head\",\"last\"],function(n,t){\nvar r=\"take\"+(t?\"Right\":\"\");Bt.prototype[n]=function(){return this[r](1).value()[0]}}),r([\"initial\",\"tail\"],function(n,t){var r=\"drop\"+(t?\"\":\"Right\");Bt.prototype[n]=function(){return this.__filtered__?new Bt(this):this[r](1)}}),Bt.prototype.compact=function(){return this.filter(Sa)},Bt.prototype.find=function(n){return this.filter(n).head()},Bt.prototype.findLast=function(n){return this.reverse().find(n)},Bt.prototype.invokeMap=ru(function(n,t){return\"function\"==typeof n?new Bt(this):this.map(function(r){\nreturn ke(r,n,t)})}),Bt.prototype.reject=function(n){return this.filter(Lf(bi(n)))},Bt.prototype.slice=function(n,t){n=jc(n);var r=this;return r.__filtered__&&(n>0||t<0)?new Bt(r):(n<0?r=r.takeRight(-n):n&&(r=r.drop(n)),t!==Y&&(t=jc(t),r=t<0?r.dropRight(-t):r.take(t-n)),r)},Bt.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},Bt.prototype.toArray=function(){return this.take(Wn)},ee(Bt.prototype,function(n,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),e=/^(?:head|last)$/.test(t),u=q[e?\"take\"+(\"last\"==t?\"Right\":\"\"):t],i=e||/^find/.test(t);\nu&&(q.prototype[t]=function(){var t=this.__wrapped__,o=e?[1]:arguments,f=t instanceof Bt,c=o[0],l=f||yh(t),s=function(n){var t=u.apply(q,a([n],o));return e&&h?t[0]:t};l&&r&&\"function\"==typeof c&&1!=c.length&&(f=l=!1);var h=this.__chain__,p=!!this.__actions__.length,_=i&&!h,v=f&&!p;if(!i&&l){t=v?t:new Bt(this);var g=n.apply(t,o);return g.__actions__.push({func:Qo,args:[s],thisArg:Y}),new H(g,h)}return _&&v?n.apply(this,o):(g=this.thru(s),_?e?g.value()[0]:g.value():g)})}),r([\"pop\",\"push\",\"shift\",\"sort\",\"splice\",\"unshift\"],function(n){\nvar t=hl[n],r=/^(?:push|sort|unshift)$/.test(n)?\"tap\":\"thru\",e=/^(?:pop|shift)$/.test(n);q.prototype[n]=function(){var n=arguments;if(e&&!this.__chain__){var u=this.value();return t.apply(yh(u)?u:[],n)}return this[r](function(r){return t.apply(yh(r)?r:[],n)})}}),ee(Bt.prototype,function(n,t){var r=q[t];if(r){var e=r.name+\"\";yl.call(is,e)||(is[e]=[]),is[e].push({name:t,func:r})}}),is[Ju(Y,hn).name]=[{name:\"wrapper\",func:Y}],Bt.prototype.clone=Gt,Bt.prototype.reverse=Ht,Bt.prototype.value=Jt,q.prototype.at=Js,\nq.prototype.chain=Xo,q.prototype.commit=nf,q.prototype.next=tf,q.prototype.plant=ef,q.prototype.reverse=uf,q.prototype.toJSON=q.prototype.valueOf=q.prototype.value=of,q.prototype.first=q.prototype.head,Ll&&(q.prototype[Ll]=rf),q},ge=ve();\"function\"==typeof define&&\"object\"==typeof define.amd&&define.amd?(Xr._=ge,define(function(){return ge})):te?((te.exports=ge)._=ge,ne._=ge):Xr._=ge}).call(this);","'use strict';\nmodule.exports = () => {\n\tconst ret = {};\n\n\tret.promise = new Promise((resolve, reject) => {\n\t\tret.resolve = resolve;\n\t\tret.reject = reject;\n\t});\n\n\treturn ret;\n};\n","// Top level file is just a mixin of submodules & constants\n'use strict';\n\nvar assign    = require('./lib/utils/common').assign;\n\nvar deflate   = require('./lib/deflate');\nvar inflate   = require('./lib/inflate');\nvar constants = require('./lib/zlib/constants');\n\nvar pako = {};\n\nassign(pako, deflate, inflate, constants);\n\nmodule.exports = pako;\n","'use strict';\n\n\nvar zlib_deflate = require('./zlib/deflate');\nvar utils        = require('./utils/common');\nvar strings      = require('./utils/strings');\nvar msg          = require('./zlib/messages');\nvar ZStream      = require('./zlib/zstream');\n\nvar toString = Object.prototype.toString;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nvar Z_NO_FLUSH      = 0;\nvar Z_FINISH        = 4;\n\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\nvar Z_SYNC_FLUSH    = 2;\n\nvar Z_DEFAULT_COMPRESSION = -1;\n\nvar Z_DEFAULT_STRATEGY    = 0;\n\nvar Z_DEFLATED  = 8;\n\n/* ===========================================================================*/\n\n\n/**\n * class Deflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[deflate]],\n * [[deflateRaw]] and [[gzip]].\n **/\n\n/* internal\n * Deflate.chunks -> Array\n *\n * Chunks of output data, if [[Deflate#onData]] not overridden.\n **/\n\n/**\n * Deflate.result -> Uint8Array|Array\n *\n * Compressed result, generated by default [[Deflate#onData]]\n * and [[Deflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Deflate#push]] with `Z_FINISH` / `true` param)  or if you\n * push a chunk with explicit flush (call [[Deflate#push]] with\n * `Z_SYNC_FLUSH` param).\n **/\n\n/**\n * Deflate.err -> Number\n *\n * Error code after deflate finished. 0 (Z_OK) on success.\n * You will not need it in real life, because deflate errors\n * are possible only on wrong options or bad `onData` / `onEnd`\n * custom handlers.\n **/\n\n/**\n * Deflate.msg -> String\n *\n * Error message, if [[Deflate.err]] != 0\n **/\n\n\n/**\n * new Deflate(options)\n * - options (Object): zlib deflate options.\n *\n * Creates new deflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `level`\n * - `windowBits`\n * - `memLevel`\n * - `strategy`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw deflate\n * - `gzip` (Boolean) - create gzip wrapper\n * - `to` (String) - if equal to 'string', then result will be \"binary string\"\n *    (each char code [0..255])\n * - `header` (Object) - custom header for gzip\n *   - `text` (Boolean) - true if compressed data believed to be text\n *   - `time` (Number) - modification time, unix timestamp\n *   - `os` (Number) - operation system code\n *   - `extra` (Array) - array of bytes with extra data (max 65536)\n *   - `name` (String) - file name (binary string)\n *   - `comment` (String) - comment (binary string)\n *   - `hcrc` (Boolean) - true if header crc should be added\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , chunk1 = Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * var deflate = new pako.Deflate({ level: 3});\n *\n * deflate.push(chunk1, false);\n * deflate.push(chunk2, true);  // true -> last chunk\n *\n * if (deflate.err) { throw new Error(deflate.err); }\n *\n * console.log(deflate.result);\n * ```\n **/\nfunction Deflate(options) {\n  if (!(this instanceof Deflate)) return new Deflate(options);\n\n  this.options = utils.assign({\n    level: Z_DEFAULT_COMPRESSION,\n    method: Z_DEFLATED,\n    chunkSize: 16384,\n    windowBits: 15,\n    memLevel: 8,\n    strategy: Z_DEFAULT_STRATEGY,\n    to: ''\n  }, options || {});\n\n  var opt = this.options;\n\n  if (opt.raw && (opt.windowBits > 0)) {\n    opt.windowBits = -opt.windowBits;\n  }\n\n  else if (opt.gzip && (opt.windowBits > 0) && (opt.windowBits < 16)) {\n    opt.windowBits += 16;\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm = new ZStream();\n  this.strm.avail_out = 0;\n\n  var status = zlib_deflate.deflateInit2(\n    this.strm,\n    opt.level,\n    opt.method,\n    opt.windowBits,\n    opt.memLevel,\n    opt.strategy\n  );\n\n  if (status !== Z_OK) {\n    throw new Error(msg[status]);\n  }\n\n  if (opt.header) {\n    zlib_deflate.deflateSetHeader(this.strm, opt.header);\n  }\n\n  if (opt.dictionary) {\n    var dict;\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      // If we need to compress text, change encoding to utf8.\n      dict = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      dict = new Uint8Array(opt.dictionary);\n    } else {\n      dict = opt.dictionary;\n    }\n\n    status = zlib_deflate.deflateSetDictionary(this.strm, dict);\n\n    if (status !== Z_OK) {\n      throw new Error(msg[status]);\n    }\n\n    this._dict_set = true;\n  }\n}\n\n/**\n * Deflate#push(data[, mode]) -> Boolean\n * - data (Uint8Array|Array|ArrayBuffer|String): input data. Strings will be\n *   converted to utf8 byte sequence.\n * - mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n *\n * Sends input data to deflate pipe, generating [[Deflate#onData]] calls with\n * new compressed chunks. Returns `true` on success. The last data block must have\n * mode Z_FINISH (or `true`). That will flush internal pending buffers and call\n * [[Deflate#onEnd]]. For interim explicit flushes (without ending the stream) you\n * can use mode Z_SYNC_FLUSH, keeping the compression context.\n *\n * On fail call [[Deflate#onEnd]] with error code and return false.\n *\n * We strongly recommend to use `Uint8Array` on input for best speed (output\n * array format is detected automatically). Also, don't skip last param and always\n * use the same type in your code (boolean or number). That will improve JS speed.\n *\n * For regular `Array`-s make sure all elements are [0..255].\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nDeflate.prototype.push = function (data, mode) {\n  var strm = this.strm;\n  var chunkSize = this.options.chunkSize;\n  var status, _mode;\n\n  if (this.ended) { return false; }\n\n  _mode = (mode === ~~mode) ? mode : ((mode === true) ? Z_FINISH : Z_NO_FLUSH);\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // If we need to compress text, change encoding to utf8.\n    strm.input = strings.string2buf(data);\n  } else if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  do {\n    if (strm.avail_out === 0) {\n      strm.output = new utils.Buf8(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n    status = zlib_deflate.deflate(strm, _mode);    /* no bad return value */\n\n    if (status !== Z_STREAM_END && status !== Z_OK) {\n      this.onEnd(status);\n      this.ended = true;\n      return false;\n    }\n    if (strm.avail_out === 0 || (strm.avail_in === 0 && (_mode === Z_FINISH || _mode === Z_SYNC_FLUSH))) {\n      if (this.options.to === 'string') {\n        this.onData(strings.buf2binstring(utils.shrinkBuf(strm.output, strm.next_out)));\n      } else {\n        this.onData(utils.shrinkBuf(strm.output, strm.next_out));\n      }\n    }\n  } while ((strm.avail_in > 0 || strm.avail_out === 0) && status !== Z_STREAM_END);\n\n  // Finalize on the last chunk.\n  if (_mode === Z_FINISH) {\n    status = zlib_deflate.deflateEnd(this.strm);\n    this.onEnd(status);\n    this.ended = true;\n    return status === Z_OK;\n  }\n\n  // callback interim results if Z_SYNC_FLUSH.\n  if (_mode === Z_SYNC_FLUSH) {\n    this.onEnd(Z_OK);\n    strm.avail_out = 0;\n    return true;\n  }\n\n  return true;\n};\n\n\n/**\n * Deflate#onData(chunk) -> Void\n * - chunk (Uint8Array|Array|String): output data. Type of array depends\n *   on js engine support. When string output requested, each chunk\n *   will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nDeflate.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Deflate#onEnd(status) -> Void\n * - status (Number): deflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called once after you tell deflate that the input stream is\n * complete (Z_FINISH) or should be flushed (Z_SYNC_FLUSH)\n * or if an error happened. By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nDeflate.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === Z_OK) {\n    if (this.options.to === 'string') {\n      this.result = this.chunks.join('');\n    } else {\n      this.result = utils.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * deflate(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * Compress `data` with deflate algorithm and `options`.\n *\n * Supported options are:\n *\n * - level\n * - windowBits\n * - memLevel\n * - strategy\n * - dictionary\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be \"binary string\"\n *    (each char code [0..255])\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , data = Uint8Array([1,2,3,4,5,6,7,8,9]);\n *\n * console.log(pako.deflate(data));\n * ```\n **/\nfunction deflate(input, options) {\n  var deflator = new Deflate(options);\n\n  deflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (deflator.err) { throw deflator.msg || msg[deflator.err]; }\n\n  return deflator.result;\n}\n\n\n/**\n * deflateRaw(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction deflateRaw(input, options) {\n  options = options || {};\n  options.raw = true;\n  return deflate(input, options);\n}\n\n\n/**\n * gzip(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but create gzip wrapper instead of\n * deflate one.\n **/\nfunction gzip(input, options) {\n  options = options || {};\n  options.gzip = true;\n  return deflate(input, options);\n}\n\n\nexports.Deflate = Deflate;\nexports.deflate = deflate;\nexports.deflateRaw = deflateRaw;\nexports.gzip = gzip;\n","'use strict';\n\n\nvar zlib_inflate = require('./zlib/inflate');\nvar utils        = require('./utils/common');\nvar strings      = require('./utils/strings');\nvar c            = require('./zlib/constants');\nvar msg          = require('./zlib/messages');\nvar ZStream      = require('./zlib/zstream');\nvar GZheader     = require('./zlib/gzheader');\n\nvar toString = Object.prototype.toString;\n\n/**\n * class Inflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[inflate]]\n * and [[inflateRaw]].\n **/\n\n/* internal\n * inflate.chunks -> Array\n *\n * Chunks of output data, if [[Inflate#onData]] not overridden.\n **/\n\n/**\n * Inflate.result -> Uint8Array|Array|String\n *\n * Uncompressed result, generated by default [[Inflate#onData]]\n * and [[Inflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Inflate#push]] with `Z_FINISH` / `true` param) or if you\n * push a chunk with explicit flush (call [[Inflate#push]] with\n * `Z_SYNC_FLUSH` param).\n **/\n\n/**\n * Inflate.err -> Number\n *\n * Error code after inflate finished. 0 (Z_OK) on success.\n * Should be checked if broken data possible.\n **/\n\n/**\n * Inflate.msg -> String\n *\n * Error message, if [[Inflate.err]] != 0\n **/\n\n\n/**\n * new Inflate(options)\n * - options (Object): zlib inflate options.\n *\n * Creates new inflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `windowBits`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw inflate\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n * By default, when no options set, autodetect deflate/gzip data format via\n * wrapper header.\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , chunk1 = Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * var inflate = new pako.Inflate({ level: 3});\n *\n * inflate.push(chunk1, false);\n * inflate.push(chunk2, true);  // true -> last chunk\n *\n * if (inflate.err) { throw new Error(inflate.err); }\n *\n * console.log(inflate.result);\n * ```\n **/\nfunction Inflate(options) {\n  if (!(this instanceof Inflate)) return new Inflate(options);\n\n  this.options = utils.assign({\n    chunkSize: 16384,\n    windowBits: 0,\n    to: ''\n  }, options || {});\n\n  var opt = this.options;\n\n  // Force window size for `raw` data, if not set directly,\n  // because we have no header for autodetect.\n  if (opt.raw && (opt.windowBits >= 0) && (opt.windowBits < 16)) {\n    opt.windowBits = -opt.windowBits;\n    if (opt.windowBits === 0) { opt.windowBits = -15; }\n  }\n\n  // If `windowBits` not defined (and mode not raw) - set autodetect flag for gzip/deflate\n  if ((opt.windowBits >= 0) && (opt.windowBits < 16) &&\n      !(options && options.windowBits)) {\n    opt.windowBits += 32;\n  }\n\n  // Gzip header has no info about windows size, we can do autodetect only\n  // for deflate. So, if window size not set, force it to max when gzip possible\n  if ((opt.windowBits > 15) && (opt.windowBits < 48)) {\n    // bit 3 (16) -> gzipped data\n    // bit 4 (32) -> autodetect gzip/deflate\n    if ((opt.windowBits & 15) === 0) {\n      opt.windowBits |= 15;\n    }\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm   = new ZStream();\n  this.strm.avail_out = 0;\n\n  var status  = zlib_inflate.inflateInit2(\n    this.strm,\n    opt.windowBits\n  );\n\n  if (status !== c.Z_OK) {\n    throw new Error(msg[status]);\n  }\n\n  this.header = new GZheader();\n\n  zlib_inflate.inflateGetHeader(this.strm, this.header);\n\n  // Setup dictionary\n  if (opt.dictionary) {\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      opt.dictionary = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      opt.dictionary = new Uint8Array(opt.dictionary);\n    }\n    if (opt.raw) { //In raw mode we need to set the dictionary early\n      status = zlib_inflate.inflateSetDictionary(this.strm, opt.dictionary);\n      if (status !== c.Z_OK) {\n        throw new Error(msg[status]);\n      }\n    }\n  }\n}\n\n/**\n * Inflate#push(data[, mode]) -> Boolean\n * - data (Uint8Array|Array|ArrayBuffer|String): input data\n * - mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n *\n * Sends input data to inflate pipe, generating [[Inflate#onData]] calls with\n * new output chunks. Returns `true` on success. The last data block must have\n * mode Z_FINISH (or `true`). That will flush internal pending buffers and call\n * [[Inflate#onEnd]]. For interim explicit flushes (without ending the stream) you\n * can use mode Z_SYNC_FLUSH, keeping the decompression context.\n *\n * On fail call [[Inflate#onEnd]] with error code and return false.\n *\n * We strongly recommend to use `Uint8Array` on input for best speed (output\n * format is detected automatically). Also, don't skip last param and always\n * use the same type in your code (boolean or number). That will improve JS speed.\n *\n * For regular `Array`-s make sure all elements are [0..255].\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nInflate.prototype.push = function (data, mode) {\n  var strm = this.strm;\n  var chunkSize = this.options.chunkSize;\n  var dictionary = this.options.dictionary;\n  var status, _mode;\n  var next_out_utf8, tail, utf8str;\n\n  // Flag to properly process Z_BUF_ERROR on testing inflate call\n  // when we check that all output data was flushed.\n  var allowBufError = false;\n\n  if (this.ended) { return false; }\n  _mode = (mode === ~~mode) ? mode : ((mode === true) ? c.Z_FINISH : c.Z_NO_FLUSH);\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // Only binary strings can be decompressed on practice\n    strm.input = strings.binstring2buf(data);\n  } else if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  do {\n    if (strm.avail_out === 0) {\n      strm.output = new utils.Buf8(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n\n    status = zlib_inflate.inflate(strm, c.Z_NO_FLUSH);    /* no bad return value */\n\n    if (status === c.Z_NEED_DICT && dictionary) {\n      status = zlib_inflate.inflateSetDictionary(this.strm, dictionary);\n    }\n\n    if (status === c.Z_BUF_ERROR && allowBufError === true) {\n      status = c.Z_OK;\n      allowBufError = false;\n    }\n\n    if (status !== c.Z_STREAM_END && status !== c.Z_OK) {\n      this.onEnd(status);\n      this.ended = true;\n      return false;\n    }\n\n    if (strm.next_out) {\n      if (strm.avail_out === 0 || status === c.Z_STREAM_END || (strm.avail_in === 0 && (_mode === c.Z_FINISH || _mode === c.Z_SYNC_FLUSH))) {\n\n        if (this.options.to === 'string') {\n\n          next_out_utf8 = strings.utf8border(strm.output, strm.next_out);\n\n          tail = strm.next_out - next_out_utf8;\n          utf8str = strings.buf2string(strm.output, next_out_utf8);\n\n          // move tail\n          strm.next_out = tail;\n          strm.avail_out = chunkSize - tail;\n          if (tail) { utils.arraySet(strm.output, strm.output, next_out_utf8, tail, 0); }\n\n          this.onData(utf8str);\n\n        } else {\n          this.onData(utils.shrinkBuf(strm.output, strm.next_out));\n        }\n      }\n    }\n\n    // When no more input data, we should check that internal inflate buffers\n    // are flushed. The only way to do it when avail_out = 0 - run one more\n    // inflate pass. But if output data not exists, inflate return Z_BUF_ERROR.\n    // Here we set flag to process this error properly.\n    //\n    // NOTE. Deflate does not return error in this case and does not needs such\n    // logic.\n    if (strm.avail_in === 0 && strm.avail_out === 0) {\n      allowBufError = true;\n    }\n\n  } while ((strm.avail_in > 0 || strm.avail_out === 0) && status !== c.Z_STREAM_END);\n\n  if (status === c.Z_STREAM_END) {\n    _mode = c.Z_FINISH;\n  }\n\n  // Finalize on the last chunk.\n  if (_mode === c.Z_FINISH) {\n    status = zlib_inflate.inflateEnd(this.strm);\n    this.onEnd(status);\n    this.ended = true;\n    return status === c.Z_OK;\n  }\n\n  // callback interim results if Z_SYNC_FLUSH.\n  if (_mode === c.Z_SYNC_FLUSH) {\n    this.onEnd(c.Z_OK);\n    strm.avail_out = 0;\n    return true;\n  }\n\n  return true;\n};\n\n\n/**\n * Inflate#onData(chunk) -> Void\n * - chunk (Uint8Array|Array|String): output data. Type of array depends\n *   on js engine support. When string output requested, each chunk\n *   will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nInflate.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Inflate#onEnd(status) -> Void\n * - status (Number): inflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called either after you tell inflate that the input stream is\n * complete (Z_FINISH) or should be flushed (Z_SYNC_FLUSH)\n * or if an error happened. By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nInflate.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === c.Z_OK) {\n    if (this.options.to === 'string') {\n      // Glue & convert here, until we teach pako to send\n      // utf8 aligned strings to onData\n      this.result = this.chunks.join('');\n    } else {\n      this.result = utils.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * inflate(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Decompress `data` with inflate/ungzip and `options`. Autodetect\n * format via wrapper header by default. That's why we don't provide\n * separate `ungzip` method.\n *\n * Supported options are:\n *\n * - windowBits\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , input = pako.deflate([1,2,3,4,5,6,7,8,9])\n *   , output;\n *\n * try {\n *   output = pako.inflate(input);\n * } catch (err)\n *   console.log(err);\n * }\n * ```\n **/\nfunction inflate(input, options) {\n  var inflator = new Inflate(options);\n\n  inflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (inflator.err) { throw inflator.msg || msg[inflator.err]; }\n\n  return inflator.result;\n}\n\n\n/**\n * inflateRaw(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * The same as [[inflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction inflateRaw(input, options) {\n  options = options || {};\n  options.raw = true;\n  return inflate(input, options);\n}\n\n\n/**\n * ungzip(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Just shortcut to [[inflate]], because it autodetects format\n * by header.content. Done for convenience.\n **/\n\n\nexports.Inflate = Inflate;\nexports.inflate = inflate;\nexports.inflateRaw = inflateRaw;\nexports.ungzip  = inflate;\n","'use strict';\n\n\nvar TYPED_OK =  (typeof Uint8Array !== 'undefined') &&\n                (typeof Uint16Array !== 'undefined') &&\n                (typeof Int32Array !== 'undefined');\n\nfunction _has(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nexports.assign = function (obj /*from1, from2, from3, ...*/) {\n  var sources = Array.prototype.slice.call(arguments, 1);\n  while (sources.length) {\n    var source = sources.shift();\n    if (!source) { continue; }\n\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be non-object');\n    }\n\n    for (var p in source) {\n      if (_has(source, p)) {\n        obj[p] = source[p];\n      }\n    }\n  }\n\n  return obj;\n};\n\n\n// reduce buffer size, avoiding mem copy\nexports.shrinkBuf = function (buf, size) {\n  if (buf.length === size) { return buf; }\n  if (buf.subarray) { return buf.subarray(0, size); }\n  buf.length = size;\n  return buf;\n};\n\n\nvar fnTyped = {\n  arraySet: function (dest, src, src_offs, len, dest_offs) {\n    if (src.subarray && dest.subarray) {\n      dest.set(src.subarray(src_offs, src_offs + len), dest_offs);\n      return;\n    }\n    // Fallback to ordinary array\n    for (var i = 0; i < len; i++) {\n      dest[dest_offs + i] = src[src_offs + i];\n    }\n  },\n  // Join array of chunks to single array.\n  flattenChunks: function (chunks) {\n    var i, l, len, pos, chunk, result;\n\n    // calculate data length\n    len = 0;\n    for (i = 0, l = chunks.length; i < l; i++) {\n      len += chunks[i].length;\n    }\n\n    // join chunks\n    result = new Uint8Array(len);\n    pos = 0;\n    for (i = 0, l = chunks.length; i < l; i++) {\n      chunk = chunks[i];\n      result.set(chunk, pos);\n      pos += chunk.length;\n    }\n\n    return result;\n  }\n};\n\nvar fnUntyped = {\n  arraySet: function (dest, src, src_offs, len, dest_offs) {\n    for (var i = 0; i < len; i++) {\n      dest[dest_offs + i] = src[src_offs + i];\n    }\n  },\n  // Join array of chunks to single array.\n  flattenChunks: function (chunks) {\n    return [].concat.apply([], chunks);\n  }\n};\n\n\n// Enable/Disable typed arrays use, for testing\n//\nexports.setTyped = function (on) {\n  if (on) {\n    exports.Buf8  = Uint8Array;\n    exports.Buf16 = Uint16Array;\n    exports.Buf32 = Int32Array;\n    exports.assign(exports, fnTyped);\n  } else {\n    exports.Buf8  = Array;\n    exports.Buf16 = Array;\n    exports.Buf32 = Array;\n    exports.assign(exports, fnUntyped);\n  }\n};\n\nexports.setTyped(TYPED_OK);\n","// String encode/decode helpers\n'use strict';\n\n\nvar utils = require('./common');\n\n\n// Quick check if we can use fast array to bin string conversion\n//\n// - apply(Array) can fail on Android 2.2\n// - apply(Uint8Array) can fail on iOS 5.1 Safari\n//\nvar STR_APPLY_OK = true;\nvar STR_APPLY_UIA_OK = true;\n\ntry { String.fromCharCode.apply(null, [ 0 ]); } catch (__) { STR_APPLY_OK = false; }\ntry { String.fromCharCode.apply(null, new Uint8Array(1)); } catch (__) { STR_APPLY_UIA_OK = false; }\n\n\n// Table with utf8 lengths (calculated by first byte of sequence)\n// Note, that 5 & 6-byte values and some 4-byte values can not be represented in JS,\n// because max possible codepoint is 0x10ffff\nvar _utf8len = new utils.Buf8(256);\nfor (var q = 0; q < 256; q++) {\n  _utf8len[q] = (q >= 252 ? 6 : q >= 248 ? 5 : q >= 240 ? 4 : q >= 224 ? 3 : q >= 192 ? 2 : 1);\n}\n_utf8len[254] = _utf8len[254] = 1; // Invalid sequence start\n\n\n// convert string to array (typed, when possible)\nexports.string2buf = function (str) {\n  var buf, c, c2, m_pos, i, str_len = str.length, buf_len = 0;\n\n  // count binary size\n  for (m_pos = 0; m_pos < str_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;\n  }\n\n  // allocate buffer\n  buf = new utils.Buf8(buf_len);\n\n  // convert\n  for (i = 0, m_pos = 0; i < buf_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    if (c < 0x80) {\n      /* one byte */\n      buf[i++] = c;\n    } else if (c < 0x800) {\n      /* two bytes */\n      buf[i++] = 0xC0 | (c >>> 6);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else if (c < 0x10000) {\n      /* three bytes */\n      buf[i++] = 0xE0 | (c >>> 12);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else {\n      /* four bytes */\n      buf[i++] = 0xf0 | (c >>> 18);\n      buf[i++] = 0x80 | (c >>> 12 & 0x3f);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    }\n  }\n\n  return buf;\n};\n\n// Helper (used in 2 places)\nfunction buf2binstring(buf, len) {\n  // On Chrome, the arguments in a function call that are allowed is `65534`.\n  // If the length of the buffer is smaller than that, we can use this optimization,\n  // otherwise we will take a slower path.\n  if (len < 65534) {\n    if ((buf.subarray && STR_APPLY_UIA_OK) || (!buf.subarray && STR_APPLY_OK)) {\n      return String.fromCharCode.apply(null, utils.shrinkBuf(buf, len));\n    }\n  }\n\n  var result = '';\n  for (var i = 0; i < len; i++) {\n    result += String.fromCharCode(buf[i]);\n  }\n  return result;\n}\n\n\n// Convert byte array to binary string\nexports.buf2binstring = function (buf) {\n  return buf2binstring(buf, buf.length);\n};\n\n\n// Convert binary string (typed, when possible)\nexports.binstring2buf = function (str) {\n  var buf = new utils.Buf8(str.length);\n  for (var i = 0, len = buf.length; i < len; i++) {\n    buf[i] = str.charCodeAt(i);\n  }\n  return buf;\n};\n\n\n// convert array to string\nexports.buf2string = function (buf, max) {\n  var i, out, c, c_len;\n  var len = max || buf.length;\n\n  // Reserve max possible length (2 words per char)\n  // NB: by unknown reasons, Array is significantly faster for\n  //     String.fromCharCode.apply than Uint16Array.\n  var utf16buf = new Array(len * 2);\n\n  for (out = 0, i = 0; i < len;) {\n    c = buf[i++];\n    // quick process ascii\n    if (c < 0x80) { utf16buf[out++] = c; continue; }\n\n    c_len = _utf8len[c];\n    // skip 5 & 6 byte codes\n    if (c_len > 4) { utf16buf[out++] = 0xfffd; i += c_len - 1; continue; }\n\n    // apply mask on first byte\n    c &= c_len === 2 ? 0x1f : c_len === 3 ? 0x0f : 0x07;\n    // join the rest\n    while (c_len > 1 && i < len) {\n      c = (c << 6) | (buf[i++] & 0x3f);\n      c_len--;\n    }\n\n    // terminated by end of string?\n    if (c_len > 1) { utf16buf[out++] = 0xfffd; continue; }\n\n    if (c < 0x10000) {\n      utf16buf[out++] = c;\n    } else {\n      c -= 0x10000;\n      utf16buf[out++] = 0xd800 | ((c >> 10) & 0x3ff);\n      utf16buf[out++] = 0xdc00 | (c & 0x3ff);\n    }\n  }\n\n  return buf2binstring(utf16buf, out);\n};\n\n\n// Calculate max possible position in utf8 buffer,\n// that will not break sequence. If that's not possible\n// - (very small limits) return max size as is.\n//\n// buf[] - utf8 bytes array\n// max   - length limit (mandatory);\nexports.utf8border = function (buf, max) {\n  var pos;\n\n  max = max || buf.length;\n  if (max > buf.length) { max = buf.length; }\n\n  // go back from last position, until start of sequence found\n  pos = max - 1;\n  while (pos >= 0 && (buf[pos] & 0xC0) === 0x80) { pos--; }\n\n  // Very small and broken sequence,\n  // return max, because we should return something anyway.\n  if (pos < 0) { return max; }\n\n  // If we came to start of buffer - that means buffer is too small,\n  // return max too.\n  if (pos === 0) { return max; }\n\n  return (pos + _utf8len[buf[pos]] > max) ? pos : max;\n};\n","'use strict';\n\n// Note: adler32 takes 12% for level 0 and 2% for level 6.\n// It isn't worth it to make additional optimizations as in original.\n// Small size is preferable.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction adler32(adler, buf, len, pos) {\n  var s1 = (adler & 0xffff) |0,\n      s2 = ((adler >>> 16) & 0xffff) |0,\n      n = 0;\n\n  while (len !== 0) {\n    // Set limit ~ twice less than 5552, to keep\n    // s2 in 31-bits, because we force signed ints.\n    // in other case %= will fail.\n    n = len > 2000 ? 2000 : len;\n    len -= n;\n\n    do {\n      s1 = (s1 + buf[pos++]) |0;\n      s2 = (s2 + s1) |0;\n    } while (--n);\n\n    s1 %= 65521;\n    s2 %= 65521;\n  }\n\n  return (s1 | (s2 << 16)) |0;\n}\n\n\nmodule.exports = adler32;\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nmodule.exports = {\n\n  /* Allowed flush values; see deflate() and inflate() below for details */\n  Z_NO_FLUSH:         0,\n  Z_PARTIAL_FLUSH:    1,\n  Z_SYNC_FLUSH:       2,\n  Z_FULL_FLUSH:       3,\n  Z_FINISH:           4,\n  Z_BLOCK:            5,\n  Z_TREES:            6,\n\n  /* Return codes for the compression/decompression functions. Negative values\n  * are errors, positive values are used for special but normal events.\n  */\n  Z_OK:               0,\n  Z_STREAM_END:       1,\n  Z_NEED_DICT:        2,\n  Z_ERRNO:           -1,\n  Z_STREAM_ERROR:    -2,\n  Z_DATA_ERROR:      -3,\n  //Z_MEM_ERROR:     -4,\n  Z_BUF_ERROR:       -5,\n  //Z_VERSION_ERROR: -6,\n\n  /* compression levels */\n  Z_NO_COMPRESSION:         0,\n  Z_BEST_SPEED:             1,\n  Z_BEST_COMPRESSION:       9,\n  Z_DEFAULT_COMPRESSION:   -1,\n\n\n  Z_FILTERED:               1,\n  Z_HUFFMAN_ONLY:           2,\n  Z_RLE:                    3,\n  Z_FIXED:                  4,\n  Z_DEFAULT_STRATEGY:       0,\n\n  /* Possible values of the data_type field (though see inflate()) */\n  Z_BINARY:                 0,\n  Z_TEXT:                   1,\n  //Z_ASCII:                1, // = Z_TEXT (deprecated)\n  Z_UNKNOWN:                2,\n\n  /* The deflate compression method */\n  Z_DEFLATED:               8\n  //Z_NULL:                 null // Use -1 or null inline, depending on var type\n};\n","'use strict';\n\n// Note: we can't get significant speed boost here.\n// So write code to minimize size - no pregenerated tables\n// and array tools dependencies.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// Use ordinary array, since untyped makes no boost here\nfunction makeTable() {\n  var c, table = [];\n\n  for (var n = 0; n < 256; n++) {\n    c = n;\n    for (var k = 0; k < 8; k++) {\n      c = ((c & 1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));\n    }\n    table[n] = c;\n  }\n\n  return table;\n}\n\n// Create table on load. Just 255 signed longs. Not a problem.\nvar crcTable = makeTable();\n\n\nfunction crc32(crc, buf, len, pos) {\n  var t = crcTable,\n      end = pos + len;\n\n  crc ^= -1;\n\n  for (var i = pos; i < end; i++) {\n    crc = (crc >>> 8) ^ t[(crc ^ buf[i]) & 0xFF];\n  }\n\n  return (crc ^ (-1)); // >>> 0;\n}\n\n\nmodule.exports = crc32;\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils   = require('../utils/common');\nvar trees   = require('./trees');\nvar adler32 = require('./adler32');\nvar crc32   = require('./crc32');\nvar msg     = require('./messages');\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n/* Allowed flush values; see deflate() and inflate() below for details */\nvar Z_NO_FLUSH      = 0;\nvar Z_PARTIAL_FLUSH = 1;\n//var Z_SYNC_FLUSH    = 2;\nvar Z_FULL_FLUSH    = 3;\nvar Z_FINISH        = 4;\nvar Z_BLOCK         = 5;\n//var Z_TREES         = 6;\n\n\n/* Return codes for the compression/decompression functions. Negative values\n * are errors, positive values are used for special but normal events.\n */\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\n//var Z_NEED_DICT     = 2;\n//var Z_ERRNO         = -1;\nvar Z_STREAM_ERROR  = -2;\nvar Z_DATA_ERROR    = -3;\n//var Z_MEM_ERROR     = -4;\nvar Z_BUF_ERROR     = -5;\n//var Z_VERSION_ERROR = -6;\n\n\n/* compression levels */\n//var Z_NO_COMPRESSION      = 0;\n//var Z_BEST_SPEED          = 1;\n//var Z_BEST_COMPRESSION    = 9;\nvar Z_DEFAULT_COMPRESSION = -1;\n\n\nvar Z_FILTERED            = 1;\nvar Z_HUFFMAN_ONLY        = 2;\nvar Z_RLE                 = 3;\nvar Z_FIXED               = 4;\nvar Z_DEFAULT_STRATEGY    = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\n//var Z_BINARY              = 0;\n//var Z_TEXT                = 1;\n//var Z_ASCII               = 1; // = Z_TEXT\nvar Z_UNKNOWN             = 2;\n\n\n/* The deflate compression method */\nvar Z_DEFLATED  = 8;\n\n/*============================================================================*/\n\n\nvar MAX_MEM_LEVEL = 9;\n/* Maximum value for memLevel in deflateInit2 */\nvar MAX_WBITS = 15;\n/* 32K LZ77 window */\nvar DEF_MEM_LEVEL = 8;\n\n\nvar LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\nvar LITERALS      = 256;\n/* number of literal bytes 0..255 */\nvar L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\nvar D_CODES       = 30;\n/* number of distance codes */\nvar BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\nvar HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\nvar MAX_BITS  = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nvar MIN_MATCH = 3;\nvar MAX_MATCH = 258;\nvar MIN_LOOKAHEAD = (MAX_MATCH + MIN_MATCH + 1);\n\nvar PRESET_DICT = 0x20;\n\nvar INIT_STATE = 42;\nvar EXTRA_STATE = 69;\nvar NAME_STATE = 73;\nvar COMMENT_STATE = 91;\nvar HCRC_STATE = 103;\nvar BUSY_STATE = 113;\nvar FINISH_STATE = 666;\n\nvar BS_NEED_MORE      = 1; /* block not completed, need more input or more output */\nvar BS_BLOCK_DONE     = 2; /* block flush performed */\nvar BS_FINISH_STARTED = 3; /* finish started, need only more output at next deflate */\nvar BS_FINISH_DONE    = 4; /* finish done, accept no more input or output */\n\nvar OS_CODE = 0x03; // Unix :) . Don't detect, use this default.\n\nfunction err(strm, errorCode) {\n  strm.msg = msg[errorCode];\n  return errorCode;\n}\n\nfunction rank(f) {\n  return ((f) << 1) - ((f) > 4 ? 9 : 0);\n}\n\nfunction zero(buf) { var len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n\n/* =========================================================================\n * Flush as much pending output as possible. All deflate() output goes\n * through this function so some applications may wish to modify it\n * to avoid allocating a large strm->output buffer and copying into it.\n * (See also read_buf()).\n */\nfunction flush_pending(strm) {\n  var s = strm.state;\n\n  //_tr_flush_bits(s);\n  var len = s.pending;\n  if (len > strm.avail_out) {\n    len = strm.avail_out;\n  }\n  if (len === 0) { return; }\n\n  utils.arraySet(strm.output, s.pending_buf, s.pending_out, len, strm.next_out);\n  strm.next_out += len;\n  s.pending_out += len;\n  strm.total_out += len;\n  strm.avail_out -= len;\n  s.pending -= len;\n  if (s.pending === 0) {\n    s.pending_out = 0;\n  }\n}\n\n\nfunction flush_block_only(s, last) {\n  trees._tr_flush_block(s, (s.block_start >= 0 ? s.block_start : -1), s.strstart - s.block_start, last);\n  s.block_start = s.strstart;\n  flush_pending(s.strm);\n}\n\n\nfunction put_byte(s, b) {\n  s.pending_buf[s.pending++] = b;\n}\n\n\n/* =========================================================================\n * Put a short in the pending buffer. The 16-bit value is put in MSB order.\n * IN assertion: the stream state is correct and there is enough room in\n * pending_buf.\n */\nfunction putShortMSB(s, b) {\n//  put_byte(s, (Byte)(b >> 8));\n//  put_byte(s, (Byte)(b & 0xff));\n  s.pending_buf[s.pending++] = (b >>> 8) & 0xff;\n  s.pending_buf[s.pending++] = b & 0xff;\n}\n\n\n/* ===========================================================================\n * Read a new buffer from the current input stream, update the adler32\n * and total number of bytes read.  All deflate() input goes through\n * this function so some applications may wish to modify it to avoid\n * allocating a large strm->input buffer and copying from it.\n * (See also flush_pending()).\n */\nfunction read_buf(strm, buf, start, size) {\n  var len = strm.avail_in;\n\n  if (len > size) { len = size; }\n  if (len === 0) { return 0; }\n\n  strm.avail_in -= len;\n\n  // zmemcpy(buf, strm->next_in, len);\n  utils.arraySet(buf, strm.input, strm.next_in, len, start);\n  if (strm.state.wrap === 1) {\n    strm.adler = adler32(strm.adler, buf, len, start);\n  }\n\n  else if (strm.state.wrap === 2) {\n    strm.adler = crc32(strm.adler, buf, len, start);\n  }\n\n  strm.next_in += len;\n  strm.total_in += len;\n\n  return len;\n}\n\n\n/* ===========================================================================\n * Set match_start to the longest match starting at the given string and\n * return its length. Matches shorter or equal to prev_length are discarded,\n * in which case the result is equal to prev_length and match_start is\n * garbage.\n * IN assertions: cur_match is the head of the hash chain for the current\n *   string (strstart) and its distance is <= MAX_DIST, and prev_length >= 1\n * OUT assertion: the match length is not greater than s->lookahead.\n */\nfunction longest_match(s, cur_match) {\n  var chain_length = s.max_chain_length;      /* max hash chain length */\n  var scan = s.strstart; /* current string */\n  var match;                       /* matched string */\n  var len;                           /* length of current match */\n  var best_len = s.prev_length;              /* best match length so far */\n  var nice_match = s.nice_match;             /* stop if match long enough */\n  var limit = (s.strstart > (s.w_size - MIN_LOOKAHEAD)) ?\n      s.strstart - (s.w_size - MIN_LOOKAHEAD) : 0/*NIL*/;\n\n  var _win = s.window; // shortcut\n\n  var wmask = s.w_mask;\n  var prev  = s.prev;\n\n  /* Stop when cur_match becomes <= limit. To simplify the code,\n   * we prevent matches with the string of window index 0.\n   */\n\n  var strend = s.strstart + MAX_MATCH;\n  var scan_end1  = _win[scan + best_len - 1];\n  var scan_end   = _win[scan + best_len];\n\n  /* The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of 16.\n   * It is easy to get rid of this optimization if necessary.\n   */\n  // Assert(s->hash_bits >= 8 && MAX_MATCH == 258, \"Code too clever\");\n\n  /* Do not waste too much time if we already have a good match: */\n  if (s.prev_length >= s.good_match) {\n    chain_length >>= 2;\n  }\n  /* Do not look for matches beyond the end of the input. This is necessary\n   * to make deflate deterministic.\n   */\n  if (nice_match > s.lookahead) { nice_match = s.lookahead; }\n\n  // Assert((ulg)s->strstart <= s->window_size-MIN_LOOKAHEAD, \"need lookahead\");\n\n  do {\n    // Assert(cur_match < s->strstart, \"no future\");\n    match = cur_match;\n\n    /* Skip to next match if the match length cannot increase\n     * or if the match length is less than 2.  Note that the checks below\n     * for insufficient lookahead only occur occasionally for performance\n     * reasons.  Therefore uninitialized memory will be accessed, and\n     * conditional jumps will be made that depend on those values.\n     * However the length of the match is limited to the lookahead, so\n     * the output of deflate is not affected by the uninitialized values.\n     */\n\n    if (_win[match + best_len]     !== scan_end  ||\n        _win[match + best_len - 1] !== scan_end1 ||\n        _win[match]                !== _win[scan] ||\n        _win[++match]              !== _win[scan + 1]) {\n      continue;\n    }\n\n    /* The check at best_len-1 can be removed because it will be made\n     * again later. (This heuristic is not always a win.)\n     * It is not necessary to compare scan[2] and match[2] since they\n     * are always equal when the other bytes match, given that\n     * the hash keys are equal and that HASH_BITS >= 8.\n     */\n    scan += 2;\n    match++;\n    // Assert(*scan == *match, \"match[2]?\");\n\n    /* We check for insufficient lookahead only every 8th comparison;\n     * the 256th check will be made at strstart+258.\n     */\n    do {\n      /*jshint noempty:false*/\n    } while (_win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             scan < strend);\n\n    // Assert(scan <= s->window+(unsigned)(s->window_size-1), \"wild scan\");\n\n    len = MAX_MATCH - (strend - scan);\n    scan = strend - MAX_MATCH;\n\n    if (len > best_len) {\n      s.match_start = cur_match;\n      best_len = len;\n      if (len >= nice_match) {\n        break;\n      }\n      scan_end1  = _win[scan + best_len - 1];\n      scan_end   = _win[scan + best_len];\n    }\n  } while ((cur_match = prev[cur_match & wmask]) > limit && --chain_length !== 0);\n\n  if (best_len <= s.lookahead) {\n    return best_len;\n  }\n  return s.lookahead;\n}\n\n\n/* ===========================================================================\n * Fill the window when the lookahead becomes insufficient.\n * Updates strstart and lookahead.\n *\n * IN assertion: lookahead < MIN_LOOKAHEAD\n * OUT assertions: strstart <= window_size-MIN_LOOKAHEAD\n *    At least one byte has been read, or avail_in == 0; reads are\n *    performed for at least two bytes (required for the zip translate_eol\n *    option -- not supported here).\n */\nfunction fill_window(s) {\n  var _w_size = s.w_size;\n  var p, n, m, more, str;\n\n  //Assert(s->lookahead < MIN_LOOKAHEAD, \"already enough lookahead\");\n\n  do {\n    more = s.window_size - s.lookahead - s.strstart;\n\n    // JS ints have 32 bit, block below not needed\n    /* Deal with !@#$% 64K limit: */\n    //if (sizeof(int) <= 2) {\n    //    if (more == 0 && s->strstart == 0 && s->lookahead == 0) {\n    //        more = wsize;\n    //\n    //  } else if (more == (unsigned)(-1)) {\n    //        /* Very unlikely, but possible on 16 bit machine if\n    //         * strstart == 0 && lookahead == 1 (input done a byte at time)\n    //         */\n    //        more--;\n    //    }\n    //}\n\n\n    /* If the window is almost full and there is insufficient lookahead,\n     * move the upper half to the lower one to make room in the upper half.\n     */\n    if (s.strstart >= _w_size + (_w_size - MIN_LOOKAHEAD)) {\n\n      utils.arraySet(s.window, s.window, _w_size, _w_size, 0);\n      s.match_start -= _w_size;\n      s.strstart -= _w_size;\n      /* we now have strstart >= MAX_DIST */\n      s.block_start -= _w_size;\n\n      /* Slide the hash table (could be avoided with 32 bit values\n       at the expense of memory usage). We slide even when level == 0\n       to keep the hash table consistent if we switch back to level > 0\n       later. (Using level 0 permanently is not an optimal usage of\n       zlib, so we don't care about this pathological case.)\n       */\n\n      n = s.hash_size;\n      p = n;\n      do {\n        m = s.head[--p];\n        s.head[p] = (m >= _w_size ? m - _w_size : 0);\n      } while (--n);\n\n      n = _w_size;\n      p = n;\n      do {\n        m = s.prev[--p];\n        s.prev[p] = (m >= _w_size ? m - _w_size : 0);\n        /* If n is not on any hash chain, prev[n] is garbage but\n         * its value will never be used.\n         */\n      } while (--n);\n\n      more += _w_size;\n    }\n    if (s.strm.avail_in === 0) {\n      break;\n    }\n\n    /* If there was no sliding:\n     *    strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&\n     *    more == window_size - lookahead - strstart\n     * => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)\n     * => more >= window_size - 2*WSIZE + 2\n     * In the BIG_MEM or MMAP case (not yet supported),\n     *   window_size == input_size + MIN_LOOKAHEAD  &&\n     *   strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.\n     * Otherwise, window_size == 2*WSIZE so more >= 2.\n     * If there was sliding, more >= WSIZE. So in all cases, more >= 2.\n     */\n    //Assert(more >= 2, \"more < 2\");\n    n = read_buf(s.strm, s.window, s.strstart + s.lookahead, more);\n    s.lookahead += n;\n\n    /* Initialize the hash value now that we have some input: */\n    if (s.lookahead + s.insert >= MIN_MATCH) {\n      str = s.strstart - s.insert;\n      s.ins_h = s.window[str];\n\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + 1]); */\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + 1]) & s.hash_mask;\n//#if MIN_MATCH != 3\n//        Call update_hash() MIN_MATCH-3 more times\n//#endif\n      while (s.insert) {\n        /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n        s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + MIN_MATCH - 1]) & s.hash_mask;\n\n        s.prev[str & s.w_mask] = s.head[s.ins_h];\n        s.head[s.ins_h] = str;\n        str++;\n        s.insert--;\n        if (s.lookahead + s.insert < MIN_MATCH) {\n          break;\n        }\n      }\n    }\n    /* If the whole input has less than MIN_MATCH bytes, ins_h is garbage,\n     * but this is not important since only literal bytes will be emitted.\n     */\n\n  } while (s.lookahead < MIN_LOOKAHEAD && s.strm.avail_in !== 0);\n\n  /* If the WIN_INIT bytes after the end of the current data have never been\n   * written, then zero those bytes in order to avoid memory check reports of\n   * the use of uninitialized (or uninitialised as Julian writes) bytes by\n   * the longest match routines.  Update the high water mark for the next\n   * time through here.  WIN_INIT is set to MAX_MATCH since the longest match\n   * routines allow scanning to strstart + MAX_MATCH, ignoring lookahead.\n   */\n//  if (s.high_water < s.window_size) {\n//    var curr = s.strstart + s.lookahead;\n//    var init = 0;\n//\n//    if (s.high_water < curr) {\n//      /* Previous high water mark below current data -- zero WIN_INIT\n//       * bytes or up to end of window, whichever is less.\n//       */\n//      init = s.window_size - curr;\n//      if (init > WIN_INIT)\n//        init = WIN_INIT;\n//      zmemzero(s->window + curr, (unsigned)init);\n//      s->high_water = curr + init;\n//    }\n//    else if (s->high_water < (ulg)curr + WIN_INIT) {\n//      /* High water mark at or above current data, but below current data\n//       * plus WIN_INIT -- zero out to current data plus WIN_INIT, or up\n//       * to end of window, whichever is less.\n//       */\n//      init = (ulg)curr + WIN_INIT - s->high_water;\n//      if (init > s->window_size - s->high_water)\n//        init = s->window_size - s->high_water;\n//      zmemzero(s->window + s->high_water, (unsigned)init);\n//      s->high_water += init;\n//    }\n//  }\n//\n//  Assert((ulg)s->strstart <= s->window_size - MIN_LOOKAHEAD,\n//    \"not enough room for search\");\n}\n\n/* ===========================================================================\n * Copy without compression as much as possible from the input stream, return\n * the current block state.\n * This function does not insert new strings in the dictionary since\n * uncompressible data is probably not useful. This function is used\n * only for the level=0 compression option.\n * NOTE: this function should be optimized to avoid extra copying from\n * window to pending_buf.\n */\nfunction deflate_stored(s, flush) {\n  /* Stored blocks are limited to 0xffff bytes, pending_buf is limited\n   * to pending_buf_size, and each stored block has a 5 byte header:\n   */\n  var max_block_size = 0xffff;\n\n  if (max_block_size > s.pending_buf_size - 5) {\n    max_block_size = s.pending_buf_size - 5;\n  }\n\n  /* Copy as much as possible from input to output: */\n  for (;;) {\n    /* Fill the window as much as possible: */\n    if (s.lookahead <= 1) {\n\n      //Assert(s->strstart < s->w_size+MAX_DIST(s) ||\n      //  s->block_start >= (long)s->w_size, \"slide too late\");\n//      if (!(s.strstart < s.w_size + (s.w_size - MIN_LOOKAHEAD) ||\n//        s.block_start >= s.w_size)) {\n//        throw  new Error(\"slide too late\");\n//      }\n\n      fill_window(s);\n      if (s.lookahead === 0 && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n\n      if (s.lookahead === 0) {\n        break;\n      }\n      /* flush the current block */\n    }\n    //Assert(s->block_start >= 0L, \"block gone\");\n//    if (s.block_start < 0) throw new Error(\"block gone\");\n\n    s.strstart += s.lookahead;\n    s.lookahead = 0;\n\n    /* Emit a stored block if pending_buf will be full: */\n    var max_start = s.block_start + max_block_size;\n\n    if (s.strstart === 0 || s.strstart >= max_start) {\n      /* strstart == 0 is possible when wraparound on 16-bit machine */\n      s.lookahead = s.strstart - max_start;\n      s.strstart = max_start;\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n\n\n    }\n    /* Flush if we may have to slide, otherwise block_start may become\n     * negative and the data will be gone:\n     */\n    if (s.strstart - s.block_start >= (s.w_size - MIN_LOOKAHEAD)) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n\n  s.insert = 0;\n\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n\n  if (s.strstart > s.block_start) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_NEED_MORE;\n}\n\n/* ===========================================================================\n * Compress as much as possible from the input stream, return the current\n * block state.\n * This function does not perform lazy evaluation of matches and inserts\n * new strings in the dictionary only for unmatched strings or for short\n * matches. It is used only for the fast compression options.\n */\nfunction deflate_fast(s, flush) {\n  var hash_head;        /* head of the hash chain */\n  var bflush;           /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) {\n        break; /* flush the current block */\n      }\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     * At this point we have always match_length < MIN_MATCH\n     */\n    if (hash_head !== 0/*NIL*/ && ((s.strstart - hash_head) <= (s.w_size - MIN_LOOKAHEAD))) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n    }\n    if (s.match_length >= MIN_MATCH) {\n      // check_match(s, s.strstart, s.match_start, s.match_length); // for debug only\n\n      /*** _tr_tally_dist(s, s.strstart - s.match_start,\n                     s.match_length - MIN_MATCH, bflush); ***/\n      bflush = trees._tr_tally(s, s.strstart - s.match_start, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n\n      /* Insert new strings in the hash table only if the match length\n       * is not too large. This saves time but degrades compression.\n       */\n      if (s.match_length <= s.max_lazy_match/*max_insert_length*/ && s.lookahead >= MIN_MATCH) {\n        s.match_length--; /* string at strstart already in table */\n        do {\n          s.strstart++;\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n          /* strstart never exceeds WSIZE-MAX_MATCH, so there are\n           * always MIN_MATCH bytes ahead.\n           */\n        } while (--s.match_length !== 0);\n        s.strstart++;\n      } else\n      {\n        s.strstart += s.match_length;\n        s.match_length = 0;\n        s.ins_h = s.window[s.strstart];\n        /* UPDATE_HASH(s, s.ins_h, s.window[s.strstart+1]); */\n        s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + 1]) & s.hash_mask;\n\n//#if MIN_MATCH != 3\n//                Call UPDATE_HASH() MIN_MATCH-3 more times\n//#endif\n        /* If lookahead < MIN_MATCH, ins_h is garbage, but it does not\n         * matter since it will be recomputed at next deflate call.\n         */\n      }\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s.window[s.strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = ((s.strstart < (MIN_MATCH - 1)) ? s.strstart : MIN_MATCH - 1);\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* ===========================================================================\n * Same as above, but achieves better compression. We use a lazy\n * evaluation for matches: a match is finally adopted only if there is\n * no better match at the next window position.\n */\nfunction deflate_slow(s, flush) {\n  var hash_head;          /* head of hash chain */\n  var bflush;              /* set if current block must be flushed */\n\n  var max_insert;\n\n  /* Process the input block. */\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     */\n    s.prev_length = s.match_length;\n    s.prev_match = s.match_start;\n    s.match_length = MIN_MATCH - 1;\n\n    if (hash_head !== 0/*NIL*/ && s.prev_length < s.max_lazy_match &&\n        s.strstart - hash_head <= (s.w_size - MIN_LOOKAHEAD)/*MAX_DIST(s)*/) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n\n      if (s.match_length <= 5 &&\n         (s.strategy === Z_FILTERED || (s.match_length === MIN_MATCH && s.strstart - s.match_start > 4096/*TOO_FAR*/))) {\n\n        /* If prev_match is also MIN_MATCH, match_start is garbage\n         * but we will ignore the current match anyway.\n         */\n        s.match_length = MIN_MATCH - 1;\n      }\n    }\n    /* If there was a match at the previous step and the current\n     * match is not better, output the previous match:\n     */\n    if (s.prev_length >= MIN_MATCH && s.match_length <= s.prev_length) {\n      max_insert = s.strstart + s.lookahead - MIN_MATCH;\n      /* Do not insert strings in hash table beyond this. */\n\n      //check_match(s, s.strstart-1, s.prev_match, s.prev_length);\n\n      /***_tr_tally_dist(s, s.strstart - 1 - s.prev_match,\n                     s.prev_length - MIN_MATCH, bflush);***/\n      bflush = trees._tr_tally(s, s.strstart - 1 - s.prev_match, s.prev_length - MIN_MATCH);\n      /* Insert in hash table all strings up to the end of the match.\n       * strstart-1 and strstart are already inserted. If there is not\n       * enough lookahead, the last two strings are not inserted in\n       * the hash table.\n       */\n      s.lookahead -= s.prev_length - 1;\n      s.prev_length -= 2;\n      do {\n        if (++s.strstart <= max_insert) {\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n        }\n      } while (--s.prev_length !== 0);\n      s.match_available = 0;\n      s.match_length = MIN_MATCH - 1;\n      s.strstart++;\n\n      if (bflush) {\n        /*** FLUSH_BLOCK(s, 0); ***/\n        flush_block_only(s, false);\n        if (s.strm.avail_out === 0) {\n          return BS_NEED_MORE;\n        }\n        /***/\n      }\n\n    } else if (s.match_available) {\n      /* If there was no match at the previous position, output a\n       * single literal. If there was a match but the current match\n       * is longer, truncate the previous match to a single literal.\n       */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n      /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart - 1]);\n\n      if (bflush) {\n        /*** FLUSH_BLOCK_ONLY(s, 0) ***/\n        flush_block_only(s, false);\n        /***/\n      }\n      s.strstart++;\n      s.lookahead--;\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n    } else {\n      /* There is no previous match to compare with, wait for\n       * the next step to decide.\n       */\n      s.match_available = 1;\n      s.strstart++;\n      s.lookahead--;\n    }\n  }\n  //Assert (flush != Z_NO_FLUSH, \"no flush?\");\n  if (s.match_available) {\n    //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n    /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n    bflush = trees._tr_tally(s, 0, s.window[s.strstart - 1]);\n\n    s.match_available = 0;\n  }\n  s.insert = s.strstart < MIN_MATCH - 1 ? s.strstart : MIN_MATCH - 1;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_BLOCK_DONE;\n}\n\n\n/* ===========================================================================\n * For Z_RLE, simply look for runs of bytes, generate matches only of distance\n * one.  Do not maintain a hash table.  (It will be regenerated if this run of\n * deflate switches away from Z_RLE.)\n */\nfunction deflate_rle(s, flush) {\n  var bflush;            /* set if current block must be flushed */\n  var prev;              /* byte at distance one to match */\n  var scan, strend;      /* scan goes up to strend for length of run */\n\n  var _win = s.window;\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the longest run, plus one for the unrolled loop.\n     */\n    if (s.lookahead <= MAX_MATCH) {\n      fill_window(s);\n      if (s.lookahead <= MAX_MATCH && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* See how many times the previous byte repeats */\n    s.match_length = 0;\n    if (s.lookahead >= MIN_MATCH && s.strstart > 0) {\n      scan = s.strstart - 1;\n      prev = _win[scan];\n      if (prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan]) {\n        strend = s.strstart + MAX_MATCH;\n        do {\n          /*jshint noempty:false*/\n        } while (prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 scan < strend);\n        s.match_length = MAX_MATCH - (strend - scan);\n        if (s.match_length > s.lookahead) {\n          s.match_length = s.lookahead;\n        }\n      }\n      //Assert(scan <= s->window+(uInt)(s->window_size-1), \"wild scan\");\n    }\n\n    /* Emit match if have run of MIN_MATCH or longer, else emit literal */\n    if (s.match_length >= MIN_MATCH) {\n      //check_match(s, s.strstart, s.strstart - 1, s.match_length);\n\n      /*** _tr_tally_dist(s, 1, s.match_length - MIN_MATCH, bflush); ***/\n      bflush = trees._tr_tally(s, 1, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n      s.strstart += s.match_length;\n      s.match_length = 0;\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* ===========================================================================\n * For Z_HUFFMAN_ONLY, do not look for matches.  Do not maintain a hash table.\n * (It will be regenerated if this run of deflate switches away from Huffman.)\n */\nfunction deflate_huff(s, flush) {\n  var bflush;             /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we have a literal to write. */\n    if (s.lookahead === 0) {\n      fill_window(s);\n      if (s.lookahead === 0) {\n        if (flush === Z_NO_FLUSH) {\n          return BS_NEED_MORE;\n        }\n        break;      /* flush the current block */\n      }\n    }\n\n    /* Output a literal byte */\n    s.match_length = 0;\n    //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n    /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n    bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n    s.lookahead--;\n    s.strstart++;\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* Values for max_lazy_match, good_match and max_chain_length, depending on\n * the desired pack level (0..9). The values given below have been tuned to\n * exclude worst case performance for pathological files. Better values may be\n * found for specific files.\n */\nfunction Config(good_length, max_lazy, nice_length, max_chain, func) {\n  this.good_length = good_length;\n  this.max_lazy = max_lazy;\n  this.nice_length = nice_length;\n  this.max_chain = max_chain;\n  this.func = func;\n}\n\nvar configuration_table;\n\nconfiguration_table = [\n  /*      good lazy nice chain */\n  new Config(0, 0, 0, 0, deflate_stored),          /* 0 store only */\n  new Config(4, 4, 8, 4, deflate_fast),            /* 1 max speed, no lazy matches */\n  new Config(4, 5, 16, 8, deflate_fast),           /* 2 */\n  new Config(4, 6, 32, 32, deflate_fast),          /* 3 */\n\n  new Config(4, 4, 16, 16, deflate_slow),          /* 4 lazy matches */\n  new Config(8, 16, 32, 32, deflate_slow),         /* 5 */\n  new Config(8, 16, 128, 128, deflate_slow),       /* 6 */\n  new Config(8, 32, 128, 256, deflate_slow),       /* 7 */\n  new Config(32, 128, 258, 1024, deflate_slow),    /* 8 */\n  new Config(32, 258, 258, 4096, deflate_slow)     /* 9 max compression */\n];\n\n\n/* ===========================================================================\n * Initialize the \"longest match\" routines for a new zlib stream\n */\nfunction lm_init(s) {\n  s.window_size = 2 * s.w_size;\n\n  /*** CLEAR_HASH(s); ***/\n  zero(s.head); // Fill with NIL (= 0);\n\n  /* Set the default configuration parameters:\n   */\n  s.max_lazy_match = configuration_table[s.level].max_lazy;\n  s.good_match = configuration_table[s.level].good_length;\n  s.nice_match = configuration_table[s.level].nice_length;\n  s.max_chain_length = configuration_table[s.level].max_chain;\n\n  s.strstart = 0;\n  s.block_start = 0;\n  s.lookahead = 0;\n  s.insert = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  s.ins_h = 0;\n}\n\n\nfunction DeflateState() {\n  this.strm = null;            /* pointer back to this zlib stream */\n  this.status = 0;            /* as the name implies */\n  this.pending_buf = null;      /* output still pending */\n  this.pending_buf_size = 0;  /* size of pending_buf */\n  this.pending_out = 0;       /* next pending byte to output to the stream */\n  this.pending = 0;           /* nb of bytes in the pending buffer */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.gzhead = null;         /* gzip header information to write */\n  this.gzindex = 0;           /* where in extra, name, or comment */\n  this.method = Z_DEFLATED; /* can only be DEFLATED */\n  this.last_flush = -1;   /* value of flush param for previous deflate call */\n\n  this.w_size = 0;  /* LZ77 window size (32K by default) */\n  this.w_bits = 0;  /* log2(w_size)  (8..16) */\n  this.w_mask = 0;  /* w_size - 1 */\n\n  this.window = null;\n  /* Sliding window. Input bytes are read into the second half of the window,\n   * and move to the first half later to keep a dictionary of at least wSize\n   * bytes. With this organization, matches are limited to a distance of\n   * wSize-MAX_MATCH bytes, but this ensures that IO is always\n   * performed with a length multiple of the block size.\n   */\n\n  this.window_size = 0;\n  /* Actual size of window: 2*wSize, except when the user input buffer\n   * is directly used as sliding window.\n   */\n\n  this.prev = null;\n  /* Link to older string with same hash index. To limit the size of this\n   * array to 64K, this link is maintained only for the last 32K strings.\n   * An index in this array is thus a window index modulo 32K.\n   */\n\n  this.head = null;   /* Heads of the hash chains or NIL. */\n\n  this.ins_h = 0;       /* hash index of string to be inserted */\n  this.hash_size = 0;   /* number of elements in hash table */\n  this.hash_bits = 0;   /* log2(hash_size) */\n  this.hash_mask = 0;   /* hash_size-1 */\n\n  this.hash_shift = 0;\n  /* Number of bits by which ins_h must be shifted at each input\n   * step. It must be such that after MIN_MATCH steps, the oldest\n   * byte no longer takes part in the hash key, that is:\n   *   hash_shift * MIN_MATCH >= hash_bits\n   */\n\n  this.block_start = 0;\n  /* Window position at the beginning of the current output block. Gets\n   * negative when the window is moved backwards.\n   */\n\n  this.match_length = 0;      /* length of best match */\n  this.prev_match = 0;        /* previous match */\n  this.match_available = 0;   /* set if previous match exists */\n  this.strstart = 0;          /* start of string to insert */\n  this.match_start = 0;       /* start of matching string */\n  this.lookahead = 0;         /* number of valid bytes ahead in window */\n\n  this.prev_length = 0;\n  /* Length of the best match at previous step. Matches not greater than this\n   * are discarded. This is used in the lazy match evaluation.\n   */\n\n  this.max_chain_length = 0;\n  /* To speed up deflation, hash chains are never searched beyond this\n   * length.  A higher limit improves compression ratio but degrades the\n   * speed.\n   */\n\n  this.max_lazy_match = 0;\n  /* Attempt to find a better match only when the current match is strictly\n   * smaller than this value. This mechanism is used only for compression\n   * levels >= 4.\n   */\n  // That's alias to max_lazy_match, don't use directly\n  //this.max_insert_length = 0;\n  /* Insert new strings in the hash table only if the match length is not\n   * greater than this length. This saves time but degrades compression.\n   * max_insert_length is used only for compression levels <= 3.\n   */\n\n  this.level = 0;     /* compression level (1..9) */\n  this.strategy = 0;  /* favor or force Huffman coding*/\n\n  this.good_match = 0;\n  /* Use a faster search when the previous match is longer than this */\n\n  this.nice_match = 0; /* Stop searching when current match exceeds this */\n\n              /* used by trees.c: */\n\n  /* Didn't use ct_data typedef below to suppress compiler warning */\n\n  // struct ct_data_s dyn_ltree[HEAP_SIZE];   /* literal and length tree */\n  // struct ct_data_s dyn_dtree[2*D_CODES+1]; /* distance tree */\n  // struct ct_data_s bl_tree[2*BL_CODES+1];  /* Huffman tree for bit lengths */\n\n  // Use flat array of DOUBLE size, with interleaved fata,\n  // because JS does not support effective\n  this.dyn_ltree  = new utils.Buf16(HEAP_SIZE * 2);\n  this.dyn_dtree  = new utils.Buf16((2 * D_CODES + 1) * 2);\n  this.bl_tree    = new utils.Buf16((2 * BL_CODES + 1) * 2);\n  zero(this.dyn_ltree);\n  zero(this.dyn_dtree);\n  zero(this.bl_tree);\n\n  this.l_desc   = null;         /* desc. for literal tree */\n  this.d_desc   = null;         /* desc. for distance tree */\n  this.bl_desc  = null;         /* desc. for bit length tree */\n\n  //ush bl_count[MAX_BITS+1];\n  this.bl_count = new utils.Buf16(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  //int heap[2*L_CODES+1];      /* heap used to build the Huffman trees */\n  this.heap = new utils.Buf16(2 * L_CODES + 1);  /* heap used to build the Huffman trees */\n  zero(this.heap);\n\n  this.heap_len = 0;               /* number of elements in the heap */\n  this.heap_max = 0;               /* element of largest frequency */\n  /* The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.\n   * The same heap array is used to build all trees.\n   */\n\n  this.depth = new utils.Buf16(2 * L_CODES + 1); //uch depth[2*L_CODES+1];\n  zero(this.depth);\n  /* Depth of each subtree used as tie breaker for trees of equal frequency\n   */\n\n  this.l_buf = 0;          /* buffer index for literals or lengths */\n\n  this.lit_bufsize = 0;\n  /* Size of match buffer for literals/lengths.  There are 4 reasons for\n   * limiting lit_bufsize to 64K:\n   *   - frequencies can be kept in 16 bit counters\n   *   - if compression is not successful for the first block, all input\n   *     data is still in the window so we can still emit a stored block even\n   *     when input comes from standard input.  (This can also be done for\n   *     all blocks if lit_bufsize is not greater than 32K.)\n   *   - if compression is not successful for a file smaller than 64K, we can\n   *     even emit a stored file instead of a stored block (saving 5 bytes).\n   *     This is applicable only for zip (not gzip or zlib).\n   *   - creating new Huffman trees less frequently may not provide fast\n   *     adaptation to changes in the input data statistics. (Take for\n   *     example a binary file with poorly compressible code followed by\n   *     a highly compressible string table.) Smaller buffer sizes give\n   *     fast adaptation but have of course the overhead of transmitting\n   *     trees more frequently.\n   *   - I can't count above 4\n   */\n\n  this.last_lit = 0;      /* running index in l_buf */\n\n  this.d_buf = 0;\n  /* Buffer index for distances. To simplify the code, d_buf and l_buf have\n   * the same number of elements. To use different lengths, an extra flag\n   * array would be necessary.\n   */\n\n  this.opt_len = 0;       /* bit length of current block with optimal trees */\n  this.static_len = 0;    /* bit length of current block with static trees */\n  this.matches = 0;       /* number of string matches in current block */\n  this.insert = 0;        /* bytes at end of window left to insert */\n\n\n  this.bi_buf = 0;\n  /* Output buffer. bits are inserted starting at the bottom (least\n   * significant bits).\n   */\n  this.bi_valid = 0;\n  /* Number of valid bits in bi_buf.  All bits above the last valid bit\n   * are always zero.\n   */\n\n  // Used for window memory init. We safely ignore it for JS. That makes\n  // sense only for pointers and memory check tools.\n  //this.high_water = 0;\n  /* High water mark offset in window for initialized bytes -- bytes above\n   * this are set to zero in order to avoid memory check warnings when\n   * longest match routines access bytes past the input.  This is then\n   * updated to the new high water mark.\n   */\n}\n\n\nfunction deflateResetKeep(strm) {\n  var s;\n\n  if (!strm || !strm.state) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n  strm.total_in = strm.total_out = 0;\n  strm.data_type = Z_UNKNOWN;\n\n  s = strm.state;\n  s.pending = 0;\n  s.pending_out = 0;\n\n  if (s.wrap < 0) {\n    s.wrap = -s.wrap;\n    /* was made negative by deflate(..., Z_FINISH); */\n  }\n  s.status = (s.wrap ? INIT_STATE : BUSY_STATE);\n  strm.adler = (s.wrap === 2) ?\n    0  // crc32(0, Z_NULL, 0)\n  :\n    1; // adler32(0, Z_NULL, 0)\n  s.last_flush = Z_NO_FLUSH;\n  trees._tr_init(s);\n  return Z_OK;\n}\n\n\nfunction deflateReset(strm) {\n  var ret = deflateResetKeep(strm);\n  if (ret === Z_OK) {\n    lm_init(strm.state);\n  }\n  return ret;\n}\n\n\nfunction deflateSetHeader(strm, head) {\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  if (strm.state.wrap !== 2) { return Z_STREAM_ERROR; }\n  strm.state.gzhead = head;\n  return Z_OK;\n}\n\n\nfunction deflateInit2(strm, level, method, windowBits, memLevel, strategy) {\n  if (!strm) { // === Z_NULL\n    return Z_STREAM_ERROR;\n  }\n  var wrap = 1;\n\n  if (level === Z_DEFAULT_COMPRESSION) {\n    level = 6;\n  }\n\n  if (windowBits < 0) { /* suppress zlib wrapper */\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n\n  else if (windowBits > 15) {\n    wrap = 2;           /* write gzip wrapper instead */\n    windowBits -= 16;\n  }\n\n\n  if (memLevel < 1 || memLevel > MAX_MEM_LEVEL || method !== Z_DEFLATED ||\n    windowBits < 8 || windowBits > 15 || level < 0 || level > 9 ||\n    strategy < 0 || strategy > Z_FIXED) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n\n  if (windowBits === 8) {\n    windowBits = 9;\n  }\n  /* until 256-byte window bug fixed */\n\n  var s = new DeflateState();\n\n  strm.state = s;\n  s.strm = strm;\n\n  s.wrap = wrap;\n  s.gzhead = null;\n  s.w_bits = windowBits;\n  s.w_size = 1 << s.w_bits;\n  s.w_mask = s.w_size - 1;\n\n  s.hash_bits = memLevel + 7;\n  s.hash_size = 1 << s.hash_bits;\n  s.hash_mask = s.hash_size - 1;\n  s.hash_shift = ~~((s.hash_bits + MIN_MATCH - 1) / MIN_MATCH);\n\n  s.window = new utils.Buf8(s.w_size * 2);\n  s.head = new utils.Buf16(s.hash_size);\n  s.prev = new utils.Buf16(s.w_size);\n\n  // Don't need mem init magic for JS.\n  //s.high_water = 0;  /* nothing written to s->window yet */\n\n  s.lit_bufsize = 1 << (memLevel + 6); /* 16K elements by default */\n\n  s.pending_buf_size = s.lit_bufsize * 4;\n\n  //overlay = (ushf *) ZALLOC(strm, s->lit_bufsize, sizeof(ush)+2);\n  //s->pending_buf = (uchf *) overlay;\n  s.pending_buf = new utils.Buf8(s.pending_buf_size);\n\n  // It is offset from `s.pending_buf` (size is `s.lit_bufsize * 2`)\n  //s->d_buf = overlay + s->lit_bufsize/sizeof(ush);\n  s.d_buf = 1 * s.lit_bufsize;\n\n  //s->l_buf = s->pending_buf + (1+sizeof(ush))*s->lit_bufsize;\n  s.l_buf = (1 + 2) * s.lit_bufsize;\n\n  s.level = level;\n  s.strategy = strategy;\n  s.method = method;\n\n  return deflateReset(strm);\n}\n\nfunction deflateInit(strm, level) {\n  return deflateInit2(strm, level, Z_DEFLATED, MAX_WBITS, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY);\n}\n\n\nfunction deflate(strm, flush) {\n  var old_flush, s;\n  var beg, val; // for gzip header write only\n\n  if (!strm || !strm.state ||\n    flush > Z_BLOCK || flush < 0) {\n    return strm ? err(strm, Z_STREAM_ERROR) : Z_STREAM_ERROR;\n  }\n\n  s = strm.state;\n\n  if (!strm.output ||\n      (!strm.input && strm.avail_in !== 0) ||\n      (s.status === FINISH_STATE && flush !== Z_FINISH)) {\n    return err(strm, (strm.avail_out === 0) ? Z_BUF_ERROR : Z_STREAM_ERROR);\n  }\n\n  s.strm = strm; /* just in case */\n  old_flush = s.last_flush;\n  s.last_flush = flush;\n\n  /* Write the header */\n  if (s.status === INIT_STATE) {\n\n    if (s.wrap === 2) { // GZIP header\n      strm.adler = 0;  //crc32(0L, Z_NULL, 0);\n      put_byte(s, 31);\n      put_byte(s, 139);\n      put_byte(s, 8);\n      if (!s.gzhead) { // s->gzhead == Z_NULL\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, OS_CODE);\n        s.status = BUSY_STATE;\n      }\n      else {\n        put_byte(s, (s.gzhead.text ? 1 : 0) +\n                    (s.gzhead.hcrc ? 2 : 0) +\n                    (!s.gzhead.extra ? 0 : 4) +\n                    (!s.gzhead.name ? 0 : 8) +\n                    (!s.gzhead.comment ? 0 : 16)\n        );\n        put_byte(s, s.gzhead.time & 0xff);\n        put_byte(s, (s.gzhead.time >> 8) & 0xff);\n        put_byte(s, (s.gzhead.time >> 16) & 0xff);\n        put_byte(s, (s.gzhead.time >> 24) & 0xff);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, s.gzhead.os & 0xff);\n        if (s.gzhead.extra && s.gzhead.extra.length) {\n          put_byte(s, s.gzhead.extra.length & 0xff);\n          put_byte(s, (s.gzhead.extra.length >> 8) & 0xff);\n        }\n        if (s.gzhead.hcrc) {\n          strm.adler = crc32(strm.adler, s.pending_buf, s.pending, 0);\n        }\n        s.gzindex = 0;\n        s.status = EXTRA_STATE;\n      }\n    }\n    else // DEFLATE header\n    {\n      var header = (Z_DEFLATED + ((s.w_bits - 8) << 4)) << 8;\n      var level_flags = -1;\n\n      if (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2) {\n        level_flags = 0;\n      } else if (s.level < 6) {\n        level_flags = 1;\n      } else if (s.level === 6) {\n        level_flags = 2;\n      } else {\n        level_flags = 3;\n      }\n      header |= (level_flags << 6);\n      if (s.strstart !== 0) { header |= PRESET_DICT; }\n      header += 31 - (header % 31);\n\n      s.status = BUSY_STATE;\n      putShortMSB(s, header);\n\n      /* Save the adler32 of the preset dictionary: */\n      if (s.strstart !== 0) {\n        putShortMSB(s, strm.adler >>> 16);\n        putShortMSB(s, strm.adler & 0xffff);\n      }\n      strm.adler = 1; // adler32(0L, Z_NULL, 0);\n    }\n  }\n\n//#ifdef GZIP\n  if (s.status === EXTRA_STATE) {\n    if (s.gzhead.extra/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n\n      while (s.gzindex < (s.gzhead.extra.length & 0xffff)) {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            break;\n          }\n        }\n        put_byte(s, s.gzhead.extra[s.gzindex] & 0xff);\n        s.gzindex++;\n      }\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (s.gzindex === s.gzhead.extra.length) {\n        s.gzindex = 0;\n        s.status = NAME_STATE;\n      }\n    }\n    else {\n      s.status = NAME_STATE;\n    }\n  }\n  if (s.status === NAME_STATE) {\n    if (s.gzhead.name/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.name.length) {\n          val = s.gzhead.name.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.gzindex = 0;\n        s.status = COMMENT_STATE;\n      }\n    }\n    else {\n      s.status = COMMENT_STATE;\n    }\n  }\n  if (s.status === COMMENT_STATE) {\n    if (s.gzhead.comment/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.comment.length) {\n          val = s.gzhead.comment.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.status = HCRC_STATE;\n      }\n    }\n    else {\n      s.status = HCRC_STATE;\n    }\n  }\n  if (s.status === HCRC_STATE) {\n    if (s.gzhead.hcrc) {\n      if (s.pending + 2 > s.pending_buf_size) {\n        flush_pending(strm);\n      }\n      if (s.pending + 2 <= s.pending_buf_size) {\n        put_byte(s, strm.adler & 0xff);\n        put_byte(s, (strm.adler >> 8) & 0xff);\n        strm.adler = 0; //crc32(0L, Z_NULL, 0);\n        s.status = BUSY_STATE;\n      }\n    }\n    else {\n      s.status = BUSY_STATE;\n    }\n  }\n//#endif\n\n  /* Flush as much pending output as possible */\n  if (s.pending !== 0) {\n    flush_pending(strm);\n    if (strm.avail_out === 0) {\n      /* Since avail_out is 0, deflate will be called again with\n       * more output space, but possibly with both pending and\n       * avail_in equal to zero. There won't be anything to do,\n       * but this is not an error situation so make sure we\n       * return OK instead of BUF_ERROR at next call of deflate:\n       */\n      s.last_flush = -1;\n      return Z_OK;\n    }\n\n    /* Make sure there is something to do and avoid duplicate consecutive\n     * flushes. For repeated and useless calls with Z_FINISH, we keep\n     * returning Z_STREAM_END instead of Z_BUF_ERROR.\n     */\n  } else if (strm.avail_in === 0 && rank(flush) <= rank(old_flush) &&\n    flush !== Z_FINISH) {\n    return err(strm, Z_BUF_ERROR);\n  }\n\n  /* User must not provide more input after the first FINISH: */\n  if (s.status === FINISH_STATE && strm.avail_in !== 0) {\n    return err(strm, Z_BUF_ERROR);\n  }\n\n  /* Start a new block or continue the current one.\n   */\n  if (strm.avail_in !== 0 || s.lookahead !== 0 ||\n    (flush !== Z_NO_FLUSH && s.status !== FINISH_STATE)) {\n    var bstate = (s.strategy === Z_HUFFMAN_ONLY) ? deflate_huff(s, flush) :\n      (s.strategy === Z_RLE ? deflate_rle(s, flush) :\n        configuration_table[s.level].func(s, flush));\n\n    if (bstate === BS_FINISH_STARTED || bstate === BS_FINISH_DONE) {\n      s.status = FINISH_STATE;\n    }\n    if (bstate === BS_NEED_MORE || bstate === BS_FINISH_STARTED) {\n      if (strm.avail_out === 0) {\n        s.last_flush = -1;\n        /* avoid BUF_ERROR next call, see above */\n      }\n      return Z_OK;\n      /* If flush != Z_NO_FLUSH && avail_out == 0, the next call\n       * of deflate should use the same flush parameter to make sure\n       * that the flush is complete. So we don't have to output an\n       * empty block here, this will be done at next call. This also\n       * ensures that for a very small output buffer, we emit at most\n       * one empty block.\n       */\n    }\n    if (bstate === BS_BLOCK_DONE) {\n      if (flush === Z_PARTIAL_FLUSH) {\n        trees._tr_align(s);\n      }\n      else if (flush !== Z_BLOCK) { /* FULL_FLUSH or SYNC_FLUSH */\n\n        trees._tr_stored_block(s, 0, 0, false);\n        /* For a full flush, this empty block will be recognized\n         * as a special marker by inflate_sync().\n         */\n        if (flush === Z_FULL_FLUSH) {\n          /*** CLEAR_HASH(s); ***/             /* forget history */\n          zero(s.head); // Fill with NIL (= 0);\n\n          if (s.lookahead === 0) {\n            s.strstart = 0;\n            s.block_start = 0;\n            s.insert = 0;\n          }\n        }\n      }\n      flush_pending(strm);\n      if (strm.avail_out === 0) {\n        s.last_flush = -1; /* avoid BUF_ERROR at next call, see above */\n        return Z_OK;\n      }\n    }\n  }\n  //Assert(strm->avail_out > 0, \"bug2\");\n  //if (strm.avail_out <= 0) { throw new Error(\"bug2\");}\n\n  if (flush !== Z_FINISH) { return Z_OK; }\n  if (s.wrap <= 0) { return Z_STREAM_END; }\n\n  /* Write the trailer */\n  if (s.wrap === 2) {\n    put_byte(s, strm.adler & 0xff);\n    put_byte(s, (strm.adler >> 8) & 0xff);\n    put_byte(s, (strm.adler >> 16) & 0xff);\n    put_byte(s, (strm.adler >> 24) & 0xff);\n    put_byte(s, strm.total_in & 0xff);\n    put_byte(s, (strm.total_in >> 8) & 0xff);\n    put_byte(s, (strm.total_in >> 16) & 0xff);\n    put_byte(s, (strm.total_in >> 24) & 0xff);\n  }\n  else\n  {\n    putShortMSB(s, strm.adler >>> 16);\n    putShortMSB(s, strm.adler & 0xffff);\n  }\n\n  flush_pending(strm);\n  /* If avail_out is zero, the application will call deflate again\n   * to flush the rest.\n   */\n  if (s.wrap > 0) { s.wrap = -s.wrap; }\n  /* write the trailer only once! */\n  return s.pending !== 0 ? Z_OK : Z_STREAM_END;\n}\n\nfunction deflateEnd(strm) {\n  var status;\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  status = strm.state.status;\n  if (status !== INIT_STATE &&\n    status !== EXTRA_STATE &&\n    status !== NAME_STATE &&\n    status !== COMMENT_STATE &&\n    status !== HCRC_STATE &&\n    status !== BUSY_STATE &&\n    status !== FINISH_STATE\n  ) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n  strm.state = null;\n\n  return status === BUSY_STATE ? err(strm, Z_DATA_ERROR) : Z_OK;\n}\n\n\n/* =========================================================================\n * Initializes the compression dictionary from the given byte\n * sequence without producing any compressed output.\n */\nfunction deflateSetDictionary(strm, dictionary) {\n  var dictLength = dictionary.length;\n\n  var s;\n  var str, n;\n  var wrap;\n  var avail;\n  var next;\n  var input;\n  var tmpDict;\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  s = strm.state;\n  wrap = s.wrap;\n\n  if (wrap === 2 || (wrap === 1 && s.status !== INIT_STATE) || s.lookahead) {\n    return Z_STREAM_ERROR;\n  }\n\n  /* when using zlib wrappers, compute Adler-32 for provided dictionary */\n  if (wrap === 1) {\n    /* adler32(strm->adler, dictionary, dictLength); */\n    strm.adler = adler32(strm.adler, dictionary, dictLength, 0);\n  }\n\n  s.wrap = 0;   /* avoid computing Adler-32 in read_buf */\n\n  /* if dictionary would fill window, just replace the history */\n  if (dictLength >= s.w_size) {\n    if (wrap === 0) {            /* already empty otherwise */\n      /*** CLEAR_HASH(s); ***/\n      zero(s.head); // Fill with NIL (= 0);\n      s.strstart = 0;\n      s.block_start = 0;\n      s.insert = 0;\n    }\n    /* use the tail */\n    // dictionary = dictionary.slice(dictLength - s.w_size);\n    tmpDict = new utils.Buf8(s.w_size);\n    utils.arraySet(tmpDict, dictionary, dictLength - s.w_size, s.w_size, 0);\n    dictionary = tmpDict;\n    dictLength = s.w_size;\n  }\n  /* insert dictionary into window and hash */\n  avail = strm.avail_in;\n  next = strm.next_in;\n  input = strm.input;\n  strm.avail_in = dictLength;\n  strm.next_in = 0;\n  strm.input = dictionary;\n  fill_window(s);\n  while (s.lookahead >= MIN_MATCH) {\n    str = s.strstart;\n    n = s.lookahead - (MIN_MATCH - 1);\n    do {\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + MIN_MATCH - 1]) & s.hash_mask;\n\n      s.prev[str & s.w_mask] = s.head[s.ins_h];\n\n      s.head[s.ins_h] = str;\n      str++;\n    } while (--n);\n    s.strstart = str;\n    s.lookahead = MIN_MATCH - 1;\n    fill_window(s);\n  }\n  s.strstart += s.lookahead;\n  s.block_start = s.strstart;\n  s.insert = s.lookahead;\n  s.lookahead = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  strm.next_in = next;\n  strm.input = input;\n  strm.avail_in = avail;\n  s.wrap = wrap;\n  return Z_OK;\n}\n\n\nexports.deflateInit = deflateInit;\nexports.deflateInit2 = deflateInit2;\nexports.deflateReset = deflateReset;\nexports.deflateResetKeep = deflateResetKeep;\nexports.deflateSetHeader = deflateSetHeader;\nexports.deflate = deflate;\nexports.deflateEnd = deflateEnd;\nexports.deflateSetDictionary = deflateSetDictionary;\nexports.deflateInfo = 'pako deflate (from Nodeca project)';\n\n/* Not implemented\nexports.deflateBound = deflateBound;\nexports.deflateCopy = deflateCopy;\nexports.deflateParams = deflateParams;\nexports.deflatePending = deflatePending;\nexports.deflatePrime = deflatePrime;\nexports.deflateTune = deflateTune;\n*/\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction GZheader() {\n  /* true if compressed data believed to be text */\n  this.text       = 0;\n  /* modification time */\n  this.time       = 0;\n  /* extra flags (not used when writing a gzip file) */\n  this.xflags     = 0;\n  /* operating system */\n  this.os         = 0;\n  /* pointer to extra field or Z_NULL if none */\n  this.extra      = null;\n  /* extra field length (valid if extra != Z_NULL) */\n  this.extra_len  = 0; // Actually, we don't need it in JS,\n                       // but leave for few code modifications\n\n  //\n  // Setup limits is not necessary because in js we should not preallocate memory\n  // for inflate use constant limit in 65536 bytes\n  //\n\n  /* space at extra (only when reading header) */\n  // this.extra_max  = 0;\n  /* pointer to zero-terminated file name or Z_NULL */\n  this.name       = '';\n  /* space at name (only when reading header) */\n  // this.name_max   = 0;\n  /* pointer to zero-terminated comment or Z_NULL */\n  this.comment    = '';\n  /* space at comment (only when reading header) */\n  // this.comm_max   = 0;\n  /* true if there was or will be a header crc */\n  this.hcrc       = 0;\n  /* true when done reading gzip header (not used when writing a gzip file) */\n  this.done       = false;\n}\n\nmodule.exports = GZheader;\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// See state defs from inflate.js\nvar BAD = 30;       /* got a data error -- remain here until reset */\nvar TYPE = 12;      /* i: waiting for type bits, including last-flag bit */\n\n/*\n   Decode literal, length, and distance codes and write out the resulting\n   literal and match bytes until either not enough input or output is\n   available, an end-of-block is encountered, or a data error is encountered.\n   When large enough input and output buffers are supplied to inflate(), for\n   example, a 16K input buffer and a 64K output buffer, more than 95% of the\n   inflate execution time is spent in this routine.\n\n   Entry assumptions:\n\n        state.mode === LEN\n        strm.avail_in >= 6\n        strm.avail_out >= 258\n        start >= strm.avail_out\n        state.bits < 8\n\n   On return, state.mode is one of:\n\n        LEN -- ran out of enough output space or enough available input\n        TYPE -- reached end of block code, inflate() to interpret next block\n        BAD -- error in block data\n\n   Notes:\n\n    - The maximum input bits used by a length/distance pair is 15 bits for the\n      length code, 5 bits for the length extra, 15 bits for the distance code,\n      and 13 bits for the distance extra.  This totals 48 bits, or six bytes.\n      Therefore if strm.avail_in >= 6, then there is enough input to avoid\n      checking for available input while decoding.\n\n    - The maximum bytes that a single length/distance pair can output is 258\n      bytes, which is the maximum length that can be coded.  inflate_fast()\n      requires strm.avail_out >= 258 for each loop to avoid checking for\n      output space.\n */\nmodule.exports = function inflate_fast(strm, start) {\n  var state;\n  var _in;                    /* local strm.input */\n  var last;                   /* have enough input while in < last */\n  var _out;                   /* local strm.output */\n  var beg;                    /* inflate()'s initial strm.output */\n  var end;                    /* while out < end, enough space available */\n//#ifdef INFLATE_STRICT\n  var dmax;                   /* maximum distance from zlib header */\n//#endif\n  var wsize;                  /* window size or zero if not using window */\n  var whave;                  /* valid bytes in the window */\n  var wnext;                  /* window write index */\n  // Use `s_window` instead `window`, avoid conflict with instrumentation tools\n  var s_window;               /* allocated sliding window, if wsize != 0 */\n  var hold;                   /* local strm.hold */\n  var bits;                   /* local strm.bits */\n  var lcode;                  /* local strm.lencode */\n  var dcode;                  /* local strm.distcode */\n  var lmask;                  /* mask for first level of length codes */\n  var dmask;                  /* mask for first level of distance codes */\n  var here;                   /* retrieved table entry */\n  var op;                     /* code bits, operation, extra bits, or */\n                              /*  window position, window bytes to copy */\n  var len;                    /* match length, unused bytes */\n  var dist;                   /* match distance */\n  var from;                   /* where to copy match from */\n  var from_source;\n\n\n  var input, output; // JS specific, because we have no pointers\n\n  /* copy state to local variables */\n  state = strm.state;\n  //here = state.here;\n  _in = strm.next_in;\n  input = strm.input;\n  last = _in + (strm.avail_in - 5);\n  _out = strm.next_out;\n  output = strm.output;\n  beg = _out - (start - strm.avail_out);\n  end = _out + (strm.avail_out - 257);\n//#ifdef INFLATE_STRICT\n  dmax = state.dmax;\n//#endif\n  wsize = state.wsize;\n  whave = state.whave;\n  wnext = state.wnext;\n  s_window = state.window;\n  hold = state.hold;\n  bits = state.bits;\n  lcode = state.lencode;\n  dcode = state.distcode;\n  lmask = (1 << state.lenbits) - 1;\n  dmask = (1 << state.distbits) - 1;\n\n\n  /* decode literals and length/distances until end-of-block or not enough\n     input data or output space */\n\n  top:\n  do {\n    if (bits < 15) {\n      hold += input[_in++] << bits;\n      bits += 8;\n      hold += input[_in++] << bits;\n      bits += 8;\n    }\n\n    here = lcode[hold & lmask];\n\n    dolen:\n    for (;;) { // Goto emulation\n      op = here >>> 24/*here.bits*/;\n      hold >>>= op;\n      bits -= op;\n      op = (here >>> 16) & 0xff/*here.op*/;\n      if (op === 0) {                          /* literal */\n        //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n        //        \"inflate:         literal '%c'\\n\" :\n        //        \"inflate:         literal 0x%02x\\n\", here.val));\n        output[_out++] = here & 0xffff/*here.val*/;\n      }\n      else if (op & 16) {                     /* length base */\n        len = here & 0xffff/*here.val*/;\n        op &= 15;                           /* number of extra bits */\n        if (op) {\n          if (bits < op) {\n            hold += input[_in++] << bits;\n            bits += 8;\n          }\n          len += hold & ((1 << op) - 1);\n          hold >>>= op;\n          bits -= op;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", len));\n        if (bits < 15) {\n          hold += input[_in++] << bits;\n          bits += 8;\n          hold += input[_in++] << bits;\n          bits += 8;\n        }\n        here = dcode[hold & dmask];\n\n        dodist:\n        for (;;) { // goto emulation\n          op = here >>> 24/*here.bits*/;\n          hold >>>= op;\n          bits -= op;\n          op = (here >>> 16) & 0xff/*here.op*/;\n\n          if (op & 16) {                      /* distance base */\n            dist = here & 0xffff/*here.val*/;\n            op &= 15;                       /* number of extra bits */\n            if (bits < op) {\n              hold += input[_in++] << bits;\n              bits += 8;\n              if (bits < op) {\n                hold += input[_in++] << bits;\n                bits += 8;\n              }\n            }\n            dist += hold & ((1 << op) - 1);\n//#ifdef INFLATE_STRICT\n            if (dist > dmax) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break top;\n            }\n//#endif\n            hold >>>= op;\n            bits -= op;\n            //Tracevv((stderr, \"inflate:         distance %u\\n\", dist));\n            op = _out - beg;                /* max distance in output */\n            if (dist > op) {                /* see if copy from window */\n              op = dist - op;               /* distance back in window */\n              if (op > whave) {\n                if (state.sane) {\n                  strm.msg = 'invalid distance too far back';\n                  state.mode = BAD;\n                  break top;\n                }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//                if (len <= op - whave) {\n//                  do {\n//                    output[_out++] = 0;\n//                  } while (--len);\n//                  continue top;\n//                }\n//                len -= op - whave;\n//                do {\n//                  output[_out++] = 0;\n//                } while (--op > whave);\n//                if (op === 0) {\n//                  from = _out - dist;\n//                  do {\n//                    output[_out++] = output[from++];\n//                  } while (--len);\n//                  continue top;\n//                }\n//#endif\n              }\n              from = 0; // window index\n              from_source = s_window;\n              if (wnext === 0) {           /* very common case */\n                from += wsize - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              else if (wnext < op) {      /* wrap around window */\n                from += wsize + wnext - op;\n                op -= wnext;\n                if (op < len) {         /* some from end of window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = 0;\n                  if (wnext < len) {  /* some from start of window */\n                    op = wnext;\n                    len -= op;\n                    do {\n                      output[_out++] = s_window[from++];\n                    } while (--op);\n                    from = _out - dist;      /* rest from output */\n                    from_source = output;\n                  }\n                }\n              }\n              else {                      /* contiguous in window */\n                from += wnext - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              while (len > 2) {\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                len -= 3;\n              }\n              if (len) {\n                output[_out++] = from_source[from++];\n                if (len > 1) {\n                  output[_out++] = from_source[from++];\n                }\n              }\n            }\n            else {\n              from = _out - dist;          /* copy direct from output */\n              do {                        /* minimum length is three */\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                len -= 3;\n              } while (len > 2);\n              if (len) {\n                output[_out++] = output[from++];\n                if (len > 1) {\n                  output[_out++] = output[from++];\n                }\n              }\n            }\n          }\n          else if ((op & 64) === 0) {          /* 2nd level distance code */\n            here = dcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n            continue dodist;\n          }\n          else {\n            strm.msg = 'invalid distance code';\n            state.mode = BAD;\n            break top;\n          }\n\n          break; // need to emulate goto via \"continue\"\n        }\n      }\n      else if ((op & 64) === 0) {              /* 2nd level length code */\n        here = lcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n        continue dolen;\n      }\n      else if (op & 32) {                     /* end-of-block */\n        //Tracevv((stderr, \"inflate:         end of block\\n\"));\n        state.mode = TYPE;\n        break top;\n      }\n      else {\n        strm.msg = 'invalid literal/length code';\n        state.mode = BAD;\n        break top;\n      }\n\n      break; // need to emulate goto via \"continue\"\n    }\n  } while (_in < last && _out < end);\n\n  /* return unused bytes (on entry, bits < 8, so in won't go too far back) */\n  len = bits >> 3;\n  _in -= len;\n  bits -= len << 3;\n  hold &= (1 << bits) - 1;\n\n  /* update state and return */\n  strm.next_in = _in;\n  strm.next_out = _out;\n  strm.avail_in = (_in < last ? 5 + (last - _in) : 5 - (_in - last));\n  strm.avail_out = (_out < end ? 257 + (end - _out) : 257 - (_out - end));\n  state.hold = hold;\n  state.bits = bits;\n  return;\n};\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils         = require('../utils/common');\nvar adler32       = require('./adler32');\nvar crc32         = require('./crc32');\nvar inflate_fast  = require('./inffast');\nvar inflate_table = require('./inftrees');\n\nvar CODES = 0;\nvar LENS = 1;\nvar DISTS = 2;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n/* Allowed flush values; see deflate() and inflate() below for details */\n//var Z_NO_FLUSH      = 0;\n//var Z_PARTIAL_FLUSH = 1;\n//var Z_SYNC_FLUSH    = 2;\n//var Z_FULL_FLUSH    = 3;\nvar Z_FINISH        = 4;\nvar Z_BLOCK         = 5;\nvar Z_TREES         = 6;\n\n\n/* Return codes for the compression/decompression functions. Negative values\n * are errors, positive values are used for special but normal events.\n */\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\nvar Z_NEED_DICT     = 2;\n//var Z_ERRNO         = -1;\nvar Z_STREAM_ERROR  = -2;\nvar Z_DATA_ERROR    = -3;\nvar Z_MEM_ERROR     = -4;\nvar Z_BUF_ERROR     = -5;\n//var Z_VERSION_ERROR = -6;\n\n/* The deflate compression method */\nvar Z_DEFLATED  = 8;\n\n\n/* STATES ====================================================================*/\n/* ===========================================================================*/\n\n\nvar    HEAD = 1;       /* i: waiting for magic header */\nvar    FLAGS = 2;      /* i: waiting for method and flags (gzip) */\nvar    TIME = 3;       /* i: waiting for modification time (gzip) */\nvar    OS = 4;         /* i: waiting for extra flags and operating system (gzip) */\nvar    EXLEN = 5;      /* i: waiting for extra length (gzip) */\nvar    EXTRA = 6;      /* i: waiting for extra bytes (gzip) */\nvar    NAME = 7;       /* i: waiting for end of file name (gzip) */\nvar    COMMENT = 8;    /* i: waiting for end of comment (gzip) */\nvar    HCRC = 9;       /* i: waiting for header crc (gzip) */\nvar    DICTID = 10;    /* i: waiting for dictionary check value */\nvar    DICT = 11;      /* waiting for inflateSetDictionary() call */\nvar        TYPE = 12;      /* i: waiting for type bits, including last-flag bit */\nvar        TYPEDO = 13;    /* i: same, but skip check to exit inflate on new block */\nvar        STORED = 14;    /* i: waiting for stored size (length and complement) */\nvar        COPY_ = 15;     /* i/o: same as COPY below, but only first time in */\nvar        COPY = 16;      /* i/o: waiting for input or output to copy stored block */\nvar        TABLE = 17;     /* i: waiting for dynamic block table lengths */\nvar        LENLENS = 18;   /* i: waiting for code length code lengths */\nvar        CODELENS = 19;  /* i: waiting for length/lit and distance code lengths */\nvar            LEN_ = 20;      /* i: same as LEN below, but only first time in */\nvar            LEN = 21;       /* i: waiting for length/lit/eob code */\nvar            LENEXT = 22;    /* i: waiting for length extra bits */\nvar            DIST = 23;      /* i: waiting for distance code */\nvar            DISTEXT = 24;   /* i: waiting for distance extra bits */\nvar            MATCH = 25;     /* o: waiting for output space to copy string */\nvar            LIT = 26;       /* o: waiting for output space to write literal */\nvar    CHECK = 27;     /* i: waiting for 32-bit check value */\nvar    LENGTH = 28;    /* i: waiting for 32-bit length (gzip) */\nvar    DONE = 29;      /* finished check, done -- remain here until reset */\nvar    BAD = 30;       /* got a data error -- remain here until reset */\nvar    MEM = 31;       /* got an inflate() memory error -- remain here until reset */\nvar    SYNC = 32;      /* looking for synchronization bytes to restart inflate() */\n\n/* ===========================================================================*/\n\n\n\nvar ENOUGH_LENS = 852;\nvar ENOUGH_DISTS = 592;\n//var ENOUGH =  (ENOUGH_LENS+ENOUGH_DISTS);\n\nvar MAX_WBITS = 15;\n/* 32K LZ77 window */\nvar DEF_WBITS = MAX_WBITS;\n\n\nfunction zswap32(q) {\n  return  (((q >>> 24) & 0xff) +\n          ((q >>> 8) & 0xff00) +\n          ((q & 0xff00) << 8) +\n          ((q & 0xff) << 24));\n}\n\n\nfunction InflateState() {\n  this.mode = 0;             /* current inflate mode */\n  this.last = false;          /* true if processing last block */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.havedict = false;      /* true if dictionary provided */\n  this.flags = 0;             /* gzip header method and flags (0 if zlib) */\n  this.dmax = 0;              /* zlib header max distance (INFLATE_STRICT) */\n  this.check = 0;             /* protected copy of check value */\n  this.total = 0;             /* protected copy of output count */\n  // TODO: may be {}\n  this.head = null;           /* where to save gzip header information */\n\n  /* sliding window */\n  this.wbits = 0;             /* log base 2 of requested window size */\n  this.wsize = 0;             /* window size or zero if not using window */\n  this.whave = 0;             /* valid bytes in the window */\n  this.wnext = 0;             /* window write index */\n  this.window = null;         /* allocated sliding window, if needed */\n\n  /* bit accumulator */\n  this.hold = 0;              /* input bit accumulator */\n  this.bits = 0;              /* number of bits in \"in\" */\n\n  /* for string and stored block copying */\n  this.length = 0;            /* literal or length of data to copy */\n  this.offset = 0;            /* distance back to copy string from */\n\n  /* for table and code decoding */\n  this.extra = 0;             /* extra bits needed */\n\n  /* fixed and dynamic code tables */\n  this.lencode = null;          /* starting table for length/literal codes */\n  this.distcode = null;         /* starting table for distance codes */\n  this.lenbits = 0;           /* index bits for lencode */\n  this.distbits = 0;          /* index bits for distcode */\n\n  /* dynamic table building */\n  this.ncode = 0;             /* number of code length code lengths */\n  this.nlen = 0;              /* number of length code lengths */\n  this.ndist = 0;             /* number of distance code lengths */\n  this.have = 0;              /* number of code lengths in lens[] */\n  this.next = null;              /* next available space in codes[] */\n\n  this.lens = new utils.Buf16(320); /* temporary storage for code lengths */\n  this.work = new utils.Buf16(288); /* work area for code table building */\n\n  /*\n   because we don't have pointers in js, we use lencode and distcode directly\n   as buffers so we don't need codes\n  */\n  //this.codes = new utils.Buf32(ENOUGH);       /* space for code tables */\n  this.lendyn = null;              /* dynamic table for length/literal codes (JS specific) */\n  this.distdyn = null;             /* dynamic table for distance codes (JS specific) */\n  this.sane = 0;                   /* if false, allow invalid distance too far */\n  this.back = 0;                   /* bits back of last unprocessed length/lit */\n  this.was = 0;                    /* initial length of match */\n}\n\nfunction inflateResetKeep(strm) {\n  var state;\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  strm.total_in = strm.total_out = state.total = 0;\n  strm.msg = ''; /*Z_NULL*/\n  if (state.wrap) {       /* to support ill-conceived Java test suite */\n    strm.adler = state.wrap & 1;\n  }\n  state.mode = HEAD;\n  state.last = 0;\n  state.havedict = 0;\n  state.dmax = 32768;\n  state.head = null/*Z_NULL*/;\n  state.hold = 0;\n  state.bits = 0;\n  //state.lencode = state.distcode = state.next = state.codes;\n  state.lencode = state.lendyn = new utils.Buf32(ENOUGH_LENS);\n  state.distcode = state.distdyn = new utils.Buf32(ENOUGH_DISTS);\n\n  state.sane = 1;\n  state.back = -1;\n  //Tracev((stderr, \"inflate: reset\\n\"));\n  return Z_OK;\n}\n\nfunction inflateReset(strm) {\n  var state;\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  state.wsize = 0;\n  state.whave = 0;\n  state.wnext = 0;\n  return inflateResetKeep(strm);\n\n}\n\nfunction inflateReset2(strm, windowBits) {\n  var wrap;\n  var state;\n\n  /* get the state */\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n\n  /* extract wrap request from windowBits parameter */\n  if (windowBits < 0) {\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n  else {\n    wrap = (windowBits >> 4) + 1;\n    if (windowBits < 48) {\n      windowBits &= 15;\n    }\n  }\n\n  /* set number of window bits, free window if different */\n  if (windowBits && (windowBits < 8 || windowBits > 15)) {\n    return Z_STREAM_ERROR;\n  }\n  if (state.window !== null && state.wbits !== windowBits) {\n    state.window = null;\n  }\n\n  /* update state and reset the rest of it */\n  state.wrap = wrap;\n  state.wbits = windowBits;\n  return inflateReset(strm);\n}\n\nfunction inflateInit2(strm, windowBits) {\n  var ret;\n  var state;\n\n  if (!strm) { return Z_STREAM_ERROR; }\n  //strm.msg = Z_NULL;                 /* in case we return an error */\n\n  state = new InflateState();\n\n  //if (state === Z_NULL) return Z_MEM_ERROR;\n  //Tracev((stderr, \"inflate: allocated\\n\"));\n  strm.state = state;\n  state.window = null/*Z_NULL*/;\n  ret = inflateReset2(strm, windowBits);\n  if (ret !== Z_OK) {\n    strm.state = null/*Z_NULL*/;\n  }\n  return ret;\n}\n\nfunction inflateInit(strm) {\n  return inflateInit2(strm, DEF_WBITS);\n}\n\n\n/*\n Return state with length and distance decoding tables and index sizes set to\n fixed code decoding.  Normally this returns fixed tables from inffixed.h.\n If BUILDFIXED is defined, then instead this routine builds the tables the\n first time it's called, and returns those tables the first time and\n thereafter.  This reduces the size of the code by about 2K bytes, in\n exchange for a little execution time.  However, BUILDFIXED should not be\n used for threaded applications, since the rewriting of the tables and virgin\n may not be thread-safe.\n */\nvar virgin = true;\n\nvar lenfix, distfix; // We have no pointers in JS, so keep tables separate\n\nfunction fixedtables(state) {\n  /* build fixed huffman tables if first call (may not be thread safe) */\n  if (virgin) {\n    var sym;\n\n    lenfix = new utils.Buf32(512);\n    distfix = new utils.Buf32(32);\n\n    /* literal/length table */\n    sym = 0;\n    while (sym < 144) { state.lens[sym++] = 8; }\n    while (sym < 256) { state.lens[sym++] = 9; }\n    while (sym < 280) { state.lens[sym++] = 7; }\n    while (sym < 288) { state.lens[sym++] = 8; }\n\n    inflate_table(LENS,  state.lens, 0, 288, lenfix,   0, state.work, { bits: 9 });\n\n    /* distance table */\n    sym = 0;\n    while (sym < 32) { state.lens[sym++] = 5; }\n\n    inflate_table(DISTS, state.lens, 0, 32,   distfix, 0, state.work, { bits: 5 });\n\n    /* do this just once */\n    virgin = false;\n  }\n\n  state.lencode = lenfix;\n  state.lenbits = 9;\n  state.distcode = distfix;\n  state.distbits = 5;\n}\n\n\n/*\n Update the window with the last wsize (normally 32K) bytes written before\n returning.  If window does not exist yet, create it.  This is only called\n when a window is already in use, or when output has been written during this\n inflate call, but the end of the deflate stream has not been reached yet.\n It is also called to create a window for dictionary data when a dictionary\n is loaded.\n\n Providing output buffers larger than 32K to inflate() should provide a speed\n advantage, since only the last 32K of output is copied to the sliding window\n upon return from inflate(), and since all distances after the first 32K of\n output will fall in the output data, making match copies simpler and faster.\n The advantage may be dependent on the size of the processor's data caches.\n */\nfunction updatewindow(strm, src, end, copy) {\n  var dist;\n  var state = strm.state;\n\n  /* if it hasn't been done already, allocate space for the window */\n  if (state.window === null) {\n    state.wsize = 1 << state.wbits;\n    state.wnext = 0;\n    state.whave = 0;\n\n    state.window = new utils.Buf8(state.wsize);\n  }\n\n  /* copy state->wsize or less output bytes into the circular window */\n  if (copy >= state.wsize) {\n    utils.arraySet(state.window, src, end - state.wsize, state.wsize, 0);\n    state.wnext = 0;\n    state.whave = state.wsize;\n  }\n  else {\n    dist = state.wsize - state.wnext;\n    if (dist > copy) {\n      dist = copy;\n    }\n    //zmemcpy(state->window + state->wnext, end - copy, dist);\n    utils.arraySet(state.window, src, end - copy, dist, state.wnext);\n    copy -= dist;\n    if (copy) {\n      //zmemcpy(state->window, end - copy, copy);\n      utils.arraySet(state.window, src, end - copy, copy, 0);\n      state.wnext = copy;\n      state.whave = state.wsize;\n    }\n    else {\n      state.wnext += dist;\n      if (state.wnext === state.wsize) { state.wnext = 0; }\n      if (state.whave < state.wsize) { state.whave += dist; }\n    }\n  }\n  return 0;\n}\n\nfunction inflate(strm, flush) {\n  var state;\n  var input, output;          // input/output buffers\n  var next;                   /* next input INDEX */\n  var put;                    /* next output INDEX */\n  var have, left;             /* available input and output */\n  var hold;                   /* bit buffer */\n  var bits;                   /* bits in bit buffer */\n  var _in, _out;              /* save starting available input and output */\n  var copy;                   /* number of stored or match bytes to copy */\n  var from;                   /* where to copy match bytes from */\n  var from_source;\n  var here = 0;               /* current decoding table entry */\n  var here_bits, here_op, here_val; // paked \"here\" denormalized (JS specific)\n  //var last;                   /* parent table entry */\n  var last_bits, last_op, last_val; // paked \"last\" denormalized (JS specific)\n  var len;                    /* length to copy for repeats, bits to drop */\n  var ret;                    /* return code */\n  var hbuf = new utils.Buf8(4);    /* buffer for gzip header crc calculation */\n  var opts;\n\n  var n; // temporary var for NEED_BITS\n\n  var order = /* permutation of code lengths */\n    [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ];\n\n\n  if (!strm || !strm.state || !strm.output ||\n      (!strm.input && strm.avail_in !== 0)) {\n    return Z_STREAM_ERROR;\n  }\n\n  state = strm.state;\n  if (state.mode === TYPE) { state.mode = TYPEDO; }    /* skip check */\n\n\n  //--- LOAD() ---\n  put = strm.next_out;\n  output = strm.output;\n  left = strm.avail_out;\n  next = strm.next_in;\n  input = strm.input;\n  have = strm.avail_in;\n  hold = state.hold;\n  bits = state.bits;\n  //---\n\n  _in = have;\n  _out = left;\n  ret = Z_OK;\n\n  inf_leave: // goto emulation\n  for (;;) {\n    switch (state.mode) {\n      case HEAD:\n        if (state.wrap === 0) {\n          state.mode = TYPEDO;\n          break;\n        }\n        //=== NEEDBITS(16);\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((state.wrap & 2) && hold === 0x8b1f) {  /* gzip header */\n          state.check = 0/*crc32(0L, Z_NULL, 0)*/;\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          state.mode = FLAGS;\n          break;\n        }\n        state.flags = 0;           /* expect zlib header */\n        if (state.head) {\n          state.head.done = false;\n        }\n        if (!(state.wrap & 1) ||   /* check if zlib header allowed */\n          (((hold & 0xff)/*BITS(8)*/ << 8) + (hold >> 8)) % 31) {\n          strm.msg = 'incorrect header check';\n          state.mode = BAD;\n          break;\n        }\n        if ((hold & 0x0f)/*BITS(4)*/ !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n        len = (hold & 0x0f)/*BITS(4)*/ + 8;\n        if (state.wbits === 0) {\n          state.wbits = len;\n        }\n        else if (len > state.wbits) {\n          strm.msg = 'invalid window size';\n          state.mode = BAD;\n          break;\n        }\n        state.dmax = 1 << len;\n        //Tracev((stderr, \"inflate:   zlib header ok\\n\"));\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = hold & 0x200 ? DICTID : TYPE;\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        break;\n      case FLAGS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.flags = hold;\n        if ((state.flags & 0xff) !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        if (state.flags & 0xe000) {\n          strm.msg = 'unknown header flags set';\n          state.mode = BAD;\n          break;\n        }\n        if (state.head) {\n          state.head.text = ((hold >> 8) & 1);\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = TIME;\n        /* falls through */\n      case TIME:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.time = hold;\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC4(state.check, hold)\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          hbuf[2] = (hold >>> 16) & 0xff;\n          hbuf[3] = (hold >>> 24) & 0xff;\n          state.check = crc32(state.check, hbuf, 4, 0);\n          //===\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = OS;\n        /* falls through */\n      case OS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.xflags = (hold & 0xff);\n          state.head.os = (hold >> 8);\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = EXLEN;\n        /* falls through */\n      case EXLEN:\n        if (state.flags & 0x0400) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length = hold;\n          if (state.head) {\n            state.head.extra_len = hold;\n          }\n          if (state.flags & 0x0200) {\n            //=== CRC2(state.check, hold);\n            hbuf[0] = hold & 0xff;\n            hbuf[1] = (hold >>> 8) & 0xff;\n            state.check = crc32(state.check, hbuf, 2, 0);\n            //===//\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        else if (state.head) {\n          state.head.extra = null/*Z_NULL*/;\n        }\n        state.mode = EXTRA;\n        /* falls through */\n      case EXTRA:\n        if (state.flags & 0x0400) {\n          copy = state.length;\n          if (copy > have) { copy = have; }\n          if (copy) {\n            if (state.head) {\n              len = state.head.extra_len - state.length;\n              if (!state.head.extra) {\n                // Use untyped array for more convenient processing later\n                state.head.extra = new Array(state.head.extra_len);\n              }\n              utils.arraySet(\n                state.head.extra,\n                input,\n                next,\n                // extra field is limited to 65536 bytes\n                // - no need for additional size check\n                copy,\n                /*len + copy > state.head.extra_max - len ? state.head.extra_max : copy,*/\n                len\n              );\n              //zmemcpy(state.head.extra + len, next,\n              //        len + copy > state.head.extra_max ?\n              //        state.head.extra_max - len : copy);\n            }\n            if (state.flags & 0x0200) {\n              state.check = crc32(state.check, input, copy, next);\n            }\n            have -= copy;\n            next += copy;\n            state.length -= copy;\n          }\n          if (state.length) { break inf_leave; }\n        }\n        state.length = 0;\n        state.mode = NAME;\n        /* falls through */\n      case NAME:\n        if (state.flags & 0x0800) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            // TODO: 2 or 1 bytes?\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.name_max*/)) {\n              state.head.name += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n\n          if (state.flags & 0x0200) {\n            state.check = crc32(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.name = null;\n        }\n        state.length = 0;\n        state.mode = COMMENT;\n        /* falls through */\n      case COMMENT:\n        if (state.flags & 0x1000) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.comm_max*/)) {\n              state.head.comment += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n          if (state.flags & 0x0200) {\n            state.check = crc32(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.comment = null;\n        }\n        state.mode = HCRC;\n        /* falls through */\n      case HCRC:\n        if (state.flags & 0x0200) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if (hold !== (state.check & 0xffff)) {\n            strm.msg = 'header crc mismatch';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        if (state.head) {\n          state.head.hcrc = ((state.flags >> 9) & 1);\n          state.head.done = true;\n        }\n        strm.adler = state.check = 0;\n        state.mode = TYPE;\n        break;\n      case DICTID:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        strm.adler = state.check = zswap32(hold);\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = DICT;\n        /* falls through */\n      case DICT:\n        if (state.havedict === 0) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          return Z_NEED_DICT;\n        }\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = TYPE;\n        /* falls through */\n      case TYPE:\n        if (flush === Z_BLOCK || flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case TYPEDO:\n        if (state.last) {\n          //--- BYTEBITS() ---//\n          hold >>>= bits & 7;\n          bits -= bits & 7;\n          //---//\n          state.mode = CHECK;\n          break;\n        }\n        //=== NEEDBITS(3); */\n        while (bits < 3) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.last = (hold & 0x01)/*BITS(1)*/;\n        //--- DROPBITS(1) ---//\n        hold >>>= 1;\n        bits -= 1;\n        //---//\n\n        switch ((hold & 0x03)/*BITS(2)*/) {\n          case 0:                             /* stored block */\n            //Tracev((stderr, \"inflate:     stored block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = STORED;\n            break;\n          case 1:                             /* fixed block */\n            fixedtables(state);\n            //Tracev((stderr, \"inflate:     fixed codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = LEN_;             /* decode codes */\n            if (flush === Z_TREES) {\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n              break inf_leave;\n            }\n            break;\n          case 2:                             /* dynamic block */\n            //Tracev((stderr, \"inflate:     dynamic codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = TABLE;\n            break;\n          case 3:\n            strm.msg = 'invalid block type';\n            state.mode = BAD;\n        }\n        //--- DROPBITS(2) ---//\n        hold >>>= 2;\n        bits -= 2;\n        //---//\n        break;\n      case STORED:\n        //--- BYTEBITS() ---// /* go to byte boundary */\n        hold >>>= bits & 7;\n        bits -= bits & 7;\n        //---//\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((hold & 0xffff) !== ((hold >>> 16) ^ 0xffff)) {\n          strm.msg = 'invalid stored block lengths';\n          state.mode = BAD;\n          break;\n        }\n        state.length = hold & 0xffff;\n        //Tracev((stderr, \"inflate:       stored length %u\\n\",\n        //        state.length));\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = COPY_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case COPY_:\n        state.mode = COPY;\n        /* falls through */\n      case COPY:\n        copy = state.length;\n        if (copy) {\n          if (copy > have) { copy = have; }\n          if (copy > left) { copy = left; }\n          if (copy === 0) { break inf_leave; }\n          //--- zmemcpy(put, next, copy); ---\n          utils.arraySet(output, input, next, copy, put);\n          //---//\n          have -= copy;\n          next += copy;\n          left -= copy;\n          put += copy;\n          state.length -= copy;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       stored end\\n\"));\n        state.mode = TYPE;\n        break;\n      case TABLE:\n        //=== NEEDBITS(14); */\n        while (bits < 14) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.nlen = (hold & 0x1f)/*BITS(5)*/ + 257;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ndist = (hold & 0x1f)/*BITS(5)*/ + 1;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ncode = (hold & 0x0f)/*BITS(4)*/ + 4;\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n//#ifndef PKZIP_BUG_WORKAROUND\n        if (state.nlen > 286 || state.ndist > 30) {\n          strm.msg = 'too many length or distance symbols';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracev((stderr, \"inflate:       table sizes ok\\n\"));\n        state.have = 0;\n        state.mode = LENLENS;\n        /* falls through */\n      case LENLENS:\n        while (state.have < state.ncode) {\n          //=== NEEDBITS(3);\n          while (bits < 3) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.lens[order[state.have++]] = (hold & 0x07);//BITS(3);\n          //--- DROPBITS(3) ---//\n          hold >>>= 3;\n          bits -= 3;\n          //---//\n        }\n        while (state.have < 19) {\n          state.lens[order[state.have++]] = 0;\n        }\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        //state.next = state.codes;\n        //state.lencode = state.next;\n        // Switch to use dynamic table\n        state.lencode = state.lendyn;\n        state.lenbits = 7;\n\n        opts = { bits: state.lenbits };\n        ret = inflate_table(CODES, state.lens, 0, 19, state.lencode, 0, state.work, opts);\n        state.lenbits = opts.bits;\n\n        if (ret) {\n          strm.msg = 'invalid code lengths set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       code lengths ok\\n\"));\n        state.have = 0;\n        state.mode = CODELENS;\n        /* falls through */\n      case CODELENS:\n        while (state.have < state.nlen + state.ndist) {\n          for (;;) {\n            here = state.lencode[hold & ((1 << state.lenbits) - 1)];/*BITS(state.lenbits)*/\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          if (here_val < 16) {\n            //--- DROPBITS(here.bits) ---//\n            hold >>>= here_bits;\n            bits -= here_bits;\n            //---//\n            state.lens[state.have++] = here_val;\n          }\n          else {\n            if (here_val === 16) {\n              //=== NEEDBITS(here.bits + 2);\n              n = here_bits + 2;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              if (state.have === 0) {\n                strm.msg = 'invalid bit length repeat';\n                state.mode = BAD;\n                break;\n              }\n              len = state.lens[state.have - 1];\n              copy = 3 + (hold & 0x03);//BITS(2);\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n            }\n            else if (here_val === 17) {\n              //=== NEEDBITS(here.bits + 3);\n              n = here_bits + 3;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 3 + (hold & 0x07);//BITS(3);\n              //--- DROPBITS(3) ---//\n              hold >>>= 3;\n              bits -= 3;\n              //---//\n            }\n            else {\n              //=== NEEDBITS(here.bits + 7);\n              n = here_bits + 7;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 11 + (hold & 0x7f);//BITS(7);\n              //--- DROPBITS(7) ---//\n              hold >>>= 7;\n              bits -= 7;\n              //---//\n            }\n            if (state.have + copy > state.nlen + state.ndist) {\n              strm.msg = 'invalid bit length repeat';\n              state.mode = BAD;\n              break;\n            }\n            while (copy--) {\n              state.lens[state.have++] = len;\n            }\n          }\n        }\n\n        /* handle error breaks in while */\n        if (state.mode === BAD) { break; }\n\n        /* check for end-of-block code (better have one) */\n        if (state.lens[256] === 0) {\n          strm.msg = 'invalid code -- missing end-of-block';\n          state.mode = BAD;\n          break;\n        }\n\n        /* build code tables -- note: do not change the lenbits or distbits\n           values here (9 and 6) without reading the comments in inftrees.h\n           concerning the ENOUGH constants, which depend on those values */\n        state.lenbits = 9;\n\n        opts = { bits: state.lenbits };\n        ret = inflate_table(LENS, state.lens, 0, state.nlen, state.lencode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.lenbits = opts.bits;\n        // state.lencode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid literal/lengths set';\n          state.mode = BAD;\n          break;\n        }\n\n        state.distbits = 6;\n        //state.distcode.copy(state.codes);\n        // Switch to use dynamic table\n        state.distcode = state.distdyn;\n        opts = { bits: state.distbits };\n        ret = inflate_table(DISTS, state.lens, state.nlen, state.ndist, state.distcode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.distbits = opts.bits;\n        // state.distcode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid distances set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, 'inflate:       codes ok\\n'));\n        state.mode = LEN_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case LEN_:\n        state.mode = LEN;\n        /* falls through */\n      case LEN:\n        if (have >= 6 && left >= 258) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          inflate_fast(strm, _out);\n          //--- LOAD() ---\n          put = strm.next_out;\n          output = strm.output;\n          left = strm.avail_out;\n          next = strm.next_in;\n          input = strm.input;\n          have = strm.avail_in;\n          hold = state.hold;\n          bits = state.bits;\n          //---\n\n          if (state.mode === TYPE) {\n            state.back = -1;\n          }\n          break;\n        }\n        state.back = 0;\n        for (;;) {\n          here = state.lencode[hold & ((1 << state.lenbits) - 1)];  /*BITS(state.lenbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if (here_bits <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if (here_op && (here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.lencode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        state.length = here_val;\n        if (here_op === 0) {\n          //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n          //        \"inflate:         literal '%c'\\n\" :\n          //        \"inflate:         literal 0x%02x\\n\", here.val));\n          state.mode = LIT;\n          break;\n        }\n        if (here_op & 32) {\n          //Tracevv((stderr, \"inflate:         end of block\\n\"));\n          state.back = -1;\n          state.mode = TYPE;\n          break;\n        }\n        if (here_op & 64) {\n          strm.msg = 'invalid literal/length code';\n          state.mode = BAD;\n          break;\n        }\n        state.extra = here_op & 15;\n        state.mode = LENEXT;\n        /* falls through */\n      case LENEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", state.length));\n        state.was = state.length;\n        state.mode = DIST;\n        /* falls through */\n      case DIST:\n        for (;;) {\n          here = state.distcode[hold & ((1 << state.distbits) - 1)];/*BITS(state.distbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if ((here_bits) <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if ((here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.distcode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        if (here_op & 64) {\n          strm.msg = 'invalid distance code';\n          state.mode = BAD;\n          break;\n        }\n        state.offset = here_val;\n        state.extra = (here_op) & 15;\n        state.mode = DISTEXT;\n        /* falls through */\n      case DISTEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.offset += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n//#ifdef INFLATE_STRICT\n        if (state.offset > state.dmax) {\n          strm.msg = 'invalid distance too far back';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracevv((stderr, \"inflate:         distance %u\\n\", state.offset));\n        state.mode = MATCH;\n        /* falls through */\n      case MATCH:\n        if (left === 0) { break inf_leave; }\n        copy = _out - left;\n        if (state.offset > copy) {         /* copy from window */\n          copy = state.offset - copy;\n          if (copy > state.whave) {\n            if (state.sane) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break;\n            }\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//          Trace((stderr, \"inflate.c too far\\n\"));\n//          copy -= state.whave;\n//          if (copy > state.length) { copy = state.length; }\n//          if (copy > left) { copy = left; }\n//          left -= copy;\n//          state.length -= copy;\n//          do {\n//            output[put++] = 0;\n//          } while (--copy);\n//          if (state.length === 0) { state.mode = LEN; }\n//          break;\n//#endif\n          }\n          if (copy > state.wnext) {\n            copy -= state.wnext;\n            from = state.wsize - copy;\n          }\n          else {\n            from = state.wnext - copy;\n          }\n          if (copy > state.length) { copy = state.length; }\n          from_source = state.window;\n        }\n        else {                              /* copy from output */\n          from_source = output;\n          from = put - state.offset;\n          copy = state.length;\n        }\n        if (copy > left) { copy = left; }\n        left -= copy;\n        state.length -= copy;\n        do {\n          output[put++] = from_source[from++];\n        } while (--copy);\n        if (state.length === 0) { state.mode = LEN; }\n        break;\n      case LIT:\n        if (left === 0) { break inf_leave; }\n        output[put++] = state.length;\n        left--;\n        state.mode = LEN;\n        break;\n      case CHECK:\n        if (state.wrap) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            // Use '|' instead of '+' to make sure that result is signed\n            hold |= input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          _out -= left;\n          strm.total_out += _out;\n          state.total += _out;\n          if (_out) {\n            strm.adler = state.check =\n                /*UPDATE(state.check, put - _out, _out);*/\n                (state.flags ? crc32(state.check, output, _out, put - _out) : adler32(state.check, output, _out, put - _out));\n\n          }\n          _out = left;\n          // NB: crc32 stored as signed 32-bit int, zswap32 returns signed too\n          if ((state.flags ? hold : zswap32(hold)) !== state.check) {\n            strm.msg = 'incorrect data check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   check matches trailer\\n\"));\n        }\n        state.mode = LENGTH;\n        /* falls through */\n      case LENGTH:\n        if (state.wrap && state.flags) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if (hold !== (state.total & 0xffffffff)) {\n            strm.msg = 'incorrect length check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   length matches trailer\\n\"));\n        }\n        state.mode = DONE;\n        /* falls through */\n      case DONE:\n        ret = Z_STREAM_END;\n        break inf_leave;\n      case BAD:\n        ret = Z_DATA_ERROR;\n        break inf_leave;\n      case MEM:\n        return Z_MEM_ERROR;\n      case SYNC:\n        /* falls through */\n      default:\n        return Z_STREAM_ERROR;\n    }\n  }\n\n  // inf_leave <- here is real place for \"goto inf_leave\", emulated via \"break inf_leave\"\n\n  /*\n     Return from inflate(), updating the total counts and the check value.\n     If there was no progress during the inflate() call, return a buffer\n     error.  Call updatewindow() to create and/or update the window state.\n     Note: a memory error from inflate() is non-recoverable.\n   */\n\n  //--- RESTORE() ---\n  strm.next_out = put;\n  strm.avail_out = left;\n  strm.next_in = next;\n  strm.avail_in = have;\n  state.hold = hold;\n  state.bits = bits;\n  //---\n\n  if (state.wsize || (_out !== strm.avail_out && state.mode < BAD &&\n                      (state.mode < CHECK || flush !== Z_FINISH))) {\n    if (updatewindow(strm, strm.output, strm.next_out, _out - strm.avail_out)) {\n      state.mode = MEM;\n      return Z_MEM_ERROR;\n    }\n  }\n  _in -= strm.avail_in;\n  _out -= strm.avail_out;\n  strm.total_in += _in;\n  strm.total_out += _out;\n  state.total += _out;\n  if (state.wrap && _out) {\n    strm.adler = state.check = /*UPDATE(state.check, strm.next_out - _out, _out);*/\n      (state.flags ? crc32(state.check, output, _out, strm.next_out - _out) : adler32(state.check, output, _out, strm.next_out - _out));\n  }\n  strm.data_type = state.bits + (state.last ? 64 : 0) +\n                    (state.mode === TYPE ? 128 : 0) +\n                    (state.mode === LEN_ || state.mode === COPY_ ? 256 : 0);\n  if (((_in === 0 && _out === 0) || flush === Z_FINISH) && ret === Z_OK) {\n    ret = Z_BUF_ERROR;\n  }\n  return ret;\n}\n\nfunction inflateEnd(strm) {\n\n  if (!strm || !strm.state /*|| strm->zfree == (free_func)0*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  var state = strm.state;\n  if (state.window) {\n    state.window = null;\n  }\n  strm.state = null;\n  return Z_OK;\n}\n\nfunction inflateGetHeader(strm, head) {\n  var state;\n\n  /* check state */\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  if ((state.wrap & 2) === 0) { return Z_STREAM_ERROR; }\n\n  /* save header structure */\n  state.head = head;\n  head.done = false;\n  return Z_OK;\n}\n\nfunction inflateSetDictionary(strm, dictionary) {\n  var dictLength = dictionary.length;\n\n  var state;\n  var dictid;\n  var ret;\n\n  /* check state */\n  if (!strm /* == Z_NULL */ || !strm.state /* == Z_NULL */) { return Z_STREAM_ERROR; }\n  state = strm.state;\n\n  if (state.wrap !== 0 && state.mode !== DICT) {\n    return Z_STREAM_ERROR;\n  }\n\n  /* check for correct dictionary identifier */\n  if (state.mode === DICT) {\n    dictid = 1; /* adler32(0, null, 0)*/\n    /* dictid = adler32(dictid, dictionary, dictLength); */\n    dictid = adler32(dictid, dictionary, dictLength, 0);\n    if (dictid !== state.check) {\n      return Z_DATA_ERROR;\n    }\n  }\n  /* copy dictionary to window using updatewindow(), which will amend the\n   existing dictionary if appropriate */\n  ret = updatewindow(strm, dictionary, dictLength, dictLength);\n  if (ret) {\n    state.mode = MEM;\n    return Z_MEM_ERROR;\n  }\n  state.havedict = 1;\n  // Tracev((stderr, \"inflate:   dictionary set\\n\"));\n  return Z_OK;\n}\n\nexports.inflateReset = inflateReset;\nexports.inflateReset2 = inflateReset2;\nexports.inflateResetKeep = inflateResetKeep;\nexports.inflateInit = inflateInit;\nexports.inflateInit2 = inflateInit2;\nexports.inflate = inflate;\nexports.inflateEnd = inflateEnd;\nexports.inflateGetHeader = inflateGetHeader;\nexports.inflateSetDictionary = inflateSetDictionary;\nexports.inflateInfo = 'pako inflate (from Nodeca project)';\n\n/* Not implemented\nexports.inflateCopy = inflateCopy;\nexports.inflateGetDictionary = inflateGetDictionary;\nexports.inflateMark = inflateMark;\nexports.inflatePrime = inflatePrime;\nexports.inflateSync = inflateSync;\nexports.inflateSyncPoint = inflateSyncPoint;\nexports.inflateUndermine = inflateUndermine;\n*/\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils = require('../utils/common');\n\nvar MAXBITS = 15;\nvar ENOUGH_LENS = 852;\nvar ENOUGH_DISTS = 592;\n//var ENOUGH = (ENOUGH_LENS+ENOUGH_DISTS);\n\nvar CODES = 0;\nvar LENS = 1;\nvar DISTS = 2;\n\nvar lbase = [ /* Length codes 257..285 base */\n  3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,\n  35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0\n];\n\nvar lext = [ /* Length codes 257..285 extra */\n  16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18,\n  19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78\n];\n\nvar dbase = [ /* Distance codes 0..29 base */\n  1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,\n  257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,\n  8193, 12289, 16385, 24577, 0, 0\n];\n\nvar dext = [ /* Distance codes 0..29 extra */\n  16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22,\n  23, 23, 24, 24, 25, 25, 26, 26, 27, 27,\n  28, 28, 29, 29, 64, 64\n];\n\nmodule.exports = function inflate_table(type, lens, lens_index, codes, table, table_index, work, opts)\n{\n  var bits = opts.bits;\n      //here = opts.here; /* table entry for duplication */\n\n  var len = 0;               /* a code's length in bits */\n  var sym = 0;               /* index of code symbols */\n  var min = 0, max = 0;          /* minimum and maximum code lengths */\n  var root = 0;              /* number of index bits for root table */\n  var curr = 0;              /* number of index bits for current table */\n  var drop = 0;              /* code bits to drop for sub-table */\n  var left = 0;                   /* number of prefix codes available */\n  var used = 0;              /* code entries in table used */\n  var huff = 0;              /* Huffman code */\n  var incr;              /* for incrementing code, index */\n  var fill;              /* index for replicating entries */\n  var low;               /* low bits for current root entry */\n  var mask;              /* mask for low root bits */\n  var next;             /* next available space in table */\n  var base = null;     /* base value table to use */\n  var base_index = 0;\n//  var shoextra;    /* extra bits table to use */\n  var end;                    /* use base and extra for symbol > end */\n  var count = new utils.Buf16(MAXBITS + 1); //[MAXBITS+1];    /* number of codes of each length */\n  var offs = new utils.Buf16(MAXBITS + 1); //[MAXBITS+1];     /* offsets in table for each length */\n  var extra = null;\n  var extra_index = 0;\n\n  var here_bits, here_op, here_val;\n\n  /*\n   Process a set of code lengths to create a canonical Huffman code.  The\n   code lengths are lens[0..codes-1].  Each length corresponds to the\n   symbols 0..codes-1.  The Huffman code is generated by first sorting the\n   symbols by length from short to long, and retaining the symbol order\n   for codes with equal lengths.  Then the code starts with all zero bits\n   for the first code of the shortest length, and the codes are integer\n   increments for the same length, and zeros are appended as the length\n   increases.  For the deflate format, these bits are stored backwards\n   from their more natural integer increment ordering, and so when the\n   decoding tables are built in the large loop below, the integer codes\n   are incremented backwards.\n\n   This routine assumes, but does not check, that all of the entries in\n   lens[] are in the range 0..MAXBITS.  The caller must assure this.\n   1..MAXBITS is interpreted as that code length.  zero means that that\n   symbol does not occur in this code.\n\n   The codes are sorted by computing a count of codes for each length,\n   creating from that a table of starting indices for each length in the\n   sorted table, and then entering the symbols in order in the sorted\n   table.  The sorted table is work[], with that space being provided by\n   the caller.\n\n   The length counts are used for other purposes as well, i.e. finding\n   the minimum and maximum length codes, determining if there are any\n   codes at all, checking for a valid set of lengths, and looking ahead\n   at length counts to determine sub-table sizes when building the\n   decoding tables.\n   */\n\n  /* accumulate lengths for codes (assumes lens[] all in 0..MAXBITS) */\n  for (len = 0; len <= MAXBITS; len++) {\n    count[len] = 0;\n  }\n  for (sym = 0; sym < codes; sym++) {\n    count[lens[lens_index + sym]]++;\n  }\n\n  /* bound code lengths, force root to be within code lengths */\n  root = bits;\n  for (max = MAXBITS; max >= 1; max--) {\n    if (count[max] !== 0) { break; }\n  }\n  if (root > max) {\n    root = max;\n  }\n  if (max === 0) {                     /* no symbols to code at all */\n    //table.op[opts.table_index] = 64;  //here.op = (var char)64;    /* invalid code marker */\n    //table.bits[opts.table_index] = 1;   //here.bits = (var char)1;\n    //table.val[opts.table_index++] = 0;   //here.val = (var short)0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n\n    //table.op[opts.table_index] = 64;\n    //table.bits[opts.table_index] = 1;\n    //table.val[opts.table_index++] = 0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n    opts.bits = 1;\n    return 0;     /* no symbols, but wait for decoding to report error */\n  }\n  for (min = 1; min < max; min++) {\n    if (count[min] !== 0) { break; }\n  }\n  if (root < min) {\n    root = min;\n  }\n\n  /* check for an over-subscribed or incomplete set of lengths */\n  left = 1;\n  for (len = 1; len <= MAXBITS; len++) {\n    left <<= 1;\n    left -= count[len];\n    if (left < 0) {\n      return -1;\n    }        /* over-subscribed */\n  }\n  if (left > 0 && (type === CODES || max !== 1)) {\n    return -1;                      /* incomplete set */\n  }\n\n  /* generate offsets into symbol table for each length for sorting */\n  offs[1] = 0;\n  for (len = 1; len < MAXBITS; len++) {\n    offs[len + 1] = offs[len] + count[len];\n  }\n\n  /* sort symbols by length, by symbol order within each length */\n  for (sym = 0; sym < codes; sym++) {\n    if (lens[lens_index + sym] !== 0) {\n      work[offs[lens[lens_index + sym]]++] = sym;\n    }\n  }\n\n  /*\n   Create and fill in decoding tables.  In this loop, the table being\n   filled is at next and has curr index bits.  The code being used is huff\n   with length len.  That code is converted to an index by dropping drop\n   bits off of the bottom.  For codes where len is less than drop + curr,\n   those top drop + curr - len bits are incremented through all values to\n   fill the table with replicated entries.\n\n   root is the number of index bits for the root table.  When len exceeds\n   root, sub-tables are created pointed to by the root entry with an index\n   of the low root bits of huff.  This is saved in low to check for when a\n   new sub-table should be started.  drop is zero when the root table is\n   being filled, and drop is root when sub-tables are being filled.\n\n   When a new sub-table is needed, it is necessary to look ahead in the\n   code lengths to determine what size sub-table is needed.  The length\n   counts are used for this, and so count[] is decremented as codes are\n   entered in the tables.\n\n   used keeps track of how many table entries have been allocated from the\n   provided *table space.  It is checked for LENS and DIST tables against\n   the constants ENOUGH_LENS and ENOUGH_DISTS to guard against changes in\n   the initial root table size constants.  See the comments in inftrees.h\n   for more information.\n\n   sym increments through all symbols, and the loop terminates when\n   all codes of length max, i.e. all codes, have been processed.  This\n   routine permits incomplete codes, so another loop after this one fills\n   in the rest of the decoding tables with invalid code markers.\n   */\n\n  /* set up for code type */\n  // poor man optimization - use if-else instead of switch,\n  // to avoid deopts in old v8\n  if (type === CODES) {\n    base = extra = work;    /* dummy value--not used */\n    end = 19;\n\n  } else if (type === LENS) {\n    base = lbase;\n    base_index -= 257;\n    extra = lext;\n    extra_index -= 257;\n    end = 256;\n\n  } else {                    /* DISTS */\n    base = dbase;\n    extra = dext;\n    end = -1;\n  }\n\n  /* initialize opts for loop */\n  huff = 0;                   /* starting code */\n  sym = 0;                    /* starting code symbol */\n  len = min;                  /* starting code length */\n  next = table_index;              /* current table to fill in */\n  curr = root;                /* current table index bits */\n  drop = 0;                   /* current bits to drop from code for index */\n  low = -1;                   /* trigger new sub-table when len > root */\n  used = 1 << root;          /* use root table entries */\n  mask = used - 1;            /* mask for comparing low */\n\n  /* check available table space */\n  if ((type === LENS && used > ENOUGH_LENS) ||\n    (type === DISTS && used > ENOUGH_DISTS)) {\n    return 1;\n  }\n\n  /* process all codes and make table entries */\n  for (;;) {\n    /* create table entry */\n    here_bits = len - drop;\n    if (work[sym] < end) {\n      here_op = 0;\n      here_val = work[sym];\n    }\n    else if (work[sym] > end) {\n      here_op = extra[extra_index + work[sym]];\n      here_val = base[base_index + work[sym]];\n    }\n    else {\n      here_op = 32 + 64;         /* end of block */\n      here_val = 0;\n    }\n\n    /* replicate for those indices with low len bits equal to huff */\n    incr = 1 << (len - drop);\n    fill = 1 << curr;\n    min = fill;                 /* save offset to next table */\n    do {\n      fill -= incr;\n      table[next + (huff >> drop) + fill] = (here_bits << 24) | (here_op << 16) | here_val |0;\n    } while (fill !== 0);\n\n    /* backwards increment the len-bit code huff */\n    incr = 1 << (len - 1);\n    while (huff & incr) {\n      incr >>= 1;\n    }\n    if (incr !== 0) {\n      huff &= incr - 1;\n      huff += incr;\n    } else {\n      huff = 0;\n    }\n\n    /* go to next symbol, update count, len */\n    sym++;\n    if (--count[len] === 0) {\n      if (len === max) { break; }\n      len = lens[lens_index + work[sym]];\n    }\n\n    /* create new sub-table if needed */\n    if (len > root && (huff & mask) !== low) {\n      /* if first time, transition to sub-tables */\n      if (drop === 0) {\n        drop = root;\n      }\n\n      /* increment past last table */\n      next += min;            /* here min is 1 << curr */\n\n      /* determine length of next table */\n      curr = len - drop;\n      left = 1 << curr;\n      while (curr + drop < max) {\n        left -= count[curr + drop];\n        if (left <= 0) { break; }\n        curr++;\n        left <<= 1;\n      }\n\n      /* check for enough space */\n      used += 1 << curr;\n      if ((type === LENS && used > ENOUGH_LENS) ||\n        (type === DISTS && used > ENOUGH_DISTS)) {\n        return 1;\n      }\n\n      /* point entry in root table to sub-table */\n      low = huff & mask;\n      /*table.op[low] = curr;\n      table.bits[low] = root;\n      table.val[low] = next - opts.table_index;*/\n      table[low] = (root << 24) | (curr << 16) | (next - table_index) |0;\n    }\n  }\n\n  /* fill in remaining table entry if code is incomplete (guaranteed to have\n   at most one remaining entry, since if the code is incomplete, the\n   maximum code length that was allowed to get this far is one bit) */\n  if (huff !== 0) {\n    //table.op[next + huff] = 64;            /* invalid code marker */\n    //table.bits[next + huff] = len - drop;\n    //table.val[next + huff] = 0;\n    table[next + huff] = ((len - drop) << 24) | (64 << 16) |0;\n  }\n\n  /* set return parameters */\n  //opts.table_index += used;\n  opts.bits = root;\n  return 0;\n};\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nmodule.exports = {\n  2:      'need dictionary',     /* Z_NEED_DICT       2  */\n  1:      'stream end',          /* Z_STREAM_END      1  */\n  0:      '',                    /* Z_OK              0  */\n  '-1':   'file error',          /* Z_ERRNO         (-1) */\n  '-2':   'stream error',        /* Z_STREAM_ERROR  (-2) */\n  '-3':   'data error',          /* Z_DATA_ERROR    (-3) */\n  '-4':   'insufficient memory', /* Z_MEM_ERROR     (-4) */\n  '-5':   'buffer error',        /* Z_BUF_ERROR     (-5) */\n  '-6':   'incompatible version' /* Z_VERSION_ERROR (-6) */\n};\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n/* eslint-disable space-unary-ops */\n\nvar utils = require('../utils/common');\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n//var Z_FILTERED          = 1;\n//var Z_HUFFMAN_ONLY      = 2;\n//var Z_RLE               = 3;\nvar Z_FIXED               = 4;\n//var Z_DEFAULT_STRATEGY  = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\nvar Z_BINARY              = 0;\nvar Z_TEXT                = 1;\n//var Z_ASCII             = 1; // = Z_TEXT\nvar Z_UNKNOWN             = 2;\n\n/*============================================================================*/\n\n\nfunction zero(buf) { var len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n// From zutil.h\n\nvar STORED_BLOCK = 0;\nvar STATIC_TREES = 1;\nvar DYN_TREES    = 2;\n/* The three kinds of block type */\n\nvar MIN_MATCH    = 3;\nvar MAX_MATCH    = 258;\n/* The minimum and maximum match lengths */\n\n// From deflate.h\n/* ===========================================================================\n * Internal compression state.\n */\n\nvar LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\n\nvar LITERALS      = 256;\n/* number of literal bytes 0..255 */\n\nvar L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\n\nvar D_CODES       = 30;\n/* number of distance codes */\n\nvar BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\n\nvar HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\n\nvar MAX_BITS      = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nvar Buf_size      = 16;\n/* size of bit buffer in bi_buf */\n\n\n/* ===========================================================================\n * Constants\n */\n\nvar MAX_BL_BITS = 7;\n/* Bit length codes must not exceed MAX_BL_BITS bits */\n\nvar END_BLOCK   = 256;\n/* end of block literal code */\n\nvar REP_3_6     = 16;\n/* repeat previous bit length 3-6 times (2 bits of repeat count) */\n\nvar REPZ_3_10   = 17;\n/* repeat a zero length 3-10 times  (3 bits of repeat count) */\n\nvar REPZ_11_138 = 18;\n/* repeat a zero length 11-138 times  (7 bits of repeat count) */\n\n/* eslint-disable comma-spacing,array-bracket-spacing */\nvar extra_lbits =   /* extra bits for each length code */\n  [0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];\n\nvar extra_dbits =   /* extra bits for each distance code */\n  [0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];\n\nvar extra_blbits =  /* extra bits for each bit length code */\n  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];\n\nvar bl_order =\n  [16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];\n/* eslint-enable comma-spacing,array-bracket-spacing */\n\n/* The lengths of the bit length codes are sent in order of decreasing\n * probability, to avoid transmitting the lengths for unused bit length codes.\n */\n\n/* ===========================================================================\n * Local data. These are initialized only once.\n */\n\n// We pre-fill arrays with 0 to avoid uninitialized gaps\n\nvar DIST_CODE_LEN = 512; /* see definition of array dist_code below */\n\n// !!!! Use flat array instead of structure, Freq = i*2, Len = i*2+1\nvar static_ltree  = new Array((L_CODES + 2) * 2);\nzero(static_ltree);\n/* The static literal tree. Since the bit lengths are imposed, there is no\n * need for the L_CODES extra codes used during heap construction. However\n * The codes 286 and 287 are needed to build a canonical tree (see _tr_init\n * below).\n */\n\nvar static_dtree  = new Array(D_CODES * 2);\nzero(static_dtree);\n/* The static distance tree. (Actually a trivial tree since all codes use\n * 5 bits.)\n */\n\nvar _dist_code    = new Array(DIST_CODE_LEN);\nzero(_dist_code);\n/* Distance codes. The first 256 values correspond to the distances\n * 3 .. 258, the last 256 values correspond to the top 8 bits of\n * the 15 bit distances.\n */\n\nvar _length_code  = new Array(MAX_MATCH - MIN_MATCH + 1);\nzero(_length_code);\n/* length code for each normalized match length (0 == MIN_MATCH) */\n\nvar base_length   = new Array(LENGTH_CODES);\nzero(base_length);\n/* First normalized length for each code (0 = MIN_MATCH) */\n\nvar base_dist     = new Array(D_CODES);\nzero(base_dist);\n/* First normalized distance for each code (0 = distance of 1) */\n\n\nfunction StaticTreeDesc(static_tree, extra_bits, extra_base, elems, max_length) {\n\n  this.static_tree  = static_tree;  /* static tree or NULL */\n  this.extra_bits   = extra_bits;   /* extra bits for each code or NULL */\n  this.extra_base   = extra_base;   /* base index for extra_bits */\n  this.elems        = elems;        /* max number of elements in the tree */\n  this.max_length   = max_length;   /* max bit length for the codes */\n\n  // show if `static_tree` has data or dummy - needed for monomorphic objects\n  this.has_stree    = static_tree && static_tree.length;\n}\n\n\nvar static_l_desc;\nvar static_d_desc;\nvar static_bl_desc;\n\n\nfunction TreeDesc(dyn_tree, stat_desc) {\n  this.dyn_tree = dyn_tree;     /* the dynamic tree */\n  this.max_code = 0;            /* largest code with non zero frequency */\n  this.stat_desc = stat_desc;   /* the corresponding static tree */\n}\n\n\n\nfunction d_code(dist) {\n  return dist < 256 ? _dist_code[dist] : _dist_code[256 + (dist >>> 7)];\n}\n\n\n/* ===========================================================================\n * Output a short LSB first on the stream.\n * IN assertion: there is enough room in pendingBuf.\n */\nfunction put_short(s, w) {\n//    put_byte(s, (uch)((w) & 0xff));\n//    put_byte(s, (uch)((ush)(w) >> 8));\n  s.pending_buf[s.pending++] = (w) & 0xff;\n  s.pending_buf[s.pending++] = (w >>> 8) & 0xff;\n}\n\n\n/* ===========================================================================\n * Send a value on a given number of bits.\n * IN assertion: length <= 16 and value fits in length bits.\n */\nfunction send_bits(s, value, length) {\n  if (s.bi_valid > (Buf_size - length)) {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    put_short(s, s.bi_buf);\n    s.bi_buf = value >> (Buf_size - s.bi_valid);\n    s.bi_valid += length - Buf_size;\n  } else {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    s.bi_valid += length;\n  }\n}\n\n\nfunction send_code(s, c, tree) {\n  send_bits(s, tree[c * 2]/*.Code*/, tree[c * 2 + 1]/*.Len*/);\n}\n\n\n/* ===========================================================================\n * Reverse the first len bits of a code, using straightforward code (a faster\n * method would use a table)\n * IN assertion: 1 <= len <= 15\n */\nfunction bi_reverse(code, len) {\n  var res = 0;\n  do {\n    res |= code & 1;\n    code >>>= 1;\n    res <<= 1;\n  } while (--len > 0);\n  return res >>> 1;\n}\n\n\n/* ===========================================================================\n * Flush the bit buffer, keeping at most 7 bits in it.\n */\nfunction bi_flush(s) {\n  if (s.bi_valid === 16) {\n    put_short(s, s.bi_buf);\n    s.bi_buf = 0;\n    s.bi_valid = 0;\n\n  } else if (s.bi_valid >= 8) {\n    s.pending_buf[s.pending++] = s.bi_buf & 0xff;\n    s.bi_buf >>= 8;\n    s.bi_valid -= 8;\n  }\n}\n\n\n/* ===========================================================================\n * Compute the optimal bit lengths for a tree and update the total bit length\n * for the current block.\n * IN assertion: the fields freq and dad are set, heap[heap_max] and\n *    above are the tree nodes sorted by increasing frequency.\n * OUT assertions: the field len is set to the optimal bit length, the\n *     array bl_count contains the frequencies for each bit length.\n *     The length opt_len is updated; static_len is also updated if stree is\n *     not null.\n */\nfunction gen_bitlen(s, desc)\n//    deflate_state *s;\n//    tree_desc *desc;    /* the tree descriptor */\n{\n  var tree            = desc.dyn_tree;\n  var max_code        = desc.max_code;\n  var stree           = desc.stat_desc.static_tree;\n  var has_stree       = desc.stat_desc.has_stree;\n  var extra           = desc.stat_desc.extra_bits;\n  var base            = desc.stat_desc.extra_base;\n  var max_length      = desc.stat_desc.max_length;\n  var h;              /* heap index */\n  var n, m;           /* iterate over the tree elements */\n  var bits;           /* bit length */\n  var xbits;          /* extra bits */\n  var f;              /* frequency */\n  var overflow = 0;   /* number of elements with bit length too large */\n\n  for (bits = 0; bits <= MAX_BITS; bits++) {\n    s.bl_count[bits] = 0;\n  }\n\n  /* In a first pass, compute the optimal bit lengths (which may\n   * overflow in the case of the bit length tree).\n   */\n  tree[s.heap[s.heap_max] * 2 + 1]/*.Len*/ = 0; /* root of the heap */\n\n  for (h = s.heap_max + 1; h < HEAP_SIZE; h++) {\n    n = s.heap[h];\n    bits = tree[tree[n * 2 + 1]/*.Dad*/ * 2 + 1]/*.Len*/ + 1;\n    if (bits > max_length) {\n      bits = max_length;\n      overflow++;\n    }\n    tree[n * 2 + 1]/*.Len*/ = bits;\n    /* We overwrite tree[n].Dad which is no longer needed */\n\n    if (n > max_code) { continue; } /* not a leaf node */\n\n    s.bl_count[bits]++;\n    xbits = 0;\n    if (n >= base) {\n      xbits = extra[n - base];\n    }\n    f = tree[n * 2]/*.Freq*/;\n    s.opt_len += f * (bits + xbits);\n    if (has_stree) {\n      s.static_len += f * (stree[n * 2 + 1]/*.Len*/ + xbits);\n    }\n  }\n  if (overflow === 0) { return; }\n\n  // Trace((stderr,\"\\nbit length overflow\\n\"));\n  /* This happens for example on obj2 and pic of the Calgary corpus */\n\n  /* Find the first bit length which could increase: */\n  do {\n    bits = max_length - 1;\n    while (s.bl_count[bits] === 0) { bits--; }\n    s.bl_count[bits]--;      /* move one leaf down the tree */\n    s.bl_count[bits + 1] += 2; /* move one overflow item as its brother */\n    s.bl_count[max_length]--;\n    /* The brother of the overflow item also moves one step up,\n     * but this does not affect bl_count[max_length]\n     */\n    overflow -= 2;\n  } while (overflow > 0);\n\n  /* Now recompute all bit lengths, scanning in increasing frequency.\n   * h is still equal to HEAP_SIZE. (It is simpler to reconstruct all\n   * lengths instead of fixing only the wrong ones. This idea is taken\n   * from 'ar' written by Haruhiko Okumura.)\n   */\n  for (bits = max_length; bits !== 0; bits--) {\n    n = s.bl_count[bits];\n    while (n !== 0) {\n      m = s.heap[--h];\n      if (m > max_code) { continue; }\n      if (tree[m * 2 + 1]/*.Len*/ !== bits) {\n        // Trace((stderr,\"code %d bits %d->%d\\n\", m, tree[m].Len, bits));\n        s.opt_len += (bits - tree[m * 2 + 1]/*.Len*/) * tree[m * 2]/*.Freq*/;\n        tree[m * 2 + 1]/*.Len*/ = bits;\n      }\n      n--;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Generate the codes for a given tree and bit counts (which need not be\n * optimal).\n * IN assertion: the array bl_count contains the bit length statistics for\n * the given tree and the field len is set for all tree elements.\n * OUT assertion: the field code is set for all tree elements of non\n *     zero code length.\n */\nfunction gen_codes(tree, max_code, bl_count)\n//    ct_data *tree;             /* the tree to decorate */\n//    int max_code;              /* largest code with non zero frequency */\n//    ushf *bl_count;            /* number of codes at each bit length */\n{\n  var next_code = new Array(MAX_BITS + 1); /* next code value for each bit length */\n  var code = 0;              /* running code value */\n  var bits;                  /* bit index */\n  var n;                     /* code index */\n\n  /* The distribution counts are first used to generate the code values\n   * without bit reversal.\n   */\n  for (bits = 1; bits <= MAX_BITS; bits++) {\n    next_code[bits] = code = (code + bl_count[bits - 1]) << 1;\n  }\n  /* Check that the bit counts in bl_count are consistent. The last code\n   * must be all ones.\n   */\n  //Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,\n  //        \"inconsistent bit counts\");\n  //Tracev((stderr,\"\\ngen_codes: max_code %d \", max_code));\n\n  for (n = 0;  n <= max_code; n++) {\n    var len = tree[n * 2 + 1]/*.Len*/;\n    if (len === 0) { continue; }\n    /* Now reverse the bits */\n    tree[n * 2]/*.Code*/ = bi_reverse(next_code[len]++, len);\n\n    //Tracecv(tree != static_ltree, (stderr,\"\\nn %3d %c l %2d c %4x (%x) \",\n    //     n, (isgraph(n) ? n : ' '), len, tree[n].Code, next_code[len]-1));\n  }\n}\n\n\n/* ===========================================================================\n * Initialize the various 'constant' tables.\n */\nfunction tr_static_init() {\n  var n;        /* iterates over tree elements */\n  var bits;     /* bit counter */\n  var length;   /* length value */\n  var code;     /* code value */\n  var dist;     /* distance index */\n  var bl_count = new Array(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  // do check in _tr_init()\n  //if (static_init_done) return;\n\n  /* For some embedded targets, global variables are not initialized: */\n/*#ifdef NO_INIT_GLOBAL_POINTERS\n  static_l_desc.static_tree = static_ltree;\n  static_l_desc.extra_bits = extra_lbits;\n  static_d_desc.static_tree = static_dtree;\n  static_d_desc.extra_bits = extra_dbits;\n  static_bl_desc.extra_bits = extra_blbits;\n#endif*/\n\n  /* Initialize the mapping length (0..255) -> length code (0..28) */\n  length = 0;\n  for (code = 0; code < LENGTH_CODES - 1; code++) {\n    base_length[code] = length;\n    for (n = 0; n < (1 << extra_lbits[code]); n++) {\n      _length_code[length++] = code;\n    }\n  }\n  //Assert (length == 256, \"tr_static_init: length != 256\");\n  /* Note that the length 255 (match length 258) can be represented\n   * in two different ways: code 284 + 5 bits or code 285, so we\n   * overwrite length_code[255] to use the best encoding:\n   */\n  _length_code[length - 1] = code;\n\n  /* Initialize the mapping dist (0..32K) -> dist code (0..29) */\n  dist = 0;\n  for (code = 0; code < 16; code++) {\n    base_dist[code] = dist;\n    for (n = 0; n < (1 << extra_dbits[code]); n++) {\n      _dist_code[dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: dist != 256\");\n  dist >>= 7; /* from now on, all distances are divided by 128 */\n  for (; code < D_CODES; code++) {\n    base_dist[code] = dist << 7;\n    for (n = 0; n < (1 << (extra_dbits[code] - 7)); n++) {\n      _dist_code[256 + dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: 256+dist != 512\");\n\n  /* Construct the codes of the static literal tree */\n  for (bits = 0; bits <= MAX_BITS; bits++) {\n    bl_count[bits] = 0;\n  }\n\n  n = 0;\n  while (n <= 143) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  while (n <= 255) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 9;\n    n++;\n    bl_count[9]++;\n  }\n  while (n <= 279) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 7;\n    n++;\n    bl_count[7]++;\n  }\n  while (n <= 287) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  /* Codes 286 and 287 do not exist, but we must include them in the\n   * tree construction to get a canonical Huffman tree (longest code\n   * all ones)\n   */\n  gen_codes(static_ltree, L_CODES + 1, bl_count);\n\n  /* The static distance tree is trivial: */\n  for (n = 0; n < D_CODES; n++) {\n    static_dtree[n * 2 + 1]/*.Len*/ = 5;\n    static_dtree[n * 2]/*.Code*/ = bi_reverse(n, 5);\n  }\n\n  // Now data ready and we can init static trees\n  static_l_desc = new StaticTreeDesc(static_ltree, extra_lbits, LITERALS + 1, L_CODES, MAX_BITS);\n  static_d_desc = new StaticTreeDesc(static_dtree, extra_dbits, 0,          D_CODES, MAX_BITS);\n  static_bl_desc = new StaticTreeDesc(new Array(0), extra_blbits, 0,         BL_CODES, MAX_BL_BITS);\n\n  //static_init_done = true;\n}\n\n\n/* ===========================================================================\n * Initialize a new block.\n */\nfunction init_block(s) {\n  var n; /* iterates over tree elements */\n\n  /* Initialize the trees. */\n  for (n = 0; n < L_CODES;  n++) { s.dyn_ltree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < D_CODES;  n++) { s.dyn_dtree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < BL_CODES; n++) { s.bl_tree[n * 2]/*.Freq*/ = 0; }\n\n  s.dyn_ltree[END_BLOCK * 2]/*.Freq*/ = 1;\n  s.opt_len = s.static_len = 0;\n  s.last_lit = s.matches = 0;\n}\n\n\n/* ===========================================================================\n * Flush the bit buffer and align the output on a byte boundary\n */\nfunction bi_windup(s)\n{\n  if (s.bi_valid > 8) {\n    put_short(s, s.bi_buf);\n  } else if (s.bi_valid > 0) {\n    //put_byte(s, (Byte)s->bi_buf);\n    s.pending_buf[s.pending++] = s.bi_buf;\n  }\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n}\n\n/* ===========================================================================\n * Copy a stored block, storing first the length and its\n * one's complement if requested.\n */\nfunction copy_block(s, buf, len, header)\n//DeflateState *s;\n//charf    *buf;    /* the input data */\n//unsigned len;     /* its length */\n//int      header;  /* true if block header must be written */\n{\n  bi_windup(s);        /* align on byte boundary */\n\n  if (header) {\n    put_short(s, len);\n    put_short(s, ~len);\n  }\n//  while (len--) {\n//    put_byte(s, *buf++);\n//  }\n  utils.arraySet(s.pending_buf, s.window, buf, len, s.pending);\n  s.pending += len;\n}\n\n/* ===========================================================================\n * Compares to subtrees, using the tree depth as tie breaker when\n * the subtrees have equal frequency. This minimizes the worst case length.\n */\nfunction smaller(tree, n, m, depth) {\n  var _n2 = n * 2;\n  var _m2 = m * 2;\n  return (tree[_n2]/*.Freq*/ < tree[_m2]/*.Freq*/ ||\n         (tree[_n2]/*.Freq*/ === tree[_m2]/*.Freq*/ && depth[n] <= depth[m]));\n}\n\n/* ===========================================================================\n * Restore the heap property by moving down the tree starting at node k,\n * exchanging a node with the smallest of its two sons if necessary, stopping\n * when the heap property is re-established (each father smaller than its\n * two sons).\n */\nfunction pqdownheap(s, tree, k)\n//    deflate_state *s;\n//    ct_data *tree;  /* the tree to restore */\n//    int k;               /* node to move down */\n{\n  var v = s.heap[k];\n  var j = k << 1;  /* left son of k */\n  while (j <= s.heap_len) {\n    /* Set j to the smallest of the two sons: */\n    if (j < s.heap_len &&\n      smaller(tree, s.heap[j + 1], s.heap[j], s.depth)) {\n      j++;\n    }\n    /* Exit if v is smaller than both sons */\n    if (smaller(tree, v, s.heap[j], s.depth)) { break; }\n\n    /* Exchange v with the smallest son */\n    s.heap[k] = s.heap[j];\n    k = j;\n\n    /* And continue down the tree, setting j to the left son of k */\n    j <<= 1;\n  }\n  s.heap[k] = v;\n}\n\n\n// inlined manually\n// var SMALLEST = 1;\n\n/* ===========================================================================\n * Send the block data compressed using the given Huffman trees\n */\nfunction compress_block(s, ltree, dtree)\n//    deflate_state *s;\n//    const ct_data *ltree; /* literal tree */\n//    const ct_data *dtree; /* distance tree */\n{\n  var dist;           /* distance of matched string */\n  var lc;             /* match length or unmatched char (if dist == 0) */\n  var lx = 0;         /* running index in l_buf */\n  var code;           /* the code to send */\n  var extra;          /* number of extra bits to send */\n\n  if (s.last_lit !== 0) {\n    do {\n      dist = (s.pending_buf[s.d_buf + lx * 2] << 8) | (s.pending_buf[s.d_buf + lx * 2 + 1]);\n      lc = s.pending_buf[s.l_buf + lx];\n      lx++;\n\n      if (dist === 0) {\n        send_code(s, lc, ltree); /* send a literal byte */\n        //Tracecv(isgraph(lc), (stderr,\" '%c' \", lc));\n      } else {\n        /* Here, lc is the match length - MIN_MATCH */\n        code = _length_code[lc];\n        send_code(s, code + LITERALS + 1, ltree); /* send the length code */\n        extra = extra_lbits[code];\n        if (extra !== 0) {\n          lc -= base_length[code];\n          send_bits(s, lc, extra);       /* send the extra length bits */\n        }\n        dist--; /* dist is now the match distance - 1 */\n        code = d_code(dist);\n        //Assert (code < D_CODES, \"bad d_code\");\n\n        send_code(s, code, dtree);       /* send the distance code */\n        extra = extra_dbits[code];\n        if (extra !== 0) {\n          dist -= base_dist[code];\n          send_bits(s, dist, extra);   /* send the extra distance bits */\n        }\n      } /* literal or match pair ? */\n\n      /* Check that the overlay between pending_buf and d_buf+l_buf is ok: */\n      //Assert((uInt)(s->pending) < s->lit_bufsize + 2*lx,\n      //       \"pendingBuf overflow\");\n\n    } while (lx < s.last_lit);\n  }\n\n  send_code(s, END_BLOCK, ltree);\n}\n\n\n/* ===========================================================================\n * Construct one Huffman tree and assigns the code bit strings and lengths.\n * Update the total bit length for the current block.\n * IN assertion: the field freq is set for all tree elements.\n * OUT assertions: the fields len and code are set to the optimal bit length\n *     and corresponding code. The length opt_len is updated; static_len is\n *     also updated if stree is not null. The field max_code is set.\n */\nfunction build_tree(s, desc)\n//    deflate_state *s;\n//    tree_desc *desc; /* the tree descriptor */\n{\n  var tree     = desc.dyn_tree;\n  var stree    = desc.stat_desc.static_tree;\n  var has_stree = desc.stat_desc.has_stree;\n  var elems    = desc.stat_desc.elems;\n  var n, m;          /* iterate over heap elements */\n  var max_code = -1; /* largest code with non zero frequency */\n  var node;          /* new node being created */\n\n  /* Construct the initial heap, with least frequent element in\n   * heap[SMALLEST]. The sons of heap[n] are heap[2*n] and heap[2*n+1].\n   * heap[0] is not used.\n   */\n  s.heap_len = 0;\n  s.heap_max = HEAP_SIZE;\n\n  for (n = 0; n < elems; n++) {\n    if (tree[n * 2]/*.Freq*/ !== 0) {\n      s.heap[++s.heap_len] = max_code = n;\n      s.depth[n] = 0;\n\n    } else {\n      tree[n * 2 + 1]/*.Len*/ = 0;\n    }\n  }\n\n  /* The pkzip format requires that at least one distance code exists,\n   * and that at least one bit should be sent even if there is only one\n   * possible code. So to avoid special checks later on we force at least\n   * two codes of non zero frequency.\n   */\n  while (s.heap_len < 2) {\n    node = s.heap[++s.heap_len] = (max_code < 2 ? ++max_code : 0);\n    tree[node * 2]/*.Freq*/ = 1;\n    s.depth[node] = 0;\n    s.opt_len--;\n\n    if (has_stree) {\n      s.static_len -= stree[node * 2 + 1]/*.Len*/;\n    }\n    /* node is 0 or 1 so it does not have extra bits */\n  }\n  desc.max_code = max_code;\n\n  /* The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,\n   * establish sub-heaps of increasing lengths:\n   */\n  for (n = (s.heap_len >> 1/*int /2*/); n >= 1; n--) { pqdownheap(s, tree, n); }\n\n  /* Construct the Huffman tree by repeatedly combining the least two\n   * frequent nodes.\n   */\n  node = elems;              /* next internal node of the tree */\n  do {\n    //pqremove(s, tree, n);  /* n = node of least frequency */\n    /*** pqremove ***/\n    n = s.heap[1/*SMALLEST*/];\n    s.heap[1/*SMALLEST*/] = s.heap[s.heap_len--];\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n    /***/\n\n    m = s.heap[1/*SMALLEST*/]; /* m = node of next least frequency */\n\n    s.heap[--s.heap_max] = n; /* keep the nodes sorted by frequency */\n    s.heap[--s.heap_max] = m;\n\n    /* Create a new node father of n and m */\n    tree[node * 2]/*.Freq*/ = tree[n * 2]/*.Freq*/ + tree[m * 2]/*.Freq*/;\n    s.depth[node] = (s.depth[n] >= s.depth[m] ? s.depth[n] : s.depth[m]) + 1;\n    tree[n * 2 + 1]/*.Dad*/ = tree[m * 2 + 1]/*.Dad*/ = node;\n\n    /* and insert the new node in the heap */\n    s.heap[1/*SMALLEST*/] = node++;\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n\n  } while (s.heap_len >= 2);\n\n  s.heap[--s.heap_max] = s.heap[1/*SMALLEST*/];\n\n  /* At this point, the fields freq and dad are set. We can now\n   * generate the bit lengths.\n   */\n  gen_bitlen(s, desc);\n\n  /* The field len is now set, we can generate the bit codes */\n  gen_codes(tree, max_code, s.bl_count);\n}\n\n\n/* ===========================================================================\n * Scan a literal or distance tree to determine the frequencies of the codes\n * in the bit length tree.\n */\nfunction scan_tree(s, tree, max_code)\n//    deflate_state *s;\n//    ct_data *tree;   /* the tree to be scanned */\n//    int max_code;    /* and its largest code of non zero frequency */\n{\n  var n;                     /* iterates over all tree elements */\n  var prevlen = -1;          /* last emitted length */\n  var curlen;                /* length of current code */\n\n  var nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  var count = 0;             /* repeat count of the current code */\n  var max_count = 7;         /* max repeat count */\n  var min_count = 4;         /* min repeat count */\n\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n  tree[(max_code + 1) * 2 + 1]/*.Len*/ = 0xffff; /* guard */\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      s.bl_tree[curlen * 2]/*.Freq*/ += count;\n\n    } else if (curlen !== 0) {\n\n      if (curlen !== prevlen) { s.bl_tree[curlen * 2]/*.Freq*/++; }\n      s.bl_tree[REP_3_6 * 2]/*.Freq*/++;\n\n    } else if (count <= 10) {\n      s.bl_tree[REPZ_3_10 * 2]/*.Freq*/++;\n\n    } else {\n      s.bl_tree[REPZ_11_138 * 2]/*.Freq*/++;\n    }\n\n    count = 0;\n    prevlen = curlen;\n\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Send a literal or distance tree in compressed form, using the codes in\n * bl_tree.\n */\nfunction send_tree(s, tree, max_code)\n//    deflate_state *s;\n//    ct_data *tree; /* the tree to be scanned */\n//    int max_code;       /* and its largest code of non zero frequency */\n{\n  var n;                     /* iterates over all tree elements */\n  var prevlen = -1;          /* last emitted length */\n  var curlen;                /* length of current code */\n\n  var nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  var count = 0;             /* repeat count of the current code */\n  var max_count = 7;         /* max repeat count */\n  var min_count = 4;         /* min repeat count */\n\n  /* tree[max_code+1].Len = -1; */  /* guard already set */\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      do { send_code(s, curlen, s.bl_tree); } while (--count !== 0);\n\n    } else if (curlen !== 0) {\n      if (curlen !== prevlen) {\n        send_code(s, curlen, s.bl_tree);\n        count--;\n      }\n      //Assert(count >= 3 && count <= 6, \" 3_6?\");\n      send_code(s, REP_3_6, s.bl_tree);\n      send_bits(s, count - 3, 2);\n\n    } else if (count <= 10) {\n      send_code(s, REPZ_3_10, s.bl_tree);\n      send_bits(s, count - 3, 3);\n\n    } else {\n      send_code(s, REPZ_11_138, s.bl_tree);\n      send_bits(s, count - 11, 7);\n    }\n\n    count = 0;\n    prevlen = curlen;\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Construct the Huffman tree for the bit lengths and return the index in\n * bl_order of the last bit length code to send.\n */\nfunction build_bl_tree(s) {\n  var max_blindex;  /* index of last bit length code of non zero freq */\n\n  /* Determine the bit length frequencies for literal and distance trees */\n  scan_tree(s, s.dyn_ltree, s.l_desc.max_code);\n  scan_tree(s, s.dyn_dtree, s.d_desc.max_code);\n\n  /* Build the bit length tree: */\n  build_tree(s, s.bl_desc);\n  /* opt_len now includes the length of the tree representations, except\n   * the lengths of the bit lengths codes and the 5+5+4 bits for the counts.\n   */\n\n  /* Determine the number of bit length codes to send. The pkzip format\n   * requires that at least 4 bit length codes be sent. (appnote.txt says\n   * 3 but the actual value used is 4.)\n   */\n  for (max_blindex = BL_CODES - 1; max_blindex >= 3; max_blindex--) {\n    if (s.bl_tree[bl_order[max_blindex] * 2 + 1]/*.Len*/ !== 0) {\n      break;\n    }\n  }\n  /* Update opt_len to include the bit length tree and counts */\n  s.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4;\n  //Tracev((stderr, \"\\ndyn trees: dyn %ld, stat %ld\",\n  //        s->opt_len, s->static_len));\n\n  return max_blindex;\n}\n\n\n/* ===========================================================================\n * Send the header for a block using dynamic Huffman trees: the counts, the\n * lengths of the bit length codes, the literal tree and the distance tree.\n * IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.\n */\nfunction send_all_trees(s, lcodes, dcodes, blcodes)\n//    deflate_state *s;\n//    int lcodes, dcodes, blcodes; /* number of codes for each tree */\n{\n  var rank;                    /* index in bl_order */\n\n  //Assert (lcodes >= 257 && dcodes >= 1 && blcodes >= 4, \"not enough codes\");\n  //Assert (lcodes <= L_CODES && dcodes <= D_CODES && blcodes <= BL_CODES,\n  //        \"too many codes\");\n  //Tracev((stderr, \"\\nbl counts: \"));\n  send_bits(s, lcodes - 257, 5); /* not +255 as stated in appnote.txt */\n  send_bits(s, dcodes - 1,   5);\n  send_bits(s, blcodes - 4,  4); /* not -3 as stated in appnote.txt */\n  for (rank = 0; rank < blcodes; rank++) {\n    //Tracev((stderr, \"\\nbl code %2d \", bl_order[rank]));\n    send_bits(s, s.bl_tree[bl_order[rank] * 2 + 1]/*.Len*/, 3);\n  }\n  //Tracev((stderr, \"\\nbl tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_ltree, lcodes - 1); /* literal tree */\n  //Tracev((stderr, \"\\nlit tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_dtree, dcodes - 1); /* distance tree */\n  //Tracev((stderr, \"\\ndist tree: sent %ld\", s->bits_sent));\n}\n\n\n/* ===========================================================================\n * Check if the data type is TEXT or BINARY, using the following algorithm:\n * - TEXT if the two conditions below are satisfied:\n *    a) There are no non-portable control characters belonging to the\n *       \"black list\" (0..6, 14..25, 28..31).\n *    b) There is at least one printable character belonging to the\n *       \"white list\" (9 {TAB}, 10 {LF}, 13 {CR}, 32..255).\n * - BINARY otherwise.\n * - The following partially-portable control characters form a\n *   \"gray list\" that is ignored in this detection algorithm:\n *   (7 {BEL}, 8 {BS}, 11 {VT}, 12 {FF}, 26 {SUB}, 27 {ESC}).\n * IN assertion: the fields Freq of dyn_ltree are set.\n */\nfunction detect_data_type(s) {\n  /* black_mask is the bit mask of black-listed bytes\n   * set bits 0..6, 14..25, and 28..31\n   * 0xf3ffc07f = binary 11110011111111111100000001111111\n   */\n  var black_mask = 0xf3ffc07f;\n  var n;\n\n  /* Check for non-textual (\"black-listed\") bytes. */\n  for (n = 0; n <= 31; n++, black_mask >>>= 1) {\n    if ((black_mask & 1) && (s.dyn_ltree[n * 2]/*.Freq*/ !== 0)) {\n      return Z_BINARY;\n    }\n  }\n\n  /* Check for textual (\"white-listed\") bytes. */\n  if (s.dyn_ltree[9 * 2]/*.Freq*/ !== 0 || s.dyn_ltree[10 * 2]/*.Freq*/ !== 0 ||\n      s.dyn_ltree[13 * 2]/*.Freq*/ !== 0) {\n    return Z_TEXT;\n  }\n  for (n = 32; n < LITERALS; n++) {\n    if (s.dyn_ltree[n * 2]/*.Freq*/ !== 0) {\n      return Z_TEXT;\n    }\n  }\n\n  /* There are no \"black-listed\" or \"white-listed\" bytes:\n   * this stream either is empty or has tolerated (\"gray-listed\") bytes only.\n   */\n  return Z_BINARY;\n}\n\n\nvar static_init_done = false;\n\n/* ===========================================================================\n * Initialize the tree data structures for a new zlib stream.\n */\nfunction _tr_init(s)\n{\n\n  if (!static_init_done) {\n    tr_static_init();\n    static_init_done = true;\n  }\n\n  s.l_desc  = new TreeDesc(s.dyn_ltree, static_l_desc);\n  s.d_desc  = new TreeDesc(s.dyn_dtree, static_d_desc);\n  s.bl_desc = new TreeDesc(s.bl_tree, static_bl_desc);\n\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n\n  /* Initialize the first block of the first file: */\n  init_block(s);\n}\n\n\n/* ===========================================================================\n * Send a stored block\n */\nfunction _tr_stored_block(s, buf, stored_len, last)\n//DeflateState *s;\n//charf *buf;       /* input block */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  send_bits(s, (STORED_BLOCK << 1) + (last ? 1 : 0), 3);    /* send block type */\n  copy_block(s, buf, stored_len, true); /* with header */\n}\n\n\n/* ===========================================================================\n * Send one empty static block to give enough lookahead for inflate.\n * This takes 10 bits, of which 7 may remain in the bit buffer.\n */\nfunction _tr_align(s) {\n  send_bits(s, STATIC_TREES << 1, 3);\n  send_code(s, END_BLOCK, static_ltree);\n  bi_flush(s);\n}\n\n\n/* ===========================================================================\n * Determine the best encoding for the current block: dynamic trees, static\n * trees or store, and output the encoded block to the zip file.\n */\nfunction _tr_flush_block(s, buf, stored_len, last)\n//DeflateState *s;\n//charf *buf;       /* input block, or NULL if too old */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  var opt_lenb, static_lenb;  /* opt_len and static_len in bytes */\n  var max_blindex = 0;        /* index of last bit length code of non zero freq */\n\n  /* Build the Huffman trees unless a stored block is forced */\n  if (s.level > 0) {\n\n    /* Check if the file is binary or text */\n    if (s.strm.data_type === Z_UNKNOWN) {\n      s.strm.data_type = detect_data_type(s);\n    }\n\n    /* Construct the literal and distance trees */\n    build_tree(s, s.l_desc);\n    // Tracev((stderr, \"\\nlit data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n\n    build_tree(s, s.d_desc);\n    // Tracev((stderr, \"\\ndist data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n    /* At this point, opt_len and static_len are the total bit lengths of\n     * the compressed block data, excluding the tree representations.\n     */\n\n    /* Build the bit length tree for the above two trees, and get the index\n     * in bl_order of the last bit length code to send.\n     */\n    max_blindex = build_bl_tree(s);\n\n    /* Determine the best encoding. Compute the block lengths in bytes. */\n    opt_lenb = (s.opt_len + 3 + 7) >>> 3;\n    static_lenb = (s.static_len + 3 + 7) >>> 3;\n\n    // Tracev((stderr, \"\\nopt %lu(%lu) stat %lu(%lu) stored %lu lit %u \",\n    //        opt_lenb, s->opt_len, static_lenb, s->static_len, stored_len,\n    //        s->last_lit));\n\n    if (static_lenb <= opt_lenb) { opt_lenb = static_lenb; }\n\n  } else {\n    // Assert(buf != (char*)0, \"lost buf\");\n    opt_lenb = static_lenb = stored_len + 5; /* force a stored block */\n  }\n\n  if ((stored_len + 4 <= opt_lenb) && (buf !== -1)) {\n    /* 4: two words for the lengths */\n\n    /* The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.\n     * Otherwise we can't have processed more than WSIZE input bytes since\n     * the last block flush, because compression would have been\n     * successful. If LIT_BUFSIZE <= WSIZE, it is never too late to\n     * transform a block into a stored block.\n     */\n    _tr_stored_block(s, buf, stored_len, last);\n\n  } else if (s.strategy === Z_FIXED || static_lenb === opt_lenb) {\n\n    send_bits(s, (STATIC_TREES << 1) + (last ? 1 : 0), 3);\n    compress_block(s, static_ltree, static_dtree);\n\n  } else {\n    send_bits(s, (DYN_TREES << 1) + (last ? 1 : 0), 3);\n    send_all_trees(s, s.l_desc.max_code + 1, s.d_desc.max_code + 1, max_blindex + 1);\n    compress_block(s, s.dyn_ltree, s.dyn_dtree);\n  }\n  // Assert (s->compressed_len == s->bits_sent, \"bad compressed size\");\n  /* The above check is made mod 2^32, for files larger than 512 MB\n   * and uLong implemented on 32 bits.\n   */\n  init_block(s);\n\n  if (last) {\n    bi_windup(s);\n  }\n  // Tracev((stderr,\"\\ncomprlen %lu(%lu) \", s->compressed_len>>3,\n  //       s->compressed_len-7*last));\n}\n\n/* ===========================================================================\n * Save the match info and tally the frequency counts. Return true if\n * the current block must be flushed.\n */\nfunction _tr_tally(s, dist, lc)\n//    deflate_state *s;\n//    unsigned dist;  /* distance of matched string */\n//    unsigned lc;    /* match length-MIN_MATCH or unmatched char (if dist==0) */\n{\n  //var out_length, in_length, dcode;\n\n  s.pending_buf[s.d_buf + s.last_lit * 2]     = (dist >>> 8) & 0xff;\n  s.pending_buf[s.d_buf + s.last_lit * 2 + 1] = dist & 0xff;\n\n  s.pending_buf[s.l_buf + s.last_lit] = lc & 0xff;\n  s.last_lit++;\n\n  if (dist === 0) {\n    /* lc is the unmatched char */\n    s.dyn_ltree[lc * 2]/*.Freq*/++;\n  } else {\n    s.matches++;\n    /* Here, lc is the match length - MIN_MATCH */\n    dist--;             /* dist = match distance - 1 */\n    //Assert((ush)dist < (ush)MAX_DIST(s) &&\n    //       (ush)lc <= (ush)(MAX_MATCH-MIN_MATCH) &&\n    //       (ush)d_code(dist) < (ush)D_CODES,  \"_tr_tally: bad match\");\n\n    s.dyn_ltree[(_length_code[lc] + LITERALS + 1) * 2]/*.Freq*/++;\n    s.dyn_dtree[d_code(dist) * 2]/*.Freq*/++;\n  }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n\n//#ifdef TRUNCATE_BLOCK\n//  /* Try to guess if it is profitable to stop the current block here */\n//  if ((s.last_lit & 0x1fff) === 0 && s.level > 2) {\n//    /* Compute an upper bound for the compressed length */\n//    out_length = s.last_lit*8;\n//    in_length = s.strstart - s.block_start;\n//\n//    for (dcode = 0; dcode < D_CODES; dcode++) {\n//      out_length += s.dyn_dtree[dcode*2]/*.Freq*/ * (5 + extra_dbits[dcode]);\n//    }\n//    out_length >>>= 3;\n//    //Tracev((stderr,\"\\nlast_lit %u, in %ld, out ~%ld(%ld%%) \",\n//    //       s->last_lit, in_length, out_length,\n//    //       100L - out_length*100L/in_length));\n//    if (s.matches < (s.last_lit>>1)/*int /2*/ && out_length < (in_length>>1)/*int /2*/) {\n//      return true;\n//    }\n//  }\n//#endif\n\n  return (s.last_lit === s.lit_bufsize - 1);\n  /* We avoid equality with lit_bufsize because of wraparound at 64K\n   * on 16 bit machines and because stored blocks are restricted to\n   * 64K-1 bytes.\n   */\n}\n\nexports._tr_init  = _tr_init;\nexports._tr_stored_block = _tr_stored_block;\nexports._tr_flush_block  = _tr_flush_block;\nexports._tr_tally = _tr_tally;\nexports._tr_align = _tr_align;\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction ZStream() {\n  /* next input byte */\n  this.input = null; // JS specific, because we have no pointers\n  this.next_in = 0;\n  /* number of bytes available at input */\n  this.avail_in = 0;\n  /* total number of input bytes read so far */\n  this.total_in = 0;\n  /* next output byte should be put there */\n  this.output = null; // JS specific, because we have no pointers\n  this.next_out = 0;\n  /* remaining free space at output */\n  this.avail_out = 0;\n  /* total number of bytes output so far */\n  this.total_out = 0;\n  /* last error message, NULL if no error */\n  this.msg = ''/*Z_NULL*/;\n  /* not visible by applications */\n  this.state = null;\n  /* best guess about the data type: binary or text */\n  this.data_type = 2/*Z_UNKNOWN*/;\n  /* adler32 value of the uncompressed data */\n  this.adler = 0;\n}\n\nmodule.exports = ZStream;\n","export default (function () {\n  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  var initialState = typeof args[args.length - 1] !== 'function' && args.pop();\n  var reducers = args;\n\n  if (typeof initialState === 'undefined') {\n    throw new TypeError('The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.');\n  }\n\n  return function (prevState, value) {\n    for (var _len2 = arguments.length, args = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n      args[_key2 - 2] = arguments[_key2];\n    }\n\n    var prevStateIsUndefined = typeof prevState === 'undefined';\n    var valueIsUndefined = typeof value === 'undefined';\n\n    if (prevStateIsUndefined && valueIsUndefined && initialState) {\n      return initialState;\n    }\n\n    return reducers.reduce(function (newState, reducer) {\n      return reducer.apply(undefined, [newState, value].concat(args));\n    }, prevStateIsUndefined && !valueIsUndefined && initialState ? initialState : prevState);\n  };\n});","import invariant from 'invariant';\nimport isFunction from './utils/isFunction';\nimport isSymbol from './utils/isSymbol';\nimport isEmpty from './utils/isEmpty';\nimport toString from './utils/toString';\nimport isString from './utils/isString';\nimport { ACTION_TYPE_DELIMITER } from './constants';\n\nfunction isValidActionType(type) {\n  return isString(type) || isFunction(type) || isSymbol(type);\n}\n\nfunction isValidActionTypes(types) {\n  if (isEmpty(types)) {\n    return false;\n  }\n\n  return types.every(isValidActionType);\n}\n\nexport default function combineActions() {\n  for (var _len = arguments.length, actionsTypes = new Array(_len), _key = 0; _key < _len; _key++) {\n    actionsTypes[_key] = arguments[_key];\n  }\n\n  invariant(isValidActionTypes(actionsTypes), 'Expected action types to be strings, symbols, or action creators');\n  var combinedActionType = actionsTypes.map(toString).join(ACTION_TYPE_DELIMITER);\n  return {\n    toString: function toString() {\n      return combinedActionType;\n    }\n  };\n}","export var DEFAULT_NAMESPACE = '/';\nexport var ACTION_TYPE_DELIMITER = '||';","import invariant from 'invariant';\nimport isFunction from './utils/isFunction';\nimport identity from './utils/identity';\nimport isNull from './utils/isNull';\nexport default function createAction(type, payloadCreator, metaCreator) {\n  if (payloadCreator === void 0) {\n    payloadCreator = identity;\n  }\n\n  invariant(isFunction(payloadCreator) || isNull(payloadCreator), 'Expected payloadCreator to be a function, undefined or null');\n  var finalPayloadCreator = isNull(payloadCreator) || payloadCreator === identity ? identity : function (head) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    return head instanceof Error ? head : payloadCreator.apply(void 0, [head].concat(args));\n  };\n  var hasMeta = isFunction(metaCreator);\n  var typeString = type.toString();\n\n  var actionCreator = function actionCreator() {\n    var payload = finalPayloadCreator.apply(void 0, arguments);\n    var action = {\n      type: type\n    };\n\n    if (payload instanceof Error) {\n      action.error = true;\n    }\n\n    if (payload !== undefined) {\n      action.payload = payload;\n    }\n\n    if (hasMeta) {\n      action.meta = metaCreator.apply(void 0, arguments);\n    }\n\n    return action;\n  };\n\n  actionCreator.toString = function () {\n    return typeString;\n  };\n\n  return actionCreator;\n}","function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport invariant from 'invariant';\nimport isPlainObject from './utils/isPlainObject';\nimport isFunction from './utils/isFunction';\nimport identity from './utils/identity';\nimport isArray from './utils/isArray';\nimport isString from './utils/isString';\nimport isNil from './utils/isNil';\nimport getLastElement from './utils/getLastElement';\nimport camelCase from './utils/camelCase';\nimport arrayToObject from './utils/arrayToObject';\nimport flattenActionMap from './utils/flattenActionMap';\nimport unflattenActionCreators from './utils/unflattenActionCreators';\nimport createAction from './createAction';\nimport { DEFAULT_NAMESPACE } from './constants';\nexport default function createActions(actionMap) {\n  for (var _len = arguments.length, identityActions = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    identityActions[_key - 1] = arguments[_key];\n  }\n\n  var options = isPlainObject(getLastElement(identityActions)) ? identityActions.pop() : {};\n  invariant(identityActions.every(isString) && (isString(actionMap) || isPlainObject(actionMap)), 'Expected optional object followed by string action types');\n\n  if (isString(actionMap)) {\n    return actionCreatorsFromIdentityActions([actionMap].concat(identityActions), options);\n  }\n\n  return _objectSpread({}, actionCreatorsFromActionMap(actionMap, options), actionCreatorsFromIdentityActions(identityActions, options));\n}\n\nfunction actionCreatorsFromActionMap(actionMap, options) {\n  var flatActionMap = flattenActionMap(actionMap, options);\n  var flatActionCreators = actionMapToActionCreators(flatActionMap);\n  return unflattenActionCreators(flatActionCreators, options);\n}\n\nfunction actionMapToActionCreators(actionMap, _temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      prefix = _ref.prefix,\n      _ref$namespace = _ref.namespace,\n      namespace = _ref$namespace === void 0 ? DEFAULT_NAMESPACE : _ref$namespace;\n\n  function isValidActionMapValue(actionMapValue) {\n    if (isFunction(actionMapValue) || isNil(actionMapValue)) {\n      return true;\n    }\n\n    if (isArray(actionMapValue)) {\n      var _actionMapValue$ = actionMapValue[0],\n          payload = _actionMapValue$ === void 0 ? identity : _actionMapValue$,\n          meta = actionMapValue[1];\n      return isFunction(payload) && isFunction(meta);\n    }\n\n    return false;\n  }\n\n  return arrayToObject(Object.keys(actionMap), function (partialActionCreators, type) {\n    var _objectSpread2;\n\n    var actionMapValue = actionMap[type];\n    invariant(isValidActionMapValue(actionMapValue), 'Expected function, undefined, null, or array with payload and meta ' + (\"functions for \" + type));\n    var prefixedType = prefix ? \"\" + prefix + namespace + type : type;\n    var actionCreator = isArray(actionMapValue) ? createAction.apply(void 0, [prefixedType].concat(actionMapValue)) : createAction(prefixedType, actionMapValue);\n    return _objectSpread({}, partialActionCreators, (_objectSpread2 = {}, _objectSpread2[type] = actionCreator, _objectSpread2));\n  });\n}\n\nfunction actionCreatorsFromIdentityActions(identityActions, options) {\n  var actionMap = arrayToObject(identityActions, function (partialActionMap, type) {\n    var _objectSpread3;\n\n    return _objectSpread({}, partialActionMap, (_objectSpread3 = {}, _objectSpread3[type] = identity, _objectSpread3));\n  });\n  var actionCreators = actionMapToActionCreators(actionMap, options);\n  return arrayToObject(Object.keys(actionCreators), function (partialActionCreators, type) {\n    var _objectSpread4;\n\n    return _objectSpread({}, partialActionCreators, (_objectSpread4 = {}, _objectSpread4[camelCase(type)] = actionCreators[type], _objectSpread4));\n  });\n}","import curry from 'just-curry-it';\nimport createAction from './createAction';\nexport default (function (type, payloadCreator) {\n  return curry(createAction(type, payloadCreator), payloadCreator.length);\n});","import invariant from 'invariant';\nimport isFunction from './utils/isFunction';\nimport isPlainObject from './utils/isPlainObject';\nimport identity from './utils/identity';\nimport isNil from './utils/isNil';\nimport isUndefined from './utils/isUndefined';\nimport toString from './utils/toString';\nimport { ACTION_TYPE_DELIMITER } from './constants';\nexport default function handleAction(type, reducer, defaultState) {\n  if (reducer === void 0) {\n    reducer = identity;\n  }\n\n  var types = toString(type).split(ACTION_TYPE_DELIMITER);\n  invariant(!isUndefined(defaultState), \"defaultState for reducer handling \" + types.join(', ') + \" should be defined\");\n  invariant(isFunction(reducer) || isPlainObject(reducer), 'Expected reducer to be a function or object with next and throw reducers');\n\n  var _ref = isFunction(reducer) ? [reducer, reducer] : [reducer.next, reducer.throw].map(function (aReducer) {\n    return isNil(aReducer) ? identity : aReducer;\n  }),\n      nextReducer = _ref[0],\n      throwReducer = _ref[1];\n\n  return function (state, action) {\n    if (state === void 0) {\n      state = defaultState;\n    }\n\n    var actionType = action.type;\n\n    if (!actionType || types.indexOf(toString(actionType)) === -1) {\n      return state;\n    }\n\n    return (action.error === true ? throwReducer : nextReducer)(state, action);\n  };\n}","import reduceReducers from 'reduce-reducers';\nimport invariant from 'invariant';\nimport isPlainObject from './utils/isPlainObject';\nimport isMap from './utils/isMap';\nimport ownKeys from './utils/ownKeys';\nimport flattenReducerMap from './utils/flattenReducerMap';\nimport handleAction from './handleAction';\nimport get from './utils/get';\nexport default function handleActions(handlers, defaultState, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  invariant(isPlainObject(handlers) || isMap(handlers), 'Expected handlers to be a plain object.');\n  var flattenedReducerMap = flattenReducerMap(handlers, options);\n  var reducers = ownKeys(flattenedReducerMap).map(function (type) {\n    return handleAction(type, get(type, flattenedReducerMap), defaultState);\n  });\n  var reducer = reduceReducers.apply(void 0, reducers.concat([defaultState]));\n  return function (state, action) {\n    if (state === void 0) {\n      state = defaultState;\n    }\n\n    return reducer(state, action);\n  };\n}","import combineActions from './combineActions';\nimport createAction from './createAction';\nimport createActions from './createActions';\nimport createCurriedAction from './createCurriedAction';\nimport handleAction from './handleAction';\nimport handleActions from './handleActions';\nexport { combineActions, createAction, createActions, createCurriedAction, handleAction, handleActions };","export default (function (array, callback) {\n  return array.reduce(function (partialObject, element) {\n    return callback(partialObject, element);\n  }, {});\n});","import camelCase from 'to-camel-case';\nvar namespacer = '/';\nexport default (function (type) {\n  return type.indexOf(namespacer) === -1 ? camelCase(type) : type.split(namespacer).map(camelCase).join(namespacer);\n});","import isPlainObject from './isPlainObject';\nimport flattenWhenNode from './flattenWhenNode';\nexport default flattenWhenNode(isPlainObject);","import isPlainObject from './isPlainObject';\nimport isMap from './isMap';\nimport hasGeneratorInterface from './hasGeneratorInterface';\nimport flattenWhenNode from './flattenWhenNode';\nexport default flattenWhenNode(function (node) {\n  return (isPlainObject(node) || isMap(node)) && !hasGeneratorInterface(node);\n});","import { DEFAULT_NAMESPACE, ACTION_TYPE_DELIMITER } from '../constants';\nimport ownKeys from './ownKeys';\nimport get from './get';\nexport default (function (predicate) {\n  return function flatten(map, _temp, partialFlatMap, partialFlatActionType) {\n    var _ref = _temp === void 0 ? {} : _temp,\n        _ref$namespace = _ref.namespace,\n        namespace = _ref$namespace === void 0 ? DEFAULT_NAMESPACE : _ref$namespace,\n        prefix = _ref.prefix;\n\n    if (partialFlatMap === void 0) {\n      partialFlatMap = {};\n    }\n\n    if (partialFlatActionType === void 0) {\n      partialFlatActionType = '';\n    }\n\n    function connectNamespace(type) {\n      var _ref2;\n\n      if (!partialFlatActionType) return type;\n      var types = type.toString().split(ACTION_TYPE_DELIMITER);\n      var partials = partialFlatActionType.split(ACTION_TYPE_DELIMITER);\n      return (_ref2 = []).concat.apply(_ref2, partials.map(function (p) {\n        return types.map(function (t) {\n          return \"\" + p + namespace + t;\n        });\n      })).join(ACTION_TYPE_DELIMITER);\n    }\n\n    function connectPrefix(type) {\n      if (partialFlatActionType || !prefix || prefix && new RegExp(\"^\" + prefix + namespace).test(type)) {\n        return type;\n      }\n\n      return \"\" + prefix + namespace + type;\n    }\n\n    ownKeys(map).forEach(function (type) {\n      var nextNamespace = connectPrefix(connectNamespace(type));\n      var mapValue = get(type, map);\n\n      if (predicate(mapValue)) {\n        flatten(mapValue, {\n          namespace: namespace,\n          prefix: prefix\n        }, partialFlatMap, nextNamespace);\n      } else {\n        partialFlatMap[nextNamespace] = mapValue;\n      }\n    });\n    return partialFlatMap;\n  };\n});","import isMap from './isMap';\nexport default function get(key, x) {\n  return isMap(x) ? x.get(key) : x[key];\n}","export default (function (array) {\n  return array[array.length - 1];\n});","import ownKeys from './ownKeys';\nexport default function hasGeneratorInterface(handler) {\n  var keys = ownKeys(handler);\n  var hasOnlyInterfaceNames = keys.every(function (ownKey) {\n    return ownKey === 'next' || ownKey === 'throw';\n  });\n  return keys.length && keys.length <= 2 && hasOnlyInterfaceNames;\n}","export default (function (value) {\n  return value;\n});","export default (function (value) {\n  return Array.isArray(value);\n});","export default (function (value) {\n  return value.length === 0;\n});","export default (function (value) {\n  return typeof value === 'function';\n});","export default (function (value) {\n  return typeof Map !== 'undefined' && value instanceof Map;\n});","export default (function (value) {\n  return value === null || value === undefined;\n});","export default (function (value) {\n  return value === null;\n});","export default (function (value) {\n  if (typeof value !== 'object' || value === null) return false;\n  var proto = value;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(value) === proto;\n});","export default (function (value) {\n  return typeof value === 'string';\n});","export default (function (value) {\n  return typeof value === 'symbol' || typeof value === 'object' && Object.prototype.toString.call(value) === '[object Symbol]';\n});","export default (function (value) {\n  return value === undefined;\n});","import isMap from './isMap';\nexport default function ownKeys(object) {\n  if (isMap(object)) {\n    // We are using loose transforms in babel. Here we are trying to convert an\n    // interable to an array. Loose mode expects everything to already be an\n    // array. The problem is that our eslint rules encourage us to prefer\n    // spread over Array.from.\n    //\n    // Instead of disabling loose mode we simply disable the warning.\n    // eslint-disable-next-line unicorn/prefer-spread\n    return Array.from(object.keys());\n  }\n\n  if (typeof Reflect !== 'undefined' && typeof Reflect.ownKeys === 'function') {\n    return Reflect.ownKeys(object);\n  }\n\n  var keys = Object.getOwnPropertyNames(object);\n\n  if (typeof Object.getOwnPropertySymbols === 'function') {\n    keys = keys.concat(Object.getOwnPropertySymbols(object));\n  }\n\n  return keys;\n}","export default (function (value) {\n  return value.toString();\n});","import { DEFAULT_NAMESPACE } from '../constants';\nimport isEmpty from './isEmpty';\nimport camelCase from './camelCase';\nexport default function unflattenActionCreators(flatActionCreators, _temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      _ref$namespace = _ref.namespace,\n      namespace = _ref$namespace === void 0 ? DEFAULT_NAMESPACE : _ref$namespace,\n      prefix = _ref.prefix;\n\n  function unflatten(flatActionType, partialNestedActionCreators, partialFlatActionTypePath) {\n    var nextNamespace = camelCase(partialFlatActionTypePath.shift());\n\n    if (isEmpty(partialFlatActionTypePath)) {\n      partialNestedActionCreators[nextNamespace] = flatActionCreators[flatActionType];\n    } else {\n      if (!partialNestedActionCreators[nextNamespace]) {\n        partialNestedActionCreators[nextNamespace] = {};\n      }\n\n      unflatten(flatActionType, partialNestedActionCreators[nextNamespace], partialFlatActionTypePath);\n    }\n  }\n\n  var nestedActionCreators = {};\n  Object.getOwnPropertyNames(flatActionCreators).forEach(function (type) {\n    var unprefixedType = prefix ? type.replace(\"\" + prefix + namespace, '') : type;\n    return unflatten(type, nestedActionCreators, unprefixedType.split(namespace));\n  });\n  return nestedActionCreators;\n}","\"use strict\";\n\nvar compose = require('redux').compose;\n\nexports.__esModule = true;\nexports.composeWithDevTools = (\n  typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ?\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ :\n    function() {\n      if (arguments.length === 0) return undefined;\n      if (typeof arguments[0] === 'object') return compose;\n      return compose.apply(null, arguments);\n    }\n);\n\nexports.devToolsEnhancer = (\n  typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION__ ?\n    window.__REDUX_DEVTOOLS_EXTENSION__ :\n    function() { return function(noop) { return noop; } }\n);\n","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?t(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],t):t(e.reduxLogger=e.reduxLogger||{})}(this,function(e){\"use strict\";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,\"kind\",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,\"path\",{value:t,enumerable:!0})}function n(e,t,r){n.super_.call(this,\"E\",e),Object.defineProperty(this,\"lhs\",{value:t,enumerable:!0}),Object.defineProperty(this,\"rhs\",{value:r,enumerable:!0})}function o(e,t){o.super_.call(this,\"N\",e),Object.defineProperty(this,\"rhs\",{value:t,enumerable:!0})}function i(e,t){i.super_.call(this,\"D\",e),Object.defineProperty(this,\"lhs\",{value:t,enumerable:!0})}function a(e,t,r){a.super_.call(this,\"A\",e),Object.defineProperty(this,\"index\",{value:t,enumerable:!0}),Object.defineProperty(this,\"item\",{value:r,enumerable:!0})}function f(e,t,r){var n=e.slice((r||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,n),e}function u(e){var t=\"undefined\"==typeof e?\"undefined\":N(e);return\"object\"!==t?t:e===Math?\"math\":null===e?\"null\":Array.isArray(e)?\"array\":\"[object Date]\"===Object.prototype.toString.call(e)?\"date\":\"function\"==typeof e.toString&&/^\\/.*\\//.test(e.toString())?\"regexp\":\"object\"}function l(e,t,r,c,s,d,p){s=s||[],p=p||[];var g=s.slice(0);if(\"undefined\"!=typeof d){if(c){if(\"function\"==typeof c&&c(g,d))return;if(\"object\"===(\"undefined\"==typeof c?\"undefined\":N(c))){if(c.prefilter&&c.prefilter(g,d))return;if(c.normalize){var h=c.normalize(g,d,e,t);h&&(e=h[0],t=h[1])}}}g.push(d)}\"regexp\"===u(e)&&\"regexp\"===u(t)&&(e=e.toString(),t=t.toString());var y=\"undefined\"==typeof e?\"undefined\":N(e),v=\"undefined\"==typeof t?\"undefined\":N(t),b=\"undefined\"!==y||p&&p[p.length-1].lhs&&p[p.length-1].lhs.hasOwnProperty(d),m=\"undefined\"!==v||p&&p[p.length-1].rhs&&p[p.length-1].rhs.hasOwnProperty(d);if(!b&&m)r(new o(g,t));else if(!m&&b)r(new i(g,e));else if(u(e)!==u(t))r(new n(g,e,t));else if(\"date\"===u(e)&&e-t!==0)r(new n(g,e,t));else if(\"object\"===y&&null!==e&&null!==t)if(p.filter(function(t){return t.lhs===e}).length)e!==t&&r(new n(g,e,t));else{if(p.push({lhs:e,rhs:t}),Array.isArray(e)){var w;e.length;for(w=0;w<e.length;w++)w>=t.length?r(new a(g,w,new i(void 0,e[w]))):l(e[w],t[w],r,c,g,w,p);for(;w<t.length;)r(new a(g,w,new o(void 0,t[w++])))}else{var x=Object.keys(e),S=Object.keys(t);x.forEach(function(n,o){var i=S.indexOf(n);i>=0?(l(e[n],t[n],r,c,g,n,p),S=f(S,i)):l(e[n],void 0,r,c,g,n,p)}),S.forEach(function(e){l(void 0,t[e],r,c,g,e,p)})}p.length=p.length-1}else e!==t&&(\"number\"===y&&isNaN(e)&&isNaN(t)||r(new n(g,e,t)))}function c(e,t,r,n){return n=n||[],l(e,t,function(e){e&&n.push(e)},r),n.length?n:void 0}function s(e,t,r){if(r.path&&r.path.length){var n,o=e[t],i=r.path.length-1;for(n=0;n<i;n++)o=o[r.path[n]];switch(r.kind){case\"A\":s(o[r.path[n]],r.index,r.item);break;case\"D\":delete o[r.path[n]];break;case\"E\":case\"N\":o[r.path[n]]=r.rhs}}else switch(r.kind){case\"A\":s(e[t],r.index,r.item);break;case\"D\":e=f(e,t);break;case\"E\":case\"N\":e[t]=r.rhs}return e}function d(e,t,r){if(e&&t&&r&&r.kind){for(var n=e,o=-1,i=r.path?r.path.length-1:0;++o<i;)\"undefined\"==typeof n[r.path[o]]&&(n[r.path[o]]=\"number\"==typeof r.path[o]?[]:{}),n=n[r.path[o]];switch(r.kind){case\"A\":s(r.path?n[r.path[o]]:n,r.index,r.item);break;case\"D\":delete n[r.path[o]];break;case\"E\":case\"N\":n[r.path[o]]=r.rhs}}}function p(e,t,r){if(r.path&&r.path.length){var n,o=e[t],i=r.path.length-1;for(n=0;n<i;n++)o=o[r.path[n]];switch(r.kind){case\"A\":p(o[r.path[n]],r.index,r.item);break;case\"D\":o[r.path[n]]=r.lhs;break;case\"E\":o[r.path[n]]=r.lhs;break;case\"N\":delete o[r.path[n]]}}else switch(r.kind){case\"A\":p(e[t],r.index,r.item);break;case\"D\":e[t]=r.lhs;break;case\"E\":e[t]=r.lhs;break;case\"N\":e=f(e,t)}return e}function g(e,t,r){if(e&&t&&r&&r.kind){var n,o,i=e;for(o=r.path.length-1,n=0;n<o;n++)\"undefined\"==typeof i[r.path[n]]&&(i[r.path[n]]={}),i=i[r.path[n]];switch(r.kind){case\"A\":p(i[r.path[n]],r.index,r.item);break;case\"D\":i[r.path[n]]=r.lhs;break;case\"E\":i[r.path[n]]=r.lhs;break;case\"N\":delete i[r.path[n]]}}}function h(e,t,r){if(e&&t){var n=function(n){r&&!r(e,t,n)||d(e,t,n)};l(e,t,n)}}function y(e){return\"color: \"+F[e].color+\"; font-weight: bold\"}function v(e){var t=e.kind,r=e.path,n=e.lhs,o=e.rhs,i=e.index,a=e.item;switch(t){case\"E\":return[r.join(\".\"),n,\"→\",o];case\"N\":return[r.join(\".\"),o];case\"D\":return[r.join(\".\")];case\"A\":return[r.join(\".\")+\"[\"+i+\"]\",a];default:return[]}}function b(e,t,r,n){var o=c(e,t);try{n?r.groupCollapsed(\"diff\"):r.group(\"diff\")}catch(e){r.log(\"diff\")}o?o.forEach(function(e){var t=e.kind,n=v(e);r.log.apply(r,[\"%c \"+F[t].text,y(t)].concat(P(n)))}):r.log(\"—— no diff ——\");try{r.groupEnd()}catch(e){r.log(\"—— diff end —— \")}}function m(e,t,r,n){switch(\"undefined\"==typeof e?\"undefined\":N(e)){case\"object\":return\"function\"==typeof e[n]?e[n].apply(e,P(r)):e[n];case\"function\":return e(t);default:return e}}function w(e){var t=e.timestamp,r=e.duration;return function(e,n,o){var i=[\"action\"];return i.push(\"%c\"+String(e.type)),t&&i.push(\"%c@ \"+n),r&&i.push(\"%c(in \"+o.toFixed(2)+\" ms)\"),i.join(\" \")}}function x(e,t){var r=t.logger,n=t.actionTransformer,o=t.titleFormatter,i=void 0===o?w(t):o,a=t.collapsed,f=t.colors,u=t.level,l=t.diff,c=\"undefined\"==typeof t.titleFormatter;e.forEach(function(o,s){var d=o.started,p=o.startedTime,g=o.action,h=o.prevState,y=o.error,v=o.took,w=o.nextState,x=e[s+1];x&&(w=x.prevState,v=x.started-d);var S=n(g),k=\"function\"==typeof a?a(function(){return w},g,o):a,j=D(p),E=f.title?\"color: \"+f.title(S)+\";\":\"\",A=[\"color: gray; font-weight: lighter;\"];A.push(E),t.timestamp&&A.push(\"color: gray; font-weight: lighter;\"),t.duration&&A.push(\"color: gray; font-weight: lighter;\");var O=i(S,j,v);try{k?f.title&&c?r.groupCollapsed.apply(r,[\"%c \"+O].concat(A)):r.groupCollapsed(O):f.title&&c?r.group.apply(r,[\"%c \"+O].concat(A)):r.group(O)}catch(e){r.log(O)}var N=m(u,S,[h],\"prevState\"),P=m(u,S,[S],\"action\"),C=m(u,S,[y,h],\"error\"),F=m(u,S,[w],\"nextState\");if(N)if(f.prevState){var L=\"color: \"+f.prevState(h)+\"; font-weight: bold\";r[N](\"%c prev state\",L,h)}else r[N](\"prev state\",h);if(P)if(f.action){var T=\"color: \"+f.action(S)+\"; font-weight: bold\";r[P](\"%c action    \",T,S)}else r[P](\"action    \",S);if(y&&C)if(f.error){var M=\"color: \"+f.error(y,h)+\"; font-weight: bold;\";r[C](\"%c error     \",M,y)}else r[C](\"error     \",y);if(F)if(f.nextState){var _=\"color: \"+f.nextState(w)+\"; font-weight: bold\";r[F](\"%c next state\",_,w)}else r[F](\"next state\",w);l&&b(h,w,r,k);try{r.groupEnd()}catch(e){r.log(\"—— log end ——\")}})}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},L,e),r=t.logger,n=t.stateTransformer,o=t.errorTransformer,i=t.predicate,a=t.logErrors,f=t.diffPredicate;if(\"undefined\"==typeof r)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error(\"[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\\n// Logger with default options\\nimport { logger } from 'redux-logger'\\nconst store = createStore(\\n  reducer,\\n  applyMiddleware(logger)\\n)\\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\\nimport createLogger from 'redux-logger'\\nconst logger = createLogger({\\n  // ...options\\n});\\nconst store = createStore(\\n  reducer,\\n  applyMiddleware(logger)\\n)\\n\"),function(){return function(e){return function(t){return e(t)}}};var u=[];return function(e){var r=e.getState;return function(e){return function(l){if(\"function\"==typeof i&&!i(r,l))return e(l);var c={};u.push(c),c.started=O.now(),c.startedTime=new Date,c.prevState=n(r()),c.action=l;var s=void 0;if(a)try{s=e(l)}catch(e){c.error=o(e)}else s=e(l);c.took=O.now()-c.started,c.nextState=n(r());var d=t.diff&&\"function\"==typeof f?f(r,l):t.diff;if(x(u,Object.assign({},t,{diff:d})),u.length=0,c.error)throw c.error;return s}}}}var k,j,E=function(e,t){return new Array(t+1).join(e)},A=function(e,t){return E(\"0\",t-e.toString().length)+e},D=function(e){return A(e.getHours(),2)+\":\"+A(e.getMinutes(),2)+\":\"+A(e.getSeconds(),2)+\".\"+A(e.getMilliseconds(),3)},O=\"undefined\"!=typeof performance&&null!==performance&&\"function\"==typeof performance.now?performance:Date,N=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},P=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},C=[];k=\"object\"===(\"undefined\"==typeof global?\"undefined\":N(global))&&global?global:\"undefined\"!=typeof window?window:{},j=k.DeepDiff,j&&C.push(function(){\"undefined\"!=typeof j&&k.DeepDiff===c&&(k.DeepDiff=j,j=void 0)}),t(n,r),t(o,r),t(i,r),t(a,r),Object.defineProperties(c,{diff:{value:c,enumerable:!0},observableDiff:{value:l,enumerable:!0},applyDiff:{value:h,enumerable:!0},applyChange:{value:d,enumerable:!0},revertChange:{value:g,enumerable:!0},isConflict:{value:function(){return\"undefined\"!=typeof j},enumerable:!0},noConflict:{value:function(){return C&&(C.forEach(function(e){e()}),C=null),c},enumerable:!0}});var F={E:{color:\"#2196F3\",text:\"CHANGED:\"},N:{color:\"#4CAF50\",text:\"ADDED:\"},D:{color:\"#F44336\",text:\"DELETED:\"},A:{color:\"#2196F3\",text:\"ARRAY:\"}},L={level:\"log\",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return\"inherit\"},prevState:function(){return\"#9E9E9E\"},action:function(){return\"#03A9F4\"},nextState:function(){return\"#4CAF50\"},error:function(){return\"#F20404\"}},diff:!1,diffPredicate:void 0,transformer:void 0},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,r=e.getState;return\"function\"==typeof t||\"function\"==typeof r?S()({dispatch:t,getState:r}):void console.error(\"\\n[redux-logger v3] BREAKING CHANGE\\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\\n[redux-logger v3] Change\\n[redux-logger v3] import createLogger from 'redux-logger'\\n[redux-logger v3] to\\n[redux-logger v3] import { createLogger } from 'redux-logger'\\n\")};e.defaults=L,e.createLogger=S,e.logger=T,e.default=T,Object.defineProperty(e,\"__esModule\",{value:!0})});\n","import createSagaMiddleware__default from '@redux-saga/core';\nexport * from '@redux-saga/core';\n\n\n\nexport default createSagaMiddleware__default;\n","export * from '@redux-saga/core/effects';\n","import $$observable from 'symbol-observable';\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error('It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error('You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected the listener to be a function.');\n    }\n\n    if (isDispatching) {\n      throw new Error('You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error('You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionDescription = actionType && \"action \\\"\" + String(actionType) + \"\\\"\" || 'an action';\n  return \"Given \" + actionDescription + \", reducer \\\"\" + key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\";\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle \" + ActionTypes.INIT + \" or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(_key, action);\n        throw new Error(errorMessage);\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(\"bindActionCreators expected an object or a function, instead received \" + (actionCreators === null ? 'null' : typeof actionCreators) + \". \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    keys.push.apply(keys, Object.getOwnPropertySymbols(object));\n  }\n\n  if (enumerableOnly) keys = keys.filter(function (sym) {\n    return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n  });\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error('Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread2({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore };\n","var grammar = module.exports = {\n  v: [{\n    name: 'version',\n    reg: /^(\\d*)$/\n  }],\n  o: [{\n    // o=- 20518 0 IN IP4 203.0.113.1\n    // NB: sessionId will be a String in most cases because it is huge\n    name: 'origin',\n    reg: /^(\\S*) (\\d*) (\\d*) (\\S*) IP(\\d) (\\S*)/,\n    names: ['username', 'sessionId', 'sessionVersion', 'netType', 'ipVer', 'address'],\n    format: '%s %s %d %s IP%d %s'\n  }],\n  // default parsing of these only (though some of these feel outdated)\n  s: [{ name: 'name' }],\n  i: [{ name: 'description' }],\n  u: [{ name: 'uri' }],\n  e: [{ name: 'email' }],\n  p: [{ name: 'phone' }],\n  z: [{ name: 'timezones' }], // TODO: this one can actually be parsed properly...\n  r: [{ name: 'repeats' }],   // TODO: this one can also be parsed properly\n  // k: [{}], // outdated thing ignored\n  t: [{\n    // t=0 0\n    name: 'timing',\n    reg: /^(\\d*) (\\d*)/,\n    names: ['start', 'stop'],\n    format: '%d %d'\n  }],\n  c: [{\n    // c=IN IP4 10.47.197.26\n    name: 'connection',\n    reg: /^IN IP(\\d) (\\S*)/,\n    names: ['version', 'ip'],\n    format: 'IN IP%d %s'\n  }],\n  b: [{\n    // b=AS:4000\n    push: 'bandwidth',\n    reg: /^(TIAS|AS|CT|RR|RS):(\\d*)/,\n    names: ['type', 'limit'],\n    format: '%s:%s'\n  }],\n  m: [{\n    // m=video 51744 RTP/AVP 126 97 98 34 31\n    // NB: special - pushes to session\n    // TODO: rtp/fmtp should be filtered by the payloads found here?\n    reg: /^(\\w*) (\\d*) ([\\w/]*)(?: (.*))?/,\n    names: ['type', 'port', 'protocol', 'payloads'],\n    format: '%s %d %s %s'\n  }],\n  a: [\n    {\n      // a=rtpmap:110 opus/48000/2\n      push: 'rtp',\n      reg: /^rtpmap:(\\d*) ([\\w\\-.]*)(?:\\s*\\/(\\d*)(?:\\s*\\/(\\S*))?)?/,\n      names: ['payload', 'codec', 'rate', 'encoding'],\n      format: function (o) {\n        return (o.encoding)\n          ? 'rtpmap:%d %s/%s/%s'\n          : o.rate\n            ? 'rtpmap:%d %s/%s'\n            : 'rtpmap:%d %s';\n      }\n    },\n    {\n      // a=fmtp:108 profile-level-id=24;object=23;bitrate=64000\n      // a=fmtp:111 minptime=10; useinbandfec=1\n      push: 'fmtp',\n      reg: /^fmtp:(\\d*) ([\\S| ]*)/,\n      names: ['payload', 'config'],\n      format: 'fmtp:%d %s'\n    },\n    {\n      // a=control:streamid=0\n      name: 'control',\n      reg: /^control:(.*)/,\n      format: 'control:%s'\n    },\n    {\n      // a=rtcp:65179 IN IP4 193.84.77.194\n      name: 'rtcp',\n      reg: /^rtcp:(\\d*)(?: (\\S*) IP(\\d) (\\S*))?/,\n      names: ['port', 'netType', 'ipVer', 'address'],\n      format: function (o) {\n        return (o.address != null)\n          ? 'rtcp:%d %s IP%d %s'\n          : 'rtcp:%d';\n      }\n    },\n    {\n      // a=rtcp-fb:98 trr-int 100\n      push: 'rtcpFbTrrInt',\n      reg: /^rtcp-fb:(\\*|\\d*) trr-int (\\d*)/,\n      names: ['payload', 'value'],\n      format: 'rtcp-fb:%d trr-int %d'\n    },\n    {\n      // a=rtcp-fb:98 nack rpsi\n      push: 'rtcpFb',\n      reg: /^rtcp-fb:(\\*|\\d*) ([\\w-_]*)(?: ([\\w-_]*))?/,\n      names: ['payload', 'type', 'subtype'],\n      format: function (o) {\n        return (o.subtype != null)\n          ? 'rtcp-fb:%s %s %s'\n          : 'rtcp-fb:%s %s';\n      }\n    },\n    {\n      // a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n      // a=extmap:1/recvonly URI-gps-string\n      // a=extmap:3 urn:ietf:params:rtp-hdrext:encrypt urn:ietf:params:rtp-hdrext:smpte-tc 25@600/24\n      push: 'ext',\n      reg: /^extmap:(\\d+)(?:\\/(\\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\\S*)(?: (\\S*))?/,\n      names: ['value', 'direction', 'encrypt-uri', 'uri', 'config'],\n      format: function (o) {\n        return (\n          'extmap:%d' +\n          (o.direction ? '/%s' : '%v') +\n          (o['encrypt-uri'] ? ' %s' : '%v') +\n          ' %s' +\n          (o.config ? ' %s' : '')\n        );\n      }\n    },\n    {\n      // a=extmap-allow-mixed\n      name: 'extmapAllowMixed',\n      reg: /^(extmap-allow-mixed)/\n    },\n    {\n      // a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:PS1uQCVeeCFCanVmcjkpPywjNWhcYD0mXXtxaVBR|2^20|1:32\n      push: 'crypto',\n      reg: /^crypto:(\\d*) ([\\w_]*) (\\S*)(?: (\\S*))?/,\n      names: ['id', 'suite', 'config', 'sessionConfig'],\n      format: function (o) {\n        return (o.sessionConfig != null)\n          ? 'crypto:%d %s %s %s'\n          : 'crypto:%d %s %s';\n      }\n    },\n    {\n      // a=setup:actpass\n      name: 'setup',\n      reg: /^setup:(\\w*)/,\n      format: 'setup:%s'\n    },\n    {\n      // a=connection:new\n      name: 'connectionType',\n      reg: /^connection:(new|existing)/,\n      format: 'connection:%s'\n    },\n    {\n      // a=mid:1\n      name: 'mid',\n      reg: /^mid:([^\\s]*)/,\n      format: 'mid:%s'\n    },\n    {\n      // a=msid:0c8b064d-d807-43b4-b434-f92a889d8587 98178685-d409-46e0-8e16-7ef0db0db64a\n      name: 'msid',\n      reg: /^msid:(.*)/,\n      format: 'msid:%s'\n    },\n    {\n      // a=ptime:20\n      name: 'ptime',\n      reg: /^ptime:(\\d*(?:\\.\\d*)*)/,\n      format: 'ptime:%d'\n    },\n    {\n      // a=maxptime:60\n      name: 'maxptime',\n      reg: /^maxptime:(\\d*(?:\\.\\d*)*)/,\n      format: 'maxptime:%d'\n    },\n    {\n      // a=sendrecv\n      name: 'direction',\n      reg: /^(sendrecv|recvonly|sendonly|inactive)/\n    },\n    {\n      // a=ice-lite\n      name: 'icelite',\n      reg: /^(ice-lite)/\n    },\n    {\n      // a=ice-ufrag:F7gI\n      name: 'iceUfrag',\n      reg: /^ice-ufrag:(\\S*)/,\n      format: 'ice-ufrag:%s'\n    },\n    {\n      // a=ice-pwd:x9cml/YzichV2+XlhiMu8g\n      name: 'icePwd',\n      reg: /^ice-pwd:(\\S*)/,\n      format: 'ice-pwd:%s'\n    },\n    {\n      // a=fingerprint:SHA-1 00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33\n      name: 'fingerprint',\n      reg: /^fingerprint:(\\S*) (\\S*)/,\n      names: ['type', 'hash'],\n      format: 'fingerprint:%s %s'\n    },\n    {\n      // a=candidate:0 1 UDP 2113667327 203.0.113.1 54400 typ host\n      // a=candidate:1162875081 1 udp 2113937151 192.168.34.75 60017 typ host generation 0 network-id 3 network-cost 10\n      // a=candidate:3289912957 2 udp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 generation 0 network-id 3 network-cost 10\n      // a=candidate:229815620 1 tcp 1518280447 192.168.150.19 60017 typ host tcptype active generation 0 network-id 3 network-cost 10\n      // a=candidate:3289912957 2 tcp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 tcptype passive generation 0 network-id 3 network-cost 10\n      push:'candidates',\n      reg: /^candidate:(\\S*) (\\d*) (\\S*) (\\d*) (\\S*) (\\d*) typ (\\S*)(?: raddr (\\S*) rport (\\d*))?(?: tcptype (\\S*))?(?: generation (\\d*))?(?: network-id (\\d*))?(?: network-cost (\\d*))?/,\n      names: ['foundation', 'component', 'transport', 'priority', 'ip', 'port', 'type', 'raddr', 'rport', 'tcptype', 'generation', 'network-id', 'network-cost'],\n      format: function (o) {\n        var str = 'candidate:%s %d %s %d %s %d typ %s';\n\n        str += (o.raddr != null) ? ' raddr %s rport %d' : '%v%v';\n\n        // NB: candidate has three optional chunks, so %void middles one if it's missing\n        str += (o.tcptype != null) ? ' tcptype %s' : '%v';\n\n        if (o.generation != null) {\n          str += ' generation %d';\n        }\n\n        str += (o['network-id'] != null) ? ' network-id %d' : '%v';\n        str += (o['network-cost'] != null) ? ' network-cost %d' : '%v';\n        return str;\n      }\n    },\n    {\n      // a=end-of-candidates (keep after the candidates line for readability)\n      name: 'endOfCandidates',\n      reg: /^(end-of-candidates)/\n    },\n    {\n      // a=remote-candidates:1 203.0.113.1 54400 2 203.0.113.1 54401 ...\n      name: 'remoteCandidates',\n      reg: /^remote-candidates:(.*)/,\n      format: 'remote-candidates:%s'\n    },\n    {\n      // a=ice-options:google-ice\n      name: 'iceOptions',\n      reg: /^ice-options:(\\S*)/,\n      format: 'ice-options:%s'\n    },\n    {\n      // a=ssrc:2566107569 cname:t9YU8M1UxTF8Y1A1\n      push: 'ssrcs',\n      reg: /^ssrc:(\\d*) ([\\w_-]*)(?::(.*))?/,\n      names: ['id', 'attribute', 'value'],\n      format: function (o) {\n        var str = 'ssrc:%d';\n        if (o.attribute != null) {\n          str += ' %s';\n          if (o.value != null) {\n            str += ':%s';\n          }\n        }\n        return str;\n      }\n    },\n    {\n      // a=ssrc-group:FEC 1 2\n      // a=ssrc-group:FEC-FR 3004364195 1080772241\n      push: 'ssrcGroups',\n      // token-char = %x21 / %x23-27 / %x2A-2B / %x2D-2E / %x30-39 / %x41-5A / %x5E-7E\n      reg: /^ssrc-group:([\\x21\\x23\\x24\\x25\\x26\\x27\\x2A\\x2B\\x2D\\x2E\\w]*) (.*)/,\n      names: ['semantics', 'ssrcs'],\n      format: 'ssrc-group:%s %s'\n    },\n    {\n      // a=msid-semantic: WMS Jvlam5X3SX1OP6pn20zWogvaKJz5Hjf9OnlV\n      name: 'msidSemantic',\n      reg: /^msid-semantic:\\s?(\\w*) (\\S*)/,\n      names: ['semantic', 'token'],\n      format: 'msid-semantic: %s %s' // space after ':' is not accidental\n    },\n    {\n      // a=group:BUNDLE audio video\n      push: 'groups',\n      reg: /^group:(\\w*) (.*)/,\n      names: ['type', 'mids'],\n      format: 'group:%s %s'\n    },\n    {\n      // a=rtcp-mux\n      name: 'rtcpMux',\n      reg: /^(rtcp-mux)/\n    },\n    {\n      // a=rtcp-rsize\n      name: 'rtcpRsize',\n      reg: /^(rtcp-rsize)/\n    },\n    {\n      // a=sctpmap:5000 webrtc-datachannel 1024\n      name: 'sctpmap',\n      reg: /^sctpmap:([\\w_/]*) (\\S*)(?: (\\S*))?/,\n      names: ['sctpmapNumber', 'app', 'maxMessageSize'],\n      format: function (o) {\n        return (o.maxMessageSize != null)\n          ? 'sctpmap:%s %s %s'\n          : 'sctpmap:%s %s';\n      }\n    },\n    {\n      // a=x-google-flag:conference\n      name: 'xGoogleFlag',\n      reg: /^x-google-flag:([^\\s]*)/,\n      format: 'x-google-flag:%s'\n    },\n    {\n      // a=rid:1 send max-width=1280;max-height=720;max-fps=30;depend=0\n      push: 'rids',\n      reg: /^rid:([\\d\\w]+) (\\w+)(?: ([\\S| ]*))?/,\n      names: ['id', 'direction', 'params'],\n      format: function (o) {\n        return (o.params) ? 'rid:%s %s %s' : 'rid:%s %s';\n      }\n    },\n    {\n      // a=imageattr:97 send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320] recv [x=330,y=250]\n      // a=imageattr:* send [x=800,y=640] recv *\n      // a=imageattr:100 recv [x=320,y=240]\n      push: 'imageattrs',\n      reg: new RegExp(\n        // a=imageattr:97\n        '^imageattr:(\\\\d+|\\\\*)' +\n        // send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320]\n        '[\\\\s\\\\t]+(send|recv)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*)' +\n        // recv [x=330,y=250]\n        '(?:[\\\\s\\\\t]+(recv|send)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*))?'\n      ),\n      names: ['pt', 'dir1', 'attrs1', 'dir2', 'attrs2'],\n      format: function (o) {\n        return 'imageattr:%s %s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    {\n      // a=simulcast:send 1,2,3;~4,~5 recv 6;~7,~8\n      // a=simulcast:recv 1;4,5 send 6;7\n      name: 'simulcast',\n      reg: new RegExp(\n        // a=simulcast:\n        '^simulcast:' +\n        // send 1,2,3;~4,~5\n        '(send|recv) ([a-zA-Z0-9\\\\-_~;,]+)' +\n        // space + recv 6;~7,~8\n        '(?:\\\\s?(send|recv) ([a-zA-Z0-9\\\\-_~;,]+))?' +\n        // end\n        '$'\n      ),\n      names: ['dir1', 'list1', 'dir2', 'list2'],\n      format: function (o) {\n        return 'simulcast:%s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    {\n      // old simulcast draft 03 (implemented by Firefox)\n      //   https://tools.ietf.org/html/draft-ietf-mmusic-sdp-simulcast-03\n      // a=simulcast: recv pt=97;98 send pt=97\n      // a=simulcast: send rid=5;6;7 paused=6,7\n      name: 'simulcast_03',\n      reg: /^simulcast:[\\s\\t]+([\\S+\\s\\t]+)$/,\n      names: ['value'],\n      format: 'simulcast: %s'\n    },\n    {\n      // a=framerate:25\n      // a=framerate:29.97\n      name: 'framerate',\n      reg: /^framerate:(\\d+(?:$|\\.\\d+))/,\n      format: 'framerate:%s'\n    },\n    {\n      // RFC4570\n      // a=source-filter: incl IN IP4 239.5.2.31 10.1.15.5\n      name: 'sourceFilter',\n      reg: /^source-filter: *(excl|incl) (\\S*) (IP4|IP6|\\*) (\\S*) (.*)/,\n      names: ['filterMode', 'netType', 'addressTypes', 'destAddress', 'srcList'],\n      format: 'source-filter: %s %s %s %s %s'\n    },\n    {\n      // a=bundle-only\n      name: 'bundleOnly',\n      reg: /^(bundle-only)/\n    },\n    {\n      // a=label:1\n      name: 'label',\n      reg: /^label:(.+)/,\n      format: 'label:%s'\n    },\n    {\n      // RFC version 26 for SCTP over DTLS\n      // https://tools.ietf.org/html/draft-ietf-mmusic-sctp-sdp-26#section-5\n      name: 'sctpPort',\n      reg: /^sctp-port:(\\d+)$/,\n      format: 'sctp-port:%s'\n    },\n    {\n      // RFC version 26 for SCTP over DTLS\n      // https://tools.ietf.org/html/draft-ietf-mmusic-sctp-sdp-26#section-6\n      name: 'maxMessageSize',\n      reg: /^max-message-size:(\\d+)$/,\n      format: 'max-message-size:%s'\n    },\n    {\n      // RFC7273\n      // a=ts-refclk:ptp=IEEE1588-2008:39-A7-94-FF-FE-07-CB-D0:37\n      push:'tsRefClocks',\n      reg: /^ts-refclk:([^\\s=]*)(?:=(\\S*))?/,\n      names: ['clksrc', 'clksrcExt'],\n      format: function (o) {\n        return 'ts-refclk:%s' + (o.clksrcExt != null ? '=%s' : '');\n      }\n    },\n    {\n      // RFC7273\n      // a=mediaclk:direct=963214424\n      name:'mediaClk',\n      reg: /^mediaclk:(?:id=(\\S*))? *([^\\s=]*)(?:=(\\S*))?(?: *rate=(\\d+)\\/(\\d+))?/,\n      names: ['id', 'mediaClockName', 'mediaClockValue', 'rateNumerator', 'rateDenominator'],\n      format: function (o) {\n        var str = 'mediaclk:';\n        str += (o.id != null ? 'id=%s %s' : '%v%s');\n        str += (o.mediaClockValue != null ? '=%s' : '');\n        str += (o.rateNumerator != null ? ' rate=%s' : '');\n        str += (o.rateDenominator != null ? '/%s' : '');\n        return str;\n      }\n    },\n    {\n      // a=keywds:keywords\n      name: 'keywords',\n      reg: /^keywds:(.+)$/,\n      format: 'keywds:%s'\n    },\n    {\n      // a=content:main\n      name: 'content',\n      reg: /^content:(.+)/,\n      format: 'content:%s'\n    },\n    // BFCP https://tools.ietf.org/html/rfc4583\n    {\n      // a=floorctrl:c-s\n      name: 'bfcpFloorCtrl',\n      reg: /^floorctrl:(c-only|s-only|c-s)/,\n      format: 'floorctrl:%s'\n    },\n    {\n      // a=confid:1\n      name: 'bfcpConfId',\n      reg: /^confid:(\\d+)/,\n      format: 'confid:%s'\n    },\n    {\n      // a=userid:1\n      name: 'bfcpUserId',\n      reg: /^userid:(\\d+)/,\n      format: 'userid:%s'\n    },\n    {\n      // a=floorid:1\n      name: 'bfcpFloorId',\n      reg: /^floorid:(.+) (?:m-stream|mstrm):(.+)/,\n      names: ['id', 'mStream'],\n      format: 'floorid:%s mstrm:%s'\n    },\n    {\n      // any a= that we don't understand is kept verbatim on media.invalid\n      push: 'invalid',\n      names: ['value']\n    }\n  ]\n};\n\n// set sensible defaults to avoid polluting the grammar with boring details\nObject.keys(grammar).forEach(function (key) {\n  var objs = grammar[key];\n  objs.forEach(function (obj) {\n    if (!obj.reg) {\n      obj.reg = /(.*)/;\n    }\n    if (!obj.format) {\n      obj.format = '%s';\n    }\n  });\n});\n","var parser = require('./parser');\nvar writer = require('./writer');\n\nexports.write = writer;\nexports.parse = parser.parse;\nexports.parseParams = parser.parseParams;\nexports.parseFmtpConfig = parser.parseFmtpConfig; // Alias of parseParams().\nexports.parsePayloads = parser.parsePayloads;\nexports.parseRemoteCandidates = parser.parseRemoteCandidates;\nexports.parseImageAttributes = parser.parseImageAttributes;\nexports.parseSimulcastStreamList = parser.parseSimulcastStreamList;\n","var toIntIfInt = function (v) {\n  return String(Number(v)) === v ? Number(v) : v;\n};\n\nvar attachProperties = function (match, location, names, rawName) {\n  if (rawName && !names) {\n    location[rawName] = toIntIfInt(match[1]);\n  }\n  else {\n    for (var i = 0; i < names.length; i += 1) {\n      if (match[i+1] != null) {\n        location[names[i]] = toIntIfInt(match[i+1]);\n      }\n    }\n  }\n};\n\nvar parseReg = function (obj, location, content) {\n  var needsBlank = obj.name && obj.names;\n  if (obj.push && !location[obj.push]) {\n    location[obj.push] = [];\n  }\n  else if (needsBlank && !location[obj.name]) {\n    location[obj.name] = {};\n  }\n  var keyLocation = obj.push ?\n    {} :  // blank object that will be pushed\n    needsBlank ? location[obj.name] : location; // otherwise, named location or root\n\n  attachProperties(content.match(obj.reg), keyLocation, obj.names, obj.name);\n\n  if (obj.push) {\n    location[obj.push].push(keyLocation);\n  }\n};\n\nvar grammar = require('./grammar');\nvar validLine = RegExp.prototype.test.bind(/^([a-z])=(.*)/);\n\nexports.parse = function (sdp) {\n  var session = {}\n    , media = []\n    , location = session; // points at where properties go under (one of the above)\n\n  // parse lines we understand\n  sdp.split(/(\\r\\n|\\r|\\n)/).filter(validLine).forEach(function (l) {\n    var type = l[0];\n    var content = l.slice(2);\n    if (type === 'm') {\n      media.push({rtp: [], fmtp: []});\n      location = media[media.length-1]; // point at latest media line\n    }\n\n    for (var j = 0; j < (grammar[type] || []).length; j += 1) {\n      var obj = grammar[type][j];\n      if (obj.reg.test(content)) {\n        return parseReg(obj, location, content);\n      }\n    }\n  });\n\n  session.media = media; // link it up\n  return session;\n};\n\nvar paramReducer = function (acc, expr) {\n  var s = expr.split(/=(.+)/, 2);\n  if (s.length === 2) {\n    acc[s[0]] = toIntIfInt(s[1]);\n  } else if (s.length === 1 && expr.length > 1) {\n    acc[s[0]] = undefined;\n  }\n  return acc;\n};\n\nexports.parseParams = function (str) {\n  return str.split(/;\\s?/).reduce(paramReducer, {});\n};\n\n// For backward compatibility - alias will be removed in 3.0.0\nexports.parseFmtpConfig = exports.parseParams;\n\nexports.parsePayloads = function (str) {\n  return str.toString().split(' ').map(Number);\n};\n\nexports.parseRemoteCandidates = function (str) {\n  var candidates = [];\n  var parts = str.split(' ').map(toIntIfInt);\n  for (var i = 0; i < parts.length; i += 3) {\n    candidates.push({\n      component: parts[i],\n      ip: parts[i + 1],\n      port: parts[i + 2]\n    });\n  }\n  return candidates;\n};\n\nexports.parseImageAttributes = function (str) {\n  return str.split(' ').map(function (item) {\n    return item.substring(1, item.length-1).split(',').reduce(paramReducer, {});\n  });\n};\n\nexports.parseSimulcastStreamList = function (str) {\n  return str.split(';').map(function (stream) {\n    return stream.split(',').map(function (format) {\n      var scid, paused = false;\n\n      if (format[0] !== '~') {\n        scid = toIntIfInt(format);\n      } else {\n        scid = toIntIfInt(format.substring(1, format.length));\n        paused = true;\n      }\n\n      return {\n        scid: scid,\n        paused: paused\n      };\n    });\n  });\n};\n","var grammar = require('./grammar');\n\n// customized util.format - discards excess arguments and can void middle ones\nvar formatRegExp = /%[sdv%]/g;\nvar format = function (formatStr) {\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  return formatStr.replace(formatRegExp, function (x) {\n    if (i >= len) {\n      return x; // missing argument\n    }\n    var arg = args[i];\n    i += 1;\n    switch (x) {\n    case '%%':\n      return '%';\n    case '%s':\n      return String(arg);\n    case '%d':\n      return Number(arg);\n    case '%v':\n      return '';\n    }\n  });\n  // NB: we discard excess arguments - they are typically undefined from makeLine\n};\n\nvar makeLine = function (type, obj, location) {\n  var str = obj.format instanceof Function ?\n    (obj.format(obj.push ? location : location[obj.name])) :\n    obj.format;\n\n  var args = [type + '=' + str];\n  if (obj.names) {\n    for (var i = 0; i < obj.names.length; i += 1) {\n      var n = obj.names[i];\n      if (obj.name) {\n        args.push(location[obj.name][n]);\n      }\n      else { // for mLine and push attributes\n        args.push(location[obj.names[i]]);\n      }\n    }\n  }\n  else {\n    args.push(location[obj.name]);\n  }\n  return format.apply(null, args);\n};\n\n// RFC specified order\n// TODO: extend this with all the rest\nvar defaultOuterOrder = [\n  'v', 'o', 's', 'i',\n  'u', 'e', 'p', 'c',\n  'b', 't', 'r', 'z', 'a'\n];\nvar defaultInnerOrder = ['i', 'c', 'b', 'a'];\n\n\nmodule.exports = function (session, opts) {\n  opts = opts || {};\n  // ensure certain properties exist\n  if (session.version == null) {\n    session.version = 0; // 'v=0' must be there (only defined version atm)\n  }\n  if (session.name == null) {\n    session.name = ' '; // 's= ' must be there if no meaningful name set\n  }\n  session.media.forEach(function (mLine) {\n    if (mLine.payloads == null) {\n      mLine.payloads = '';\n    }\n  });\n\n  var outerOrder = opts.outerOrder || defaultOuterOrder;\n  var innerOrder = opts.innerOrder || defaultInnerOrder;\n  var sdp = [];\n\n  // loop through outerOrder for matching properties on session\n  outerOrder.forEach(function (type) {\n    grammar[type].forEach(function (obj) {\n      if (obj.name in session && session[obj.name] != null) {\n        sdp.push(makeLine(type, obj, session));\n      }\n      else if (obj.push in session && session[obj.push] != null) {\n        session[obj.push].forEach(function (el) {\n          sdp.push(makeLine(type, obj, el));\n        });\n      }\n    });\n  });\n\n  // then for each media line, follow the innerOrder\n  session.media.forEach(function (mLine) {\n    sdp.push(makeLine('m', grammar.m[0], mLine));\n\n    innerOrder.forEach(function (type) {\n      grammar[type].forEach(function (obj) {\n        if (obj.name in mLine && mLine[obj.name] != null) {\n          sdp.push(makeLine(type, obj, mLine));\n        }\n        else if (obj.push in mLine && mLine[obj.push] != null) {\n          mLine[obj.push].forEach(function (el) {\n            sdp.push(makeLine(type, obj, el));\n          });\n        }\n      });\n    });\n  });\n\n  return sdp.join('\\r\\n') + '\\r\\n';\n};\n","'use strict';\n\nmodule.exports = (string, separator) => {\n\tif (!(typeof string === 'string' && typeof separator === 'string')) {\n\t\tthrow new TypeError('Expected the arguments to be of type `string`');\n\t}\n\n\tif (separator === '') {\n\t\treturn [string];\n\t}\n\n\tconst separatorIndex = string.indexOf(separator);\n\n\tif (separatorIndex === -1) {\n\t\treturn [string];\n\t}\n\n\treturn [\n\t\tstring.slice(0, separatorIndex),\n\t\tstring.slice(separatorIndex + separator.length)\n\t];\n};\n","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","\nvar space = require('to-space-case')\n\n/**\n * Export.\n */\n\nmodule.exports = toCamelCase\n\n/**\n * Convert a `string` to camel case.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction toCamelCase(string) {\n  return space(string).replace(/\\s(\\w)/g, function (matches, letter) {\n    return letter.toUpperCase()\n  })\n}\n","\n/**\n * Export.\n */\n\nmodule.exports = toNoCase\n\n/**\n * Test whether a string is camel-case.\n */\n\nvar hasSpace = /\\s/\nvar hasSeparator = /(_|-|\\.|:)/\nvar hasCamel = /([a-z][A-Z]|[A-Z][a-z])/\n\n/**\n * Remove any starting case from a `string`, like camel or snake, but keep\n * spaces and punctuation that may be important otherwise.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction toNoCase(string) {\n  if (hasSpace.test(string)) return string.toLowerCase()\n  if (hasSeparator.test(string)) return (unseparate(string) || string).toLowerCase()\n  if (hasCamel.test(string)) return uncamelize(string).toLowerCase()\n  return string.toLowerCase()\n}\n\n/**\n * Separator splitter.\n */\n\nvar separatorSplitter = /[\\W_]+(.|$)/g\n\n/**\n * Un-separate a `string`.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction unseparate(string) {\n  return string.replace(separatorSplitter, function (m, next) {\n    return next ? ' ' + next : ''\n  })\n}\n\n/**\n * Camelcase splitter.\n */\n\nvar camelSplitter = /(.)([A-Z]+)/g\n\n/**\n * Un-camelcase a `string`.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction uncamelize(string) {\n  return string.replace(camelSplitter, function (m, previous, uppers) {\n    return previous + ' ' + uppers.toLowerCase().split('').join(' ')\n  })\n}\n","\nvar clean = require('to-no-case')\n\n/**\n * Export.\n */\n\nmodule.exports = toSpaceCase\n\n/**\n * Convert a `string` to space case.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction toSpaceCase(string) {\n  return clean(string).replace(/[\\W_]+(.|$)/g, function (matches, match) {\n    return match ? ' ' + match : ''\n  }).trim()\n}\n","/*! https://mths.be/utf8js v3.0.0 by @mathias */\n;(function(root) {\n\n\tvar stringFromCharCode = String.fromCharCode;\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2decode(string) {\n\t\tvar output = [];\n\t\tvar counter = 0;\n\t\tvar length = string.length;\n\t\tvar value;\n\t\tvar extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2encode(array) {\n\t\tvar length = array.length;\n\t\tvar index = -1;\n\t\tvar value;\n\t\tvar output = '';\n\t\twhile (++index < length) {\n\t\t\tvalue = array[index];\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t}\n\t\treturn output;\n\t}\n\n\tfunction checkScalarValue(codePoint) {\n\t\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t}\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction createByte(codePoint, shift) {\n\t\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n\t}\n\n\tfunction encodeCodePoint(codePoint) {\n\t\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\t\treturn stringFromCharCode(codePoint);\n\t\t}\n\t\tvar symbol = '';\n\t\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t\t}\n\t\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\t\tcheckScalarValue(codePoint);\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\t\tsymbol += createByte(codePoint, 12);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\t\treturn symbol;\n\t}\n\n\tfunction utf8encode(string) {\n\t\tvar codePoints = ucs2decode(string);\n\t\tvar length = codePoints.length;\n\t\tvar index = -1;\n\t\tvar codePoint;\n\t\tvar byteString = '';\n\t\twhile (++index < length) {\n\t\t\tcodePoint = codePoints[index];\n\t\t\tbyteString += encodeCodePoint(codePoint);\n\t\t}\n\t\treturn byteString;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction readContinuationByte() {\n\t\tif (byteIndex >= byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\tif ((continuationByte & 0xC0) == 0x80) {\n\t\t\treturn continuationByte & 0x3F;\n\t\t}\n\n\t\t// If we end up here, it’s not a continuation byte\n\t\tthrow Error('Invalid continuation byte');\n\t}\n\n\tfunction decodeSymbol() {\n\t\tvar byte1;\n\t\tvar byte2;\n\t\tvar byte3;\n\t\tvar byte4;\n\t\tvar codePoint;\n\n\t\tif (byteIndex > byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tif (byteIndex == byteCount) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Read first byte\n\t\tbyte1 = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\t// 1-byte sequence (no continuation bytes)\n\t\tif ((byte1 & 0x80) == 0) {\n\t\t\treturn byte1;\n\t\t}\n\n\t\t// 2-byte sequence\n\t\tif ((byte1 & 0xE0) == 0xC0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\t\tif (codePoint >= 0x80) {\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 3-byte sequence (may include unpaired surrogates)\n\t\tif ((byte1 & 0xF0) == 0xE0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\t\tif (codePoint >= 0x0800) {\n\t\t\t\tcheckScalarValue(codePoint);\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 4-byte sequence\n\t\tif ((byte1 & 0xF8) == 0xF0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tbyte4 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t\t(byte3 << 0x06) | byte4;\n\t\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\t\treturn codePoint;\n\t\t\t}\n\t\t}\n\n\t\tthrow Error('Invalid UTF-8 detected');\n\t}\n\n\tvar byteArray;\n\tvar byteCount;\n\tvar byteIndex;\n\tfunction utf8decode(byteString) {\n\t\tbyteArray = ucs2decode(byteString);\n\t\tbyteCount = byteArray.length;\n\t\tbyteIndex = 0;\n\t\tvar codePoints = [];\n\t\tvar tmp;\n\t\twhile ((tmp = decodeSymbol()) !== false) {\n\t\t\tcodePoints.push(tmp);\n\t\t}\n\t\treturn ucs2encode(codePoints);\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\troot.version = '3.0.0';\n\troot.encode = utf8encode;\n\troot.decode = utf8decode;\n\n}(typeof exports === 'undefined' ? this.utf8 = {} : exports));\n","var classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar Rule = function () {\n  function Rule(name, fn, args, modifiers) {\n    classCallCheck(this, Rule);\n\n    this.name = name;\n    this.fn = fn;\n    this.args = args;\n    this.modifiers = modifiers;\n  }\n\n  createClass(Rule, [{\n    key: \"_test\",\n    value: function _test(value) {\n      var fn = this.fn;\n\n      try {\n        testAux(this.modifiers.slice(), fn)(value);\n      } catch (ex) {\n        fn = function fn() {\n          return false;\n        };\n      }\n\n      try {\n        return testAux(this.modifiers.slice(), fn)(value);\n      } catch (ex) {\n        return false;\n      }\n    }\n  }, {\n    key: \"_check\",\n    value: function _check(value) {\n      try {\n        testAux(this.modifiers.slice(), this.fn)(value);\n      } catch (ex) {\n        if (testAux(this.modifiers.slice(), function (it) {\n          return it;\n        })(false)) {\n          return;\n        }\n      }\n\n      if (!testAux(this.modifiers.slice(), this.fn)(value)) {\n        throw null;\n      }\n    }\n  }, {\n    key: \"_testAsync\",\n    value: function _testAsync(value) {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        testAsyncAux(_this.modifiers.slice(), _this.fn)(value).then(function (valid) {\n          if (valid) {\n            resolve(value);\n          } else {\n            reject(null);\n          }\n        }).catch(function (ex) {\n          return reject(ex);\n        });\n      });\n    }\n  }]);\n  return Rule;\n}();\n\nfunction pickFn(fn) {\n  var variant = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"simple\";\n\n  return typeof fn === \"object\" ? fn[variant] : fn;\n}\n\nfunction testAux(modifiers, fn) {\n  if (modifiers.length) {\n    var modifier = modifiers.shift();\n    var nextFn = testAux(modifiers, fn);\n    return modifier.perform(nextFn);\n  } else {\n    return pickFn(fn);\n  }\n}\n\nfunction testAsyncAux(modifiers, fn) {\n  if (modifiers.length) {\n    var modifier = modifiers.shift();\n    var nextFn = testAsyncAux(modifiers, fn);\n    return modifier.performAsync(nextFn);\n  } else {\n    return function (value) {\n      return Promise.resolve(pickFn(fn, \"async\")(value));\n    };\n  }\n}\n\nvar Modifier = function Modifier(name, perform, performAsync) {\n  classCallCheck(this, Modifier);\n\n  this.name = name;\n  this.perform = perform;\n  this.performAsync = performAsync;\n};\n\nvar ValidationError = function (_Error) {\n  inherits(ValidationError, _Error);\n\n  function ValidationError(rule, value, cause, target) {\n    classCallCheck(this, ValidationError);\n\n    for (var _len = arguments.length, remaining = Array(_len > 4 ? _len - 4 : 0), _key = 4; _key < _len; _key++) {\n      remaining[_key - 4] = arguments[_key];\n    }\n\n    var _this = possibleConstructorReturn(this, (ValidationError.__proto__ || Object.getPrototypeOf(ValidationError)).call(this, remaining));\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(_this, ValidationError);\n    }\n    _this.rule = rule;\n    _this.value = value;\n    _this.cause = cause;\n    _this.target = target;\n    return _this;\n  }\n\n  return ValidationError;\n}(Error);\n\nvar Context = function () {\n  function Context() {\n    var chain = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var nextRuleModifiers = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    classCallCheck(this, Context);\n\n    this.chain = chain;\n    this.nextRuleModifiers = nextRuleModifiers;\n  }\n\n  createClass(Context, [{\n    key: \"_applyRule\",\n    value: function _applyRule(ruleFn, name) {\n      var _this = this;\n\n      return function () {\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        _this.chain.push(new Rule(name, ruleFn.apply(_this, args), args, _this.nextRuleModifiers));\n        _this.nextRuleModifiers = [];\n        return _this;\n      };\n    }\n  }, {\n    key: \"_applyModifier\",\n    value: function _applyModifier(modifier, name) {\n      this.nextRuleModifiers.push(new Modifier(name, modifier.simple, modifier.async));\n      return this;\n    }\n  }, {\n    key: \"_clone\",\n    value: function _clone() {\n      return new Context(this.chain.slice(), this.nextRuleModifiers.slice());\n    }\n  }, {\n    key: \"test\",\n    value: function test(value) {\n      return this.chain.every(function (rule) {\n        return rule._test(value);\n      });\n    }\n  }, {\n    key: \"testAll\",\n    value: function testAll(value) {\n      var err = [];\n      this.chain.forEach(function (rule) {\n        try {\n          rule._check(value);\n        } catch (ex) {\n          err.push(new ValidationError(rule, value, ex));\n        }\n      });\n      return err;\n    }\n  }, {\n    key: \"check\",\n    value: function check(value) {\n      this.chain.forEach(function (rule) {\n        try {\n          rule._check(value);\n        } catch (ex) {\n          throw new ValidationError(rule, value, ex);\n        }\n      });\n    }\n  }, {\n    key: \"testAsync\",\n    value: function testAsync(value) {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        executeAsyncRules(value, _this2.chain.slice(), resolve, reject);\n      });\n    }\n  }]);\n  return Context;\n}();\n\nfunction executeAsyncRules(value, rules, resolve, reject) {\n  if (rules.length) {\n    var rule = rules.shift();\n    rule._testAsync(value).then(function () {\n      executeAsyncRules(value, rules, resolve, reject);\n    }, function (cause) {\n      reject(new ValidationError(rule, value, cause));\n    });\n  } else {\n    resolve(value);\n  }\n}\n\nfunction v8n() {\n  return proxyContext(new Context());\n}\n\n// Custom rules\nvar customRules = {};\n\nv8n.extend = function (newRules) {\n  Object.assign(customRules, newRules);\n};\n\nv8n.clearCustomRules = function () {\n  customRules = {};\n};\n\nfunction proxyContext(context) {\n  return new Proxy(context, {\n    get: function get(obj, prop) {\n      if (prop in obj) {\n        return obj[prop];\n      }\n\n      var newContext = proxyContext(context._clone());\n\n      if (prop in availableModifiers) {\n        return newContext._applyModifier(availableModifiers[prop], prop);\n      }\n      if (prop in customRules) {\n        return newContext._applyRule(customRules[prop], prop);\n      }\n      if (prop in availableRules) {\n        return newContext._applyRule(availableRules[prop], prop);\n      }\n    }\n  });\n}\n\nvar availableModifiers = {\n  not: {\n    simple: function simple(fn) {\n      return function (value) {\n        return !fn(value);\n      };\n    },\n    async: function async(fn) {\n      return function (value) {\n        return Promise.resolve(fn(value)).then(function (result) {\n          return !result;\n        }).catch(function (e) {\n          return true;\n        });\n      };\n    }\n  },\n\n  some: {\n    simple: function simple(fn) {\n      return function (value) {\n        return split(value).some(function (item) {\n          try {\n            return fn(item);\n          } catch (ex) {\n            return false;\n          }\n        });\n      };\n    },\n    async: function async(fn) {\n      return function (value) {\n        return Promise.all(split(value).map(function (item) {\n          try {\n            return fn(item).catch(function (e) {\n              return false;\n            });\n          } catch (ex) {\n            return false;\n          }\n        })).then(function (result) {\n          return result.some(Boolean);\n        });\n      };\n    }\n  },\n\n  every: {\n    simple: function simple(fn) {\n      return function (value) {\n        return split(value).every(fn);\n      };\n    },\n    async: function async(fn) {\n      return function (value) {\n        return Promise.all(split(value).map(fn)).then(function (result) {\n          return result.every(Boolean);\n        });\n      };\n    }\n  }\n};\n\nfunction split(value) {\n  if (typeof value === \"string\") {\n    return value.split(\"\");\n  }\n  return value;\n}\n\nvar availableRules = {\n  // Value\n\n  equal: function equal(expected) {\n    return function (value) {\n      return value == expected;\n    };\n  },\n\n  exact: function exact(expected) {\n    return function (value) {\n      return value === expected;\n    };\n  },\n\n  // Types\n\n  number: function number() {\n    var allowInfinite = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    return function (value) {\n      return typeof value === \"number\" && (allowInfinite || isFinite(value));\n    };\n  },\n\n  integer: function integer() {\n    return function (value) {\n      var isInteger = Number.isInteger || isIntegerPolyfill;\n      return isInteger(value);\n    };\n  },\n\n  numeric: function numeric() {\n    return function (value) {\n      return !isNaN(parseFloat(value)) && isFinite(value);\n    };\n  },\n\n  string: function string() {\n    return testType(\"string\");\n  },\n\n  boolean: function boolean() {\n    return testType(\"boolean\");\n  },\n\n  undefined: function undefined() {\n    return testType(\"undefined\");\n  },\n\n  null: function _null() {\n    return testType(\"null\");\n  },\n\n  array: function array() {\n    return testType(\"array\");\n  },\n\n  object: function object() {\n    return testType(\"object\");\n  },\n\n  instanceOf: function instanceOf(instance) {\n    return function (value) {\n      return value instanceof instance;\n    };\n  },\n\n  // Pattern\n\n  pattern: function pattern(expected) {\n    return function (value) {\n      return expected.test(value);\n    };\n  },\n\n  lowercase: function lowercase() {\n    return function (value) {\n      return (/^([a-z]+\\s*)+$/.test(value)\n      );\n    };\n  },\n\n  uppercase: function uppercase() {\n    return function (value) {\n      return (/^([A-Z]+\\s*)+$/.test(value)\n      );\n    };\n  },\n\n  vowel: function vowel() {\n    return function (value) {\n      return (/^[aeiou]+$/i.test(value)\n      );\n    };\n  },\n\n  consonant: function consonant() {\n    return function (value) {\n      return (/^(?=[^aeiou])([a-z]+)$/i.test(value)\n      );\n    };\n  },\n\n  // Value at\n\n  first: function first(expected) {\n    return function (value) {\n      return value[0] == expected;\n    };\n  },\n\n  last: function last(expected) {\n    return function (value) {\n      return value[value.length - 1] == expected;\n    };\n  },\n\n  // Length\n\n  empty: function empty() {\n    return function (value) {\n      return value.length === 0;\n    };\n  },\n\n  length: function length(min, max) {\n    return function (value) {\n      return value.length >= min && value.length <= (max || min);\n    };\n  },\n\n  minLength: function minLength(min) {\n    return function (value) {\n      return value.length >= min;\n    };\n  },\n\n  maxLength: function maxLength(max) {\n    return function (value) {\n      return value.length <= max;\n    };\n  },\n\n  // Range\n\n  negative: function negative() {\n    return function (value) {\n      return value < 0;\n    };\n  },\n\n  positive: function positive() {\n    return function (value) {\n      return value >= 0;\n    };\n  },\n\n  between: function between(a, b) {\n    return function (value) {\n      return value >= a && value <= b;\n    };\n  },\n\n  range: function range(a, b) {\n    return function (value) {\n      return value >= a && value <= b;\n    };\n  },\n\n  lessThan: function lessThan(n) {\n    return function (value) {\n      return value < n;\n    };\n  },\n\n  lessThanOrEqual: function lessThanOrEqual(n) {\n    return function (value) {\n      return value <= n;\n    };\n  },\n\n  greaterThan: function greaterThan(n) {\n    return function (value) {\n      return value > n;\n    };\n  },\n\n  greaterThanOrEqual: function greaterThanOrEqual(n) {\n    return function (value) {\n      return value >= n;\n    };\n  },\n\n  // Divisible\n\n  even: function even() {\n    return function (value) {\n      return value % 2 === 0;\n    };\n  },\n\n  odd: function odd() {\n    return function (value) {\n      return value % 2 !== 0;\n    };\n  },\n\n  includes: function includes(expected) {\n    return function (value) {\n      return ~value.indexOf(expected);\n    };\n  },\n\n  schema: function schema(_schema) {\n    return testSchema(_schema);\n  },\n\n  // branching\n\n  passesAnyOf: function passesAnyOf() {\n    for (var _len = arguments.length, validations = Array(_len), _key = 0; _key < _len; _key++) {\n      validations[_key] = arguments[_key];\n    }\n\n    return function (value) {\n      return validations.some(function (validation) {\n        return validation.test(value);\n      });\n    };\n  },\n\n  optional: function optional(validation) {\n    var considerTrimmedEmptyString = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    return function (value) {\n      if (considerTrimmedEmptyString && typeof value === \"string\" && value.trim() === \"\") {\n        return true;\n      }\n\n      if (value !== undefined && value !== null) validation.check(value);\n      return true;\n    };\n  }\n};\n\nfunction testType(expected) {\n  return function (value) {\n    return Array.isArray(value) && expected === \"array\" || value === null && expected === \"null\" || typeof value === expected;\n  };\n}\n\nfunction isIntegerPolyfill(value) {\n  return typeof value === \"number\" && isFinite(value) && Math.floor(value) === value;\n}\n\nfunction testSchema(schema) {\n  return {\n    simple: function simple(value) {\n      var causes = [];\n      Object.keys(schema).forEach(function (key) {\n        var nestedValidation = schema[key];\n        try {\n          nestedValidation.check((value || {})[key]);\n        } catch (ex) {\n          ex.target = key;\n          causes.push(ex);\n        }\n      });\n      if (causes.length > 0) {\n        throw causes;\n      }\n      return true;\n    },\n    async: function async(value) {\n      var causes = [];\n      var nested = Object.keys(schema).map(function (key) {\n        var nestedValidation = schema[key];\n        return nestedValidation.testAsync((value || {})[key]).catch(function (ex) {\n          ex.target = key;\n          causes.push(ex);\n        });\n      });\n      return Promise.all(nested).then(function (values) {\n        if (causes.length > 0) {\n          throw causes;\n        }\n\n        return true;\n      });\n    }\n  };\n}\n\nexport default v8n;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.adapter = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n'use strict';\n\nvar _adapter_factory = require('./adapter_factory.js');\n\nvar adapter = (0, _adapter_factory.adapterFactory)({ window: typeof window === 'undefined' ? undefined : window });\nmodule.exports = adapter; // this is the difference from adapter_core.\n\n},{\"./adapter_factory.js\":2}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.adapterFactory = adapterFactory;\n\nvar _utils = require('./utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nvar _chrome_shim = require('./chrome/chrome_shim');\n\nvar chromeShim = _interopRequireWildcard(_chrome_shim);\n\nvar _edge_shim = require('./edge/edge_shim');\n\nvar edgeShim = _interopRequireWildcard(_edge_shim);\n\nvar _firefox_shim = require('./firefox/firefox_shim');\n\nvar firefoxShim = _interopRequireWildcard(_firefox_shim);\n\nvar _safari_shim = require('./safari/safari_shim');\n\nvar safariShim = _interopRequireWildcard(_safari_shim);\n\nvar _common_shim = require('./common_shim');\n\nvar commonShim = _interopRequireWildcard(_common_shim);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n// Shimming starts here.\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\nfunction adapterFactory() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      window = _ref.window;\n\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    shimChrome: true,\n    shimFirefox: true,\n    shimEdge: true,\n    shimSafari: true\n  };\n\n  // Utils.\n  var logging = utils.log;\n  var browserDetails = utils.detectBrowser(window);\n\n  var adapter = {\n    browserDetails: browserDetails,\n    commonShim: commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection || !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      if (browserDetails.version === null) {\n        logging('Chrome shim can not determine version, not shimming.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n\n      chromeShim.shimGetUserMedia(window);\n      chromeShim.shimMediaStream(window);\n      chromeShim.shimPeerConnection(window);\n      chromeShim.shimOnTrack(window);\n      chromeShim.shimAddTrackRemoveTrack(window);\n      chromeShim.shimGetSendersWithDtmf(window);\n      chromeShim.shimGetStats(window);\n      chromeShim.shimSenderReceiverGetStats(window);\n      chromeShim.fixNegotiationNeeded(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimConnectionState(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      commonShim.removeAllowExtmapMixed(window);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection || !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n\n      firefoxShim.shimGetUserMedia(window);\n      firefoxShim.shimPeerConnection(window);\n      firefoxShim.shimOnTrack(window);\n      firefoxShim.shimRemoveStream(window);\n      firefoxShim.shimSenderGetStats(window);\n      firefoxShim.shimReceiverGetStats(window);\n      firefoxShim.shimRTCDataChannel(window);\n      firefoxShim.shimAddTransceiver(window);\n      firefoxShim.shimGetParameters(window);\n      firefoxShim.shimCreateOffer(window);\n      firefoxShim.shimCreateAnswer(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimConnectionState(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n        logging('MS edge shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = edgeShim;\n\n      edgeShim.shimGetUserMedia(window);\n      edgeShim.shimGetDisplayMedia(window);\n      edgeShim.shimPeerConnection(window);\n      edgeShim.shimReplaceTrack(window);\n\n      // the edge shim implements the full RTCIceCandidate object.\n\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n\n      safariShim.shimRTCIceServerUrls(window);\n      safariShim.shimCreateOfferLegacy(window);\n      safariShim.shimCallbacksAPI(window);\n      safariShim.shimLocalStreamsAPI(window);\n      safariShim.shimRemoteStreamsAPI(window);\n      safariShim.shimTrackEventTransceiver(window);\n      safariShim.shimGetUserMedia(window);\n      safariShim.shimAudioContext(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      commonShim.removeAllowExtmapMixed(window);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n\n// Browser shims.\n\n},{\"./chrome/chrome_shim\":3,\"./common_shim\":6,\"./edge/edge_shim\":12,\"./firefox/firefox_shim\":7,\"./safari/safari_shim\":10,\"./utils\":11}],3:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetDisplayMedia = exports.shimGetUserMedia = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _getusermedia = require('./getusermedia');\n\nObject.defineProperty(exports, 'shimGetUserMedia', {\n  enumerable: true,\n  get: function get() {\n    return _getusermedia.shimGetUserMedia;\n  }\n});\n\nvar _getdisplaymedia = require('./getdisplaymedia');\n\nObject.defineProperty(exports, 'shimGetDisplayMedia', {\n  enumerable: true,\n  get: function get() {\n    return _getdisplaymedia.shimGetDisplayMedia;\n  }\n});\nexports.shimMediaStream = shimMediaStream;\nexports.shimOnTrack = shimOnTrack;\nexports.shimGetSendersWithDtmf = shimGetSendersWithDtmf;\nexports.shimGetStats = shimGetStats;\nexports.shimSenderReceiverGetStats = shimSenderReceiverGetStats;\nexports.shimAddTrackRemoveTrackWithNative = shimAddTrackRemoveTrackWithNative;\nexports.shimAddTrackRemoveTrack = shimAddTrackRemoveTrack;\nexports.shimPeerConnection = shimPeerConnection;\nexports.fixNegotiationNeeded = fixNegotiationNeeded;\n\nvar _utils = require('../utils.js');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nfunction shimOnTrack(window) {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && !('ontrack' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get: function get() {\n        return this._ontrack;\n      },\n      set: function set(f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n        this.addEventListener('track', this._ontrack = f);\n      },\n\n      enumerable: true,\n      configurable: true\n    });\n    var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n      var _this = this;\n\n      if (!this._ontrackpoly) {\n        this._ontrackpoly = function (e) {\n          // onaddstream does not fire when a track is added to an existing\n          // stream. But stream.onaddtrack is implemented so we use that.\n          e.stream.addEventListener('addtrack', function (te) {\n            var receiver = void 0;\n            if (window.RTCPeerConnection.prototype.getReceivers) {\n              receiver = _this.getReceivers().find(function (r) {\n                return r.track && r.track.id === te.track.id;\n              });\n            } else {\n              receiver = { track: te.track };\n            }\n\n            var event = new Event('track');\n            event.track = te.track;\n            event.receiver = receiver;\n            event.transceiver = { receiver: receiver };\n            event.streams = [e.stream];\n            _this.dispatchEvent(event);\n          });\n          e.stream.getTracks().forEach(function (track) {\n            var receiver = void 0;\n            if (window.RTCPeerConnection.prototype.getReceivers) {\n              receiver = _this.getReceivers().find(function (r) {\n                return r.track && r.track.id === track.id;\n              });\n            } else {\n              receiver = { track: track };\n            }\n            var event = new Event('track');\n            event.track = track;\n            event.receiver = receiver;\n            event.transceiver = { receiver: receiver };\n            event.streams = [e.stream];\n            _this.dispatchEvent(event);\n          });\n        };\n        this.addEventListener('addstream', this._ontrackpoly);\n      }\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver', { value: { receiver: e.receiver } });\n      }\n      return e;\n    });\n  }\n}\n\nfunction shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && !('getSenders' in window.RTCPeerConnection.prototype) && 'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    var shimSenderWithDtmf = function shimSenderWithDtmf(pc, track) {\n      return {\n        track: track,\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        },\n        _pc: pc\n      };\n    };\n\n    // augment addTrack when getSenders is not available.\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n      var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\n        var sender = origAddTrack.apply(this, arguments);\n        if (!sender) {\n          sender = shimSenderWithDtmf(this, track);\n          this._senders.push(sender);\n        }\n        return sender;\n      };\n\n      var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n      window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\n        origRemoveTrack.apply(this, arguments);\n        var idx = this._senders.indexOf(sender);\n        if (idx !== -1) {\n          this._senders.splice(idx, 1);\n        }\n      };\n    }\n    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      var _this2 = this;\n\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(function (track) {\n        _this2._senders.push(shimSenderWithDtmf(_this2, track));\n      });\n    };\n\n    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n      var _this3 = this;\n\n      this._senders = this._senders || [];\n      origRemoveStream.apply(this, [stream]);\n\n      stream.getTracks().forEach(function (track) {\n        var sender = _this3._senders.find(function (s) {\n          return s.track === track;\n        });\n        if (sender) {\n          // remove sender\n          _this3._senders.splice(_this3._senders.indexOf(sender), 1);\n        }\n      });\n    };\n  } else if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && 'getSenders' in window.RTCPeerConnection.prototype && 'createDTMFSender' in window.RTCPeerConnection.prototype && window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n    var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      var _this4 = this;\n\n      var senders = origGetSenders.apply(this, []);\n      senders.forEach(function (sender) {\n        return sender._pc = _this4;\n      });\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get: function get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nfunction shimGetStats(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  var origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    var _this5 = this;\n\n    var _arguments = Array.prototype.slice.call(arguments),\n        selector = _arguments[0],\n        onSucc = _arguments[1],\n        onErr = _arguments[2];\n\n    // If selector is a function then we are in the old style stats so just\n    // pass back the original getStats format to avoid breaking old users.\n\n\n    if (arguments.length > 0 && typeof selector === 'function') {\n      return origGetStats.apply(this, arguments);\n    }\n\n    // When spec-style getStats is supported, return those when called with\n    // either no arguments or the selector argument is null.\n    if (origGetStats.length === 0 && (arguments.length === 0 || typeof selector !== 'function')) {\n      return origGetStats.apply(this, []);\n    }\n\n    var fixChromeStats_ = function fixChromeStats_(response) {\n      var standardReport = {};\n      var reports = response.result();\n      reports.forEach(function (report) {\n        var standardStats = {\n          id: report.id,\n          timestamp: report.timestamp,\n          type: {\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n          }[report.type] || report.type\n        };\n        report.names().forEach(function (name) {\n          standardStats[name] = report.stat(name);\n        });\n        standardReport[standardStats.id] = standardStats;\n      });\n\n      return standardReport;\n    };\n\n    // shim getStats with maplike support\n    var makeMapStats = function makeMapStats(stats) {\n      return new Map(Object.keys(stats).map(function (key) {\n        return [key, stats[key]];\n      }));\n    };\n\n    if (arguments.length >= 2) {\n      var successCallbackWrapper_ = function successCallbackWrapper_(response) {\n        onSucc(makeMapStats(fixChromeStats_(response)));\n      };\n\n      return origGetStats.apply(this, [successCallbackWrapper_, selector]);\n    }\n\n    // promise-support\n    return new Promise(function (resolve, reject) {\n      origGetStats.apply(_this5, [function (response) {\n        resolve(makeMapStats(fixChromeStats_(response)));\n      }, reject]);\n    }).then(onSucc, onErr);\n  };\n}\n\nfunction shimSenderReceiverGetStats(window) {\n  if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  }\n\n  // shim sender stats.\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        var _this6 = this;\n\n        var senders = origGetSenders.apply(this, []);\n        senders.forEach(function (sender) {\n          return sender._pc = _this6;\n        });\n        return senders;\n      };\n    }\n\n    var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        var sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      var sender = this;\n      return this._pc.getStats().then(function (result) {\n        return (\n          /* Note: this will include stats of all senders that\n           *   send a track with the same id as sender.track as\n           *   it is not possible to identify the RTCRtpSender.\n           */\n          utils.filterStats(result, sender.track, true)\n        );\n      });\n    };\n  }\n\n  // shim receiver stats.\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    var origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n        var _this7 = this;\n\n        var receivers = origGetReceivers.apply(this, []);\n        receivers.forEach(function (receiver) {\n          return receiver._pc = _this7;\n        });\n        return receivers;\n      };\n    }\n    utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      var receiver = this;\n      return this._pc.getStats().then(function (result) {\n        return utils.filterStats(result, receiver.track, false);\n      });\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype && 'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  }\n\n  // shim RTCPeerConnection.getStats(track).\n  var origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    if (arguments.length > 0 && arguments[0] instanceof window.MediaStreamTrack) {\n      var track = arguments[0];\n      var sender = void 0;\n      var receiver = void 0;\n      var err = void 0;\n      this.getSenders().forEach(function (s) {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(function (r) {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n        return r.track === track;\n      });\n      if (err || sender && receiver) {\n        return Promise.reject(new DOMException('There are more than one sender or receiver for the track.', 'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n      return Promise.reject(new DOMException('There is no sender or receiver for the track.', 'InvalidAccessError'));\n    }\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nfunction shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n    var _this8 = this;\n\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    return Object.keys(this._shimmedLocalStreams).map(function (streamId) {\n      return _this8._shimmedLocalStreams[streamId][0];\n    });\n  };\n\n  var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\n    if (!stream) {\n      return origAddTrack.apply(this, arguments);\n    }\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    var sender = origAddTrack.apply(this, arguments);\n    if (!this._shimmedLocalStreams[stream.id]) {\n      this._shimmedLocalStreams[stream.id] = [stream, sender];\n    } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n      this._shimmedLocalStreams[stream.id].push(sender);\n    }\n    return sender;\n  };\n\n  var origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    var _this9 = this;\n\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    stream.getTracks().forEach(function (track) {\n      var alreadyExists = _this9.getSenders().find(function (s) {\n        return s.track === track;\n      });\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.', 'InvalidAccessError');\n      }\n    });\n    var existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    var newSenders = this.getSenders().filter(function (newSender) {\n      return existingSenders.indexOf(newSender) === -1;\n    });\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    delete this._shimmedLocalStreams[stream.id];\n    return origRemoveStream.apply(this, arguments);\n  };\n\n  var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n  window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\n    var _this10 = this;\n\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    if (sender) {\n      Object.keys(this._shimmedLocalStreams).forEach(function (streamId) {\n        var idx = _this10._shimmedLocalStreams[streamId].indexOf(sender);\n        if (idx !== -1) {\n          _this10._shimmedLocalStreams[streamId].splice(idx, 1);\n        }\n        if (_this10._shimmedLocalStreams[streamId].length === 1) {\n          delete _this10._shimmedLocalStreams[streamId];\n        }\n      });\n    }\n    return origRemoveTrack.apply(this, arguments);\n  };\n}\n\nfunction shimAddTrackRemoveTrack(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  var browserDetails = utils.detectBrowser(window);\n  // shim addTrack and removeTrack.\n  if (window.RTCPeerConnection.prototype.addTrack && browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  }\n\n  // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n  var origGetLocalStreams = window.RTCPeerConnection.prototype.getLocalStreams;\n  window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n    var _this11 = this;\n\n    var nativeStreams = origGetLocalStreams.apply(this);\n    this._reverseStreams = this._reverseStreams || {};\n    return nativeStreams.map(function (stream) {\n      return _this11._reverseStreams[stream.id];\n    });\n  };\n\n  var origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    var _this12 = this;\n\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    stream.getTracks().forEach(function (track) {\n      var alreadyExists = _this12.getSenders().find(function (s) {\n        return s.track === track;\n      });\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.', 'InvalidAccessError');\n      }\n    });\n    // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n    if (!this._reverseStreams[stream.id]) {\n      var newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n    origAddStream.apply(this, [stream]);\n  };\n\n  var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    origRemoveStream.apply(this, [this._streams[stream.id] || stream]);\n    delete this._reverseStreams[this._streams[stream.id] ? this._streams[stream.id].id : stream.id];\n    delete this._streams[stream.id];\n  };\n\n  window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\n    var _this13 = this;\n\n    if (this.signalingState === 'closed') {\n      throw new DOMException('The RTCPeerConnection\\'s signalingState is \\'closed\\'.', 'InvalidStateError');\n    }\n    var streams = [].slice.call(arguments, 1);\n    if (streams.length !== 1 || !streams[0].getTracks().find(function (t) {\n      return t === track;\n    })) {\n      // this is not fully correct but all we can manage without\n      // [[associated MediaStreams]] internal slot.\n      throw new DOMException('The adapter.js addTrack polyfill only supports a single ' + ' stream which is associated with the specified track.', 'NotSupportedError');\n    }\n\n    var alreadyExists = this.getSenders().find(function (s) {\n      return s.track === track;\n    });\n    if (alreadyExists) {\n      throw new DOMException('Track already exists.', 'InvalidAccessError');\n    }\n\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n    var oldStream = this._streams[stream.id];\n    if (oldStream) {\n      // this is using odd Chrome behaviour, use with caution:\n      // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n      // Note: we rely on the high-level addTrack/dtmf shim to\n      // create the sender with a dtmf sender.\n      oldStream.addTrack(track);\n\n      // Trigger ONN async.\n      Promise.resolve().then(function () {\n        _this13.dispatchEvent(new Event('negotiationneeded'));\n      });\n    } else {\n      var newStream = new window.MediaStream([track]);\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      this.addStream(newStream);\n    }\n    return this.getSenders().find(function (s) {\n      return s.track === track;\n    });\n  };\n\n  // replace the internal stream id with the external one and\n  // vice versa.\n  function replaceInternalStreamId(pc, description) {\n    var sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(function (internalId) {\n      var externalStream = pc._reverseStreams[internalId];\n      var internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'), externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp: sdp\n    });\n  }\n  function replaceExternalStreamId(pc, description) {\n    var sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(function (internalId) {\n      var externalStream = pc._reverseStreams[internalId];\n      var internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'), internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp: sdp\n    });\n  }\n  ['createOffer', 'createAnswer'].forEach(function (method) {\n    var nativeMethod = window.RTCPeerConnection.prototype[method];\n    var methodObj = _defineProperty({}, method, function () {\n      var _this14 = this;\n\n      var args = arguments;\n      var isLegacyCall = arguments.length && typeof arguments[0] === 'function';\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [function (description) {\n          var desc = replaceInternalStreamId(_this14, description);\n          args[0].apply(null, [desc]);\n        }, function (err) {\n          if (args[1]) {\n            args[1].apply(null, err);\n          }\n        }, arguments[2]]);\n      }\n      return nativeMethod.apply(this, arguments).then(function (description) {\n        return replaceInternalStreamId(_this14, description);\n      });\n    });\n    window.RTCPeerConnection.prototype[method] = methodObj[method];\n  });\n\n  var origSetLocalDescription = window.RTCPeerConnection.prototype.setLocalDescription;\n  window.RTCPeerConnection.prototype.setLocalDescription = function setLocalDescription() {\n    if (!arguments.length || !arguments[0].type) {\n      return origSetLocalDescription.apply(this, arguments);\n    }\n    arguments[0] = replaceExternalStreamId(this, arguments[0]);\n    return origSetLocalDescription.apply(this, arguments);\n  };\n\n  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n  var origLocalDescription = Object.getOwnPropertyDescriptor(window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype, 'localDescription', {\n    get: function get() {\n      var description = origLocalDescription.get.apply(this);\n      if (description.type === '') {\n        return description;\n      }\n      return replaceInternalStreamId(this, description);\n    }\n  });\n\n  window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\n    var _this15 = this;\n\n    if (this.signalingState === 'closed') {\n      throw new DOMException('The RTCPeerConnection\\'s signalingState is \\'closed\\'.', 'InvalidStateError');\n    }\n    // We can not yet check for sender instanceof RTCRtpSender\n    // since we shim RTPSender. So we check if sender._pc is set.\n    if (!sender._pc) {\n      throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' + 'does not implement interface RTCRtpSender.', 'TypeError');\n    }\n    var isLocal = sender._pc === this;\n    if (!isLocal) {\n      throw new DOMException('Sender was not created by this connection.', 'InvalidAccessError');\n    }\n\n    // Search for the native stream the senders track belongs to.\n    this._streams = this._streams || {};\n    var stream = void 0;\n    Object.keys(this._streams).forEach(function (streamid) {\n      var hasTrack = _this15._streams[streamid].getTracks().find(function (track) {\n        return sender.track === track;\n      });\n      if (hasTrack) {\n        stream = _this15._streams[streamid];\n      }\n    });\n\n    if (stream) {\n      if (stream.getTracks().length === 1) {\n        // if this is the last track of the stream, remove the stream. This\n        // takes care of any shimmed _senders.\n        this.removeStream(this._reverseStreams[stream.id]);\n      } else {\n        // relying on the same odd chrome behaviour as above.\n        stream.removeTrack(sender.track);\n      }\n      this.dispatchEvent(new Event('negotiationneeded'));\n    }\n  };\n}\n\nfunction shimPeerConnection(window) {\n  var browserDetails = utils.detectBrowser(window);\n\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  var addIceCandidateNullSupported = window.RTCPeerConnection.prototype.addIceCandidate.length === 0;\n\n  // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n  if (browserDetails.version < 53) {\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'].forEach(function (method) {\n      var nativeMethod = window.RTCPeerConnection.prototype[method];\n      var methodObj = _defineProperty({}, method, function () {\n        arguments[0] = new (method === 'addIceCandidate' ? window.RTCIceCandidate : window.RTCSessionDescription)(arguments[0]);\n        return nativeMethod.apply(this, arguments);\n      });\n      window.RTCPeerConnection.prototype[method] = methodObj[method];\n    });\n  }\n\n  // support for addIceCandidate(null or undefined)\n  var nativeAddIceCandidate = window.RTCPeerConnection.prototype.addIceCandidate;\n  window.RTCPeerConnection.prototype.addIceCandidate = function addIceCandidate() {\n    if (!addIceCandidateNullSupported && !arguments[0]) {\n      if (arguments[1]) {\n        arguments[1].apply(null);\n      }\n      return Promise.resolve();\n    }\n    // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n    // in older versions. Native support planned for Chrome M77.\n    if (browserDetails.version < 78 && arguments[0] && arguments[0].candidate === '') {\n      return Promise.resolve();\n    }\n    return nativeAddIceCandidate.apply(this, arguments);\n  };\n}\n\n// Attempt to fix ONN in plan-b mode.\nfunction fixNegotiationNeeded(window) {\n  var browserDetails = utils.detectBrowser(window);\n  utils.wrapPeerConnectionEvent(window, 'negotiationneeded', function (e) {\n    var pc = e.target;\n    if (browserDetails.version < 72 || pc.getConfiguration && pc.getConfiguration().sdpSemantics === 'plan-b') {\n      if (pc.signalingState !== 'stable') {\n        return;\n      }\n    }\n    return e;\n  });\n}\n\n},{\"../utils.js\":11,\"./getdisplaymedia\":4,\"./getusermedia\":5}],4:[function(require,module,exports){\n/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetDisplayMedia = shimGetDisplayMedia;\nfunction shimGetDisplayMedia(window, getSourceId) {\n  if (window.navigator.mediaDevices && 'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!window.navigator.mediaDevices) {\n    return;\n  }\n  // getSourceId is a function that returns a promise resolving with\n  // the sourceId of the screen/window/tab to be shared.\n  if (typeof getSourceId !== 'function') {\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' + 'a function');\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia = function getDisplayMedia(constraints) {\n    return getSourceId(constraints).then(function (sourceId) {\n      var widthSpecified = constraints.video && constraints.video.width;\n      var heightSpecified = constraints.video && constraints.video.height;\n      var frameRateSpecified = constraints.video && constraints.video.frameRate;\n      constraints.video = {\n        mandatory: {\n          chromeMediaSource: 'desktop',\n          chromeMediaSourceId: sourceId,\n          maxFrameRate: frameRateSpecified || 3\n        }\n      };\n      if (widthSpecified) {\n        constraints.video.mandatory.maxWidth = widthSpecified;\n      }\n      if (heightSpecified) {\n        constraints.video.mandatory.maxHeight = heightSpecified;\n      }\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    });\n  };\n}\n\n},{}],5:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.shimGetUserMedia = shimGetUserMedia;\n\nvar _utils = require('../utils.js');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar logging = utils.log;\n\nfunction shimGetUserMedia(window) {\n  var navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  var browserDetails = utils.detectBrowser(window);\n\n  var constraintsToChrome_ = function constraintsToChrome_(c) {\n    if ((typeof c === 'undefined' ? 'undefined' : _typeof(c)) !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    var cc = {};\n    Object.keys(c).forEach(function (key) {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      var r = _typeof(c[key]) === 'object' ? c[key] : { ideal: c[key] };\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      var oldname_ = function oldname_(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return name === 'deviceId' ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        var oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(function (mix) {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  var shimConstraints_ = function shimConstraints_(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && _typeof(constraints.audio) === 'object') {\n      var remap = function remap(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && _typeof(constraints.video) === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      var face = constraints.video.facingMode;\n      face = face && ((typeof face === 'undefined' ? 'undefined' : _typeof(face)) === 'object' ? face : { ideal: face });\n      var getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if (face && (face.exact === 'user' || face.exact === 'environment' || face.ideal === 'user' || face.ideal === 'environment') && !(navigator.mediaDevices.getSupportedConstraints && navigator.mediaDevices.getSupportedConstraints().facingMode && !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        var matches = void 0;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices().then(function (devices) {\n            devices = devices.filter(function (d) {\n              return d.kind === 'videoinput';\n            });\n            var dev = devices.find(function (d) {\n              return matches.some(function (match) {\n                return d.label.toLowerCase().includes(match);\n              });\n            });\n            if (!dev && devices.length && matches.includes('back')) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? { exact: dev.deviceId } : { ideal: dev.deviceId };\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  var shimError_ = function shimError_(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString: function toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  var getUserMedia_ = function getUserMedia_(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, function (c) {\n      navigator.webkitGetUserMedia(c, onSuccess, function (e) {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  if (navigator.mediaDevices.getUserMedia) {\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function (cs) {\n      return shimConstraints_(cs, function (c) {\n        return origGetUserMedia(c).then(function (stream) {\n          if (c.audio && !stream.getAudioTracks().length || c.video && !stream.getVideoTracks().length) {\n            stream.getTracks().forEach(function (track) {\n              track.stop();\n            });\n            throw new DOMException('', 'NotFoundError');\n          }\n          return stream;\n        }, function (e) {\n          return Promise.reject(shimError_(e));\n        });\n      });\n    };\n  }\n}\n\n},{\"../utils.js\":11}],6:[function(require,module,exports){\n/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.shimRTCIceCandidate = shimRTCIceCandidate;\nexports.shimMaxMessageSize = shimMaxMessageSize;\nexports.shimSendThrowTypeError = shimSendThrowTypeError;\nexports.shimConnectionState = shimConnectionState;\nexports.removeAllowExtmapMixed = removeAllowExtmapMixed;\n\nvar _sdp = require('sdp');\n\nvar _sdp2 = _interopRequireDefault(_sdp);\n\nvar _utils = require('./utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || window.RTCIceCandidate && 'foundation' in window.RTCIceCandidate.prototype) {\n    return;\n  }\n\n  var NativeRTCIceCandidate = window.RTCIceCandidate;\n  window.RTCIceCandidate = function RTCIceCandidate(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if ((typeof args === 'undefined' ? 'undefined' : _typeof(args)) === 'object' && args.candidate && args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substr(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      var nativeCandidate = new NativeRTCIceCandidate(args);\n      var parsedCandidate = _sdp2.default.parseCandidate(args.candidate);\n      var augmentedCandidate = Object.assign(nativeCandidate, parsedCandidate);\n\n      // Add a serializer that does not serialize the extra attributes.\n      augmentedCandidate.toJSON = function toJSON() {\n        return {\n          candidate: augmentedCandidate.candidate,\n          sdpMid: augmentedCandidate.sdpMid,\n          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n          usernameFragment: augmentedCandidate.usernameFragment\n        };\n      };\n      return augmentedCandidate;\n    }\n    return new NativeRTCIceCandidate(args);\n  };\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', function (e) {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n    return e;\n  });\n}\n\nfunction shimMaxMessageSize(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  var browserDetails = utils.detectBrowser(window);\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get: function get() {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  var sctpInDescription = function sctpInDescription(description) {\n    if (!description || !description.sdp) {\n      return false;\n    }\n    var sections = _sdp2.default.splitSections(description.sdp);\n    sections.shift();\n    return sections.some(function (mediaSection) {\n      var mLine = _sdp2.default.parseMLine(mediaSection);\n      return mLine && mLine.kind === 'application' && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  var getRemoteFirefoxVersion = function getRemoteFirefoxVersion(description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    var match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n    var version = parseInt(match[1], 10);\n    // Test for NaN (yes, this is ugly)\n    return version !== version ? -1 : version;\n  };\n\n  var getCanSendMaxMessageSize = function getCanSendMaxMessageSize(remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    var canSendMaxMessageSize = 65536;\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize = browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n    return canSendMaxMessageSize;\n  };\n\n  var getMaxMessageSize = function getMaxMessageSize(description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    var maxMessageSize = 65536;\n\n    // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n    if (browserDetails.browser === 'firefox' && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    var match = _sdp2.default.matchPrefix(description.sdp, 'a=max-message-size:');\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substr(19), 10);\n    } else if (browserDetails.browser === 'firefox' && remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n    return maxMessageSize;\n  };\n\n  var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n    this._sctp = null;\n    // Chrome decided to not expose .sctp in plan-b mode.\n    // As usual, adapter.js has to do an 'ugly worakaround'\n    // to cover up the mess.\n    if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n      var _getConfiguration = this.getConfiguration(),\n          sdpSemantics = _getConfiguration.sdpSemantics;\n\n      if (sdpSemantics === 'plan-b') {\n        Object.defineProperty(this, 'sctp', {\n          get: function get() {\n            return typeof this._sctp === 'undefined' ? null : this._sctp;\n          },\n\n          enumerable: true,\n          configurable: true\n        });\n      }\n    }\n\n    if (sctpInDescription(arguments[0])) {\n      // Check if the remote is FF.\n      var isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n      // Get the maximum message size the local peer is capable of sending\n      var canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n      // Get the maximum message size of the remote peer.\n      var remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n      // Determine final maximum message size\n      var maxMessageSize = void 0;\n      if (canSendMMS === 0 && remoteMMS === 0) {\n        maxMessageSize = Number.POSITIVE_INFINITY;\n      } else if (canSendMMS === 0 || remoteMMS === 0) {\n        maxMessageSize = Math.max(canSendMMS, remoteMMS);\n      } else {\n        maxMessageSize = Math.min(canSendMMS, remoteMMS);\n      }\n\n      // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n      // attribute.\n      var sctp = {};\n      Object.defineProperty(sctp, 'maxMessageSize', {\n        get: function get() {\n          return maxMessageSize;\n        }\n      });\n      this._sctp = sctp;\n    }\n\n    return origSetRemoteDescription.apply(this, arguments);\n  };\n}\n\nfunction shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection && 'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  }\n\n  // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n  function wrapDcSend(dc, pc) {\n    var origDataChannelSend = dc.send;\n    dc.send = function send() {\n      var data = arguments[0];\n      var length = data.length || data.size || data.byteLength;\n      if (dc.readyState === 'open' && pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' + pc.sctp.maxMessageSize + ' bytes)');\n      }\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n  var origCreateDataChannel = window.RTCPeerConnection.prototype.createDataChannel;\n  window.RTCPeerConnection.prototype.createDataChannel = function createDataChannel() {\n    var dataChannel = origCreateDataChannel.apply(this, arguments);\n    wrapDcSend(dataChannel, this);\n    return dataChannel;\n  };\n  utils.wrapPeerConnectionEvent(window, 'datachannel', function (e) {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\nfunction shimConnectionState(window) {\n  if (!window.RTCPeerConnection || 'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  var proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get: function get() {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get: function get() {\n      return this._onconnectionstatechange || null;\n    },\n    set: function set(cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange', this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n      if (cb) {\n        this.addEventListener('connectionstatechange', this._onconnectionstatechange = cb);\n      }\n    },\n\n    enumerable: true,\n    configurable: true\n  });\n\n  ['setLocalDescription', 'setRemoteDescription'].forEach(function (method) {\n    var origMethod = proto[method];\n    proto[method] = function () {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = function (e) {\n          var pc = e.target;\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            var newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n          return e;\n        };\n        this.addEventListener('iceconnectionstatechange', this._connectionstatechangepoly);\n      }\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n\nfunction removeAllowExtmapMixed(window) {\n  /* remove a=extmap-allow-mixed for webrtc.org < M71 */\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  var browserDetails = utils.detectBrowser(window);\n  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n    return;\n  }\n  if (browserDetails.browser === 'safari' && browserDetails.version >= 605) {\n    return;\n  }\n  var nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription(desc) {\n    if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n      desc.sdp = desc.sdp.split('\\n').filter(function (line) {\n        return line.trim() !== 'a=extmap-allow-mixed';\n      }).join('\\n');\n    }\n    return nativeSRD.apply(this, arguments);\n  };\n}\n\n},{\"./utils\":11,\"sdp\":13}],7:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetDisplayMedia = exports.shimGetUserMedia = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _getusermedia = require('./getusermedia');\n\nObject.defineProperty(exports, 'shimGetUserMedia', {\n  enumerable: true,\n  get: function get() {\n    return _getusermedia.shimGetUserMedia;\n  }\n});\n\nvar _getdisplaymedia = require('./getdisplaymedia');\n\nObject.defineProperty(exports, 'shimGetDisplayMedia', {\n  enumerable: true,\n  get: function get() {\n    return _getdisplaymedia.shimGetDisplayMedia;\n  }\n});\nexports.shimOnTrack = shimOnTrack;\nexports.shimPeerConnection = shimPeerConnection;\nexports.shimSenderGetStats = shimSenderGetStats;\nexports.shimReceiverGetStats = shimReceiverGetStats;\nexports.shimRemoveStream = shimRemoveStream;\nexports.shimRTCDataChannel = shimRTCDataChannel;\nexports.shimAddTransceiver = shimAddTransceiver;\nexports.shimGetParameters = shimGetParameters;\nexports.shimCreateOffer = shimCreateOffer;\nexports.shimCreateAnswer = shimCreateAnswer;\n\nvar _utils = require('../utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction shimOnTrack(window) {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCTrackEvent && 'receiver' in window.RTCTrackEvent.prototype && !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get: function get() {\n        return { receiver: this.receiver };\n      }\n    });\n  }\n}\n\nfunction shimPeerConnection(window) {\n  var browserDetails = utils.detectBrowser(window);\n\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  if (browserDetails.version < 53) {\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'].forEach(function (method) {\n      var nativeMethod = window.RTCPeerConnection.prototype[method];\n      var methodObj = _defineProperty({}, method, function () {\n        arguments[0] = new (method === 'addIceCandidate' ? window.RTCIceCandidate : window.RTCSessionDescription)(arguments[0]);\n        return nativeMethod.apply(this, arguments);\n      });\n      window.RTCPeerConnection.prototype[method] = methodObj[method];\n    });\n  }\n\n  // support for addIceCandidate(null or undefined)\n  // as well as ignoring {sdpMid, candidate: \"\"}\n  if (browserDetails.version < 68) {\n    var nativeAddIceCandidate = window.RTCPeerConnection.prototype.addIceCandidate;\n    window.RTCPeerConnection.prototype.addIceCandidate = function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n      if (arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n  }\n\n  var modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n\n  var nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    var _arguments = Array.prototype.slice.call(arguments),\n        selector = _arguments[0],\n        onSucc = _arguments[1],\n        onErr = _arguments[2];\n\n    return nativeGetStats.apply(this, [selector || null]).then(function (stats) {\n      if (browserDetails.version < 53 && !onSucc) {\n        // Shim only promise getStats with spec-hyphens in type names\n        // Leave callback version alone; misc old uses of forEach before Map\n        try {\n          stats.forEach(function (stat) {\n            stat.type = modernStatsTypes[stat.type] || stat.type;\n          });\n        } catch (e) {\n          if (e.name !== 'TypeError') {\n            throw e;\n          }\n          // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n          stats.forEach(function (stat, i) {\n            stats.set(i, Object.assign({}, stat, {\n              type: modernStatsTypes[stat.type] || stat.type\n            }));\n          });\n        }\n      }\n      return stats;\n    }).then(onSucc, onErr);\n  };\n}\n\nfunction shimSenderGetStats(window) {\n  if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      var _this = this;\n\n      var senders = origGetSenders.apply(this, []);\n      senders.forEach(function (sender) {\n        return sender._pc = _this;\n      });\n      return senders;\n    };\n  }\n\n  var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n      var sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function getStats() {\n    return this.track ? this._pc.getStats(this.track) : Promise.resolve(new Map());\n  };\n}\n\nfunction shimReceiverGetStats(window) {\n  if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  var origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n      var _this2 = this;\n\n      var receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(function (receiver) {\n        return receiver._pc = _this2;\n      });\n      return receivers;\n    };\n  }\n  utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function getStats() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nfunction shimRemoveStream(window) {\n  if (!window.RTCPeerConnection || 'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n    var _this3 = this;\n\n    utils.deprecated('removeStream', 'removeTrack');\n    this.getSenders().forEach(function (sender) {\n      if (sender.track && stream.getTracks().includes(sender.track)) {\n        _this3.removeTrack(sender);\n      }\n    });\n  };\n}\n\nfunction shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n\nfunction shimAddTransceiver(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  var origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n  if (origAddTransceiver) {\n    window.RTCPeerConnection.prototype.addTransceiver = function addTransceiver() {\n      this.setParametersPromises = [];\n      var initParameters = arguments[1];\n      var shouldPerformCheck = initParameters && 'sendEncodings' in initParameters;\n      if (shouldPerformCheck) {\n        // If sendEncodings params are provided, validate grammar\n        initParameters.sendEncodings.forEach(function (encodingParam) {\n          if ('rid' in encodingParam) {\n            var ridRegex = /^[a-z0-9]{0,16}$/i;\n            if (!ridRegex.test(encodingParam.rid)) {\n              throw new TypeError('Invalid RID value provided.');\n            }\n          }\n          if ('scaleResolutionDownBy' in encodingParam) {\n            if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n              throw new RangeError('scale_resolution_down_by must be >= 1.0');\n            }\n          }\n          if ('maxFramerate' in encodingParam) {\n            if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n              throw new RangeError('max_framerate must be >= 0.0');\n            }\n          }\n        });\n      }\n      var transceiver = origAddTransceiver.apply(this, arguments);\n      if (shouldPerformCheck) {\n        // Check if the init options were applied. If not we do this in an\n        // asynchronous way and save the promise reference in a global object.\n        // This is an ugly hack, but at the same time is way more robust than\n        // checking the sender parameters before and after the createOffer\n        // Also note that after the createoffer we are not 100% sure that\n        // the params were asynchronously applied so we might miss the\n        // opportunity to recreate offer.\n        var sender = transceiver.sender;\n\n        var params = sender.getParameters();\n        if (!('encodings' in params) ||\n        // Avoid being fooled by patched getParameters() below.\n        params.encodings.length === 1 && Object.keys(params.encodings[0]).length === 0) {\n          params.encodings = initParameters.sendEncodings;\n          sender.sendEncodings = initParameters.sendEncodings;\n          this.setParametersPromises.push(sender.setParameters(params).then(function () {\n            delete sender.sendEncodings;\n          }).catch(function () {\n            delete sender.sendEncodings;\n          }));\n        }\n      }\n      return transceiver;\n    };\n  }\n}\n\nfunction shimGetParameters(window) {\n  if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCRtpSender)) {\n    return;\n  }\n  var origGetParameters = window.RTCRtpSender.prototype.getParameters;\n  if (origGetParameters) {\n    window.RTCRtpSender.prototype.getParameters = function getParameters() {\n      var params = origGetParameters.apply(this, arguments);\n      if (!('encodings' in params)) {\n        params.encodings = [].concat(this.sendEncodings || [{}]);\n      }\n      return params;\n    };\n  }\n}\n\nfunction shimCreateOffer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n    var _this4 = this,\n        _arguments2 = arguments;\n\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises).then(function () {\n        return origCreateOffer.apply(_this4, _arguments2);\n      }).finally(function () {\n        _this4.setParametersPromises = [];\n      });\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\nfunction shimCreateAnswer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  var origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n    var _this5 = this,\n        _arguments3 = arguments;\n\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises).then(function () {\n        return origCreateAnswer.apply(_this5, _arguments3);\n      }).finally(function () {\n        _this5.setParametersPromises = [];\n      });\n    }\n    return origCreateAnswer.apply(this, arguments);\n  };\n}\n\n},{\"../utils\":11,\"./getdisplaymedia\":8,\"./getusermedia\":9}],8:[function(require,module,exports){\n/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetDisplayMedia = shimGetDisplayMedia;\nfunction shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices && 'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!window.navigator.mediaDevices) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia = function getDisplayMedia(constraints) {\n    if (!(constraints && constraints.video)) {\n      var err = new DOMException('getDisplayMedia without video ' + 'constraints is undefined');\n      err.name = 'NotFoundError';\n      // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n      err.code = 8;\n      return Promise.reject(err);\n    }\n    if (constraints.video === true) {\n      constraints.video = { mediaSource: preferredMediaSource };\n    } else {\n      constraints.video.mediaSource = preferredMediaSource;\n    }\n    return window.navigator.mediaDevices.getUserMedia(constraints);\n  };\n}\n\n},{}],9:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.shimGetUserMedia = shimGetUserMedia;\n\nvar _utils = require('../utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction shimGetUserMedia(window) {\n  var browserDetails = utils.detectBrowser(window);\n  var navigator = window && window.navigator;\n  var MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function (constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia', 'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 && 'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    var remap = function remap(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function (c) {\n      if ((typeof c === 'undefined' ? 'undefined' : _typeof(c)) === 'object' && _typeof(c.audio) === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function () {\n        var obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      var nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function (c) {\n        if (this.kind === 'audio' && (typeof c === 'undefined' ? 'undefined' : _typeof(c)) === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n\n},{\"../utils\":11}],10:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.shimLocalStreamsAPI = shimLocalStreamsAPI;\nexports.shimRemoteStreamsAPI = shimRemoteStreamsAPI;\nexports.shimCallbacksAPI = shimCallbacksAPI;\nexports.shimGetUserMedia = shimGetUserMedia;\nexports.shimConstraints = shimConstraints;\nexports.shimRTCIceServerUrls = shimRTCIceServerUrls;\nexports.shimTrackEventTransceiver = shimTrackEventTransceiver;\nexports.shimCreateOfferLegacy = shimCreateOfferLegacy;\nexports.shimAudioContext = shimAudioContext;\n\nvar _utils = require('../utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction shimLocalStreamsAPI(window) {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      return this._localStreams;\n    };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    var _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      var _this = this;\n\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(function (track) {\n        return _addTrack.call(_this, track, stream);\n      });\n      stream.getVideoTracks().forEach(function (track) {\n        return _addTrack.call(_this, track, stream);\n      });\n    };\n\n    window.RTCPeerConnection.prototype.addTrack = function addTrack(track) {\n      var _this2 = this;\n\n      for (var _len = arguments.length, streams = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        streams[_key - 1] = arguments[_key];\n      }\n\n      if (streams) {\n        streams.forEach(function (stream) {\n          if (!_this2._localStreams) {\n            _this2._localStreams = [stream];\n          } else if (!_this2._localStreams.includes(stream)) {\n            _this2._localStreams.push(stream);\n          }\n        });\n      }\n      return _addTrack.apply(this, arguments);\n    };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n      var _this3 = this;\n\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      var index = this._localStreams.indexOf(stream);\n      if (index === -1) {\n        return;\n      }\n      this._localStreams.splice(index, 1);\n      var tracks = stream.getTracks();\n      this.getSenders().forEach(function (sender) {\n        if (tracks.includes(sender.track)) {\n          _this3.removeTrack(sender);\n        }\n      });\n    };\n  }\n}\n\nfunction shimRemoteStreamsAPI(window) {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams = function getRemoteStreams() {\n      return this._remoteStreams ? this._remoteStreams : [];\n    };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get: function get() {\n        return this._onaddstream;\n      },\n      set: function set(f) {\n        var _this4 = this;\n\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = function (e) {\n          e.streams.forEach(function (stream) {\n            if (!_this4._remoteStreams) {\n              _this4._remoteStreams = [];\n            }\n            if (_this4._remoteStreams.includes(stream)) {\n              return;\n            }\n            _this4._remoteStreams.push(stream);\n            var event = new Event('addstream');\n            event.stream = stream;\n            _this4.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n      var pc = this;\n      if (!this._onaddstreampoly) {\n        this.addEventListener('track', this._onaddstreampoly = function (e) {\n          e.streams.forEach(function (stream) {\n            if (!pc._remoteStreams) {\n              pc._remoteStreams = [];\n            }\n            if (pc._remoteStreams.indexOf(stream) >= 0) {\n              return;\n            }\n            pc._remoteStreams.push(stream);\n            var event = new Event('addstream');\n            event.stream = stream;\n            pc.dispatchEvent(event);\n          });\n        });\n      }\n      return origSetRemoteDescription.apply(pc, arguments);\n    };\n  }\n}\n\nfunction shimCallbacksAPI(window) {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  var prototype = window.RTCPeerConnection.prototype;\n  var origCreateOffer = prototype.createOffer;\n  var origCreateAnswer = prototype.createAnswer;\n  var setLocalDescription = prototype.setLocalDescription;\n  var setRemoteDescription = prototype.setRemoteDescription;\n  var addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer = function createOffer(successCallback, failureCallback) {\n    var options = arguments.length >= 2 ? arguments[2] : arguments[0];\n    var promise = origCreateOffer.apply(this, [options]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  prototype.createAnswer = function createAnswer(successCallback, failureCallback) {\n    var options = arguments.length >= 2 ? arguments[2] : arguments[0];\n    var promise = origCreateAnswer.apply(this, [options]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  var withCallback = function withCallback(description, successCallback, failureCallback) {\n    var promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function withCallback(description, successCallback, failureCallback) {\n    var promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function withCallback(candidate, successCallback, failureCallback) {\n    var promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nfunction shimGetUserMedia(window) {\n  var navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    var mediaDevices = navigator.mediaDevices;\n    var _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = function (constraints) {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints).then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nfunction shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({}, constraints, { video: utils.compactObject(constraints.video) });\n  }\n\n  return constraints;\n}\n\nfunction shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  var OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection = function RTCPeerConnection(pcConfig, pcConstraints) {\n    if (pcConfig && pcConfig.iceServers) {\n      var newIceServers = [];\n      for (var i = 0; i < pcConfig.iceServers.length; i++) {\n        var server = pcConfig.iceServers[i];\n        if (!server.hasOwnProperty('urls') && server.hasOwnProperty('url')) {\n          utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n          server = JSON.parse(JSON.stringify(server));\n          server.urls = server.url;\n          delete server.url;\n          newIceServers.push(server);\n        } else {\n          newIceServers.push(pcConfig.iceServers[i]);\n        }\n      }\n      pcConfig.iceServers = newIceServers;\n    }\n    return new OrigPeerConnection(pcConfig, pcConstraints);\n  };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get: function get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nfunction shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCTrackEvent && 'receiver' in window.RTCTrackEvent.prototype && !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get: function get() {\n        return { receiver: this.receiver };\n      }\n    });\n  }\n}\n\nfunction shimCreateOfferLegacy(window) {\n  var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer(offerOptions) {\n    if (offerOptions) {\n      if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveAudio = !!offerOptions.offerToReceiveAudio;\n      }\n      var audioTransceiver = this.getTransceivers().find(function (transceiver) {\n        return transceiver.receiver.track.kind === 'audio';\n      });\n      if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n        if (audioTransceiver.direction === 'sendrecv') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('sendonly');\n          } else {\n            audioTransceiver.direction = 'sendonly';\n          }\n        } else if (audioTransceiver.direction === 'recvonly') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('inactive');\n          } else {\n            audioTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveAudio === true && !audioTransceiver) {\n        this.addTransceiver('audio');\n      }\n\n      if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveVideo = !!offerOptions.offerToReceiveVideo;\n      }\n      var videoTransceiver = this.getTransceivers().find(function (transceiver) {\n        return transceiver.receiver.track.kind === 'video';\n      });\n      if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n        if (videoTransceiver.direction === 'sendrecv') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('sendonly');\n          } else {\n            videoTransceiver.direction = 'sendonly';\n          }\n        } else if (videoTransceiver.direction === 'recvonly') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('inactive');\n          } else {\n            videoTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveVideo === true && !videoTransceiver) {\n        this.addTransceiver('video');\n      }\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\nfunction shimAudioContext(window) {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || window.AudioContext) {\n    return;\n  }\n  window.AudioContext = window.webkitAudioContext;\n}\n\n},{\"../utils\":11}],11:[function(require,module,exports){\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.extractVersion = extractVersion;\nexports.wrapPeerConnectionEvent = wrapPeerConnectionEvent;\nexports.disableLog = disableLog;\nexports.disableWarnings = disableWarnings;\nexports.log = log;\nexports.deprecated = deprecated;\nexports.detectBrowser = detectBrowser;\nexports.compactObject = compactObject;\nexports.walkStats = walkStats;\nexports.filterStats = filterStats;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar logDisabled_ = true;\nvar deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nfunction extractVersion(uastring, expr, pos) {\n  var match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nfunction wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  var proto = window.RTCPeerConnection.prototype;\n  var nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function (nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    var wrappedCallback = function wrappedCallback(e) {\n      var modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        if (cb.handleEvent) {\n          cb.handleEvent(modifiedEvent);\n        } else {\n          cb(modifiedEvent);\n        }\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    if (!this._eventMap[eventNameToWrap]) {\n      this._eventMap[eventNameToWrap] = new Map();\n    }\n    this._eventMap[eventNameToWrap].set(cb, wrappedCallback);\n    return nativeAddEventListener.apply(this, [nativeEventName, wrappedCallback]);\n  };\n\n  var nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function (nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap || !this._eventMap[eventNameToWrap]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    if (!this._eventMap[eventNameToWrap].has(cb)) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    var unwrappedCb = this._eventMap[eventNameToWrap].get(cb);\n    this._eventMap[eventNameToWrap].delete(cb);\n    if (this._eventMap[eventNameToWrap].size === 0) {\n      delete this._eventMap[eventNameToWrap];\n    }\n    if (Object.keys(this._eventMap).length === 0) {\n      delete this._eventMap;\n    }\n    return nativeRemoveEventListener.apply(this, [nativeEventName, unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get: function get() {\n      return this['_on' + eventNameToWrap];\n    },\n    set: function set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap, this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap, this['_on' + eventNameToWrap] = cb);\n      }\n    },\n\n    enumerable: true,\n    configurable: true\n  });\n}\n\nfunction disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + (typeof bool === 'undefined' ? 'undefined' : _typeof(bool)) + '. Please use a boolean.');\n  }\n  logDisabled_ = bool;\n  return bool ? 'adapter.js logging disabled' : 'adapter.js logging enabled';\n}\n\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\nfunction disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + (typeof bool === 'undefined' ? 'undefined' : _typeof(bool)) + '. Please use a boolean.');\n  }\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nfunction log() {\n  if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\nfunction deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod + ' instead.');\n}\n\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\nfunction detectBrowser(window) {\n  // Returned result object.\n  var result = { browser: null, version: null };\n\n  // Fail early if it's not a browser\n  if (typeof window === 'undefined' || !window.navigator) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  var navigator = window.navigator;\n\n\n  if (navigator.mozGetUserMedia) {\n    // Firefox.\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent, /Firefox\\/(\\d+)\\./, 1);\n  } else if (navigator.webkitGetUserMedia || window.isSecureContext === false && window.webkitRTCPeerConnection && !window.RTCIceGatherer) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n    // more complicated fallback to webkitRTCPeerConnection.\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent, /Chrom(e|ium)\\/(\\d+)\\./, 2);\n  } else if (navigator.mediaDevices && navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) {\n    // Edge.\n    result.browser = 'edge';\n    result.version = extractVersion(navigator.userAgent, /Edge\\/(\\d+).(\\d+)$/, 2);\n  } else if (window.RTCPeerConnection && navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) {\n    // Safari.\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent, /AppleWebKit\\/(\\d+)\\./, 1);\n    result.supportsUnifiedPlan = window.RTCRtpTransceiver && 'currentDirection' in window.RTCRtpTransceiver.prototype;\n  } else {\n    // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n\n/**\n * Checks if something is an object.\n *\n * @param {*} val The something you want to check.\n * @return true if val is an object, false otherwise.\n */\nfunction isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\nfunction compactObject(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function (accumulator, key) {\n    var isObj = isObject(data[key]);\n    var value = isObj ? compactObject(data[key]) : data[key];\n    var isEmptyObject = isObj && !Object.keys(value).length;\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n    return Object.assign(accumulator, _defineProperty({}, key, value));\n  }, {});\n}\n\n/* iterates the stats graph recursively. */\nfunction walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(function (name) {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(function (id) {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nfunction filterStats(result, track, outbound) {\n  var streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  var filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  var trackStats = [];\n  result.forEach(function (value) {\n    if (value.type === 'track' && value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(function (trackStat) {\n    result.forEach(function (stats) {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\n},{}],12:[function(require,module,exports){\n\n},{}],13:[function(require,module,exports){\n/* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// returns the session description.\nSDPUtils.getDescription = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parseInt(parts[1], 10),\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compability.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag\n        candidate[parts[i]] = parts[i + 1];\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n};\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  var channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n        ? '/' + headerExtension.direction\n        : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      if (codec.parameters[param]) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\nSDPUtils.parseSsrcGroup = function(line) {\n  var parts = line.substr(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(function(ssrc) {\n      return parseInt(ssrc, 10);\n    })\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n};\n\nSDPUtils.parseFingerprint = function(line) {\n  var parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1]\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  // Note2: 'algorithm' is not case sensitive except in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n\n// Parses a=crypto lines into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members\nSDPUtils.parseCryptoLine = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    tag: parseInt(parts[0], 10),\n    cryptoSuite: parts[1],\n    keyParams: parts[2],\n    sessionParams: parts.slice(3),\n  };\n};\n\nSDPUtils.writeCryptoLine = function(parameters) {\n  return 'a=crypto:' + parameters.tag + ' ' +\n    parameters.cryptoSuite + ' ' +\n    (typeof parameters.keyParams === 'object'\n      ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)\n      : parameters.keyParams) +\n    (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') +\n    '\\r\\n';\n};\n\n// Parses the crypto key parameters into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*\nSDPUtils.parseCryptoKeyParams = function(keyParams) {\n  if (keyParams.indexOf('inline:') !== 0) {\n    return null;\n  }\n  var parts = keyParams.substr(7).split('|');\n  return {\n    keyMethod: 'inline',\n    keySalt: parts[0],\n    lifeTime: parts[1],\n    mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,\n    mkiLength: parts[2] ? parts[2].split(':')[1] : undefined,\n  };\n};\n\nSDPUtils.writeCryptoKeyParams = function(keyParams) {\n  return keyParams.keyMethod + ':'\n    + keyParams.keySalt +\n    (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') +\n    (keyParams.mkiValue && keyParams.mkiLength\n      ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength\n      : '');\n};\n\n// Extracts all SDES paramters.\nSDPUtils.getCryptoParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=crypto:');\n  return lines.map(SDPUtils.parseCryptoLine);\n};\n\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-ufrag:')[0];\n  var pwd = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-pwd:')[0];\n  if (!(ufrag && pwd)) {\n    return null;\n  }\n  return {\n    usernameFragment: ufrag.substr(12),\n    password: pwd.substr(10),\n  };\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n      mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n        mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(function(extension) {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(parts) {\n      return parts.attribute === 'cname';\n    });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n    .map(function(line) {\n      var parts = line.substr(17).split(' ');\n      return parts.map(function(part) {\n        return parseInt(part, 10);\n      });\n    });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10)\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  // Gets the first SSRC. Note tha with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(obj) {\n      return obj.attribute === 'cname';\n    })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrіbute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(msidParts) {\n      return msidParts.attribute === 'msid';\n    });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// SCTP\n// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n// to draft-ietf-mmusic-sctp-sdp-05\nSDPUtils.parseSctpDescription = function(mediaSection) {\n  var mline = SDPUtils.parseMLine(mediaSection);\n  var maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n  var maxMessageSize;\n  if (maxSizeLine.length > 0) {\n    maxMessageSize = parseInt(maxSizeLine[0].substr(19), 10);\n  }\n  if (isNaN(maxMessageSize)) {\n    maxMessageSize = 65536;\n  }\n  var sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n  if (sctpPort.length > 0) {\n    return {\n      port: parseInt(sctpPort[0].substr(12), 10),\n      protocol: mline.fmt,\n      maxMessageSize: maxMessageSize\n    };\n  }\n  var sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n  if (sctpMapLines.length > 0) {\n    var parts = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:')[0]\n      .substr(10)\n      .split(' ');\n    return {\n      port: parseInt(parts[0], 10),\n      protocol: parts[1],\n      maxMessageSize: maxMessageSize\n    };\n  }\n};\n\n// SCTP\n// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n// support by now receiving in this format, unless we originally parsed\n// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n// protocol of DTLS/SCTP -- without UDP/ or TCP/)\nSDPUtils.writeSctpDescription = function(media, sctp) {\n  var output = [];\n  if (media.protocol !== 'DTLS/SCTP') {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctp-port:' + sctp.port + '\\r\\n'\n    ];\n  } else {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n'\n    ];\n  }\n  if (sctp.maxMessageSize !== undefined) {\n    output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n  }\n  return output.join('');\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 21);\n};\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  var sessionId;\n  var version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  var user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n    transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n    transceiver.dtlsTransport.getLocalParameters(),\n    type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var parts = lines[0].substr(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' ')\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  var parts = line.substr(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5]\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  var lines = SDPUtils.splitLines(blob);\n  for (var i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n\n},{}]},{},[1])(1)\n});\n","'use strict';\nconst strictUriEncode = require('strict-uri-encode');\nconst decodeComponent = require('decode-uri-component');\nconst splitOnFirst = require('split-on-first');\n\nconst isNullOrUndefined = value => value === null || value === undefined;\n\nfunction encoderForArrayFormat(options) {\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tconst index = result.length;\n\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[', index, ']'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '[', encode(index, options), ']=', encode(value, options)].join('')\n\t\t\t\t];\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[]'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '[]=', encode(value, options)].join('')];\n\t\t\t};\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (value === null || value === undefined || value.length === 0) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (result.length === 0) {\n\t\t\t\t\treturn [[encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [[result, encode(value, options)].join(options.arrayFormatSeparator)];\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, encode(key, options)];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(options) {\n\tlet result;\n\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = typeof value === 'string' && value.split('').indexOf(options.arrayFormatSeparator) > -1;\n\t\t\t\tconst newValue = isArray ? value.split(options.arrayFormatSeparator).map(item => decode(item, options)) : value === null ? value : decode(value, options);\n\t\t\t\taccumulator[key] = newValue;\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction validateArrayFormatSeparator(value) {\n\tif (typeof value !== 'string' || value.length !== 1) {\n\t\tthrow new TypeError('arrayFormatSeparator must be single character string');\n\t}\n}\n\nfunction encode(value, options) {\n\tif (options.encode) {\n\t\treturn options.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction decode(value, options) {\n\tif (options.decode) {\n\t\treturn decodeComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t}\n\n\tif (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input))\n\t\t\t.sort((a, b) => Number(a) - Number(b))\n\t\t\t.map(key => input[key]);\n\t}\n\n\treturn input;\n}\n\nfunction removeHash(input) {\n\tconst hashStart = input.indexOf('#');\n\tif (hashStart !== -1) {\n\t\tinput = input.slice(0, hashStart);\n\t}\n\n\treturn input;\n}\n\nfunction getHash(url) {\n\tlet hash = '';\n\tconst hashStart = url.indexOf('#');\n\tif (hashStart !== -1) {\n\t\thash = url.slice(hashStart);\n\t}\n\n\treturn hash;\n}\n\nfunction extract(input) {\n\tinput = removeHash(input);\n\tconst queryStart = input.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\n\treturn input.slice(queryStart + 1);\n}\n\nfunction parseValue(value, options) {\n\tif (options.parseNumbers && !Number.isNaN(Number(value)) && (typeof value === 'string' && value.trim() !== '')) {\n\t\tvalue = Number(value);\n\t} else if (options.parseBooleans && value !== null && (value.toLowerCase() === 'true' || value.toLowerCase() === 'false')) {\n\t\tvalue = value.toLowerCase() === 'true';\n\t}\n\n\treturn value;\n}\n\nfunction parse(input, options) {\n\toptions = Object.assign({\n\t\tdecode: true,\n\t\tsort: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ',',\n\t\tparseNumbers: false,\n\t\tparseBooleans: false\n\t}, options);\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst formatter = parserForArrayFormat(options);\n\n\t// Create an object with no prototype\n\tconst ret = Object.create(null);\n\n\tif (typeof input !== 'string') {\n\t\treturn ret;\n\t}\n\n\tinput = input.trim().replace(/^[?#&]/, '');\n\n\tif (!input) {\n\t\treturn ret;\n\t}\n\n\tfor (const param of input.split('&')) {\n\t\tlet [key, value] = splitOnFirst(options.decode ? param.replace(/\\+/g, ' ') : param, '=');\n\n\t\t// Missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tvalue = value === undefined ? null : ['comma', 'separator'].includes(options.arrayFormat) ? value : decode(value, options);\n\t\tformatter(decode(key, options), value, ret);\n\t}\n\n\tfor (const key of Object.keys(ret)) {\n\t\tconst value = ret[key];\n\t\tif (typeof value === 'object' && value !== null) {\n\t\t\tfor (const k of Object.keys(value)) {\n\t\t\t\tvalue[k] = parseValue(value[k], options);\n\t\t\t}\n\t\t} else {\n\t\t\tret[key] = parseValue(value, options);\n\t\t}\n\t}\n\n\tif (options.sort === false) {\n\t\treturn ret;\n\t}\n\n\treturn (options.sort === true ? Object.keys(ret).sort() : Object.keys(ret).sort(options.sort)).reduce((result, key) => {\n\t\tconst value = ret[key];\n\t\tif (Boolean(value) && typeof value === 'object' && !Array.isArray(value)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(value);\n\t\t} else {\n\t\t\tresult[key] = value;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n}\n\nexports.extract = extract;\nexports.parse = parse;\n\nexports.stringify = (object, options) => {\n\tif (!object) {\n\t\treturn '';\n\t}\n\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ','\n\t}, options);\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst shouldFilter = key => (\n\t\t(options.skipNull && isNullOrUndefined(object[key])) ||\n\t\t(options.skipEmptyString && object[key] === '')\n\t);\n\n\tconst formatter = encoderForArrayFormat(options);\n\n\tconst objectCopy = {};\n\n\tfor (const key of Object.keys(object)) {\n\t\tif (!shouldFilter(key)) {\n\t\t\tobjectCopy[key] = object[key];\n\t\t}\n\t}\n\n\tconst keys = Object.keys(objectCopy);\n\n\tif (options.sort !== false) {\n\t\tkeys.sort(options.sort);\n\t}\n\n\treturn keys.map(key => {\n\t\tconst value = object[key];\n\n\t\tif (value === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (value === null) {\n\t\t\treturn encode(key, options);\n\t\t}\n\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value\n\t\t\t\t.reduce(formatter(key), [])\n\t\t\t\t.join('&');\n\t\t}\n\n\t\treturn encode(key, options) + '=' + encode(value, options);\n\t}).filter(x => x.length > 0).join('&');\n};\n\nexports.parseUrl = (input, options) => {\n\toptions = Object.assign({\n\t\tdecode: true\n\t}, options);\n\n\tconst [url, hash] = splitOnFirst(input, '#');\n\n\treturn Object.assign(\n\t\t{\n\t\t\turl: url.split('?')[0] || '',\n\t\t\tquery: parse(extract(input), options)\n\t\t},\n\t\toptions && options.parseFragmentIdentifier && hash ? {fragmentIdentifier: decode(hash, options)} : {}\n\t);\n};\n\nexports.stringifyUrl = (input, options) => {\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true\n\t}, options);\n\n\tconst url = removeHash(input.url).split('?')[0] || '';\n\tconst queryFromUrl = exports.extract(input.url);\n\tconst parsedQueryFromUrl = exports.parse(queryFromUrl, {sort: false});\n\n\tconst query = Object.assign(parsedQueryFromUrl, input.query);\n\tlet queryString = exports.stringify(query, options);\n\tif (queryString) {\n\t\tqueryString = `?${queryString}`;\n\t}\n\n\tlet hash = getHash(input.url);\n\tif (input.fragmentIdentifier) {\n\t\thash = `#${encode(input.fragmentIdentifier, options)}`;\n\t}\n\n\treturn `${url}${queryString}${hash}`;\n};\n","'use strict';\nmodule.exports = str => encodeURIComponent(str).replace(/[!'()*]/g, x => `%${x.charCodeAt(0).toString(16).toUpperCase()}`);\n","export { default as v1 } from './v1.js';\nexport { default as v3 } from './v3.js';\nexport { default as v4 } from './v4.js';\nexport { default as v5 } from './v5.js';\nexport { default as NIL } from './nil.js';\nexport { default as version } from './version.js';\nexport { default as validate } from './validate.js';\nexport { default as stringify } from './stringify.js';\nexport { default as parse } from './parse.js';","/*\n * Browser-compatible JavaScript MD5\n *\n * Modification of JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\nfunction md5(bytes) {\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = new Uint8Array(msg.length);\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes[i] = msg.charCodeAt(i);\n    }\n  }\n\n  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));\n}\n/*\n * Convert an array of little-endian words to an array of bytes\n */\n\n\nfunction md5ToHexEncodedArray(input) {\n  var output = [];\n  var length32 = input.length * 32;\n  var hexTab = '0123456789abcdef';\n\n  for (var i = 0; i < length32; i += 8) {\n    var x = input[i >> 5] >>> i % 32 & 0xff;\n    var hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);\n    output.push(hex);\n  }\n\n  return output;\n}\n/**\n * Calculate output length with padding and bit length\n */\n\n\nfunction getOutputLength(inputLength8) {\n  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;\n}\n/*\n * Calculate the MD5 of an array of little-endian words, and a bit length.\n */\n\n\nfunction wordsToMd5(x, len) {\n  /* append padding */\n  x[len >> 5] |= 0x80 << len % 32;\n  x[getOutputLength(len) - 1] = len;\n  var a = 1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d = 271733878;\n\n  for (var i = 0; i < x.length; i += 16) {\n    var olda = a;\n    var oldb = b;\n    var oldc = c;\n    var oldd = d;\n    a = md5ff(a, b, c, d, x[i], 7, -680876936);\n    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);\n    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n    b = md5gg(b, c, d, a, x[i], 20, -373897302);\n    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);\n    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n    d = md5hh(d, a, b, c, x[i], 11, -358537222);\n    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n    a = md5ii(a, b, c, d, x[i], 6, -198630844);\n    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n    a = safeAdd(a, olda);\n    b = safeAdd(b, oldb);\n    c = safeAdd(c, oldc);\n    d = safeAdd(d, oldd);\n  }\n\n  return [a, b, c, d];\n}\n/*\n * Convert an array bytes to an array of little-endian words\n * Characters >255 have their high-byte silently ignored.\n */\n\n\nfunction bytesToWords(input) {\n  if (input.length === 0) {\n    return [];\n  }\n\n  var length8 = input.length * 8;\n  var output = new Uint32Array(getOutputLength(length8));\n\n  for (var i = 0; i < length8; i += 8) {\n    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;\n  }\n\n  return output;\n}\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\n\n\nfunction safeAdd(x, y) {\n  var lsw = (x & 0xffff) + (y & 0xffff);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return msw << 16 | lsw & 0xffff;\n}\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\n\n\nfunction bitRotateLeft(num, cnt) {\n  return num << cnt | num >>> 32 - cnt;\n}\n/*\n * These functions implement the four basic operations the algorithm uses.\n */\n\n\nfunction md5cmn(q, a, b, x, s, t) {\n  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);\n}\n\nfunction md5ff(a, b, c, d, x, s, t) {\n  return md5cmn(b & c | ~b & d, a, b, x, s, t);\n}\n\nfunction md5gg(a, b, c, d, x, s, t) {\n  return md5cmn(b & d | c & ~d, a, b, x, s, t);\n}\n\nfunction md5hh(a, b, c, d, x, s, t) {\n  return md5cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction md5ii(a, b, c, d, x, s, t) {\n  return md5cmn(c ^ (b | ~d), a, b, x, s, t);\n}\n\nexport default md5;","export default '00000000-0000-0000-0000-000000000000';","import validate from './validate.js';\n\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  var v;\n  var arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nexport default parse;","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  if (!getRandomValues) {\n    throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n  }\n\n  return getRandomValues(rnds8);\n}","// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  var K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  var H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = [];\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  } else if (!Array.isArray(bytes)) {\n    // Convert Array-like to Array\n    bytes = Array.prototype.slice.call(bytes);\n  }\n\n  bytes.push(0x80);\n  var l = bytes.length / 4 + 2;\n  var N = Math.ceil(l / 16);\n  var M = new Array(N);\n\n  for (var _i = 0; _i < N; ++_i) {\n    var arr = new Uint32Array(16);\n\n    for (var j = 0; j < 16; ++j) {\n      arr[j] = bytes[_i * 64 + j * 4] << 24 | bytes[_i * 64 + j * 4 + 1] << 16 | bytes[_i * 64 + j * 4 + 2] << 8 | bytes[_i * 64 + j * 4 + 3];\n    }\n\n    M[_i] = arr;\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (var _i2 = 0; _i2 < N; ++_i2) {\n    var W = new Uint32Array(80);\n\n    for (var t = 0; t < 16; ++t) {\n      W[t] = M[_i2][t];\n    }\n\n    for (var _t = 16; _t < 80; ++_t) {\n      W[_t] = ROTL(W[_t - 3] ^ W[_t - 8] ^ W[_t - 14] ^ W[_t - 16], 1);\n    }\n\n    var a = H[0];\n    var b = H[1];\n    var c = H[2];\n    var d = H[3];\n    var e = H[4];\n\n    for (var _t2 = 0; _t2 < 80; ++_t2) {\n      var s = Math.floor(_t2 / 20);\n      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[_t2] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nexport default sha1;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\n\nvar _clockseq; // Previous uuid creation time\n\n\nvar _lastMSecs = 0;\nvar _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || new Array(16);\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    var seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  var msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || stringify(b);\n}\n\nexport default v1;","import v35 from './v35.js';\nimport md5 from './md5.js';\nvar v3 = v35('v3', 0x30, md5);\nexport default v3;","import stringify from './stringify.js';\nimport parse from './parse.js';\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  var bytes = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport var DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport var URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function (name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = parse(namespace);\n    }\n\n    if (namespace.length !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    var bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (var i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return stringify(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nvar v5 = v35('v5', 0x50, sha1);\nexport default v5;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n\nfunction version(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  return parseInt(uuid.substr(14, 1), 16);\n}\n\nexport default version;","// Re-use the no-op auth plugin.\nimport noopAuth from '../noop'\n\nimport { anonymousConnect, anonymousDisconnect } from './sagas'\nimport { extendSubscription } from '../oldLink/sagas'\nimport { mergeValues } from '../../common/utils'\n\n// Parse and/or Validate\nimport { enums, validation as v8n, parse } from '../../../src/common/validation'\n\n/**\n * Configuration options for the CallMe Authentication feature.\n * @public\n * @name config.authentication\n * @memberof config\n * @instance\n * @param {Object}  authentication Authentication configs.\n * @param {Object}  authentication.subscription\n * @param {string} [authentication.subscription.protocol='https'] Protocol to be used for subscription requests.\n * @param {string}  authentication.subscription.server Server to be used for subscription requests.\n * @param {Number} [authentication.subscription.port=443] Port to be used for subscription requests.\n * @param {Array}  [authentication.subscription.service] Services to subscribe to for notifications.\n * @param {Object}  authentication.websocket\n * @param {string} [authentication.websocket.protocol='wss'] Protocol to be used for websocket notifications.\n * @param {string}  authentication.websocket.server Server to be used for websocket notifications.\n * @param {Number} [authentication.websocket.port=443] Port to be used for websocket notifications.\n */\n\nexport const defaultOptions = {\n  subscription: {\n    protocol: 'https',\n    server: null,\n    port: 443,\n    version: '1', // not documented, but important\n    service: []\n  },\n  websocket: {\n    protocol: 'wss',\n    server: null,\n    port: 443\n  }\n}\n\n// config validation\nconst v8nValidation = v8n.schema({\n  subscription: v8n.schema({\n    protocol: enums(['http', 'https']),\n    server: v8n.string(),\n    port: v8n.positive(),\n    version: enums(['1']), // not documented, but important\n    service: v8n.array().every.string()\n  }),\n  websocket: v8n.schema({\n    protocol: v8n.string(),\n    server: v8n.string(),\n    port: v8n.positive()\n  })\n})\nconst parseOptions = parse('authentication', v8nValidation)\n\n/**\n * Auth plugin factory for callMe scenarios.\n * @method callMeAuth\n * @param  {Object} options Configuration options for authentication. See above.\n * @return {Object} A callMe authentication plugin.\n */\nexport default function callMeAuth (options = {}) {\n  options = mergeValues(defaultOptions, options)\n  parseOptions(options)\n\n  // Use the no-op auth plugin as a basis.\n  const authComponents = noopAuth(options)\n\n  // Add in the sagas.\n  authComponents.sagas = [anonymousConnect, anonymousDisconnect, extendSubscription]\n\n  return authComponents\n}\n","// Auth plugin.\nimport * as actionTypes from '../interface/actionTypes'\nimport * as actions from '../interface/actions'\nimport { getAuthConfig, getConnectionInfo } from '../interface/selectors'\nimport { subscribe } from '../subscription/requests'\n\nimport { disconnect } from '../oldLink/sagas'\n\n// Other plugins.\nimport { connectWebsocket } from '../../connectivity/interface/effects'\nimport BasicError, { authCodes } from '../../errors'\nimport { logManager } from '../../logs'\n\n// Libraries.\nimport { call, put, select, take } from 'redux-saga/effects'\n\n// Constants\nimport { platforms } from '../../constants'\n\nconst log = logManager.getLogger('AUTH')\n\n/**\n * Handles anonymous subscription and establishing the websocket.\n * Mocks the connection process using the auth actions to trigger required\n *      side-effects elsewhere.\n * @method anonymousConnect\n * @param  {Object} action A CONNECT action.\n * @return {Object} Response or error object.\n */\nexport function * anonymousConnect () {\n  while (true) {\n    const action = yield take(actionTypes.CONNECT)\n\n    if (!window || !window.localStorage || !window.localStorage.setItem) {\n      log.error('localStorage not supported in environment; cannot make anonymous calls.')\n      yield put(\n        actions.connectFinished({\n          error: new BasicError({\n            message: 'localStorage not supported in environment; cannot make anonymous calls.'\n          })\n        })\n      )\n      continue\n    }\n\n    // Retrieve the connection info.\n    const config = yield select(getAuthConfig)\n\n    const requestOptions = {}\n    const { credentials } = action.payload\n    if (credentials.realm) {\n      requestOptions.queryParams = {\n        tokenrealm: credentials.realm\n      }\n    }\n\n    const subscriptionInfo = {\n      ...config.subscription,\n      isAnonymous: true,\n      // TODO: Hardcode / override this here?\n      service: ['callMe']\n    }\n\n    log.info('Subscribing to callMe service.')\n    const response = yield call(subscribe, subscriptionInfo, credentials, requestOptions)\n\n    if (response.error) {\n      log.info('Subscription failed. Error: ', response.error)\n      // Subscription failed.\n      yield put(actions.connectFinished(response, platforms.LINK))\n      continue\n    } else if (!response.subscriptionParams.service.includes('callMe')) {\n      // Subscription was successful, but didn't include the callMe service.\n      log.info('Subscription failed. Call Me service not provided with subscription.')\n      yield put(\n        actions.connectFinished({\n          error: new BasicError({\n            message: 'Subscription failed to receive required service: callMe',\n            code: authCodes.MISSING_SERVICE\n          })\n        })\n      )\n      continue\n    }\n\n    log.info('Successfully subscribed to callMe service. Connecting to websocket.')\n\n    // Connect the websocket.\n    const websocketInfo = {\n      ...config.websocket,\n      url: response.subscriptionParams.notificationChannel\n    }\n\n    // Request the websocket connection.\n    const wsResponse = yield connectWebsocket(websocketInfo, platforms.LINK)\n\n    if (wsResponse.error) {\n      log.info('Failed to connect to websocket. Error: ', wsResponse.error)\n      // Websocket failed to connect.\n      yield put(\n        actions.connectFinished(\n          {\n            error: wsResponse.payload\n          },\n          platforms.LINK\n        )\n      )\n      continue\n    }\n    log.info('Successfully connected to websocket.')\n\n    // Workaround.\n    // FCS anonymous calls is dependent on having a value set in localStorage.\n    //      This value is normally set in FCS' subscription process, but since\n    //      we aren't using FCS for subscription, we need to do it ourselves.\n    // This should be cleared after disconnection.\n    // See: wamcall.js, function addNotificationChannel\n    const notificationId = websocketInfo.url.substr(websocketInfo.url.lastIndexOf('/') + 1)\n    const username = action.payload.credentials.username\n    window.localStorage.setItem(`FCS_${username}_NotificationId`, notificationId)\n\n    yield put(\n      actions.connectFinished(\n        {\n          userInfo: {\n            username: action.payload.credentials.anonUsername\n          },\n          subscription: {\n            ...response.subscriptionParams,\n            url: response.subscription\n          },\n          connection: {\n            server: {\n              ...config.subscription\n            },\n            username: action.payload.credentials.username,\n            requestOptions,\n            // Store the fact that this is an anonymous subscription as part of\n            //      connection state.\n            isAnonymous: true,\n            realm: action.payload.credentials.realm\n          }\n        },\n        platforms.LINK\n      )\n    )\n  }\n}\n\n/**\n * Entry saga for disconnection.\n * Anonymous disconnect is no different than regular disconnect,\n *      so re-use the regular logic from link.\n * @method anonymousDisconnect\n */\nexport function * anonymousDisconnect () {\n  while (true) {\n    yield take(actionTypes.DISCONNECT)\n    const { username } = yield select(getConnectionInfo)\n\n    log.info('Unsubscribing from callMe services.')\n    // Call the link disconnect saga.\n    yield call(disconnect)\n\n    // Workaround.\n    // This was set in localStorage during anonymous connection. Remove it\n    //      since we're disconnecting.\n    if (window && window.localStorage && window.localStorage.removeItem) {\n      window.localStorage.removeItem(`FCS_${username}_NotificationId`)\n    }\n  }\n}\n","/**\n * Possible subscription states.\n * @name SUBSCRIPTION_STATE\n * @type {Object}\n */\nexport const SUBSCRIPTION_STATE = {\n  FULL: 'FULL',\n  PARTIAL: 'PARTIAL',\n  NONE: 'NONE'\n}\n\n/**\n * Possible disconnect reasons.\n * @name DISCONNECT_REASONS\n * @type {Object}\n */\nexport const DISCONNECT_REASONS = {\n  GONE: 'GONE',\n  LOST_CONNECTION: 'LOST_CONNECTION'\n}\n","const prefix = '@@KANDY/'\n\nexport const CONNECT = prefix + 'CONNECT'\nexport const SET_CONNECTION_INFO = prefix + 'SET_CONNECTION_INFO'\nexport const CONNECTION_OCCURRED = prefix + 'CONNECTION_OCCURRED'\nexport const CONNECT_FINISHED = prefix + 'CONNECT_FINISHED'\nexport const GET_USER_DETAILS = prefix + 'GET_USER_DETAILS'\nexport const USER_DETAILS_RECEIVED = prefix + 'USER_DETAILS_RECEIVED'\nexport const DISCONNECT = prefix + 'DISCONNECT'\nexport const DISCONNECT_FINISHED = prefix + 'DISCONNECT_FINISHED'\nexport const RESUBSCRIPTION_FINISHED = prefix + 'RESUBSCRIPTION_FINISHED'\nexport const REFRESH_TOKENS = prefix + 'REFRESH_TOKENS'\nexport const REFRESH_TOKENS_FINISHED = prefix + 'REFRESH_TOKENS_FINISHED'\n\nexport const UPDATE_SUBSCRIPTION = prefix + 'UPDATE_SUBSCRIPTION'\nexport const UPDATE_SUBSCRIPTION_FINISH = prefix + 'UPDATE_SUBSCRIPTION_FINISH'\n\nexport const SET_TOKEN = prefix + 'SET_TOKEN'\n\nexport const SET_CREDENTIALS = prefix + 'SET_CREDENTIALS'\nexport const SET_CREDENTIALS_FINISH = prefix + 'SET_CREDENTIALS_FINISH'\n\nexport const AUTHORIZATION_ERROR = prefix + 'AUTHORIZATION_ERROR'\n","import * as actionTypes from './actionTypes'\n\n/**\n * Creates a connect action that takes a credentials object.\n *\n * @method connect\n * @param {Object} credentials The credentials to pass to the connect action.\n * @param {Object} [options] Any parameters that aren't credentials.\n * @return {Object} A flux standard action.\n */\nexport function connect (credentials, options) {\n  return {\n    type: actionTypes.CONNECT,\n    payload: { credentials, options },\n    meta: {\n      isSensitive: true\n    }\n  }\n}\n\n/**\n * Create a set connection info action that takes a connection and user info object\n *\n * @method setConnectionInfo\n * @param {Object} $0\n * @param {Object} $0.userInfo An object representing the user information.\n * @param {Object} $0.connection A connection object. Information about how to connect to the backend services.\n * @return {Object} A flux standard action.\n */\nexport function setConnectionInfo ({ userInfo, connection }, platform) {\n  return {\n    type: actionTypes.SET_CONNECTION_INFO,\n    payload: { userInfo, connection },\n    meta: {\n      platform,\n      isSensitive: true\n    }\n  }\n}\n\n/**\n * Connection occurred action.\n * Signifies that a connection has been made to a service, but that the connection\n *      workflow has not finished yet. Intended for use in scenarios where the\n *      workflow connects to multiple services, to represent the \"intermediate\"\n *      connections.\n *\n * @method connectionOccurred\n * @param  {Object} $0\n * @param  {Object} $0.subscription\n * @param  {Object} $0.connection\n * @param  {Object} [$0.error] An error message. Only present if an error occurred.\n * @param  {string} platform The backend platform used for the connection.\n * @return {Object} A flux standard action.\n */\nexport function connectionOccurred ({ subscription, connection, error }, platform) {\n  // TODO: Is this action used anywhere?\n  var action = {\n    type: actionTypes.CONNECTION_OCCURRED,\n    meta: { platform }\n  }\n\n  if (error) {\n    action.error = true\n    action.payload = error\n  } else {\n    action.payload = { subscription, connection }\n  }\n\n  return action\n}\n\n/**\n * Create a connect finished action that takes a userInfo object on success and possibly\n * an error object.\n *\n * @method connectFinished\n * @param {Object} $0\n * @param {Object} $0.subscription A subscription object. Contains what services to subscribe to.\n * @param {Object} $0.userInfo An object representing the user information.\n * @param {Object} $0.connection A connection object. Information about how to connect to the backend services.\n * @param {string} [$0.error] An error message. Only present if an error occurred.\n * @param {string} platform The backend platform we are currently on.\n * @param {boolean} isSSO Boolean for whether the current connection scenario is SSO or not.\n * @return {Object} A flux standard action.\n */\nexport function connectFinished ({ subscription, userInfo, connection, error }, platform, isSSO = false) {\n  var action = {\n    type: actionTypes.CONNECT_FINISHED,\n    meta: {\n      platform,\n      isSSO,\n      isSensitive: true\n    }\n  }\n\n  if (error) {\n    action.error = true\n    action.payload = error\n  } else {\n    action.payload = { subscription, userInfo, connection }\n  }\n\n  return action\n}\n\n/**\n * Creates a getUserDetails action\n *\n * @method getUserDetails\n * @return {Object} A flux standard action.\n */\nexport function getUserDetails () {\n  return { type: actionTypes.GET_USER_DETAILS }\n}\n\n/**\n * Create a user details received action\n *\n * @method userDetailsReceived\n * @param  {Object} userDetailsResponse An object representing the REST response of a user details request.\n * @return {Object} A flux standard action.\n */\nexport function userDetailsReceived (userDetailsResponse) {\n  var action = {\n    type: actionTypes.USER_DETAILS_RECEIVED,\n    payload: {\n      firstName: userDetailsResponse.firstName || userDetailsResponse.user_first_name,\n      user_first_name: userDetailsResponse.user_first_name || userDetailsResponse.firstName,\n      lastName: userDetailsResponse.lastName || userDetailsResponse.user_last_name,\n      user_last_name: userDetailsResponse.user_last_name || userDetailsResponse.lastName,\n      photoURL: userDetailsResponse.photoURL,\n      emailAddress: userDetailsResponse.emailAddress || userDetailsResponse.user_email,\n      user_email: userDetailsResponse.user_email || userDetailsResponse.emailAddress,\n      username: userDetailsResponse.username\n    }\n  }\n\n  return action\n}\n\n/**\n * Creates a disconnect action.\n *\n * @method disconnect\n * @return {Object} A flux standard action.\n */\nexport function disconnect () {\n  return { type: actionTypes.DISCONNECT }\n}\n\n/**\n * Create a disconnectFinished action that possibly takes an error object on failure.\n *\n * @method disconnectFinished\n * @param {Object} params\n * @param {string} [params.error] An error message. Only present if an error occurred.\n * @param {string} [params.reason] Why the disconnectFinished action is being dispatched.\n * @return {Object} A flux standard action.\n */\nexport function disconnectFinished ({ error, reason } = {}) {\n  const action = {\n    type: actionTypes.DISCONNECT_FINISHED,\n    payload: {}\n  }\n\n  if (error) {\n    action.error = true\n    action.payload = error\n  }\n\n  if (reason) {\n    action.payload.reason = reason\n  }\n\n  return action\n}\n\n/**\n * Action creator representing the finish of a resubscription request.\n * Payload mirrors a connect finished action.\n *\n * @method resubscribeFinished\n * @param {Object} $0\n * @param {string} [$0.error] An error message. Only present if an error occurred.\n * @param {string} [$0.attemptNum] The attempt number of this resubscription.\n * @param {string} platform The backend platform we are currently on.\n * @return {Object} A flux standard action.\n */\nexport function resubscribeFinished ({ error, attemptNum }, platform) {\n  var action = {\n    type: actionTypes.RESUBSCRIPTION_FINISHED,\n    meta: { platform }\n  }\n\n  if (error) {\n    action.error = true\n    action.payload = error\n    action.payload.attemptNum = attemptNum\n  } else {\n    action.payload = {\n      attemptNum\n    }\n  }\n\n  return action\n}\n\n/**\n * Creates a refreshTokens action with the given credentials as a payload.\n *\n * @method refreshTokens\n * @param {Object} credentials A credentials object containing tokens.\n * @return {Object} A flux standard action.\n */\nexport function refreshTokens (credentials) {\n  var action = {\n    type: actionTypes.REFRESH_TOKENS,\n    payload: { credentials }\n  }\n  return action\n}\n\n/**\n * Creates a refreshTokensFinished action with connection and platform information.\n * Optionally includes an error.\n *\n * @method refreshTokensFinished\n * @param {Object} $0\n * @param {Object} [$0.error] An optional error object.\n * @param {Object} $0.connection Connection information.\n * @param {string} platform The backend platform we are currently on.\n * @return {Object} A flux standard action.\n */\nexport function refreshTokensFinished ({ error, connection }, platform) {\n  var action = {\n    type: actionTypes.REFRESH_TOKENS_FINISHED,\n    payload: { connection },\n    meta: { platform }\n  }\n  if (error) {\n    action.error = true\n    action.payload = error\n  }\n\n  return action\n}\n\n/**\n * Represents a request to update a current subscription.\n * @method updateSubscription\n * @param  {Object} subscription Information used to update subscription.\n * @return {Object} A flux standard action.\n */\nexport function updateSubscription (subscription) {\n  return {\n    type: actionTypes.UPDATE_SUBSCRIPTION,\n    payload: subscription\n  }\n}\n\n/**\n * Represents that the current subscription has been updated.\n * @method updateSubscriptionFinished\n * @param  {Object} $0\n * @param  {Object} $0.subscription New subscription state to be updated.\n * @param  {Object} [$0.error] Error object, in the case of an error.\n * @param  {string} platform The backend platform used for the subscription.\n * @return {Object} A flux standard action.\n */\nexport function updateSubscriptionFinished ({ subscription, error }, platform) {\n  var action = {\n    type: actionTypes.UPDATE_SUBSCRIPTION_FINISH,\n    meta: { platform }\n  }\n\n  if (error) {\n    action.error = true\n    action.payload = error\n  } else {\n    action.payload = subscription\n  }\n  return action\n}\n\n/**\n * Sets the token information in the state.\n * @method setTokens\n * @param {Object} params Dictionary object of parameters.\n * @param {string} accessToken An access token retrieved using the authentication APIs of the platform.\n * @param {string} idToken An identity token retrieved using the authentication APIs of the platform.\n * @return {Object} A flux standard action.\n */\nexport function setTokens ({ accessToken, idToken }) {\n  return {\n    type: actionTypes.SET_TOKEN,\n    payload: { accessToken, idToken }\n  }\n}\n\n/**\n * Creates a setCredentials action that takes a credentials object.\n *\n * @method setCredentials\n * @param {Object} $0\n * @param {string} $0.username The username.\n * @param {string} $0.password The user's password.\n * @param {string} $0.authname The user's authorization name.\n * @param {string} $0.hmacToken An HMAC token for the user with the provided user ID.\n * @param {string} $0.bearerAccessToken An access token retrieved using the authentication APIs of the platform.\n * @param {string} $0.idToken An identity token retrieved using the authentication APIs of the platform.\n * @return {Object} A flux standard action.\n */\nexport function setCredentials ({ username, password, authname, hmacToken, bearerAccessToken, idToken }) {\n  return {\n    type: actionTypes.SET_CREDENTIALS,\n    payload: { username, password, authname, hmacToken, bearerAccessToken, idToken },\n    meta: {\n      isSensitive: true\n    }\n  }\n}\n\n/**\n * Create a setCredentials finished action that takes a userInfo object on success and possibly\n * an error object.\n *\n * @method setCredentialsFinished\n * @param {Object} $0\n * @param {Object} $0.userInfo An object representing the user information.\n * @param {Object} $0.connection A connection object. Information about how to connect to the backend services.\n * @param {string} [$0.error] An error message. Only present if an error occurred.\n * @param {string} platform The backend platform we are currently on.\n * @return {Object} A flux standard action.\n */\nexport function setCredentialsFinished ({ userInfo, connection, error }, platform) {\n  var action = {\n    type: actionTypes.SET_CREDENTIALS_FINISH,\n    meta: {\n      platform,\n      isSensitive: true\n    }\n  }\n\n  if (error) {\n    action.error = true\n    action.payload = error\n  } else {\n    action.payload = { userInfo, connection }\n  }\n\n  return action\n}\n","import * as actions from './actions'\nimport { getUserInfo as selectUserInfo, getServices } from './selectors'\nimport { SUBSCRIPTION_STATE, DISCONNECT_REASONS } from '../constants'\n\nimport { logManager, API_LOG_TAG } from '../../logs'\nimport jwtDecode from 'jwt-decode'\nconst log = logManager.getLogger('AUTH')\n\n/**\n * Authentication API.\n * @method api\n * @param  {Function} $0\n * @param  {Function} $0.dispatch - The redux store's dispatch function.\n * @param  {Function} $0.getState - The redux store's getState function.\n * @return {Object} api - The authentication API object.\n */\nexport default function api ({ dispatch, getState }) {\n  return {\n    /**\n     * Connect with user credentials to any backend services that the SDK instance deals with.\n     *\n     * @public\n     * @deprecated Since version 4.19.0. Please see {@link apisetCredentials setCredentials} and {@link services.subscribe subscribe} for new method of connecting.\n     * @memberof api\n     * @requires userCredentialsAuth\n     * @method connect\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.username The username including the application's domain.\n     * @param {string} credentials.password The user's password.\n     * @param {string} [credentials.authname] The user's authorization name.\n     * @param {Object} [options] The options object for non-credential options.\n     * @param {boolean} [options.forceLogOut] Force the oldest connection to log out if too many simultaneous connections. Link only.\n     * @param {string} [options.clientCorrelator] Unique ID for the client. This is used by the platform to identify an instance of the application used by the specific device.\n     * @example\n     * client.connect({\n     *   username: 'alfred@example.com',\n     *   password: '********'\n     *   authname: '********'\n     * }, {\n     *   forceLogOut: true\n     * });\n     */\n    /**\n     * Connect with user credentials to any backend services that the SDK instance deals with.\n     *\n     * @public\n     * @deprecated Since version 4.19.0. Please see {@link apisetCredentials setCredentials} and {@link services.subscribe subscribe} for new method of connecting.\n     * @memberof api\n     * @requires userCredentialsDAKAuth\n     * @method connect\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.domainApiKey The Api key for the application's domain.\n     * @param {string} credentials.username The username without the application's domain.\n     * @param {string} credentials.password The user's password.\n     * @param {Object} [options] The options object for non-credential options.\n     * @param {string} [options.clientCorrelator] Unique ID for the client. This is used by the platform to identify an instance of the application used by the specific device.\n     * @example\n     * client.connect({\n     *   domainApiKey: 'DAK1111111111111111111',\n     *   username: 'alfred',\n     *   password: '********'\n     * });\n     */\n    /**\n     * Connect by providing an access token to any backend services that the SDK instance deals with.\n     * You can optionally provide a refresh token and the SDK will automatically get new access tokens.\n     *\n     * @public\n     * @deprecated Since version 4.19.0. Please see {@link apisetCredentials setCredentials} and {@link services.subscribe subscribe} for new method of connecting.\n     * @memberof api\n     * @requires accessTokenAuth\n     * @method connect\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.username The username without the application's domain.\n     * @param {string} credentials.accessToken An access token for the user with the provided user Id.\n     * @param {string} [credentials.refreshToken] A refresh token for the same user.\n     * @param {number} [credentials.expires] The time in seconds until the access token will expire.\n     * @param {Object} [options] The options object for non-credential options.\n     * @param {string} [options.clientCorrelator] Unique ID for the client. This is used by the platform to identify an instance of the application used by the specific device.\n     * @example\n     * client.connect({\n     *   username: 'alfred@example.com',\n     *   accessToken: 'AT0V1fswAiJadokx1iJMQdG04pRf',\n     *   refreshToken: 'RTG9SV3QAoJaeUSEQCZAHqrhde1yT',\n     *   expires: 3600\n     * });\n     */\n    /**\n     * Connect by providing a username and HMAC token. This connects to any backend services that the SDK instance deals with.\n     * An HMAC token is used to verify a user via the user's authorization within an organization.\n     * HMAC tokens are generated by using the HmacSHA1 algorithm and a key on a data object\n     * containing an `authenticationTokenRequest` object with the following properties:\n     * - subscriberId - The user's subscriber ID in the organization.\n     * - organizationId - The ID of the organization the user is a part of.\n     *\n     * @public\n     * @deprecated Since version 4.19.0. Please see {@link apisetCredentials setCredentials} and {@link services.subscribe subscribe} for new method of connecting.\n     * @memberof api\n     * @requires hmacTokenAuth\n     * @method connect\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.username The username.\n     * @param {string} credentials.hmacToken An HMAC token for the user with the provided user ID.\n     * @param {Object} [options] The options object for non-credential options.\n     * @param {boolean} [options.forceLogOut] Force the oldest connection to log out if too many simultaneous connections.\n     * @param {string} [options.clientCorrelator] Unique ID for the client. This is used by the platform to identify an instance of the application used by the specific device.\n     * @example\n     * const hmacToken = HmacSHA1Algorithm({\n     *   authenticationTokenRequest: {\n     *     subscriberId: 'alfred',\n     *     organizationId: 'example.com'\n     *   }\n     * }, key)\n     *\n     * client.connect({\n     *   username: 'alfred@example.com',\n     *   hmacToken\n     * }, {\n     *   forceLogOut: true\n     * });\n     */\n    /**\n     * Connect by providing a refresh token, to any backend services that the SDK instance deals with.\n     *\n     * @public\n     * @deprecated Since version 4.19.0. Please see {@link apisetCredentials setCredentials} and {@link services.subscribe subscribe} for new method of connecting.\n     * @memberof api\n     * @requires accessTokenAuth\n     * @method connect\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.username The username without the application's domain.\n     * @param {string} credentials.refreshToken A refresh token for the same user.\n     * @param {number} [credentials.expires] The time in seconds until the access token will expire.\n     * @param {Object} [options] The options object for non-credential options.\n     * @param {string} [options.clientCorrelator] Unique ID for the client. This is used by the platform to identify an instance of the application used by the specific device.\n     * @example\n     * client.connect({\n     *   username: 'alfred@example.com',\n     *   refreshToken: 'RTG9SV3QAoJaeUSEQCZAHqrhde1yT'\n     *   expires: 3600\n     * });\n     */\n    /**\n     * Connect by providing an OAuth token, to any backend services that the SDK instance deals with.\n     *\n     * @public\n     * @deprecated Since version 4.19.0. Please see {@link apisetCredentials setCredentials} and {@link services.subscribe subscribe} for new method of connecting.\n     * @memberof api\n     * @requires oauthToken\n     * @method connect\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.username The username without the application's domain.\n     * @param {string} credentials.oauthToken An OAuth token provided by an outside service.\n     * @param {Object} [options] The options object for non-credential options.\n     * @param {string} [options.clientCorrelator] Unique ID for the client. This is used by the platform to identify an instance of the application used by the specific device.\n     * @example\n     * client.connect({\n     *   username: 'alfred@example.com',\n     *   oauthToken: 'RTG9SV3QAoJaeUSEQCZAHqrhde1yT'\n     * });\n     */\n    connect (credentials, options) {\n      // We won't expose oauthToken because it essentially acts as a password being used in conjunction with username\n      // ..and passwords should NOT be logged.\n      log.debug(API_LOG_TAG + 'connect: ', credentials.username)\n      dispatch(actions.connect(credentials, options))\n    },\n\n    /**\n     * Disconnects from the backend. This will close the websocket and you will stop receiving events.\n     *\n     * @public\n     * @deprecated Since version 4.19.0. Please see {@link services.unsubscribe unsubscribe} for new method of disconnecting.\n     * @requires userCredentialsAuth\n     * @requires userCredentialsDAKAuth\n     * @requires accessTokenAuth\n     * @memberof api\n     * @method disconnect\n     */\n    disconnect () {\n      log.debug(API_LOG_TAG + 'disconnect')\n      dispatch(actions.disconnect())\n    },\n\n    /**\n     * If you're authenticating with tokens that expire and have not provided a refresh token to the `connect` function, you can update your access token with `updateToken` before it expires to stay connected.\n     *\n     * @public\n     * @memberof api\n     * @requires accessTokenAuth\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.accessToken The new access token.\n     * @method updateToken\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.username The username without the application's domain.\n     * @param {string} credentials.accessToken An access token for the user with the provided user Id.\n     */\n    /**\n     * If you're authenticating with tokens that expire and have not provided a refresh token to the `connect` function, you can update your access token with `updateToken` before it expires to stay connected.\n     *\n     * @public\n     * @memberof api\n     * @requires oauthToken\n     * @method updateToken\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.username The username without the application's domain.\n     * @param {string} credentials.oauthToken An OAuth token provided by an outside service.\n     * @example\n     * client.updateToken({\n     *   username: 'alfred@example.com',\n     *   oauthToken: 'RTG9SV3QAoJaeUSEQCZAHqrhde1yT'\n     * });\n     */\n    updateToken (credentials) {\n      // We won't expose oauthToken because it essentially acts as a password being used in conjunction with username\n      // ..and passwords should NOT be logged.\n      log.debug(API_LOG_TAG + 'updateToken: ', credentials.username)\n      dispatch(actions.refreshTokens(credentials))\n    },\n\n    /**\n     * Updates the current connection.\n     *\n     * @public\n     * @memberof api\n     * @requires updateConnection\n     * @method updateConnection\n     * @param {Object} connection\n     * @param {Array} connection.services Services to subscribe to for notifications.\n     * @example\n     * client.updateConnection({\n     *   services: ['IM', 'Presence', 'call']\n     * })\n     */\n    updateConnection (connection) {\n      log.debug(API_LOG_TAG + 'updateConnection: ', connection)\n      dispatch(actions.updateSubscription(connection))\n    },\n\n    /**\n     * Retrieves information about the current user.\n     *\n     * @public\n     * @memberof api\n     * @method getUserInfo\n     * @returns {Object} user The user data.\n     * @returns {string} user.username The username of the current user. Note that this username can take different encoded forms.\n     *                                 It's not meant to be displayed to a user.\n     * @returns {string} user.token The current access token.\n     */\n    getUserInfo () {\n      log.debug(API_LOG_TAG + 'getUserInfo')\n      return selectUserInfo(getState())\n    },\n\n    /**\n     * Get the connection state.\n     *\n     * @public\n     * @memberof api\n     * @requires connect\n     * @method getConnection\n     * @returns {Object} connection The connection state.\n     * @returns {boolean} connection.isConnected Whether the authenticated user is currently connected.\n     * @returns {boolean} connection.isPending Whether the authenticated user's connection is currently pending.\n     * @returns {Object} connection.error The error object if an error occurred.\n     * @returns {string} connection.error.message The error message.\n     * @returns {string} connection.error.stack The stack trace of the error.\n     */\n    getConnection () {\n      log.debug(API_LOG_TAG + 'getConnection')\n      const { isConnected, isPending, error } = getState().authentication\n      return {\n        isConnected,\n        isPending,\n        error,\n        subscription: getServices(getState())\n      }\n    },\n\n    /**\n     * Retrieves the services that the user is subscribed for.\n     *\n     * @public\n     * @memberof api\n     * @requires services\n     * @method getServices\n     * @return {Array} A list of subscribed-to services.\n     */\n    getServices () {\n      log.debug(API_LOG_TAG + 'getServices')\n      return getServices(getState())\n    },\n\n    /**\n     * Possible subscription states of the user.\n     *\n     * @public\n     * @memberof api\n     * @requires connect\n     * @property {string} FULL All requested feature subscriptions exist.\n     * @property {string} PARTIAL Some feature subscriptions exist.\n     * @property {string} NONE No feature subscriptions exist.\n     */\n    subscriptionStates: SUBSCRIPTION_STATE,\n\n    /**\n     * Possible reasons for disconnecting.\n     *\n     * @public\n     * @memberof api\n     * @requires connect\n     * @property {string} GONE Connection was terminated by the server\n     * @property {string} LOST_CONNECTION Internet connection was lost\n     */\n    disconnectReasons: DISCONNECT_REASONS,\n\n    /**\n     * Sets the authentication tokens necessary to make requests to the platform. The access token\n     * provided establishes what can be accessed by the SDK. The identity token represents who is authenticated.\n     *\n     * @public\n     * @memberof api\n     * @requires cpaasAuth\n     * @method setTokens\n     * @param {Object} params Dictionary object of parameters.\n     * @param {string} params.accessToken An access token retrieved using the authentication APIs of the platform.\n     * @param {string} params.idToken An identity token retrieved using the authentication APIs of the platform.\n     * @example\n     * client.setTokens({\n     *   accessToken: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...',\n     *   idToken: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'\n     * })\n     */\n    setTokens ({ accessToken, idToken }) {\n      // We won't log both tokens, just the id one, so that we can still be able to debug.\n      log.debug(API_LOG_TAG + 'setTokens: ', idToken)\n\n      // validate token\n      try {\n        const jwt = jwtDecode(idToken)\n        dispatch(actions.setTokens({ accessToken, idToken: jwt }))\n      } catch (error) {\n        log.error(`${idToken} is not a valid JWT`)\n      }\n    },\n\n    /**\n     * Sets the user credentials necessary to make requests to the platform.\n     *\n     * @public\n     * @memberof api\n     * @requires userCredentialsAuth\n     * @method setCredentials\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.username The username including the application's domain.\n     * @param {string} credentials.password The user's password.\n     * @param {string} [credentials.authname] The user's authorization name.\n     * @example\n     * client.setCredentials({\n     *   username: 'alfred@example.com',\n     *   password: '********'\n     *   authname: '********'\n     * });\n     */\n    /**\n     * Sets the username and HMAC token necessary to make requests to the platform.\n     * An HMAC token is used to verify a user via the user's authorization within an of organization.\n     * HMAC tokens are generated by using the HmacSHA1 algorithm and a key on a data object\n     * containing an `authenticationTokenRequest` object with the following properties:\n     * - subscriberId - The user's subscriber ID in the organization.\n     * - organizationId - The ID of the organization the user is a part of.\n     *\n     * @public\n     * @memberof api\n     * @requires hmacTokenAuth\n     * @method setCredentials\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.username The username.\n     * @param {string} credentials.hmacToken An HMAC token for the user with the provided user ID.\n     * @example\n     * const hmacToken = HmacSHA1Algorithm({\n     *   authenticationTokenRequest: {\n     *     subscriberId: 'alfred',\n     *     organizationId: 'example.com'\n     *   }\n     * }, key)\n     *\n     * client.setCredentials({\n     *   username: 'alfred@example.com',\n     *   hmacToken\n     * });\n     */\n    /**\n     * Provides a bearerAccessToken to any backend services that the SDK instance deals with.\n     * The bearerAccessToken provided establishes what can be accessed by the SDK.\n     *\n     * @public\n     * @memberof api\n     * @requires bearerAccessTokenAuth\n     * @method setCredentials\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.username The username without the application's domain.\n     * @param {string} credentials.bearerAccessToken A bearerAccessToken retrieved using the authentication APIs of the platform.\n     * @example\n     * client.setCredentials({\n     *   username: 'alfred@example.com',\n     *   bearerAccessToken: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'\n     * });\n     */\n    /**\n     * Sets the authentication tokens necessary to make requests to the platform. The bearerAccessToken\n     * provided establishes what can be accessed by the SDK. The identity token represents who is authenticated.\n     *\n     * @public\n     * @memberof api\n     * @requires cpaasAuth\n     * @method setCredentials\n     * @param {Object} credentials The credentials object.\n     * @param {string} credentials.bearerAccessToken A bearerAccessToken retrieved using the authentication APIs of the platform.\n     *                                               The bearerAccessToken is same as the access token for the cpaas platform.\n     * @param {string} credentials.idToken An identity token retrieved using the authentication APIs of the platform.\n     * @example\n     * client.setCredentials({\n     *   bearerAccessToken: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...',\n     *   idToken: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'\n     * });\n     */\n    setCredentials ({ username, password, authname, hmacToken, bearerAccessToken, idToken }) {\n      log.debug(API_LOG_TAG + 'setCredentials: ', username)\n      // TODO: Refactor into multiple actions for each credential mode\n      // TODO: Validation of two authentication possibility scenerio\n      dispatch(\n        actions.setCredentials({\n          username,\n          password,\n          authname,\n          hmacToken,\n          bearerAccessToken,\n          idToken\n        })\n      )\n    }\n  }\n}\n","import reducer from './reducers'\nimport name from './name'\nimport api from './api'\n\nexport { reducer, name, api }\n","/**\n * This interface is for an authentication plugin.\n * @type {string}\n */\nconst name = 'authentication'\nexport default name\n","import * as actionTypes from './actionTypes'\nimport { handleActions } from 'redux-actions'\n\nimport { DISCONNECT_REASONS } from '../constants'\n\n// Helpers\nimport { getVersion } from '../../common/version'\n\nimport { merge } from 'lodash/fp'\n\nconst reducers = {}\n\nreducers[actionTypes.CONNECT] = {\n  next (state) {\n    return {\n      ...state,\n      isPending: true,\n      error: undefined\n    }\n  }\n}\n\nreducers[actionTypes.SET_CONNECTION_INFO] = {\n  next (state, action) {\n    return {\n      ...state,\n      platform: action.meta.platform,\n      connection: {\n        ...state.connection,\n        [action.meta.platform]: action.payload.connection\n      },\n      userInfo: action.payload.userInfo\n    }\n  }\n}\n\nreducers[actionTypes.CONNECT_FINISHED] = {\n  next (state, action) {\n    return {\n      ...state,\n      isConnected: true,\n      isPending: false,\n      error: undefined,\n      isSSO: action.meta.isSSO,\n      platform: action.meta.platform,\n      // Separate subscription, connection info based on the platform used.\n      // Store platform subscription information.\n      subscription: {\n        ...state.subscription,\n        [action.meta.platform]: action.payload.subscription\n      },\n      // Store platform connection information to be provided to other plugins.\n      connection: action.payload.connection\n        ? { ...state.connection, [action.meta.platform]: action.payload.connection }\n        : { ...state.connection },\n      // Store user information to be provided to developers.\n      userInfo: action.payload.userInfo ? action.payload.userInfo : state.userInfo\n    }\n  },\n  throw (state, action) {\n    return {\n      ...state,\n      isConnected: false,\n      isPending: false,\n      error: action.payload\n    }\n  }\n}\n\n// On connection occurred, store the connection information into state, but do\n// not update any status state. The connection has not yet finished.\nreducers[actionTypes.CONNECTION_OCCURRED] = {\n  next (state, action) {\n    return {\n      ...state,\n      // Separate subscription, connection info based on the platform used.\n      // Store platform subscription information.\n      subscription: {\n        ...state.subscription,\n        [action.meta.platform]: action.payload.subscription\n      },\n      // Store platform connection information to be provided to other plugins.\n      connection: {\n        ...state.connection,\n        [action.meta.platform]: action.payload.connection\n      }\n    }\n  }\n}\n\nreducers[actionTypes.DISCONNECT] = {\n  next (state) {\n    return {\n      ...state,\n      isPending: true,\n      error: undefined\n    }\n  }\n}\n\nreducers[actionTypes.DISCONNECT_FINISHED] = {\n  next (state, action) {\n    const returnObj = {\n      isConnected: false,\n      isPending: false,\n      error: undefined\n    }\n\n    // KAA-2538, we need to keep the userInfo even after disconnecting\n    //   but only for the 4.X new auth method\n    const isLostConnection = action.payload.reason === DISCONNECT_REASONS.LOST_CONNECTION\n    const isVersion4X = getVersion().startsWith('4')\n    if (isLostConnection && isVersion4X) {\n      returnObj.userInfo = state.userInfo\n    }\n    return returnObj\n  },\n  throw (state, action) {\n    return {\n      ...state,\n      // Treat an error as if we are still disconnected.\n      isConnected: false,\n      isPending: false,\n      error: action.payload\n    }\n  }\n}\n\nreducers[actionTypes.REFRESH_TOKENS_FINISHED] = {\n  next (state, action) {\n    // Merge the updated requestOptions into the current state.\n    const requestOptions = merge(\n      state.connection[action.meta.platform].requestOptions,\n      action.payload.connection.requestOptions\n    )\n\n    return {\n      ...state,\n      connection: {\n        ...state.connection,\n        [action.meta.platform]: {\n          ...state.connection[action.meta.platform],\n          ...action.payload.connection,\n          requestOptions\n        }\n      },\n      userInfo: {\n        ...state.userInfo,\n        accessToken: action.payload.connection.accessToken,\n        refreshToken: action.payload.connection.refreshToken\n      }\n    }\n  }\n}\n\n/*\n * Updates the subscription information for a specified platform.\n */\nreducers[actionTypes.UPDATE_SUBSCRIPTION_FINISH] = {\n  next (state, action) {\n    return {\n      ...state,\n      subscription: {\n        ...state.subscription,\n        [action.meta.platform]: {\n          ...state.subscription[action.meta.platform],\n          ...action.payload\n        }\n      }\n    }\n  }\n}\n\nreducers[actionTypes.SET_TOKEN] = {\n  next (state, action) {\n    // We received an idToken which is a JWT token that represents the identity of\n    // the user. This token contains information about the user. For now we only need\n    // the username. In the future we might use more from this token.\n    const idTokenPayload = action.payload.idToken\n    return {\n      ...state,\n      userInfo: {\n        ...state.userInfo,\n        accessToken: action.payload.accessToken,\n        username: idTokenPayload.preferred_username,\n        identity: idTokenPayload['services-identity']\n      }\n    }\n  }\n}\n\nreducers[actionTypes.SET_CREDENTIALS_FINISH] = {\n  next (state, action) {\n    return {\n      ...state,\n      error: undefined,\n      platform: action.meta.platform,\n      // Store platform connection information to be provided to other plugins.\n      connection: {\n        ...state.connection,\n        [action.meta.platform]: action.payload.connection\n      },\n      // Store user information to be provided to developers.\n      userInfo: action.payload.userInfo\n    }\n  },\n  throw (state, action) {\n    return {\n      ...state,\n      error: action.payload\n    }\n  }\n}\n\n/**\n * Auth Interface reducer\n * @method reducer\n * @param  {Object}  state - The current redux state.\n * @param  {Object}  action - A flux standard action.\n * @return {Object}  - The new redux state.\n * @example\n * Auth state structure example; connected.\n * authState = {\n *     isConnected: true,\n *     isPending: false,\n *     error: undefined,\n *     subscription: { ... },\n *     connection: { ... },\n *     userInfo: { ... }\n * }\n */\nconst reducer = handleActions(reducers, {\n  isConnected: false,\n  isPending: false\n})\nexport default reducer\n","import { cloneDeep } from 'lodash/fp'\nimport { SUBSCRIPTION_STATE } from '../constants'\nimport { platforms } from '../../constants'\n\n/**\n * Plugin selector function to expose state globally\n * @param  {Object} pluginState The localized (plugin) state\n * @return {Object}             The exposed state\n */\nexport function getExposedState (pluginState) {\n  // TODO: Filter out unwanted auth stuff from public state.\n  return cloneDeep(pluginState)\n}\n\n/*\n * Redux-saga selector functions.\n * Used with the `select` effect in sagas to Retrieves\n *      specific portions of the state.\n */\n\n/**\n * Retrieves the config options provided by the auth plugin.\n * @method getAuthConfig\n * @return {Object}\n */\nexport function getAuthConfig (state) {\n  return cloneDeep(state.config.authentication)\n}\n\n/**\n * Retrieves the subscription information of a platform.\n * @method getSubscriptionInfo\n * @param  {string} [platform] - The backend platform in use.\n * @return {Object}\n */\nexport function getSubscriptionInfo (state, platform) {\n  if (!platform) {\n    platform = getPlatform(state)\n  }\n\n  if (state.authentication.subscription) {\n    return cloneDeep(state.authentication.subscription[platform])\n  } else {\n    return undefined\n  }\n}\n\n/**\n * Retrieves the connection information of a platform.\n * Includes the info needed to make requests to that platform.\n * @method getConnectionInfo\n * @param  {string} [platform] - The backend platform in use.\n * @return {Object}\n */\nexport function getConnectionInfo (state, platform) {\n  if (!platform) {\n    platform = getPlatform(state)\n  }\n\n  if (state.authentication.connection) {\n    return cloneDeep(state.authentication.connection[platform])\n  } else {\n    return undefined\n  }\n}\n\n/**\n * Retrieves the domain of the callee address information of a platform.\n * @method getDomain\n * @return {string}\n */\nexport function getDomain (state) {\n  const { username = '', identity = username } = getUserInfo(state)\n  const [, domain = ''] = identity.split('@')\n  return domain\n}\n\n/**\n * Retrieves the identity of the currently logged-in user.\n * The identity is of the form: <userName>@<domain>\n * @method getIdentity\n * @return {string}\n */\nexport function getIdentity (state) {\n  const userInfo = getUserInfo(state)\n  return userInfo.identity || userInfo.username || ''\n}\n\n/**\n * Retrieves the user information.\n * @method getUserInfo\n * @return {Object} An object whose properties are: accessToken, identity & username. Identity is user's primary contact address.\n */\nexport function getUserInfo (state) {\n  return cloneDeep(state.authentication.userInfo) || {}\n}\n\n/**\n * Retrieves a flag from the store representing if the login scenario was SSO or not.\n * @method getAuthScenario\n * @return {boolean}\n */\nexport function getAuthScenario (state) {\n  return cloneDeep(state.authentication.isSSO)\n}\n\n/**\n * Retrieves information about the services that the user is subscribed for.\n * @method getServices\n * @return {Object}\n */\nexport function getServices (state, platform) {\n  const subscription = getSubscriptionInfo(state, platform)\n\n  if (subscription && subscription.servicesInfo) {\n    return subscription.servicesInfo\n  } else {\n    return {\n      // TODO: Have default as part of the reducer.\n      requested: [],\n      received: [],\n      missing: [],\n      status: SUBSCRIPTION_STATE.NONE,\n      services: {}\n    }\n  }\n}\n\n/**\n * Retrieves the name of the backend platform the user is currently subscribed to.\n * @method getPlatform\n * @return {string}\n */\nexport function getPlatform (state) {\n  let platform = state.authentication.platform\n\n  /**\n   * Link and UC set the platform in auth state after setting credentials /\n   *    connecting, but CPaaS does not (because the idea was to move away from\n   *    needing the platform). So if there isn't a platform, but there is a\n   *    CPaaS-specific identity, then assume the platform is CPaaS.\n   * This was needed for the request plugin to get the right platform when using\n   *    the `getRequestInfo` selector below.\n   * This is a workaround for bad design.\n   */\n  if (!platform && getUserInfo(state).identity) {\n    platform = 'cpaas'\n  }\n\n  return platform\n}\n\n/**\n * Retrieves info needed to make a REST request for the different platforms.\n * @method getRequestInfo\n * @return {Object}\n */\nexport function getRequestInfo (state, platform) {\n  if (!platform) {\n    platform = getPlatform(state)\n  }\n\n  const { subscription, clientCorrelator } = getAuthConfig(state)\n  let { server } = getAuthConfig(state)\n  const { userInfo } = cloneDeep(state.authentication)\n\n  // For backwards compatability, we need to fall back to\n  // subscription for the server connection details\n  if (!server) {\n    server = {\n      protocol: subscription.protocol,\n      base: subscription.server,\n      port: subscription.port,\n      version: subscription.version\n    }\n  }\n\n  let requestInfo\n\n  if (platform === platforms.CPAAS) {\n    requestInfo = {\n      baseURL: `${server.protocol}://${server.base}:${server.port}`,\n      version: server.version,\n      username: userInfo.username,\n      // TODO: Token doesn't need to be here if its in requestOptions.\n      token: userInfo.accessToken,\n      clientCorrelator,\n      // TODO: DO NOT hardcode this here (?). The original idea was that this\n      //    is set in state after connection.\n      options: {\n        headers: {\n          Accept: 'application/json',\n          Authorization: `Bearer ${userInfo.accessToken}`,\n          'Content-Type': 'application/json'\n        }\n      }\n    }\n  } else if (platform === platforms.UC) {\n    requestInfo = {\n      baseURL: `${subscription.protocol}://${subscription.server}:${subscription.port}`,\n      version: subscription.version,\n      username: userInfo.username\n    }\n  } else if (platform === platforms.LINK) {\n    requestInfo = {\n      baseURL: `${server.protocol}://${server.base}:${server.port}`,\n      version: server.version,\n      username: userInfo.username\n    }\n\n    /*\n     * If the requested platform was Link but the platform set in state is\n     *    UC, and so we're using UC but making a request for SPiDR.\n     * Change the requestInfo provided to ensure the URL will be valid for\n     *    SPiDR and authentication will be valid for CIM.\n     */\n    const setPlatform = getPlatform(state)\n    if (setPlatform === platforms.UC) {\n      requestInfo.version = '1'\n\n      const connInfo = getConnectionInfo(state, setPlatform)\n      if (connInfo && connInfo.requestOptions) {\n        requestInfo.requestOptions = connInfo.requestOptions\n      }\n      return requestInfo\n    }\n  } else {\n    // Platform is not supported\n    return {}\n  }\n\n  const connInfo = getConnectionInfo(state, platform)\n  if (connInfo && connInfo.requestOptions) {\n    requestInfo.requestOptions = connInfo.requestOptions\n  }\n\n  return requestInfo\n}\n","// Auth plugin.\nimport { reducer, name, api } from '../interface'\n\n// Other plugins.\nimport { update as updateConfig } from '../../config/interface/actions'\n\n// Libraries.\nimport { mergeValues } from '../../common/utils'\nimport { pick } from 'lodash/fp'\nimport { put } from 'redux-saga/effects'\n\n/**\n * Basic auth plugin that has exposes no implementation.\n * For use with special case builds which don't use an auth plugin,\n *      but need to store authentication state.\n * @method baseAuth\n * @return {Object} A base authentication plugin.\n */\nexport default function baseAuth (options = {}) {\n  const defaultOptions = {\n    subscription: {\n      expires: 3600,\n      // Note: No default `service`.\n      protocol: 'https',\n      version: '1',\n      port: '443'\n    },\n    websocket: {\n      protocol: 'wss',\n      port: '443'\n    }\n  }\n  options = mergeValues(defaultOptions, options)\n\n  function * init () {\n    yield put(updateConfig(options, name))\n  }\n\n  // Modified auth API. Only exposes state getters.\n  function noopAPI ({ dispatch, getState }) {\n    const normalAPI = api({ dispatch, getState })\n\n    // Auth APIs that only return state.\n    const apiGetters = ['getUserInfo', 'getConnection', 'getServices']\n    return pick(apiGetters, normalAPI)\n  }\n\n  return {\n    name,\n    reducer,\n    init,\n    api: noopAPI\n  }\n}\n","// Redux-Saga\nimport {\n  actionChannel,\n  call,\n  delay,\n  put,\n  race,\n  select,\n  take,\n  fork,\n  cancel,\n  cancelled,\n  takeEvery\n} from 'redux-saga/effects'\n\n// Auth\nimport * as actions from '../interface/actions'\nimport * as actionTypes from '../interface/actionTypes'\nimport { DISCONNECT_REASONS } from '../constants'\n\n// State selectors\nimport { getAuthConfig, getSubscriptionInfo, getConnectionInfo, getAuthScenario } from '../interface/selectors'\n\n// Constants\nimport { platforms } from '../../constants'\n\n// Errors\nimport BasicError, { authCodes } from '../../errors'\n\n// Requests\nimport { subscribe, unsubscribe, resubscribe } from '../subscription/requests'\n\n// Other plugins.\nimport { NOTIFICATION_RECEIVED } from '../../notifications/interface/actionTypes'\nimport * as connectivityActionTypes from '../../connectivity/interface/actionTypes'\nimport { connectWebsocket, disconnectWebsocket } from '../../connectivity/interface/effects'\nimport { getConnectionState } from '../../connectivity/interface/selectors'\n\n// Libraries\nimport base64 from 'base-64'\nimport utf8 from 'utf8'\nimport { mergeValues } from '../../common/utils'\n\n// Logging\nimport { logManager } from '../../logs'\n\n// This is an Link plugin.\nconst platform = platforms.LINK\n\n// Get the logger\nconst log = logManager.getLogger('AUTH')\n\n/**\n * Link connect saga. This Saga is in charge of the flow for connecting and disconnecting.\n * Handles the workflow of connecting or disconnecting to SPiDR.\n * @method connectFlow\n */\nexport function * connectFlow () {\n  while (true) {\n    // Wait for a CONNECT action.\n    const action = yield take(actionTypes.CONNECT)\n\n    // Retrieve the connection info.\n    const config = yield select(getAuthConfig)\n\n    // Fork off and try to connect.\n    const task = yield fork(connect, action, config)\n\n    // Take the actions for if an error or disconnect occurs.\n    const finishOrError = yield take([actionTypes.CONNECT_FINISHED, actionTypes.DISCONNECT])\n\n    /**\n     * This if block covers 2 of the 3 flows of connect / disconnect.\n     * 1. The first block covers what happens when we receive a DISCONNECT action before we finish connecting.\n     *        IE DISCONNECT comes before a CONNECT_FINISHED.\n     * 2. The second block covers what happens when we get a successful CONNECT_FINISHED event before any DISCONNECT events.\n     * 3. The third scenario is not explicitly covered here. That scenario is when we received a CONNECT_FINISHED event with an error before any disconnect events.\n     *      In this case, there is nothing that we explicitly have to do, since a CONNECT_FINISHED event with an error doesn't place anything into the state.\n     *      Therefore there is no real cleanup for us to do in this scenario. We then want to wait for the next CONNECT ( which we do via the next iteration of the while loop).\n     **/\n    if (finishOrError.type === actionTypes.DISCONNECT) {\n      yield cancel(task)\n    } else if (finishOrError.type === actionTypes.CONNECT_FINISHED && !finishOrError.error) {\n      const disconnectAction = yield take([actionTypes.DISCONNECT, actionTypes.DISCONNECT_FINISHED])\n\n      // if disconnect has finished, we dont need to do a teardown of auth state, or disconnect the websocket, so reset connectFlow\n      if (disconnectAction.type === actionTypes.DISCONNECT_FINISHED) {\n        continue\n      }\n\n      yield call(disconnect)\n    }\n  }\n}\n\n/**\n * Link connect function.\n * Performs the workflow of connecting to SPiDR.\n * @method connect\n */\nexport function * connect (action, config) {\n  // Request options, to be used for all subsequent requests after connect.\n  let requestOptions = {\n    headers: {}\n  }\n  // Determine what type of connect method to use. This determines what extra\n  //      information needs to be added to the request.\n  const { credentials, options } = action.payload\n  if (credentials) {\n    const { username, password, authname, hmacToken } = credentials\n    if (hmacToken) {\n      // Only need the hmacToken in the x-token header when subscribing.\n      // Will need to remove this once subscription succeeds.\n      // Once subscription succeeds, we will receive a sessionId which we will need to use as the x-session header for subsequent requests.\n      log.info('Connecting with hmacToken scenario.')\n      requestOptions.headers['x-token'] = hmacToken\n    } else if (authname && password) {\n      log.info('Connecting with authname/password scenario.')\n      requestOptions.headers.Authorization = 'Basic ' + base64.encode(utf8.encode(authname + ':' + password))\n    } else if (username && password) {\n      log.info('Connecting with username/password scenario.')\n      requestOptions.headers.Authorization = 'Basic ' + base64.encode(utf8.encode(username + ':' + password))\n    } else {\n      log.info('Unexpected connect scenario.')\n      const error = new BasicError({\n        message: 'This login signature is not valid.',\n        code: authCodes.INVALID_CREDENTIALS\n      })\n      yield put(actions.connectFinished({ error }, platform))\n      return\n    }\n  }\n  try {\n    requestOptions = mergeValues(options, requestOptions)\n\n    // Gather information to provide externally.\n    const userInfo = {\n      username: action.payload.credentials.username\n    }\n    // Gather information to provide internally, to other plugins.\n    const connection = {\n      server: {\n        protocol: config.subscription.protocol,\n        server: config.subscription.server,\n        port: config.subscription.port,\n        version: config.subscription.version\n      },\n      username: action.payload.credentials.username,\n      // Request options that all other (Link) plugins will use.\n      requestOptions\n    }\n    yield put(\n      actions.setConnectionInfo(\n        {\n          userInfo,\n          connection\n        },\n        platform\n      )\n    )\n\n    const response = yield call(subscribe, config.subscription, credentials, requestOptions)\n\n    if (response.error) {\n      yield put(actions.connectFinished({ error: response.error }, platform))\n      return\n    }\n\n    // If used HMAC token for authentication\n    if (credentials.hmacToken) {\n      // Subsequent requests must not have the x-token header and must have the x-session header.\n      // Need to delete the x-token header for subsequent requests to work.\n      delete requestOptions.headers['x-token']\n      // Set the sessionId as the x-session header for use by subsequent requests.\n      requestOptions.headers['x-session'] = response.subscriptionParams.sessionId\n    }\n\n    // Add token to connection info\n    connection.token = response.token\n    // Keep track of service subscription information.\n    const subscription = {\n      ...response.subscriptionParams,\n      servicesInfo: response.servicesInfo,\n      url: response.subscription\n    }\n\n    // Need to create a new object, rather than adding `url` to\n    // connectionInfo in order to prevent state mutation.\n    const websocketInfo = {\n      ...config.websocket,\n      url: subscription.notificationChannel\n    }\n\n    // Request the websocket connection.\n    const wsOpenOrError = yield connectWebsocket(websocketInfo, platform)\n\n    if (wsOpenOrError.error) {\n      throw wsOpenOrError.payload\n    }\n\n    yield put(\n      actions.connectFinished(\n        {\n          subscription,\n          userInfo,\n          connection\n        },\n        platform\n      )\n    )\n  } catch (error) {\n    // Error: login failed.\n    yield put(actions.connectFinished({ error }, platform))\n  } finally {\n    if (yield cancelled()) {\n      yield call(disconnect)\n      // If we enter this point we know we got disconnect mid connection attempt BEFORE connect_finished fired.\n      // Therefore we have to put any special store cleanup code in here.\n      // Disconnect_finished action handles clearing up the store so no logic needs to be here right now.\n    }\n  }\n}\n\n/**\n * Link disconnect function.\n * Performs the actions for actually disconnecting from SPiDR.\n * @method disconnect\n */\nexport function * disconnect () {\n  // Retrieve needed info from the store.\n  const subscription = yield select(getSubscriptionInfo)\n  const connection = yield select(getConnectionInfo)\n\n  // If the above info is not present, we probably got a disconnect mid-connection attempt.\n  let response = {}\n  if (subscription && connection) {\n    // If the info is in the store we can go ahead and unsubscribe.\n    response = yield call(unsubscribe, connection, subscription.url)\n  }\n\n  if (response.error) {\n    log.info('Failed to unsubscribe from services. Error: ', response.error)\n    // We should still continue and attempt to also disconnect to websocket ?\n  }\n\n  log.info('Successfully unsubscribed from services.')\n  const wsState = yield select(getConnectionState, platform)\n  if (wsState.connected) {\n    log.info('Disconnecting from websocket.')\n    // disconnect from the websocket\n    yield disconnectWebsocket(undefined, platform)\n  }\n\n  // Dispatch disconnect finished action appropriate for the response.\n  if (response.error) {\n    log.info('Failed to disconnect from websocket. Error: ', response.error)\n    yield put(actions.disconnectFinished(response))\n  } else {\n    log.info('Successfully disconnected from websocket.')\n    // We enter this block if we unsubscribed succesfully OR we never even called unsub. Either way we are unsubscribed.\n    yield put(actions.disconnectFinished())\n  }\n}\n\n/**\n * Saga for extending a user's subscription.\n * When triggered, make a resub request to SPiDR for a specific subscription.\n * @method extendSubscription\n */\nexport function * extendSubscription () {\n  // Re-subscription timer is triggered by a successful connect or a previous resub finishing.\n  // Use a channel to queue the triggers (so it can catch the put resub action at the end).\n  const resubTriggers = yield actionChannel([actionTypes.CONNECT_FINISHED, actionTypes.RESUBSCRIPTION_FINISHED])\n\n  while (true) {\n    const action = yield take(resubTriggers)\n\n    // If the action was a connection error, ignore it.\n    if (action.type === actionTypes.CONNECT_FINISHED && action.error) {\n      continue\n    }\n\n    const isOnSSO = yield select(getAuthScenario)\n    let subscription = {}\n    let connection = {}\n\n    if (isOnSSO) {\n      const linkConnection = yield select(getConnectionInfo)\n\n      connection = {\n        server: linkConnection.server,\n        token: action.payload.connection.token\n      }\n      subscription = yield select(getSubscriptionInfo)\n    } else {\n      connection = yield select(getConnectionInfo)\n      subscription = yield select(getSubscriptionInfo)\n    }\n\n    let attemptNum\n    // If the action was a failed resubscription, increment the attempt number.\n    if (action.type === actionTypes.RESUBSCRIPTION_FINISHED && action.error) {\n      attemptNum = action.payload.attemptNum + 1\n    } else {\n      attemptNum = 1\n    }\n\n    // Set the delay to be halfway between now and when the subscription expires.\n    let resubDelay = (subscription.expires * 1000) / Math.pow(2, attemptNum)\n    // Don't try to resub more often than every 5 minutes.\n    resubDelay = resubDelay > 30000 ? resubDelay : 30000\n\n    // Wait for either the resub delay or a disconnect action.\n    const { expiry } = yield race({\n      expiry: delay(resubDelay),\n      disconnect: take(actionTypes.DISCONNECT_FINISHED)\n    })\n\n    // If the resubDelay expired, attempt resubscription\n    if (expiry) {\n      const response = yield call(resubscribe, connection, subscription, isOnSSO)\n\n      if (response.error) {\n        yield put(\n          actions.resubscribeFinished(\n            {\n              error: response.error,\n              attemptNum\n            },\n            platform\n          )\n        )\n      } else {\n        // TODO: Check response.serviceInfo for full/partial resubscription.\n        yield put(actions.resubscribeFinished({ attemptNum }, platform))\n      }\n    }\n  }\n}\n\n/**\n * Saga for updating a subscription's services.\n * @method updateSubscription\n */\nexport function * updateSubscription () {\n  while (true) {\n    const action = yield take(actionTypes.UPDATE_SUBSCRIPTION)\n    log.debug(\"Attempting to update subscription's services.\", action.payload)\n\n    const isOnSSO = yield select(getAuthScenario)\n    const connection = yield select(getConnectionInfo)\n    const subscription = yield select(getSubscriptionInfo)\n    subscription.service = action.payload\n\n    // Use the resubscribe request to update the subscription. The endpoint is for both.\n    const response = yield call(resubscribe, connection, subscription, isOnSSO)\n\n    if (response.error) {\n      log.debug('Failed to update subscription services.')\n      yield put(\n        actions.updateSubscriptionFinished(\n          {\n            error: new BasicError({\n              message: response.message,\n              code: authCodes.LINK_UPDATE_SUBSCRIPTION_FAIL\n            })\n          },\n          platform\n        )\n      )\n    } else {\n      log.debug('Succesfully updated subscription services.', action.payload)\n      // TODO: Use response.serviceInfo to update full/partial subscription.\n      // Only update the service substate in subscription.\n      yield put(\n        actions.updateSubscriptionFinished(\n          {\n            subscription: {\n              service: action.payload\n            }\n          },\n          platform\n        )\n      )\n    }\n  }\n}\n\n/**\n * Saga that handles a \"subscription gone\" notification.\n * Treat the notification as a forced disconnect.\n * @method onSubscriptionGone\n */\nexport function * onSubscriptionGone () {\n  // Redux-saga take() pattern.\n  // Take notifications about the subscription being 'gone'.\n  function takeGoneSubscription (action) {\n    return (\n      action.type === NOTIFICATION_RECEIVED &&\n      action.payload.notificationMessage &&\n      action.payload.notificationMessage.eventType === 'gone'\n    )\n  }\n\n  while (true) {\n    yield take(takeGoneSubscription)\n\n    // Dispatch an action to disconnect the websocket (and let the connectivity\n    //      plugin know we expect it to be disconnected).\n    const wsState = yield select(getConnectionState, platform)\n    if (wsState.connected) {\n      yield disconnectWebsocket(undefined, platform)\n    }\n\n    // Dispatch a disconnect finished action to trigger \"user disconnected\" logic.\n    yield put(actions.disconnectFinished({ reason: DISCONNECT_REASONS.GONE }))\n  }\n}\n\n/**\n * Triggers onConnectionLost saga when a connectivity.WS_RECONNECT_FAILED actionType occurs\n * @method onConnectionLostEntry\n */\nexport function * onConnectionLostEntry () {\n  yield takeEvery(connectivityActionTypes.WS_RECONNECT_FAILED, onConnectionLost)\n}\n\n/**\n * Handles lost connections from the connectivity plugin\n * @method onConnectionLost\n */\nexport function * onConnectionLost () {\n  yield put(actions.disconnectFinished({ reason: DISCONNECT_REASONS.LOST_CONNECTION }))\n}\n","// Authentication plugin.\nimport { getPlatform } from '../interface/selectors'\nimport { parseSpidrServices } from './services'\n\n// Other plugins.\nimport request from '../../request/effects'\nimport BasicError, { authCodes } from '../../errors'\nimport { logManager } from '../../logs'\n\n// Libraries.\nimport { call, select } from 'redux-saga/effects'\nimport { mergeValues } from '../../common/utils'\n\n// Constants\nimport { platforms } from '../../constants'\n\nconst log = logManager.getLogger('AUTH')\n\n/**\n * Subscribe to SPiDR with the provided information.\n * @method subscribe\n * @param  {Object} connection Server information.\n * @param  {Object} credentials User information.\n * @return {Object} Subscription response.\n */\nexport function * subscribe (connection, credentials, extras = {}) {\n  /*\n   * TODO: Clean-up / fix the function signature. The requestOptions (eg. headers)\n   *    are mixed with the API options (eg. client correlator) when they're used\n   *    for unrelated purposes.\n   */\n  const subscribeType = connection.isAnonymous ? 'anonymous' : 'user'\n  let requestOptions = {}\n  requestOptions.method = 'POST'\n\n  requestOptions.url =\n    `${connection.protocol}://${connection.server}:${connection.port}` +\n    `/rest/version/${connection.version}` +\n    `/${subscribeType}/${credentials.username}/subscription`\n\n  requestOptions.body = JSON.stringify({\n    subscribeRequest: {\n      expires: connection.expires,\n      service: connection.service,\n      localization: connection.localization || 'English_US',\n      useTurn: connection.useTurn || true,\n      notificationType: connection.notificationType || 'WebSocket',\n      supported: ['RingingFeedback'],\n      forceLogOut: (extras.forceLogOut || false).toString(),\n      clientCorrelator: extras.clientCorrelator\n    }\n  })\n\n  // If there were any extra request options, merge them into the\n  //      options for this request. Priority is for the options defined here.\n  requestOptions = mergeValues(extras, requestOptions)\n\n  log.info(`Subscribing user ${credentials.username}`)\n  // Send the subscription request.\n  const response = yield request(requestOptions)\n\n  if (response.error) {\n    if (response.payload.body) {\n      const body = response.payload.body\n\n      let statusCode\n      if (body.statusCode && body.reason) {\n        /*\n         * In some cases, the response is not wrapped in a `subscribeResponse`\n         *    property. This seems to be when using a pre-provisioned user (stored\n         *    as part of KL?) rather than a dynamically created user (retrieved\n         *    from AS?).\n         * Reference: ABE-23981 (and KAA-1937)\n         */\n        statusCode = body.statusCode\n      } else if (body.authorizationResponse && body.authorizationResponse.statusCode) {\n        /*\n         * In other cases, the response is wrapped in a `authorizationResponse`\n         *    property instead. This seems to be when an anonymous user\n         *    subscription fails (a success has `subscribeResponse`).\n         * Reference: KAA-2440\n         */\n        statusCode = body.authorizationResponse.statusCode\n      } else {\n        statusCode = body.subscribeResponse.statusCode\n      }\n      log.debug(`Failed user subscription with status code ${statusCode}.`)\n\n      // Handle errors from the server.\n      return {\n        // TODO: Better error; more info.\n        error: new BasicError({\n          message: `Failed to subscribe user. Code: ${statusCode}.`,\n          code: authCodes.LINK_SUBSCRIBE_FAIL\n        })\n      }\n    } else {\n      log.debug('Failed user subscription.', response.payload.result.message)\n      // Handle errors from the request plugin.\n      return {\n        // TODO: Better error; more info.\n        error: new BasicError({\n          message: `Subscribe request failed: ${response.payload.result.message}.`,\n          // TODO: Shared error codes.\n          code: authCodes.LINK_SUBSCRIBE_FAIL\n        })\n      }\n    }\n  } else {\n    // Request was successful.\n    const subscribeResponse = response.payload.body.subscribeResponse\n\n    const subscribedServices = subscribeResponse.subscriptionParams.service\n    const servicesInfo = yield call(parseSpidrServices, connection.service, subscribedServices)\n    log.debug(`Successfully subscribed user. Service subscription status: ${servicesInfo.status}`)\n\n    return {\n      error: false,\n      servicesInfo,\n      ...subscribeResponse\n    }\n  }\n}\n\n/**\n * Unsubscribe from SPiDR with the provided subscription info.\n * @method unsubscribe\n * @param  {Object}    connection Server information for the service in use.\n * @param  {string}    connection.server Server information for generating the URL.\n * @param  {string}    connection.requestOptions Common request options to be added.\n * @param  {string}    subscriptionURL URL of the user's subscription instance.\n * @return {Object}    Unsubscription response.\n */\nexport function * unsubscribe (connection, subscriptionURL) {\n  const requestOptions = {}\n  requestOptions.method = 'DELETE'\n\n  requestOptions.url =\n    `${connection.server.protocol}://${connection.server.server}:${connection.server.port}` + subscriptionURL\n\n  log.info('Unsubscribing user.')\n  // Send the unsubscribe request.\n  const response = yield request(requestOptions)\n\n  if (response.error) {\n    if (response.payload.body && response.payload.body.subscribeResponse) {\n      // Handle errors from the server.\n      const { statusCode } = response.payload.body.subscribeResponse\n      log.debug(`Failed to unsubscribe user with status code ${statusCode}.`)\n\n      return {\n        // TODO: Better error; more info.\n        error: new BasicError({\n          message: `Failed to unsubscribe user. Code: ${statusCode}.`,\n          code: authCodes.LINK_UNSUBSCRIBE_FAIL\n        })\n      }\n    } else {\n      // Handle errors from the request helper.\n      const { message } = response.payload.result\n      log.debug('Failed user unsubscription.', message)\n\n      return {\n        // TODO: Better error; more info.\n        error: new BasicError({\n          message: `Unsubscribe request failed: ${message}.`,\n          // TODO: Shared error codes.\n          code: authCodes.LINK_UNSUBSCRIBE_FAIL\n        })\n      }\n    }\n  } else {\n    // Request was successful.\n    const unsubResponse = response.payload.body.subscribeResponse\n    const platform = yield select(getPlatform)\n\n    if (platform === platforms.LINK && unsubResponse.statusCode === 0) {\n      log.info('Successfully unsubscribed user.')\n      // Link success response.\n      return {\n        error: false,\n        ...unsubResponse\n      }\n    } else if (platform === platforms.UC && unsubResponse.statusCode === 0) {\n      log.info('Successfully unsubscribed user.')\n      // Link success response.\n      return {\n        error: false,\n        ...unsubResponse\n      }\n    } else {\n      log.info('Failed to unsubscribe user. Status Code: ', unsubResponse.statusCode)\n      // Unknown statusCode, consider as failure.\n      return {\n        error: new BasicError({\n          message: `Unknown error; statusCode: ${unsubResponse.statusCode}.`,\n          code: authCodes.LINK_UNSUBSCRIBE_FAIL\n        })\n      }\n    }\n  }\n}\n\n/**\n * Resubscribe to SPiDR to extend an existing subscription.\n * @method resubscribe\n * @param  {Object}    connection Server information for the service in use.\n * @param  {string}    connection.server Server information for generating the URL.\n * @param  {string}    connection.requestOptions Common request options to be added.\n * @param  {Object}    subscription Information about the subscription instance.\n * @param  {string}    subscription.expires - The time (in seconds) until subscription expiry.\n * @param  {Array}     subscription.service - The SPiDR services to resubscribe to.\n * @param  {Array}     subscription.url - The URL of the user's subscription instance.\n * @return {Object}    Resubscription response.\n */\nexport function * resubscribe (connection, subscription) {\n  const requestOptions = {}\n  requestOptions.method = 'PUT'\n\n  if (subscription.clientCorrelator) {\n    requestOptions.url =\n      `${connection.server.protocol}://${connection.server.server}:${connection.server.port}` +\n      `/rest/version/${connection.server.version}` +\n      `/user/${connection.username}/subscription/clientCorrelator/${subscription.clientCorrelator}`\n  } else {\n    requestOptions.url =\n      `${connection.server.protocol}://${connection.server.server}:${connection.server.port}` + subscription.url\n  }\n\n  // TODO: Don't hardcode the defaults here. Should be shared with\n  //      the subscribe request as well.\n  requestOptions.body = JSON.stringify({\n    subscribeRequest: {\n      expires: subscription.expires,\n      service: subscription.service,\n      localization: subscription.localization || 'English_US',\n      useTurn: subscription.useTurn || true,\n      notificationType: subscription.notificationType || 'WebSocket'\n    }\n  })\n\n  log.info('Resubscribing user.')\n  // Send the subscription update request.\n  const response = yield request(requestOptions)\n\n  if (response.error) {\n    if (response.payload.body) {\n      // Handle errors from the server.\n      const { statusCode } = response.payload.body.subscribeResponse\n      log.debug(`Failed to update user subscription with status code ${statusCode}.`)\n\n      return {\n        // TODO: Better error; more info.\n        error: new BasicError({\n          message: `Failed to update user subscription. Code: ${statusCode}.`,\n          code: authCodes.LINK_UPDATE_SUBSCRIPTION_FAIL\n        })\n      }\n    } else {\n      // Handle errors from the request helper.\n      const { message } = response.payload.result\n      log.debug('User subscription update request failed.', message)\n\n      return {\n        // TODO: Better error; more info.\n        error: new BasicError({\n          message: `Update subscription request failed.: ${message}.`,\n          // TODO: Shared error codes.\n          code: authCodes.LINK_UPDATE_SUBSCRIPTION_FAIL\n        })\n      }\n    }\n  } else {\n    // Request was successful.\n    const resubResponse = response.payload.body.subscribeResponse\n\n    if (resubResponse.statusCode === 0 || resubResponse.statusCode === 2) {\n      const subscribedServices = resubResponse.subscriptionParams.service\n      const servicesInfo = yield call(parseSpidrServices, subscription.service, subscribedServices)\n      log.debug(`Successfully resubscribed user. Service resubscription status: ${servicesInfo.status}`)\n\n      // Success.\n      return {\n        error: false,\n        servicesInfo,\n        ...resubResponse\n      }\n    } else {\n      log.info('Failed to resubscribe user. Status Code: ', resubResponse.statusCode)\n      // Unknown statusCode, consider as failure.\n      return {\n        error: new BasicError({\n          message: `Unknown error; statusCode: ${resubResponse.statusCode}.`,\n          code: authCodes.LINK_UPDATE_SUBSCRIPTION_FAIL\n        })\n      }\n    }\n  }\n}\n","import { SUBSCRIPTION_STATE } from '../constants'\n\n/**\n * Uses the requested and received SPiDR [subscription] services to determine\n *      the SDK subscription status for each service.\n * @method parseSpidrServices\n * @param  {Array}  requested The list of requested SPiDR services.\n * @param  {Array}  received The list of received SPiDR services.\n * @return {Object} Information about the SDK's subscriptions.\n */\nexport function parseSpidrServices (requested, received) {\n  // UC platform is not case-sensitive (Link is), so filter without caring about case.\n  const upperReceived = received.map(service => service.toUpperCase())\n\n  // Find the missing services.\n  const missing = requested.filter(function (reqService) {\n    // If the requested service was received (not caring about case),\n    //      it is not missing.\n    return upperReceived.indexOf(reqService.toUpperCase()) === -1\n  })\n\n  const subscriptions = {\n    requested,\n    received,\n    missing,\n    status: 'UNKNOWN',\n    services: {}\n  }\n\n  // Determine the overall subscription status.\n  if (received.length === 0) {\n    subscriptions.status = SUBSCRIPTION_STATE.NONE\n  } else if (received.length > 0 && missing.length > 0) {\n    subscriptions.status = SUBSCRIPTION_STATE.PARTIAL\n  } else if (received.length > 0 && requested.length === received.length) {\n    subscriptions.status = SUBSCRIPTION_STATE.FULL\n  } else {\n    // Should never reach this case.\n  }\n\n  // List the individual service statuses.\n  received.forEach(function (service) {\n    subscriptions.services[service] = true\n  })\n  missing.forEach(function (service) {\n    subscriptions.services[service] = false\n  })\n\n  return subscriptions\n}\n","import { mapKeys } from 'lodash/fp'\n\n/**\n * Helper function. Converts an object so that its keys are the same as its values.\n * @method mapValuesToKeys\n * @param  {Object} source\n * @return {Object}\n */\nfunction mapValuesToKeys (source) {\n  return mapKeys(function (value) {\n    return source[value]\n  })(source)\n}\n\n/**\n * Enum of FCS call states.\n * Key is the \"code\" that FCS uses, and value is the text representation.\n * These are taken from FCS callManager.js, but inversed.\n *      See `fcs.call.States`.\n * @type {Object}\n */\nexport const FCS_CALL_STATES = {\n  0: 'IN_CALL',\n  1: 'ON_HOLD',\n  2: 'RINGING',\n  3: 'ENDED',\n  4: 'REJECTED',\n  5: 'OUTGOING',\n  6: 'INCOMING',\n  7: 'ANSWERING',\n  8: 'JOINED',\n  9: 'RENEGOTIATION',\n  10: 'TRANSFERRED',\n  11: 'ON_REMOTE_HOLD',\n  12: 'CALL_IN_PROGRESS',\n  13: 'EARLY_MEDIA',\n  14: 'TRANSFER_FAILURE',\n  15: 'REPLACING'\n}\n\n/**\n * Call states.\n * Same as FCS_CALL_STATES, except both key and value are the text representation.\n * @name CALL_STATES_FCS\n */\nexport const CALL_STATES_FCS = mapValuesToKeys(FCS_CALL_STATES)\n\n/**\n * Call states\n * Call states used in the cpaas and link call plugins\n * @name CALL_STATES\n */\nexport const CALL_STATES = {\n  INITIATING: 'Initiating',\n  INITIATED: 'Initiated',\n  EARLY_MEDIA: 'Early Media',\n  RINGING: 'Ringing',\n  CANCELLED: 'Cancelled',\n  CONNECTED: 'Connected',\n  ON_HOLD: 'On Hold',\n  ENDED: 'Ended'\n}\n\n/**\n * Possible states a call's media can be in.\n * Describes whether media is flowing or if an endpoint is preventing media flow.\n * @name CALL_MEDIA_STATES\n * @type {Object}\n * @property {string} CONNECTED Both call endpoints allow for media to flow.\n * @property {string} LOCAL_HOLD Local endpoint disallows media from flowing.\n * @property {string} REMOTE_HOLD Remote endpoint disallows media from flowing.\n * @property {string} DUAL_HOLD Both endpoints disallow media from flowing.\n */\nexport const CALL_MEDIA_STATES = {\n  CONNECTED: 'Connected',\n  LOCAL_HOLD: 'Local Hold',\n  REMOTE_HOLD: 'Remote Hold',\n  DUAL_HOLD: 'Dual Hold'\n}\n\n/**\n * Call operations that require negotiation.\n * @name OPERATIONS\n * @type {Object}\n * @property {string} CHANGE_MEDIA Media flow remains the same, includes non-flow related media changes.\n * @property {string} HOLD_MEDIA   Media flow stops. May include non-flow related media changes.\n * @property {string} UNHOLD_MEDIA Media flow restarts. May include non-flow related media changes.\n * @property {string} MUSIC_ON_HOLD Media flow changes to sendonly.\n */\nexport const OPERATIONS = {\n  CHANGE_MEDIA: 'Change Media',\n  HOLD_MEDIA: 'Hold Media',\n  UNHOLD_MEDIA: 'Unhold Media',\n  MUSIC_ON_HOLD: 'Music on hold'\n}\n\n/**\n * Complex call operations.\n * @name COMPLEX_OPERATIONS\n * @type {Object}\n * @property {string} DIRECT_TRANSFER\n * @property {string} CONSULTATIVE_TRANSFER\n * @property {string} JOIN\n */\nexport const COMPLEX_OPERATIONS = {\n  DIRECT_TRANSFER: 'Direct Transfer',\n  CONSULTATIVE_TRANSFER: 'Consultative Transfer',\n  JOIN: 'Join'\n}\n\n/**\n * Complex call operation messages.\n * @name COMPLEX_OPERATION_MESSAGES\n * @type {Object}\n * @property {string} DIRECT_TRANSFER_SUCCESS Success message for direct transfer.\n * @property {string} CONSULTATIVE_TRANSFER_SUCCESS Success message for consultative transfer (matches reasonText from notification).\n * @property {string} JOIN_SUCCESS Success message for join.\n * @property {string} DIRECT_TRANSFER_FAILURE Failure message for direct transfer.\n * @property {string} CONSULTATIVE_TRANSFER_FAILURE Failure message for consultative transfer.\n * @property {string} JOIN_FAILURE Failure message for join.\n */\nexport const COMPLEX_OPERATION_MESSAGES = {\n  DIRECT_TRANSFER_SUCCESS: 'Direct Transfer Successful',\n  CONSULTATIVE_TRANSFER_SUCCESS: 'Transfer Successful',\n  JOIN_SUCCESS: 'Join Successful',\n  DIRECT_TRANSFER_FAILURE: 'Direct Transfer Failed',\n  CONSULTATIVE_TRANSFER_FAILURE: 'Transfer Failed',\n  JOIN_FAILURE: 'Join Failed'\n}\n\n/**\n * Status codes that match success messsages.\n * @name STATUS_CODES\n * @type {Object}\n * @property {number} DIRECT_TRANSFER_SUCCESS Status code for successful direct transfer.\n * @property {number} CONSULTATIVE_TRANSFER_SUCCESS Status code for successful consultative transfer.\n * @property {number} JOIN_SUCCESS Status code for successful join.\n * @property {number} DIRECT_TRANSFER_FAILURE Status code for failed direct transfer.\n * @property {number} CONSULTATIVE_TRANSFER_FAILURE Status code for failed consultative transfer.\n * @property {number} JOIN_FAILURE Status code for failed join.\n */\nexport const STATUS_CODES = {\n  DIRECT_TRANSFER_SUCCESS: 9905,\n  CONSULTATIVE_TRANSFER_SUCCESS: 9905,\n  JOIN_SUCCESS: 9906,\n  DIRECT_TRANSFER_FAILURE: -1,\n  CONSULTATIVE_TRANSFER_FAILURE: -1,\n  JOIN_FAILURE: -2\n}\n\n/**\n * Call direction\n * Indication of which direction the call is going\n * @name CALL_DIRECTION\n */\nexport const CALL_DIRECTION = {\n  INCOMING: 'incoming',\n  OUTGOING: 'outgoing'\n}\n\n/*\n * A conversion from MediaDeviceInfo.kind values to their more common terms.\n * See: https://developer.mozilla.org/en-US/docs/Web/API/MediaDeviceInfo/kind\n */\nexport const WEBRTC_DEVICE_KINDS = {\n  audioinput: 'microphone',\n  videoinput: 'camera',\n  audiooutput: 'speaker'\n}\n\n/**\n * Enum of ICE media states.\n * These are taken from FCS call, but inversed.\n *      See `fcs.call.MediaStates`.\n * @name FCS_ICE_MEDIA_STATES\n * @type {Object}\n */\nexport const FCS_ICE_MEDIA_STATES = {\n  0: 'NEW',\n  1: 'CHECKING',\n  2: 'CONNECTED',\n  3: 'COMPLETED',\n  4: 'FAILED',\n  5: 'DISCONNECTED',\n  6: 'CLOSED'\n}\n\n/**\n * ICE media states.\n * Same as FCS_ICE_MEDIA_STATES, except both key and value are the text representation.\n * @name ICE_MEDIA_STATES\n */\nexport const ICE_MEDIA_STATES = mapValuesToKeys(FCS_ICE_MEDIA_STATES)\n","// Call plugin.\nimport { getCallById } from '../../../call/interfaceNew/selectors'\nimport { CALL_STATES } from '../../constants'\n\n// Other plugins.\nimport BasicError, { callCodes } from '../../../errors'\n\n// Libraries.\nimport { call, select } from 'redux-saga/effects'\nimport { difference, isArray, isObject } from 'lodash/fp'\n\n/**\n * Helper function for sagas that need to perform an operation\n *    on a webRTC session. Checks for common \"error scenarios\".\n * Retrieves information about a \"session\" associated with the\n *    provided call id. \"Session info\" includes the call state\n *    object and webRTC stack session object. Includes an error\n *    if the session is not \"usable\".\n * @method getSessionInfoByCallId\n * @param  {Object} webRTC The webRTC stack.\n * @param  {string} callId The ID of the call.\n * @return {Object} An object with session, targetCall, and/or error objects.\n * @example\n * const callId = action.payload.id\n * const { session, targetCall, error } = yield call(getSessionInfoByCallId, webRTC, callId)\n *\n * if (error) {\n *  // Handle session not being retrievable / common error scenarios.\n * } else if (...) {\n *   // Check for specific error scenarios.\n * } else {\n *   // Operate on session.\n * }\n */\nexport function * getSessionInfoByCallId (webRTC, callId) {\n  const targetCall = yield select(getCallById, callId)\n\n  if (!targetCall) {\n    return {\n      error: new BasicError({\n        message: 'Call state not found: invalid call ID.',\n        code: callCodes.INVALID_PARAM\n      })\n    }\n  } else if (targetCall.state === CALL_STATES.ENDED) {\n    return {\n      targetCall,\n      error: new BasicError({\n        message: 'Call is wrong state: call is already ended.',\n        code: callCodes.INVALID_STATE\n      })\n    }\n  } else if (!targetCall.webrtcSessionId) {\n    return {\n      targetCall,\n      error: new BasicError({\n        message: 'State issue: Call has no webrtcSessionId.',\n        code: callCodes.STATE_DESYNC\n      })\n    }\n  }\n\n  const session = yield call([webRTC.sessionManager, 'get'], targetCall.webrtcSessionId)\n\n  if (!session) {\n    return {\n      targetCall,\n      error: new BasicError({\n        message: 'Session not found: no active webRTC session for call.',\n        code: callCodes.STATE_DESYNC\n      })\n    }\n  }\n\n  return { targetCall, session }\n}\n\n/**\n * Helper function: Check that the call is in an expected state.\n * @method validateCallState\n * @param  {string} callId ID for the call to validate.\n * @param  {Object} expected  Properties that the call state is expected to have.\n * @return {BasicError}\n */\nexport function * validateCallState (callId, expected) {\n  /**\n   * Checks whether set is contained within whole.\n   * Tracks which properties of set are not the same as whole.\n   * @method isSubsetOf\n   * @param  {Object} set\n   * @param  {Object} whole\n   * @return {Array} List of set properties that are not the same as whole.\n   */\n  function isSubsetOf (set, whole) {\n    const differences = []\n    // Ensure that each property in the set is also part of the whole.\n    for (const prop in set) {\n      if (isArray(set[prop])) {\n        // Compare arrays.\n        if (difference(set[prop], whole[prop]).length > 0) {\n          differences.push(prop)\n        }\n      } else if (isObject(set[prop])) {\n        // Compare objects (recursively).\n        if (isSubsetOf(set[prop], whole[prop]).length > 0) {\n          // Don't recursively add to differences.\n          differences.push(prop)\n        }\n      } else {\n        // Compare everything else.\n        if (set[prop] !== whole[prop]) {\n          differences.push(prop)\n        }\n      }\n    }\n\n    return differences\n  }\n\n  const targetCall = yield select(getCallById, callId)\n\n  // Ensure the call state exists.\n  if (!targetCall) {\n    return new BasicError({\n      code: callCodes.INVALID_PARAM,\n      message: 'Call state not found; invalid call ID.'\n    })\n  }\n\n  // Check whether the expected properties are a subset of the call properties.\n  const differences = isSubsetOf(expected, targetCall)\n\n  if (differences.length === 0) {\n    return false\n  } else {\n    return new BasicError({\n      code: callCodes.INVALID_STATE,\n      message: `Call is in an invalid state (${differences}).`\n    })\n  }\n}\n\n/**\n * SDP handler function that should be passed into session object's `processOffer` and `processAnswer` function.\n * This function disables old media encryption method SDES (Modifies sdp by removing crypto).\n * However, if only SDES is available, don't disable it.\n * @method sanitizeSdesFromSdp\n * @param {Object} newSdp The sdp so far (could have been modified by previous handlers).\n * @param {Object} info Information about the session description.\n * @param {RTCSdpType} info.type The session description's type.\n * @param {string} info.step The step that will occur after the Pipeline is run.\n * @param {string} info.endpoint Which end of the connection created the SDP.\n * @param {Object} originalSdp The sdp in its initial state.\n * @return {Object} The sanitized sdp with crypto removed (if fingerprint exists)\n */\nexport function sanitizeSdesFromSdp (newSdp, info, originalSdp) {\n  for (const mLine of newSdp.media) {\n    if (mLine.crypto && mLine.fingerprint) {\n      delete mLine.crypto\n    }\n  }\n  return newSdp\n}\n","const callPrefix = '@@KANDY/CALL/'\n\n/**\n * Basic call operation actions.\n */\nexport const MAKE_CALL = callPrefix + 'MAKE'\nexport const PENDING_MAKE_CALL = callPrefix + 'PENDING_MAKE'\nexport const SESSION_CREATED = callPrefix + 'SESSION_CREATED'\nexport const MAKE_CALL_FINISH = callPrefix + 'MAKE_FINISH'\n\nexport const MAKE_ANONYMOUS_CALL = callPrefix + 'MAKE_ANONYMOUS_CALL'\nexport const MAKE_ANONYMOUS_CALL_FINISH = callPrefix + 'MAKE_ANONYMOUS_CALL_FINISH'\n\nexport const CALL_INCOMING = callPrefix + 'INCOMING'\n\nexport const CALL_RINGING = callPrefix + 'RINGING'\nexport const SESSION_PROGRESS = callPrefix + 'SESSION_PROGRESS'\nexport const CALL_CANCELLED = callPrefix + 'CANCELLED'\n\nexport const CALL_AUDIT = callPrefix + 'AUDIT'\n\nexport const ANSWER_CALL = callPrefix + 'ANSWER'\nexport const ANSWER_CALL_FINISH = callPrefix + 'ANSWER_FINISH'\n\nexport const REJECT_CALL = callPrefix + 'REJECT'\nexport const REJECT_CALL_FINISH = callPrefix + 'REJECT_FINISH'\n\nexport const IGNORE_CALL = callPrefix + 'IGNORE'\nexport const IGNORE_CALL_FINISH = callPrefix + 'IGNORE_FINISH'\n\nexport const CALL_ACCEPTED = callPrefix + 'ACCEPTED'\n\nexport const END_CALL = callPrefix + 'END'\nexport const END_CALL_FINISH = callPrefix + 'END_FINISH'\n\nexport const FORWARD_CALL = callPrefix + 'FORWARD_CALL'\nexport const FORWARD_CALL_FINISH = callPrefix + 'FORWARD_CALL_FINISH'\n\nexport const PENDING_OPERATION = callPrefix + 'PENDING_OPERATION'\n\n/**\n * Mid-call operation actions.\n */\n\nexport const UPDATE_CALL = callPrefix + 'UPDATE_CALL'\n\nexport const CALL_HOLD = callPrefix + 'HOLD'\nexport const CALL_HOLD_FINISH = callPrefix + 'HOLD_FINISH'\n\nexport const CALL_UNHOLD = callPrefix + 'UNHOLD'\nexport const CALL_UNHOLD_FINISH = callPrefix + 'UNHOLD_FINISH'\n\nexport const SET_CUSTOM_PARAMETERS = callPrefix + 'SET_CUSTOM_PARAMETERS'\n\nexport const SEND_CUSTOM_PARAMETERS = callPrefix + 'SEND_CUSTOM_PARAMETERS'\nexport const SEND_CUSTOM_PARAMETERS_FINISH = callPrefix + 'SEND_CUSTOM_PARAMETERS_FINISH'\n\nexport const ADD_MEDIA = callPrefix + 'ADD_MEDIA'\nexport const ADD_MEDIA_FINISH = callPrefix + 'ADD_MEDIA_FINISH'\nexport const ADD_BASIC_MEDIA = callPrefix + 'ADD_BASIC_MEDIA'\n\nexport const REMOVE_MEDIA = callPrefix + 'REMOVE_MEDIA'\nexport const REMOVE_MEDIA_FINISH = callPrefix + 'REMOVE_MEDIA_FINISH'\nexport const REMOVE_BASIC_MEDIA = callPrefix + 'REMOVE_BASIC_MEDIA'\n\nexport const RENEGOTIATE = callPrefix + 'RENEGOTIATE'\nexport const RENEGOTIATE_FINISH = callPrefix + 'RENEGOTIATE_FINISH'\n\nexport const MUSIC_ON_HOLD = callPrefix + 'MUSIC_ON_HOLD'\n\nexport const SEND_DTMF = callPrefix + 'SEND_DTMF'\nexport const SEND_DTMF_FINISH = callPrefix + 'SEND_DTMF_FINISH'\n\nexport const GET_STATS = callPrefix + 'GET_STATS'\nexport const GET_STATS_FINISH = callPrefix + 'GET_STATS_FINISH'\n\nexport const CONSULTATIVE_TRANSFER = callPrefix + 'CONSULTATIVE_TRANSFER'\nexport const PENDING_CONSULTATIVE_TRANSFER = callPrefix + 'PENDING_CONSULTATIVE_TRANSFER'\nexport const CONSULTATIVE_TRANSFER_FINISH = callPrefix + 'CONSULTATIVE_TRANSFER_FINISH'\n\nexport const DIRECT_TRANSFER = callPrefix + 'DIRECT_TRANSFER'\nexport const DIRECT_TRANSFER_FINISH = callPrefix + 'DIRECT_TRANSFER_FINISH'\n\nexport const JOIN = callPrefix + 'JOIN'\nexport const PENDING_JOIN = callPrefix + 'PENDING_JOIN'\nexport const JOIN_FINISH = callPrefix + 'JOIN_FINISH'\n\nexport const REPLACE_TRACK = callPrefix + 'REPLACE_TRACK'\nexport const REPLACE_TRACK_FINISH = callPrefix + 'REPLACE_TRACK_FINISH'\n\n/**\n * Miscellaneous call actions\n */\nexport const CUSTOM_PARAMETERS_RECEIVED = callPrefix + 'CUSTOM_PARAMETERS_RECEIVED'\nexport const GET_AVAILABLE_CODECS = callPrefix + 'GET_AVAILABLE_CODECS'\nexport const AVAILABLE_CODECS_RETRIEVED = callPrefix + 'AVAILABLE_CODECS_RETRIEVED'\n\n/**\n * Remote operation actions.\n */\nexport const CALL_REMOTE_HOLD_FINISH = callPrefix + 'REMOTE_HOLD_FINISH'\nexport const CALL_REMOTE_UNHOLD_FINISH = callPrefix + 'REMOTE_UNHOLD_FINISH'\nexport const REMOTE_ADD_MEDIA_FINISH = callPrefix + 'REMOTE_ADD_MEDIA_FINISH'\nexport const REMOTE_REMOVE_MEDIA_FINISH = callPrefix + 'REMOTE_REMOVE_MEDIA_FINISH'\nexport const REMOTE_START_MOH_FINISH = callPrefix + 'REMOTE_START_MOH_FINISH'\nexport const REMOTE_STOP_MOH_FINISH = callPrefix + 'REMOTE_STOP_MOH_FINISH'\nexport const REMOTE_SLOW_START = callPrefix + 'REMOTE_SLOW_START'\n\n/**\n * Turn action types.\n */\nconst turnPrefix = callPrefix + 'TURN/'\n\nexport const TURN_CHANGED = turnPrefix + 'CHANGED'\n\n/**\n * Track action types.\n */\nconst trackPrefix = callPrefix + 'TRACK/'\n\nexport const TRACK_ADDED = trackPrefix + 'ADDED'\nexport const TRACK_REMOVED = trackPrefix + 'REMOVED'\n","// Call plugin.\nimport * as actionTypes from '../actionTypes'\n\n// Libraries.\nimport { isEmpty } from 'lodash/fp'\n\n/**\n * Helper function for formatting call actions.\n * @method callActionHelper\n * @param  {string} type Action type.\n * @param  {string} id Id of the call being acted on.\n * @param  {Object} [payload={}]\n * @param  {BasicError} [payload.error]\n * @param  {Object} [meta={}]\n * @return {Object} An action.\n */\nexport function callActionHelper (type, id, payload = {}, meta = {}) {\n  /**\n   * Call action format.\n   * Call actions are not FSA-compliant because there are cases where we need\n   *    to provide useful info (for the SDK) and an error object (for the app).\n   *    FSA would require the error object to be the entirety of the payload.\n   * @type {Object}\n   * {\n   *   type,\n   *   payload: {\n   *    ...usefulInfo,\n   *    errorObject\n   *   },\n   *   error,\n   *   meta\n   * }\n   */\n  const action = {\n    type,\n    payload: {\n      ...payload,\n      id\n    }\n  }\n  // Only have meta and error properties on the action if they're needed.\n  if (!isEmpty(meta)) {\n    action.meta = meta\n  }\n  if (payload.error) {\n    action.error = true\n  }\n  return action\n}\n\nexport function makeCall (id, options) {\n  return callActionHelper(actionTypes.MAKE_CALL, id, options)\n}\n\nexport function sessionCreated (id, params) {\n  return callActionHelper(actionTypes.SESSION_CREATED, id, params)\n}\n\nexport function pendingMakeCall (id, options) {\n  return callActionHelper(actionTypes.PENDING_MAKE_CALL, id, options)\n}\n\nexport function makeCallFinish (id, params) {\n  return callActionHelper(actionTypes.MAKE_CALL_FINISH, id, params)\n}\n\nexport function makeAnonymousCall (id, params) {\n  return {\n    type: actionTypes.MAKE_ANONYMOUS_CALL,\n    payload: {\n      id,\n      callee: params.callee,\n      credentials: params.credentials,\n      mediaConstraints: params.mediaConstraints,\n      callOptions: params.callOptions\n    }\n  }\n}\n\nexport function makeAnonymousCallFinish (id, params) {\n  return callActionHelper(actionTypes.MAKE_ANONYMOUS_CALL_FINISH, id, params)\n}\n\nexport function callIncoming (id, params) {\n  return callActionHelper(actionTypes.CALL_INCOMING, id, params)\n}\n\nexport function callRinging (id, params) {\n  return callActionHelper(actionTypes.CALL_RINGING, id, params)\n}\n\nexport function sessionProgress (id, params) {\n  return callActionHelper(actionTypes.SESSION_PROGRESS, id, params)\n}\n\nexport function callCancelled (id, params) {\n  return callActionHelper(actionTypes.CALL_CANCELLED, id, params)\n}\n\nexport function sendCallAudit (id, params) {\n  return callActionHelper(actionTypes.CALL_AUDIT, id, params)\n}\n\nexport function answerCall (id, options) {\n  return callActionHelper(actionTypes.ANSWER_CALL, id, options)\n}\n\nexport function answerCallFinish (id, params, meta) {\n  return callActionHelper(actionTypes.ANSWER_CALL_FINISH, id, params, meta)\n}\n\nexport function rejectCall (id, options) {\n  return callActionHelper(actionTypes.REJECT_CALL, id, options)\n}\n\nexport function rejectCallFinish (id, params) {\n  return callActionHelper(actionTypes.REJECT_CALL_FINISH, id, params)\n}\n\nexport function callAccepted (id, params) {\n  return callActionHelper(actionTypes.CALL_ACCEPTED, id, params)\n}\n\nexport function ignoreCall (id, params) {\n  return callActionHelper(actionTypes.IGNORE_CALL, id, params)\n}\n\nexport function ignoreCallFinish (id, params) {\n  return callActionHelper(actionTypes.IGNORE_CALL_FINISH, id, params)\n}\n\nexport function endCall (id, params) {\n  return callActionHelper(actionTypes.END_CALL, id, params)\n}\n\nexport function endCallFinish (id, params) {\n  return callActionHelper(actionTypes.END_CALL_FINISH, id, params)\n}\n\nexport function holdCall (id, options) {\n  return callActionHelper(actionTypes.CALL_HOLD, id, options)\n}\n\nexport function holdCallFinish (id, params) {\n  return callActionHelper(actionTypes.CALL_HOLD_FINISH, id, params)\n}\n\nexport function unholdCall (id, options) {\n  return callActionHelper(actionTypes.CALL_UNHOLD, id, options)\n}\n\nexport function unholdCallFinish (id, params) {\n  return callActionHelper(actionTypes.CALL_UNHOLD_FINISH, id, params)\n}\n\nexport function setCustomParameters (id, customParameters) {\n  const action = {\n    type: actionTypes.SET_CUSTOM_PARAMETERS,\n    payload: {\n      id,\n      customParameters\n    }\n  }\n  return action\n}\n\nexport function sendCustomParameters (id, options) {\n  return callActionHelper(actionTypes.SEND_CUSTOM_PARAMETERS, id, options)\n}\n\nexport function sendCustomParametersFinish (id, params) {\n  return callActionHelper(actionTypes.SEND_CUSTOM_PARAMETERS_FINISH, id, params)\n}\n\nexport function customParametersReceived (id, params) {\n  return callActionHelper(actionTypes.CUSTOM_PARAMETERS_RECEIVED, id, params)\n}\n\nexport function addMedia (id, params) {\n  return callActionHelper(actionTypes.ADD_MEDIA, id, params)\n}\n\nexport function addMediaFinish (id, params) {\n  return callActionHelper(actionTypes.ADD_MEDIA_FINISH, id, params)\n}\n\nexport function addBasicMedia (id, params) {\n  return callActionHelper(actionTypes.ADD_BASIC_MEDIA, id, params)\n}\n\nexport function removeMedia (id, params) {\n  return callActionHelper(actionTypes.REMOVE_MEDIA, id, params)\n}\n\nexport function removeMediaFinish (id, params) {\n  return callActionHelper(actionTypes.REMOVE_MEDIA_FINISH, id, params)\n}\n\nexport function removeBasicMedia (id, params) {\n  return callActionHelper(actionTypes.REMOVE_BASIC_MEDIA, id, params)\n}\n\nexport function renegotiate (id, params) {\n  return callActionHelper(actionTypes.RENEGOTIATE, id, params)\n}\n\nexport function renegotiateFinish (id, params) {\n  return callActionHelper(actionTypes.RENEGOTIATE_FINISH, id, params)\n}\n\nexport function sendDTMF (id, params) {\n  return callActionHelper(actionTypes.SEND_DTMF, id, params)\n}\n\nexport function sendDTMFFinish (id, params) {\n  return callActionHelper(actionTypes.SEND_DTMF_FINISH, id, params)\n}\n\nexport function getStats (id, params, deferred) {\n  const action = {\n    type: actionTypes.GET_STATS,\n    payload: {\n      ...params,\n      id\n    },\n    meta: {\n      deferred\n    }\n  }\n\n  return action\n}\n\nexport function getStatsFinish (id, params) {\n  return callActionHelper(actionTypes.GET_STATS_FINISH, id, params)\n}\n\nexport function forwardCall (id, params) {\n  return callActionHelper(actionTypes.FORWARD_CALL, id, params)\n}\n\nexport function forwardCallFinish (id, params) {\n  return callActionHelper(actionTypes.FORWARD_CALL_FINISH, id, params)\n}\n\nexport function consultativeTransfer (id, params) {\n  return callActionHelper(actionTypes.CONSULTATIVE_TRANSFER, id, params)\n}\n\nexport function pendingConsultativeTransfer (id, params) {\n  return callActionHelper(actionTypes.PENDING_CONSULTATIVE_TRANSFER, id, params)\n}\n\nexport function consultativeTransferFinish (id, params) {\n  return callActionHelper(actionTypes.CONSULTATIVE_TRANSFER_FINISH, id, params)\n}\n\nexport function directTransfer (id, params) {\n  return callActionHelper(actionTypes.DIRECT_TRANSFER, id, params)\n}\n\nexport function directTransferFinish (id, params) {\n  return callActionHelper(actionTypes.DIRECT_TRANSFER_FINISH, id, params)\n}\n\nexport function join (id, params) {\n  return callActionHelper(actionTypes.JOIN, id, params)\n}\n\nexport function pendingJoin (id, params) {\n  return callActionHelper(actionTypes.PENDING_JOIN, id, params)\n}\n\nexport function joinFinish (id, params) {\n  return callActionHelper(actionTypes.JOIN_FINISH, id, params)\n}\n\nexport function replaceTrack (id, params) {\n  return callActionHelper(actionTypes.REPLACE_TRACK, id, params)\n}\n\nexport function replaceTrackFinish (id, params) {\n  return callActionHelper(actionTypes.REPLACE_TRACK_FINISH, id, params)\n}\n\nexport function pendingOperation (id, params) {\n  return callActionHelper(actionTypes.PENDING_OPERATION, id, params)\n}\n\nexport function getAvailableCodecs (params, deferred) {\n  const action = {\n    type: actionTypes.GET_AVAILABLE_CODECS,\n    payload: {\n      ...params\n    },\n    meta: {\n      deferred\n    }\n  }\n  return action\n}\n\nexport function availableCodecsRetrieved (params) {\n  return callActionHelper(actionTypes.AVAILABLE_CODECS_RETRIEVED, undefined, params)\n}\n\n/*\n * Remote operations.\n */\n\nexport function remoteHoldFinish (id, params) {\n  return callActionHelper(actionTypes.CALL_REMOTE_HOLD_FINISH, id, params)\n}\n\nexport function remoteUnholdFinish (id, params) {\n  return callActionHelper(actionTypes.CALL_REMOTE_UNHOLD_FINISH, id, params)\n}\n\nexport function remoteAddMediaFinish (id, params) {\n  return callActionHelper(actionTypes.REMOTE_ADD_MEDIA_FINISH, id, params)\n}\n\nexport function remoteRemoveMediaFinish (id, params) {\n  return callActionHelper(actionTypes.REMOTE_REMOVE_MEDIA_FINISH, id, params)\n}\n\nexport function remoteStartMohFinish (id, params) {\n  return callActionHelper(actionTypes.REMOTE_START_MOH_FINISH, id, params)\n}\n\nexport function remoteStopMohFinish (id, params) {\n  return callActionHelper(actionTypes.REMOTE_STOP_MOH_FINISH, id, params)\n}\n\nexport function remoteSlowStart (id, params) {\n  return callActionHelper(actionTypes.REMOTE_SLOW_START, id, params)\n}\n\n// Generic action.\nexport function updateCall (id, params) {\n  return callActionHelper(actionTypes.UPDATE_CALL, id, params)\n}\n","import * as callActionsImport from './call'\nimport * as turnActionsImport from './turn'\n\n// Apparently the following doesn't work:\n//      export * as newName from './place';\n// So import everything from each file, then re-export.\nexport const callActions = callActionsImport\nexport const turnActions = turnActionsImport\n","// Call plugin.\nimport * as actionTypes from '../actionTypes'\n\n/**\n * Represents that TURN information has changed.\n * @method turnChanged\n * @return {Object}\n */\nexport function turnChanged ({ servers, credentials }) {\n  return {\n    type: actionTypes.TURN_CHANGED,\n    payload: {\n      servers,\n      credentials\n    }\n  }\n}\n","// Call plugin.\nimport { callActions as actions } from '../actions'\nimport { getCalls, getCallById, getOptions } from '../selectors'\nimport { normalizeSipUri } from '../../utils/normalization'\n\n// Other plugins.\nimport { getUserInfo, getDomain } from '../../../auth/interface/selectors'\nimport { setSdpHandlers } from '../../../config/interface/actions'\n\n// Libraries.\nimport { v4 as uuidV4 } from 'uuid'\nimport { isEmpty } from 'lodash/fp'\nimport pDefer from 'p-defer'\n\nimport { CALL_STATES } from '../../constants'\n\nimport { logManager, API_LOG_TAG } from '../../../logs'\n\nconst log = logManager.getLogger('CALL')\n\nexport default function callAPI ({ dispatch, getState }) {\n  return {\n    /**\n     * Starts an outgoing call to a {@link call.UserID UserID} or a\n     *    {@link call.PhoneNumber PhoneNumber}.\n     *\n     * The call will be tracked by a unique ID that is returned by the API. The\n     *    application will use this ID to identify and control the call after it\n     *    has been initiated.\n     *\n     * The {@link call.getById} API can be used to retrieve the\n     *    current information about the call.\n     *\n     * The progress of the operation will be tracked via the\n     *    {@link call.event:call:operation call:operation} event.\n     *\n     * The SDK will emit a {@link call.event:call:start call:start} event\n     *    locally when the operation completes. When the remote participant\n     *    receives the call, a {@link call.event:call:receive call:receive}\n     *    event will be emitted remotely for them.\n     *\n     * The SDK requires access to the machine's media devices (e.g. microphone)\n     *    in order to make a call. If it does not already have permissions to\n     *    use the devices, the user may be prompted by the browser to give\n     *    permissions.\n     * @public\n     * @static\n     * @memberof call\n     * @requires cpaas_call\n     * @method make\n     * @param {call.UserID|call.PhoneNumber} destination The desired destination.\n     * @param {Object} media The media options the call should be initialized with.\n     * @param {boolean} [media.audio=false] Whether the call should have audio on start. Currently, audio-less calls are not supported.\n     * @param {Object} [media.audioOptions] Options for configuring the call's audio.\n     * @param {call.MediaConstraint} [media.audioOptions.deviceId] ID of the microphone to receive audio from.\n     * @param {boolean} [media.video=false] Whether the call should have video on start.\n     * @param {Object} [media.videoOptions] Options for configuring the call's video.\n     * @param {call.MediaConstraint} [media.videoOptions.deviceId] ID of the camera to receive video from.\n     * @param {call.MediaConstraint} [media.videoOptions.height] The height of the video.\n     * @param {call.MediaConstraint} [media.videoOptions.width] The width of the video.\n     * @param {call.MediaConstraint} [media.videoOptions.frameRate] The frame rate of the video.\n     * @param {boolean} [media.screen=false] Whether the call should have screenshare on start. (Note: Screensharing is not supported on iOS Safari.)\n     * @param {Object} [media.screenOptions] Options for configuring the call's screenShare.\n     * @param {call.MediaConstraint} [media.screenOptions.height] The height of the screenShare.\n     * @param {call.MediaConstraint} [media.screenOptions.width] The width of the screenShare.\n     * @param {call.MediaConstraint} [media.screenOptions.frameRate] The frame rate of the screenShare.\n     * @param {Object} [options]\n     * @param {call.BandwidthControls} [options.bandwidth] Options for configuring media's bandwidth.\n     * @param {call.DSCPControls} [options.dscpControls] Options for configuring DSCP markings on the media traffic\n     * @returns {string} The generated ID of the newly created call.\n     * @example\n     * // Listen for the event emitted after making a call.\n     * client.on('call:start', function (params) {\n     *   const { callId, error } = params\n     *   if (error) {\n     *     // Call failed to initialize.\n     *   } else {\n     *     // Call was initialized, and the recipient user will be notified.\n     *   }\n     * })\n     * // Make an audio-only call.\n     * const newCallId = client.call.make(destination, { audio: true })\n     */\n\n    /**\n     * Starts an outgoing call to a {@link call.SIP_URI SIP_URI} or a\n     *    {@link call.TEL_URI TEL_URI}.\n     *\n     * The call will be tracked by a unique ID that is returned by the API. The\n     *    application will use this ID to identify and control the call after it\n     *    has been initiated.\n     *\n     * The {@link call.getById} API can be used to retrieve\n     *    the current information about the call.\n     *\n     * The progress of the operation will be tracked via the\n     *    {@link call.event:call:operation call:operation} event.\n     *\n     * The SDK will emit a {@link call.event:call:start call:start} event\n     *    locally when the operation completes. When the remote participant\n     *    receives the call, a {@link call.event:call:receive call:receive}\n     *    event will be emitted remotely for them.\n     *\n     * The SDK requires access to the machine's media devices (eg. microphone)\n     *    in order to make a call. If it does not already have permissions to\n     *    use the devices, the user may be prompted by the browser to give\n     *    permissions.\n     * @public\n     * @static\n     * @memberof call\n     * @requires link_call\n     * @method make\n     * @param {call.SIP_URI|call.TEL_URI} destination The desired destination.\n     * @param {Object} media The media options the call should be initialized with.\n     * @param {boolean} [media.audio=false] Whether the call should have audio on start. Currently, audio-less calls are not supported.\n     * @param {Object} [media.audioOptions] Options for configuring the call's audio.\n     * @param {call.MediaConstraint} [media.audioOptions.deviceId] ID of the microphone to receive audio from.\n     * @param {boolean} [media.video=false] Whether the call should have video on start.\n     * @param {Object} [media.videoOptions] Options for configuring the call's video.\n     * @param {call.MediaConstraint} [media.videoOptions.deviceId] ID of the camera to receive video from.\n     * @param {call.MediaConstraint} [media.videoOptions.height] The height of the video.\n     * @param {call.MediaConstraint} [media.videoOptions.width] The width of the video.\n     * @param {call.MediaConstraint} [media.videoOptions.frameRate] The frame rate of the video.\n     * @param {boolean} [media.screen=false] Whether the call should have screenshare on start. (Note: Screensharing is not supported on iOS Safari.)\n     * @param {Object} [media.screenOptions] Options for configuring the call's screenShare.\n     * @param {call.MediaConstraint} [media.screenOptions.height] The height of the screenShare.\n     * @param {call.MediaConstraint} [media.screenOptions.width] The width of the screenShare.\n     * @param {call.MediaConstraint} [media.screenOptions.frameRate] The frame rate of the screenShare.\n     * @param {Object} [options]\n     * @param {call.BandwidthControls} [options.bandwidth] Options for configuring media's bandwidth.\n     * @param {string} [options.displayName] Custom display name to be provided to the destination. Not supported in all environments and may use default display name.\n     * @param {Array<call.CustomParameter>} [options.customParameters] Custom SIP header parameters for the SIP backend.\n     * @param {call.DSCPControls} [options.dscpControls] Options for configuring DSCP markings on the media traffic\n     * @returns {string} The generated ID of the newly created call.\n     * @example\n     * // Listen for the event emitted after making a call.\n     * client.on('call:start', function (params) {\n     *   const { callId, error } = params\n     *   if (error) {\n     *     // Call failed to initialize.\n     *   } else {\n     *     // Call was initialized, and the recipient user will be notified.\n     *   }\n     * })\n     * // Make an audio-only call.\n     * const newCallId = client.call.make(destination, { audio: true })\n     */\n    make (destination, media, options = {}) {\n      log.debug(API_LOG_TAG + 'call.make: ', destination, media, options)\n\n      const callId = uuidV4()\n      const from = getUserInfo(getState()).username\n\n      const mediaConstraints = {\n        audio: media.audio && !isEmpty(media.audioOptions) ? media.audioOptions : media.audio,\n        video: media.video && !isEmpty(media.videoOptions) ? media.videoOptions : media.video,\n        screenShare: media.screen && !isEmpty(media.screenOptions) ? media.screenOptions : media.screen\n      }\n\n      const config = getOptions(getState())\n      if (config.normalizeDestination) {\n        // Normalize callee addresses\n        destination = normalizeSipUri(destination, getDomain(getState()))\n        log.info('Address normalized to: ', destination)\n      }\n\n      dispatch(\n        actions.makeCall(callId, {\n          participantAddress: destination,\n          // TODO: Have better property names.\n          from,\n          mediaConstraints,\n          ...options\n        })\n      )\n      return callId\n    },\n\n    /**\n     * Rejects an incoming call.\n     *\n     * The specified call to reject must be in a ringing state with an incoming\n     *    direction. The call will be ended as a result of the operation.\n     *\n     * The progress of the operation will be tracked via the\n     *    {@link call.event:call:operation call:operation} event.\n     *\n     * The SDK will emit a {@link call.event:call:stateChange call:stateChange}\n     *    event locally when the operation completes. The remote participant\n     *    will be notified, through their own\n     *    {@link call.event:call:stateChange call:stateChange} event, that the\n     *    call was rejected.\n     * @public\n     * @static\n     * @memberof call\n     * @requires call\n     * @method reject\n     * @param {string} callId The ID of the call to reject.\n     */\n    reject (callId) {\n      log.debug(API_LOG_TAG + 'call.reject: ', callId)\n      dispatch(actions.rejectCall(callId))\n    },\n\n    /**\n     * Answers an incoming call.\n     *\n     * The specified call to answer must be in a ringing state with an incoming\n     *    direction. The call will become connected as a result of the operation.\n     *\n     * The progress of the operation will be tracked via the\n     *    {@link call.event:call:operation call:operation} event.\n     *\n     * The SDK will emit a {@link call.event:call:stateChange call:stateChange}\n     *    event locally when the operation completes. This indicates that the\n     *    call has connected with the remote participant. The\n     *    {@link call.getById} API can be used to retrieve the latest call state\n     *    after the change. Further events will be emitted to indicate that the\n     *    call has received media from the remote participant. See the\n     *    {@link call.event:call:newTrack call:newTrack} event for more\n     *    information about this.\n     *\n     * The SDK requires access to the system's media devices (eg. microphone)\n     *    in order to answer a call. If it does not already have permissions to\n     *    use the devices, the user may be prompted by the browser to give\n     *    permissions.\n     * @public\n     * @static\n     * @memberof call\n     * @requires cpaas_call\n     * @method answer\n     * @param {string} callId The ID of the call to answer.\n     * @param {Object} media The media options the call should be initialized with.\n     * @param {boolean} [media.audio=false] Whether the call should have audio on start. Currently, audio-less calls are not supported.\n     * @param {Object} [media.audioOptions] Options for configuring the call's audio.\n     * @param {call.MediaConstraint} [media.audioOptions.deviceId] ID of the microphone to receive audio from.\n     * @param {boolean} [media.video=false] Whether the call should have video on start.\n     * @param {Object} [media.videoOptions] Options for configuring the call's video.\n     * @param {call.MediaConstraint} [media.videoOptions.deviceId] ID of the camera to receive video from.\n     * @param {call.MediaConstraint} [media.videoOptions.height] The height of the video.\n     * @param {call.MediaConstraint} [media.videoOptions.width] The width of the video.\n     * @param {call.MediaConstraint} [media.videoOptions.frameRate] The frame rate of the video.\n     * @param {boolean} [media.screen=false] Whether the call should have screenshare on start. (Note: Screensharing is not supported on iOS Safari.)\n     * @param {Object} [media.screenOptions] Options for configuring the call's screenShare.\n     * @param {call.MediaConstraint} [media.screenOptions.height] The height of the screenShare.\n     * @param {call.MediaConstraint} [media.screenOptions.width] The width of the screenShare.\n     * @param {call.MediaConstraint} [media.screenOptions.frameRate] The frame rate of the screenShare.\n     * @param {Object} [options]\n     * @param {call.BandwidthControls} [options.bandwidth] Options for configuring media's bandwidth.\n     * @param {call.DSCPControls} [options.dscpControls] Options for configuring DSCP markings on the media traffic\n     */\n\n    /**\n     * Answers an incoming call.\n     *\n     * The specified call to answer must be in a ringing state with an incoming\n     *    direction. The call will become connected as a result of the operation.\n     *\n     * The progress of the operation will be tracked via the\n     *    {@link call.event:call:operation call:operation} event.\n     *\n     * The SDK will emit a {@link call.event:call:stateChange call:stateChange}\n     *    event locally when the operation completes. This indicates that the\n     *    call has connected with the remote participant. The\n     *    {@link call.getById} API can be used to retrieve the latest call state\n     *    after the change. Further events will be emitted to indicate that the\n     *    call has received media from the remote participant. See the\n     *    {@link call.event:call:newTrack call:newTrack} event for more\n     *    information about this.\n     *\n     * The SDK requires access to the system's media devices (eg. microphone)\n     *    in order to answer a call. If it does not already have permissions to\n     *    use the devices, the user may be prompted by the browser to give\n     *    permissions.\n     * @public\n     * @static\n     * @memberof call\n     * @requires link_call\n     * @method answer\n     * @param {string} callId The ID of the call to answer.\n     * @param {Object} media The media options the call should be initialized with.\n     * @param {boolean} [media.audio=false] Whether the call should have audio on start. Currently, audio-less calls are not supported.\n     * @param {Object} [media.audioOptions] Options for configuring the call's audio.\n     * @param {call.MediaConstraint} [media.audioOptions.deviceId] ID of the microphone to receive audio from.\n     * @param {boolean} [media.video=false] Whether the call should have video on start.\n     * @param {Object} [media.videoOptions] Options for configuring the call's video.\n     * @param {call.MediaConstraint} [media.videoOptions.deviceId] ID of the camera to receive video from.\n     * @param {call.MediaConstraint} [media.videoOptions.height] The height of the video.\n     * @param {call.MediaConstraint} [media.videoOptions.width] The width of the video.\n     * @param {call.MediaConstraint} [media.videoOptions.frameRate] The frame rate of the video.\n     * @param {boolean} [media.screen=false] Whether the call should have screenshare on start. (Note: Screensharing is not supported on iOS Safari.)\n     * @param {Object} [media.screenOptions] Options for configuring the call's screenShare.\n     * @param {call.MediaConstraint} [media.screenOptions.height] The height of the screenShare.\n     * @param {call.MediaConstraint} [media.screenOptions.width] The width of the screenShare.\n     * @param {call.MediaConstraint} [media.screenOptions.frameRate] The frame rate of the screenShare.\n     * @param {Object} [options]\n     * @param {call.BandwidthControls} [options.bandwidth] Options for configuring media's bandwidth.\n     * @param {Array<call.CustomParameter>} [options.customParameters] Custom SIP header parameters for the SIP backend.\n     * @param {call.DSCPControls} [options.dscpControls] Options for configuring DSCP markings on the media traffic\n     */\n    answer (callId, media, options = {}) {\n      log.debug(API_LOG_TAG + 'call.answer: ', callId, media, options)\n\n      const mediaConstraints = {\n        audio: media.audio && !isEmpty(media.audioOptions) ? media.audioOptions : media.audio,\n        video: media.video && !isEmpty(media.videoOptions) ? media.videoOptions : media.video,\n        screenShare: media.screen && !isEmpty(media.screenOptions) ? media.screenOptions : media.screen\n      }\n\n      dispatch(\n        actions.answerCall(callId, {\n          mediaConstraints,\n          ...options\n        })\n      )\n    },\n\n    /**\n     * Ignores an incoming call.\n     *\n     * The specified call to ignore must be in a ringing state with an incoming\n     *    direction. The call will be ended as a result of the operation.\n     *\n     * The progress of the operation will be tracked via the\n     *    {@link call.event:call:operation call:operation} event.\n     *\n     * The SDK will emit a {@link call.event:call:stateChange call:stateChange}\n     *    event locally when the operation completes. The remote participant\n     *    will not be notified that the call was ignored.\n     * @public\n     * @static\n     * @memberof call\n     * @requires call\n     * @method ignore\n     * @param {string} callId The ID of the call to ignore.\n     */\n    ignore (callId) {\n      log.debug(API_LOG_TAG + 'call.ignore: ', callId)\n      dispatch(actions.ignoreCall(callId))\n    },\n\n    /**\n     * Puts a call on hold.\n     *\n     * The specified call to hold must not already be locally held. Any/all\n     *    media received from the remote participant will stop being received,\n     *    and any/all media being sent to the remote participant will stop\n     *    being sent.\n     *\n     * Some call operations cannot be performed while the call is on hold. The\n     *    call can be taken off hold with the {@link call.unhold} API.\n     *\n     * The progress of the operation will be tracked via the\n     *    {@link call.event:call:operation call:operation} event.\n     *\n     * The SDK will emit a {@link call.event:call:stateChange call:stateChange}\n     *    event locally when the operation completes. The remote participant\n     *    will be notified of the operation through a\n     *    {@link call.event:call:stateChange call:stateChange} event as well.\n     * @public\n     * @static\n     * @memberof call\n     * @requires call\n     * @requires callMe\n     * @method hold\n     * @param {string} callId The ID of the call to hold.\n     */\n    hold (callId) {\n      log.debug(API_LOG_TAG + 'call.hold: ', callId)\n      dispatch(actions.holdCall(callId))\n    },\n\n    /**\n     * Takes a call off hold.\n     *\n     * The specified call to unhold must be locally held. If the call is not\n     *    also remotely held, call media will be reconnected as it was before\n     *    the call was held.\n     *\n     * The progress of the operation will be tracked via the\n     *    {@link call.event:call:operation call:operation} event.\n     *\n     * The SDK will emit a {@link call.event:call:stateChange call:stateChange}\n     *    event locally when the operation completes. The remote participant\n     *    will be notified of the operation through a\n     *    {@link call.event:call:stateChange call:stateChange} event as well.\n     * @public\n     * @static\n     * @memberof call\n     * @requires call\n     * @requires callMe\n     * @method unhold\n     * @param {string} callId The ID of the call to unhold.\n     */\n    unhold (callId) {\n      log.debug(API_LOG_TAG + 'call.unhold: ', callId)\n      dispatch(actions.unholdCall(callId))\n    },\n\n    /**\n     * Set the custom parameters of a call.\n     *\n     * The specified parameters will be saved as part of the call's information throughout the duration of the call.\n     * All subsequent call operations will include these custom parameters.\n     * Therefore, invalid parameters, or parameters not previously configured on the server, will cause subsequent call operations to fail.\n     *\n     * A Call's custom parameters are a property of the Call's {@link call.CallObject CallObject},\n     *    which can be retrieved using the {@link call.getById} or\n     *    {@link call.getAll} APIs.\n     *\n     * The custom parameters set on a call can be sent directly with the {@link call.sendCustomParameters} API.\n     *\n     * Custom parameters can be removed from a call's information by setting them as undefined (e.g., `call.setCustomParameters(callId)`).\n     * Subsequent call operations will no longer send custom parameters.\n     * @public\n     * @static\n     * @memberof call\n     * @requires link_call\n     * @requires callMe\n     * @method setCustomParameters\n     * @param {string} callId The ID of the call.\n     * @param {Array<call.CustomParameter>} customParameters The custom parameters to set.\n     */\n    setCustomParameters (callId, customParameters) {\n      log.debug(API_LOG_TAG + 'call.setCustomParameters: ', callId, customParameters)\n      dispatch(actions.setCustomParameters(callId, customParameters))\n    },\n\n    /**\n     * Send the custom parameters on an ongoing call to the server. The server may either consume the headers or relay them\n     * to another endpoint, depending on how the server is configured.\n     *\n     * A Call's custom parameters are a property of the Call's {@link call.CallObject CallObject},\n     *    which can be retrieved using the {@link call.getById} or\n     *    {@link call.getAll} APIs.\n     *\n     * To change or remove the custom parameters on a call, use the {@link call.setCustomParameters} API.\n     * @public\n     * @static\n     * @memberof call\n     * @requires link_call\n     * @requires callMe\n     * @method sendCustomParameters\n     * @param {string} callId The ID of the call being acted on.\n     */\n    sendCustomParameters (callId) {\n      log.debug(API_LOG_TAG + 'call.sendCustomParameters: ', callId)\n      dispatch(actions.sendCustomParameters(callId))\n    },\n\n    /**\n     * Retrieves the information of all calls made during the current session.\n     * @public\n     * @static\n     * @memberof call\n     * @requires call\n     * @requires callMe\n     * @method getAll\n     * @return {Array<call.CallObject>} Call objects.\n     * @example\n     * let calls = client.call.getAll()\n     * let currentCalls = calls.filter(call => {\n     *     return call.state === client.call.states.CONNECTED\n     * })\n     */\n    getAll () {\n      log.debug(API_LOG_TAG + 'call.getAll')\n      return getCalls(getState())\n    },\n\n    /**\n     * Retrieves the information of a single call with a specific call ID.\n     * @public\n     * @static\n     * @memberof call\n     * @requires call\n     * @requires callMe\n     * @static\n     * @method getById\n     * @param {string} callId The ID of the call to retrieve.\n     * @return {call.CallObject} A call object.\n     */\n    getById (callId) {\n      log.debug(API_LOG_TAG + 'call.getById: ', callId)\n      return getCallById(getState(), callId)\n    },\n\n    /**\n     * Ends an ongoing call.\n     *\n     * The SDK will stop any/all local media associated with the call. Events\n     *    will be emitted to indicate which media tracks were stopped. See the\n     *    {@link call.event:call:trackEnded call:trackEnded} event for more\n     *    information.\n     *\n     * The progress of the operation will be tracked via the\n     *    {@link call.event:call:operation call:operation} event.\n     *\n     * The SDK will emit a {@link call.event:call:stateChange call:stateChange}\n     *    event locally when the operation completes. The remote participant\n     *    will be notified, through their own\n     *    {@link call.event:call:stateChange call:stateChange} event, that the\n     *    call was ended.\n     * @public\n     * @static\n     * @memberof call\n     * @requires call\n     * @requires callMe\n     * @method end\n     * @param {string} callId The ID of the call to end.\n     */\n    end (callId) {\n      log.debug(API_LOG_TAG + 'call.end: ', callId)\n      dispatch(actions.endCall(callId))\n    },\n\n    /**\n     * Add new media tracks to an ongoing call.\n     * Will get new media tracks from the specific sources to add to the call.\n     *\n     * The progress of the operation will be tracked via the\n     *    {@link call.event:call:operation call:operation} event.\n     *\n     * The SDK will emit a {@link call.event:call:newTrack call:newTrack} event\n     *    both for the local and remote users to indicate a track has been\n     *    added to the Call.\n     *\n     * @public\n     * @static\n     * @memberof call\n     * @requires call\n     * @requires callMe\n     * @param {string}  callId The ID of the call to add media to.\n     * @param {Object}  [media={}] The media options to add to the call.\n     * @param {boolean} [media.audio=false] Whether to add audio to the call.\n     * @param {boolean} [media.video=false] Whether to add video to the call.\n     * @param {boolean} [media.screen=false] Whether to add the screenshare to the call. (Note: Screensharing is not supported on iOS Safari.)\n     * @param {Object}  [media.audioOptions] Options for configuring the call's audio.\n     * @param {Object}  [media.videoOptions] Options for configuring the call's video.\n     * @param {Object}  [media.screenOptions] Options for configuring the call's screenShare.\n     * @param {call.MediaConstraint} [media.audioOptions.deviceId] ID of the microphone to receive audio from.\n     * @param {call.MediaConstraint} [media.videoOptions.deviceId] ID of the camera to receive video from.\n     * @param {call.MediaConstraint} [media.videoOptions.height] The height of the video.\n     * @param {call.MediaConstraint} [media.videoOptions.width] The width of the video.\n     * @param {call.MediaConstraint} [media.videoOptions.frameRate] The frame rate of the video.\n     * @param {call.MediaConstraint} [media.screenOptions.height] The height of the screenShare.\n     * @param {call.MediaConstraint} [media.screenOptions.width] The width of the screenShare.\n     * @param {call.MediaConstraint} [media.screenOptions.frameRate] The frame rate of the screenShare.\n     * @param {Object} [options]\n     * @param {call.BandwidthControls} [options.bandwidth] Options for configuring media's bandwidth.\n     * @param {call.DSCPControls} [options.dscpControls] Options for configuring DSCP markings on the media traffic\n     */\n    addMedia (callId, media = {}, options = {}) {\n      log.debug(API_LOG_TAG + 'call.addMedia: ', callId, media)\n      const mediaConstraints = {\n        audio: media.audio && !isEmpty(media.audioOptions) ? media.audioOptions : media.audio,\n        video: media.video && !isEmpty(media.videoOptions) ? media.videoOptions : media.video,\n        screenShare: media.screen && !isEmpty(media.screenOptions) ? media.screenOptions : media.screen\n      }\n\n      dispatch(actions.addMedia(callId, { mediaConstraints, ...options }))\n    },\n\n    /**\n     * Remove tracks from an ongoing call.\n     *\n     * The progress of the operation will be tracked via the\n     *    {@link call.event:call:operation call:operation} event.\n     *\n     * The SDK will emit a {@link call.event:call:trackEnded call:trackEnded}\n     *    event for both the local and remote users to indicate that a track\n     *    has been removed.\n     *\n     * @public\n     * @static\n     * @memberof call\n     * @requires call\n     * @requires callMe\n     * @param {string} callId The ID of the call to remove media from.\n     * @param {Array} tracks A list of track IDs to remove.\n     * @param {Object} [options]\n     * @param {call.BandwidthControls} [options.bandwidth] Options for configuring media's bandwidth.\n     */\n    removeMedia (callId, tracks, options = {}) {\n      log.debug(API_LOG_TAG + 'call.removeMedia: ', callId, tracks)\n      dispatch(actions.removeMedia(callId, { tracks, ...options }))\n    },\n\n    /**\n     * Adds local video to an ongoing Call, to start sending to the remote\n     *    participant.\n     *\n     * Can only be used in a basic media scenario, where the Call does not\n     *    already have video. For more advanced scenarios, the\n     *    {@link call.addMedia} API can be used.\n     *\n     * The progress of the operation will be tracked via the\n     *    {@link call.event:call:operation call:operation} event.\n     *\n     * The SDK will emit a {@link call.event:call:newTrack call:newTrack} event\n     *    both for the local and remote users to indicate a track has been\n     *    added to the Call.\n     *\n     * @public\n     * @static\n     * @method startVideo\n     * @memberof call\n     * @requires call\n     * @requires callMe\n     * @param {string}                 callId              ID of the call being acted on.\n     * @param {Object}                 [videoOptions]           Options for configuring the call's video.\n     * @param {call.MediaConstraint}   [videoOptions.deviceId]  ID of the camera to receive video from.\n     * @param {call.MediaConstraint}   [videoOptions.height]    The height of the video.\n     * @param {call.MediaConstraint}   [videoOptions.width]     The width of the video.\n     * @param {call.MediaConstraint}   [videoOptions.frameRate] The frame rate of the video.\n     * @param {Object}                 [options]\n     * @param {call.BandwidthControls} [options.bandwidth] Options for configuring media's bandwidth.\n     * @param {call.DSCPControls}      [options.dscpControls] Options for configuring DSCP markings on the media traffic.\n     */\n    startVideo (callId, videoOptions = {}, options = {}) {\n      log.debug(API_LOG_TAG + 'call.startVideo: ', callId, options)\n\n      const mediaConstraints = {\n        audio: false,\n        video: !isEmpty(videoOptions) ? videoOptions : true,\n        screenShare: false\n      }\n      dispatch(actions.addBasicMedia(callId, { mediaConstraints, kind: 'video', ...options }))\n    },\n\n    /**\n     * Removes local video from an ongoing Call, stopping it from being sent\n     *    to the remote participant.\n     *\n     * Can only be used in a basic media scenario, where the Call has only one\n     *    video track. For more advanced scenarios, the\n     *    {@link call.removeMedia} API can be used.\n     *\n     * The progress of the operation will be tracked via the\n     *    {@link call.event:call:operation call:operation} event.\n     *\n     * The SDK will emit a {@link call.event:call:trackEnded call:trackEnded}\n     *    event for both the local and remote users to indicate that a track\n     *    has been removed.\n     *\n     * @public\n     * @static\n     * @method stopVideo\n     * @memberof call\n     * @requires call\n     * @requires callMe\n     * @param {string} callId ID of the call being acted on.\n     */\n    stopVideo (callId) {\n      log.debug(API_LOG_TAG + 'call.stopVideo: ', callId)\n      dispatch(actions.removeBasicMedia(callId, { kind: 'video' }))\n    },\n\n    /**\n     * Adds local screenshare to an ongoing Call, to start sending to the remote\n     *    participant.\n     *\n     * The latest SDK release (v4.X+) has not yet implemented this API in the\n     *    same way that it was available in previous releases (v3.X). In place\n     *    of this API, the SDK has a more general API that can be used for this\n     *    same behaviour.\n     *\n     * The {@link call.addMedia} API can be used to perform the same behaviour\n     *    as `startScreenshare`. {@link call.addMedia} is a general-purpose API\n     *    for adding media to a call, which covers the same functionality as\n     *    `startScreenshare`. Selecting only screen options when using\n     *    {@link call.addMedia} will perform the same behaviour as using\n     *    `startScreenshare`.\n     *\n     * @public\n     * @static\n     * @method startScreenshare\n     * @memberof call\n     * @requires call\n     * @requires callMe\n     * @example\n     * // Select media options for adding only screenshare.\n     * const media = {\n     *    audio: false,\n     *    video: false,\n     *    screen: true,\n     *    screenOptions: { ... }\n     * }\n     *\n     * // Add the selected media to the call.\n     * client.call.addMedia(callId, media)\n     */\n\n    /**\n     * Removes local screenshare from an ongoing Call, stopping it from being\n     *    sent to the remote participant.\n     *\n     * The latest SDK release (v4.X+) has not yet implemented this API in the\n     *    same way that it was available in previous releases (v3.X). In place\n     *    of this API, the SDK has a more general API that can be used for this\n     *    same behaviour.\n     *\n     * The {@link call.removeMedia} API can be used to perform the same\n     *    behaviour as `stopScreenshare`. {@link call.removeMedia} is a\n     *    general-purpose API for removing media from a call, which covers the\n     *    same functionality as `stopScreenshare`. Specifying only the screen\n     *    track when using {@link call.removeMedia} will perform the same\n     *    behaviour as using `stopScreenshare`.\n     *\n     * There is a caveat that if a Call has multiple video tracks (for example,\n     *    both a video and a screen track), the SDK itself cannot yet\n     *    differentiate one from the other. The application will need to know\n     *    which track was the screen track in this scenario.\n     * @public\n     * @static\n     * @method stopScreenshare\n     * @memberof call\n     * @requires call\n     * @requires callMe\n     * @example\n     * const call = client.call.getById(callId)\n     * // Get the ID of any/all video tracks on the call.\n     * const videoTracks = call.localTracks.filter(trackId => {\n     *    const track = call.media.getTrackById(trackId)\n     *    // Both video and screen tracks have kind of 'video'.\n     *    return track.kind === 'video'\n     * })\n     *\n     * // Pick out the screen track.\n     * const screenTrack = videoTracks[0]\n     *\n     * // Remove screen from the call.\n     * client.call.removeMedia(callId, [ screenTrack ])\n     */\n\n    /**\n     * Send DTMF tones to a call's audio.\n     *\n     * The provided tone can either be a single DTMF tone (eg. '1') or a\n     *    sequence of DTMF tones (eg. '123') which will be played one after the\n     *    other.\n     *\n     * The specified call must be either in Connected, Ringing, or Early Media\n     *    state, otherwise invoking this API will have no effect.\n     *\n     * The tones will be sent as out-of-band tones if supported by the call,\n     *    otherwise they will be added in-band to the call's audio.\n     *\n     * The progress of the operation will be tracked via the\n     *    {@link call.event:call:operation call:operation} event.\n     *\n     * @public\n     * @static\n     * @memberof call\n     * @requires call\n     * @requires callMe\n     * @method sendDTMF\n     * @param {string} callId ID of the call being acted on.\n     * @param {string} tone DTMF tone(s) to send. Valid chracters are ['0','1','2','3','4','5','6','7','8','9','#','*' and ','].\n     * @param {number} [duration=100] The amount of time, in milliseconds, that each DTMF tone should last.\n     * @param {number} [intertoneGap=70] The length of time, in milliseconds, to wait between tones.\n     *\n     */\n    sendDTMF (callId, tone, duration = 100, intertoneGap = 70) {\n      log.debug(API_LOG_TAG + 'call.sendDTMF: ', callId, tone, duration, intertoneGap)\n      dispatch(actions.sendDTMF(callId, { tone, duration, intertoneGap }))\n    },\n\n    /**\n     * Get a report about low-level call statistical information.\n     *\n     * A Track ID can optionally be provided to get a report for a specific\n     *    Track of the Call.\n     *\n     * This API will return a promise which, when resolved, it will contain the report of the particlar call.\n     * The progress of the operation will be tracked via the\n     *    {@link call.event:call:operation call:operation} event.\n     *\n     * The SDK will emit a\n     *    {@link call.event:call:statsReceived call:statsReceived} event, after\n     *    the operation completes, that has the report.\n     * @public\n     * @static\n     * @memberof call\n     * @requires call\n     * @requires callMe\n     * @param {string} callId The ID of the Call to retrieve the report.\n     * @param {string} [trackId] ID of a Track being used by the Call. If not\n     *    provided, RTCStatsReport is generated for the Call itself.\n     */\n    getStats (callId, trackId) {\n      log.debug(API_LOG_TAG + 'call.getStats: ', callId, trackId)\n      const deferredResult = pDefer()\n      dispatch(actions.getStats(callId, { trackId }, deferredResult))\n      return deferredResult.promise\n    },\n    /**\n     * Forwards an incoming call to another user.\n     *\n     * The specified destination will receive the Call instead of the current\n     *    user.\n     *\n     * The progress of the operation will be tracked via the\n     *    {@link call.event:call:operation call:operation} event.\n     *\n     * The SDK will emit a {@link call.event:call:stateChange call:stateChange}\n     *    event after the operation completes.\n     *\n     * @public\n     * @static\n     * @memberof call\n     * @requires link_call\n     * @method forward\n     * @param {string} callId ID of the call being acted on.\n     * @param {call.SIP_URI|call.TEL_URI} destination The destination to forward the call to.\n     */\n\n    /**\n     * Forwards an incoming call to another user.\n     *\n     * The specified destination will receive the Call instead of the current\n     *    user.\n     *\n     * The progress of the operation will be tracked via the\n     *    {@link call.event:call:operation call:operation} event.\n     *\n     * The SDK will emit a {@link call.event:call:stateChange call:stateChange}\n     *    event after the operation completes.\n     * @private\n     * @static\n     * @memberof call\n     * @requires cpaas_call\n     * @method forward\n     * @param {string} callId ID of the call being acted on.\n     * @param {call.UserID|call.PhoneNumber} destination The destination to forward the call to.\n     */\n    forward (callId, destination) {\n      const config = getOptions(getState())\n      if (config.normalizeDestination) {\n        // Normalize callee addresses\n        destination = normalizeSipUri(destination, getDomain(getState()))\n        log.info('Address normalized to: ', destination)\n      }\n\n      dispatch(actions.forwardCall(callId, { destination }))\n    },\n\n    /**\n     * Performs a \"consultative\" transfer between two ongoing calls (also known\n     *    as an announced or warm transfer). This allows the current user to\n     *    transfer the remote participant of a call to another user, after\n     *    having spoken to both users.\n     *\n     * Both calls used for the transfer must be locally held. After the\n     *    operation, these calls will be ended, as indicated by a\n     *    {@link call.event:call:stateChange call:stateChange} event.\n     *\n     * Both remote participants will see their call be unheld by the operation,\n     *    as indicated by a\n     *    {@link call.event:call:stateChange call:stateChange} event, and will\n     *    be connected to one another afterwards.\n     *\n     * The progression of the operation will be tracked via the\n     *    {@link call.event:call:operation call:operation} event. Both local\n     *    calls will receive this event, since it is an operation on both calls,\n     *    and the remote calls will receive it as if it were a \"remote unhold\"\n     *    operation.\n     * @public\n     * @static\n     * @memberof call\n     * @requires link_call\n     * @method consultativeTransfer\n     * @param {string} callId ID of the call being acted on.\n     * @param {string} otherCallId ID of the other call being acted on.\n     */\n\n    /**\n     * Performs a \"consultative\" transfer between two ongoing calls (also known\n     *    as an announced or warm transfer). This allows the current user to\n     *    transfer the remote participant of a call to another user, after\n     *    having spoken to both users.\n     *\n     * Both calls used for the transfer must be locally held. After the\n     *    operation, these calls will be ended, as indicated by a\n     *    {@link call.event:call:stateChange call:stateChange} event.\n     *\n     * Both remote participants will see their call be unheld by the operation,\n     *    as indicated by a\n     *    {@link call.event:call:stateChange call:stateChange} event, and will\n     *    be connected to one another afterwards.\n     *\n     * The progression of the operation will be tracked via the\n     *    {@link call.event:call:operation call:operation} event. Both local\n     *    calls will receive this event, since it is an operation on both calls,\n     *    and the remote calls will receive it as if it were a \"remote unhold\"\n     *    operation.\n     * @private\n     * @static\n     * @memberof call\n     * @requires cpaas_call\n     * @method consultativeTransfer\n     * @param {string} callId ID of the call being acted on.\n     * @param {string} otherCallId ID of the other call being acted on.\n     */\n    consultativeTransfer (callId, otherCallId) {\n      dispatch(actions.consultativeTransfer(callId, { otherCallId }))\n    },\n\n    /**\n     * Performs a \"direct\" transfer on a call (also known as an unannounced or\n     *    blind transfer). This allows the current user to transfer the remote\n     *    participant of a call to another user, similar to a \"forward\"\n     *    operation.\n     *\n     * The specified call must be locally held. After the operation, this call\n     *    will be ended, as indicated by a\n     *    {@link call.event:call:stateChange call:stateChange} event.\n     *\n     * The \"destination\" user will receive an incoming call, and when answered,\n     *    they will be connected with the remote participant of the specified\n     *    call.\n     *\n     * The progression of the operation will be tracked via the\n     *    {@link call.event:call:operation call:operation} event. The remote\n     *    participant being transferred will receive it as if it were a \"remote\n     *    unhold\" operation.\n     * @public\n     * @static\n     * @memberof call\n     * @requires link_call\n     * @method directTransfer\n     * @param {string} callId ID of the call being acted on.\n     * @param {call.SIP_URI|call.TEL_URI} destination The destination to transfer the call to.\n     */\n\n    /**\n     * Performs a \"direct\" transfer on a call (also known as an unannounced or\n     *    blind transfer). This allows the current user to transfer the remote\n     *    participant of a call to another user, similar to a \"forward\"\n     *    operation.\n     *\n     * The specified call must be locally held. After the operation, this call\n     *    will be ended, as indicated by a\n     *    {@link call.event:call:stateChange call:stateChange} event.\n     *\n     * The \"destination\" user will receive an incoming call, and when answered,\n     *    they will be connected with the remote participant of the specified\n     *    call.\n     *\n     * The progression of the operation will be tracked via the\n     *    {@link call.event:call:operation call:operation} event. The remote\n     *    participant being transferred will receive it as if it were a \"remote\n     *    unhold\" operation.\n     * @private\n     * @static\n     * @memberof call\n     * @requires cpaas_call\n     * @method directTransfer\n     * @param {string} callId ID of the call being acted on.\n     * @param {call.UserID|call.PhoneNumber} destination The destination to transfer the call to.\n     */\n    directTransfer (callId, destination) {\n      const config = getOptions(getState())\n      if (config.normalizeDestination) {\n        // Normalize callee addresses\n        destination = normalizeSipUri(destination, getDomain(getState()))\n        log.info('Address normalized to: ', destination)\n      }\n\n      dispatch(actions.directTransfer(callId, { destination }))\n    },\n\n    /**\n     * Performs a \"join\" on two ongoing calls.\n     * This allows the current user to establish a call with audio with two\n     *    remote users.\n     *\n     * Both specified calls must be locally held. The new, \"joined\" call will be\n     *    audio-only, even if either previous call had video. Video cannot be\n     *    added to the \"joined\" call. Both remote participants will see their\n     *    call taken off hold, and will receive additional audio from other\n     *    participants after the operation. Both previous calls for the current\n     *    user will be ended after the operation, as indicated by a\n     *    {@link call.event:call:stateChange call:stateChange} event.\n     *\n     * If the first call specified has custom parameters set, these parameters will be carried over to the new call.\n     *\n     * The progress of the operation will be tracked via the\n     *    {@link call.event:call:operation call:operation} event. Both remote\n     *    participants will also receive this event as if it were a \"remote\n     *    unhold\" operation.\n     * @public\n     * @static\n     * @memberof call\n     * @requires link_call\n     * @method join\n     * @param {string} callId ID of the call being acted on.\n     * @param {string} otherCallId ID of the other call being acted on.\n     */\n\n    /**\n     * Performs a \"join\" on two ongoing calls.\n     * This allows the current user to establish a call with audio with two\n     *    remote users.\n     *\n     * Both specified calls must be locally held. The new, \"joined\" call will be\n     *    audio-only, even if either previous call had video. Video cannot be\n     *    added to the \"joined\" call. Both remote participants will see their\n     *    call taken off hold, and will receive additional audio from other\n     *    participants after the operation. Both previous calls for the current\n     *    user will be ended after the operation, as indicated by a\n     *    {@link call.event:call:stateChange call:stateChange} event.\n     *\n     * If the first call specified has custom parameters set, these parameters will be carried over to the new call.\n     *\n     * The progress of the operation will be tracked via the\n     *    {@link call.event:call:operation call:operation} event. Both remote\n     *    participants will also receive this event as if it were a \"remote\n     *    unhold\" operation.\n     * @private\n     * @static\n     * @memberof call\n     * @requires cpaas_call\n     * @method join\n     * @param {string} callId ID of the call being acted on.\n     * @param {string} otherCallId ID of the other call being acted on.\n     */\n    join (callId, otherCallId) {\n      const newCallId = uuidV4()\n      const from = getUserInfo(getState()).username\n      dispatch(actions.join(callId, { otherCallId, newCallId, from }))\n    },\n\n    /**\n     * Replace a call's track with a new track of the same media type.\n     *\n     * The operation will remove the old track from the call and add a\n     *    new track to the call. This effectively allows for changing the\n     *    track constraints (eg. device used) for an ongoing call.\n     *\n     * The progress of the operation will be tracked via the\n     *    {@link call.event:call:operation call:operation} event.\n     *\n     * The SDK will emit a\n     *    {@link call.event:call:trackReplaced call:trackReplaced} event\n     *    locally when the operation completes. The newly added track will need\n     *    to be handled by the local application. The track will be replaced\n     *    seamlessly for the remote application, which will not receive an event.\n     *\n     * @public\n     * @static\n     * @memberof call\n     * @requires call\n     * @requires callMe\n     * @param {string} callId The ID of the call to replace the track of.\n     * @param {string} trackId The ID of the track to replace.\n     * @param {Object} [media={}] The media options.\n     * @param {boolean} [media.audio=false] Whether to create an audio track.\n     * @param {Object} [media.audioOptions] Options for configuring the audio track.\n     * @param {call.MediaConstraint} [media.audioOptions.deviceId] ID of the microphone to receive audio from.\n     * @param {boolean} [media.video=false] Whether to create a video track.\n     * @param {Object} [media.videoOptions] Options for configuring the video track.\n     * @param {call.MediaConstraint} [media.videoOptions.deviceId] ID of the camera to receive video from.\n     * @param {call.MediaConstraint} [media.videoOptions.height] The height of the video.\n     * @param {call.MediaConstraint} [media.videoOptions.width] The width of the video.\n     * @param {call.MediaConstraint} [media.videoOptions.frameRate] The frame rate of the video.\n     * @example\n     * const callId = ...\n     * // Get the video track used by the call.\n     * const videoTrack = ...\n     *\n     * // Replace the specified video track of the call with a new\n     * //    video track.\n     * client.call.replaceTrack(callId, videoTrack.id, {\n     *   // The track should be replaced with a video track using\n     *   //    a specific device. This effectively changes the input\n     *   //    device for an ongoing call.\n     *   video: true,\n     *   videoOptions: {\n     *     deviceId: cameraId\n     *   }\n     * })\n     *\n     * @example\n     * const callId = ...\n     * // Get the video track used by the call.\n     * const videoTrack = ...\n     *\n     * // Can also replace the specified video track of the call with a new\n     * // screen sharing track because screen sharing is delivered as a video stream to remote peer.\n     * // User will then be prompted to pick a specific screen to share and thus the device id will be selected.\n     * client.call.replaceTrack(callId, videoTrack.id, {\n     *   // The track should be replaced with a screen sharing track.\n     *   // Note that 'screenOptions' property is not mandatory, as API will use default values\n     *   // for properties like: width, height, frameRate.\n     *   screen: true\n     * })\n     */\n    replaceTrack (callId, trackId, media) {\n      const mediaConstraints = {\n        audio: media.audio && !isEmpty(media.audioOptions) ? media.audioOptions : media.audio,\n        video: media.video && !isEmpty(media.videoOptions) ? media.videoOptions : media.video,\n        screenShare: media.screen && !isEmpty(media.screenOptions) ? media.screenOptions : media.screen\n      }\n      dispatch(actions.replaceTrack(callId, { trackId, mediaConstraints }))\n    },\n\n    /**\n     * Retrieve the list of available and supported codecs based on the browser's capabilities for sending media.\n     *\n     * This API will return a promise which, when resolved, it will contain the list of available and supported codecs.\n     * In addition, the SDK emits a {@link call.event:call:availableCodecs call:availableCodecs} event\n     *  upon retrieving that list of codecs.\n     *\n     * This API is a wrapper for the static method {@link https://w3c.github.io/webrtc-pc/#dom-rtcrtpsender-getcapabilities RTCRtpSender.getCapabilities()}.\n     *  Firefox browser does not currently support this method. Therefore, this API will not work on Firefox.\n     *\n     * @public\n     * @static\n     * @memberof call\n     * @requires call\n     * @requires callMe\n     * @param {string} kind The kind of media, i.e., 'audio' or 'video', to get the list of available codecs of.\n     */\n    getAvailableCodecs (kind) {\n      log.debug(`${API_LOG_TAG}call.getAvailableCodecs, kind: ${kind}`)\n\n      const deferredResult = pDefer()\n\n      // Trigger the action, but include a defered result which caller can use when\n      // we actually obtain the data (i.e. list of codecs) from WebRTCManager.\n      dispatch(actions.getAvailableCodecs({ kind }, deferredResult))\n\n      return deferredResult.promise\n    },\n\n    /**\n     * Set {@link call.SdpHandlerFunction SDP Handler Functions} that will be run as part of a pipeline for all future calls.\n     *  This will replace any SDP Handlers that were previously set.\n     *\n     * SDP handlers can be used to make modifications to the SDP (e.g., removing certain codecs)\n     *  before they are processed or sent to the other side.\n     *\n     * This is an advanced feature, changing the SDP handlers mid-call may cause\n     *  unexpected behaviour in future call operations for that call.\n     *\n     * @public\n     * @static\n     * @memberof call\n     * @requires call\n     * @requires callMe\n     * @param {Array<call.SdpHandlerFunction>} sdpHandlers The list of SDP handler functions to modify SDP.\n     */\n    setSdpHandlers (sdpHandlers) {\n      log.debug(`${API_LOG_TAG}call.setSdpHandlers, sdpHandlers:`, sdpHandlers)\n\n      const config = getOptions(getState())\n      const options = {\n        removeH264Codecs: config.removeH264Codecs\n      }\n      dispatch(setSdpHandlers(sdpHandlers, options))\n    },\n\n    /**\n     * Possible states that a Call can be in.\n     *\n     * A Call's state describes the current status of the Call. An application\n     *    should use the state to understand how the Call, and any media\n     *    associated with the Call, should be handled. Which state the Call is\n     *    in defines how it can be interacted with, as certain operations can\n     *    only be performed while in specific states, and tells an application\n     *    whether the Call currently has media flowing between users.\n     * Unless stated otherwise, the Call's state pertains to both caller & callee.\n     *\n     * The Call's state is a property of the {@link call.CallObject CallObject},\n     *    which can be retrieved using the {@link call.getById} or\n     *    {@link call.getAll} APIs.\n     *\n     * The SDK emits a {@link call.event:call:stateChange call:stateChange}\n     *    event when a Call's state changes from one state to another.\n     *\n     * @public\n     * @static\n     * @memberof call\n     * @requires callMe\n     * @requires call\n     * @type {Object}\n     * @property {string} INITIATING The (outgoing) call is being started. While in this state, no Call operations can be performed until Call gets into Initiated state.\n     * @property {string} INITIATED The (outgoing) call has been sent over the network, but has not been received. This is a state valid only for caller's side.\n     * @property {string} RINGING The call has been received by both parties, and is waiting to be answered.\n     * @property {string} EARLY_MEDIA The call has not been answered, but media\n     *    is already being received. This may be network-ringing media, IVR\n     *    system media, or other pre-answer medias. When early media is\n     *    supported, this state may replace the Ringing state. This is a state valid only for caller's side.\n     * @property {string} CANCELLED The call was disconnected before it could be answered. This is a state valid only for callee's side.\n     * @property {string} CONNECTED Both parties are connected and media is flowing.\n     * @property {string} ON_HOLD Both parties are connected but no media is flowing.\n     * @property {string} ENDED The call has ended.\n     * @example\n     * // Use the call states to know how to handle a change in the call.\n     * client.on('call:stateChange', function (params) {\n     *    const call = client.call.getById(params.callId)\n     *    // Check if the call now has media flowing.\n     *    if (call.state === client.call.states.CONNECTED) {\n     *      // The call is now active, and can perform midcall operations.\n     *    }\n     * })\n     */\n    states: CALL_STATES\n\n    /**\n     * The `setDefaultDevices` API from previous SDK releases (3.X) has been\n     *    deprecated in the latest releases (4.X+). The SDK no longer keeps\n     *    track of \"default devices\" on behalf of the application.\n     *\n     * The devices used for a call can be selected as part of the APIs for\n     *    starting the call. Microphone and/or camera can be chosen in the\n     *    {@link call.make} and {@link call.answer} APIs, and speaker can be\n     *    chosen when the audio track is rendered with the\n     *    {@link media.renderTracks} API.\n     * @public\n     * @static\n     * @method setDefaultDevices\n     * @memberof call\n     * @requires call\n     * @requires callMe\n     */\n\n    /**\n     * Changes the camera and/or microphone used for a Call's media input.\n     *\n     * The latest SDK release (v4.X+) has not yet implemented this API in the\n     *    same way that it was available in previous releases (v3.X). In place\n     *    of this API, the SDK has a more general API that can be used for this\n     *    same behaviour.\n     *\n     * The same behaviour as the `changeInputDevices` API can be implemented\n     *    using the general-purpose {@link call.replaceTrack} API. This API can\n     *    be used to replace an existing media track with a new track of the\n     *    same type, allowing an application to change certain aspects of the\n     *    media, such as input device.\n     * @public\n     * @static\n     * @method changeInputDevices\n     * @memberof call\n     * @requires call\n     * @requires callMe\n     * @example\n     * const call = client.call.getById(callId)\n     * // Get the ID of the Call's video track.\n     * const videoTrack = call.localTracks.find(trackId => {\n     *    const track = client.media.getTrackById(trackId)\n     *    return track.kind === 'video'\n     * })\n     *\n     * // Select the new video options.\n     * const media = {\n     *    video: true,\n     *    videoOptions: {\n     *        deviceId: 'cameraId'\n     *    }\n     * }\n     *\n     * // Change the call's camera by replacing the video track.\n     * client.call.replaceTrack(callId, videoTrack, media)\n     */\n\n    /**\n     * Changes the speaker used for a Call's audio output. Supported on\n     *    browser's that support HTMLMediaElement.setSinkId().\n     *\n     * The latest SDK release (v4.X+) has not yet implemented this API in the\n     *    same way that it was available in previous releases (v3.X). In place\n     *    of this API, the SDK has a more general API that can be used for this\n     *    same behaviour.\n     *\n     * The same behaviour as the `changeSpeaker` API can be implemented by\n     *    re-rendering the Call's audio track.  A speaker can be selected when\n     *    rendering an audio track, so changing a speaker can be simulated\n     *    by unrendering the track with {@link media.removeTracks}, then\n     *    re-rendering it with a new speaker with {@link media.renderTracks}.\n     * @public\n     * @static\n     * @method changeSpeaker\n     * @memberof call\n     * @requires call\n     * @requires callMe\n     * @example\n     * const call = client.call.getById(callId)\n     * // Get the ID of the Call's audio track.\n     * const audioTrack = call.localTracks.find(trackId => {\n     *    const track = client.media.getTrackById(trackId)\n     *    return track.kind === 'audio'\n     * })\n     *\n     * // Where the audio track was previously rendered.\n     * const audioContainer = ...\n     *\n     * // Unrender the audio track we want to change speaker for.\n     * client.media.removeTrack([ audioTrack ], audioContainer)\n     * // Re-render the audio track with a new speaker.\n     * client.media.renderTrack([ audioTrack ], audioContainer, {\n     *    speakerId: 'speakerId'\n     * })\n     */\n  }\n}\n","// Call plugin.\nimport { callActions as actions } from '../actions'\n\n// Libraries.\nimport { v4 as uuidV4 } from 'uuid'\nimport { isEmpty, pick } from 'lodash/fp'\n\n/**\n * Anonymous Call API\n * Returns a function that returns an Altered API that it is suited only for anonymous calls.\n * @method anonymousAPI\n * @param {function} otherApi The api to alter\n * @return {Object} Anonymous Call plugin API.\n */\nexport default function anonymousAPI (otherApi) {\n  return function newCallMeApi ({ dispatch, getState }) {\n    // List of APIs that this plugin will take from the interface.\n    //      APIs not included here will not be exposed.\n    // The difference between regular calls and callMe anonymous calls is that:\n    //      1. anon is outgoing only,\n    //      2. anon is basic mid-call operations only (eg. no transfer),\n    //      3. anon's makeCall is not called directly (after login).\n    const anonAPIs = [\n      // Getters.\n      'getAll',\n      'getById',\n      'getAvailableCodecs',\n      // Call functionality.\n      'hold',\n      'unhold',\n      'setCustomParameters',\n      'sendCustomParameters',\n      'end',\n      'addMedia',\n      'removeMedia',\n      'sendDTMF',\n      'getStats',\n      'replaceTrack',\n      // States,\n      'states'\n    ]\n\n    const newLinkAPI = pick(anonAPIs, otherApi({ dispatch, getState }).call)\n\n    return {\n      call: {\n        ...newLinkAPI,\n        /**\n         * Starts an outgoing call as an anonymous user.\n         * @public\n         * @requires callMe\n         * @memberof call\n         * @method makeAnonymous\n         * @param {string} callee       Full user ID of the call recipient.\n         * @param {Object} credentials  Information needed to validate a token anonymous call.\n         * @param {Object} credentials.realm The realm used to encrypt the tokens.\n         * @param {Object} [credentials.accountToken] The encrypted account token of the account making the call.\n         * @param {Object} [credentials.fromToken] The encrypted SIP address of the account/caller.\n         * @param {Object} [credentials.toToken] The encrypted SIP address of the callee.\n         * @param {Object} callOptions Call options.\n         * @param {string} callOptions.from The URI of the user making the call.\n         * @param {Boolean} [callOptions.audio=true] Whether the call should have audio on start. Currently, audio-less calls are not supported.\n         * @param {Object} [callOptions.audioOptions] Options for configuring the call's audio.\n         * @param {call.BandwidthControls} [callOptions.bandwidth] Options for configuring media's bandwidth.\n         * @param {call.MediaConstraint} [callOptions.audioOptions.deviceId] ID of the microphone to receive audio from.\n         * @param {Boolean} [callOptions.video=false] Whether the call should have video on start.\n         * @param {Object} [callOptions.videoOptions] Options for configuring the call's video.\n         * @param {call.MediaConstraint} [callOptions.videoOptions.deviceId] ID of the camera to receive video from.\n         * @param {call.MediaConstraint} [callOptions.videoOptions.height] The height of the video.\n         * @param {call.MediaConstraint} [callOptions.videoOptions.width] The width of the video.\n         * @param {call.MediaConstraint} [callOptions.videoOptions.frameRate] The frame rate of the video.\n         * @param {Boolean} [callOptions.screen=false] Whether the call should have screenshare on start.\n         * @param {Object} [callOptions.screenOptions] Options for configuring the call's screenShare.\n         * @param {call.MediaConstraint} [callOptions.screenOptions.height] The height of the screenShare.\n         * @param {call.MediaConstraint} [callOptions.screenOptions.width] The width of the screenShare.\n         * @param {call.MediaConstraint} [callOptions.screenOptions.frameRate] The frame rate of the screenShare.\n         * @param {string} [callOptions.displayName] Custom display name to be provided to the destination. Only used with token-less anonymous calls. Not supported in all environments and may use default display name.\n         * @param {Array<call.CustomParameter>} [callOptions.customParameters] Custom SIP header parameters for the SIP backend\n         * @return {string} Id of the outgoing call.\n         * @example\n         * // Make a basic anonymous call.\n         * let callee = 'user1@example.com';\n         * let callOptions = { ... };\n         *\n         * let callId = client.call.makeAnonymous(callee, {}, callOptions);\n         * @example\n         * // Make a time-limited token anonymous call.\n         * let callee = 'user1@example.com';\n         * let account = 'user2@example.com';\n         * let callOptions = { ...\n         *     customParameters: [\n         *       {\n         *         \"name\": \"X-GPS\",\n         *         \"value\": \"42.686032,23.344565\"\n         *       }\n         *     ],\n         *     ...\n         *   };\n         *\n         * // Generate / Retrieve the encrypted tokens.\n         * const key = 'abc123...';\n         * const credentials = {\n         *      accountToken: createToken(account, key),\n         *      fromToken: createToken('sip:' + account, key),\n         *      toToken: createToken('sip:' + callee, key),\n         *      realm: 'realmAbc123...'\n         * };\n         *\n         * let callId = client.call.makeAnonymous(callee, credentials, callOptions);\n         */\n        makeAnonymous (callee, credentials = {}, callOptions = {}) {\n          // Separate the media constraints from the callOptions.\n          const { audio, audioOptions, video, videoOptions, screen, screenOptions, ...options } = callOptions\n\n          // Massage the media constraints into a gUM-like format.\n          //    This is done the same way as the make API does it.\n          const mediaConstraints = {\n            audio: audio && !isEmpty(audioOptions) ? audioOptions : audio,\n            video: video && !isEmpty(videoOptions) ? videoOptions : video,\n            screenShare: screen && !isEmpty(screenOptions) ? screenOptions : screen\n          }\n\n          // Create our own call ID for storing in state.\n          const callId = uuidV4()\n          dispatch(\n            actions.makeAnonymousCall(callId, {\n              callee,\n              credentials,\n              mediaConstraints,\n              callOptions: options\n            })\n          )\n          return callId\n        }\n      }\n    }\n  }\n}\n","import callAPI from './call'\n\n/**\n * The 'call' namespace (within the 'api' type) is used to make audio and video calls to and from\n * SIP users and PSTN phones.\n *\n * Call functions are all part of the 'call' namespace.\n *\n * @public\n * @namespace call\n */\n\n/**\n * Information about a Call.\n *\n * Can be retrieved using the {@link call.getAll} or {@link call.getById} APIs.\n *\n * @public\n * @static\n * @typedef {Object} CallObject\n * @memberof call\n * @requires cpaas_call\n * @property {string} id The ID of the call.\n * @property {user.UserID} from A unique identifier (uri) of the person who made the call.\n * @property {user.UserID} to A unique identifier (uri) of the person who receives the call.\n * @property {string} direction The direction in which the call was created. Can be 'outgoing' or 'incoming'.\n * @property {string} state The current state of the call. See {@link call.states} for possible states.\n * @property {boolean} localHold Indicates whether this call is currently being held locally.\n * @property {boolean} remoteHold Indicates whether this call is currently being held remotely.\n * @property {Array<string>} localTracks A list of Track IDs that the call is sending to the remote participant.\n * @property {Array<string>} remoteTracks A list of Track IDs that the call is receiving from the remote participant.\n * @property {Object} remoteParticipant Information about the other call participant.\n * @property {string} [remoteParticipant.displayNumber] The User ID of the remote participant in the form \"username@domain\".\n * @property {string} [remoteParticipant.displayName] The display name of the remote participant.\n * @property {call.BandwidthControls} bandwidth The bandwidth limitations set for the call.\n * @property {number} startTime The start time of the call in milliseconds since the epoch.\n * @property {number} [endTime] The end time of the call in milliseconds since the epoch.\n */\n\n/**\n * Information about a Call.\n *\n * Can be retrieved using the {@link call.getAll} or {@link call.getById} APIs.\n *\n * @public\n * @static\n * @module CallObject\n * @typedef {Object} CallObject\n * @memberof call\n * @requires link_call\n * @requires callMe\n * @property {string} id The ID of the call.\n * @property {user.UserID} from A unique identifier (uri) of the person who made the call.\n * @property {user.UserID} to A unique identifier (uri) of the person who receives the call.\n * @property {string} direction The direction in which the call was created. Can be 'outgoing' or 'incoming'.\n * @property {string} state The current state of the call. See {@link call.states} for possible states.\n * @property {boolean} localHold Indicates whether this call is currently being held locally.\n * @property {boolean} remoteHold Indicates whether this call is currently being held remotely.\n * @property {Array<string>} localTracks A list of Track IDs that the call is sending to the remote participant.\n * @property {Array<string>} remoteTracks A list of Track IDs that the call is receiving from the remote participant.\n * @property {Object} remoteParticipant Information about the other call participant.\n * @property {string} [remoteParticipant.displayNumber] The User ID of the remote participant in the form \"username@domain\".\n * @property {string} [remoteParticipant.displayName] The display name of the remote participant.\n * @property {call.BandwidthControls} bandwidth The bandwidth limitations set for the call.\n * @property {Array<call.CustomParameter>} customParameters The custom parameters set for the call.\n * @property {number} startTime The start time of the call in milliseconds since the epoch.\n * @property {number} [endTime] The end time of the call in milliseconds since the epoch.\n */\n\n/**\n * The 'media' namespace provides an interface for interacting with Media that the\n *    SDK has access to. Media is used in conjunction with the {@link call Calls}\n *    feature to manipulate and render the Tracks sent and received from a Call.\n *\n * Media and Track objects are not created directly, but are created as part of\n *    Call operations. Media and Tracks will either be marked as \"local\" or\n *    \"remote\" depending on whether their source is the local user's machine\n *    or a remote user's machine.\n *\n * The Media feature also keeps track of media devices that the user's machine\n *    can access. Any media device (eg. USB headset) connected to the machine\n *    can be used as a source for media. Available devices can be found using\n *    the {@link media.getDevices} API.\n *\n * @public\n * @namespace media\n */\n\n/**\n * The MediaConstraint type defines the format for configuring media options.\n * Either the `exact` or `ideal` property should be provided. If both are present, the\n *    `exact` value will be used.\n *\n * When the `exact` value is provided, it will be the only value considered for the option.\n *    If it cannot be used, the constraint will be considered an error.\n *\n * When the `ideal` value is provided, it will be considered as the optimal value for the option.\n *    If it cannot be used, the closest acceptable value will be used instead.\n *\n * A string value can be provided directly instead of using the MediaConstraint format.\n *    Using a string directly is not recommended, since behaviour may differ depending\n *    on browser and media property. For most properties, a direct string value will be\n *    handled as `ideal` behaviour, but some properties may follow the `exact` behaviour\n *    (eg. `deviceId`).\n *\n * @public\n * @static\n * @typedef {Object} MediaConstraint\n * @memberof call\n * @property {string} [exact] The required value for the constraint. Other values will not be accepted.\n * @property {string} [ideal] The ideal value for the constraint. Other values will be considered if necessary.\n * @example\n * // Specify video resolution when making a call.\n * client.call.make(destination, {\n *    audio: true,\n *    video: true,\n *    videoOptions: {\n *      // Set height and width constraints to ideally be 1280x720.\n *      height: { ideal: 720 },\n *      width: { ideal: 1280 }\n *    }\n * })\n */\n\n/**\n * The BandwidthControls type defines the format for configuring media and/or track bandwidth options.\n * BandwidthControls only affect received remote tracks of the specified type.\n *\n * @public\n * @static\n * @typedef {Object} BandwidthControls\n * @memberof call\n * @property {number} [call] The desired combined bandwidth bitrate in kilobits per second for all media in the call.\n * @property {number} [audio] The desired bandwidth bitrate in kilobits per second for received remote audio.\n * @property {number} [video] The desired bandwidth bitrate in kilobits per second for received remote video.\n * @example\n * // Specify received remote video bandwidth limits when making a call.\n * client.call.make(destination, mediaConstraints,\n *  {\n *    bandwidth: {\n *      video: 5\n *    }\n *  }\n * )\n */\n\n/**\n * The DSCPControls type defines the format for configuring network priorities (DSCP marking) for the media traffic.\n *\n * If DSCPControls are not configured for a call the network priority of the traffic for all media kinds will be the default (i.e., \"low\").\n *\n * @public\n * @static\n * @typedef {Object} DSCPControls\n * @memberof call\n * @property {RTCPriorityType} [audioNetworkPriority='low'] The desired network priority for audio traffic (see {@link https://www.w3.org/TR/webrtc-priority/#rtc-priority-type RTCPriorityType Enum} for the list of possible values).\n * @property {RTCPriorityType} [videoNetworkPriority='low'] The desired network priority for video traffic (see {@link https://www.w3.org/TR/webrtc-priority/#rtc-priority-type RTCPriorityType Enum} for the list of possible values).\n * @property {RTCPriorityType} [screenNetworkPriority='low'] The desired network priority for screen share traffic (see {@link https://www.w3.org/TR/webrtc-priority/#rtc-priority-type RTCPriorityType Enum} for the list of possible values).\n */\n\n/**\n * @public\n * @static\n * @typedef {Object} IceServer\n * @memberof call\n * @property {Array<string>|string} urls Either an array of URLs for reaching out several ICE servers or a single URL for reaching one ICE server. See {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCIceServer/urls RTCIceServers.urls documentation} to learn more about the actual url format.\n * @property {string} [credential] The credential needed by the ICE server.\n */\n\n/**\n * @public\n * @static\n * @typedef {Object} SdpHandlerInfo\n * @memberof call\n * @property {string} callId The id corresponding to the call for which the handler is being run.\n * @property {RTCSdpType} type The session description's type.\n * @property {string} step The step that will occur after the SDP Handlers are run.\n *    Will be either 'set' (the SDP will be set locally) or 'send' (the SDP will\n *    be sent to the remote endpoint).\n * @property {string} endpoint Which end of the connection created the SDP.\n */\n\n/**\n * The form of an SDP handler function and the expected arguments that it receives.\n * @public\n * @static\n * @typedef {Function} SdpHandlerFunction\n * @memberof call\n * @param {Object} newSdp The SDP so far (could have been modified by previous handlers).\n * @param {call.SdpHandlerInfo} info Additional information that might be useful when making SDP modifications.\n * @param {Object} originalSdp The SDP in its initial state.\n * @returns {Object} The resulting modified SDP based on the changes made by this function.\n */\n\n/**\n * The state representation of a Media object.\n * Media is a collection of Track objects.\n *\n * @public\n * @static\n * @typedef {Object} MediaObject\n * @memberof call\n * @property {string} id The ID of the Media object.\n * @property {boolean} local Indicator on whether this media is local or remote.\n * @property {Array<call.TrackObject>} tracks A list of Track objects that are contained in this Media object.\n */\n\n/**\n * A Track is a stream of audio or video media from a single source.\n * Tracks can be retrieved using the Media module's `getTrackById` API and manipulated with other functions of the Media module.\n *\n * @public\n * @static\n * @typedef {Object} TrackObject\n * @memberof call\n * @property {Array<string>} containers The list of CSS selectors that were used to render this Track.\n * @property {boolean} disabled Indicator of whether this Track is disabled or not. If disabled, it cannot be re-enabled.\n * @property {string} id The ID of the Track.\n * @property {string} kind The kind of Track this is (audio, video).\n * @property {string} label The label of the device this Track uses.\n * @property {boolean} muted Indicator on whether this Track is muted or not.\n * @property {boolean} sourceMuted Indicator on whether this Track is receiving media from its source or not.\n *    When true, the Track can be considered removed. This indicator is affected by actions outside the\n *    control of the SDK, such as the remote endpoint of a Call stopping to send media for a remote Track,\n *    or the browser temporarily disabling the SDK's access to a local Track's source.\n * @property {string} state The state of this Track. Can be 'live' or 'ended'.\n * @property {string} streamId The ID of the Media Stream that includes this Track.\n */\n\n/**\n * A collection of media devices and their information.\n *\n * @public\n * @static\n * @typedef {Object} DevicesObject\n * @memberof call\n * @property {Array<call.DeviceInfo>} camera A list of camera device information.\n * @property {Array<call.DeviceInfo>} microphone A list of microphone device information.\n * @property {Array<call.DeviceInfo>} speaker A list of speaker device information.\n */\n\n/**\n * Contains information about a device.\n *\n * @public\n * @static\n * @typedef {Object} DeviceInfo\n * @memberof call\n * @property {string} deviceId The ID of the device.\n * @property {string} groupId The group ID of the device. Devices that share a `groupId` belong to the same physical device.\n * @property {string} kind The type of the device (audioinput, audiooutput, videoinput).\n * @property {string} label The name of the device.\n */\n\n/**\n * Custom SIP headers can be used to convey additional information to a SIP endpoint.\n *\n * These headers must be configured on the server prior to making a request, otherwise the request will fail when trying to set the headers.\n *\n * These headers can be specified with the {@link call.make} and {@link call.answer} APIs.\n * They can also be set on a call using the {@link call.setCustomParameters}, and sent using the {@link call.sendCustomParameters} API.\n *\n * Custom headers may be received anytime throughout the duration a call. A remote endpoint may send custom headers when starting a call,\n *  answering a call, or during call updates such as hold/unhold and addition/removal of media in the call.\n *  When these custom headers are received, the SDK will emit a {@link call.event:call:customParameters call:customParameters} event\n *  which will contain the custom parameters that were received.\n *\n * A Call's custom parameters are a property of the Call's {@link call.CallObject CallObject},\n *  which can be retrieved using the {@link call.getById} or\n *  {@link call.getAll} APIs.\n *\n * @public\n * @static\n * @module CustomParameter\n * @typedef {Object} CustomParameter\n * @memberof call\n * @requires link_call\n * @requires callMe\n * @property {string} name - The name of the custom parameter\n * @property {string} value - The value of the custom parameter\n * @example\n * // Specify custom parameters when making a call.\n * client.call.make(destination, mediaConstraints,\n *  {\n *    customParameters: [\n *      {\n *        name: 'X-GPS',\n *        value: '42.686032,23.344565'\n *      }\n *    ]\n *  }\n * )\n */\n\n/**\n * Call API index.\n * APIs are organized by their namespacing.\n * @method api\n * @param {Object} context\n * @param {Function} context.dispatch The redux store's dispatch function.\n * @param {Function} context.getState The redux store's getState function.\n * @return {Object} The plugin's API object.\n */\nexport default function api (context) {\n  return {\n    call: callAPI(context)\n  }\n}\n","/**\n * Blocking operations that can be performed on a call.\n * ie. no two of thes operations, either local or remote,\n *    can be performed at the same time.\n * TODO: Should all operations just be listed here? Probably.\n */\nexport const OPERATIONS = {\n  // Establishment.\n  MAKE: 'MAKE',\n  ANSWER: 'ANSWER',\n  REJECT: 'REJECT',\n  IGNORE: 'IGNORE',\n  END: 'END',\n  // TODO: Make sure these constants and actionTypes are in-sync with each\n  //    other. Use one to build the other.\n  FORWARD_CALL: 'FORWARD_CALL',\n  // Midcall.\n  HOLD: 'HOLD',\n  UNHOLD: 'UNHOLD',\n  SEND_CUSTOM_PARAMETERS: 'SEND_CUSTOM_PARAMETERS',\n  ADD_MEDIA: 'ADD_MEDIA',\n  ADD_BASIC_MEDIA: 'ADD_BASIC_MEDIA',\n  REMOVE_MEDIA: 'REMOVE_MEDIA',\n  REMOVE_BASIC_MEDIA: 'REMOVE_BASIC_MEDIA',\n  RENEGOTIATE: 'RENEGOTIATE',\n  GET_STATS: 'GET_STATS',\n  SEND_DTMF: 'SEND_DTMF',\n  CONSULTATIVE_TRANSFER: 'CONSULTATIVE_TRANSFER',\n  DIRECT_TRANSFER: 'DIRECT_TRANSFER',\n  JOIN: 'JOIN',\n  REPLACE_TRACK: 'REPLACE_TRACK',\n  // Remote-only.\n  START_MOH: 'START_MOH',\n  STOP_MOH: 'STOP_MOH',\n  SLOW_START: 'SLOW_START'\n}\n\n/*\n * Endpoints that can perform operations.\n */\nexport const ENDPOINTS = {\n  LOCAL: 'LOCAL',\n  REMOTE: 'REMOTE'\n  // SERVER: 'SERVER' ?\n}\n\n/*\n * Statuses of an operation.\n */\nexport const OP_STATUS = {\n  ONGOING: 'ONGOING', // The operation is ongoing locally.\n  PENDING: 'PENDING' // The operation is pending remotely.\n}\n\n/*\n * Transitions of an operation.\n */\nexport const OP_TRANSITIONS = {\n  START: 'START', // The operation is starting.\n  UPDATE: 'UPDATE', // The operation is ongoing.\n  FINISH: 'FINISH' // The operation has finished.\n}\n\n/*\n * Operations that don't have a corresponding finish operation\n */\nexport const NO_FINISH_OPS = [OPERATIONS.ADD_BASIC_MEDIA, OPERATIONS.REMOVE_BASIC_MEDIA]\n","/**\n * A call operation has either started, been updated, or finished.\n *\n * Information about ongoing call operations are stored with the call\n *    information (see the {@link call.getById} API). This event indicates that\n *    an operation's information has been changed.\n *\n * Local call operations will be tracked from start to finish. An operation may\n *    be updated as it progresses, based on the status of the operation. The\n *    operation status may be ongoing or pending, depending if the operation is\n *    waiting on activity on the local or remote end of the call, respectively.\n *\n * Except in the case of slow-start operations, remote operations will only be\n *    tracked as a \"finish\", to indicate that it occurred.\n * @public\n * @memberof call\n * @event call:operation\n * @param {Object} params\n * @param {string} params.operation The call operation causing this event.\n * @param {string} params.transition The transition reason for the operation change.\n * @param {boolean} params.isLocal Flag indicating whether the operation was local or not.\n * @param {Object} [params.previous] The operation information before this change.\n *    If the transition is to \"start\" the operation, there will be no previous information.\n * @param {string} [params.previous.operation] The operation that was ongoing.\n * @param {string} [params.previous.status] The operation status before this change.\n * @param {api.BasicError} [params.error] An error object, if the operation was not successful.\n */\nexport const CALL_OPERATION = 'call:operation'\n\n/**\n * An outgoing call has been started.\n *\n * Information about the Call can be retrieved using the {@link call.getById}\n *    API.\n *\n * @public\n * @memberof call\n * @event call:start\n * @param {Object} params\n * @param {string} params.callId The ID of the call.\n * @param {api.BasicError} [params.error] An error object, if the operation was not successful.\n */\nexport const CALL_STARTED = 'call:start'\n\n/**\n * A new joined call has been started.\n *\n * Information about the Call can be retrieved using the {@link call.getById}\n *    API.\n *\n * @public\n * @memberof call\n * @requires link_call\n * @event call:join\n * @param {Object} params\n * @param {string} params.callId The ID of the call.\n * @param {api.BasicError} [params.error] An error object, if the operation was not successful.\n */\nexport const CALL_JOIN = 'call:join'\n\n/**\n * A new incoming call has been received.\n *\n * Information about the Call can be retrieved using the {@link call.getById}\n *    API.\n *\n * @public\n * @memberof call\n * @event call:receive\n * @param {Object} params\n * @param {string} params.callId The ID of the call.\n * @param {api.BasicError} [params.error] An error object, if the operation was not successful.\n * @example\n * client.on('call:receive', function(params) {\n *     // We have received a call, prompt the user to respond.\n *     promptUser(client.call.getById(params.callId));\n * });\n */\nexport const CALL_INCOMING = 'call:receive'\n\n/**\n * A Call's state has changed.\n *\n * See {@link call.states} for information about call states.\n * @public\n * @memberof call\n * @event call:stateChange\n * @param {Object} params\n * @param {string} params.callId The ID of the Media object that was operated on.\n * @param {Object} params.previous The call's properties before the operation changed it.\n * @param {string} params.previous.state The previous state of the call.\n * @param {Object} [params.transition]\n * @param {number} [params.transition.statusCode] The status code associated with the particular state change's reason.\n * @param {string} [params.transition.reasonText] The reason for the state change.\n * @param {boolean} [params.previous.localHold] The previous local hold state. Present when the state change was a hold/unhold operation.\n * @param {boolean} [params.previous.remoteHold] The previous remote hold state. Present when the state change was a hold/unhold operation.\n * @param {api.BasicError} [params.error] An error object, if the operation was not successful.\n * @example\n * client.on('call:stateChange', function (params) {\n *     const call = client.call.getById(params.callId)\n *     const prevState = params.previous.state\n *     log(`Call changed from ${prevState} to ${call.state} state.`)\n *\n *     // Handle the event depending on the new call state.\n *     switch (call.state) {\n *         case client.call.states.CONNECTED:\n *             // Handle being on call with media.\n *             break\n *         case client.call.states.ENDED:\n *             // Handle call ending.\n *             break\n *         ...\n *     }\n * })\n */\nexport const CALL_STATE_CHANGE = 'call:stateChange'\n\n/**\n * New media has been added to the call.\n * @public\n * @memberof call\n * @event call:newMedia\n * @param {Object} params\n * @param {string} params.callId The ID of the call.\n * @param {boolean} params.local Whether the new media is local or not.\n * @param {Array} params.tracks The list of new Tracks.\n * @param {string} params.mediaId The ID of the Media object the Tracks belong to.\n */\nexport const CALL_ADDED_MEDIA = 'call:newMedia'\n\n/**\n * Media has been removed from the call.\n * @public\n * @memberof call\n * @event call:removedMedia\n * @param {Object} params\n * @param {string} params.callId The ID of the call.\n * @param {boolean} params.local Whether the removed Media was local or not.\n * @param {Array} params.tracks The list of removed Tracks.\n */\nexport const CALL_REMOVED_MEDIA = 'call:removedMedia'\n\n/**\n * A new Track has been added to the Call.\n *\n * The Track may have been added by either the local user or remote user using\n *    the {@link call.addMedia} API.\n *\n * Information about the Track can be retrieved using the\n *    {@link media.getTrackById} API.\n *\n * @public\n * @memberof call\n * @event call:newTrack\n * @param {Object} params\n * @param {string} params.callId The ID of the call the track was added to.\n * @param {string} params.mediaId The ID of the media the track was added to.\n * @param {string} params.trackId The ID of the newly added track.\n * @param {boolean} params.local Whether the track is local or not (remote)\n */\nexport const CALL_NEW_TRACK = 'call:newTrack'\n\n/**\n * A Track has been removed from a Call.\n *\n * The Track may have been removed by either the local user or remote user using\n *    the {@link call.removeMedia} API. Tracks are also removed from Calls\n *    automatically while the Call is on hold.\n *\n * @public\n * @memberof call\n * @event call:trackEnded\n * @param {Object} params\n * @param {string} params.callId The ID of the call the track was removed from.\n * @param {string} params.mediaId The ID of the media the track was removed from.\n * @param {string} params.trackId The ID of the removed track.\n * @param {boolean} params.local Whether the track was local or not (remote)\n */\nexport const CALL_TRACK_ENDED = 'call:trackEnded'\n\n/**\n * Stats have been retrieved for a Call or specific Track of a Call.\n *\n * See the {@link call.getStats} API for more information.\n *\n * @public\n * @memberof call\n * @event call:statsReceived\n * @param {Object} params\n * @param {string} params.callId The ID of the Call to retrieve stats for.\n * @param {string} [params.trackId] The ID of the Track to retrieve stats for.\n * @param {string} params.result The RTCStatsReport.\n * @param {api.BasicError} [params.error] An error object, if the operation was not successful.\n */\nexport const STATS_RECEIVED = 'call:statsReceived'\n\n/**\n * A Track has been replaced on the Call.\n *\n * A Track is replaced by the local user using the {@link call.replaceTrack}\n *    API.\n *\n * This event is similar to the {@link call.event:call:newTrack call:newTrack}\n *    event, where the call has a new Track, except that an existing Track has\n *    been removed at the same time. The event includes information about the\n *    Track that was replaced to help an application replace it seamlessly.\n *\n * @public\n * @memberof call\n * @event call:trackReplaced\n * @param {Object} params\n * @param {string} params.callId The ID of the call where a track was replaced.\n * @param {string} [params.newTrackId] The ID of the new track that replaced the old track.\n * @param {call.TrackObject} [params.oldTrack] State of the replaced track.\n * @param {api.BasicError} [params.error] An error object, if the operation was not successful.\n */\nexport const CALL_TRACK_REPLACED = 'call:trackReplaced'\n\n/**\n * Custom Parameters have been received for a Call.\n *\n * Please refer to {@link call.CustomParameter CustomParameter} for information on when this event may be emitted.\n * @public\n * @memberof call\n * @event call:customParameters\n * @param {Object} params\n * @param {string} params.callId The ID of the Call in which custom parameters were received.\n * @param {Array<call.CustomParameter>} params.customParameters The custom parameters received.\n */\nexport const CUSTOM_PARAMETERS = 'call:customParameters'\n\n/**\n * The list of available and supported codecs by the browser have been retrieved.\n *\n * This event is emitted as a result of the {@link call.getAvailableCodecs} API. Please refer to the API for more\n *  information.\n * @public\n * @memberof call\n * @event call:availableCodecs\n * @param {Object} params\n * @param {string} params.kind The kind of media the codecs are for.\n * @param {Array<Object>} params.codecs The list of codecs.\n */\nexport const AVAILABLE_CODECS = 'call:availableCodecs'\n","// Call plugin.\nimport * as eventTypes from './eventTypes'\nimport * as actionTypes from './actionTypes'\nimport { OPERATIONS, OP_TRANSITIONS } from './constants'\n\n// Webrtc plugin.\nimport * as webrtcActionTypes from '../../webrtc/interface/actionTypes'\n\n// Helpers\nimport { getCallById, getCallByWebrtcSessionId, getOptions } from './selectors'\nimport { cloneDeep } from 'lodash/fp'\n\n/**\n * Helper function to format call events.\n * @method callEventHandler\n * @param  {string} type        The type of event.\n * @param  {Object} action      The action that triggered the event.\n * @param  {Object} [params={}] Any non-consistent information to be included in the event.\n * @return {Object} An event object.\n */\nfunction callEventHandler (type, action, params = {}) {\n  /**\n   * Call event format.\n   * Call events follow a consistent format, based on the consistent format of\n   *    their actions.\n   */\n  const args = {\n    ...params\n  }\n  // There are cases where there is a callId in the params, in that case don't use the payload's id\n  // Example: See call event for SESSION_NEW_TRACK\n  if (!args.hasOwnProperty('callId') && action.payload.id) {\n    args.callId = action.payload.id\n  }\n\n  return {\n    type,\n    args\n  }\n}\n\n/**\n * Helper function for converting an action to a \"call state change\" event.\n * Ensures that all such events have consistent parameters.\n * @method stateChangeHandler\n * @param  {Object} action\n * @param  {Object} params\n * @param  {Object} params.prevState Redux state from before the action was processed by reducers.\n * @param  {Object} params.state     Redux state from after the action was processed by reducers.\n * @return {Object} An event object.\n */\nfunction stateChangeHandler (action, params) {\n  // Get the call state before this action updated state.\n  const prevCall = getCallById(params.prevState, action.payload.id)\n\n  return callEventHandler(eventTypes.CALL_STATE_CHANGE, action, {\n    error: action.payload.error,\n    transition: action.payload.transition,\n    previous: {\n      state: prevCall.state,\n      localHold: prevCall.localHold,\n      remoteHold: prevCall.remoteHold\n    }\n  })\n}\n\n/**\n * Helper function for converting an action to a \"call operation\" event.\n * Ensures that all such events have consistent parameters.\n * @method callOperationHandler\n * @param {Object} action\n * @param {Object} params\n * @param {Object} params.prevState The SDK state before this action updated state.\n * @param {string} params.operation The currently occurring operation.\n * @param {string} params.transition The transition reason for the operation change.\n * @param {string} params.isLocal Flag indicating whether the operation is local or not.\n * @param {Object} [any] Additional data provided depending on the operation.\n * @return {Object} An event object.\n */\nfunction callOperationHandler (action, params) {\n  // Get the call state before this action updated state.\n  const prevCall = getCallById(params.prevState, action.payload.id)\n  let previous\n\n  if (prevCall) {\n    previous = params.isLocal ? prevCall.localOp : prevCall.remoteOp\n  }\n\n  return callEventHandler(eventTypes.CALL_OPERATION, action, {\n    // operation params\n    operation: params.operation,\n    transition: params.transition,\n    isLocal: params.isLocal,\n    // previous operation state data\n    previous,\n    // error\n    error: action.payload.error\n  })\n}\n\nexport const callEvents = {}\n\n// START actions\nconst startActionTypesAndOperations = [\n  { type: actionTypes.ANSWER_CALL, operation: OPERATIONS.ANSWER },\n  { type: actionTypes.REJECT_CALL, operation: OPERATIONS.REJECT },\n  { type: actionTypes.IGNORE_CALL, operation: OPERATIONS.IGNORE },\n  { type: actionTypes.END_CALL, operation: OPERATIONS.END },\n  { type: actionTypes.FORWARD_CALL, operation: OPERATIONS.FORWARD_CALL },\n  { type: actionTypes.CALL_HOLD, operation: OPERATIONS.HOLD },\n  { type: actionTypes.CALL_UNHOLD, operation: OPERATIONS.UNHOLD },\n  { type: actionTypes.SEND_CUSTOM_PARAMETERS, operation: OPERATIONS.SEND_CUSTOM_PARAMETERS },\n  { type: actionTypes.ADD_MEDIA, operation: OPERATIONS.ADD_MEDIA },\n  { type: actionTypes.ADD_BASIC_MEDIA, operation: OPERATIONS.ADD_BASIC_MEDIA },\n  { type: actionTypes.REMOVE_MEDIA, operation: OPERATIONS.REMOVE_MEDIA },\n  { type: actionTypes.REMOVE_BASIC_MEDIA, operation: OPERATIONS.REMOVE_BASIC_MEDIA },\n  { type: actionTypes.RENEGOTIATE, operation: OPERATIONS.RENEGOTIATE },\n  { type: actionTypes.SEND_DTMF, operation: OPERATIONS.SEND_DTMF },\n  { type: actionTypes.GET_STATS, operation: OPERATIONS.GET_STATS },\n  { type: actionTypes.CONSULTATIVE_TRANSFER, operation: OPERATIONS.CONSULTATIVE_TRANSFER },\n  { type: actionTypes.DIRECT_TRANSFER, operation: OPERATIONS.DIRECT_TRANSFER },\n  { type: actionTypes.JOIN, operation: OPERATIONS.JOIN },\n  { type: actionTypes.REPLACE_TRACK, operation: OPERATIONS.REPLACE_TRACK }\n]\nstartActionTypesAndOperations.forEach(startActionTypeAndOperation => {\n  callEvents[startActionTypeAndOperation.type] = (action, params) => {\n    return callOperationHandler(action, {\n      ...params,\n      operation: startActionTypeAndOperation.operation,\n      transition: OP_TRANSITIONS.START,\n      isLocal: true\n    })\n  }\n})\n\ncallEvents[actionTypes.MAKE_CALL] = (action, params) => {\n  return [\n    callOperationHandler(action, {\n      ...params,\n      operation: OPERATIONS.MAKE,\n      transition: OP_TRANSITIONS.START,\n      isLocal: true\n    }),\n    callEventHandler(eventTypes.CALL_STARTED, action, {\n      error: action.payload.error\n    })\n  ]\n}\n\n// PENDING actions\ncallEvents[actionTypes.PENDING_MAKE_CALL] = (action, params) => {\n  return [\n    callOperationHandler(action, {\n      ...params,\n      operation: OPERATIONS.MAKE,\n      transition: OP_TRANSITIONS.UPDATE,\n      isLocal: true\n    }),\n    stateChangeHandler(action, params)\n  ]\n}\n\ncallEvents[actionTypes.PENDING_OPERATION] = (action, params) => {\n  return callOperationHandler(action, {\n    ...params,\n    operation: action.payload.operation,\n    transition: OP_TRANSITIONS.UPDATE,\n    isLocal: true\n  })\n}\n\ncallEvents[actionTypes.PENDING_CONSULTATIVE_TRANSFER] = (action, params) => {\n  const otherCallAction = cloneDeep(action)\n  otherCallAction.payload.id = action.payload.otherCallId\n  return [\n    callOperationHandler(action, {\n      ...params,\n      operation: OPERATIONS.CONSULTATIVE_TRANSFER,\n      transition: OP_TRANSITIONS.UPDATE,\n      isLocal: true\n    }),\n    callOperationHandler(otherCallAction, {\n      ...params,\n      operation: OPERATIONS.CONSULTATIVE_TRANSFER,\n      transition: OP_TRANSITIONS.UPDATE,\n      isLocal: true\n    })\n  ]\n}\n\ncallEvents[actionTypes.PENDING_JOIN] = (action, params) => {\n  const operationEvents = action.payload.usedCallIds.map(callId => {\n    const newAction = cloneDeep(action)\n    newAction.payload.id = callId\n    return callOperationHandler(newAction, {\n      ...params,\n      operation: OPERATIONS.JOIN,\n      transition: OP_TRANSITIONS.UPDATE,\n      isLocal: true\n    })\n  })\n  operationEvents.push(callEventHandler(eventTypes.CALL_JOIN, action))\n  return operationEvents\n}\n\n// FINISH actions\nconst finishActionTypesAndData = [\n  { type: actionTypes.MAKE_CALL_FINISH, operation: OPERATIONS.MAKE, isLocal: true },\n  { type: actionTypes.CALL_HOLD_FINISH, operation: OPERATIONS.HOLD, isLocal: true },\n  { type: actionTypes.CALL_UNHOLD_FINISH, operation: OPERATIONS.UNHOLD, isLocal: true },\n  { type: actionTypes.CALL_REMOTE_HOLD_FINISH, operation: OPERATIONS.HOLD, isLocal: false },\n  { type: actionTypes.CALL_REMOTE_UNHOLD_FINISH, operation: OPERATIONS.UNHOLD, isLocal: false },\n  { type: actionTypes.REJECT_CALL_FINISH, operation: OPERATIONS.REJECT, isLocal: true },\n  { type: actionTypes.IGNORE_CALL_FINISH, operation: OPERATIONS.IGNORE, isLocal: true },\n  { type: actionTypes.DIRECT_TRANSFER_FINISH, operation: OPERATIONS.DIRECT_TRANSFER, isLocal: true },\n  { type: actionTypes.CONSULTATIVE_TRANSFER_FINISH, operation: OPERATIONS.CONSULTATIVE_TRANSFER, isLocal: true },\n  { type: actionTypes.JOIN_FINISH, operation: OPERATIONS.JOIN, isLocal: true },\n  { type: actionTypes.FORWARD_CALL_FINISH, operation: OPERATIONS.FORWARD_CALL, isLocal: true }\n]\nfinishActionTypesAndData.forEach(finishActionTypeAndData => {\n  callEvents[finishActionTypeAndData.type] = (action, params) => {\n    return [\n      callOperationHandler(action, {\n        ...params,\n        operation: finishActionTypeAndData.operation,\n        isLocal: finishActionTypeAndData.isLocal,\n        transition: OP_TRANSITIONS.FINISH\n      }),\n      stateChangeHandler(action, params)\n    ]\n  }\n})\n\ncallEvents[actionTypes.END_CALL_FINISH] = (action, params) => {\n  return [\n    callOperationHandler(action, {\n      ...params,\n      operation: OPERATIONS.END,\n      transition: OP_TRANSITIONS.FINISH,\n      isLocal: action.payload.isLocal\n    }),\n    stateChangeHandler(action, params)\n  ]\n}\n\ncallEvents[actionTypes.ANSWER_CALL_FINISH] = (action, params) => {\n  const events = []\n  // Emit Call Operation Event\n  events.push(\n    callOperationHandler(action, {\n      ...params,\n      operation: OPERATIONS.ANSWER,\n      transition: OP_TRANSITIONS.FINISH,\n      isLocal: true\n    })\n  )\n\n  // Don't emit a stateChange event if it was a slow start answer. The call isn't actually\n  //    answered yet, so state hasn't changed.\n  // TODO: Don't have this in meta?\n  if (action.meta && action.meta.isSlowStart) {\n    return events\n  }\n\n  events.push(stateChangeHandler(action, params))\n  return events\n}\n\ncallEvents[actionTypes.ADD_MEDIA_FINISH] = (action, params) => {\n  return [\n    callOperationHandler(action, {\n      ...params,\n      operation: OPERATIONS.ADD_MEDIA,\n      transition: OP_TRANSITIONS.FINISH,\n      isLocal: action.payload.local\n    }),\n    callEventHandler(eventTypes.CALL_ADDED_MEDIA, action, {\n      local: action.payload.local,\n      tracks: action.payload.tracks,\n      mediaId: action.payload.mediaId,\n      error: action.payload.error\n    })\n  ]\n}\n\ncallEvents[actionTypes.REMOVE_MEDIA_FINISH] = (action, params) => {\n  return [\n    callOperationHandler(action, {\n      ...params,\n      operation: OPERATIONS.REMOVE_MEDIA,\n      transition: OP_TRANSITIONS.FINISH,\n      isLocal: action.payload.local\n    }),\n    callEventHandler(eventTypes.CALL_REMOVED_MEDIA, action, {\n      local: action.payload.local,\n      tracks: action.payload.tracks,\n      error: action.payload.error\n    })\n  ]\n}\n\n/*\n * Currently the RENEGOTIATE operation is only triggered after an unsolicited removal of media,\n *  hence the CALL_REMOVED_MEDIA event handler is used\n */\ncallEvents[actionTypes.RENEGOTIATE_FINISH] = (action, params) => {\n  return [\n    callOperationHandler(action, {\n      ...params,\n      operation: OPERATIONS.RENEGOTIATE,\n      transition: OP_TRANSITIONS.FINISH,\n      isLocal: action.payload.local\n    }),\n    callEventHandler(eventTypes.CALL_REMOVED_MEDIA, action, {\n      local: action.payload.local,\n      tracks: action.payload.tracks,\n      error: action.payload.error\n    })\n  ]\n}\n\ncallEvents[actionTypes.GET_STATS_FINISH] = (action, params) => {\n  return [\n    callOperationHandler(action, {\n      ...params,\n      operation: OPERATIONS.GET_STATS,\n      transition: OP_TRANSITIONS.FINISH,\n      isLocal: true\n    }),\n    callEventHandler(eventTypes.STATS_RECEIVED, action, {\n      result: action.payload.result,\n      error: action.payload.error,\n      trackId: action.payload.trackId\n    })\n  ]\n}\n\ncallEvents[actionTypes.REPLACE_TRACK_FINISH] = (action, params) => {\n  return [\n    callOperationHandler(action, {\n      ...params,\n      operation: OPERATIONS.REPLACE_TRACK,\n      transition: OP_TRANSITIONS.FINISH,\n      isLocal: true\n    }),\n    callEventHandler(eventTypes.CALL_TRACK_REPLACED, action, {\n      error: action.payload.error,\n      newTrackId: action.payload.newTrackId,\n      oldTrack: action.payload.oldTrackState\n    })\n  ]\n}\n\ncallEvents[actionTypes.SEND_DTMF_FINISH] = (action, params) => {\n  return callOperationHandler(action, {\n    ...params,\n    operation: OPERATIONS.SEND_DTMF,\n    transition: OP_TRANSITIONS.FINISH,\n    isLocal: true\n  })\n}\n\ncallEvents[actionTypes.SEND_CUSTOM_PARAMETERS_FINISH] = (action, params) => {\n  return callOperationHandler(action, {\n    ...params,\n    operation: OPERATIONS.SEND_CUSTOM_PARAMETERS,\n    isLocal: true,\n    transition: OP_TRANSITIONS.FINISH\n  })\n}\n\n// other actions\ncallEvents[actionTypes.CUSTOM_PARAMETERS_RECEIVED] = action => {\n  return callEventHandler(eventTypes.CUSTOM_PARAMETERS, action, {\n    customParameters: action.payload.customParameters\n  })\n}\n\ncallEvents[actionTypes.AVAILABLE_CODECS_RETRIEVED] = action => {\n  return callEventHandler(eventTypes.AVAILABLE_CODECS, action, {\n    kind: action.payload.kind,\n    codecs: action.payload.codecs\n  })\n}\n\ncallEvents[actionTypes.CALL_INCOMING] = action => {\n  return callEventHandler(eventTypes.CALL_INCOMING, action, {\n    error: action.payload.error\n  })\n}\n\ncallEvents[actionTypes.CALL_RINGING] = stateChangeHandler\ncallEvents[actionTypes.SESSION_PROGRESS] = stateChangeHandler\ncallEvents[actionTypes.CALL_CANCELLED] = stateChangeHandler\ncallEvents[actionTypes.CALL_ACCEPTED] = stateChangeHandler\n// TODO: Have a proper event for this since UPDATE_CALL does not change the call's state property.\ncallEvents[actionTypes.UPDATE_CALL] = stateChangeHandler\n\ncallEvents[webrtcActionTypes.SESSION_NEW_TRACK] = (action, context) => {\n  const state = context.state\n  // The webrtc session should have been already created (by handling SESSION_CREATED action -- see above)\n  const call = getCallByWebrtcSessionId(state, action.payload.id)\n\n  if (call) {\n    // By passing callId in the params object it will overwrite\n    // callId that is set in callEventHandler\n    return callEventHandler(eventTypes.CALL_NEW_TRACK, action, {\n      ...action.payload,\n      callId: call.id\n    })\n  }\n  return null\n}\n\ncallEvents[webrtcActionTypes.SESSION_TRACK_REMOVED] = (action, context) => {\n  const state = context.state\n  const call = getCallByWebrtcSessionId(state, action.payload.id)\n\n  if (call) {\n    const callOptions = getOptions(state)\n    if (callOptions.sdpSemantics === 'plan-b') {\n      // For plan-b we won't trigger another 'call:trackEnded' event because it\n      // is already triggered by the SESSION_TRACK_ENDED action.\n      return null\n    }\n    return callEventHandler(eventTypes.CALL_TRACK_ENDED, action, {\n      ...action.payload,\n      callId: call.id\n    })\n  }\n}\n\ncallEvents[webrtcActionTypes.SESSION_TRACK_ENDED] = (action, context) => {\n  const state = context.state\n  const call = getCallByWebrtcSessionId(state, action.payload.id)\n\n  if (call) {\n    return callEventHandler(eventTypes.CALL_TRACK_ENDED, action, {\n      ...action.payload,\n      callId: call.id\n    })\n  }\n}\n\ncallEvents[actionTypes.MAKE_ANONYMOUS_CALL_FINISH] = (action, context) => {\n  return callEventHandler(eventTypes.CALL_STARTED, action, {\n    error: action.payload.error\n  })\n}\n\nexport default {\n  ...callEvents\n}\n","// Import the components of the interface.\nimport api from './api'\nimport reducer from './reducers'\n\n/**\n * This interface is for a call plugin.\n * @type {string}\n */\nconst name = 'call'\n\n// Export the interface as a single object.\nexport default {\n  name,\n  api,\n  reducer\n}\n","// Call plugin.\nimport * as actionTypes from '../actionTypes'\nimport { CALL_STATES, CALL_DIRECTION } from '../../constants'\nimport { setOperationState } from '../utils'\n\n// Libraries.\nimport { combineActions, handleActions } from 'redux-actions'\nimport { concat } from 'lodash/fp'\n\n/**\n * A no-op reducer.\n * Some reducers don't need to change state, but need to exist so their actions\n *    can be handled the same way as other actions (eg. wrapped to update local\n *    operation).\n * @method noop\n */\nconst noop = (state, action) => state\n\n/**\n * The reducer logic used for finish operations that end a call.\n * @method callEnder\n */\nconst callEnder = (state, action) => {\n  const now = Date.now()\n  return {\n    ...state,\n    state: CALL_STATES.ENDED,\n    // If there isn't a start time, then the call was never completed.\n    //    Meaning it's duration was 0, so set the start time appropriately.\n    startTime: state.startTime || now,\n    endTime: now,\n    remoteParticipant: {\n      ...state.remoteParticipant,\n      ...action.payload.remoteParticipant\n    },\n    // TODO: Remove this later.\n    isPending: undefined\n  }\n}\n\n// Top-tier reducers: Handles the whole call state.\nconst reducers = {}\n// Call-tier reducers: Handles only a specific call's state.\nconst callReducers = {}\n\n/*\n * Top-tier reducers.\n * Receives the entire call substate as state.\n */\n\n// Add the new call to state.\nreducers[actionTypes.MAKE_CALL] = {\n  next (state, action) {\n    // TODO: Call model? (with defaults for call state)\n    let newCall = {\n      id: action.payload.id,\n      remoteParticipant: {\n        displayNumber: action.payload.participantAddress,\n        displayName: action.payload.participantName\n      },\n      // Number of the remote participant when the call was established.\n      to: action.payload.participantAddress,\n      from: action.payload.from,\n      mediaConstraints: action.payload.mediaConstraints,\n      dscpControls: action.payload.dscpControls,\n      // TODO: Proper constants.\n      state: CALL_STATES.INITIATING,\n      direction: CALL_DIRECTION.OUTGOING,\n      // Hold status.\n      localHold: false,\n      remoteHold: false,\n      isCaller: true,\n      // Flag indicating whether the call is anonymous or not\n      isAnonymous: action.payload.isAnonymous,\n      // The account token used to make the anonymous call\n      account: action.payload.account\n    }\n\n    // Set the call's operation substate.\n    newCall = setOperationState(newCall, action)\n\n    return concat(state, newCall)\n  }\n}\n\n// Add the new call to state.\nreducers[actionTypes.CALL_INCOMING] = {\n  next (state, action) {\n    return concat(state, {\n      isCaller: false,\n      ...action.payload\n    })\n  }\n}\n\n/*\n * Call-tier reducers.\n * Receive a single call's state as state.\n */\n\ncallReducers[actionTypes.CALL_RINGING] = {\n  next (state, action) {\n    if (action.payload.remoteParticipant) {\n      return {\n        ...state,\n        state: CALL_STATES.RINGING,\n        remoteParticipant: action.payload.remoteParticipant\n      }\n    } else {\n      return {\n        ...state,\n        state: CALL_STATES.RINGING\n      }\n    }\n  }\n}\n\n// Handle Early Media the same as Ringing, just with a different state.\ncallReducers[actionTypes.SESSION_PROGRESS] = {\n  next (state, action) {\n    return {\n      ...state,\n      state: CALL_STATES.EARLY_MEDIA,\n      remoteParticipant: action.payload.remoteParticipant\n    }\n  }\n}\n\n/*\n * Call-tier reducers.\n * Receive a single call's state as state.\n */\n\n/*\n * Some reducers don't need to change state directly, but need to exist.\n * Call-specific reducers are wrapped to keep information about on-going\n *    operations up-to-date.\n */\ncallReducers[actionTypes.PENDING_OPERATION] = noop\ncallReducers[actionTypes.ANSWER_CALL] = noop\ncallReducers[actionTypes.CALL_HOLD] = noop\ncallReducers[actionTypes.CALL_UNHOLD] = noop\ncallReducers[actionTypes.SEND_CUSTOM_PARAMETERS] = noop\ncallReducers[actionTypes.END_CALL] = noop\ncallReducers[actionTypes.ADD_MEDIA] = noop\ncallReducers[actionTypes.REMOVE_MEDIA] = noop\ncallReducers[actionTypes.ADD_BASIC_MEDIA] = noop\ncallReducers[actionTypes.REMOVE_BASIC_MEDIA] = noop\ncallReducers[actionTypes.RENEGOTIATE] = noop\ncallReducers[actionTypes.FORWARD_CALL] = noop\ncallReducers[actionTypes.REJECT_CALL] = noop\ncallReducers[actionTypes.SEND_DTMF] = noop\ncallReducers[actionTypes.SEND_DTMF_FINISH] = noop\ncallReducers[actionTypes.IGNORE_CALL] = noop\ncallReducers[actionTypes.DIRECT_TRANSFER] = noop\ncallReducers[actionTypes.REPLACE_TRACK] = noop\ncallReducers[actionTypes.REPLACE_TRACK_FINISH] = noop\ncallReducers[actionTypes.REMOTE_SLOW_START] = noop\ncallReducers[actionTypes.REMOTE_START_MOH_FINISH] = noop\ncallReducers[actionTypes.REMOTE_STOP_MOH_FINISH] = noop\ncallReducers[actionTypes.GET_STATS] = noop\ncallReducers[actionTypes.GET_STATS_FINISH] = noop\n\ncallReducers[actionTypes.CALL_CANCELLED] = {\n  next (state, action) {\n    return {\n      ...state,\n      state: CALL_STATES.CANCELLED\n    }\n  }\n}\n\ncallReducers[actionTypes.IGNORE_CALL_FINISH] = {\n  next (state, action) {\n    // The call being ignored means it was not completed. Ensure there are times\n    //    in state, and they reflect that the call was not completed.\n    // TODO: Better call times.\n    const now = Date.now()\n\n    return {\n      ...state,\n      startTime: now,\n      endTime: now,\n      state: CALL_STATES.ENDED\n    }\n  }\n}\n\ncallReducers[actionTypes.REJECT_CALL_FINISH] = {\n  next (state, action) {\n    // The call being rejected means it was not completed. Ensure there are\n    //    times in state, and they reflect that the call was not completed.\n    // TODO: Better call times.\n    const now = Date.now()\n\n    return {\n      ...state,\n      startTime: now,\n      endTime: now,\n      state: CALL_STATES.ENDED\n    }\n  }\n}\n\ncallReducers[actionTypes.SESSION_CREATED] = {\n  next (state, action) {\n    // When we get SESSION_CREATED action, the call object already exists as part of reducers state\n    // so we only add the webrtc session id. This way, when call:newTrack action is later triggered,\n    // we can find the call object by searching for this associated webrtcSessionId.\n    return {\n      ...state,\n      webrtcSessionId: action.payload.webrtcSessionId\n    }\n  }\n}\n\ncallReducers[actionTypes.PENDING_MAKE_CALL] = {\n  next (state, action) {\n    return {\n      ...state,\n      state: action.payload.state,\n      wrtcsSessionId: action.payload.wrtcsSessionId,\n      webrtcSessionId: action.payload.webrtcSessionId,\n      bandwidth: action.payload.bandwidth,\n      displayName: action.payload.displayName,\n      customParameters: action.payload.customParameters\n    }\n  }\n}\n\n// Update the new call state based on the outcome.\ncallReducers[actionTypes.MAKE_CALL_FINISH] = {\n  next (state, action) {\n    return {\n      ...state,\n      ...action.payload\n    }\n  },\n  throw (state, action) {\n    return {\n      ...state,\n      ...action.payload\n    }\n  }\n}\n\n// Update the call state based on the outcome.\ncallReducers[actionTypes.ANSWER_CALL_FINISH] = {\n  next (state, action) {\n    // If the action has a Session ID, store it as the ID.\n    // In some scenarios (slow start), the we only get an ID\n    //    at the answer step.\n    const webrtcId = action.payload.webrtcSessionId || state.webrtcSessionId\n\n    const newState = {\n      ...state,\n      state: action.payload.state,\n      mediaConstraints: action.payload.mediaConstraints,\n      dscpControls: action.payload.dscpControls,\n      webrtcSessionId: webrtcId,\n      localHold: false,\n      remoteHold: false,\n      bandwidth: action.payload.bandwidth,\n      customParameters: action.payload.customParameters\n    }\n\n    // Add start time to the call's state here if the call is not a slowstart call\n    if (action.meta && !action.meta.isSlowStart) {\n      newState.startTime = action.payload.startTime\n    }\n\n    return newState\n  },\n  throw (state, action) {\n    return {\n      ...state,\n      ...action.payload\n    }\n  }\n}\n\ncallReducers[actionTypes.CALL_ACCEPTED] = {\n  next (state, action) {\n    return {\n      ...state,\n      ...action.payload\n    }\n  },\n  throw (state, action) {\n    const newState = action.payload.state || state.state\n    return {\n      ...state,\n      state: newState\n    }\n  }\n}\n\n// Handles both success and failure actions the same way.\n// Instead of an object with `next` & `throw` properties, pass in a function.\n// https://redux-actions.js.org/api/handleaction#handleactiontype-reducer-defaultstate\ncallReducers[actionTypes.END_CALL_FINISH] = callEnder\n\ncallReducers[actionTypes.UPDATE_CALL] = {\n  next (state, action) {\n    const { transition, ...payloadWithoutTransition } = action.payload\n    return {\n      ...state,\n      ...payloadWithoutTransition\n    }\n  }\n}\n\ncallReducers[actionTypes.CALL_HOLD_FINISH] = {\n  next (state, action) {\n    return {\n      ...state,\n      localHold: true,\n      state: CALL_STATES.ON_HOLD\n    }\n  }\n}\n\ncallReducers[actionTypes.CALL_UNHOLD_FINISH] = {\n  next (state, action) {\n    const callState = state.remoteHold ? CALL_STATES.ON_HOLD : CALL_STATES.CONNECTED\n    return {\n      ...state,\n      localHold: false,\n      state: callState\n    }\n  }\n}\n\ncallReducers[actionTypes.SET_CUSTOM_PARAMETERS] = {\n  next (state, action) {\n    let customParameters = action.payload.customParameters\n    if (Array.isArray(customParameters) && customParameters.length === 0) {\n      customParameters = undefined\n    }\n    return {\n      ...state,\n      customParameters\n    }\n  }\n}\n\ncallReducers[actionTypes.SEND_CUSTOM_PARAMETERS_FINISH] = {\n  next (state, action) {\n    return {\n      ...state,\n      ...action.payload\n    }\n  }\n}\n\ncallReducers[actionTypes.CALL_REMOTE_HOLD_FINISH] = {\n  next (state, action) {\n    return {\n      ...state,\n      remoteHold: true,\n      state: CALL_STATES.ON_HOLD,\n      remoteParticipant: {\n        ...state.remoteParticipant,\n        ...action.payload.remoteParticipant\n      }\n    }\n  }\n}\n\ncallReducers[actionTypes.CALL_REMOTE_UNHOLD_FINISH] = {\n  next (state, action) {\n    const callState = state.localHold ? CALL_STATES.ON_HOLD : CALL_STATES.CONNECTED\n    return {\n      ...state,\n      remoteHold: false,\n      state: callState,\n      remoteParticipant: {\n        ...state.remoteParticipant,\n        ...action.payload.remoteParticipant\n      }\n    }\n  }\n}\n\ncallReducers[actionTypes.FORWARD_CALL_FINISH] = {\n  next (state, action) {\n    return {\n      ...state,\n      state: CALL_STATES.ENDED\n    }\n  }\n}\n\ncallReducers[actionTypes.DIRECT_TRANSFER_FINISH] = {\n  next: callEnder\n}\n\nreducers[actionTypes.CONSULTATIVE_TRANSFER] = {\n  next (state, action) {\n    const callIds = [action.payload.id, action.payload.otherCallId]\n\n    // Iterate through the calls looking for the two being acted on.\n    //    Update them to set the operation substate.\n    return state.map(call => {\n      if (callIds.includes(call.id)) {\n        return setOperationState(call, action)\n      } else {\n        return call\n      }\n    })\n  }\n}\n\nreducers[actionTypes.PENDING_CONSULTATIVE_TRANSFER] = {\n  next (state, action) {\n    return state.map(call => {\n      if (call.id === action.payload.id || call.id === action.payload.otherCallId) {\n        // Update the local operation in the call's state.\n        return setOperationState(call, action)\n      } else {\n        return call\n      }\n    })\n  }\n}\n\nreducers[actionTypes.CONSULTATIVE_TRANSFER_FINISH] = {\n  next: (state, action) => {\n    return state.map(call => {\n      if (call.id === action.payload.id || call.id === action.payload.otherCallId) {\n        const endedCall = callEnder(call, action)\n        return setOperationState(endedCall, action)\n      } else {\n        return call\n      }\n    })\n  },\n  throw: (state, action) => {\n    return state.map(call => {\n      if (call.id === action.payload.id || call.id === action.payload.otherCallId) {\n        return setOperationState(call, action)\n      } else {\n        return call\n      }\n    })\n  }\n}\n\nreducers[actionTypes.JOIN] = {\n  next (state, action) {\n    // Update operation substate state for both calls used in the operation.\n    const callIds = [action.payload.id, action.payload.otherCallId]\n\n    return state.map(call => {\n      if (callIds.includes(call.id)) {\n        return setOperationState(call, action)\n      } else {\n        return call\n      }\n    })\n  }\n}\n\nreducers[actionTypes.PENDING_JOIN] = {\n  next (state, action) {\n    const newCall = {\n      id: action.payload.id,\n      remoteParticipant: {\n        displayNumber: action.payload.participantAddress,\n        displayName: action.payload.participantName\n      },\n      // TODO: Have better names for `to` & `from`\n      to: action.payload.participantAddress,\n      from: action.payload.from,\n      mediaConstraints: action.payload.mediaConstraints,\n      state: CALL_STATES.INITIATED,\n      direction: CALL_DIRECTION.OUTGOING,\n      // Hold status.\n      localHold: false,\n      remoteHold: false,\n      isCaller: true,\n      wrtcsSessionId: action.payload.wrtcsSessionId,\n      webrtcSessionId: action.payload.webrtcSessionId,\n      isJoinedCall: true,\n      customParameters: action.payload.customParameters,\n      bandwidth: action.payload.bandwidth\n    }\n\n    return concat(\n      state.map(call => {\n        if (action.payload.usedCallIds.includes(call.id)) {\n          // Update the call's operation substate.\n          return setOperationState(call, action)\n        } else {\n          return call\n        }\n      }),\n      newCall\n    )\n  }\n}\n\nreducers[actionTypes.JOIN_FINISH] = {\n  next: (state, action) => {\n    return state.map(call => {\n      if (\n        call.id === action.payload.id ||\n        (action.payload.usedCallIds && action.payload.usedCallIds.includes(call.id))\n      ) {\n        const endedCall = callEnder(call, action)\n        return setOperationState(endedCall, action)\n      } else {\n        return call\n      }\n    })\n  },\n  throw: (state, action) => {\n    return state.map(call => {\n      if (\n        call.id === action.payload.id ||\n        (action.payload.usedCallIds && action.payload.usedCallIds.includes(call.id))\n      ) {\n        return setOperationState(call, action)\n      } else {\n        return call\n      }\n    })\n  }\n}\n\ncallReducers[actionTypes.ADD_MEDIA_FINISH] = {\n  next (state, action) {\n    return {\n      ...state,\n      bandwidth: action.payload.bandwidth\n    }\n  }\n}\n\ncallReducers[actionTypes.REMOVE_MEDIA_FINISH] = {\n  next (state, action) {\n    return {\n      ...state,\n      bandwidth: action.payload.bandwidth\n    }\n  }\n}\n\ncallReducers[actionTypes.RENEGOTIATE_FINISH] = {\n  next (state, action) {\n    return {\n      ...state,\n      bandwidth: action.payload.bandwidth\n    }\n  }\n}\n\n/*\n * Combine all of the call-tier reducers into a single reducer,\n *      each with a default state of empty object.\n */\nconst callReducer = handleActions(callReducers, {})\n\n// Actions routed to call-tier reducers.\nconst specificCallActions = combineActions(\n  actionTypes.PENDING_OPERATION,\n  actionTypes.PENDING_MAKE_CALL,\n  actionTypes.MAKE_CALL_FINISH,\n  actionTypes.ANSWER_CALL,\n  actionTypes.ANSWER_CALL_FINISH,\n  actionTypes.REJECT_CALL,\n  actionTypes.REJECT_CALL_FINISH,\n  actionTypes.CALL_ACCEPTED,\n  actionTypes.CALL_RINGING,\n  actionTypes.SESSION_PROGRESS,\n  actionTypes.CALL_CANCELLED,\n  actionTypes.IGNORE_CALL,\n  actionTypes.IGNORE_CALL_FINISH,\n  actionTypes.END_CALL,\n  actionTypes.END_CALL_FINISH,\n  actionTypes.CALL_HOLD,\n  actionTypes.CALL_HOLD_FINISH,\n  actionTypes.CALL_UNHOLD,\n  actionTypes.CALL_UNHOLD_FINISH,\n  actionTypes.SET_CUSTOM_PARAMETERS,\n  actionTypes.SEND_CUSTOM_PARAMETERS,\n  actionTypes.SEND_CUSTOM_PARAMETERS_FINISH,\n  actionTypes.CALL_REMOTE_HOLD_FINISH,\n  actionTypes.CALL_REMOTE_UNHOLD_FINISH,\n  actionTypes.ADD_MEDIA,\n  actionTypes.ADD_BASIC_MEDIA,\n  actionTypes.ADD_MEDIA_FINISH,\n  actionTypes.REMOVE_MEDIA,\n  actionTypes.REMOVE_BASIC_MEDIA,\n  actionTypes.REMOVE_MEDIA_FINISH,\n  actionTypes.RENEGOTIATE,\n  actionTypes.RENEGOTIATE_FINISH,\n  actionTypes.UPDATE_CALL,\n  actionTypes.FORWARD_CALL,\n  actionTypes.FORWARD_CALL_FINISH,\n  actionTypes.DIRECT_TRANSFER,\n  actionTypes.DIRECT_TRANSFER_FINISH,\n  actionTypes.SEND_DTMF,\n  actionTypes.SEND_DTMF_FINISH,\n  actionTypes.JOIN,\n  actionTypes.REPLACE_TRACK,\n  actionTypes.REPLACE_TRACK_FINISH,\n  actionTypes.REMOTE_SLOW_START,\n  actionTypes.REMOTE_START_MOH_FINISH,\n  actionTypes.REMOTE_STOP_MOH_FINISH,\n  actionTypes.GET_STATS,\n  actionTypes.GET_STATS_FINISH,\n  actionTypes.SESSION_CREATED\n)\n\n/*\n * Reducer to handle specific call actions.\n * Routes the actions to the call-tier reducers.\n */\nreducers[specificCallActions] = (state, action) => {\n  return state.map(function (call) {\n    // Only update the call related to the action.\n    if (call.id === action.payload.id) {\n      // Update call state as per the reducer.\n      let updatedCall = callReducer(call, action)\n\n      // Update the operation portion of the call state. This handles both\n      //    successful and failure actions.\n      updatedCall = setOperationState(updatedCall, action)\n      return updatedCall\n    } else {\n      return call\n    }\n  })\n}\n\n/*\n * Combine all of top-tier reducers into a single reducer,\n *      each with a default state of an empty array.\n */\nconst reducer = handleActions(reducers, [])\nexport default reducer\n","import calls from './call'\nimport turn from './turn'\n\n/**\n * Combine subreducers into a single call reducer.\n */\nexport default function (state = {}, action) {\n  return {\n    calls: calls(state.calls, action),\n    turn: turn(state.turn, action)\n  }\n}\n","// Call plugin.\nimport * as actionTypes from '../actionTypes'\n\n// Libraries.\nimport { handleActions } from 'redux-actions'\n\nconst reducers = {}\n\n// Replace any previous information with the new information.\nreducers[actionTypes.TURN_CHANGED] = {\n  next (state, action) {\n    return {\n      ...state,\n      servers: action.payload.servers || state.servers,\n      credentials: {\n        ...state.credentials,\n        ...action.payload.credentials\n      }\n    }\n  }\n}\n\n/*\n * Combine all of top-tier reducers into a single reducer.\n */\nconst reducer = handleActions(reducers, {})\nexport default reducer\n","// Call plugin.\nimport { CALL_STATES } from '../constants'\n\n// Webrtc plugin.\nimport { getSessionById } from '../../webrtc/interface/selectors'\n\n/**\n * Call selectors.\n * Handles retrieving data from the `state.call.calls` substate.\n */\n\n/**\n * Helper function for adding track information to call state.\n * @method addTracksToCall\n * @param  {Object} state\n * @param  {Object} callState\n * @return {Object} Track augmented call state.\n */\nfunction addTracksToCall (state, callState) {\n  const session = getSessionById(state, callState.webrtcSessionId)\n  if (session) {\n    return {\n      ...callState,\n      localTracks: session.localTracks,\n      remoteTracks: session.remoteTracks\n    }\n  } else {\n    return {\n      ...callState,\n      localTracks: [],\n      remoteTracks: []\n    }\n  }\n}\n\n/**\n * Get the list of all calls this session.\n * @method getCalls\n * @param  {Object} state Redux state.\n * @return {Array} A list of all call objects.\n */\nexport function getCalls (state) {\n  // TODO: cloneDeep?\n  return state.call.calls.map(callState => addTracksToCall(state, callState))\n}\n\n/**\n * Retrieves the list of all on-going calls.\n * @method getActiveCalls\n * @param {Object} state Redux state.\n * @return {Array} A list of call objects.\n */\nexport function getActiveCalls (state) {\n  const endedStates = [CALL_STATES.ENDED, CALL_STATES.CANCELLED]\n\n  return getCalls(state).filter(call => !endedStates.includes(call.state))\n}\n\n/**\n * Get the call object of a specific call.\n * @method getCallById\n * @param  {Object} state Redux state.\n * @param  {string} callId The call to retrieve.\n * @return {Object} A call object.\n */\nexport function getCallById (state, callId) {\n  return getCalls(state).find(call => call.id === callId)\n}\n\n/**\n * Get the call object with a specific wrtcsSessionId (backend ID).\n * @method getCallByWrtcsSessionId\n * @param  {Object} state Redux state.\n * @param  {string} wrtcsSessionId The call to retrieve.\n * @return {Object} A call object.\n */\nexport function getCallByWrtcsSessionId (state, wrtcsSessionId) {\n  return getCalls(state).find(call => call.wrtcsSessionId === wrtcsSessionId)\n}\n\n/**\n * Get the call object with a specific webrtcSessionId.\n * @method getCallByWebrtcSessionId\n * @param  {Object} state Redux state.\n * @param  {string} webrtcSessionId The call to retrieve.\n * @return {Object} A call object.\n */\nexport function getCallByWebrtcSessionId (state, webrtcSessionId) {\n  return getCalls(state).find(call => call.webrtcSessionId === webrtcSessionId)\n}\n\n/**\n * Retrieve the call plugin's options.\n * @method getOptions\n * @param  {Object} state Redux state.\n * @return {Object}\n */\nexport function getOptions (state) {\n  return state.config.call\n}\n\n/**\n * Retrieve TURN server/credential information.\n */\nexport function getTurnInfo (state) {\n  return state.call.turn\n}\n","// Call plugin.\nimport { OPERATIONS, NO_FINISH_OPS, OP_STATUS, OP_TRANSITIONS } from './constants'\n\n// Lodash FP\nimport { contains, isNil, property } from 'lodash/fp'\n\n/*\n * Utility function to parse the operation and operation status from an action.\n * @method getOperationMeta\n * @param  {Object}  actionType A call action.\n * @return {Object}  opMeta             Information about the operation.\n * @return {string}  [opMeta.operation] The call operation the action is about.\n * @return {string}  opMeta.transition  The change in operation the action is for.\n * @return {boolean} opMeta.isLocal     Whether the operation was started locally or not.\n * @throws {Error}   Input must be a standard call action type.\n */\nexport function getOperationMeta (actionType) {\n  // Make sure the input is a call action type.\n  if (typeof actionType !== 'string' || !actionType.includes('/CALL/')) {\n    throw new Error('Invalid input parameter. Must be a Call action.')\n  }\n\n  // Grab the unique part of the action type, after /CALL/\n  const opType = actionType.match(/\\/CALL\\/(.*)/)[1]\n\n  /**\n   * The operation name can be `OPERATION` or `OPER_ATION` (or even multiple _).\n   * It may have the prefix `REMOTE` if it is a remote operation.\n   * It may have the prefix `PENDING` if the operation is now waiting on remote.\n   * It may have the suffix `FINISH` if the operation has ended.\n   * Prefixes / suffixes are separated by a `_`.\n   *\n   * Parse the operation type to split apart the possible sections. Use those\n   *    sections to infer informaton about the operation.\n   */\n  const opMeta = {}\n  const parts = opType.split('_')\n\n  /**\n   * Check the parts for prefixes and update opMeta based on whichever are found.\n   */\n  const validPrefixes = ['REMOTE', 'PENDING']\n  const prefixes = []\n\n  // Check the first parts for prefixes.\n  while (validPrefixes.includes(parts[0])) {\n    // Take the prefix from `parts` and add it to `prefixes`.\n    prefixes.push(parts.shift())\n  }\n\n  // Handle the 'REMOTE' prefix.\n  //    The lack of this prefix means the operation was started locally.\n  opMeta.isLocal = !prefixes.includes('REMOTE')\n\n  // Handle the 'PENDING' prefix.\n  //    The lack of this prefix means the operation is either starting or ending.\n  if (prefixes.includes('PENDING')) {\n    opMeta.transition = OP_TRANSITIONS.UPDATE\n    /**\n     * The `PENDING` prefix is a special-case because it means an operation was\n     *    `ongoing` and is changing to `pending`. We know there won't be a\n     *    suffix, and the operation is already in state, so we don't need to\n     *    find it here (also, it isn't included here).\n     */\n    return opMeta\n  }\n\n  /**\n   * Check the parts for suffixes and update opMeta based on whichever are found.\n   */\n  const validSuffixes = ['FINISH']\n  const suffixes = []\n\n  // Check the last parts for suffixes.\n  while (validSuffixes.includes(parts[parts.length - 1])) {\n    // Take the suffix out of `parts` and add it to `suffixes`.\n    suffixes.push(parts.pop())\n  }\n\n  // Handle the 'FINISH' suffix.\n  //    The lack of this suffix means the operation is just starting (since we\n  //    already checked for the `pending` change before this).\n  opMeta.transition = suffixes.includes('FINISH') ? OP_TRANSITIONS.FINISH : OP_TRANSITIONS.START\n\n  /**\n   * Recombine the remaining parts as the operation.\n   */\n  opMeta.operation = OPERATIONS[parts.join('_')]\n  return opMeta\n}\n\n/**\n * Reducer utility: Wraps a call reducer to update a call's operation subsate.\n *    Only affects either `call.localOp` or `call.remoteOp` portion of state.\n * @method setOperationState\n * @param  {Object} state  Redux state of a [single] call.\n * @param  {Object} action A call action.\n */\nexport function setOperationState (state, action) {\n  let meta\n  try {\n    meta = getOperationMeta(action.type)\n  } catch (err) {\n    // Action type is not a call operation, don't change operation state.\n    return state\n  }\n  const metaOp = meta.operation\n\n  // The operation has to be defined for start/finish transitions.\n  //    Don't update state if it isn't.\n  if (!metaOp && meta.transition !== OP_TRANSITIONS.UPDATE) {\n    return state\n  }\n\n  // Determine which operation substate we should be acting on.\n  const stateProp = meta.isLocal ? 'localOp' : 'remoteOp'\n  const current = state[stateProp]\n\n  if (meta.transition === OP_TRANSITIONS.START) {\n    // A new operation is starting...\n\n    if (current) {\n      // ...but there is still an on-going op.\n      // The new operation should be rejected, so state should not change.\n      return state\n    } else {\n      // ...and there is no current operation on-going.\n      // Set the new operation in state.\n      return {\n        ...state,\n        [stateProp]: {\n          operation: metaOp,\n          status: OP_STATUS.ONGOING\n        }\n      }\n    }\n  } else if (meta.transition === OP_TRANSITIONS.UPDATE) {\n    return {\n      ...state,\n      [stateProp]: {\n        ...state[stateProp],\n        status: OP_STATUS.PENDING,\n        operationData: action.payload.operationData\n      }\n    }\n  } else {\n    const isRemote = !meta.isLocal\n    const unsetOperation = {\n      ...state,\n      [stateProp]: undefined\n    }\n\n    const currentOp = property('operation')(current)\n    if (isNil(currentOp)) {\n      // Should be considered an error scenario.\n      return state\n    }\n\n    // An on-going operation is finishing...\n    if (currentOp === metaOp) {\n      // The operation matches the current on-going operation.\n      //    Unset it in state.\n      return unsetOperation\n    } else if (isRemote && currentOp === OPERATIONS.SLOW_START) {\n      // Special case: If the current operation was a remote slow start,\n      //    then the 'finish' won't match. Allow any 'finish' to unset it.\n      return unsetOperation\n    } else if (contains(currentOp)(NO_FINISH_OPS)) {\n      // Special case: If the current operation is one that doesn't have a finish\n      //    operation, allow any 'finish' to unset it.\n      return unsetOperation\n    } else {\n      // ...but it wasn't tracked in state?\n      // Should be considered an error scenario.\n      return state\n    }\n  }\n}\n","// Call plugin.\nimport pluginInterface from '../interfaceNew'\nimport * as sagas from './sagas'\nimport events from '../interfaceNew/events'\n\n// Other plugins.\nimport { mapEvents } from '../../events/interface/actions'\nimport { update as updateConfig, setSdpHandlers } from '../../config/interface/actions'\nimport { logManager } from '../../logs'\n\n// Helpers.\nimport { mergeValues, autoRestart } from '../../common/utils'\n\n// Libraries.\nimport { values } from 'lodash/fp'\nimport { fork, put } from 'redux-saga/effects'\nimport { getWebRTCSupportCapabilities } from 'kandy-webrtc'\n\n// Parse and/or Validate\nimport { validation as v8n, parse, enums } from '../../../src/common/validation'\n\nconst log = logManager.getLogger('CALL')\n\n// eslint-disable-next-line no-warning-comments\n/**\n * Configuration options for the call feature.\n * @public\n * @name config.call\n * @memberof config\n * @instance\n * @param {Object} call The call configuration object.\n * @param {string} [call.sdpSemantics='plan-b'] The sdpSemantics to use (`'unified-plan'` or `'plan-b'`).\n *    As 'plan-b' has become a deprecated option, it will therefore be removed in the future.\n * @param {Array<call.IceServer>} [call.iceServers] The list of ICE servers to be used for calls.\n * @param {number} [call.iceCollectionDelay=1000] Time, in milliseconds, to delay in between\n *    ICE candidate checks. If ICE collection does not complete normally, the SDK will check\n *    collected candidates at this interval to determine if the operation can continue.\n * @param {number} [call.maxIceTimeout=3000] Maximum time, in milliseconds, to wait for ICE\n *    collection to complete normally. After this time, the process will timeout and the\n *    operation will attempt to continue no matter how many candidates have been collected.\n * @param {Function} [call.iceCollectionCheck] Function to check whether collected candidates\n *    can be used to continue the operation. The function will receive an array of ICE\n *    candidates and must return a boolean value of whether the SDK should attempt to continue\n *    the operation. By default, the check is to ensure at least one relay candidate has been\n *    collected.\n * @param {boolean} [call.serverTurnCredentials=true] Whether server-provided TURN credentials should be used.\n * @param {Array<call.SdpHandlerFunction>} [call.sdpHandlers] List of SDP handler functions to modify SDP. Advanced usage.\n * @param {boolean} [call.removeH264Codecs=true] Whether to remove \"H264\" codec lines from incoming and outgoing SDP messages.\n * @param {boolean} [call.earlyMedia=false] Whether early media should be supported for calls.\n * @param {boolean} [call.resyncOnConnect=false] Whether the SDK should re-sync all call states after connecting (requires Kandy Link 4.7.1+).\n * @param {boolean} [call.mediaBrokerOnly=false] Whether all Calls will be anchored on the MediaBroker instead of being peer-to-peer. Set to true if the backend is configured for broker only mode.\n * @param {boolean} [call.removeBundling=false] Whether to remove a=group attributes to stop media bundling from incoming and outgoing SDP messages.\n */\n\n/**\n * @private\n * @name config.call\n * @memberof config\n * @instance\n * @param {string} [trickleIceMode='NONE'] The Trickle ICE method to use for calls. Currently, no mode is supported.\n * @param {boolean} [normalizeDestination=true] Specifies whether or not SIP address normalization will be applied.\n */\nconst defaultOptions = {\n  sdpSemantics: 'plan-b',\n  iceServers: [],\n  iceCollectionDelay: 1000,\n  maxIceTimeout: 3000,\n  // Defaults set by the Webrtc stack:\n  //    iceCollectionCheck: Has at least one relay candidate.\n  serverTurnCredentials: true,\n  sdpHandlers: [],\n  removeH264Codecs: true,\n  earlyMedia: false,\n  resyncOnConnect: false,\n  mediaBrokerOnly: false,\n  removeBundling: false,\n  trickleIceMode: 'NONE',\n  normalizeDestination: true\n}\n\n// config validation\nconst v8nValidation = v8n.schema({\n  sdpSemantics: enums(['unified-plan', 'plan-b']),\n  iceServers: v8n.array(),\n  iceCollectionDelay: v8n.positive(),\n  maxIceTimeout: v8n.positive(),\n  // Defaults set by the Webrtc stack:\n  //    iceCollectionCheck: v8n.optional(v8n.function()),\n  serverTurnCredentials: v8n.boolean(),\n  sdpHandlers: v8n.array(),\n  removeH264Codecs: v8n.boolean(),\n  earlyMedia: v8n.boolean(),\n  resyncOnConnect: v8n.boolean(),\n  mediaBrokerOnly: v8n.boolean(),\n  removeBundling: v8n.boolean(),\n  trickleIceMode: v8n.string(),\n  normalizeDestination: v8n.boolean()\n})\nconst parseOptions = parse('call', v8nValidation)\n\nexport default function callsLink (options = {}) {\n  const { mediaDevices, peerConnection } = getWebRTCSupportCapabilities()\n  if (!mediaDevices || !peerConnection) {\n    log.warn('Calls are not supported on this platform due to lack of WebRTC support. Call APIs will not be available.')\n    return\n  }\n\n  // For backwards compatibility between old ICE config and new config.\n  if (options.iceserver && !options.iceServers) {\n    log.warn('Call configuration `iceserver` is being replaced by `iceServers`. Please update to the config.')\n    options.iceServers = options.iceserver\n    delete options.iceserver\n  }\n\n  options = mergeValues(defaultOptions, options)\n  parseOptions(options)\n\n  function * init ({ webRTC }) {\n    // Change sdpSemantics if not supported\n    const isPlanB = options.sdpSemantics === 'plan-b'\n    const isNotChrome = webRTC.getBrowserDetails().browser !== 'chrome'\n    if (isPlanB && isNotChrome) {\n      log.warn('Only Chrome supports `plan-b` sdpSemantics. Switching to `unified-plan`.')\n      options.sdpSemantics = 'unified-plan'\n    }\n\n    yield put(updateConfig(options, pluginInterface.name))\n    yield put(mapEvents(events))\n\n    // Update the SDP handlers in the config (user provided + some of our own)\n    const sdpHandlerOptions = {\n      removeH264Codecs: options.removeH264Codecs\n    }\n    yield put(setSdpHandlers(options.sdpHandlers, sdpHandlerOptions))\n\n    // Dependencies to be provided to every call saga.\n    const deps = {\n      webRTC: webRTC.managers,\n      browserDetails: webRTC.getBrowserDetails\n    }\n\n    // Wrap the call sagas in a function that provides them with the webRTC stack.\n    const wrappedSagas = values(sagas).map(saga => {\n      return autoRestart(() => saga(deps))\n    })\n\n    // Run all of the sagas.\n    for (const saga of wrappedSagas) {\n      yield fork(saga)\n    }\n  }\n\n  return {\n    name: pluginInterface.name,\n    api: pluginInterface.api,\n    reducer: pluginInterface.reducer,\n    init,\n    capabilities: ['call', 'link_call', 'link_user_id', 'link_pstn']\n  }\n}\n","/* eslint-disable no-warning-comments */\n// Call plugin.\nimport { normalizeSipUri } from '../../utils/normalization'\nimport { getOptions } from '../../interfaceNew/selectors'\n\n// Other plugins.\nimport { getDomain, getRequestInfo } from '../../../auth/interface/selectors'\nimport { logManager } from '../../../logs'\n\n// Helpers.\nimport request from '../../../request/effects'\nimport BasicError from '../../../errors'\nimport { platforms } from '../../../constants'\nimport { getWebsocketId } from '../utils'\n\n// Libraries.\nimport { call, select } from 'redux-saga/effects'\n\n/**\n * Creates a webRTC session on the server. Link-specific signalling function.\n *\n * This saga \"starts a call\" between the current user and another, specified\n *    user.\n * Assumptions:\n *    1. The current user is authenticated.\n * Responsibilities:\n *    1. Format parameters as needed for signalling.\n *    2. Perform the REST request.\n *    3. Return the response, formatted.\n * @method createSession\n * @param  {Object} callInfo\n * @param  {Object} callInfo.id The SDK's ID for the Call.\n * @param  {string} callInfo.participantAddress The user to receive the call.\n * @param  {string} callInfo.offer The local SDP offer to begin negotiation.\n * @param  {boolean} [callInfo.isAnonymous] Flag indicating whether the call is anonymous or not.\n * @param  {string} [callInfo.account] An account token used by the request if it is an anonymous call.\n * @param  {string} [callInfo.from] A from token used by the request if it is an anonymous call.\n * @param  {string} [callInfo.displayName] A custom display name to use. Not supported in all environments and may use default display name.\n * @param  {Array<CustomParameter>} [callInfo.customParameters] Custom SIP header parameters for the SIP backend\n * @return {Object} response Signalling response.\n * @return {string} [response.wrtcsSessionId] ID that the server uses to track this call.\n * @return {Object} [response.error] An error object, if signalling failed.\n */\nexport function * createSession (callInfo) {\n  const log = logManager.getLogger('CALL', callInfo.id)\n  log.info('Creating call session on server-side.')\n\n  // Collect the information needed to make the request.\n  const requestInfo = yield select(getRequestInfo, platforms.LINK)\n  const callOptions = yield select(getOptions)\n\n  // requestInfo.username isn't normalized and link requires a normalized\n  // address to make a call.  Since we also use username to build the request\n  // url, we need it both normalized and straight up.  So I'm normalizing it and\n  // putting it on the requestInfo object under a new property name 'fromAddress'\n  if (requestInfo.username) {\n    const domain = yield select(getDomain)\n    // Normalize callee addresses\n    callInfo.fromAddress = normalizeSipUri(requestInfo.username, domain)\n    log.debug('Caller address normalized to: ', callInfo.fromAddress)\n  }\n\n  // Default backend configuration does not support this\n  //  so remote side might see default display name instead.\n  // Backend needs to be configured to allow a custom display name.\n  if (callInfo.displayName) {\n    callInfo.fromAddress = `${callInfo.displayName}<${callInfo.fromAddress}>`\n    callInfo.from = `${callInfo.displayName}<${callInfo.from}>`\n  }\n\n  const options = {\n    method: 'POST'\n  }\n  const requestBody = {\n    type: 'callStart',\n    to: callInfo.participantAddress,\n    sdp: callInfo.offer,\n    supported: [],\n    customParameters: callInfo.customParameters\n  }\n\n  if (callOptions.earlyMedia) {\n    requestBody.supported.push('earlymedia')\n  }\n\n  /*\n   * If there are no (extra) supported items, remove the field from the request\n   *    body. This is to avoid SPiDR rejecting the body when it is an empty\n   *    array (which happens for anonymous calls).\n   */\n  if (requestBody.supported.length === 0) {\n    delete requestBody.supported\n  }\n\n  if (callInfo.isAnonymous) {\n    const getWebsocketIdResult = yield call(getWebsocketId)\n    if (getWebsocketIdResult.error) {\n      return { error: getWebsocketIdResult.error }\n    }\n    options.body = JSON.stringify({\n      callMeRequest: {\n        ...requestBody,\n        from: callInfo.from,\n        notifyChannelId: getWebsocketIdResult.websocketId\n      }\n    })\n  } else {\n    options.body = JSON.stringify({\n      callControlRequest: {\n        ...requestBody,\n        from: callInfo.fromAddress\n      }\n    })\n  }\n\n  const response = yield call(linkCallRequest, requestInfo, { ...options, ...callInfo })\n  const responseBodyType = callInfo.isAnonymous ? 'callMeResponse' : 'callControlResponse'\n  if (response.error) {\n    log.debug('Failed to create Call session server-side.', response.error)\n    return {\n      error: response.error\n    }\n  } else {\n    const wrtcsSessionId = response[responseBodyType].sessionData\n    log.debug('Call session created server-side.', { wrtcsSessionId })\n\n    return {\n      error: false,\n      wrtcsSessionId\n    }\n  }\n}\n\n/**\n * Updates a webRTC session on the server with a new state.\n * Link-specific signaling function.\n *\n * The saga updates the server's session to be in \"ringing\" state.\n * Assumptions:\n *    1. The current user is authenticated.\n * Responsibilities:\n *    1. Format parameters as needed for signalling.\n *    2. Perform the REST request.\n *    3. Return the response, formatted.\n * @method updateCallRinging\n * @param  {Object} callInfo\n * @param  {Object} callInfo.id The SDK's ID for the Call.\n * @param  {string} callInfo.wrtcsSessionId ID that the server uses to identify the session.\n * @param  {string} callInfo.isAnonymous    Whether the call is an anonymous call.\n * @return {Object} response Signalling response.\n * @return {Object} [response.error] An error object, if signalling failed.\n */\nexport function * updateCallRinging (callInfo) {\n  const log = logManager.getLogger('CALL', callInfo.id)\n  log.info('Updating call session as ringing on server-side.')\n\n  // Collect the information needed to make the request.\n  const requestInfo = yield select(getRequestInfo, platforms.LINK)\n\n  const options = {\n    method: 'PUT'\n  }\n\n  options.body = JSON.stringify({\n    callControlRequest: {\n      type: 'ringing'\n    }\n  })\n\n  const response = yield call(linkCallRequest, requestInfo, { ...options, ...callInfo })\n\n  if (response.error) {\n    log.debug('Failed to update call session as ringing server-side.', response.error)\n    return {\n      error: response.error\n    }\n  } else {\n    log.debug('Call session updated as ringing server-side.', {\n      wrtcsSessionId: callInfo.wrtcsSessionId\n    })\n    return {\n      error: false\n    }\n  }\n}\n\n/**\n * Sends the (new?) custom parameters of the call to the webRTC session on the server.\n * @method updateCustomParameters\n * @param {Object} callInfo\n * @param {string} callInfo.wrtcsSessionId    ID that the server uses to identify the session.\n * @param {string} callInfo.isAnonymous       Whether the call is an anonymous call\n * @param {Array<CustomParameter>} callInfo.customParameters  The custom parameters\n * @return {Object} response Signaling response.\n */\nexport function * updateCustomParameters (callInfo) {\n  // Collect the information needed to make the request.\n  const requestInfo = yield select(getRequestInfo, platforms.LINK)\n\n  const options = {\n    method: 'PUT'\n  }\n\n  const bodyType = callInfo.isAnonymous ? 'callMeRequest' : 'callControlRequest'\n\n  options.body = JSON.stringify({\n    [bodyType]: {\n      type: 'sendCustomHeaders',\n      customParameters: callInfo.customParameters\n    }\n  })\n\n  const response = yield call(linkCallRequest, requestInfo, { ...options, ...callInfo })\n\n  return {\n    error: response.error ? response.error : false\n  }\n}\n\n/**\n * REST DELETE request to send webRTC session call end requests.\n * @method endSession\n * @param  {Object} requestInfo\n * @param  {Object} callInfo\n * @param  {string} callInfo.wrtcsSessionId ID that the server uses to identify the session.\n * @param  {boolean} callInfo.isAnonymous Whether the call is anonymous or not\n * @param  {string} [callInfo.account] An account token used by the request if it is an anonymous call.\n * @return {Object} response Signalling response.\n * @return {Object} [response.error] An BasicError object, if signalling failed.\n */\nexport function * endSession (callInfo) {\n  const requestInfo = yield select(getRequestInfo, platforms.LINK)\n\n  const options = {\n    method: 'DELETE',\n    responseType: 'none'\n  }\n\n  const response = yield call(linkCallRequest, requestInfo, { ...options, ...callInfo })\n\n  if (response.error) {\n    return {\n      error: response.error\n    }\n  } else {\n    return {\n      error: false\n    }\n  }\n}\n\n/**\n * Updates a webRTC session on the server with an answer.\n * Link-specific signaling function.\n *\n * This saga \"answers a call\" from another user.\n * Assumptions:\n *    1. The current user is authenticated.\n * Responsibilities:\n *    1. Format parameters as needed for signalling.\n *    2. Perform the REST request.\n *    3. Return the response, formatted.\n * @method answerSession\n * @param  {Object} callInfo\n * @param  {string} callInfo.wrtcsSessionId ID that the server uses to identify the session.\n * @param  {string} callInfo.answer The local SDP to complete negotiation. This may be an offer is performing slow start answer.\n * @param  {Array<CustomParameter>} callInfo.customParameters The custom parameters of the call.\n * @return {Object} response Signalling response.\n * @return {Object} [response.error] An error object, if signalling failed.\n */\nexport function * answerSession (callInfo) {\n  const log = logManager.getLogger('CALL', callInfo.id)\n  log.info('Answering call session on server-side.')\n\n  // Collect the information needed to make the request.\n  const requestInfo = yield select(getRequestInfo, platforms.LINK)\n\n  const options = {\n    method: 'PUT'\n  }\n\n  options.body = JSON.stringify({\n    callControlRequest: {\n      type: 'callAnswer',\n      sdp: callInfo.answer,\n      customParameters: callInfo.customParameters\n    }\n  })\n\n  const response = yield call(linkCallRequest, requestInfo, { ...options, ...callInfo })\n\n  if (response.error) {\n    log.debug('Failed to answer Call session server-side.', response.error)\n    return {\n      error: response.error\n    }\n  } else {\n    log.debug('Call session answered server-side.', { wrtcsSessionId: callInfo.wrtcsSessionId })\n    return {\n      error: false\n    }\n  }\n}\n\n/**\n * Rejects an incoming session.\n * Link-specific signaling function.\n *\n * This saga \"rejects\" the server session.\n * Assumptions:\n *    1. The current user is authenticated.\n *    2. There is an incoming session.\n * Responsibilities:\n *    1. Format parameters as needed for signalling.\n *    2. Perform the REST request.\n *    3. Return the response, formatted.\n * REST request to reject a webRTC session.\n * @method rejectSession\n * @param  {Object} callInfo\n * @param  {string} callInfo.wrtcsSessionId The ID the backend uses to track the session.\n * @return {Object} response object from the server.\n * @return {Object} [response.error] An error object, if signalling failed.\n */\nexport function * rejectSession (callInfo) {\n  const requestInfo = yield select(getRequestInfo, platforms.LINK)\n\n  const options = {\n    method: 'POST'\n  }\n\n  options.endUrl = 'calldisposition'\n\n  options.body = JSON.stringify({\n    callDispositionRequest: {\n      action: 'reject',\n      sessionData: callInfo.wrtcsSessionId\n    }\n  })\n\n  const response = yield call(linkCallRequest, requestInfo, options)\n\n  if (response.error) {\n    return {\n      error: response.error\n    }\n  } else {\n    return {\n      error: false\n    }\n  }\n}\n\n/**\n * Forwards an incoming session to another destination address.\n * Link-specific signaling function.\n *\n * This saga \"forwards\" the server session to a specified destination address.\n * Assumptions:\n *    1. The current user is authenticated.\n *    2. There is an incoming session.\n * Responsibilities:\n *    1. Format parameters as needed for signalling.\n *    2. Perform the REST request.\n *    3. Return the response, formatted.\n * @method forwardSession\n * @param  {Object} callInfo\n * @param  {string} callInfo.wrtcsSessionId The ID the backend uses to track the session.\n * @param  {string} callInfo.address The address to forward the session to.\n * @return {Object} response object from the server.\n * @return {Object} [response.error] An error object, if signalling failed.\n */\nexport function * forwardSession (callInfo) {\n  const requestInfo = yield select(getRequestInfo, platforms.LINK)\n\n  const options = {\n    method: 'POST'\n  }\n\n  options.endUrl = 'calldisposition'\n\n  options.body = JSON.stringify({\n    callDispositionRequest: {\n      action: 'forward',\n      sessionData: callInfo.wrtcsSessionId,\n      address: callInfo.address\n    }\n  })\n\n  const response = yield call(linkCallRequest, requestInfo, options)\n\n  if (response.error) {\n    return {\n      error: response.error\n    }\n  } else {\n    return {\n      error: false\n    }\n  }\n}\n\n/**\n * Transfers ongoing sessions into one another.\n * Link-specific signaling function.\n *\n * This saga \"transfers\" the server sessions.\n * Assumptions:\n *    1. The current user is authenticated.\n * Responsibilities:\n *    1. Format parameters as needed for signalling.\n *    2. Perform the REST request.\n *    3. Return the response, formatted.\n * @method consultativeTransferSessions\n * @param  {Object} callInfo\n * @param  {string} callInfo.wrtcsSessionId The ID the backend uses to track the session.\n * @param  {string} callInfo.otherWrtcsSessionId The ID the backend uses to track the other session.\n * @param  {string} callInfo.destination The address of the other session to transfer to.\n * @return {Object} response object from the server.\n * @return {Object} [response.error] An error object, if signalling failed.\n * @return {string} [response.newWrtcsSessionId] The back-end session id, if signalling succeeded.\n */\nexport function * consultativeTransferSessions (callInfo) {\n  const requestInfo = yield select(getRequestInfo, platforms.LINK)\n\n  const options = {\n    method: 'PUT'\n  }\n\n  options.body = JSON.stringify({\n    callControlRequest: {\n      type: 'transfer',\n      sessionData: callInfo.otherWrtcsSessionId,\n      address: callInfo.destination\n    }\n  })\n\n  const response = yield call(linkCallRequest, requestInfo, { ...options, ...callInfo })\n\n  if (response.error) {\n    return {\n      error: response.error\n    }\n  } else {\n    return {\n      error: false\n    }\n  }\n}\n\n/**\n * Direct Transfers an incoming session to another destination address.\n * Link-specific signaling function.\n *\n * This saga \"direct transfers\" the server session to a specified destination address.\n * Assumptions:\n *    1. The current user is authenticated.\n * Responsibilities:\n *    1. Format parameters as needed for signalling.\n *    2. Perform the REST request.\n *    3. Return the response, formatted.\n * @method directTransferSession\n * @param  {Object} callInfo\n * @param  {string} callInfo.wrtcsSessionId The ID the backend uses to track the session.\n * @param  {string} callInfo.address The address to forward the session to.\n * @return {Object} response object from the server.\n * @return {Object} [response.error] An error object, if signalling failed.\n */\nexport function * directTransferSession (callInfo) {\n  const requestInfo = yield select(getRequestInfo, platforms.LINK)\n\n  const options = {\n    method: 'PUT'\n  }\n\n  options.body = JSON.stringify({\n    callControlRequest: {\n      type: 'transfer',\n      address: callInfo.address\n    }\n  })\n\n  const response = yield call(linkCallRequest, requestInfo, { ...options, ...callInfo })\n\n  if (response.error) {\n    return {\n      error: response.error\n    }\n  } else {\n    return {\n      error: false\n    }\n  }\n}\n\n/**\n * Joins ongoing sessions into a new session.\n * Link-specific signaling function.\n *\n * This saga \"joins\" the server sessions.\n * Assumptions:\n *    1. The current user is authenticated.\n * Responsibilities:\n *    1. Format parameters as needed for signalling.\n *    2. Perform the REST request.\n *    3. Return the response, formatted.\n * @method joinSessions\n * @param  {Object} callInfo\n * @param  {string} callInfo.wrtcsSessionId The ID the backend uses to track the session.\n * @param  {string} callInfo.otherWrtcsSessionId\n * @param  {string} callInfo.sdp The new sdp to use.\n * @param  {Array<CustomParameter>} callInfo.customParameters The custom parameters of the current call\n * @return {Object} response object from the server.\n * @return {Object} [response.error] An error object, if signalling failed.\n * @return {string} [response.newWrtcsSessionId] The back-end session id, if signalling succeeded.\n */\nexport function * joinSessions (callInfo) {\n  const requestInfo = yield select(getRequestInfo, platforms.LINK)\n\n  const options = {\n    method: 'POST'\n  }\n\n  options.body = JSON.stringify({\n    callControlRequest: {\n      type: 'join',\n      firstSessionData: callInfo.wrtcsSessionId,\n      secondSessionData: callInfo.otherWrtcsSessionId,\n      sdp: callInfo.sdp,\n      customParameters: callInfo.customParameters\n    }\n  })\n\n  const response = yield call(linkCallRequest, requestInfo, options)\n\n  if (response.error) {\n    return {\n      error: response.error\n    }\n  } else {\n    return {\n      error: false,\n      newWrtcsSessionId: response.callControlResponse.sessionData\n    }\n  }\n}\n\n/**\n * Updates an existing webRTC session on the server.\n * Link-specific signalling function.\n *\n * This saga \"updates a session\" between the current user and another, specified\n *    user.\n * Assumptions:\n *    1. The current user is authenticated.\n * Responsibilities:\n *    1. Format parameters as needed for signalling.\n *    2. Perform the REST request.\n *    3. Return the response, formatted.\n * @method updateSession\n * @param  {Object} callInfo\n * @param  {string} callInfo.wrtcsSessionId The ID the backend uses to track the session.\n * @param  {string} callInfo.offer The local SDP offer to begin negotiation.\n * @param  {boolean} [callInfo.isAnonymous] Flag indicating whether the call is anonymous or not.\n * @param  {string}  [callInfo.account] An account token used by the request if it is an anonymous call.\n * @param  {Array}   [callInfo.customParameters] The custom parameters of the call.\n * @return {Object} response Signalling response.\n * @return {Object} response.error An error object, if signalling failed.\n */\nexport function * updateSession (callInfo) {\n  // Collect the information needed to make the request.\n  const requestInfo = yield select(getRequestInfo, platforms.LINK)\n\n  const options = {\n    method: 'PUT'\n  }\n  const bodyType = callInfo.isAnonymous ? 'callMeRequest' : 'callControlRequest'\n\n  options.body = JSON.stringify({\n    [bodyType]: {\n      type: 'startCallUpdate',\n      sdp: callInfo.offer,\n      customParameters: callInfo.customParameters\n    }\n  })\n\n  const response = yield call(linkCallRequest, requestInfo, { ...options, ...callInfo })\n\n  if (response.error) {\n    return {\n      error: response.error\n    }\n  } else {\n    return {\n      error: false\n    }\n  }\n}\n\n/**\n * Gets the status of a session from the server.\n * Link-specific signaling function.\n *\n * Assumptions:\n *    1. The current user is authenticated.\n *    2. Signalling server has Kandy Link 4.7.1+\n * Responsibilities:\n *    1. Format parameters as needed for signalling.\n *    2. Perform the REST request.\n *    3. Return the response, formatted.\n * @method getSessions\n * @param  {Object} callInfo\n * @param  {Object} callInfo.wrtcsSessionId The ID the backend uses to track the session.\n * @param  {boolean} [callInfo.isAnonymous] Flag indicating whether the call is anonymous or not.\n * @param  {string} [callInfo.account] An account token used by the request if it is an anonymous call.\n * @return {Object} response Signalling response.\n * @return {Object} response.error An error object, if signalling failed.\n */\nexport function * getSession (callInfo) {\n  // Collect the information needed to make the request.\n  const requestInfo = yield select(getRequestInfo, platforms.LINK)\n\n  const options = { method: 'GET' }\n\n  const response = yield call(linkCallRequest, requestInfo, { ...options, ...callInfo })\n\n  if (response.error) {\n    return {\n      error: response.error\n    }\n  } else {\n    return {\n      error: false,\n      state: response.callControlResponse.state\n    }\n  }\n}\n\n/**\n * Updates a webRTC session on the server to ensure it's state.\n * Link-specific signaling function.\n *\n * This saga \"audits\" the server session to:\n *    1. notify the server that the call is still on-going locally, and\n *    2. ensure that the server is still handling the server session.\n * Assumptions:\n *    1. The current user is authenticated.\n * Responsibilities:\n *    1. Format parameters as needed for signalling.\n *    2. Perform the REST request.\n *    3. Return the response, formatted.\n * @method auditCall\n * @param  {Object} callInfo\n * @param  {Object} callInfo.wrtcsSessionId The ID the backend uses to track the session.\n * @param  {boolean} [callInfo.isAnonymous] Flag indicating whether the call is anonymous or not.\n * @param  {string} [callInfo.account] An account token used by the request if it is an anonymous call.\n * @return {Object} response Signalling response.\n * @return {Object} response.error An error object, if signalling failed.\n */\nexport function * auditCall (callInfo) {\n  // Collect the information needed to make the request.\n  const requestInfo = yield select(getRequestInfo, platforms.LINK)\n\n  const options = { method: 'PUT' }\n  const bodyType = callInfo.isAnonymous ? 'callMeRequest' : 'callControlRequest'\n\n  options.body = JSON.stringify({\n    [bodyType]: {\n      type: 'audit'\n    }\n  })\n\n  const response = yield call(linkCallRequest, requestInfo, { ...options, ...callInfo })\n\n  if (response.error) {\n    return {\n      error: response.error,\n      // Indicate whether the error was that the session doesn't exist\n      //    anymore (and audits should stop) or if it was an unknown error.\n      // 42 == RESOURCE_DOES_NOT_EXIST\n      status: response.error.code === 42 ? 'Closed' : 'Retry'\n    }\n  } else {\n    return {\n      error: false,\n      status: 'Connected'\n    }\n  }\n}\n\n/**\n * Responds to a received remote offer to update the webRTC session.\n * Link-specific signaling function.\n *\n * This saga responds to a \"call update\" request as part of renegotiation. This\n *    updates the server session with an answer SDP, which in turn should notify\n *    the remote end of the session with the response.\n * Assumptions:\n *    1. The current user is authenticated.\n * Responsibilities:\n *    1. Perform the REST request.\n *    2. Return the response, formatted.\n * @method updateSessionResponse\n * @param  {Object} callInfo\n * @param  {Object} callInfo.wrtcsSessionId The ID the backend uses to track the session.\n * @param  {string} callInfo.answer The local SDP to complete renegotiation. This may be an offer if performing slow start.\n * @param  {boolean} [callInfo.isAnonymous] Flag indicating whether the call is anonymous or not.\n * @param  {string} [callInfo.account] An account token used by the request if it is an anonymous call.\n * @return {Object} response Signalling response.\n * @return {Object} response.error An error object, if signalling failed.\n */\nexport function * updateSessionResponse (callInfo) {\n  // Collect the information needed to make the request.\n  const requestInfo = yield select(getRequestInfo, platforms.LINK)\n\n  const options = {\n    method: 'PUT'\n  }\n  const bodyType = callInfo.isAnonymous && callInfo.account ? 'callMeRequest' : 'callControlRequest'\n\n  options.body = JSON.stringify({\n    [bodyType]: {\n      type: 'respondCallUpdate',\n      sdp: callInfo.answer,\n      customParameters: callInfo.customParameters\n    }\n  })\n\n  const response = yield call(linkCallRequest, requestInfo, { ...options, ...callInfo })\n\n  if (response.error) {\n    return {\n      error: response.error\n    }\n  } else {\n    return {\n      error: false\n    }\n  }\n}\n\nexport function * linkCallRequest (requestInfo, options) {\n  options.url = generateCallUrl(requestInfo, options)\n\n  const response = yield request(options)\n\n  if (response.error) {\n    return {\n      error: handleLinkCallRequestError(response)\n    }\n  } else {\n    return response.payload.body\n  }\n}\n\nfunction handleLinkCallRequestError (response) {\n  function getMessage (code) {\n    switch (code) {\n      case 5:\n        return 'Request failed: Invalid or missing request body'\n      case 26:\n        return 'Request failed: Internal Server Error'\n      case 1004:\n        return 'Request failed: Bad request'\n      default:\n        return 'Request failed: Unknown error'\n    }\n  }\n\n  let message, code\n\n  if (response && response.payload) {\n    if (response.payload.body) {\n      if ('callControlResponse' in response.payload.body) {\n        // The response includes a body with an error message.\n        const { callControlResponse } = response.payload.body\n        message = getMessage(callControlResponse.statusCode)\n        // TODO: Do we want to wrap the backend's error codes?\n        code = callControlResponse.statusCode\n      } else {\n        // As serviceException details not available, we will capture general error information\n        message = response.payload.body.message\n        code = response.payload.result.code\n      }\n    } else if (response.payload.result) {\n      message = `Request failed: ${response.payload.result.message}`\n      code = response.payload.result.code\n    }\n  } else {\n    message = 'Request failed: Unknown error.'\n  }\n\n  return new BasicError({ message, code })\n}\n\n/**\n * Generates the call url for the rest request based on the options provided.\n * @param {Object} requestInfo Object cotaining request information\n * @param {Object} options\n * @param {boolean} [options.isAnonymous] Flag indicating whether the call is anonymous or not.\n * @param {string} [options.account] An account token used by the request if it is an anonymous call.\n * @param {string} [options.wrtcsSessionId] The ID the backend uses to track the session.\n * @param {string} [options.endUrl] The end url to append to the main url.\n */\nfunction generateCallUrl (requestInfo, options) {\n  // Generic user information.\n  const { baseURL, version, username } = requestInfo\n  // Call specific information.\n  const { isAnonymous, account, wrtcsSessionId, endUrl } = options\n\n  const userType = isAnonymous ? 'anonymous' : 'user'\n  const userId = isAnonymous ? account : username\n  const requestType = isAnonymous ? 'callMe' : 'callControl'\n\n  // The common path for all call REST requests.\n  let url = `${baseURL}/rest/version/${version}/${userType}/${userId}`\n\n  if (endUrl) {\n    url += `/${endUrl}`\n  } else {\n    url += `/${requestType}`\n  }\n\n  // If the REST request is for an existing call, the path includes its ID.\n  if (wrtcsSessionId) {\n    url += `/callSessions/${wrtcsSessionId}`\n  }\n\n  return url\n}\n","/**\n * Call saga index.\n * Defines which actions trigger which sagas.\n */\n\n// Call plugin.\nimport * as actionTypes from '../../interfaceNew/actionTypes'\nimport * as webrtcActionTypes from '../../../webrtc/interface/actionTypes'\nimport * as connectivityActionTypes from '../../../connectivity/interface/actionTypes'\nimport * as supportSagas from './support'\nimport * as requests from '../requests/calls'\nimport { getRemoteParticipant } from './utils'\nimport { CALL_STATES } from '../../constants'\nimport { getCallByWrtcsSessionId } from '../../interfaceNew/selectors'\n\n// Callstack plugin.\nimport { makeCall, answerCall, rejectCall, ignoreCall, forwardCall } from '../../../callstack/call/establish'\nimport * as midcallSagas from '../../../callstack/call/midcall'\nimport {\n  incomingCall,\n  parseCallRequest,\n  parseCallResponse,\n  callStatusUpdateEnded,\n  sessionStatusUpdateEnded,\n  callStatusUpdateRinging,\n  callStatusUpdateFailed,\n  callCancelled,\n  receiveEarlyMedia\n} from '../../../callstack/call/notifications'\nimport { sendDtmf } from '../../../callstack/call/dtmf'\nimport { sendCallAudit, getSessions } from '../../../callstack/call/support'\nimport { getAvailableCodecs } from '../../../callstack/webrtc/codecs'\n\n// Libraries.\nimport { call, delay, select, takeEvery, takeLeading } from 'redux-saga/effects'\n\n// Other plugins\nimport { NOTIFICATION_RECEIVED } from '../../../notifications/interface/actionTypes'\nimport { SUBSCRIBE_FINISHED } from '../../../subscription/interface/actionTypes'\nimport { CONNECT_FINISHED } from '../../../auth/interface/actionTypes'\nimport { logManager } from '../../../logs'\n\nconst log = logManager.getLogger('CALL')\n\n/**\n * Call operations.\n */\n\n/**\n * Start an outgoing call.\n * @method createCall\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * createCall (deps) {\n  yield takeEvery(actionTypes.MAKE_CALL, makeCall, { ...deps, requests })\n}\n\n/**\n * Answer a ringing call.\n * @method answerCall\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * answerCallEntry (deps) {\n  yield takeEvery(actionTypes.ANSWER_CALL, answerCall, { ...deps, requests })\n}\n\n/**\n * Reject a ringing call.\n * @method rejectCall\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * rejectCallEntry (deps) {\n  yield takeEvery(actionTypes.REJECT_CALL, rejectCall, { ...deps, requests })\n}\n\n/**\n * Add media to a call.\n * @method addMedia\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * addMediaEntry (deps) {\n  yield takeEvery(actionTypes.ADD_MEDIA, midcallSagas.addMedia, { ...deps, requests })\n}\n\n/**\n * Remove media from a call.\n * @method removeMedia\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * removeMediaEntry (deps) {\n  yield takeEvery(actionTypes.REMOVE_MEDIA, midcallSagas.removeMedia, { ...deps, requests })\n}\n\n/**\n * Add media to a call.\n * @method addMedia\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * addBasicMediaEntry (deps) {\n  yield takeEvery(actionTypes.ADD_BASIC_MEDIA, midcallSagas.addBasicMedia, { ...deps, requests })\n}\n\n/**\n * Remove media from a call.\n * @method removeMedia\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * removeBasicMediaEntry (deps) {\n  yield takeEvery(actionTypes.REMOVE_BASIC_MEDIA, midcallSagas.removeBasicMedia, { ...deps, requests })\n}\n\n/**\n * Check if renegotiation is needed.\n * @method checkRenegotiationFlagEntry\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * checkRenegotiationFlagEntry (deps) {\n  yield takeEvery(webrtcActionTypes.SESSION_TRACK_ENDED, midcallSagas.checkRenegotiationFlag, { ...deps, requests })\n}\n\n/**\n * Peform a call renegotitation.\n * @method renegotiationEntry\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * renegotiationEntry (deps) {\n  yield takeEvery(actionTypes.RENEGOTIATE, midcallSagas.renegotiate, { ...deps, requests })\n}\n\n/**\n * Send DTMF tones for a call.\n * @method sendDTMF\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * sendDtmfEntry (deps) {\n  /**\n   * Use `takeLeading` to avoid multiple operations happening at the same time.\n   *    This is an issue for in-band DTMF, which would cause the second and all\n   *    subsequent sendDtmf operations to fail if the first operation has not\n   *    yet finished.\n   */\n  yield takeLeading(actionTypes.SEND_DTMF, sendDtmf, { ...deps })\n}\n\n/**\n * Call notifications.\n */\n\n/**\n * Handle a Link \"call incoming\" notification.\n * @method incomingCallNotification\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * incomingCallNotification (deps) {\n  /**\n   * Intercept the Link-specific notification, ensuring parameters are given\n   *    to the Callstack sagas into a generic format.\n   * @method linkIncomingCall\n   * @param {Object} action An \"incoming call notification\" action.\n   */\n  function * linkIncomingCall (action) {\n    const message = action.payload.notificationMessage\n\n    const notificationParams = message.callNotificationParams || {}\n\n    // Massage data into a generic format, instead of Link-specific.\n    const params = {\n      // The remote SDP offer included with the notification (if any).\n      sdp: message.sessionParams.sdp,\n      // ID that the server uses to identify the session.\n      wrtcsSessionId: message.sessionParams.sessionData,\n      // Remote participant information.\n      remoteName: notificationParams.callerName,\n      remoteNumber: notificationParams.callerDisplayNumber,\n      // Where the call was sent\n      calleeNumber: notificationParams.calleeDisplayNumber,\n      // Custom Parameters\n      customParameters: message.customParameters\n    }\n\n    // Pass the incoming call parameters to the Callstack for handling.\n    yield call(incomingCall, { ...deps, requests }, params)\n  }\n\n  // Redux-saga take() pattern.\n  function incomingCallPattern (action) {\n    return action.type === NOTIFICATION_RECEIVED && action.payload.notificationMessage.eventType === 'call'\n  }\n  yield takeEvery(incomingCallPattern, linkIncomingCall)\n}\n\n/**\n * Handle a Link \"session progress\" notification.\n * @method sessionProgressNotification\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * sessionProgressNotification (deps) {\n  function progressPattern (action) {\n    return action.type === NOTIFICATION_RECEIVED && action.payload.notificationMessage.eventType === 'sessionProgress'\n  }\n\n  /**\n   * Intercept the notification before its sent to the Callstack. We do this\n   *    to ensure the data is in a generic format.\n   * @method parseSessionProgress\n   */\n  function * parseSessionProgress (action) {\n    const message = action.payload.notificationMessage\n\n    const notificationParams = message.callNotificationParams || {}\n\n    // Massage data into a generic format, instead of Link-specific.\n    const params = {\n      sdp: message.sessionParams.sdp,\n      wrtcsSessionId: message.sessionParams.sessionData,\n      remoteName: notificationParams.remoteName,\n      remoteNumber: notificationParams.remoteDisplayNumber,\n      customParameters: message.customParameters\n    }\n\n    yield call(receiveEarlyMedia, deps, params)\n  }\n\n  yield takeEvery(progressPattern, parseSessionProgress)\n}\n\n/**\n * Handle a call status websocket notification.\n * @method callStatusNotification\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * callStatusNotification (deps) {\n  function statusUpdatePattern (status) {\n    return function statusPattern (action) {\n      return action.type === NOTIFICATION_RECEIVED && action.payload.notificationMessage.eventType === status\n    }\n  }\n\n  function * parseStatusNotification (action) {\n    const message = action.payload.notificationMessage\n    const { eventType } = message\n    const { sessionData: wrtcsSessionId, reasonText, statusCode } = message.sessionParams\n\n    const targetCall = yield select(getCallByWrtcsSessionId, wrtcsSessionId)\n    if (!targetCall) {\n      log.info('A remote operation is being requested on a call that no longer exists.')\n    }\n\n    const remoteInfo = yield call(getRemoteParticipant, message)\n\n    const params = {\n      wrtcsSessionId,\n      reasonText,\n      statusCode,\n      // Remote participant's information.\n      ...remoteInfo\n    }\n    if (eventType === 'callEnd') {\n      yield call(callStatusUpdateEnded, deps, params)\n    } else if (eventType === 'sessionComplete') {\n      yield call(sessionStatusUpdateEnded, { ...deps, requests }, params)\n    } else if (eventType === 'ringing') {\n      params.customParameters = message.customParameters\n      yield call(callStatusUpdateRinging, deps, params)\n    } else if (eventType === 'sessionFail') {\n      yield call(callStatusUpdateFailed, deps, params)\n    }\n  }\n\n  // Handle specific call statuses\n  yield takeEvery(statusUpdatePattern('ringing'), parseStatusNotification)\n  yield takeEvery(statusUpdatePattern('callEnd'), parseStatusNotification)\n  yield takeEvery(statusUpdatePattern('sessionComplete'), parseStatusNotification)\n  yield takeEvery(statusUpdatePattern('sessionFail'), parseStatusNotification)\n}\n\n/**\n * Handle a `callCancel` notification from Link.\n * @method callCancelNotification\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * callCancelNotification (deps) {\n  // Redux-saga take pattern.\n  function callCancelPattern (action) {\n    return action.type === NOTIFICATION_RECEIVED && action.payload.notificationMessage.eventType === 'callCancel'\n  }\n\n  /**\n   * Handle Link-specific behaviours before passing the notification off to the\n   *    Callstack.\n   * @method handleCallCancel\n   * @param  {Object} action\n   */\n  function * handleCallCancel (action) {\n    /*\n     * Workaround: Delay a short time before processing the notification.\n     * The backend sends a \"callCancel\" notification immediately after answering\n     *    (and rejecting, forwarding) a call. The backend's intention for this\n     *    is to notify other user subscriptions (eg. same user on another\n     *    device) that the call has been handled, so the call is \"cancelled\" for\n     *    this subscription. But they send it as a broadcast notification to all\n     *    subscriptions, even the one that handled the call.\n     *\n     * We need to ignore this notification for the subscription that handled the\n     *    call, but process it for any other subscriptions. We do this by\n     *    delaying the notification to ensure the \"answer call\" process is\n     *    finished. This delay ensures that the Call is in the correct state\n     *    after the user responded to the call, so we can tell whether the\n     *    notification needs to be ignored or not.\n     *\n     * This workaround has the side-effect that callCancel notifications we do\n     *    want to process are delayed.\n     *\n     * Slower networks may need a longer delay...\n     */\n    yield delay(3000)\n\n    // Get the current call\n    const { sessionData } = action.payload.notificationMessage.sessionParams\n    const currentCall = yield select(getCallByWrtcsSessionId, sessionData)\n\n    if (\n      currentCall &&\n      currentCall.state !== CALL_STATES.RINGING &&\n      currentCall.state !== CALL_STATES.EARLY_MEDIA &&\n      currentCall.state !== CALL_STATES.INITIATED\n    ) {\n      // Don't process the notification if the call isn't \"ringing\".\n      log.debug(`Received call cancel notification when state is ${currentCall.state}. Ignoring.`)\n      return\n    }\n\n    const params = {\n      wrtcsSessionId: sessionData\n    }\n\n    // Now process the notification after making sure we don't want to ignore it.\n    yield call(callCancelled, deps, params)\n  }\n\n  yield takeEvery(callCancelPattern, handleCallCancel)\n}\n\n/**\n * Handle receiving remote offer notifications in a Link format.\n * Uses properties in the notification to create a standardized data object to\n *    be used by the Callstack.\n * @method receiveRemoteOffer\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * receiveRemoteOffer (deps) {\n  /**\n   * Intercept the Link-specific notification, ensuring parameters are given\n   *    to the Callstack sagas into a generic format.\n   * @method parseOfferNotification\n   * @param {Object} action\n   */\n  function * parseOfferNotification (action) {\n    const message = action.payload.notificationMessage\n    const { sessionData: wrtcsSessionId } = message.sessionParams\n\n    const targetCall = yield select(getCallByWrtcsSessionId, wrtcsSessionId)\n    if (!targetCall) {\n      log.info('A remote operation is being requested on a call that no longer exists.')\n      return\n    }\n\n    const remoteInfo = yield call(getRemoteParticipant, message)\n\n    // Pull-out the parameters into a standard format for the Callstack.\n    const params = {\n      wrtcsSessionId: message.sessionParams.sessionData,\n      sdp: message.sessionParams.sdp,\n      ...remoteInfo,\n      customParameters: message.customParameters\n    }\n\n    // Pass the call parameters to the Callstack for handling.\n    yield call(parseCallRequest, { ...deps, requests }, params)\n  }\n\n  // take() pattern for \"update call w/ offer\" notifications.\n  function receiveOfferPattern (action) {\n    return action.type === NOTIFICATION_RECEIVED && action.payload.notificationMessage.eventType === 'startCallUpdate'\n  }\n\n  yield takeEvery(receiveOfferPattern, parseOfferNotification)\n}\n\n/**\n * Handle receiving remote answer notifications in a Link format.\n * Uses properties in the notification to create a standardized data object to\n *    be used by the Callstack.\n * @method receiveRemoteAnswer\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * receiveRemoteAnswer (deps) {\n  /**\n   * Intercept the Link-specific notification, ensuring parameters are given\n   *    to the Callstack sagas into a generic format.\n   * @method parseAnswerNotification\n   * @param {Object} action\n   */\n  function * parseAnswerNotification (action) {\n    const message = action.payload.notificationMessage\n    const { sessionData: wrtcsSessionId } = message.sessionParams\n\n    const targetCall = yield select(getCallByWrtcsSessionId, wrtcsSessionId)\n    if (!targetCall) {\n      log.info('A remote operation is being requested on a call that no longer exists.')\n      return\n    }\n\n    const remoteInfo = yield call(getRemoteParticipant, message)\n\n    // Pull-out the parameters into a standard format for the Callstack.\n    const params = {\n      wrtcsSessionId: message.sessionParams.sessionData,\n      sdp: message.sessionParams.sdp,\n\n      retryAfter: message.sessionParams.retryAfter,\n      message: message.sessionParams.reasonText,\n      code: message.statusCode,\n\n      // Remote participant information.\n      ...remoteInfo,\n\n      customParameters: message.customParameters\n    }\n\n    // Pass the call parameters to the Callstack for handling.\n    yield call(parseCallResponse, { ...deps, requests }, params)\n  }\n\n  // take() pattern for \"update call with answer\" notifications.\n  function receiveAnswerPattern (action) {\n    return action.type === NOTIFICATION_RECEIVED && action.payload.notificationMessage.eventType === 'respondCallUpdate'\n  }\n\n  yield takeEvery(receiveAnswerPattern, parseAnswerNotification)\n}\n\n/**\n * End an ongoing call.\n * @method endCall\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * endCallEntry (deps) {\n  yield takeEvery(actionTypes.END_CALL, midcallSagas.endCall, { ...deps, requests })\n}\n\n/**\n * Ignore an incoming call.\n * @method ignoreCall\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * ignoreCallEntry (deps) {\n  yield takeEvery(actionTypes.IGNORE_CALL, ignoreCall, { ...deps })\n}\n\n/**\n * Put a call on hold.\n * Currently, \"hold\" is defined as setting media directions to inactive.\n * TODO: There will be different \"hold\" scenarios. Need to determine how to\n *    differentiate between them to know which saga to trigger.\n * @method holdCall\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * holdCall (deps) {\n  yield takeEvery(actionTypes.CALL_HOLD, midcallSagas.offerInactiveMedia, { ...deps, requests })\n}\n\n/**\n * Take a call off hold.\n * Currently, \"unhold\" is defined as setting media directions to sendrecv.\n * TODO: There will be different \"unhold\" scenarios. Need to determine how to\n *    differentiate between them to know which saga to trigger.\n * @method unholdCall\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * unholdCall (deps) {\n  yield takeEvery(actionTypes.CALL_UNHOLD, midcallSagas.offerFullMedia, { ...deps, requests })\n}\n\n/**\n * Sends custom parameters for a call\n * @method sendCustomParameters\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * sendCustomParameters (deps) {\n  yield takeEvery(actionTypes.SEND_CUSTOM_PARAMETERS, midcallSagas.sendCustomParameters, { ...deps, requests })\n}\n\n/**\n * Handle sending a call audit request\n * TODO: Move the common \"setup\" logic into the Callstack?\n * @method callAudit\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * callAudit (deps) {\n  const actionTypesToDoAuditOn = [actionTypes.ANSWER_CALL, actionTypes.CALL_ACCEPTED, actionTypes.MAKE_CALL_FINISH]\n\n  function callStartAuditPattern (action) {\n    return actionTypesToDoAuditOn.indexOf(action.type) !== -1 && !action.error\n  }\n\n  yield takeEvery([callStartAuditPattern, actionTypes.CALL_AUDIT], sendCallAudit, {\n    webRTC: deps.webRTC,\n    requests\n  })\n}\n\n/**\n * We need to check the session status of all active calls upon websocket connection to ensure all call states are up to date\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * getSessionsOnWSConnect (deps) {\n  yield takeEvery(connectivityActionTypes.WS_CONNECT_FINISHED, getSessions, { ...deps, requests })\n}\n\n/**\n * Get RTCStatsReport.\n * @method getStats\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * getStatsEntry (deps) {\n  yield takeEvery(actionTypes.GET_STATS, midcallSagas.getStats, deps)\n}\n\n/**\n * Handles updating TURN information after the user connects.\n * @method setTurnCredentials\n */\nexport function * setTurnCredentials () {\n  // Check that the action is a succesful subscription that includes\n  //    TURN information from the server.\n  function hasTurnCredentials (action) {\n    return (\n      !action.error &&\n      ((action.type === CONNECT_FINISHED &&\n        action.payload.subscription &&\n        action.payload.subscription.turnCredentials) ||\n        (action.type === SUBSCRIBE_FINISHED &&\n          action.payload.subscriptions &&\n          action.payload.subscriptions.length &&\n          action.payload.subscriptions[0].turnCredentials))\n    )\n  }\n\n  yield takeEvery(hasTurnCredentials, supportSagas.setTurnCredentials)\n}\n\n/**\n * Forward an incoming call.\n * @method forwardCallEntry\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * forwardCallEntry (deps) {\n  yield takeEvery(actionTypes.FORWARD_CALL, forwardCall, { ...deps, requests })\n}\n\n/**\n * Transfers 2 ongoing calls to one another.\n * @method consultativeTransferEntry\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * consultativeTransferEntry (deps) {\n  yield takeEvery(actionTypes.CONSULTATIVE_TRANSFER, midcallSagas.consultativeTransfer, { ...deps, requests })\n}\n\n/**\n * Direct Transfer an ongoing call.\n * @method directTransferEntry\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * directTransferEntry (deps) {\n  yield takeEvery(actionTypes.DIRECT_TRANSFER, midcallSagas.directTransfer, { ...deps, requests })\n}\n\n/**\n * Joins 2 ongoing calls.\n * @method joinEntry\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * joinEntry (deps) {\n  yield takeEvery(actionTypes.JOIN, midcallSagas.join, { ...deps, requests })\n}\n\n/**\n * Replaces a track with a new track with specified constraints.\n * @method replaceTrackEntry\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * replaceTrackEntry (deps) {\n  yield takeEvery(actionTypes.REPLACE_TRACK, midcallSagas.replaceTrack, deps)\n}\n\n/**\n * Retrieves the list of available codecs supported by the browser.\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * getAvailableCodecsEntry (deps) {\n  yield takeEvery(actionTypes.GET_AVAILABLE_CODECS, getAvailableCodecs, { ...deps })\n}\n","import { turnActions } from '../../interfaceNew/actions'\nimport { getOptions } from '../../interfaceNew/selectors'\n\n// Other plugins.\nimport { logManager } from '../../../logs'\nimport { CONNECT_FINISHED } from '../../../auth/interface/actionTypes'\n\n// Libraries.\nimport { put, select } from 'redux-saga/effects'\n\nconst log = logManager.getLogger('CALL')\n\n/**\n * Handles setting turn/stun information that has been\n *    received from the server.\n * @method setTurnCredentials\n * @param {Object} action A \"connect finished\" action.\n */\nexport function * setTurnCredentials (action) {\n  const { iceServers, serverTurnCredentials } = yield select(getOptions)\n\n  // Must have ICE servers configured.\n  if (!iceServers) {\n    log.debug('No ICE servers provided during setup; not using TURN/STUN for calls.')\n    return\n  }\n\n  if (!serverTurnCredentials) {\n    log.debug('Using application provided turn credentials.')\n    return\n  }\n\n  // TURN credentials received from the server.\n  const turnCredentials =\n    action.type === CONNECT_FINISHED\n      ? action.payload.subscription.turnCredentials\n      : action.payload.subscriptions[0].turnCredentials\n\n  const turnInfo = {\n    credentials: turnCredentials,\n    // Map the server-provided credentials to the ICE server list.\n    servers: iceServers.map(iceInfo => {\n      return {\n        ...iceInfo,\n        username: turnCredentials.username,\n        credential: turnCredentials.password\n      }\n    })\n  }\n\n  yield put(turnActions.turnChanged(turnInfo))\n}\n","// Call plugin.\nimport { getCallByWrtcsSessionId } from '../../interfaceNew/selectors'\n\n// Other plugins.\nimport { getDomain } from '../../../auth/interface/selectors'\nimport { logManager } from '../../../logs'\n\n// Libraries.\nimport { select } from 'redux-saga/effects'\n\nconst log = logManager.getLogger('CALL')\n\n/**\n * Gets the remote participant data from a notification object's `callNotificationParams` property if it exists.\n * @param {Object} notification The notification object to extract remote participant data from.\n * @returns {Object} Object containing `remoteName` & `remoteNumber` properties.\n *                   Empty object if `callNotificationParams` property does not exist.\n */\nexport function * getRemoteParticipant (notification) {\n  const wrtcsSessionId = notification.sessionParams.sessionData\n  const targetCall = yield select(getCallByWrtcsSessionId, wrtcsSessionId)\n\n  // If the call isn't found, just log a warning and return an empty object.\n  if (!targetCall) {\n    log.info('A remote operation is being requested on a call that no longer exists.')\n    return {}\n  }\n\n  let remoteInfo = {}\n  if (!notification.callNotificationParams) {\n    // `sessionComplete` notifications don't have `callNotificationParams`.\n    log.debug(\"Notification does not contain property 'callNotificationParams'.\")\n  } else {\n    /**\n     * SPiDR notifications seem to have different \"remote participant\" properties\n     *    in different scenarios. Determine which scenario the call is in to know\n     *    how to parse the notification.\n     */\n    if (targetCall.direction === 'incoming') {\n      remoteInfo = {\n        remoteName: notification.callNotificationParams.callerName,\n        remoteNumber: notification.callNotificationParams.callerDisplayNumber\n      }\n    } else {\n      remoteInfo = {\n        remoteName: notification.callNotificationParams.remoteName,\n        remoteNumber: notification.callNotificationParams.remoteDisplayNumber\n      }\n    }\n  }\n\n  /*\n   * Sometimes the \"display number\" doesn't include a domain. Make sure it has\n   *    a domain so that it is always consistent.\n   * TODO: Figure out in which cases this was needed. Transfer?\n   *    Ref: KAA-746\n   */\n  if (remoteInfo.remoteNumber && !remoteInfo.remoteNumber.includes('@')) {\n    const domain = yield select(getDomain)\n    remoteInfo.remoteNumber += domain\n  }\n\n  // If the data from the notification is undefined, use whatever the existing\n  //    value on the call was.\n  return {\n    remoteName: remoteInfo.remoteName || targetCall.remoteParticipant.displayName,\n    remoteNumber: remoteInfo.remoteNumber || targetCall.remoteParticipant.displayNumber\n  }\n}\n","// Other plugins.\nimport { getSubscriptionInfo } from '../../../subscription/interface/selectors'\n\n// Helpers.\nimport BasicError, { callCodes } from '../../../errors'\n\n// Libraries.\nimport { select } from 'redux-saga/effects'\nimport { logManager } from '../../../logs'\n\nconst log = logManager.getLogger('CALL')\n\n/**\n * Gets the websocket id being used by the call.\n * @method getWebsocketId\n * @returns {Object} result Contains `websocketId` property or an `error` property\n * @returns {string} result.websocketId The websocket id being used by the call.\n * @returns {BasicError} result.error An error object on failure to find websocket id.\n */\nexport function * getWebsocketId () {\n  const subscriptionInfo = yield select(getSubscriptionInfo)\n\n  try {\n    // Match anything after /websocket/ in the string. The ID should be the first result, which is the (.*) group.\n    const websocketId = subscriptionInfo.notificationChannel.match(/\\/websocket\\/([^\\s]+)/)[1]\n    return { websocketId }\n  } catch (e) {\n    log.error(e.message)\n    return {\n      error: new BasicError({\n        code: callCodes.GENERIC_ERROR,\n        message: 'Websocket ID not found'\n      })\n    }\n  }\n}\n","// Call plugin.\nimport * as sagas from './sagas'\nimport anonymousAPI from '../interfaceNew/api/callMe'\n\n// Other plugins\nimport callsNewLink from '../link'\nimport { logManager } from '../../logs'\n\n// Helpers.\nimport { autoRestart, mergeValues } from '../../common/utils'\n\n// Libraries.\nimport { values } from 'lodash/fp'\nimport { fork } from 'redux-saga/effects'\nimport { getWebRTCSupportCapabilities } from 'kandy-webrtc'\n\n// Parse and/or Validate\nimport { validation as v8n, parse, enums } from '../../../src/common/validation'\n\nconst log = logManager.getLogger('CALLME')\n\nconst defaultOptions = {\n  sdpSemantics: 'plan-b',\n  iceServers: [],\n  iceCollectionDelay: 1000,\n  maxIceTimeout: 3000,\n  // Defaults set by the Webrtc stack:\n  //    iceCollectionCheck: Has at least one relay candidate.\n  serverTurnCredentials: true,\n  sdpHandlers: [],\n  removeH264Codecs: true,\n  earlyMedia: false,\n  resyncOnConnect: false,\n  mediaBrokerOnly: false\n}\n\n// config validation\nconst v8nValidation = v8n.schema({\n  sdpSemantics: enums(['unified-plan', 'plan-b']),\n  iceServers: v8n.array(),\n  iceCollectionDelay: v8n.positive(),\n  maxIceTimeout: v8n.positive(),\n  // Defaults set by the Webrtc stack:\n  //     iceCollectionCheck: v8n.optional(v8n.function()),\n  serverTurnCredentials: v8n.boolean(),\n  sdpHandlers: v8n.array(),\n  removeH264Codecs: v8n.boolean(),\n  earlyMedia: v8n.boolean(),\n  resyncOnConnect: v8n.boolean(),\n  mediaBrokerOnly: v8n.boolean()\n})\nconst parseOptions = parse('call', v8nValidation)\n\nexport default function newCallMePlugin (options = {}) {\n  options = mergeValues(defaultOptions, options)\n  parseOptions(options)\n\n  const { mediaDevices, peerConnection } = getWebRTCSupportCapabilities()\n  if (!mediaDevices || !peerConnection) {\n    log.warn(\n      'Calls are not supported on this platform due to lack of WebRTC support. CallMe APIs will not be available.'\n    )\n    return\n  }\n\n  const linkCallPlugin = callsNewLink(options)\n\n  return {\n    name: linkCallPlugin.name,\n    api: anonymousAPI(linkCallPlugin.api),\n    reducer: linkCallPlugin.reducer,\n    init: anonymousInit(linkCallPlugin.init),\n    capabilities: ['callMe']\n  }\n}\n\n/**\n * Returns an init function which also calls another plugin's init function.\n * @method anonymousInit\n * @param {function} otherInit The other plugin's init function.\n */\nfunction anonymousInit (otherInit) {\n  return function * init ({ webRTC }) {\n    // Run the other plugin's init\n    yield fork(otherInit, { webRTC })\n\n    // Wrap the newCallMe sagas in a function that provides them with the webRTC stack.\n    const deps = { webRTC, browserDetails: webRTC.getBrowserDetails }\n    const wrappedSagas = values(sagas).map(saga => {\n      return autoRestart(() => saga(deps))\n    })\n\n    // Run all of the sagas.\n    for (const saga of wrappedSagas) {\n      yield fork(saga)\n    }\n  }\n}\n","// Call plugin.\nimport { callActions } from '../../interfaceNew/actions'\nimport { normalizeSipUri } from '../../utils/normalization'\n\n// Other plugins.\nimport * as authActions from '../../../auth/interface/actions'\nimport * as authActionTypes from '../../../auth/interface/actionTypes'\nimport { logManager } from '../../../logs'\n\n// Libraries.\nimport { put, actionChannel, take } from 'redux-saga/effects'\nimport BasicError, { callCodes } from '../../../errors'\n\nconst log = logManager.getLogger('CALL')\n/**\n * Starts a new outgoing call.\n *\n * This saga defines how a call is started anonymously. It performs the\n *    signalling operations to create an \"anonymous call\" on the server.\n * Assumptions:\n *     1. None.\n * Responsibilities:\n *     1. Connect to callMe service.\n *     2. Dispatches action to make the call.\n * @method makeAnonymousCall\n * @param {Object}   action        An action of type `MAKE_ANONYMOUS_CALL`.\n */\nexport function * makeAnonymousCall (deps, action) {\n  const anonUser = action.payload.callOptions.from\n  if (!anonUser) {\n    yield put(\n      callActions.makeAnonymousCallFinish(action.payload.id, {\n        error: new BasicError({\n          code: callCodes.INVALID_PARAM,\n          message: 'callOptions has no `from` property'\n        })\n      })\n    )\n    return\n  }\n  const { realm, accountToken, toToken, fromToken } = action.payload.credentials\n\n  // If none of these 4 properties exist, then we're attempting a tokenless anonymous call.\n  // If any of these 4 properties exist, then we're attempting a time-based token anonymous call.\n  // So if some of them exist and some of them are missing, generate an error informing the user about it.\n  if ((realm || accountToken || toToken || fromToken) && (!realm || !accountToken || !toToken || !fromToken)) {\n    yield put(\n      callActions.makeAnonymousCallFinish(action.payload.id, {\n        error: new BasicError({\n          code: callCodes.INVALID_PARAM,\n          message:\n            'Time-based token anonymous call missing one or more of the following properties: `realm`, `accountToken`, `toToken`, `fromToken`.'\n        })\n      })\n    )\n    return\n  }\n\n  let account, caller, callee\n  let isTokenBased\n  if (realm && accountToken && toToken && fromToken) {\n    // If credentials were provided for a token-limited call.\n    log.debug('Performing time-limited token anonymous call.')\n    account = accountToken\n    caller = fromToken\n    callee = toToken\n    isTokenBased = true\n  } else {\n    log.debug('Performing anonymous call.')\n    account = action.payload.callee\n    caller = anonUser\n    callee = action.payload.callee\n    isTokenBased = false\n  }\n\n  const connectChannel = yield actionChannel(authActionTypes.CONNECT_FINISHED)\n  yield put(\n    authActions.connect({\n      username: account,\n      password: '',\n      // The fake userId of the current, anonymous user.\n      anonUsername: anonUser,\n      realm\n    })\n  )\n  const connectResponse = yield take(connectChannel)\n  connectChannel.close()\n\n  if (connectResponse.error) {\n    // Connection failed.\n    yield put(\n      callActions.makeAnonymousCallFinish(action.payload.id, {\n        error: new BasicError({\n          code: callCodes.INVALID_PARAM,\n          message: 'Failed to connect to server.'\n        })\n      })\n    )\n    return\n  }\n\n  // Make the call normally after we're subscribed.\n  yield put(\n    callActions.makeCall(action.payload.id, {\n      participantAddress: isTokenBased ? callee : normalizeSipUri(callee),\n      mediaConstraints: action.payload.mediaConstraints,\n      isAnonymous: true,\n      bandwidth: action.payload.callOptions.bandwidth,\n      account,\n      from: isTokenBased ? caller : normalizeSipUri(caller),\n      displayName: isTokenBased ? '' : action.payload.callOptions.displayName,\n      customParameters: action.payload.callOptions.customParameters\n    })\n  )\n}\n","/**\n * Call saga index.\n * Defines which actions trigger which sagas.\n */\n\n// Call plugin.\nimport { MAKE_ANONYMOUS_CALL, MAKE_CALL_FINISH, END_CALL_FINISH } from '../../interfaceNew/actionTypes'\n\n// Other plugins.\nimport * as authActions from '../../../auth/interface/actions'\n\nimport { makeAnonymousCall } from './establish'\n\n// Libraries.\nimport { takeEvery, take, put } from 'redux-saga/effects'\n\n/**\n * Call operations.\n */\n\n/**\n * Start an outgoing call.\n * @method makeAnonymousCallEntry\n * @param {Object} deps             Dependencies to be injected.\n * @param {Object} deps.webRTC      The WebRTC stack.\n */\nexport function * makeAnonymousCallEntry (deps) {\n  // TODO: Using `makeCall` for now but will need a custom callstack saga for this\n  yield takeEvery(MAKE_ANONYMOUS_CALL, makeAnonymousCall, { ...deps })\n}\n\n/**\n * Entry saga for handling the \"end of call\" operations.\n * @method anonymousCallEnd\n */\nexport function * anonymousCallEnd () {\n  const failedMakeCallFinish = ({ type, error }) => type === MAKE_CALL_FINISH && error\n\n  while (true) {\n    yield take([END_CALL_FINISH, failedMakeCallFinish])\n\n    // When the call ends, we want to disconnect the user.\n    yield put(authActions.disconnect())\n  }\n}\n","/**\n * Extracts the domain from an address if an @ symbol exists and isn't at the start or end of the address.\n * @param {string} addressString The address string to extract the domain from (if it exists).\n * @returns {string} The extracted domain. Empty string of none found.\n */\nfunction extractDomainFromAddress (addressString) {\n  const indexOfAtSymbol = addressString.lastIndexOf('@')\n  if (indexOfAtSymbol !== 0 && indexOfAtSymbol !== addressString.length - 1) {\n    // If '@' symbol found in middle of addressString, split it.\n    if (indexOfAtSymbol !== -1) {\n      return addressString.substr(indexOfAtSymbol + 1)\n    }\n  }\n  return ''\n}\n\n/**\n * Determines which address and domain to use depending on whether the address string contains a domain or not.\n * @param {string} addressString The address string to examine and extract a domain from (if any).\n * @param {string} defaultDomainString The domain to use if the address string does not contain a domain in it.\n * @returns {Object} An object containing the correct address and domain to use.\n */\nfunction separateAddressAndDomain (addressString, defaultDomainString) {\n  const extractedDomain = extractDomainFromAddress(addressString)\n  // If a domain was extracted from the address, use that as the domain and strip it from the address.\n  if (extractedDomain) {\n    return {\n      address: addressString.substr(0, addressString.length - extractedDomain.length - 1),\n      domain: extractedDomain\n    }\n  } else {\n    return {\n      address: addressString,\n      domain: defaultDomainString\n    }\n  }\n}\n\n/**\n * Extracts any pre-pended data before a \":\" (if it exists) from the beginning of a string.\n * @param {string} inputString The string to remove pre-pended data from.\n * @returns {string} The pre-pended data string.\n */\nfunction extractPrependedData (inputString) {\n  const prependedDataMatches = inputString.match(/^.*:/g)\n  if (prependedDataMatches && prependedDataMatches[0]) {\n    return prependedDataMatches[0]\n  } else {\n    return ''\n  }\n}\n\n/**\n * Finds the leading special characters (\"#\", \"+\", \"*\") of an address if it is a phone number.\n * If the address contains letters or any non-visual-separator characters,\n *  it is not a phone number and no leading special characters will be found.\n * @param {string} addressString The address string to find the leading characters of (if any).\n *  The addressString must not contain any pre-pended data such as \"sip:\".\n *  The addressString must not contain a domain.\n * @returns {string} The leading special characters as one string. Empty string if none found.\n */\nfunction extractLeadingSpecialCharacters (addressString) {\n  // A single or group of contiguous characters are considered leading character/s if it is  the following:\n  // - starts at the beginning of the string - ^\n  // - is any of the following characters - [#+*]+\n  // - is followed by a digit or \"(\" - [\\d|(]\n  // - is followed by any number of only digits and visual separators - [\\d \\-.()+]*$\n  const potentialLeadingChars = addressString.match(/^[#+*]+[\\d|(][\\d \\-.()+]*$/g)\n  if (potentialLeadingChars && potentialLeadingChars[0]) {\n    // Guaranteed to have a match for regex [#+*]+ since we have potentialLeadingChars\n    // which was a match for a similar regex and we are simply extracting the leading characters part.\n    const actualLeadingChars = potentialLeadingChars[0].match(/[#+*]+/g)\n    return actualLeadingChars[0]\n  }\n  return ''\n}\n\n/**\n * Outputs a new string without its phone number visual separators (\"-\", \".\", \"(\", \")\", \"+\").\n * @param {string} inputString The string to remove visual separators from.\n * @returns {string} A new string without visual separators.\n */\nfunction withoutVisualSeparators (inputString) {\n  return inputString.replace(/[ \\-.()+]/g, '')\n}\n\n/**\n * Determines whether a string should be considered a phone number or not.\n * @param {string} addressString The address string to check.\n *  The addressString must not contain any pre-pended data such as \"sip:\"\n *  The addressString must not contain any leading special characters.\n *  The addressString must not contain a domain.\n * @returns {boolean} True if the input string is a phone number. False if it is not.\n */\nfunction isPhoneNumber (addressString) {\n  const cleanNumber = withoutVisualSeparators(addressString)\n  const phoneNumberMatch = cleanNumber.match(/^\\d+$/g)\n  return phoneNumberMatch && phoneNumberMatch.length === 1\n}\n\n/**\n * Processes the address string and returns the correct output.\n * If the address is a phone number, visual separators are removed.\n * Otherwise, it will just return the address as-is.\n * @param {string} addressString The address string to process.\n *  The addressString must not contain any pre-pended data such as \"sip:\".\n *  The addressString must not contain any leading special characters (if it is a phone number).\n *  The addressString must not contain a domain.\n * @returns {string} A phone number without visual-separators or the addressString as-is.\n */\nfunction processAddress (addressString) {\n  return isPhoneNumber(addressString) ? withoutVisualSeparators(addressString) : addressString\n}\n\n/**\n * Processes the domain string and returns the correct output.\n * Adds an \"@\" symbol if it isn't present at the beginning of the domain.\n * @param {string} domainString The domain string to process.\n * @returns {string} The domain with \"@\" symbol at the beginning if it doesn't exist.\n */\nfunction processDomain (domainString) {\n  if (domainString === '' || domainString === undefined) {\n    return ''\n  } else if (domainString.indexOf('@') === 0) {\n    return domainString\n  } else {\n    return '@' + domainString\n  }\n}\n\n/**\n *The function takes in the input dial string and domain address of the user, performs a normalization process based on the phone number handling normalization rules\n * @function normalizeSipUri\n * @param {string} address   It contains the input dial string the user dials in or the callee address\n * @param {string} domain    It contains the user's domain address\n * @returns {string} output  The output which is the normalized callee address/phone number\n */\nexport function normalizeSipUri (address, domain) {\n  // Remove leading and trailing white spaces.\n  address = address.trim()\n\n  // Extract domain.\n  const resultingAddressAndDomain = separateAddressAndDomain(address, domain)\n  domain = resultingAddressAndDomain.domain\n  address = resultingAddressAndDomain.address\n\n  // Extract pre-pended \"sip:\".\n  const prepend = extractPrependedData(address)\n  address = address.substr(prepend.length)\n\n  // Extract leading characters.\n  const leadingChars = extractLeadingSpecialCharacters(address)\n  address = address.substr(leadingChars.length)\n\n  // Process and build parts into final output in the form of `<prepend>:<leadingChars><address>@<domain>`.\n  return 'sip:' + leadingChars + processAddress(address) + processDomain(domain)\n}\n","// Libraries\nimport sdpTransform from 'sdp-transform'\n\n/**\n * Set all media to inactive in a given sdp string\n * @method setMediaInactive\n * @param  {string}  sdp An sdp string\n * @return {string}  Modified sdp string with media direction set to inactive\n */\nexport function setMediaInactive (sdp) {\n  const regex = /sendrecv|sendonly|recvonly/gi\n  if (!sdp || typeof sdp !== 'string') {\n    return\n  }\n\n  return sdp.replace(regex, 'inactive')\n}\n\n/**\n * Helper function that returns a boolean if media is active or not.\n * @method hasMediaFlowing\n * @param  {string} sdp String representation of a calls sdp.\n */\nexport function * hasMediaFlowing (sdp) {\n  const objectSdp = sdpTransform.parse(sdp)\n\n  // Check that video directions (if there are any) indicate a \"hold\" scenario.\n  const isVideoInactive = objectSdp.media\n    .filter(item => item.type === 'video')\n    .every(media => media && media.direction === 'inactive')\n\n  // Check that audio directions (if there are any) indicate a \"hold\" scenario.\n  const isAudioInactive = objectSdp.media\n    .filter(item => item.type === 'audio')\n    // Special case: In music on hold scenarios, audio may be `sendonly`\n    //    so that the held user can still receive the \"hold music\".\n    .every(media => media && ['inactive', 'sendonly'].includes(media.direction))\n\n  return !isVideoInactive || !isAudioInactive\n}\n\n/**\n * Helper function that returns a boolean if media sendonly (music on hold).\n * @method hasMusicOnHold\n * @param  {string} sdp String representation of a calls sdp.\n */\nexport function * hasMusicOnHold (sdp) {\n  const objectSdp = sdpTransform.parse(sdp)\n  const isMusicOnHold = objectSdp.media\n    .filter(item => item.type === 'audio')\n    .some(media => media && media.direction === 'sendonly')\n\n  // Check that video directions (if there are any) indicate a \"hold\" scenario.\n  const isVideoInactive = objectSdp.media\n    .filter(item => item.type === 'video')\n    .every(media => media && media.direction === 'inactive')\n\n  return isMusicOnHold && isVideoInactive\n}\n","// Helpers.\nimport { CALL_STATES, CALL_MEDIA_STATES } from '../constants'\n\n/**\n * Retrieves the current state of media flow based on a call's state.\n * @method getMediaState\n * @param  {Object} callState A call's state.\n * @return {string} A CALL_MEDIA_STATES enum value.\n */\nexport function getMediaState (callState) {\n  if (hasMedia(callState)) {\n    return CALL_MEDIA_STATES.CONNECTED\n  } else if (isLocalHold(callState)) {\n    return CALL_MEDIA_STATES.LOCAL_HOLD\n  } else if (isRemoteHold(callState)) {\n    return CALL_MEDIA_STATES.REMOTE_HOLD\n  } else if (isDualHold(callState)) {\n    return CALL_MEDIA_STATES.DUAL_HOLD\n  }\n}\n\n/**\n * Checks whether the call state indicates that the call has media.\n * @method hasMedia\n * @param  {Object}  callState Redux call state.\n * @return {boolean}\n */\nexport function hasMedia (callState) {\n  return callState.state === CALL_STATES.CONNECTED && !callState.localHold && !callState.remoteHold\n}\n\n/**\n * Checks whether the call state indicates that the call is locally held (only).\n * @method isLocalHold\n * @param  {Object}  callState Redux call state.\n * @return {boolean}\n */\nexport function isLocalHold (callState) {\n  return callState.state === CALL_STATES.ON_HOLD && callState.localHold && !callState.remoteHold\n}\n\n/**\n * Checks whether the call state indicates that the call is remotely held (only).\n * @method isRemoteHold\n * @param  {Object}  callState Redux call state.\n * @return {boolean}\n */\nexport function isRemoteHold (callState) {\n  return callState.state === CALL_STATES.ON_HOLD && !callState.localHold && callState.remoteHold\n}\n\n/**\n * Checks whether the call state indicates that the call is both locally and\n *    remote held.\n * @method isDualHold\n * @param  {Object}  callState Redux call state.\n * @return {boolean}\n */\nexport function isDualHold (callState) {\n  return callState.state === CALL_STATES.ON_HOLD && callState.localHold && callState.remoteHold\n}\n","/**\n * dtmf.js contains one call operation:\n *    - sendDtmf: Send DTMF tone(s) over a call.\n *\n * and several \"helper\" functions for it:\n *    - playInBand: Functionality for in-band DTMF.\n *    - playOutBand: Functionality for out-of-band DTMF.\n *      - addTones: Generates DTMF tones and adds them to the audio.\n *    - hasTelephoneEvent: Helper to determine out-of-band DTMF support.\n *    - convertTone, splitTones: Helpers for parsing input.\n */\n\n// Call plugin.\nimport { callActions } from '../../call/interfaceNew/actions'\nimport { getCallById } from '../../call/interfaceNew/selectors'\nimport { CALL_STATES } from '../../call/constants'\n\n// Other plugins.\nimport { logManager } from '../../logs'\nimport BasicError, { callCodes } from '../../errors'\n\n// Libraries.\nimport { call, delay, put, select } from 'redux-saga/effects'\nimport sdpTransform from 'sdp-transform'\n\nconst log = logManager.getLogger('CALL')\n\n/**\n * Entry saga for sending DTMF tones on a call.\n *\n * Determines if the DTMF tones need to be out-of-band (preferred) or in-band.\n *    Referes to helper functions to send the tones.\n *\n * Assumptions:\n *    1. None; everything is checked.\n * Responsibilities:\n *    1. Validate the operation is currently possible.\n *    2. Determine if out-of-band tones are possible for the call.\n *    3. Send the tones, depending on method available.\n * @method sendDtmf\n * @param {Object} deps        Dependencies that the saga uses.\n * @param {Object} deps.webRTC The WebRTC stack.\n * @param {Object} action      A \"send dtmf\" action.\n */\nexport function * sendDtmf (deps, action) {\n  const { webRTC } = deps\n\n  // Get the call.\n  const targetCall = yield select(getCallById, action.payload.id)\n\n  let error\n  /**\n   * Operation requirements:\n   *    1. The call exists.\n   *    2. The call is either Connected, Ringing, or Early Media.\n   *    3. A valid tone was provided.\n   */\n  if (!targetCall) {\n    log.info(`Failed to send DTMF tones on unknown call ${action.payload.id}`)\n    error = new BasicError({\n      code: callCodes.INVALID_PARAM,\n      message: 'Call state not found; invalid call ID.'\n    })\n  } else if (![CALL_STATES.CONNECTED, CALL_STATES.RINGING, CALL_STATES.EARLY_MEDIA].includes(targetCall.state)) {\n    log.info(`Failed to send DTMF tones on call ${targetCall.id}: Bad call state.`)\n    error = new BasicError({\n      code: callCodes.INVALID_STATE,\n      message: `Call is in an invalid state (${targetCall.state}).`\n    })\n  } else if (!action.payload.tone) {\n    log.info(`Failed to send DTMF tones on call ${targetCall.id}: Invalid tone.`)\n    error = new BasicError({\n      code: callCodes.INVALID_PARAM,\n      message: 'No DTMF tone specified.'\n    })\n  }\n\n  if (error) {\n    // Stop the operation if it cannot be performed right now.\n    yield put(callActions.sendDTMFFinish(action.payload.id, { error }))\n    return\n  }\n\n  // Get the webrtc Session for the call.\n  const session = yield call([webRTC.sessionManager, 'get'], targetCall.webrtcSessionId)\n  // Get the remote description for the Session.\n  const remoteDesc = yield call([session, 'getRemoteDescription'])\n\n  // TODO: Is this the correct SDP to use?\n  const canSendOutBand = yield call(hasTelephoneEvent, remoteDesc.sdp)\n\n  let result\n  if (canSendOutBand) {\n    log.debug(`Sending DTMF tones out-of-band for call ${targetCall.id}.`)\n    result = yield call(playOutBand, session, action.payload)\n  } else {\n    log.debug(`Sending DTMF tones in-band for call ${targetCall.id}.`)\n    result = yield call(playInBand, session, action.payload)\n  }\n\n  if (result) {\n    log.info(`Successfully sent DTMF tones for call ${targetCall.id}.`)\n    yield put(callActions.sendDTMFFinish(action.payload.id))\n  } else {\n    log.debug(`Failed to send DTMF tones for call ${targetCall.id}.`)\n    yield put(\n      callActions.sendDTMFFinish(action.payload.id, {\n        error: new BasicError({\n          code: callCodes.GENERIC_ERROR,\n          message: `Unable to send DTMF tones for call ${targetCall.id}.`\n        })\n      })\n    )\n  }\n}\n\n/**\n * Sends DTMF tones out-of-band over a Session.\n * This saga defines how out-of-band tones are sent over a call.\n *\n * The Callstack implementation uses the WebRTC stack's implementation for this.\n *    There is no signaling involved.\n *\n * @method playOutBand\n * @param  {Session} session A Webrtc Session object.\n * @param  {Object}  options\n * @param  {string}  options.tone           The tone sequence.\n * @param  {number}  [options.duration]     The length of each DTMF tone.\n * @param  {number}  [options.intertoneGap] The gap between each DTMF tone.\n * @return {boolean} Whether the operation was succesful or not.\n */\nexport function * playOutBand (session, options) {\n  const result = yield call([session, 'sendDTMF'], options)\n  return result\n}\n\n/**\n * Sends DTMF tones in-band over a Session.\n * This saga defines how in-band tones are sent over a call.\n *\n * DTMF tones are added to the audio track by using AudioContext nodes. A\n *    MediaStream is converted into an audio node, which allows us to add more\n *    audio inputs into the node. The original audio and DTMF tones are mixed\n *    into a single node this way, and the track from this node temporarily\n *    replaces the original track in the Session.\n *\n *                       +-------------------------+\n *    Original           | Additional Audio Source |\n *   MediaStream         +---------+---------------+\n *       |                         |\n *       |                         |\n *       v                         v\n * +-----+-------+         +-------+----------+\n * | Source Node +-------->| Destination Node |\n * +-------------+         +-------+----------+\n *                                 |\n *                                 |\n *                                 v\n *                         MediaStream w/ DTMF\n *\n * @method playInBand\n * @param  {Session} session A Webrtc Session object.\n * @param  {Object}  options\n * @param  {string}  options.tone           The tone sequence.\n * @param  {number}  [options.duration=100]     The length of each DTMF tone.\n * @param  {number}  [options.intertoneGap=70]  The gap between each DTMF tone.\n * @return {boolean} Whether the operation was succesful or not.\n */\nexport function * playInBand (session, options) {\n  let { tone, duration, intertoneGap: gap } = options\n\n  // Ensure optional options are numbers (not strings). If not numbers, or\n  //    undefined, use default values.\n  duration = Number(duration) > 0 ? Number(duration) : 100\n  gap = Number(gap) > -1 ? Number(gap) : 70\n\n  // Get the (native) track the tones will be inserted into.\n  let track\n  for (const localTrack of session.localTracks) {\n    // Matching the track is done this way because we need to yield to getState,\n    //    but we can't yield inside of a `.find(func)` or similar. So iterate\n    //    over the new tracks \"manually\".\n    const state = yield call([localTrack, 'getState'])\n    if (state.kind === 'audio') {\n      track = localTrack\n      break\n    }\n  }\n\n  const stream = yield call([track, 'getStream'])\n  const context = new AudioContext()\n\n  // Create a source node that has the stream media.\n  const source = context.createMediaStreamSource(stream)\n\n  /**\n   * Create the \"destination node\". All audio sources will be connected to This\n   *    node, and it will be used as the \"final output\".\n   */\n  const dest = context.createMediaStreamDestination()\n  // Connect the source node to it, so that it has the original audio.\n  source.connect(dest)\n\n  // Get the track from the destination node and replace the original track\n  //    on the PeerConnection with it. The remote endpoint will now receive\n  //    any/all audio that is connected to the destination node.\n  const newTrack = dest.stream.getAudioTracks()[0]\n  yield call([session.peer, 'replaceTrack'], newTrack, { trackId: track.id })\n\n  // Add the DTMF tones to the destination node.\n  yield call(addTones, context, dest, tone, { duration, gap })\n\n  // Un-replace track on the PeerConnection. This resets the tracks back to\n  //    \"normal\".\n  yield call([session.peer, 'replaceTrack'], track.track, { trackId: newTrack.id })\n\n  // Clean-up the AudioContext nodes.\n  context.close()\n\n  return true\n}\n\n/**\n * Generates DTMF tones based on input, and connects the audio to the provided\n *    target node.\n * @method addTones\n * @param  {AudioContext} context      The AudioContext being used.\n * @param  {AudioNode} targetNode      The AudioNode to add DTMF tones to.\n * @param  {string} tones              The input tones.\n * @param  {Object} [options]\n * @param  {number} [options.duration] The length of each DTMF tone.\n * @param  {number} [options.gap]      The gap between each DTMF tone.\n */\nfunction * addTones (context, targetNode, tones, options) {\n  /**\n   * Node Diagram:\n   * +--------------+\n   * | Oscillator 1 +--+\n   * +--------------+  |    +--------------+\n   *                   +--->|   Osc Node   |\n   * +--------------+  |    +------+-------+\n   * | Oscillator 2 +--+           |\n   * +--------------+              | Connect generated audio\n   *                               v to the provided node.\n   *                        +------+--------+\n   *                        |  Target Node  |\n   *                        +---------------+\n   */\n\n  /**\n   * Step 1: Setup the audio nodes.\n   */\n  // Create the Oscillator nodes that will generate the frequencies.\n  const oscillators = [context.createOscillator(), context.createOscillator()]\n  oscillators[0].type = 'sine'\n  oscillators[1].type = 'sine'\n\n  /**\n   * Create an intermediary Gain node to control the volume of the oscillator\n   *   frequencies before connecting them to anything else.\n   */\n  const oscNode = context.createGain()\n  oscillators[0].connect(oscNode)\n  oscillators[1].connect(oscNode)\n  oscNode.gain.value = 0.1\n\n  // Connect the combined oscillators to the target node. Any tones created\n  //    by the oscillators will be heard in the target node.\n  oscNode.connect(targetNode)\n\n  // Connect the oscillators to the \"destination\" as well, which works magically.\n  // `context.destination` connects to the \"default destination\" (or something\n  //    like that), which will be the machine's speakers. This will play the\n  //    audio locally.\n  oscNode.connect(context.destination)\n\n  /**\n   * Step 2: Use the oscillators to generate DTMF tones.\n   */\n\n  /**\n   * Schedule a frequency to be played for a period of time.\n   * @method scheduleTone\n   * @param  {number} tone  A frequency.\n   * @param  {number} start When the tone should start.\n   * @param  {number} dur   The duration of the tone, in seconds.\n   */\n  function scheduleTone (tone, start, dur) {\n    oscillators[0].frequency.setValueAtTime(tone[0], start)\n    oscillators[0].frequency.setValueAtTime(0, start + dur)\n\n    oscillators[1].frequency.setValueAtTime(tone[1], start)\n    oscillators[1].frequency.setValueAtTime(0, start + dur)\n  }\n\n  const toneSequence = splitTones(tones).map(convertTone)\n\n  // Convert the time units to seconds.\n  const dur = options.duration / 1000\n  const gap = options.gap / 1000\n\n  let toneStart = context.currentTime\n  for (let i = 0; i < toneSequence.length; i++) {\n    scheduleTone(toneSequence[i], toneStart, dur)\n\n    toneStart = toneStart + dur + gap\n  }\n\n  // Start playing the scheduled tones.\n  oscillators[0].start()\n  oscillators[1].start()\n\n  /**\n   * Step 3: Clean-up the audio nodes.\n   */\n\n  // Wait until all tones have finished playing.\n  const numTones = toneSequence.length\n  const delayTime = numTones * (options.duration + options.gap)\n  yield delay(delayTime)\n\n  // Disconnect all nodes from each other.\n  oscNode.disconnect()\n  oscillators[0].stop()\n  oscillators[0].disconnect()\n  oscillators[1].stop()\n  oscillators[1].disconnect()\n}\n\n/**\n * Checks whether an SDP has at least one telephone-event codec.\n *\n * TODO: If there isn't a telephone-event, then the PeerConnection won't have\n *    a \"dtmf sender\" (RTCRtpSender.dtmf). Should preferrably check for that\n *    rather than looking through the SDP.\n * This isn't being done because the Session/Peer models wrap \"send dtmf\" in a\n *    way that makes it inconvenient to use.\n *\n * @method hasTelephoneEvent\n * @param  {string}  stringSdp An SDP.\n * @return {boolean}\n */\nexport function hasTelephoneEvent (stringSdp) {\n  const sdp = sdpTransform.parse(stringSdp)\n\n  const hasCodec = sdp.media\n    .filter(media => media.type === 'audio')\n    .some(media => {\n      return media.rtp.some(rtp => rtp.codec === 'telephone-event')\n    })\n\n  return hasCodec\n}\n\n/**\n * Converts a single tone input to its dual-frequencies.\n * @method convertTone\n * @param  {string} tone A DTMF tone input character.\n * @return {Array} The set of frequencies for the DTMF tone.\n */\nexport function convertTone (tone) {\n  if (typeof tone !== 'string' || tone.length > 1) {\n    throw new Error('Invalid input for DTMF tone.')\n  }\n\n  switch (tone) {\n    case '1':\n      return ['697', '1209']\n    case '2':\n      return ['697', '1336']\n    case '3':\n      return ['697', '1477']\n    case '4':\n      return ['770', '1209']\n    case '5':\n      return ['770', '1336']\n    case '6':\n      return ['770', '1477']\n    case '7':\n      return ['852', '1209']\n    case '8':\n      return ['852', '1336']\n    case '9':\n      return ['852', '1477']\n    case '0':\n      return ['941', '1209']\n    case '*':\n      return ['941', '1336']\n    case '#':\n      return ['941', '1477']\n  }\n}\n\n/**\n * Splits a DTMF tone sequence into individual tones.\n * @method splitTones\n * @param  {string} tone A DTMF tone string.\n * @return {Array} List of single-character tones.\n */\nexport function splitTones (tone) {\n  const matches = tone.match(/[\\d*#]+/)\n  if (!matches || matches[0] !== tone) {\n    throw new Error('Invalid characters in tone.')\n  }\n\n  return tone.split('')\n}\n","/**\n * \"Establish sagas\" handle establishing a call (ie. start or respond to a call).\n *\n * The sagas about starting a call locally assume there is no session established\n *    (since that's what it is doing). The sagas about responding to a call\n *    assume that there is a session (both webRTC and server).\n */\n\n// Call plugin.\nimport { callActions } from '../../call/interfaceNew/actions'\nimport { getCallById, getOptions, getTurnInfo } from '../../call/interfaceNew/selectors'\nimport { CALL_STATES, CALL_DIRECTION } from '../../call/constants'\nimport { checkBandwidthControls } from '../utils/bandwidth'\nimport { validateCallState } from '../../call/cpaas/utils'\n\n// Callstack plugin.\nimport { setupCall, answerWebrtcSession } from '../webrtc/establish'\nimport { closeCall } from '../webrtc/midcall'\n\n// Other plugins.\nimport { logManager } from '../../logs'\n\n// Libraries.\nimport { call, put, select } from 'redux-saga/effects'\n\n/**\n * Starts a new outgoing call.\n *\n * This saga defines how a call is started. It performs the webRTC and\n *    signalling operations to create a \"call\" both locally and on the server.\n * Assumptions:\n *     1. None.\n * Responsibilities:\n *     1. Setup the call locally, using the webRTC helper saga.\n *     2. Create the call on the server.\n *     3. Update call state (via redux action).\n * @method makeCall\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   deps.requests The set of platform-specific signalling functions.\n * @param {Function} deps.requests.createSession \"Make call\" signalling function.\n * @param {Object}   action        An action of type `MAKE_CALL`.\n */\nexport function * makeCall (deps, action) {\n  const requests = deps.requests\n\n  const log = logManager.getLogger('CALL', action.payload.id)\n  log.info('Initiating new outgoing call.')\n\n  // Create a new local media object for this call.\n  const mediaConstraints = {\n    audio: action.payload.mediaConstraints.audio,\n    video: action.payload.mediaConstraints.video,\n    screenShare: action.payload.mediaConstraints.screenShare\n  }\n\n  const turnInfo = yield select(getTurnInfo)\n  const callOptions = yield select(getOptions)\n\n  const bandwidth = checkBandwidthControls(action.payload.bandwidth)\n\n  const { error, offerSdp, sessionId, mediaIds } = yield call(setupCall, deps, mediaConstraints, {\n    sdpSemantics: callOptions.sdpSemantics,\n    turnInfo,\n    bandwidth,\n    dscpControls: action.payload.dscpControls,\n    callId: action.payload.id,\n    // ICE related configs.\n    trickleIceMode: callOptions.trickleIceMode,\n    iceCollectionDelay: callOptions.iceCollectionDelay,\n    iceCollectionCheck: callOptions.iceCollectionCheck,\n    maxIceTimeout: callOptions.maxIceTimeout,\n    removeBundling: callOptions.removeBundling\n  })\n\n  // An error occurred while trying to setup the WebRTC portion of the call.\n  //    Report the error and mark the call as ended.\n  if (error) {\n    log.info(`Failed to initiate call. Changing to ${CALL_STATES.ENDED}.`)\n    yield put(\n      callActions.makeCallFinish(action.payload.id, {\n        state: CALL_STATES.ENDED,\n        error: error\n      })\n    )\n\n    return\n  }\n\n  const callInfo = {\n    id: action.payload.id,\n    participantAddress: action.payload.participantAddress,\n    isAnonymous: action.payload.isAnonymous,\n    from: action.payload.from,\n    account: action.payload.account,\n    offer: offerSdp,\n    displayName: action.payload.displayName ? action.payload.displayName : '',\n    customParameters: action.payload.customParameters\n  }\n\n  const response = yield call(requests.createSession, callInfo)\n\n  if (!response.error) {\n    log.info(`Finished initiating call. Changing to ${CALL_STATES.INITIATED} and waiting on remote answer.`)\n    yield put(\n      callActions.pendingMakeCall(action.payload.id, {\n        state: CALL_STATES.INITIATED,\n        // The ID that the backend uses to track this webRTC session.\n        wrtcsSessionId: response.wrtcsSessionId,\n        // The ID that the webRTC stack uses to track this webRTC session.\n        webrtcSessionId: sessionId,\n        // The local Media object associated with this call.\n        mediaIds: mediaIds,\n        // The bandwidth of the call.\n        bandwidth,\n        // The custom display name to use. Not supported on all environments.\n        displayName: action.payload.displayName,\n        // The custom parameters of the call\n        customParameters: action.payload.customParameters\n      })\n    )\n  } else {\n    log.info('Failed to initiate call. Ending call and cleaning up WebRTC portions.')\n    // The call failed, so stop the Media object created for the call.\n    // TODO: Update redux state that the Media object is stopped.\n    //    Need an event from Media model to notify about the stop, and listener\n    //    set on Media when it is created (in `createLocalMedia` saga).\n    yield call(closeCall, deps.webRTC, sessionId)\n\n    yield put(\n      callActions.makeCallFinish(action.payload.id, {\n        state: CALL_STATES.ENDED,\n        error: response.error\n      })\n    )\n  }\n}\n\n/**\n * Answers an incoming call.\n *\n * This saga defines how a call is answered. It performs the webRTC and\n *    signaling operations to respond to a call on the server. The local \"call\"\n *    may or may not exist at this point in time, depending if the call is slow\n *    start.\n * If the call is using regular negotiation, the call will exist locally.\n *    Signaling with an answer SDP will establish the call, so it can be\n *    considered \"Connected\" afterwards.\n * If the call is using slow start negotiation, the call needs to be created\n *    locally. An offer SDP from the call will be used for signaling (as per\n *    slow start), but the call cannot be considered \"Connected\" until we\n *    receive a response to the offer SDP.\n * Assumptions:\n *    1. The call is in Ringing state.\n *    2. The call's direction is incoming.\n * Responsibilities:\n *    1. Determine whether Regular or Slow Start negotiation is to be used.\n *    2. Regular: Create an answer for the call, using the webRTC helpers.\n *    3. Regular: Update the call on the server with the answer.\n *    4. Regular: Update call state (via redux actions).\n *    2. Slow Start: Setup the call locally, using the webRTC helper saga.\n *    3. Slow Start: Update the call on the server with an offer.\n *    4. Slow Start: Update state (via redux actions).\n * @method answerCall\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   deps.requests The set of platform-specific signalling functions.\n * @param {Function} deps.requests.answerSession \"Answer call\" signalling function.\n * @param {Object}   action        An \"answer call\" action.\n */\nexport function * answerCall (deps, action) {\n  const requests = deps.requests\n\n  const log = logManager.getLogger('CALL', action.payload.id)\n  log.info('Answering incoming call.')\n\n  const incomingCall = yield select(getCallById, action.payload.id)\n  if (!incomingCall) {\n    // TODO: Should report an error.\n    log.error(`Error: Call ${action.payload.id} not found.`)\n    return\n  }\n\n  // Make sure the call state is what we expect\n  const stateError = yield call(validateCallState, action.payload.id, {\n    state: CALL_STATES.RINGING,\n    direction: 'incoming'\n  })\n  if (stateError) {\n    log.debug(`Failed to answer call due to invalid call state: ${stateError.message}`)\n    yield put(\n      callActions.answerCallFinish(action.payload.id, {\n        error: stateError\n      })\n    )\n    return\n  }\n\n  const bandwidth = checkBandwidthControls(action.payload.bandwidth)\n  const mediaConstraints = {\n    audio: action.payload.mediaConstraints.audio,\n    video: action.payload.mediaConstraints.video,\n    screenShare: action.payload.mediaConstraints.screenShare\n  }\n\n  let webrtcInfo, callInfo, nextState\n  if (incomingCall.isSlowStart) {\n    /*\n     * If the call was a slow start call, then it doesn't have a webRTC session\n     *    yet. We need to setup the session and provide the signaling server\n     *    with an SDP offer.\n     */\n    log.debug('Answering call with slow start negotiation.')\n\n    const turnInfo = yield select(getTurnInfo)\n    const callOptions = yield select(getOptions)\n\n    // Setup a webRTC session.\n    webrtcInfo = yield call(setupCall, deps, mediaConstraints, {\n      sdpSemantics: callOptions.sdpSemantics,\n      turnInfo,\n      bandwidth,\n      dscpControls: action.payload.dscpControls,\n      // ICE related configs.\n      trickleIceMode: callOptions.trickleIceMode,\n      iceCollectionDelay: callOptions.iceCollectionDelay,\n      iceCollectionCheck: callOptions.iceCollectionCheck,\n      maxIceTimeout: callOptions.maxIceTimeout,\n      removeBundling: callOptions.removeBundling\n    })\n\n    if (webrtcInfo.error) {\n      log.info('Failed to answer incoming call.')\n      yield put(\n        callActions.answerCallFinish(\n          action.payload.id,\n          {\n            error: webrtcInfo.error\n          },\n          {\n            isSlowStart: incomingCall.isSlowStart\n          }\n        )\n      )\n      return\n    }\n\n    callInfo = {\n      answer: webrtcInfo.offerSdp,\n      wrtcsSessionId: incomingCall.wrtcsSessionId,\n      customParameters: action.payload.customParameters\n    }\n\n    // Even if the answer request is successful, we still need to wait for a\n    //    notification from the signaling server to know if the call is complete.\n    nextState = CALL_STATES.RINGING\n  } else {\n    /*\n     * For a regular call scenario, we perform normal webRTC negotiation.\n     */\n\n    // Update the existing webRTC session with an answer.\n    const sessionOptions = {\n      sessionId: incomingCall.webrtcSessionId,\n      bandwidth,\n      dscpControls: action.payload.dscpControls,\n      callId: incomingCall.id\n    }\n    webrtcInfo = yield call(answerWebrtcSession, deps, mediaConstraints, sessionOptions)\n\n    if (webrtcInfo.error) {\n      log.info('Failed to incoming answer call.')\n      yield put(\n        callActions.answerCallFinish(\n          action.payload.id,\n          {\n            error: webrtcInfo.error\n          },\n          {\n            isSlowStart: incomingCall.isSlowStart\n          }\n        )\n      )\n      return\n    }\n\n    callInfo = {\n      id: incomingCall.id,\n      answer: webrtcInfo.answerSDP,\n      wrtcsSessionId: incomingCall.wrtcsSessionId,\n      customParameters: action.payload.customParameters\n    }\n\n    // If the answer request is successful, then the call can be considered complete.\n    nextState = CALL_STATES.CONNECTED\n  }\n\n  // Perform the signaling to answer the call.\n  const response = yield call(requests.answerSession, callInfo)\n\n  if (!response.error) {\n    if (incomingCall.isSlowStart) {\n      log.info(`Finished answering slow-start call. Changing to ${nextState} and waiting for remote slow-start answer.`)\n    } else {\n      log.info(`Finished answering call. Changing to ${nextState}.`)\n    }\n\n    yield put(\n      callActions.answerCallFinish(\n        action.payload.id,\n        {\n          state: nextState,\n          // TODO: Proper start time for slow-start calls.\n          startTime: Date.now(),\n          // The local Media object associated with this call.\n          mediaIds: webrtcInfo.mediaIds,\n          // For slow start calls, there isn't a webRTC session yet.\n          webrtcSessionId: webrtcInfo.sessionId,\n          // TODO: Properly track the media that the call has.\n          mediaConstraints,\n          // The bandwidth of the call\n          bandwidth,\n          // The custom parameters of the call\n          customParameters: action.payload.customParameters\n        },\n        {\n          isSlowStart: incomingCall.isSlowStart\n        }\n      )\n    )\n  } else {\n    log.info('Failed to answer call.')\n    yield put(\n      callActions.answerCallFinish(\n        action.payload.id,\n        {\n          error: response.error\n        },\n        {\n          isSlowStart: incomingCall.isSlowStart\n        }\n      )\n    )\n  }\n}\n\n/**\n * Rejects an incoming call.\n *\n * This saga defines how a call is rejected. It performs the webRTC and\n *    signalling operations to reject a \"call\" both locally and on the server.\n * Assumptions:\n *    1. None\n * Responsibilities:\n *    1. Cleanup the call locally, using the webRTC helper saga.\n *    2. Reject the call on the server.\n *    3. Update call state (via redux action).\n * @method rejectCall\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   deps.requests The set of platform-specific signalling functions.\n * @param {Function} deps.requests.rejectSession \"Reject call\" signalling function.\n * @param {Object}   action        An action of type `REJECT_CALL`.\n */\nexport function * rejectCall (deps, action) {\n  const { webRTC, requests } = deps\n\n  const log = logManager.getLogger('CALL', action.payload.id)\n  log.info('Rejecting incoming call.')\n\n  const incomingCall = yield select(getCallById, action.payload.id)\n\n  // Ensure the call is in a valid state for this operation.\n  const stateError = yield call(validateCallState, action.payload.id, {\n    state: CALL_STATES.RINGING,\n    direction: CALL_DIRECTION.INCOMING\n  })\n\n  if (stateError) {\n    log.info(`Failed to reject call, caused by ${stateError.message}.`)\n    // Report the operation failure.\n    yield put(callActions.rejectCallFinish(action.payload.id, { error: stateError }))\n    return\n  }\n\n  yield call(closeCall, webRTC, incomingCall.webrtcSessionId)\n\n  // Collect the information needed to make the request.\n  const callInfo = {\n    wrtcsSessionId: incomingCall.wrtcsSessionId\n  }\n  const response = yield call(requests.rejectSession, callInfo)\n\n  if (!response.error) {\n    log.info('Failed to reject call.')\n    yield put(callActions.rejectCallFinish(action.payload.id))\n  } else {\n    log.info(`Finished rejecting call. Changing to ${CALL_STATES.ENDED}.`)\n    yield put(\n      callActions.rejectCallFinish(action.payload.id, {\n        error: response.error\n      })\n    )\n  }\n}\n\n/**\n * Ignores an incoming call.\n *\n * This saga defines how a call is ignored. It performs the webRTC\n *    operations to ignore a \"call\".\n * Assumptions:\n *    1. None\n * Responsibilities:\n *    1. Cleanup the call locally, using the webRTC helper saga.\n *    2. Update call state (via redux action).\n * @method ignoreCall\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   action        An action of type `IGNORE_CALL`.\n */\nexport function * ignoreCall (deps, action) {\n  const { webRTC } = deps\n\n  const log = logManager.getLogger('CALL', action.payload.id)\n  log.info('Ignoring incoming call.')\n\n  // Ensure the call is in a valid state for this operation.\n  const stateError = yield call(validateCallState, action.payload.id, {\n    state: CALL_STATES.RINGING,\n    direction: CALL_DIRECTION.INCOMING\n  })\n\n  if (stateError) {\n    log.info(`Failed to ignore call, caused by ${stateError.message}.`)\n    // Report the operation failure.\n    yield put(callActions.ignoreCallFinish(action.payload.id, { error: stateError }))\n    return\n  }\n\n  const targetCall = yield select(getCallById, action.payload.id)\n\n  // Clean-up webRTC objects. Ignore any errors returned, since we want the\n  //    call / session to be ended either way.\n  yield call(closeCall, webRTC, targetCall.webrtcSessionId)\n\n  log.info(`Finished ignoring call. Changing to ${CALL_STATES.ENDED}.`)\n  // Report the operation complete.\n  yield put(callActions.ignoreCallFinish(targetCall.id))\n}\n\n/**\n *\n * Forwards an incoming call.\n *\n * This saga handles the WebRTC and signalling portions of forwarding an incoming call\n * Assumptions:\n *    1. The action contains a destination address\n * Responsibilities:\n *    1. Perform the signaling to tell the server that we want to forward the call to a specified destination address.\n *    2. Update call state (via redux actions).\n * @method forwardCall\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   deps.requests The set of platform-specific signalling functions.\n * @param {Function} deps.requests.forwardSession \"Forward call\" signalling function.\n * @param {Object}   action An action of type `FORWARD_CALL`.\n */\nexport function * forwardCall (deps, action) {\n  const { webRTC, requests } = deps\n\n  const log = logManager.getLogger('CALL', action.payload.id)\n  log.info('Forwarding incoming call.')\n\n  const incomingCall = yield select(getCallById, action.payload.id)\n\n  // Ensure the call is in a valid state for this operation.\n  const stateError = yield call(validateCallState, action.payload.id, {\n    state: CALL_STATES.RINGING,\n    direction: CALL_DIRECTION.INCOMING\n  })\n\n  if (stateError) {\n    log.info(`Failed to forward call, caused by ${stateError.message}.`)\n    // Report the operation failure.\n    yield put(callActions.forwardCallFinish(action.payload.id, { error: stateError }))\n    return\n  }\n\n  // Collect the information needed to make the request.\n  const callInfo = {\n    wrtcsSessionId: incomingCall.wrtcsSessionId,\n    address: action.payload.destination\n  }\n  const response = yield call(requests.forwardSession, callInfo)\n\n  if (response.error) {\n    log.info('Failed to forward call.')\n    yield put(\n      callActions.forwardCallFinish(action.payload.id, {\n        error: response.error\n      })\n    )\n    return\n  }\n\n  yield call(closeCall, webRTC, incomingCall.webrtcSessionId)\n\n  log.info(`Finished forwarding call. Changing to ${CALL_STATES.ENDED}.`)\n  yield put(callActions.forwardCallFinish(action.payload.id))\n}\n","/**\n * \"Midcall sagas\" handle performing local mid-call operations.\n *\n * These sagas assume that there is an established session (webRTC and server-\n *    side) to perform the operation on. Otherwise, it is considered an error.\n */\n\n// Callstack plugin.\nimport { setupCall } from '../webrtc/establish'\nimport { generateOffer, closeCall, webRtcRemoveMedia, webRtcAddMedia, webRtcReplaceTrack } from '../webrtc/midcall'\nimport { checkBandwidthControls } from '../utils/bandwidth'\n\n// Call plugin.\nimport { callActions } from '../../call/interfaceNew/actions'\nimport { getCallById, getOptions, getTurnInfo, getCallByWebrtcSessionId } from '../../call/interfaceNew/selectors'\n\n// Other plugins.\nimport { logManager } from '../../logs'\nimport BasicError, { callCodes } from '../../errors'\nimport { getTrackById } from '../../webrtc/interface/selectors'\nimport { getPlatform } from '../../auth/interface/selectors'\n\n// Helpers.\nimport { validateCallState } from '../../call/cpaas/utils'\nimport { CALL_STATES, CALL_DIRECTION } from '../../call/constants'\n\n// Libraries.\nimport { all, call, put, select } from 'redux-saga/effects'\nimport { isArray, isEmpty } from 'lodash/fp'\n\n// Utils\nimport { getVersion } from '../../common/version'\nimport { platforms } from '../../constants'\nimport sdkId from '../../common/sdkId'\n\nconst log = logManager.getLogger('CALL')\n\n/**\n * This saga ends a call, it performs the webRTC and signaling operations to\n *    update the local and server sessions of a call.\n * Assumptions:\n *    1. None.\n * Responsibilities:\n *    1. Perform the signaling to tell the server that we want to end the session\n *    2. Update call state (via redux actions).\n * @method endCall\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   deps.requests The set of platform-specific signalling functions.\n * @param {Function} deps.requests.endSession \"End session\" signalling function.\n * @param {Object}   action An action of type `END_CALL`.\n */\nexport function * endCall (deps, action) {\n  const { webRTC, requests } = deps\n  const { id } = action.payload\n\n  const log = logManager.getLogger('CALL', id)\n  log.info('Ending call.')\n\n  // Make sure the call state is what we expect\n  const stateError = yield call(validateCallState, action.payload.id, {})\n  if (stateError) {\n    log.debug(`Call not found: ${stateError.message}`)\n    yield put(\n      callActions.endCallFinish(id, {\n        isLocal: true,\n        error: stateError\n      })\n    )\n    return\n  }\n\n  const { wrtcsSessionId, webrtcSessionId, isAnonymous, account } = yield select(getCallById, id)\n\n  // Perform webRTC functions\n  yield call(closeCall, webRTC, webrtcSessionId)\n\n  // Perform signalling to end the session\n  const response = yield call(requests.endSession, { wrtcsSessionId, isAnonymous, account })\n\n  log.info(`Finished ending call. Changing to ${CALL_STATES.ENDED}.`)\n  if (!response.error) {\n    yield put(callActions.endCallFinish(id, { isLocal: true }))\n  } else {\n    yield put(\n      callActions.endCallFinish(id, {\n        isLocal: true,\n        error: response.error\n      })\n    )\n  }\n}\n\n/**\n * Updates an existing call to have inactive media.\n * Can be used as a \"hold\" operation for plain webRTC scenarios.\n *\n * This saga defines how a call is put \"on hold\". It performs the webRTC and\n *    signaling operations to update the local and server sessions of a call.\n *    This represents the start of the webRTC renegotiation process for the\n *    local side.\n * Assumptions:\n *    1. The call is in the correct state for the operation.\n *        - The call exists, and is not already locally held.\n * Responsibilities:\n *    1. Generate an offer with the media directions as \"locally held\".\n *    2. Perform signaling to update the server session with the offer.\n *    3. Update call state (via redux actions).\n * @method offerInactiveMedia\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   deps.requests The set of platform-specific signalling functions.\n * @param {Function} deps.requests.updateSession \"Update call\" signalling function.\n * @param {Object}   action An action of type `CALL_HOLD`.\n */\nexport function * offerInactiveMedia (deps, action) {\n  const requests = deps.requests\n\n  const log = logManager.getLogger('CALL', action.payload.id)\n  log.info('Holding call.')\n\n  // Make sure the call state is what we expect\n  const stateError = yield call(validateCallState, action.payload.id, { localHold: false })\n  if (stateError) {\n    log.debug(`Invalid call state: ${stateError.message}`)\n    yield put(\n      callActions.holdCallFinish(action.payload.id, {\n        local: true,\n        error: stateError\n      })\n    )\n    return\n  }\n\n  const targetCall = yield select(getCallById, action.payload.id)\n  const { wrtcsSessionId, webrtcSessionId, isAnonymous, account, customParameters } = targetCall\n\n  // TODO: Make sure the session is in the correct signaling state to start a\n  //    renegotiation operation.\n  const offer = yield call(\n    generateOffer,\n    deps,\n    webrtcSessionId,\n    {\n      audio: 'inactive',\n      video: 'inactive'\n    },\n    targetCall.bandwidth\n  )\n\n  if (!offer) {\n    log.debug('Failed to generate SDP offer')\n    yield put(\n      callActions.holdCallFinish(action.payload.id, {\n        local: true,\n        error: new BasicError({\n          code: callCodes.INVALID_OFFER,\n          message: 'Failed to generate SDP offer'\n        })\n      })\n    )\n    return\n  }\n\n  const callInfo = {\n    wrtcsSessionId,\n    offer: offer.sdp,\n    isAnonymous,\n    account,\n    customParameters\n  }\n\n  const response = yield call(requests.updateSession, callInfo)\n\n  if (response.error) {\n    log.info('Failed to hold call.')\n    yield put(\n      callActions.holdCallFinish(action.payload.id, {\n        local: true,\n        error: response.error\n      })\n    )\n  } else {\n    log.info('Finished local portion of holding call. Waiting on remote response.')\n    yield put(\n      callActions.pendingOperation(action.payload.id, {\n        operation: targetCall.localOp.operation\n      })\n    )\n  }\n}\n\n/**\n * Updates an existing call to have \"full\" media.\n * Can be used as an \"unhold\" operation for plain webRTC scenarios.\n *\n * This saga defines how a call is taken off \"hold\". It performs the webRTC and\n *    signaling operations to update the local and server sessions of a call.\n *    This represents the start of the webRTC renegotiation process for the\n *    local side.\n * Assumptions:\n *    1. The call is in the correct state for the operation.\n *        - The call exists, and is locally held.\n * Responsibilities:\n *    1. Generate an offer with the media directions as \"connected\".\n *    2. Perform signaling to update the server session with the offer.\n *    3. Update call state (via redux actions).\n * @method offerFullMedia\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   deps.requests The set of platform-specific signalling functions.\n * @param {Function} deps.requests.updateSession \"Update call\" signalling function.\n * @param {Object}   action        A \"unhold call\" action.\n */\nexport function * offerFullMedia (deps, action) {\n  const requests = deps.requests\n\n  const log = logManager.getLogger('CALL', action.payload.id)\n  log.info('Unholding call.')\n\n  // Make sure the call state is what we expect\n  const stateError = yield call(validateCallState, action.payload.id, { localHold: true })\n  if (stateError) {\n    log.debug(`Invalid call state, not on hold: ${stateError.message}`)\n    yield put(\n      callActions.unholdCallFinish(action.payload.id, {\n        local: true,\n        error: stateError\n      })\n    )\n    return\n  }\n\n  const targetCall = yield select(getCallById, action.payload.id)\n  const { wrtcsSessionId, webrtcSessionId, isAnonymous, account, customParameters } = targetCall\n\n  // TODO: Make sure the session is in the correct signaling state to start a\n  //    renegotiation operation.\n  const offer = yield call(\n    generateOffer,\n    deps,\n    webrtcSessionId,\n    {\n      audio: 'sendrecv',\n      video: 'sendrecv'\n    },\n    targetCall.bandwidth\n  )\n\n  if (!offer) {\n    log.debug('Invalid SDP offer or SDP offer not received.')\n    yield put(\n      callActions.unholdCallFinish(action.payload.id, {\n        local: true,\n        error: new BasicError({\n          code: callCodes.INVALID_OFFER,\n          message: 'Invalid SDP offer or SDP offer not received'\n        })\n      })\n    )\n    return\n  }\n\n  const callInfo = {\n    wrtcsSessionId,\n    offer: offer.sdp,\n    isAnonymous,\n    account,\n    customParameters\n  }\n\n  const response = yield call(requests.updateSession, callInfo)\n\n  if (response.error) {\n    log.info('Failed to unhold call.')\n    yield put(\n      callActions.unholdCallFinish(action.payload.id, {\n        local: true,\n        error: response.error\n      })\n    )\n  } else {\n    log.info('Finished local portion of unholding call. Waiting on remote response.')\n    yield put(\n      callActions.pendingOperation(action.payload.id, {\n        operation: targetCall.localOp.operation\n      })\n    )\n  }\n}\n\n/**\n * Sends custom parameters for a call.\n * @param {Object}   deps                                   Dependencies that the saga uses.\n * @param {Object}   deps.webRTC                            The WebRTC stack.\n * @param {Object}   deps.requests                          The set of platform-specific signalling functions.\n * @param {Function} deps.requests.updateCustomParameters   \"Update call\" signalling function.\n * @param {Object} action A \"sent Custom Parameters\" action.\n */\nexport function * sendCustomParameters (deps, action) {\n  const requests = deps.requests\n\n  const log = logManager.getLogger('CALL', action.payload.id)\n  log.info('Sending custom parameters for call.')\n\n  // Get the call.\n  const targetCall = yield select(getCallById, action.payload.id)\n\n  // Validate call exists and call state is correct\n  if (!targetCall) {\n    log.debug(`Invalid Call ID. No call found with Call ID: ${action.payload.id}`)\n    yield put(\n      callActions.sendCustomParametersFinish(action.payload.id, {\n        error: new BasicError({\n          code: callCodes.INVALID_PARAM,\n          message: `Invalid Call ID. No call found with Call ID: ${action.payload.id}`\n        })\n      })\n    )\n    return\n  } else if (targetCall.state !== CALL_STATES.CONNECTED && targetCall.state !== CALL_STATES.ON_HOLD) {\n    log.debug(`Call in invalid state for sending custom parameters. Call state: ${targetCall.state}`)\n    yield put(\n      callActions.sendCustomParametersFinish(action.payload.id, {\n        error: new BasicError({\n          code: callCodes.INVALID_STATE,\n          message: `Call in invalid state for sending custom parameters. Call state: ${targetCall.state}`\n        })\n      })\n    )\n    return\n  }\n\n  const { wrtcsSessionId, isAnonymous, account, customParameters } = targetCall\n\n  const callInfo = {\n    wrtcsSessionId,\n    isAnonymous,\n    account,\n    customParameters\n  }\n\n  const response = yield call(requests.updateCustomParameters, callInfo)\n\n  if (response.error) {\n    log.info('Failed to send custom parameters.')\n    yield put(\n      callActions.sendCustomParametersFinish(action.payload.id, {\n        error: response.error\n      })\n    )\n  } else {\n    log.info('Finished sending custom parameters.')\n    yield put(\n      callActions.sendCustomParametersFinish(action.payload.id, {\n        error: false\n      })\n    )\n  }\n}\n\n/**\n * Gets low-level statistics about a call (or track).\n *\n * This saga defines how/what statistics are retrieved about a call. It performs\n *    the webRTC operations on the local session. No signaling is involved.\n * The retrieved call statistics are a RTCStatsReport as provided by the WebRTC\n *    specification. Stats can be retrieved for either an entire call or\n *    individual tracks.\n * Assumptions:\n *    1. The call is on-going.\n * Responsibilities:\n *    1. Ensure the call exists.\n *    2. Use the webRTC layer to retrieve the stats.\n *    3. Dispatch an action with the results (which triggers an event).\n * @method getStats\n * @param {Object} deps        Dependencies that the saga uses.\n * @param {Object} deps.webRTC The WebRTC stack.\n * @param {Object} action      A \"get Stats\" action.\n */\nexport function * getStats (deps, action) {\n  const { webRTC, browserDetails } = deps\n\n  const log = logManager.getLogger('CALL', action.payload.id)\n  log.info('Getting call statistics.')\n\n  // TODO: Actually check something other than \"call exists\"?\n  const stateError = yield call(validateCallState, action.payload.id, {})\n\n  if (stateError) {\n    log.debug(`Invalid call state: ${stateError.message}`)\n\n    yield call([action.meta.deferred, 'reject'], {\n      error: stateError,\n      trackId: action.payload.trackId\n    })\n\n    yield put(\n      callActions.getStatsFinish(action.payload.id, {\n        error: stateError,\n        trackId: action.payload.trackId\n      })\n    )\n    return\n  }\n\n  // Get the call.\n  const targetCall = yield select(getCallById, action.payload.id)\n\n  // Get the local Session for the call.\n  const session = yield call([webRTC.sessionManager, 'get'], targetCall.webrtcSessionId)\n\n  const trackId = action.payload.trackId\n  // Retrieve the RTCStatsReport from the session.\n  let rtcStatsReport\n  try {\n    rtcStatsReport = yield call([session, 'getStats'], trackId)\n  } catch (error) {\n    log.info('Failed to get call statistics.')\n    const basicError = new BasicError({\n      code: callCodes.GENERIC_ERROR,\n      message: error.message\n    })\n\n    yield call([action.meta.deferred, 'reject'], {\n      error: basicError\n    })\n    yield put(\n      callActions.getStatsFinish(action.payload.id, {\n        error: basicError,\n        trackId\n      })\n    )\n  }\n  if (rtcStatsReport) {\n    log.info('Finished getting call statistics.')\n\n    // Extract values for our own custom Statistics\n    const type = 'kandy_sdk_info'\n    const id = 'kandy-sdk-info_' + sdkId\n    const version = getVersion()\n    const platform = yield select(getPlatform)\n\n    let sdk\n    if (platform === platforms.CPAAS) {\n      sdk = '@kandy-io/cpaas-sdk'\n    } else if (platform === platforms.UC) {\n      sdk = '@kandy-io/uc-sdk'\n    } else if (platform === platforms.LINK) {\n      // callMe service also uses Link platform for call requests as well.\n      if (targetCall.isAnonymous) {\n        sdk = '@kandy-io/callme-sdk'\n      } else {\n        sdk = '@kandy-io/link-sdk'\n      }\n    }\n\n    // Note that getting browser details is only intended for local browser.\n    // For proxy mode this would return undefined. (see getBrowserDetails() on proxyStack)\n    const details = browserDetails()\n\n    // Define our custom Stats object\n    const sdkMetaData = {\n      id,\n      type,\n      sdk,\n      version,\n      callId: action.payload.id\n    }\n\n    if (details) {\n      sdkMetaData.platform = details.browser + '/' + details.version\n    }\n\n    // Set the timestamp value of our custom report to be same value as\n    // the timestamp associated with any stat coming from original webRTC report.\n    const iter = rtcStatsReport.keys()\n    const rtcStatValue = rtcStatsReport.get(iter.next().value)\n    if (rtcStatValue) {\n      sdkMetaData.timestamp = rtcStatValue.timestamp\n    }\n    // Add our custom stats to the ones reported by Web RTC.\n    // Since rtcStatsReport seems to be read-only Map, create a new Map\n    // which includes both our stat & the ones from webrtc.\n    const result = new Map()\n    result.set(id, sdkMetaData)\n    rtcStatsReport.forEach(stat => {\n      result.set(stat.id, stat)\n    })\n    yield call([action.meta.deferred, 'resolve'], result)\n\n    yield put(callActions.getStatsFinish(action.payload.id, { result, trackId }))\n  }\n}\n\n/**\n * Adds media to the call\n *\n * This saga performs the webRTC and signaling operations to\n *    update local and server sessions of a call.\n * Assumptions:\n *    1. Validate that the call state is \"Connected\".\n *        - The call is connected.\n * Responsibilities:\n *    1. Perform webRTC operations to add media.\n *    2. Update the backend with the new state.\n *    3. Update local state, using Redux\n * @method addMedia\n * @param {Object}   deps          Injected dependencies that addMedia relies on\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   deps.requests requests that addMedia relies on\n * @param {Function} deps.requests.updateSession request to update the session on the backend\n * @param {Object}   action        An \"add media\" action.\n */\nexport function * addMedia (deps, action) {\n  const requests = deps.requests\n  const { bandwidth, mediaConstraints, dscpControls, id } = action.payload\n\n  const log = logManager.getLogger('CALL', action.payload.id)\n  log.info('Adding media to call.')\n\n  // Make sure the call state is what we expect\n  const stateError = yield call(validateCallState, id, { state: CALL_STATES.CONNECTED })\n  if (stateError) {\n    log.debug(`Invalid call state: ${stateError.message}`)\n    yield put(\n      callActions.addMediaFinish(id, {\n        local: true,\n        error: stateError\n      })\n    )\n    return\n  }\n\n  // Get some call data.\n  const {\n    webrtcSessionId,\n    wrtcsSessionId,\n    bandwidth: callBandwidth,\n    isAnonymous,\n    account,\n    localOp,\n    customParameters\n  } = yield select(getCallById, id)\n\n  const finalBandwidth = {\n    audio: bandwidth && bandwidth.audio ? bandwidth.audio : callBandwidth.audio,\n    video: bandwidth && bandwidth.video ? bandwidth.video : callBandwidth.video\n  }\n  // Create media and add tracks using webRTC\n  const { error, sdp, medias } = yield call(webRtcAddMedia, deps, mediaConstraints, {\n    sessionId: webrtcSessionId,\n    bandwidth: finalBandwidth,\n    dscpControls\n  })\n\n  if (error) {\n    yield put(\n      callActions.addMediaFinish(id, {\n        local: true,\n        error: error\n      })\n    )\n    return\n  }\n\n  const callInfo = {\n    wrtcsSessionId,\n    offer: sdp,\n    isAnonymous,\n    account,\n    customParameters\n  }\n\n  // Perform signalling to add media\n  const response = yield call(requests.updateSession, callInfo)\n\n  if (response.error) {\n    log.info('Failed to add media to call.')\n    yield put(\n      callActions.addMediaFinish(id, {\n        local: true,\n        error: response.error\n      })\n    )\n  } else {\n    let tracks = []\n    medias.forEach(media => {\n      tracks = tracks.concat(media.tracks.map(track => track.id))\n    })\n    log.info('Finished local portion of adding media. Waiting on remote response.')\n    yield put(\n      callActions.pendingOperation(id, {\n        operation: localOp.operation,\n        operationData: {\n          local: true,\n          mediaIds: medias.map(media => media.id),\n          tracks,\n          bandwidth: finalBandwidth\n        }\n      })\n    )\n  }\n}\n\n/**\n *\n * Removes media from an existing session.\n *\n * This saga handles the WebRTC and signalling portions of removing media from an existing call\n * Assumptions:\n *    1. The action contains a tracks object that is neither an array or an empty object\n *    2. The call is in the 'Connected' state\n * Responsibilities:\n *    1. Perform the signaling to tell the server that we want to to remove the specified track\n *    2. Update call state (via redux actions).\n * @method removeMedia\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   deps.requests The set of platform-specific signalling functions.\n * @param {Function} deps.requests.updateSession \"Update call\" signalling function.\n * @param {Object}   action An action of type `REMOVE_MEDIA`.\n */\nexport function * removeMedia (deps, action) {\n  const requests = deps.requests\n  const { id, tracks, bandwidth } = action.payload\n\n  const log = logManager.getLogger('CALL', id)\n  log.info('Removing media from call.')\n\n  // Handle scenario where no track ids are provided or not in an array.\n  if (!isArray(tracks) || isEmpty(tracks)) {\n    log.debug('No track ids specified to remove.')\n    yield put(\n      callActions.removeMediaFinish(id, {\n        local: true,\n        error: new BasicError({\n          code: callCodes.INVALID_PARAM,\n          message: 'No track ids specified to remove.'\n        })\n      })\n    )\n    return\n  }\n\n  // Make sure the call state is what we expect\n  const stateError = yield call(validateCallState, id, { state: CALL_STATES.CONNECTED })\n  if (stateError) {\n    log.debug(`Invalid call state:  ${stateError.message}`)\n    yield put(\n      callActions.removeMediaFinish(id, {\n        local: true,\n        error: stateError\n      })\n    )\n    return\n  }\n  // Get some call data.\n  const {\n    webrtcSessionId,\n    wrtcsSessionId,\n    bandwidth: callBandwidth,\n    isAnonymous,\n    account,\n    localOp,\n    customParameters\n  } = yield select(getCallById, id)\n\n  const finalBandwidth = {\n    audio: bandwidth && bandwidth.audio ? bandwidth.audio : callBandwidth.audio,\n    video: bandwidth && bandwidth.video ? bandwidth.video : callBandwidth.video\n  }\n  // Remove media and tracks using webRTC\n  const { sdp, error } = yield call(webRtcRemoveMedia, deps, {\n    sessionId: webrtcSessionId,\n    tracks: tracks,\n    bandwidth: finalBandwidth\n  })\n  if (error) {\n    log.debug(`Failed to remove media: ${error.message}`)\n    yield put(\n      callActions.removeMediaFinish(id, {\n        local: true,\n        error\n      })\n    )\n    return\n  }\n\n  const callInfo = {\n    wrtcsSessionId,\n    offer: sdp,\n    isAnonymous,\n    account,\n    customParameters\n  }\n\n  const response = yield call(requests.updateSession, callInfo)\n\n  if (response.error) {\n    log.info('Failed to remove media from call.')\n    yield put(\n      callActions.removeMediaFinish(id, {\n        local: true,\n        error: response.error\n      })\n    )\n  } else {\n    log.info('Finished local portion of removing media. Waiting on remote response.')\n    yield put(\n      callActions.pendingOperation(id, {\n        operation: localOp.operation,\n        operationData: {\n          local: true,\n          tracks: tracks,\n          bandwidth: finalBandwidth\n        }\n      })\n    )\n  }\n}\n\n/**\n *\n * Checks whether a renegotiation is necessary depending on the flag\n *\n * Responsibilities:\n *    1. If renegotiation is necessary, dispatch a call action to start the renegotiation operation\n * @method renegotiate\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   action An action of type `SESSION_TRACK_ENDED`.\n * @param {Object}   action.payload The action's payload.\n * @param {string}   action.payload.id The webRTC session ID.\n * @param {string}   action.payload.trackId The ID of the track that was ended.\n * @param {boolean}  action.payload.performRenegotiation A flag that determines whether renegotiation is necessary.\n */\nexport function * checkRenegotiationFlag (deps, action) {\n  const { id, trackId, performRenegotiation } = action.payload\n\n  // This saga could be triggered by the removeMedia API or by a remote notification of a track being removed.\n  // (since it picks up on the SESSION_TRACK_REMOVED action).\n  // In these scenario this flag will be set to `false` as the saga that handles these scenarios will perform the renegotiation itself.\n  if (performRenegotiation) {\n    log.debug('Renegotiation is needed.')\n    const { id: callId } = yield select(getCallByWebrtcSessionId, id)\n    yield put(\n      callActions.renegotiate(callId, {\n        trackId\n      })\n    )\n  }\n}\n\n/**\n *\n * Performs a call renegotiation\n *\n * This saga handles creating the new SDP offer and performs the signalling for renegotiation.\n * Assumptions:\n *    2. The call is in the 'Connected' state\n * Responsibilities:\n *    1. Perform the signaling to tell the server that we are renegotiating\n *    2. Update call state (via redux actions).\n * @method renegotiate\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   deps.requests The set of platform-specific signalling functions.\n * @param {Function} deps.requests.updateSession \"Update call\" signalling function.\n * @param {Object}   action An action of type `RENEGOTIATE`.\n */\nexport function * renegotiate (deps, action) {\n  const requests = deps.requests\n  const { id, trackId } = action.payload\n\n  const log = logManager.getLogger('CALL', id)\n  log.info('Performing call renegotiation.')\n\n  // Get some call data.\n  const {\n    id: callId,\n    webrtcSessionId,\n    wrtcsSessionId,\n    bandwidth,\n    isAnonymous,\n    account,\n    localOp,\n    customParameters\n  } = yield select(getCallById, id)\n\n  // Make sure the call state is what we expect\n  const stateError = yield call(validateCallState, callId, { state: CALL_STATES.CONNECTED })\n  if (stateError) {\n    log.debug(`Invalid call state:  ${stateError.message}`)\n    yield put(\n      callActions.renegotiateFinish(callId, {\n        local: true,\n        error: stateError\n      })\n    )\n    return\n  }\n\n  // Update media and tracks using webRTC\n  const offer = yield call(generateOffer, deps, webrtcSessionId, {}, bandwidth)\n  if (!offer) {\n    log.debug('Failed to generate offer.')\n    yield put(\n      callActions.renegotiateFinish(callId, {\n        local: true,\n        error: new BasicError({\n          code: callCodes.INVALID_OFFER,\n          message: 'Failed to generate SDP offer'\n        })\n      })\n    )\n    return\n  }\n\n  const callInfo = {\n    wrtcsSessionId,\n    offer: offer.sdp,\n    isAnonymous,\n    account,\n    customParameters\n  }\n\n  const response = yield call(requests.updateSession, callInfo)\n\n  if (response.error) {\n    log.info('Failed to renegotiate call.')\n    yield put(\n      callActions.renegotiateFinish(callId, {\n        local: true,\n        error: response.error\n      })\n    )\n  } else {\n    log.info('Finished local portion of renegotiation. Waiting on remote response.')\n    yield put(\n      callActions.pendingOperation(callId, {\n        operation: localOp.operation,\n        operationData: {\n          local: true,\n          tracks: [trackId],\n          bandwidth\n        }\n      })\n    )\n  }\n}\n\n/**\n * Adds basic media scenario to the call\n *\n * This saga wraps addMedia as an easier to use function for simple scenarios\n * Assumptions:\n *    1. Validate that the call state is \"Connected\".\n *        - The call is connected.\n *    2. The track being added cannot already be on the call.\n * Responsibilities:\n *    1. Check that there isn't already a track of the same kind on the call\n *    2. Call addMedia with the correct parameters\n * @method addBasicMedia\n * @param {Object}   deps          Injected dependencies that addMedia relies on\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   deps.requests requests that addMedia relies on\n * @param {Function} deps.requests.updateSession request to update the session on the backend\n * @param {Object}   action        An action of type `ADD_BASIC_MEDIA`.\n */\nexport function * addBasicMedia (deps, action) {\n  const { id, kind } = action.payload\n\n  const log = logManager.getLogger('CALL', id)\n  log.debug(`Adding ${kind} media to call.`)\n\n  const tracks = yield getTracks(id, kind)\n  if (tracks.length >= 1) {\n    const message = `Too many ${kind} tracks for basic scenario!`\n    log.debug(message)\n    yield put(\n      callActions.addMediaFinish(id, {\n        local: true,\n        error: new BasicError({\n          code: callCodes.INVALID_PARAM,\n          message: message\n        })\n      })\n    )\n  } else {\n    yield call(addMedia, deps, action)\n  }\n}\n\n/**\n *\n * Removes basic media from an existing session.\n *\n * This saga wraps removeMedia as an easier to use function for simple scenarios\n * Assumptions:\n *    1. The call is in the 'Connected' state\n *    2. The track being removed should be the only one of its kind on the call.\n * Responsibilities:\n *    1. Check that this is a basic scenario (removing the only kind of track on the call)\n *    2. Call removeMedia with the correct parameters\n * @method removeMedia\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   deps.requests The set of platform-specific signalling functions.\n * @param {Function} deps.requests.updateSession \"Update call\" signalling function.\n * @param {Object}   action An action of type `REMOVE_BASIC_MEDIA`.\n */\nexport function * removeBasicMedia (deps, action) {\n  const { id, kind } = action.payload\n\n  const log = logManager.getLogger('CALL', id)\n  log.debug(`Removing ${kind} media from call.`)\n\n  const tracks = yield getTracks(id, kind)\n  if (tracks.length !== 1) {\n    const message = `Must have only one ${kind} track for basic scenario!`\n    log.debug(message)\n    yield put(\n      callActions.removeMediaFinish(id, {\n        local: true,\n        error: new BasicError({\n          code: callCodes.INVALID_PARAM,\n          message: message\n        })\n      })\n    )\n  } else {\n    yield call(removeMedia, deps, {\n      ...action,\n      payload: {\n        ...action.payload,\n        tracks: tracks\n      }\n    })\n  }\n}\n\n/**\n *\n * Helper function to get all tracks of a certain type\n *\n * @param {string} id     - the id of the call\n * @param {string} kind   - Kind must be of type 'audio', 'video', or 'screen'\n * @return {Array} tracks - returns the array of tracks of the given type\n */\nfunction * getTracks (id, kind) {\n  const call = yield select(getCallById, id)\n  const localTracks = call ? call.localTracks : []\n  const tracks = yield all(localTracks.map(id => select(getTrackById, id)))\n  const mediaTracks = tracks.filter(track => track.kind === kind)\n  return mediaTracks.map(trackObj => trackObj.trackId)\n}\n/**\n *\n * Direct Transfers an ongoing call.\n *\n * This saga handles the WebRTC and signalling portions of direct transferring an ongoing call\n * Assumptions:\n *    1. The action contains a destination address\n *    2. The call is in the 'On Hold' state\n * Responsibilities:\n *    1. Perform the signaling to tell the server that we want to direct transfer the call to a specified destination address.\n *    2. Update call state (via redux actions).\n * @method directTransfer\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   deps.requests The set of platform-specific signalling functions.\n * @param {Function} deps.requests.directTransferSession \"Direct transfer\" signalling function.\n * @param {Object}   action An action of type `DIRECT_TRANSFER`.\n */\nexport function * directTransfer (deps, action) {\n  const { requests } = deps\n\n  const log = logManager.getLogger('CALL', action.payload.id)\n  log.info('Performing direct transfer on call.')\n\n  const currentCall = yield select(getCallById, action.payload.id)\n\n  // Ensure the call is in a valid state for this operation.\n  const stateError = yield call(validateCallState, action.payload.id, { state: CALL_STATES.ON_HOLD })\n\n  if (stateError) {\n    log.debug(`Cannot direct transfer call: ${stateError.message}`)\n    // Report the operation failure.\n    yield put(callActions.directTransferFinish(action.payload.id, { error: stateError }))\n    return\n  }\n\n  // Collect the information needed to make the request.\n  const callInfo = {\n    wrtcsSessionId: currentCall.wrtcsSessionId,\n    address: action.payload.destination\n  }\n  const response = yield call(requests.directTransferSession, callInfo)\n\n  if (response.error) {\n    log.info('Failed to direct transfer call.')\n    yield put(\n      callActions.directTransferFinish(action.payload.id, {\n        error: response.error\n      })\n    )\n    return\n  }\n\n  log.info('Finished local portion of direct transfer. Waiting on remote response.')\n  yield put(\n    callActions.pendingOperation(action.payload.id, {\n      operation: currentCall.localOp.operation\n    })\n  )\n}\n\n/**\n *\n * Transfers 2 ongoing calls to one another.\n *\n * This saga handles the WebRTC and signalling portions of transferring 2 ongoing calls to one another.\n * Assumptions:\n *    1. The action contains the other call id\n *    2. The calls are in the 'On Hold' state\n * Responsibilities:\n *    1. Perform the signaling to tell the server that we want to transfer 2 ongoing calls to one other.\n *    2. Update call state (via redux actions).\n * @method consultativeTransfer\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   deps.requests The set of platform-specific signalling functions.\n * @param {Function} deps.requests.consultativeTransferSessions \"Consultative transfer\" signalling function.\n * @param {Object}   action An action of type `CONSULTATIVE_TRANSFER`.\n */\nexport function * consultativeTransfer (deps, action) {\n  const { requests } = deps\n\n  const log = logManager.getLogger('CALL', action.payload.id)\n  log.info('Performing consultative transfer on call.')\n\n  const currentCall = yield select(getCallById, action.payload.id)\n  const otherCall = yield select(getCallById, action.payload.otherCallId)\n\n  // Ensure the call is in a valid state for this operation.\n  const currentStateError = yield call(validateCallState, action.payload.id, {\n    state: CALL_STATES.ON_HOLD\n  })\n  const otherStateError = yield call(validateCallState, action.payload.otherCallId, {\n    state: CALL_STATES.ON_HOLD\n  })\n\n  if (currentStateError) {\n    log.debug(`Cannot transfer call ${action.payload.id}: ${currentStateError.message}`)\n    // Report the operation failure.\n    yield put(\n      callActions.consultativeTransferFinish(action.payload.id, {\n        error: currentStateError,\n        otherCallId: action.payload.otherCallId\n      })\n    )\n    return\n  }\n\n  if (otherStateError) {\n    log.debug(`Cannot transfer call ${action.payload.otherCallId}: ${otherStateError.message}`)\n    // Report the operation failure.\n    yield put(\n      callActions.consultativeTransferFinish(action.payload.id, {\n        error: otherStateError,\n        otherCallId: action.payload.otherCallId\n      })\n    )\n    return\n  }\n\n  // Collect the information needed to make the request.\n  const callInfo = {\n    wrtcsSessionId: currentCall.wrtcsSessionId,\n    otherWrtcsSessionId: otherCall.wrtcsSessionId,\n    destination: otherCall.direction === 'outgoing' ? otherCall.to : otherCall.from\n  }\n  const response = yield call(requests.consultativeTransferSessions, callInfo)\n\n  if (response.error) {\n    log.info('Failed to consultative transfer call.')\n    yield put(\n      callActions.consultativeTransferFinish(action.payload.id, {\n        error: response.error,\n        otherCallId: action.payload.otherCallId\n      })\n    )\n    return\n  }\n\n  log.info('Finished local portion of consultative transfer. Waiting on remote response.')\n  yield put(callActions.pendingConsultativeTransfer(currentCall.id, { otherCallId: otherCall.id }))\n}\n\n/**\n *\n * Joins 2 ongoing calls.\n *\n * This saga handles the WebRTC and signalling portions of joining 2 ongoing calls\n * Assumptions:\n *    1. The action contains the other call id\n *    2. The calls are in the 'On Hold' state\n * Responsibilities:\n *    1. Perform the signaling to tell the server that we want to join 2 ongoing calls.\n *    2. Update call state (via redux actions).\n * @method join\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   deps.requests The set of platform-specific signalling functions.\n * @param {Function} deps.requests.joinSessions \"Join\" signalling function.\n * @param {Object}   action An action of type `JOIN`.\n */\nexport function * join (deps, action) {\n  const requests = deps.requests\n\n  const log = logManager.getLogger('CALL', action.payload.id)\n  log.info('Performing join on call.')\n\n  const currentCall = yield select(getCallById, action.payload.id)\n  const otherCall = yield select(getCallById, action.payload.otherCallId)\n\n  // Ensure the call is in a valid state for this operation.\n  const currentStateError = yield call(validateCallState, action.payload.id, {\n    state: CALL_STATES.ON_HOLD\n  })\n  const otherStateError = yield call(validateCallState, action.payload.otherCallId, {\n    state: CALL_STATES.ON_HOLD\n  })\n\n  if (currentStateError) {\n    log.debug(`Cannot join call ${action.payload.id}: ${currentStateError.message}`)\n    // Report the operation failure.\n    yield put(\n      callActions.joinFinish(action.payload.id, {\n        error: currentStateError,\n        usedCallIds: [action.payload.id, action.payload.otherCallId]\n      })\n    )\n    return\n  }\n\n  if (otherStateError) {\n    log.debug(`Cannot join call ${action.payload.otherCallId}: ${otherStateError.message}`)\n    // Report the operation failure.\n    yield put(\n      callActions.joinFinish(action.payload.id, {\n        error: otherStateError,\n        usedCallIds: [action.payload.id, action.payload.otherCallId]\n      })\n    )\n    return\n  }\n\n  // User the audio constraints from the current call and set video to false.\n  const mediaConstraints = {\n    video: false,\n    audio: currentCall.mediaConstraints ? currentCall.mediaConstraints.audio || true : true\n  }\n\n  // Use the bandwidth constraints from the current call\n  const bandwidth = checkBandwidthControls(currentCall.bandwidth)\n\n  const dscpControls = currentCall.dscpControls\n\n  const turnInfo = yield select(getTurnInfo)\n  const { trickleIceMode, sdpSemantics, removeBundling } = yield select(getOptions)\n\n  const { offerSdp, sessionId, mediaIds } = yield call(setupCall, deps, mediaConstraints, {\n    sdpSemantics,\n    turnInfo,\n    trickleIceMode,\n    dscpControls,\n    removeBundling,\n    bandwidth\n  })\n\n  // Collect the information needed to make the request.\n  const callInfo = {\n    wrtcsSessionId: currentCall.wrtcsSessionId,\n    otherWrtcsSessionId: otherCall.wrtcsSessionId,\n    sdp: offerSdp,\n    // Use the customParameters of the current call\n    customParameters: currentCall.customParameters\n  }\n  const response = yield call(requests.joinSessions, callInfo)\n\n  if (response.error) {\n    log.info('Failed to join call.')\n    yield put(\n      callActions.joinFinish(action.payload.id, {\n        error: response.error,\n        usedCallIds: [action.payload.id, action.payload.otherCallId]\n      })\n    )\n    return\n  }\n\n  // Determine combined participant name if any\n  const currentCallRemoteName = currentCall.remoteParticipant.displayName\n  const otherCallRemoteName = otherCall.remoteParticipant.displayName\n  let participantName\n  if (currentCallRemoteName && otherCallRemoteName) {\n    participantName = `${currentCallRemoteName},${otherCallRemoteName}`\n  } else if (currentCallRemoteName) {\n    participantName = `${currentCallRemoteName},`\n  } else if (otherCallRemoteName) {\n    participantName = `,${otherCallRemoteName}`\n  }\n\n  // Determine combined remote participant address\n  const currentCallRemoteAddress = currentCall.direction === CALL_DIRECTION.OUTGOING ? currentCall.to : currentCall.from\n  const otherCallRemoteAddress = otherCall.direction === CALL_DIRECTION.OUTGOING ? otherCall.to : currentCall.from\n  const participantAddress = `${currentCallRemoteAddress},${otherCallRemoteAddress}`\n\n  log.info('Finished local portion of join. Waiting on remote response.')\n  // Dispatch an action to do the following:\n  //  - create a new \"joined\" call in state\n  //  - update calls used in the join to have isPending property\n  yield put(\n    callActions.pendingJoin(action.payload.newCallId, {\n      // The ID that the backend uses to track this webRTC session.\n      wrtcsSessionId: response.newWrtcsSessionId,\n      // The ID that the webRTC stack uses to track this webRTC session.\n      webrtcSessionId: sessionId,\n      // The local Media object associated with this call.\n      mediaIds,\n      // The media constraints this call has.\n      mediaConstraints,\n      // The combined addresses of the 2 other participants in the joined call.\n      participantAddress,\n      // The combined names of the 2 other participants in the joined call.\n      participantName,\n      // This call's current user\n      from: action.payload.from,\n      // The ids of the calls that were used for joining.\n      usedCallIds: [currentCall.id, otherCall.id],\n      // The custom parameters of the combined call\n      customParameters: currentCall.customParameters,\n      // The bandwidth from the original call.\n      bandwidth\n    })\n  )\n}\n\n/**\n *\n * Replaces an existing track with a new track.\n *\n * This saga handles the WebRTC portion of replacing a track.\n * Assumptions:\n *    1. The action contains call id, trackId, and mediaConstraints\n * Responsibilities:\n *    1. Creates a new track.\n *    2. Replaces an an existing track with the newly created track.\n *    3. Update call state (via redux actions).\n * @method replaceTrack\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   action An action of type `REPLACE_TRACK`.\n */\nexport function * replaceTrack (deps, action) {\n  const { webRTC } = deps\n\n  const log = logManager.getLogger('CALL', action.payload.id)\n  log.info('Replacing track on call.')\n\n  const { trackId, mediaConstraints } = action.payload\n\n  const stateError = yield call(validateCallState, action.payload.id, { state: CALL_STATES.CONNECTED })\n  if (stateError) {\n    log.debug(`Invalid call state: ${stateError.message}`)\n    yield put(\n      callActions.replaceTrackFinish(action.payload.id, {\n        error: stateError\n      })\n    )\n    return\n  }\n\n  const currentCall = yield select(getCallById, action.payload.id)\n\n  const { error, newTrackId, oldTrackState } = yield call(webRtcReplaceTrack, webRTC, {\n    sessionId: currentCall.webrtcSessionId,\n    trackId,\n    mediaConstraints\n  })\n\n  if (error) {\n    log.info('Failed to replace track on call.')\n    yield put(callActions.replaceTrackFinish(action.payload.id, { error }))\n  } else {\n    log.info('Finished replacing track on call.')\n    yield put(callActions.replaceTrackFinish(action.payload.id, { newTrackId, oldTrackState }))\n  }\n}\n","// Callstack.\nimport compareMedia from '../sdp/compareMedia'\nimport getOperation from '../sdp/operations'\n\n// Call plugin.\nimport { callActions } from '../../call/interfaceNew/actions'\nimport { getOptions } from '../../call/interfaceNew/selectors'\n\n// Call plugin helpers.\nimport { CALL_STATES, CALL_MEDIA_STATES } from '../../call/constants'\nimport { hasMediaFlowing, setMediaInactive } from '../../call/utils/sdp'\nimport { getMediaState } from '../../call/utils/state'\nimport { OPERATIONS, OP_STATUS } from '../../call/interfaceNew/constants'\n\n// Other plugins.\nimport { logManager } from '../../logs'\nimport { recreatePeer, handleOffer, generateOffer } from '../../callstack/webrtc/midcall'\nimport { receivedAnswer, isSameSdpSessionId } from '../webrtc/negotiation'\n\n// Libraries.\nimport { call, put, select } from 'redux-saga/effects'\n\nconst log = logManager.getLogger('CALL')\n\n/**\n * A \"call update request\" has been received and needs to be handled.\n * The request includes an offer SDP, so this is a regular webRTC scenario.\n *\n * This saga is intended to process all \"call update requests\", that have an\n *    SDP, received from the call's remote side. It is assumed the call has\n *    already been established, so this represents the start of the webRTC\n *    renegotiation process for the local side.\n * Handling the request is expected (but may not necessarily) affect the call's\n *    media. The call state will be updated depending on the requested changes\n *    and the current call state.\n * Assumptions:\n *    1. The request notification is valid.\n *        - Call exists, Call is not Ended, Call is able to receive a request.\n *    2. The SDP is a remote offer SDP.\n *        - Indicates regular webRTC negotiation should occur.\n * Responsibilities:\n *    1. Determine what the remote operation was (ie. what is being offered).\n *    2. Process the offer based on remote oepration and current local state.\n *    3. Respond to the request.\n *    4. Update call state (via redux action).\n * @method handleUpdateRequest\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   deps.requests The set of platform-specific signalling functions.\n * @param {Function} deps.requests.updateSessionResponse \"Respond to offer\" signalling function.\n * @param {Object}   targetCall    The call being acted on.\n * @param {Object}   params        Parameters of the update request.\n * @param {string}   params.sdp          A remote offer SDP.\n * @param {string}   params.remoteNumber Number of the remote participant.\n * @param {string}   params.remoteName   Name of the remote participant.\n */\nexport function * handleUpdateRequest (deps, targetCall, params) {\n  const { webRTC, requests } = deps\n\n  const log = logManager.getLogger('CALL', targetCall.id)\n  log.info('Processing regular update request from remote endpoint.')\n\n  let { sdp } = params\n  const { remoteNumber, remoteName } = params\n\n  const mediaState = yield call(getMediaState, targetCall)\n  log.debug(`Current call info; State: ${targetCall.state}, MediaState: ${mediaState}.`)\n\n  /*\n   * Determine what the remote operation was. The remote operation and our\n   *    current local state will affect how we process the received offer. Our\n   *    response needs to reflect our desired local state, so that the remote\n   *    side does not change the call in an undesired way (eg. offering media\n   *    in a dual hold scenario should not reconnect media).\n   */\n  const session = yield call([webRTC.sessionManager, 'get'], targetCall.webrtcSessionId)\n  if (!session) {\n    log.debug(`webRTC session ${targetCall.webrtcSessionId} not found.`)\n    return\n  }\n  /*\n   * Use the currently set remote SDP and the newly-received remote SDP to\n   *    determine what the remote operation was.\n   */\n  const remoteDesc = yield call([session, 'getLatestRemoteDesc'])\n  const mediaDiff = yield call(compareMedia, remoteDesc.sdp, sdp)\n  let remoteOp = yield call(getOperation, mediaDiff)\n\n  log.debug(`Interpreted update request as a ${remoteOp} operation.`)\n  /**\n   * Check for remoteOp special-cases.\n   *  This is needed for complex operations, where a few renegotiations occur\n   *      as a single remote operation. Some of those renegotiations are\n   *      special-cases (ie. not actual SDK operations).\n   *  If the remoteOp is not \"standard\", then try to fit it to a \"standard\"\n   *    operation that \"fits best\".\n   */\n  const isMediaFlowing = yield call(hasMediaFlowing, sdp)\n  if (remoteOp === 'UNKNOWN') {\n    /*\n     * If the media state is remotely held but the latest renegotiation has\n     *    media flowing, then handle it as an unhold.\n     * This occurs:\n     *  - As part of a remote direct transfer operation (when this user is being\n     *      transferred to another user). When the transferee accepts the call,\n     *      a renegotiation occurs that changes from 'MoH' to 'media flowing'\n     *      state. This needs to be handled as an unhold by the SDK so that\n     *      the call state is updated to reflect the media state.\n     *  - As part of a remote consultative transer operation (when this user was\n     *      the first call specified in the transfer operation, but not for the\n     *      second user). Same 'MoH' to 'media flowing' scenario as direct\n     *      transfer.\n     */\n    if (mediaState === CALL_MEDIA_STATES.REMOTE_HOLD && isMediaFlowing) {\n      remoteOp = OPERATIONS.UNHOLD\n    }\n  } else if (remoteOp === 'NO_CHANGE') {\n    /*\n     * Renegotiation did not change anything media related. This renegotiation\n     *    may have been for a different purpose, such as changing the remote\n     *    endpoint during a transfer.\n     *\n     * Let this remoteOp default to the generic \"update call\" operation except when we're on locally hold.\n     */\n\n    /*\n     * When our media state is Local Hold, this means that our sdp has media as inactive.\n     * Therefore, when we receive remote sdp with media as also inactive, this means the remote side is doing a hold operation.\n     * Because of this, we get a remoteOp of `NO_CHANGE` when we actually want to handle it as a remote operation\n     *  inorder to get into a dual hold state.\n     */\n    if (mediaState === CALL_MEDIA_STATES.LOCAL_HOLD) {\n      remoteOp = OPERATIONS.HOLD\n    }\n  }\n\n  log.info(`Processing update request as remote ${remoteOp} operation in ${mediaState} scenario.`)\n  const callAction = yield call(getCallAction, remoteOp)\n\n  /*\n   * If the remote operation is offering media but the call is locally held,\n   *    then we need to modify the offer to ensure that media does not restart.\n   */\n  if (isMediaFlowing && [CALL_MEDIA_STATES.DUAL_HOLD, CALL_MEDIA_STATES.LOCAL_HOLD].includes(mediaState)) {\n    log.debug('Modifying remote offer to prevent resetting media while in local hold.')\n    sdp = yield call(setMediaInactive, sdp)\n    if (!sdp) {\n      log.debug('SDP is either undefined or not a string.')\n      return\n    }\n  }\n\n  /**\n   * Decision: When we receive a remote offer SDP that has a different \"session\n   *    ID\" as the currently set remote SDP, recreate the call's PeerConnection.\n   * This is a workaround/fix for scenarios where the remote endpoint changes.\n   *    It avoids possible DTLS role conflict issues.\n   */\n  // TODO: Also check fingerprint?\n  const sameSession = yield call(isSameSdpSessionId, webRTC, targetCall.webrtcSessionId, sdp)\n  if (!sameSession) {\n    log.debug(`Received offer SDP is from a different session. Recreating Peer for call ${targetCall.id}.`)\n    yield call(recreatePeer, webRTC, targetCall.webrtcSessionId)\n  }\n\n  /**\n   * If the offer SDP has a DTLS role of active (which is invalid), change it to\n   *    actpass. This is a workaround for transfer scenarios where the offer SDP\n   *    is the remote endpoint's answer SDP from them answering the call. This\n   *    happens when slow-start is not done for the transfer.\n   */\n  if (sdp.includes('setup:active')) {\n    log.debug(`Received offer SDP with active role for call ${targetCall.id}. Changing.`)\n    sdp = sdp.replace(/setup:active/g, 'setup:actpass')\n  }\n\n  // Handle the offer SDP to receive an answer SDP.\n  // TODO: Handle the offer differently depending on remote operation.\n  const { error, answerSDP } = yield call(handleOffer, deps, sdp, targetCall.webrtcSessionId, targetCall.bandwidth)\n\n  if (error) {\n    log.debug('Failed to receive offer SDP.', error)\n    // TODO: Dispatch an error action to notify of the error scenario.\n    // The call may now be in a bad state and needs to be fixed.\n    return\n  }\n\n  // Send answer sdp back to remote side\n  const callInfo = {\n    wrtcsSessionId: targetCall.wrtcsSessionId,\n    answer: answerSDP,\n    isAnonymous: targetCall.isAnonymous,\n    account: targetCall.account,\n    customParameters: targetCall.customParameters\n  }\n\n  const response = yield call(requests.updateSessionResponse, callInfo)\n\n  if (response.error) {\n    // Scenario: The offer was processed, but failed to respond with the answer.\n    // The remote side needs the answer SDP before the call is \"connected\".\n    // TODO: Handle this scenario (retry request or fail/revert operation?)\n    log.info('Failed to respond to remote offer with an answer.')\n    yield put(\n      callAction(targetCall.id, {\n        remote: true,\n        error: response.error\n      })\n    )\n  } else {\n    log.info('Finished responding to remote update. Changing state based on the remote operation.')\n    yield put(\n      callAction(targetCall.id, {\n        remote: true,\n        remoteParticipant: {\n          displayNumber: remoteNumber,\n          displayName: remoteName\n        }\n      })\n    )\n  }\n}\n\n/**\n * A \"call update request\" has been received and needs to be handled.\n * The request does not include an SDP, so this is a slow start webRTC scenario.\n *\n * This saga is intended to process all \"call update requests\", that have no\n *    SDP, received from the call's remote side. It is assumed the call has\n *    already been established, so this represents the start of the slow start\n *    webRTC renegotiation process for the local side.\n * Handling the request will not affect the call's media at this point. As\n *    opposed to regular negotiation, we require an additional \"call response\"\n *    notification before negotiation is complete. Media and call state will\n *    only be affected by that response notification.\n * Assumptions:\n *    1. The request notification is valid.\n *        - Call exists, Call is not Ended, Call is able to receive a request.\n *    2. There is no SDP.\n *        - Indicates slow start webRTC negotiation should occur.\n * Responsibilities:\n *    1. Generate an offer SDP based on our current local state.\n *    2. Respond to the request with our offer.\n * @method handleSlowUpdateRequest\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   deps.requests The set of platform-specific signalling functions.\n * @param {Function} deps.requests.updateSessionResponse \"Respond to offer\" signalling function.\n * @param  {Object} targetCall The call being acted on.\n * @param {Object}   params       Parameters of the update request.\n * @param {string}   params.remoteNumber Number of the remote participant.\n * @param {string}   params.remoteName   Name of the remote participant.\n */\nexport function * handleSlowUpdateRequest (deps, targetCall, params) {\n  const { webRTC, requests } = deps\n  const { remoteNumber, remoteName } = params\n\n  const log = logManager.getLogger('CALL', targetCall.id)\n  log.info('Processing slow-start update request from remote endpoint.')\n\n  const mediaState = yield call(getMediaState, targetCall)\n  log.debug(`Current call info; State: ${targetCall.state}, MediaState: ${mediaState}.`)\n\n  /**\n   * Decision: Whenever we receive a slow-start notification, recreate the Peer.\n   *    This is needed in certain situations (but not all...)\n   * Known Scenarios:\n   * 1. Link direct transfer:\n   *    - The user being transferred will be on remote hold and will receive a\n   *        slow-start notification as part of the \"transfer renegotitions\".\n   *        Not recreating the Peer will result in a DTLS role conflict.\n   *    - The user receiving the transfer will negotiate the initial connection,\n   *        then will receive a slow-start notification (when Connected). Not\n   *        recreating the Peer for the slow-start results in DTLS conflict.\n   * Exception: If client has set the call option 'mediaBrokerOnly' to true, then\n   *    we don't need to recreate the call's PeerConnection.\n   */\n  const { mediaBrokerOnly } = yield select(getOptions)\n  if (!mediaBrokerOnly) {\n    log.debug(`Recreating Peer for Session ${targetCall.webrtcSessionId}.`)\n    yield call(recreatePeer, webRTC, targetCall.webrtcSessionId)\n  } else {\n    log.debug('Not recreating PeerConnection as mediaBrokerOnly is set to true in configuration.')\n  }\n  /*\n   * Decision: Whenever we receive an offer without an SDP (slow start), and\n   *    we're not locally held, respond with all media directions as sendrecv.\n   *    This is to signal what we are capable of, rather than what we want.\n   *    When we are locally held, we don't want to allow the remote side to\n   *    restart media, hence respond with media directions as inactive.\n   * This handles two (non-local hold) scenarios specifically:\n   *  1. Re-invite: We have already negotiated to perform the remote operation,\n   *      but we received a second offer (without an SDP) as a side-effect to\n   *      further update media.\n   *    Eg. Music on Hold: The remote operation is to set media to inactive,\n   *      and the re-invite updates media so we can receive the hold audio.\n   *  2. Slow start unhold: We receive an offer without an SDP, but we have no\n   *      idea what the remote operation was. If we are on remote hold, we\n   *      assume that it's a remote unhold operation.\n   */\n  const mediaDirections = {\n    audio: targetCall.localHold ? 'inactive' : 'sendrecv',\n    video: targetCall.localHold ? 'inactive' : 'sendrecv'\n  }\n\n  // Create an offer to use for responding to the slow start notification.\n  const slowOffer = yield call(generateOffer, deps, targetCall.webrtcSessionId, mediaDirections)\n\n  const callInfo = {\n    wrtcsSessionId: targetCall.wrtcsSessionId,\n    answer: slowOffer.sdp,\n    isAnonymous: targetCall.isAnonymous,\n    account: targetCall.account,\n    customParameters: targetCall.customParameters\n  }\n\n  // Respond with our \"offer\".\n  const response = yield call(requests.updateSessionResponse, callInfo)\n\n  if (response.error) {\n    // TODO: Handle this scenario (retry request or fail/revert operation?)\n    log.info('Failed to respond to slow-start remote update.', response.error)\n    return\n  }\n\n  log.info('Finished responding to slow-start remote update. Waiting on remote response.')\n  /*\n   * The operation is not complete until we receive a response to our offer. The\n   *    response will be handled by the `handleSlowUpdateResponse` saga.\n   */\n  yield put(\n    callActions.remoteSlowStart(targetCall.id, {\n      remoteParticipant: {\n        displayNumber: remoteNumber,\n        displayName: remoteName\n      }\n    })\n  )\n}\n\n/**\n * A \"call update response\" has been received and needs to be handled.\n * The response is for a local operation, so this a regular webRTC scenario.\n *\n * This saga is intended to process all \"call update responses\", that are from\n *    local operations, received from the call's remote side. The call may or\n *    may not be established at this point. This represents the end of the\n *    regular webRTC negotiation process for the local side.\n * Handling the response will affect the call's media, and the call state will\n *    be updated depending on the new media and the current call state.\n * Assumptions:\n *    1. Ensure this is a valid notification.\n *        - Call exists, Call is not ended, Call expects the response.\n *    2. The original operation was started locally.\n *        - Indicates that it was a regular negotiation process.\n * Responsibilities:\n *    1. Have the callstack process the answer SDP.\n *    2. TODO: Determine what the original operation was.\n *    3. Update call state (via redux action).\n * @method handleUpdateResponse\n * @param {Object}  deps          Dependencies that the saga uses.\n * @param {Object}  deps.webRTC   The WebRTC stack.\n * @param {Object}  deps.requests The set of platform-specific signalling functions.\n * @param  {Object} targetCall The call being acted on.\n * @param  {Object} params\n * @param  {string} params.sdp A remote answer SDP.\n * @param  {string} params.remoteName   Name of the remote participant.\n * @param  {string} params.remoteNumber Number of the remote participant.\n */\nexport function * handleUpdateResponse (deps, targetCall, params) {\n  const { sdp } = params\n\n  const log = logManager.getLogger('CALL', targetCall.id)\n  log.info('Processing remote response from regular, local update request.')\n\n  const mediaState = yield call(getMediaState, targetCall)\n  log.debug(`Current call info; State: ${targetCall.state}, MediaState: ${mediaState}.`)\n\n  // Handle the remote answer SDP.\n  const sessionInfo = { sessionId: targetCall.webrtcSessionId, answerSdp: sdp }\n  const error = yield call(receivedAnswer, deps, sessionInfo, targetCall)\n\n  if (error) {\n    log.debug('Failed to receive answer SDP', error)\n    // TODO: Better error handling.\n    yield put(\n      callActions.callAccepted(targetCall.id, {\n        state: CALL_STATES.ENDED,\n        error\n      })\n    )\n    return\n  }\n\n  const localOp = targetCall.localOp\n\n  // Update call state depending on what the current call state is.\n  if ([CALL_STATES.RINGING, CALL_STATES.INITIATED, CALL_STATES.EARLY_MEDIA].includes(targetCall.state)) {\n    log.info(`Handling state change as remote answer operation. Changing to ${CALL_STATES.CONNECTED}.`)\n    // Scenario: The call was previously ringing, so this response is a \"call\n    //    accepted\" notification. The call should now be established.\n    // It's possible that the call never entered Ringing state (from Initiated).\n    //    Handle Initiated the same as Ringing.\n    // Transition to Connected state.\n    if (localOp && localOp.status === OP_STATUS.PENDING && localOp.operation === OPERATIONS.MAKE) {\n      yield put(\n        callActions.makeCallFinish(targetCall.id, {\n          state: CALL_STATES.CONNECTED,\n          // TODO: Make sure this is the correct units\n          startTime: Date.now(),\n          // Remote participant's information.\n          remoteParticipant: {\n            displayNumber: params.remoteNumber,\n            displayName: params.remoteName\n          }\n        })\n      )\n    } else {\n      // TODO: Still need this for complex Direct Transfer & Join (remote side). Figure out a better way.\n      yield put(\n        callActions.callAccepted(targetCall.id, {\n          // TODO: Determine when we're actually \"in call\".\n          state: CALL_STATES.CONNECTED,\n          // TODO: Make sure this is the correct units\n          startTime: Date.now(),\n          // Remote participant's information.\n          remoteParticipant: {\n            displayNumber: params.remoteNumber,\n            displayName: params.remoteName\n          }\n        })\n      )\n    }\n  } else if (targetCall.state === CALL_STATES.CONNECTED || targetCall.state === CALL_STATES.ON_HOLD) {\n    // Scenario: The call was previously established, so this response is \"call\n    //    update\" notification. The call is still established.\n    // Transition to next state depending on what the operation was and the\n    //    updated media.\n    if (localOp && localOp.status === OP_STATUS.PENDING) {\n      let finishAction\n      switch (localOp.operation) {\n        case OPERATIONS.HOLD:\n          finishAction = callActions.holdCallFinish\n          break\n        case OPERATIONS.UNHOLD:\n          finishAction = callActions.unholdCallFinish\n          break\n        case OPERATIONS.ADD_BASIC_MEDIA:\n          finishAction = callActions.addMediaFinish\n          break\n        case OPERATIONS.ADD_MEDIA:\n          finishAction = callActions.addMediaFinish\n          break\n        case OPERATIONS.REMOVE_BASIC_MEDIA:\n          finishAction = callActions.removeMediaFinish\n          break\n        case OPERATIONS.REMOVE_MEDIA:\n          finishAction = callActions.removeMediaFinish\n          break\n        case OPERATIONS.RENEGOTIATE:\n          finishAction = callActions.renegotiateFinish\n          break\n      }\n      if (finishAction) {\n        log.info(\n          `Finished processing remote response to local ${localOp.operation}. Changing state based on operation.`\n        )\n        yield put(finishAction(targetCall.id, localOp.operationData))\n        return\n      }\n    }\n\n    // TODO: Leave this here for now to not break other operations. Need to update this as we convert the other operations.\n    // Determine whether the SDP has active media.\n    const mediaFlowing = yield call(hasMediaFlowing, params.sdp)\n    const nextState = mediaFlowing ? CALL_STATES.CONNECTED : CALL_STATES.ON_HOLD\n\n    log.info(`Handling state change as local midcall operation ${mediaFlowing ? 'with' : 'without'} media flowing.`)\n    log.info(`Finished processing remote response. Changing to ${nextState}.`)\n    yield put(\n      callActions.updateCall(targetCall.id, {\n        state: nextState\n      })\n    )\n  } else {\n    // Scenario: The call is in an unexpected state for receiving a remote\n    //    answer SDP. This should never happen.\n    log.error('The call is in a bad state for receiving response. Cannot update.')\n  }\n}\n\n/**\n * A \"call update response\" has been received and needs to be handled.\n * The response is for a remote operation, so this a slow start webRTC scenario.\n *\n * This saga is intended to process all \"call update responses\", that are from\n *    remote operations, received from the call's remote side. This represents\n *    the end of slow start webRTC negotiation process for the local side.\n * Handling the response will affect the call's media, and the call state will\n *    be updated depending on the new media and the current call state.\n * Assumptions:\n *    1. Ensure this is a valid notification.\n *        - Call exists, Call is not ended, Call expects the response.\n *    2. The original operation was started remotely.\n *        - Indicates that it a was slow start negotiation process.\n *        - The call has a pending remote operation.\n * Responsibilities:\n *    1. Determine what the original operation was.\n *    2. Have the callstack process the answer SDP.\n *    3. Update call state (via redux action) based on original operation.\n * @method handleSlowUpdateResponse\n * @param {Object}  deps          Dependencies that the saga uses.\n * @param {Object}  deps.webRTC   The WebRTC stack.\n * @param {Object}  deps.requests The set of platform-specific signalling functions.\n * @param  {Object} targetCall The call being acted on.\n * @param  {Object} params\n * @param  {string} params.sdp A remote answer SDP.\n * @param  {string} params.remoteName   Name of the remote participant.\n * @param  {string} params.remoteNumber Number of the remote participant.\n */\nexport function * handleSlowUpdateResponse (deps, targetCall, params) {\n  let { sdp } = params\n\n  const log = logManager.getLogger('CALL', targetCall.id)\n  log.info('Processing remote response from slow-start remote update request.')\n\n  const mediaState = yield call(getMediaState, targetCall)\n  log.debug(`Current call info; State: ${targetCall.state}, MediaState: ${mediaState}.`)\n\n  /*\n   * Determine what the remote operation was. The remote operation and our\n   *    current local state will affect how we update the call's state.\n   */\n  const session = yield call([deps.webRTC.sessionManager, 'get'], targetCall.webrtcSessionId)\n  if (!session) {\n    log.debug(`webRTC session ${targetCall.webrtcSessionId} not found.`)\n    return\n  }\n  /*\n   * Use the currently set remote SDP and the newly-received remote SDP to\n   *    determine what the remote operation was.\n   */\n  const remoteDesc = yield call([session, 'getLatestRemoteDesc'])\n  const mediaDiff = yield call(compareMedia, remoteDesc.sdp, sdp)\n\n  let remoteOp = yield call(getOperation, mediaDiff)\n  const mediaFlowing = yield call(hasMediaFlowing, sdp)\n\n  /**\n   * Special case: Assume the remote operation was actually a Hold.\n   * The operation was interpreted as \"no change\" because the remote media did\n   *    not change in the remote operation. But all media is inactive and we are\n   *    in a Local Hold state. This means that the previous media was inactive\n   *    because of our local hold. So the new media being inactive is a change\n   *    that was done on the remote side, ie. it was actually a remote hold.\n   */\n  if (remoteOp === 'NO_CHANGE' && !mediaFlowing && mediaState === CALL_MEDIA_STATES.LOCAL_HOLD) {\n    remoteOp = OPERATIONS.HOLD\n    log.debug(`Interpreting NO_CHANGE operation as ${remoteOp} due to ${mediaState} state.`)\n  }\n\n  log.info(`Handling state change as remote ${remoteOp} in ${mediaState} scenario.`)\n\n  /*\n   * If the remote operation was an unhold and we're in a dual hold scenario,\n   *    then make sure the remote SDP can't restart media. Do this by ensuring\n   *    that all media directions in the remote SDP are inactive.\n   *\n   * This won't affect the remote end, but it prevents the local side from\n   *    thinking it is receiving a track when it shouldn't be.\n   *\n   * This can occur during slow start renegotiation, if the server doesn't\n   *    respect the media directions we set (assuming we set them correctly).\n   */\n  if (remoteOp === OPERATIONS.UNHOLD && targetCall.localHold === true) {\n    const undesired = ['sendrecv', 'sendonly', 'recvonly']\n    // If any undesirable direction is found in the SDP, replace it with inactive.\n    if (undesired.some(dir => sdp.includes(dir))) {\n      log.debug('Modifying remote SDP to prevent media in local hold scenario.')\n      sdp = sdp.replace(/sendrecv|sendonly|recvonly/gi, 'inactive')\n    }\n  }\n\n  // Handle the remote answer SDP.\n  const sessionInfo = { sessionId: targetCall.webrtcSessionId, answerSdp: sdp }\n  const error = yield call(receivedAnswer, deps, sessionInfo, targetCall)\n\n  if (error) {\n    log.debug('Failed to receive answer SDP', error)\n    // TODO: Dispatch an error action to notify of the error scenario.\n    // The call may now be in a bad state and needs to be fixed.\n    return\n  }\n\n  if (targetCall.state === CALL_STATES.CONNECTED || targetCall.state === CALL_STATES.ON_HOLD) {\n    const callAction = yield call(getCallAction, remoteOp)\n    const nextState = mediaFlowing ? CALL_STATES.CONNECTED : CALL_STATES.ON_HOLD\n\n    log.info(`Finished processing remote slow-start response. Changing to ${nextState}.`)\n    yield put(\n      callAction(targetCall.id, {\n        state: nextState,\n        // Remote participant's information.\n        remoteParticipant: {\n          displayNumber: params.remoteNumber,\n          displayName: params.remoteName\n        }\n      })\n    )\n  } else {\n    // Scenario: The call is in an unexpected state for receiving a remote\n    //    answer SDP. This should never happen.\n    log.error('The call is in a bad state for receiving response. Cannot update.')\n  }\n}\n\n/**\n * Helper function that returns a call action function based on the\n * remote operation being requested\n * TODO: Move this somewhere better.\n * TODO: Do this differently / better.\n * @method getCallAction\n * @param (string) remoteOp Remote operation being requested\n * @returns {function} A redux action creator\n */\nexport function * getCallAction (remoteOp) {\n  // Determine what redux action the operation represents.\n  switch (remoteOp) {\n    case OPERATIONS.HOLD:\n      return callActions.remoteHoldFinish\n    case OPERATIONS.UNHOLD:\n      return callActions.remoteUnholdFinish\n    case OPERATIONS.ADD_MEDIA:\n      return callActions.remoteAddMediaFinish\n    case OPERATIONS.REMOVE_MEDIA:\n      return callActions.remoteRemoveMediaFinish\n    case OPERATIONS.START_MOH:\n      return callActions.remoteStartMohFinish\n    case OPERATIONS.STOP_MOH:\n      return callActions.remoteStopMohFinish\n    case OPERATIONS.SLOW_START:\n      return callActions.remoteSlowStart\n  }\n\n  log.debug(`Call action for ${remoteOp} not known; using generic action.`)\n  return callActions.updateCall\n}\n","/**\n * \"Notification sagas\" handle received notifications.\n * Each saga handles a single websocket notification that may be received from\n *    the backend.\n *\n * There may not be an established webRTC session for these sagas. This may be\n *    because (1) the notification is a new incoming call, or (2) there is a\n *    de-sync between SDK state and server state. This may or may not be\n *    considered as an error scenario (eg. a \"call ended\" notification for a\n *    call the SDK doesn't know about may be safely ignored).\n */\n\n// Call plugin.\nimport { callActions } from '../../call/interfaceNew/actions'\nimport { getOptions, getTurnInfo, getCallByWrtcsSessionId } from '../../call/interfaceNew/selectors'\nimport { CALL_STATES, COMPLEX_OPERATION_MESSAGES, STATUS_CODES } from '../../call/constants'\nimport { OPERATIONS, OP_STATUS } from '../../call/interfaceNew/constants'\n\n// Callstack plugin.\nimport * as negotiation from './negotiation'\nimport runPipeline from '../sdp/pipeline'\n\n// Other plugins\nimport { logManager } from '../../logs'\nimport { setupIncomingCall } from '../webrtc/establish'\nimport { closeCall } from '../webrtc/midcall'\nimport BasicError, { callCodes } from '../../errors'\n\n// Libraries.\nimport { call, put, select } from 'redux-saga/effects'\nimport { v4 as uuidV4 } from 'uuid'\n\n// Helpers\n// TODO: Move this to a shared location.\nimport { validateCallState } from '../../call/cpaas/utils'\nimport { generateEndParams } from '../utils/index.js'\n\n/**\n * A \"call incoming\" notification has been received and needs to be handled.\n *\n * This saga is intended to be the entry point for all \"call incoming\"\n *    notifications. A \"call incoming\" notification is the initial offer to\n *    establish a call with a remote endpoint. It represents the start of both\n *    the call flow and webRTC negotiation process for the local side.\n * Handling the notification will create a new call in state.\n * Responsibilities:\n *    1. Have the callstack perform the required webRTC negotiation process.\n *        - Regular or Slow Start negotiation.\n *    2. Respond that the call has been received (ie. ringing).\n *    3. Create call state (via redux action).\n * @method incomingCall\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   deps.requests The set of platform-specific signalling functions.\n * @param {Function} deps.requests.updateCallRinging \"Update call\" signalling function.\n * @param {Object}   params        Parameters describing the incoming call.\n * @param {string}   [params.sdp]  The remote SDP offer included with the notification (if any).\n * @param {string}   params.wrtcsSessionId ID that the server uses to identify the session.\n * @param {string}   params.remoteNumber   Number of the remote participant.\n * @param {string}   params.remoteName     Display name of the remote participant.\n * @param {string}   params.calleeNumber  Number of the intended call recipient\n */\nexport function * incomingCall (deps, params) {\n  const requests = deps.requests\n  const { sdp, wrtcsSessionId, remoteNumber, remoteName, calleeNumber, customParameters } = params\n\n  const callId = yield call(uuidV4)\n\n  const log = logManager.getLogger('CALL', callId)\n  log.info('Received new incoming call; initiating.', { wrtcsSessionId })\n\n  // Dispatch the action right away so the call is in state at this point.\n  yield put(\n    callActions.callIncoming(callId, {\n      // TODO: Proper constants.\n      direction: 'incoming',\n      state: CALL_STATES.INITIATING,\n      remoteParticipant: {\n        displayName: remoteName,\n        displayNumber: remoteNumber\n      },\n      to: calleeNumber,\n      // Number of the remote participant when the call was established.\n      from: remoteNumber,\n      // The ID that the backend uses to track this webRTC session.\n      wrtcsSessionId,\n\n      // Whether the call was received as a slow start call or not.\n      isSlowStart: !sdp\n    })\n  )\n\n  // Dispatch a custom parameters received action/event if any custom parameters were received as part of the notification\n  if (customParameters) {\n    const customNames = customParameters.map(param => param.name)\n    log.debug(`Recevied custom parameters as part of the Call: ${customNames}.`)\n    yield put(\n      callActions.customParametersReceived(callId, {\n        customParameters\n      })\n    )\n  }\n\n  /**\n   * An incoming call may or may not have an SDP offer associated with it.\n   * If it has an SDP, then it is a \"regular\" call scenario and can be handled\n   *    as a normal webRTC negotiation.\n   * If it has no SDP, then it is a \"slow start\" call scenario. In a slow start\n   *    scenario, the signaling server acts as a webRTC-middleman, requiring\n   *    both sides to provide it with offers and generating the answers itself.\n   */\n  if (sdp) {\n    // Regular call.\n    const turnInfo = yield select(getTurnInfo)\n    const callOptions = yield select(getOptions)\n\n    // Since we have the remote offer SDP, we can setup a webRTC session.\n    yield call(setupIncomingCall, deps, {\n      offer: {\n        sdp,\n        type: 'offer'\n      },\n      trickleIceMode: callOptions.trickleIceMode,\n      sdpSemantics: callOptions.sdpSemantics,\n      iceCollectionDelay: callOptions.iceCollectionDelay,\n      iceCollectionCheck: callOptions.iceCollectionCheck,\n      maxIceTimeout: callOptions.maxIceTimeout,\n      turnInfo,\n      callId,\n      removeBundling: callOptions.removeBundling\n    })\n  } else {\n    log.debug('Incoming call is a slow-start call.')\n    // Slow start call.\n    /*\n     * We can't setup a webRTC session yet because generating an offer requires\n     *   media constraints. We need to wait until the application provides\n     *   media information before we can setup the call.\n     */\n  }\n\n  // Send update that the wrtcsSessionStatus is 'Ringing'\n  const callInfo = { wrtcsSessionId, id: callId }\n  const updateStatusResponse = yield call(requests.updateCallRinging, callInfo)\n\n  if (updateStatusResponse.error) {\n    log.error(\n      `Error: Update session status error - ${updateStatusResponse.error.code}: ${updateStatusResponse.error.message}.`\n    )\n  }\n\n  log.info(`Finished initiating incoming call. Changing to ${CALL_STATES.RINGING} and waiting on local answer.`)\n  yield put(\n    callActions.callRinging(callId, {\n      state: CALL_STATES.RINGING\n    })\n  )\n}\n\n/**\n * A \"call request\" notification has been received for an established call\n *    and needs to be handled.\n *\n * This saga is intended to be the entry point for all \"call request\"\n *    notifications received from the call's remote side. This does not include\n *    \"call incoming\" notifications, and so it is assumed the call has already\n *    been established. A \"call request\" notification is the offer from a remote\n *    operation, and so represents the start of the webRTC renegotiation process\n *    for the local side.\n * This saga does not handle the request itself. It determines if it should be\n *    handled and what process is needed to handle it.\n * Responsibilities:\n *    1. Ensure this is a valid request notification.\n *        - Call exists, Call is not ended, TODO: Call is able to receive a request.\n *    2. Determine how the request should be handled.\n *        - Regular or slow start negotiation process.\n *    3. Pass the request off to the appropriate handler.\n * @method parseCallRequest\n * @param {Object} deps         Dependencies that the saga uses.\n * @param {Object} params       Parameters describing the incoming call.\n * @param {string} [params.sdp] The remote SDP offer included with the notification (if any).\n * @param {string} params.wrtcsSessionId ID that the server uses to identify the session.\n * @param {string} params.remoteName   Name of the remote participant.\n * @param {string} params.remoteNumber Number of the remote participant.\n */\nexport function * parseCallRequest (deps, params) {\n  const { wrtcsSessionId, sdp, remoteName, remoteNumber, customParameters } = params\n  const targetCall = yield select(getCallByWrtcsSessionId, wrtcsSessionId)\n\n  const log = logManager.getLogger('CALL', (targetCall || {}).id)\n  log.info('Received new update call request; handling.', { wrtcsSessionId })\n\n  if (!targetCall) {\n    // Scenario: No call is associated with the wrtcsSessionId.\n    log.info('Update request is for unknown wrtcsSession. Ignoring.', { wrtcsSessionId })\n    return\n  } else if (targetCall.state === CALL_STATES.ENDED) {\n    // Scenario: The associated call is ended, and should not have an active\n    //    webRTC session.\n    log.info('Update request is for ended call. Ignoring.', { wrtcsSessionId })\n    return\n  }\n  // TODO: Make sure the call is able to receive a `respondCallRequest`\n  //    notification (ie. has no pending operation).\n  log.debug(`Update request ${sdp ? 'with' : 'without'} SDP for call. Processing.`)\n\n  // Dispatch a custom parameters received action/event if any custom parameters were received as part of the notification\n  if (customParameters) {\n    const customNames = customParameters.map(param => param.name)\n    log.debug(`Recevied custom parameters as part of the Call: ${customNames}.`)\n    yield put(\n      callActions.customParametersReceived(targetCall.id, {\n        customParameters\n      })\n    )\n  }\n\n  /**\n   * How the request should be handled depends on whether it includes an SDP.\n   *    - SDP: Regular webRTC negotiation.\n   *    - No SDP: Slow start webRTC negotiation.\n   */\n  if (sdp) {\n    yield call(negotiation.handleUpdateRequest, deps, targetCall, { sdp, remoteNumber, remoteName })\n  } else {\n    yield call(negotiation.handleSlowUpdateRequest, deps, targetCall, { remoteNumber, remoteName })\n  }\n}\n\n/**\n * A \"call response\" notification has been received and needs to be handled.\n *\n * This saga is intended to be the entry point for all \"call response\"\n *    notifications received from the call's remote side. A \"call response\"\n *    notification is the answer to an operation that was previously\n *    performed (a \"call request\"), and so represents the last step in the\n *    webRTC negotiation process.\n * This saga does not handle the response itself. It determines if it should be\n *    handled and what process is needed to handle it.\n * Responsibilities:\n *    1. Ensure this is a valid notification.\n *        - Call exists, Call is not ended, TODO: Call expects the response.\n *    2. Determine what negotiation process the response is from.\n *        - Regular or slow start negotiation process.\n *    3. Pass the request off to the appropriate handler.\n * @method parseCallResponse\n * @param  {Object} webRTC The webRTC stack.\n * @param {Object} deps         Dependencies that the saga uses.\n * @param {Object} params       Parameters describing the incoming call.\n * @param {string} [params.sdp] The remote SDP offer included with the notification (if any).\n * @param {string} params.wrtcsSessionId ID that the server uses to identify the session.\n * @param {string} params.remoteName   Name of the remote participant.\n * @param {string} params.remoteNumber Number of the remote participant.\n */\nexport function * parseCallResponse (deps, params) {\n  const { wrtcsSessionId, sdp, customParameters } = params\n  const targetCall = yield select(getCallByWrtcsSessionId, wrtcsSessionId)\n\n  const log = logManager.getLogger('CALL', (targetCall || {}).id)\n  log.info('Received new update call response; handling.', { wrtcsSessionId })\n\n  if (!targetCall) {\n    // Scenario: The notification is about a call that state does not know about.\n    //    Ignore the notification.\n    log.info('Update response for unknown wrtcsSession. Ignoring.', { wrtcsSessionId })\n    return\n  } else if (targetCall.state === CALL_STATES.ENDED) {\n    const log = logManager.getLogger('CALL', targetCall.id)\n    // Scenario: The notification is about a call that state says is ended.\n    //    Ignore the notification, since ended calls should not have an active\n    //    webRTC Session.\n    log.info('Update response for ended call. Ignoring.', { wrtcsSessionId })\n    return\n  }\n  // TODO: Make sure the call is expecting a `respondCallUpdate` notification.\n  //    ie. has a pending operation.\n\n  // Dispatch a custom parameters received action/event if any custom parameters were received as part of the notification\n  if (customParameters) {\n    const customNames = customParameters.map(param => param.name)\n    log.debug(`Recevied custom parameters as part of the Call: ${customNames}.`)\n    yield put(\n      callActions.customParametersReceived(targetCall.id, {\n        customParameters\n      })\n    )\n  }\n\n  /**\n   * Check that the notification was not an \"error\" notification.\n   * Status code 49 with a `retryAfter` value indicates the original operation\n   *    failed (likely glare condition) and the SDK should retry the operation.\n   * TODO: This check is currently Link-specific. Depending on how CPaaS\n   *    indicates a failed/glare operation, either standardize this check or\n   *    move this into Link-specific saga.\n   */\n  if (!sdp && params.code === 49 && params.retryAfter) {\n    // TODO: Properly handle this scenario. The call may be in a bad state\n    //    because we set an offer but not an answer. May need to revert\n    //    signaling state and/or re-perform operation internally.\n    // For now, fail loudly and abort the operation to prevent crashes. The\n    //    negotiation sagas expect there to be an SDP.\n    // The call state will be left in a broken state because of KAA-1607.\n    log.error(`Response indicates an error scenario (${params.message}). Aborting operation.`)\n    return\n  }\n\n  /**\n   * Determine if the original operation was done locally or remotely. This\n   *    indicates whether it was regular or slow start negotiation.\n   * If it was from a remote slow start operation, it will be tracked in the\n   *    call state.\n   */\n  if (targetCall.remoteOp && targetCall.remoteOp.operation === OPERATIONS.SLOW_START) {\n    yield call(negotiation.handleSlowUpdateResponse, deps, targetCall, params)\n  } else {\n    yield call(negotiation.handleUpdateResponse, deps, targetCall, params)\n  }\n}\n\n/**\n * A call status notification indicating other session has ended has been received and needs to be handled.\n *\n * This saga is intended to handle the call status notifications that indicates a call has ended.\n * This notification means that the session has ended on the other side and we need to end our session as well.\n * Handling the notification will cleanup the session's media and puts the call in ENDED state.\n * Responsibilities:\n *    1. Have the callstack perform the required webRTC cleanup process.\n *    2. Update call state to ENDED (via redux action).\n * @method callStatusUpdateEnded\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   params        Parameters describing the incoming call.\n * @param {string}   params.wrtcsSessionId ID that the server uses to identify the session.\n * @param {string}   [params.reasonText]   Human-readable explanation for the call change.\n * @param {string}   [params.statusCode]     Code representing the reason for the call change.\n */\nexport function * callStatusUpdateEnded (deps, params) {\n  const { wrtcsSessionId, reasonText, statusCode } = params\n  const currentCall = yield select(getCallByWrtcsSessionId, wrtcsSessionId)\n\n  const log = logManager.getLogger('CALL', (currentCall || {}).id)\n  log.info('Received call status ended notice; handling.', { wrtcsSessionId })\n\n  if (!currentCall) {\n    log.info('Call ended notice for unknown wrtcsSession. Ignoring.', { wrtcsSessionId })\n    return\n  }\n\n  // Make sure the call state is what we expect\n  const stateError = yield call(validateCallState, currentCall.id, {})\n  if (stateError) {\n    log.info('Call ended notice for unknown Call. Ignoring.')\n    return\n  }\n\n  if (currentCall.state === CALL_STATES.ENDED) {\n    log.info('Call ended notice for already Ended call. Ignoring.', { wrtcsSessionId })\n    return\n  }\n\n  log.debug(`Call ended notice caused by ${reasonText} (Status Code: ${statusCode}).`)\n\n  // Close the local webRTC session\n  yield call(closeCall, deps.webRTC, currentCall.webrtcSessionId)\n\n  log.info(`Finished handling call ended notice. Changing to ${CALL_STATES.ENDED}.`)\n  // TODO: Don't expose these directly. Create our own convention so that transition data\n  //       can be consistent across different operations.\n  yield put(callActions.endCallFinish(currentCall.id, generateEndParams(currentCall.state, false, params)))\n}\n\n/**\n * This saga is intended to handle the call status notifications that indicates a session has completed.\n * A session has completed (in this context) means completing a midcall operation such as:\n *\n * - direct transfer\n * - consultative transfer\n * - join\n * , where user A transfered user B to user C.\n *\n * For the direct & consultative transfer operations, the 'sessionComplete' notification\n * will just refer to the original call between: A<->B, which has now completed.\n * Therefore this saga will send a 'DELETE' REST request to inform backend to tear down\n * this particular original call.\n *\n * Note that for the other original call, which is A<->C, server already knows\n * that it has ended and callStatusUpdateEnded saga (above) already handles it by simply\n * marking it locally as ended (i.e. in local Redux state). Therefore there is no need\n * to send any 'DELETE' REST request for A<->C call.\n *\n * For the join operation, SDK will receive two separate 'sessionComplete' notifications from backend.\n * Therefore this saga will send two 'DELETE' REST requests to inform backend to tear down those\n * two original calls.\n *\n * @method sessionStatusUpdateEnded\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   deps.requests The set of platform-specific signalling functions.\n * @param {Object}   params        Parameters describing the incoming call.\n * @param {string}   params.wrtcsSessionId ID that the server uses to identify the session.\n * @param {string}   [params.reasonText]   Human-readable explanation for the call change.\n * @param {string}   [params.statusCode]     Code representing the reason for the call change.\n */\nexport function * sessionStatusUpdateEnded (deps, params) {\n  const { wrtcsSessionId, reasonText, statusCode } = params\n  const requests = deps.requests\n\n  const currentCall = yield select(getCallByWrtcsSessionId, wrtcsSessionId)\n\n  const log = logManager.getLogger('CALL', (currentCall || {}).id)\n\n  // Make sure the call state is what we expect\n  const stateError = yield call(validateCallState, currentCall.id, {})\n  if (stateError) {\n    log.info('Session completed notice for unknown Call. Ignoring.')\n    return\n  }\n\n  log.info('Received session status completed notice; handling.', { wrtcsSessionId })\n\n  if (reasonText) {\n    let customStatusCode = statusCode\n    if (!statusCode && statusCode !== 0) {\n      if (reasonText === COMPLEX_OPERATION_MESSAGES.DIRECT_TRANSFER_SUCCESS) {\n        customStatusCode = STATUS_CODES.DIRECT_TRANSFER_SUCCESS\n      } else if (reasonText === COMPLEX_OPERATION_MESSAGES.CONSULTATIVE_TRANSFER_SUCCESS) {\n        customStatusCode = STATUS_CODES.CONSULTATIVE_TRANSFER_SUCCESS\n      } else if (reasonText === COMPLEX_OPERATION_MESSAGES.JOIN_SUCCESS) {\n        customStatusCode = STATUS_CODES.JOIN_SUCCESS\n      }\n    }\n    log.debug(`Session completed notice caused by ${reasonText} (${customStatusCode}).`)\n  }\n\n  log.info(`Ending webRTC session with id: ${currentCall.webrtcSessionId}, locally ...`)\n\n  // Close the local webRTC session\n  yield call(closeCall, deps.webRTC, currentCall.webrtcSessionId)\n\n  const localOp = currentCall.localOp\n  if (localOp && localOp.operation && localOp.status === OP_STATUS.PENDING) {\n    let transition\n    let finishAction\n    switch (localOp.operation) {\n      case OPERATIONS.DIRECT_TRANSFER:\n        finishAction = callActions.directTransferFinish\n        transition = {\n          reasonText: COMPLEX_OPERATION_MESSAGES.DIRECT_TRANSFER_SUCCESS,\n          statusCode: STATUS_CODES.DIRECT_TRANSFER_SUCCESS\n        }\n        break\n      case OPERATIONS.CONSULTATIVE_TRANSFER:\n        finishAction = callActions.consultativeTransferFinish\n        transition = {\n          reasonText: COMPLEX_OPERATION_MESSAGES.CONSULTATIVE_TRANSFER_SUCCESS,\n          statusCode: STATUS_CODES.CONSULTATIVE_TRANSFER_SUCCESS\n        }\n        break\n      case OPERATIONS.JOIN:\n        finishAction = callActions.joinFinish\n        transition = {\n          reasonText: COMPLEX_OPERATION_MESSAGES.JOIN_SUCCESS,\n          statusCode: STATUS_CODES.JOIN_SUCCESS\n        }\n        break\n    }\n    if (finishAction) {\n      log.debug('Marking call locally as ended. Call ID: ', currentCall.id)\n\n      yield put(finishAction(currentCall.id, { transition }))\n\n      // We also need to notify the backend that call with currentCall.id should be removed\n      // by sending a DELETE REST request.\n      // Perform signalling to end the session on server's side.\n      const isAnonymous = currentCall.isAnonymous\n      const account = currentCall.account\n      log.info('Ending call by requesting to be removed from backend ...')\n      const response = yield call(requests.endSession, { wrtcsSessionId, isAnonymous, account })\n\n      if (!response.error) {\n        log.info(`Finished ending call. Changing call state to ${CALL_STATES.ENDED}.`)\n        yield put(callActions.endCallFinish(currentCall.id, generateEndParams(currentCall.state, true, params)))\n      } else {\n        log.debug(\n          `Error received when attempting to end the session: ${response.error}. Changing call state to ${CALL_STATES.ENDED}.`\n        )\n        yield put(\n          callActions.endCallFinish(currentCall.id, {\n            isLocal: true,\n            error: response.error\n          })\n        )\n      }\n    }\n  }\n}\n\n/**\n * A \"call status update\" has been received and needs to be handled.\n * The update specifies the server session is in \"ringing\" state.\n *\n * This saga handles the \"call ringing\" notification by updating the local\n *    session state to match the server session state. This only affects the\n *    local call state.\n * Responsibilities:\n *    1. Update call state to RINGING (via redux action).\n * @method callStatusUpdateRinging\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   params        Parameters describing the incoming call.\n * @param {string}   params.wrtcsSessionId ID that the server uses to identify the session.\n * @param {string}   params.remoteName   Name of the remote participant.\n * @param {string}   params.remoteNumber Number of the remote participant.\n */\nexport function * callStatusUpdateRinging (deps, params) {\n  const { wrtcsSessionId, customParameters } = params\n  const currentCall = yield select(getCallByWrtcsSessionId, wrtcsSessionId)\n\n  const log = logManager.getLogger('CALL', (currentCall || {}).id)\n  log.info('Received call status ringing notice; handling.', { wrtcsSessionId })\n\n  if (!currentCall) {\n    log.info('Call ringing notice for unknown wrtcsSession. Ignoring.', { wrtcsSessionId })\n    return\n  }\n\n  // Make sure the call state is what we expect\n  const stateError = yield call(validateCallState, currentCall.id, { state: CALL_STATES.INITIATED })\n  if (stateError) {\n    log.info(`Call ringing notice for Call in an invalid state: ${stateError.message}. Ignoring.`)\n    return\n  }\n\n  // Dispatch a custom parameters received action/event if any custom parameters were received as part of the notification\n  if (customParameters) {\n    const customNames = customParameters.map(param => param.name)\n    log.debug(`Recevied custom parameters as part of the Call: ${customNames}.`)\n    yield put(\n      callActions.customParametersReceived(currentCall.id, {\n        customParameters\n      })\n    )\n  }\n\n  log.info(`Finished handling call ringing notice. Changing to ${CALL_STATES.RINGING}.`)\n  yield put(\n    callActions.callRinging(currentCall.id, {\n      // Remote participant's information.\n      remoteParticipant: {\n        displayNumber: params.remoteNumber,\n        displayName: params.remoteName\n      }\n    })\n  )\n}\n\n/**\n * A call status notification indicating that an operation has failed and needs to be handled.\n *\n * This saga handles the \"session fail\" notification by generating a transition object\n *    containing proper statusCode and reasonText and removing the current pending operation.\n * Responsibilities:\n *    1. Generate transition object containing proper statusCode and reasonText depending on pending operation.\n * @method callStatusUpdateFailed\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   params        Parameters describing the incoming call.\n * @param {string}   params.wrtcsSessionId ID that the server uses to identify the session.\n */\nexport function * callStatusUpdateFailed (deps, params) {\n  const { wrtcsSessionId, reasonText, statusCode } = params\n  const currentCall = yield select(getCallByWrtcsSessionId, wrtcsSessionId)\n\n  const log = logManager.getLogger('CALL', (currentCall || {}).id)\n  log.info('Received call operation failed notice; handling.', { wrtcsSessionId })\n\n  if (!currentCall) {\n    log.info('Call operation failed notice for unknown wrtcsSession. Ignoring.', { wrtcsSessionId })\n    return\n  }\n\n  const localOp = currentCall.localOp\n  if (localOp && localOp.operation && localOp.status === OP_STATUS.PENDING) {\n    let transition\n    let finishAction\n    switch (localOp.operation) {\n      case OPERATIONS.DIRECT_TRANSFER:\n        finishAction = callActions.directTransferFinish\n        // TODO: May or may not need this when generic operation event is setup.\n        transition = {\n          reasonText: reasonText || COMPLEX_OPERATION_MESSAGES.DIRECT_TRANSFER_FAILURE,\n          statusCode: statusCode || STATUS_CODES.DIRECT_TRANSFER_FAILURE\n        }\n        break\n      case OPERATIONS.CONSULTATIVE_TRANSFER:\n        finishAction = callActions.consultativeTransferFinish\n        transition = {\n          reasonText: reasonText || COMPLEX_OPERATION_MESSAGES.CONSULTATIVE_TRANSFER_FAILURE,\n          statusCode: statusCode || STATUS_CODES.CONSULTATIVE_TRANSFER_FAILURE\n        }\n        break\n      case OPERATIONS.JOIN:\n        finishAction = callActions.joinFinish\n        transition = {\n          reasonText: reasonText || COMPLEX_OPERATION_MESSAGES.JOIN_FAILURE,\n          statusCode: statusCode || STATUS_CODES.JOIN_FAILURE\n        }\n        break\n    }\n    log.debug(`Processing as a local ${localOp.operation} failure (${transition.statusCode}).`)\n\n    if (finishAction) {\n      log.info('Finished handling call operation failed notice.')\n      yield put(\n        finishAction(currentCall.id, {\n          error: new BasicError({\n            message: `Operation ${localOp.operation} failed.`,\n            code: callCodes.GENERIC_ERROR\n          }),\n          transition\n        })\n      )\n      return\n    }\n  }\n\n  yield put(callActions.updateCall(currentCall.id))\n}\n\n/**\n * A \"call cancelled\" notification needs to be handled.\n *\n * A call can be \"cancelled\" for different reasons. In general, it means that\n *    the call was not established (locally) but it is no longer available for\n *    the user to respond. For example, it may have been answered on another\n *    device, or the caller may have ended it while it was ringing.\n *\n * The call is cancelled locally by cleaning up any/all Webrtc resources and\n *    changing the call state to indicate it was cancelled.\n *\n * @method callCancelled\n * @param {Object} deps         Dependencies that the saga uses.\n * @param {Object} deps.webRTC  The WebRTC stack.\n * @param {Object} params       Parameters describing the notification.\n */\nexport function * callCancelled (deps, params) {\n  const { wrtcsSessionId } = params\n  const targetCall = yield select(getCallByWrtcsSessionId, wrtcsSessionId)\n\n  const log = logManager.getLogger('CALL', (targetCall || {}).id)\n  log.info('Received call cancelled notice; handling.', { wrtcsSessionId })\n\n  if (!targetCall) {\n    log.info('Call cancelled notice for unknown wrtcsSession. Ignoring.', { wrtcsSessionId })\n    return\n  } else if ([CALL_STATES.ENDED, CALL_STATES.CANCELLED].includes(targetCall.state)) {\n    log.info(`Call cancelled notice for already ${targetCall.state} call. Ignoring.`, { wrtcsSessionId })\n    return\n  }\n\n  // Clean up the Webrtc portion of the Call.\n  yield call(closeCall, deps.webRTC, targetCall.webrtcSessionId)\n\n  log.info(`Finished handling call cancelled notice. Changing to ${CALL_STATES.CANCELLED}.`)\n  // Dispatch an action to handle the redux portion of the Call.\n  yield put(callActions.callCancelled(targetCall.id))\n}\n\n/**\n * A \"session progress\" notification has been received. It contains an \"early\n *    media\" SDP (pranswer) that needs to be processed.\n *\n * Processing a pranswer is done by:\n *    1. Validating the Call / Session.\n *    2. Running the SDP through the SDP pipeline.\n *    3. Setting the SDP as the Session's remote description (as pranswer).\n *    4. Updating the Call state.\n *\n * @method receiveEarlyMedia\n * @param {Object} deps         Dependencies that the saga uses.\n * @param {Object} deps.webRTC  The WebRTC stack.\n * @param {Object} params       Parameters describing the notification.\n */\nexport function * receiveEarlyMedia (deps, params) {\n  const { wrtcsSessionId, customParameters } = params\n  const { webRTC } = deps\n\n  /**\n   * Get the call from state.\n   */\n  const currentCall = yield select(getCallByWrtcsSessionId, wrtcsSessionId)\n\n  const log = logManager.getLogger('CALL', (currentCall || {}).id)\n  log.info('Received early media notice; handling.', { wrtcsSessionId })\n\n  if (!currentCall) {\n    log.info('Early media notice for unknown wrtcsSession. Ignoring.', { wrtcsSessionId })\n    return\n  }\n\n  /**\n   * Get the Webrtc Session.\n   */\n  const session = yield call([webRTC.sessionManager, 'get'], currentCall.webrtcSessionId)\n  if (!session) {\n    log.info('Early media notice for missing wrtcsSession. Ignoring.', { wrtcsSessionId })\n    // TODO: Better error.\n    return\n  }\n\n  // Dispatch a custom parameters received action/event if any custom parameters were received as part of the notification\n  if (customParameters) {\n    const customNames = customParameters.map(param => param.name)\n    log.debug(`Recevied custom parameters as part of the Call: ${customNames}.`)\n    yield put(\n      callActions.customParametersReceived(currentCall.id, {\n        customParameters\n      })\n    )\n  }\n\n  try {\n    /*\n     * Run the remote SDP pranswer through any SDP handlers provided, then set it\n     *    as the Session's remote description.\n     * This is the \"pre set remote\" stage.\n     */\n    const callConfigOptions = yield select(getOptions)\n    const sdp = yield call(runPipeline, callConfigOptions.sdpHandlers, params.sdp, {\n      callId: currentCall.id,\n      type: 'pranswer',\n      step: 'set',\n      endpoint: 'remote'\n    })\n    yield call([session, 'processAnswer'], {\n      type: 'pranswer',\n      sdp: sdp\n    })\n  } catch (err) {\n    log.debug(`Failed to process pranswer for Call ${currentCall.id}; ignoring.`)\n    return\n  }\n\n  log.info(`Finished handling early media notice. Changing to ${CALL_STATES.EARLY_MEDIA}.`)\n  yield put(\n    callActions.sessionProgress(currentCall.id, {\n      // Remote participant's information.\n      remoteParticipant: {\n        displayNumber: params.remoteNumber,\n        displayName: params.remoteName\n      }\n    })\n  )\n}\n","// Call plugin.\nimport { callActions } from '../../call/interfaceNew/actions'\nimport * as actionTypes from '../../call/interfaceNew/actionTypes'\nimport { getCallById, getCalls, getOptions } from '../../call/interfaceNew/selectors'\nimport { CALL_STATES } from '../../call/constants'\n\n// Callstack plugin.\nimport { closeCall } from '../webrtc/midcall'\n\n// Other plugins.\nimport { logManager } from '../../logs'\n\n// Libraries.\nimport { all, call, put, select, delay } from 'redux-saga/effects'\n\n/**\n * Sends a call audit.\n *\n * This saga defines how/when a call audit is sent. It performs the signaling\n *    operations to audit the session on the server. There are no local webRTC\n *    operations involved.\n * Audits are sent in a loop. The saga receives the context of the call from\n *    the previous audit loop. It uses that to know if the loop should continue\n *    or not.\n * Assumptions:\n *    1. None.\n * Responsibilities:\n *    1. Determine if an audit should be sent.\n *        - Both the server or local sessions are on-going.\n *    2. Perform signaling (if needed).\n *    3. Dispatch \"call audit\" action.\n *        - Triggers the next loop. Includes info about the call context.\n * @method sendCallAudit\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   deps.requests The set of platform-specific signalling functions.\n * @param {Function} deps.requests.auditCall \"Call audit\" signalling function.\n * @param {Object}   action        The action that triggered the audit.\n */\nexport function * sendCallAudit (deps, action) {\n  const { webRTC, requests } = deps\n\n  const { error, id, status } = action.payload\n  const log = logManager.getLogger('CALL', id)\n  const delayMs = error ? 5000 : 25000\n\n  yield delay(delayMs)\n  const currentCall = yield select(getCallById, id)\n\n  // Some basic validation\n  if (!currentCall) {\n    log.info('Call not found; stopping audit loop.')\n    return\n  }\n  // CALL_ACCEPTED actions should only trigger an audit loop if it is a joined call\n  if (action.type === actionTypes.CALL_ACCEPTED && !currentCall.isJoinedCall) {\n    return\n  }\n\n  if (currentCall.state === CALL_STATES.ENDED) {\n    log.info('Call has ended; stopping audit loop.')\n    return\n  }\n\n  // If we get here, we know we have an active call. Just log our next intent...\n  if (!status) {\n    // If the action has no status, then the call starting triggered this audit.\n    log.info('Starting audit loop for new call.')\n  } else if (status === 'Retry') {\n    // If the previous audit failed for an unknown reason, retry it.\n    log.debug('Call status is \"Unknown\"; retrying failed audit for call.')\n  }\n\n  log.info('Sending call audit.')\n  // Send our audit request\n  const updateStatusResponse = yield call(requests.auditCall, {\n    wrtcsSessionId: currentCall.wrtcsSessionId,\n    isAnonymous: currentCall.isAnonymous,\n    account: currentCall.account\n  })\n\n  // Schedule for another audit request\n  if (updateStatusResponse.error) {\n    // We have an error but status is not Closed, so we continue sending audit request in hoping audit will recover\n    const { message, code } = updateStatusResponse.error\n    log.debug(`Call audit failed, caused by ${message} (${code}).`)\n    yield put(\n      callActions.sendCallAudit(id, {\n        error: updateStatusResponse.error,\n        status: updateStatusResponse.status\n      })\n    )\n  } else {\n    log.debug(`Call audit status is ${updateStatusResponse.status}.`)\n    yield put(callActions.sendCallAudit(id, { status: updateStatusResponse.status }))\n  }\n\n  if (updateStatusResponse.status === 'Closed') {\n    // If this audit returned 'Closed', then the audit loop should stop right away.\n    log.info(`Ending audit loop and Call due to Closed status. Changing to ${CALL_STATES.ENDED}.`)\n\n    // Also hangup call automatically (from webRTC perspective)\n    yield call(closeCall, webRTC, currentCall.webrtcSessionId)\n\n    // Also, cleanup Redux state by sending END_CALL_FINISH action\n    yield put(\n      callActions.endCallFinish(id, {\n        isLocal: true,\n        transition: { statusCode: 9909, reasonText: 'Call has ended due to call audit failure.' }\n      })\n    )\n  }\n}\n\n/**\n * Filters which call needs to be re-synched and calls the helper saga (`updateCallState`) to perform the re-synching.\n *\n * Responsibilities:\n *    1. Ensure resyncOnConnect config is set\n *    2. Filter out inactive calls (calls already in an ended state)\n *    3. In parallel, use the helper saga (`updateCallState`) to perform the re-synching of the active calls\n * @method sendCallAudit\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   action        The action that triggered the audit.\n */\nexport function * getSessions (deps, action) {\n  const config = yield select(getOptions)\n  if (!config.resyncOnConnect) {\n    return\n  }\n  // Grab all active calls\n  const calls = yield select(getCalls)\n  const activeCalls = calls.filter(call => call.state !== CALL_STATES.CANCELLED && call.state !== CALL_STATES.ENDED)\n\n  // Check and update the call state of each call if necessary\n  yield all(activeCalls.map(activeCall => call(updateCallState, deps, activeCall)))\n}\n\n// eslint-disable-next-line no-warning-comments\n/**\n * Sends a GET session request and updates call if required.\n *\n * This saga performs the signaling operation to get the status of a call session on the server.\n *    There are no local webRTC operations involved.\n *\n * Assumptions:\n *    1. The server uses Kandy Link 4.7.1+\n * Responsibilities:\n *    2. Update the call state if the call is out of sync (call's status does not match response from server)\n * @method sendCallAudit\n * @param {Object}   deps          Dependencies that the saga uses.\n * @param {Object}   deps.webRTC   The WebRTC stack.\n * @param {Object}   deps.requests The set of platform-specific signalling functions.\n * @param {Function} deps.requests.getSession GET session signalling function.\n * @param {Object}   action        The call being acted on.\n */\nexport function * updateCallState (deps, activeCall) {\n  const { webRTC, requests } = deps\n  const log = logManager.getLogger('CALL', activeCall.id)\n  const callStateAfterConnect = activeCall.state\n\n  // If there is an ongoing operation when the WS connects, the response to that operation will re-sync the state\n  // Otherwise, we need to get the status of the session from the server\n  if (!activeCall.localOp && !activeCall.remoteOp) {\n    const sessionStatusResponse = yield call(requests.getSession, {\n      wrtcsSessionId: activeCall.wrtcsSessionId\n    })\n\n    // Get state of the call again before evaluating the response as an operation request and response\n    // could have been processed in between the request to get the session and the response received\n    const currentCall = yield select(getCallById, activeCall.id)\n\n    // Do nothing if an operation was triggered in between the GET sessions request and response, and is ongoing\n    if (!currentCall.localOp && !currentCall.remoteOp) {\n      /*\n       * If the current call state is ringing OR if the state of the call was connected/on hold before we\n       * did the GET, look at the response of the GET request.\n       * If call is ringing and GET session returns ringing, we don't need to do anything\n       * Also, if we were previously connected, but GET returns ringing, this could be due to an operation that was resolved\n       * between the GET request and response. In any case, no need to look at GET response for this scenario.\n       */\n      if (currentCall.state === CALL_STATES.RINGING || callStateAfterConnect !== CALL_STATES.RINGING) {\n        // Call not found\n        if (sessionStatusResponse.error && sessionStatusResponse.error.code === 47) {\n          // End the call as the session does not exist on the server anymore (statusCode 47 response)\n          yield call(closeCall, webRTC, activeCall.webrtcSessionId)\n\n          log.info(`Call re-sync found that call is ended. Changing to ${CALL_STATES.ENDED}.`)\n          yield put(\n            callActions.endCallFinish(activeCall.id, {\n              isLocal: true,\n              error: sessionStatusResponse.error\n            })\n          )\n\n          // GET response errors other than session not found\n        } else if (sessionStatusResponse.error) {\n          log.debug(`Call re-sync failure (${sessionStatusResponse.error.code}).`, sessionStatusResponse.error)\n\n          // If the call is answered, but not by us\n        } else if (\n          sessionStatusResponse.state === 'ANSWERED' &&\n          currentCall.state !== CALL_STATES.CONNECTED &&\n          currentCall.state !== CALL_STATES.ON_HOLD\n        ) {\n          // Report call as cancelled\n          yield call(closeCall, deps.webRTC, activeCall.webrtcSessionId)\n          log.info(`Call re-sync found that call is cancelled. Changing to ${CALL_STATES.CANCELLED}.`)\n          yield put(callActions.callCancelled(activeCall.id))\n        }\n      }\n    }\n  }\n}\n","/*\n * Compare Media / SDP.\n *\n * These functions aim to determine how a Webrtc operation changed a\n *    PeerConnection's (local) SDP. It does this by comparing two SDPs from the\n *    same PeerConnection, one from before and one from after the operation.\n * The output (a `MediaDiff` object) is a description of how each media\n *    section of the SDP was changed by the operation.\n *\n * This file examines the SDP/media from a webrtc/SDP level, not from a call/SDK\n *    level.\n */\n\n// Other plugins.\nimport { logManager } from '../../logs'\n\n// Libraries.\nimport sdpTransform from 'sdp-transform'\n\nconst log = logManager.getLogger('SDP')\n\n/**\n * Description of how a media line changes from one SDP to the next.\n * @typedef {string} MediaTransition\n */\n\n/**\n * The possible values for media transitions.\n * @enum {MediaTransition}\n */\nexport const MEDIA_TRANSITIONS = {\n  START: 'START',\n  STOP: 'STOP',\n  SAME: 'SAME'\n}\n\n/**\n * Compare two SDPs to determine the differences in their media sections.\n * The SDPs need to have been created by the same source.\n * @method compareSdp\n * @param  {string}  prevSdpString A previous SDP.\n * @param  {string}  sdpString     A new SDP.\n * @return {MediaDiff}\n */\nexport default function compareMedia (prevSdpString, sdpString) {\n  // Parse the SDP string into an SDP object for easier handling.\n  const prevSdp = sdpTransform.parse(prevSdpString)\n  const sdp = sdpTransform.parse(sdpString)\n\n  // Take out only the parts of the SDP that we are interested in.\n  //    Each \"media\" relates to a media section of the SDP.\n  const prevMedia = summarizeMedia(prevSdp)\n  const currMedia = summarizeMedia(sdp)\n\n  // Media found in the previous SDP but not the latest SDP were removed.\n  const removed = []\n  // Media found in the latest SDP but not the previous SDP were added.\n  const added = []\n  // Media found in both SDPs may have been changed.\n  const changed = []\n  const unchanged = []\n\n  // For each media section in the previous SDP,\n  //    try to find a matching media section in the current SDP.\n  prevMedia.forEach(prevM => {\n    const currM = currMedia.find(media => media.sectionId === prevM.sectionId)\n    if (!currM) {\n      // If no match found, then the media section was removed from the SDP.\n      removed.push(prevM)\n    } else {\n      // If a match is found, compare the two sections.\n      const changes = compareSummary(prevM, currM)\n\n      if (changes.sending === MEDIA_TRANSITIONS.SAME && changes.receiving === MEDIA_TRANSITIONS.SAME) {\n        // No changes.\n        unchanged.push(prevM)\n      } else {\n        // Changes. Include both the media summary and the changes found.\n        /**\n         * Description of how a media line changed, with the latest summary.\n         * @typedef  {Object}       ChangedMedia\n         * @property {MediaSummary} media        The new summary of the media section.\n         * @property {MediaChanges} changes      The changes that occurred to the media.\n         */\n        changed.push({ media: currM, changes })\n      }\n    }\n  })\n\n  // For each media section in the current SDP,\n  //    try to find a matching media section in the previous SDP.\n  currMedia.forEach(currM => {\n    const prevM = prevMedia.find(media => media.sectionId === currM.sectionId)\n    if (!prevM) {\n      // If no match found, then the media section was added to the current SDP.\n      added.push(currM)\n    } else {\n      // Nothing else to check. Already found removed and (un)changed media.\n    }\n  })\n\n  /**\n   * The computed differences of media sections between two SDPs.\n   * @typedef  {Object}              MediaDiff\n   * @property {Array<MediaSummary>} added     Media sections that are new in the latest SDP.\n   * @property {Array<MediaSummary>} removed   Media sections that are missing in the latest SDP.\n   * @property {Array<ChangedMedia>} changed   Media changes between the two SDPs.\n   * @property {Array<MediaSummary>} unchanged Media sections that remained the same.\n   */\n  return {\n    added,\n    removed,\n    changed,\n    unchanged\n  }\n}\n\n/**\n * Reduce the media information in the SDP to only what we will use.\n * The SDP object provided as input is assumed to use standard values.\n *\n * Only supports SDPs where there is only one track per media section.\n *    eg. Plan-B when there is max 1 track per media type, and Unified-Plan (?).\n *\n * @method summarizeMedia\n * @param  {Object} sdp The full SDP object.\n * @return {Array<MediaSummary>} Summarized media sections from the SDP.\n */\nexport function summarizeMedia (sdp) {\n  const sdpMedia = []\n  sdp.media.forEach(media => {\n    /*\n     * Generate/Find a unique ID for this media section. This will be used to\n     *    compare against another SDP's media sections to find matching\n     *    sections.\n     */\n    const sectionId = media.mid\n\n    if (media.ssrcGroups && media.ssrcGroups.length > 1) {\n      /*\n       * All of the logic in this file assumes that a media section only has 1\n       *    track. If there are more than one, it means that we are using\n       *    Plan-B with more than 1 track of the same media type, which is not\n       *    something that we want to support.\n       */\n      log.debug(`Media section contains multiple ssrc groups. Summary for ${sectionId} will be wrong.`)\n    }\n\n    // If the media section doesn't have a direction, then use the session-level direction.\n    const mediaDirection = media.direction || sdp.direction\n\n    // Whether this media section is sending and/or receiving.\n    let willSend\n    let willReceive\n\n    if (mediaDirection) {\n      willSend = mediaDirection.includes('send')\n      willReceive = mediaDirection.includes('recv')\n    } else {\n      // If there is no media direction attribute at both the media-level and\n      //    session-level, then it is to be assumed the direction is \"sendrecv\".\n      // Ref: RFC 4566, page 26: https://tools.ietf.org/html/rfc4566\n      willSend = true\n      willReceive = true\n    }\n\n    let mediaId, trackId\n    /*\n     * If the media section is sending, then it has information about the track\n     *    that it is sending.\n     *\n     * Note: The media section will never have information about a track it is\n     *    receiving (ie. willReceive), because the SDP only describes the\n     *    \"local\" PeerConnection's situation.\n     */\n    if (willSend) {\n      /**\n       * The SDP should either have a `msid` property (a=msid line) or `ssrc`\n       *    lines with the same information (`a=ssrc:... label:...` and\n       *    `a=ssrc:... mslabel:...`).\n       * If it has nethier, then the SDP says it wants to send a track, but it\n       *    has no track to send.\n       */\n      if (media.msid) {\n        ;[mediaId, trackId] = media.msid.split(' ')\n      } else if (media.ssrcs) {\n        mediaId = media.ssrcs.find(ssrc => ssrc.attribute === 'mslabel').value\n        trackId = media.ssrcs.find(ssrc => ssrc.attribute === 'label').value\n      }\n    } else {\n      // This media section is not sending a track, so there is no information.\n      mediaId = undefined\n      trackId = undefined\n    }\n\n    /**\n     * Summarized information about a media section from an SDP.\n     * @typedef  {Object}  MediaSummary\n     * @property {string}  sectionId   A unique identifier for the media section.\n     * @property {string}  type        The type of media line.\n     * @property {boolean} willSend    Whether the media will send data.\n     * @property {boolean} willReceive Whether the media will receive data.\n     * @property {string}  mediaId     The MediaStream ID of the media.\n     * @property {string}  trackId     The MediaStreamTrack ID of the media.\n     */\n    const summary = {\n      sectionId,\n      type: media.type,\n      willSend,\n      willReceive,\n      mediaId,\n      trackId\n    }\n\n    sdpMedia.push(summary)\n  })\n  return sdpMedia\n}\n\n/**\n * Compare two summarized Media section objects to determine how it changed.\n * @method compareSummary\n * @param  {MediaSummary} prevMedia The previous media summary.\n * @param  {MediaSummary} currMedia The current meduia summary.\n * @return {MediaChanges} How the media directions changed from prevMedia to currMedia.\n */\nexport function compareSummary (prevMedia, currMedia) {\n  /**\n   * Description of changes to a media line.\n   * @typedef  {Object} MediaChanges\n   * @property {MediaTransition} sending   The change in the media sending data.\n   * @property {MediaTransition} receiving The change in the media receiving data.\n   */\n  const change = {\n    sending: undefined,\n    receiving: undefined\n  }\n\n  if (prevMedia.willSend !== currMedia.willSend) {\n    if (currMedia.willSend) {\n      // Started sending.\n      change.sending = MEDIA_TRANSITIONS.START\n    } else {\n      // Stopped sending.\n      change.sending = MEDIA_TRANSITIONS.STOP\n    }\n  } else {\n    // No change.\n    change.sending = MEDIA_TRANSITIONS.SAME\n  }\n\n  if (prevMedia.willReceive !== currMedia.willReceive) {\n    if (currMedia.willReceive) {\n      // Started receiving.\n      change.receiving = MEDIA_TRANSITIONS.START\n    } else {\n      // Stopped receiving.\n      change.receiving = MEDIA_TRANSITIONS.STOP\n    }\n  } else {\n    // No change.\n    change.receiving = MEDIA_TRANSITIONS.SAME\n  }\n\n  return change\n}\n","import { MEDIA_TRANSITIONS } from './compareMedia'\n\n// Constants.\nimport { OPERATIONS } from '../../call/interfaceNew/constants'\n\n/**\n * Based on a MediaDiff object, determine what the call operation was that\n *    caused the SDP/media change.\n * @method getOperation\n * @param  {MediaDiff} mediaDiff\n * @return {string}\n */\nexport default function getOperation (mediaDiff) {\n  // Naively just check one operation after the other.\n  // TODO: Make this more efficient?\n  // TODO: These MoH checks should take into account current call state.\n  //    Start/Stop MoH should only be possible in specific states.\n  if (wasHold(mediaDiff) || was3xHold(mediaDiff)) {\n    return OPERATIONS.HOLD\n  } else if (wasUnhold(mediaDiff) || was3xUnhold(mediaDiff)) {\n    return OPERATIONS.UNHOLD\n  } else if (wasStartMoh(mediaDiff)) {\n    // Check 'start MoH' before 'add media' because 'start MoH' is a special\n    //    case of 'add media'.\n    return OPERATIONS.START_MOH\n  } else if (wasAddMedia(mediaDiff)) {\n    return OPERATIONS.ADD_MEDIA\n  } else if (wasStopMoh(mediaDiff)) {\n    // Check 'stop MoH' before 'remove media' because 'stop MoH' is a special\n    //    case of 'remove media'.\n    return OPERATIONS.STOP_MOH\n  } else if (wasRemoveMedia(mediaDiff)) {\n    return OPERATIONS.REMOVE_MEDIA\n  } else if (wasNoChange(mediaDiff)) {\n    return 'NO_CHANGE'\n  } else {\n    return 'UNKNOWN'\n  }\n}\n\n/**\n * A \"hold\" operation is when all media lines change to be \"inactive\".\n * Some media may have already been inactive. \"Hold\" is specifically when\n *    all active media becomes inactive, hence there is no longer any media\n *    flowing.\n *\n * This differs from a \"stop MoH\" operation by requiring at least one media to\n *    be \"flowing\" (both sending and receiving) before the operation. For\n *    \"stop MoH\", the media would only be sending (and not receiving) before.\n *\n * In terms of SDP changes, it is defined as:\n *    1) At least one media was 'flowing' before the SDP change.\n *    2) No media is 'flowing' after the SDP change.\n *    3) No active media was added.\n *    4) No media was removed.\n *    5) All media that changed was stopped.\n *        ie. is being \"held\".\n *    6) All media that is unchanged is not sending/receiving.\n *        ie. was already \"held\".\n * @method wasHold\n * @param  {MediaDiff} mediaDiff Media differences described between two SDPs.\n * @return {boolean}\n */\nexport function wasHold (mediaDiff) {\n  const { added, removed, changed, unchanged } = mediaDiff\n\n  /*\n   * 1 & 2) Some media was flowing before the change, and no media is flowing\n   *    after the change. This ensures \"hold\" is distinct from \"stop MoH\"\n   *    scenarios.\n   */\n  const stoppedFlowing = hadMediaFlowing(mediaDiff) && !hasMediaFlowing(mediaDiff)\n\n  /*\n   * 3) No active media was added.\n   * For any added media we need to check if it's inactive to determine if this was a hold\n   */\n  const noActiveMediaAdded = !added.some(media => media.willSend || media.willReceive)\n\n  /*\n   * 4) No media was removed\n   */\n  const noMediaRemoved = removed.length === 0\n\n  /*\n   * 5a) Some media did change.\n   */\n  const didChange = changed.length > 0\n\n  /*\n   * 5b) For all media that changed,\n   *    all changes were either `stop` or `remain stopped`.\n   */\n  const allStopped = changed.every(({ media, changes }) => {\n    // This media is not sending.\n    const notSending =\n      changes.sending === MEDIA_TRANSITIONS.STOP || (changes.sending === MEDIA_TRANSITIONS.SAME && !media.willSend)\n    // This media is not receiving.\n    const notReceiving =\n      changes.receiving === MEDIA_TRANSITIONS.STOP ||\n      (changes.receiving === MEDIA_TRANSITIONS.SAME && !media.willReceive)\n\n    return notSending && notReceiving\n  })\n\n  /*\n   * 6) For all media that was not changed,\n   *    no media is being sent/received.\n   */\n  const stillStopped = unchanged.every(media => {\n    return !media.willSend && !media.willReceive\n  })\n\n  return stoppedFlowing && noActiveMediaAdded && noMediaRemoved && didChange && allStopped && stillStopped\n}\n\n/**\n * An \"unhold\" operation is when all media lines were previously inactive and\n *    some change to be active.\n * Not all media needs to change to be active, only some.\n *\n * This differs from a \"start MoH\" operation by requiring some media to be\n *    \"flowing\" (both sending and receiving) after the operation. For\n *    \"start MoH\", the media would only be sending (and not receiving) after.\n *\n * In terms of SDP changes, it is defined as:\n *    1) No media was flowing beforehand.\n *    2) At least one media is flowing afterwards.\n *    3) No media was added.\n *    4) No media was removed.\n *    5) All media that changed was started.\n *        ie. is being \"unheld\"\n *    6) All media that is unchanged is not sending/receiving.\n *        ie. was (and still is) \"held\"\n * @method wasUnhold\n * @param  {MediaDiff} mediaDiff Media differences described between two SDPs.\n * @return {boolean}\n */\nexport function wasUnhold (mediaDiff) {\n  const { added, removed, changed, unchanged } = mediaDiff\n\n  /*\n   * 1 & 2) No media was flowing before the change, and some media is flowing\n   *    after the change. This ensures \"unhold\" is distinct from \"start MoH\"\n   *    scenarios.\n   */\n  const startedFlowing = !hadMediaFlowing(mediaDiff) && hasMediaFlowing(mediaDiff)\n\n  /*\n   * 3 & 4) No media was added or removed.\n   */\n  const sameMedia = added.length === 0 && removed.length === 0\n\n  /*\n   * 6) For all media that was not changed,\n   *    no media is being sent/received.\n   */\n  const noUnchangedSend = unchanged.every(media => {\n    return !media.willSend && !media.willReceive\n  })\n\n  /*\n   * 5a) Some media did change.\n   */\n  const didChange = changed.length > 0\n\n  /*\n   * 5b) For all media that was changed,\n   *    all changes were either `start` or `remain stopped`.\n   */\n  const onlyStartChanges = changed.every(({ media, changes }) => {\n    const onlyStartSending =\n      changes.sending === MEDIA_TRANSITIONS.START || (changes.sending === MEDIA_TRANSITIONS.SAME && !media.willSend)\n\n    const onlyStartReceiving =\n      changes.receiving === MEDIA_TRANSITIONS.START ||\n      (changes.receiving === MEDIA_TRANSITIONS.SAME && !media.willReceive)\n\n    return onlyStartSending && onlyStartReceiving\n  })\n\n  return startedFlowing && sameMedia && noUnchangedSend && didChange && onlyStartChanges\n}\n\n/**\n * A \"3.X hold\" opeation is when a v3.X SDK performs hold. This is for interop.\n *\n * This operation is the same as a \"regular\" hold, except that media changes to\n *    sendonly instead of inactive.\n *\n * In terms of SDP changes, it is defined as:\n *    1) At least one media was 'flowing' before the SDP change.\n *    2) All changed media is not 'sendonly'.\n *        ie. is being \"v3.X held\"\n *    3) No active media was added.\n *    4) No media was removed.\n *    5) All media that is unchanged is not sending/receiving.\n *        ie. was already \"held\".\n *\n * @method was3xUnhold\n * @param  {MediaDiff} mediaDiff Media differences described between two SDPs.\n * @return {boolean}\n */\nexport function was3xHold (mediaDiff) {\n  const { added, removed, changed, unchanged } = mediaDiff\n\n  /*\n   * 1) Handles when some media was flowing before the change.\n   *  or a special case where media was flowing but assumes media wasnt flowing.\n   * 2) All changed media is now \"sendonly\".\n   */\n  const wasFlowing = hadMediaFlowing(mediaDiff)\n  const allSendOnly = changed.every(({ media, changes }) => {\n    /**\n     * This handles two scenerios\n     *\n     * 1)  When 3.X SDK holds and was not sending video previously, video media direction changes from recvonly --> sendonly.\n     * For this scenerio, 4.X sdk will think it just started sending media(video) and\n     * no video media was flowing initially, setting  MEDIA_TRANSITION for the video to \"START\".\n     *\n     * 2.) When 3.X SDK holds and a video was sent previously, 4.x knows some media was flowing before the change.\n     * Therefore setting  MEDIA_TRANSITION for the video to \"SAME\".\n     */\n    return (\n      (changes.sending === MEDIA_TRANSITIONS.START || changes.sending === MEDIA_TRANSITIONS.SAME) &&\n      changes.receiving === MEDIA_TRANSITIONS.STOP\n    )\n  })\n\n  /*\n   * 3) No active media was added.\n   * For any added media we need to check if it's inactive to determine if this was a hold\n   */\n  const noActiveMediaAdded = !added.some(media => media.willSend || media.willReceive)\n\n  /*\n   * 4) No media was removed\n   */\n  const noMediaRemoved = removed.length === 0\n\n  /*\n   * 5) For all media that was not changed,\n   *    no media is being sent/received.\n   */\n  const noUnchangedSend = unchanged.every(media => {\n    return !media.willSend && !media.willReceive\n  })\n\n  return wasFlowing && allSendOnly && noActiveMediaAdded && noMediaRemoved && noUnchangedSend\n}\n\n/**\n * A \"3.X unhold\" opeation is when a v3.X SDK performs unhold. This is for\n *    interop.\n *\n * This operation is the same as a \"regular\" unhold, except that media changes\n *    from sendonly instead of inactive.\n *\n * In terms of SDP changes, it is defined as:\n *    1) Some media is flowing afterwards.\n *    2) All media that changed was started receiving.\n *        ie. is being \"3.X unheld\"\n *    3) No media was added.\n *    4) No media was removed.\n *    5) All media that is unchanged is not sending/receiving.\n *        ie. was (and still is) \"held\"\n *\n * @method was3xUnhold\n * @param  {MediaDiff} mediaDiff Media differences described between two SDPs.\n * @return {boolean}\n */\nexport function was3xUnhold (mediaDiff) {\n  const { added, removed, changed, unchanged } = mediaDiff\n\n  /*\n   * 1) Some media was flowing before the change.\n   * 2) All changed media is now went from \"sendonly\" to \"sendrecv\".\n   */\n  const isFlowing = hasMediaFlowing(mediaDiff)\n  const allSending = changed.every(({ media, changes }) => {\n    return changes.sending === MEDIA_TRANSITIONS.SAME && changes.receiving === MEDIA_TRANSITIONS.START\n  })\n\n  /*\n   * 3) & 4) No media was added or removed.\n   */\n  const sameMedia = added.length === 0 && removed.length === 0\n\n  /*\n   * 5) For all media that was not changed,\n   *    no media is being sent/received.\n   */\n  const noUnchangedSend = unchanged.every(media => {\n    return !media.willSend && !media.willReceive\n  })\n\n  return isFlowing && allSending && sameMedia && noUnchangedSend\n}\n\n/**\n * An \"add media\" operation is when the latest SDP is sending tracks that the\n *    previous SDP was not sending. This can either be a new, sending media\n *    section or an existing media section that was changed to now send.\n *\n * The \"start MoH\" scenario is a special-case of \"add media\". When one audio\n *    track is added/started, with no media flowing beforehand, then that could\n *    either be a \"start MoH\" or \"add media\" operation. From a webrtc/SDP\n *    viewpoint, they are the same thing in that scenario, so there is no way\n *    to tell them apart using only a MediaDiff object.\n * If both ends of the Call are SDK clients, then \"start MoH\" can only be done\n *    when the Call is on hold (by definition), and \"add media\" can only be\n *    done when the Call is not on hold (requirement set by the API), but we\n *    can't make that assumption.\n *\n * In terms of SDP changes, it is defined as:\n *    1) No media [sections] was removed.\n *    2) Any media added is sending.\n *    3) Any media that changed started sending.\n * @method wasAddMedia\n * @param  {MediaDiff} mediaDiff Media differences described between two SDPs.\n * @return {boolean}\n */\nexport function wasAddMedia (mediaDiff) {\n  const { added, removed, changed } = mediaDiff\n\n  /*\n   * 1) No media sections were removed.\n   */\n  const wasntRemoved = removed.length === 0\n\n  /*\n   * 2a & 3a) Something was added or changed.\n   */\n  const somethingStarted = added.length > 0 || changed.length > 0\n\n  /*\n   * 2b) Any media sections added are sending.\n   */\n  const addedSending = added.every(media => media.willSend)\n\n  /*\n   * 3b) Any media that changed was to start sending.\n   */\n  const changedSending = changed.every(({ media, changes }) => {\n    return changes.sending === MEDIA_TRANSITIONS.START && changes.receiving === MEDIA_TRANSITIONS.SAME\n  })\n\n  /*\n   * Unchanged media is not checked for.\n   *    By definition, it is the same as before, and could be in any state.\n   */\n\n  return wasntRemoved && somethingStarted && addedSending && changedSending\n}\n\n/**\n * A \"remove media\" operation is when some media sections stop sending (with no\n *    other changes).\n *\n * The \"stop MoH\" scenario is a special-case of \"remove media\". When one audio\n *    track is removed, leaving no media flowing afterwards, then that could\n *    either be a \"stop MoH\" or \"remove media\" operation. From a webrtc/SDP\n *    viewpoint, they are the same thing in that scenario, so there is no way\n *    to tell them apart using only a MediaDiff object.\n * If both ends of the Call are SDK clients, then \"stop MoH\" can only be done\n *    when the Call is on hold (by definition), and \"remove media\" can only be\n *    done when the Call is not on hold (requirement set by the API), but we\n *    can't make that assumption.\n *\n * In terms of SDP changes, it is defined as:\n *    1) No media was added.\n *    2) No media [sections] were removed.\n *    3) Some existing media stopped sending (ie. tracks were removed).\n * @method wasRemoveMedia\n * @param  {MediaDiff} mediaDiff Media differences described between two SDPs.\n * @return {boolean}\n */\nexport function wasRemoveMedia (mediaDiff) {\n  const { added, removed, changed } = mediaDiff\n\n  /*\n   * 1 & 2) No media sections were added or removed.\n   */\n  const wasntAdded = added.length === 0\n  const wasntRemoved = removed.length === 0\n\n  /*\n   * 3a) Some media sections changed.\n   */\n  const wasChanged = changed.length > 0\n\n  /*\n   * 3b) For all media sections that changed,\n   *      the only change was to stop sending.\n   */\n  const onlyStopSending = changed.every(({ media, changes }) => {\n    return (\n      changes.sending === MEDIA_TRANSITIONS.STOP &&\n      // Receiving may be SAME or START, depending if the previous media\n      //    direction was sendrecv (SAME) or sendonly (START).\n      // TODO: Update `ChangedMedia` to include the pre-change media summary?\n      changes.receiving !== MEDIA_TRANSITIONS.STOP\n    )\n  })\n\n  /*\n   * Unchanged media is not checked for.\n   *    By definition, it is the same as before, and could in any state.\n   */\n\n  return wasntAdded && wasntRemoved && wasChanged && onlyStopSending\n}\n\n/**\n * A \"start Music on Hold\" operation is when media is currently held, and one\n *    audio media is changed to \"send only\".\n *\n * This checker does not guarentee that it was a \"start MoH\" scenario, and not\n *    a very specific \"add media\" scenario. It is an edge-case, but it is\n *    possible that both sides of the Call removed all media, then one side\n *    adds a single audio track. There is no way to tell the difference with\n *    only a MediaDiff object.\n *\n * In terms of SDP changes, it is defined as:\n *    0) A \"add media\" scenario where:\n *    1) One inactive audio section starts sending.\n *    2) All other media remains unchanged.\n *    3) Any unchanged media is inactive.\n * @method wasStartMoh\n * @param  {MediaDiff} mediaDiff Media differences described between two SDPs.\n * @return {boolean}\n */\nexport function wasStartMoh (mediaDiff) {\n  const { added, removed, changed, unchanged } = mediaDiff\n\n  // 0) \"Start MoH\" is a \"add media\" scenario that has extra requirements.\n  if (!wasAddMedia(mediaDiff)) {\n    return false\n  }\n\n  /*\n   * 1) Only one audio line should be changed, to send only.\n   */\n  const onlyAudioChange =\n    // Only one audio line changed.\n    changed.length === 1 &&\n    changed[0].media.type === 'audio' &&\n    // The change was to start sending media.\n    changed[0].changes.sending === MEDIA_TRANSITIONS.START &&\n    // Receiving media remains unchanged; not receiving.\n    changed[0].changes.receiving === MEDIA_TRANSITIONS.SAME &&\n    !changed[0].media.willReceive\n\n  /*\n   * 2) No media was added or removed.\n   */\n  const sameMedia = added.length === 0 && removed.length === 0\n\n  /*\n   * 3) For all media that is unchanged,\n   *    they are not sending/receiving.\n   */\n  const inactiveUnchanged = unchanged.every(media => {\n    return !media.willSend && !media.willReceive\n  })\n\n  return sameMedia && inactiveUnchanged && onlyAudioChange\n}\n\n/**\n * A \"stop Music on Hold\" operation is when media starts in a MoH state, then\n *    reverts back to an \"on hold\" state.\n *\n * This checker does not guarentee that it was a \"stop MoH\" scenario, and not\n *    a very specific \"remove media\" scenario. It is possible that a Call is\n *    established with one-way audio (and no video), then the audio is removed.\n *    There is no way to tell the difference with only a MediaDiff object.\n *\n * In terms of SDP changes, it is defined as:\n *    0) A \"remove media\" scenario where:\n *    1) One audio section changed stopped sending.\n *    2) All other media remains unchanged.\n *    3) Any unchanged media is inactive.\n * @method wasStopMoh\n * @param  {MediaDiff} mediaDiff Media differences described between two SDPs.\n * @return {boolean}\n */\nexport function wasStopMoh (mediaDiff) {\n  const { added, removed, changed, unchanged } = mediaDiff\n\n  // 0) \"Stop MoH\" is a \"remove media\" scenario that has extra requirements.\n  if (!wasRemoveMedia(mediaDiff)) {\n    return false\n  }\n\n  /*\n   * 1) Only one audio line should be changed, from send only to inactive.\n   */\n  const stopSendAudio =\n    // Only one audio line changed.\n    changed.length === 1 &&\n    changed[0].media.type === 'audio' &&\n    // The change was to stop sending media.\n    changed[0].changes.sending === MEDIA_TRANSITIONS.STOP &&\n    // Receiving media remains unchanged; not receiving.\n    changed[0].changes.receiving === MEDIA_TRANSITIONS.SAME &&\n    !changed[0].media.willReceive\n\n  /*\n   * 2) No media was added or removed.\n   */\n  const sameMedia = added.length === 0 && removed.length === 0\n\n  /*\n   * 3) For all media that is unchanged,\n   *    they are not sending/receiving.\n   */\n  const inactiveUnchanged = unchanged.every(media => {\n    return !media.willSend && !media.willReceive\n  })\n\n  return sameMedia && inactiveUnchanged && stopSendAudio\n}\n\n/**\n * A \"no change\" media operation is when all media sections remain the same.\n *    The remote operation was something other than changing media.\n *\n * In terms of SDP comparison, it is defined as:\n *    1) No media sections were added, removed, or changed.\n *    2) Some media remained unchanged.\n * @method wasNoChange\n * @param  {MediaDiff} mediaDiff Media differences described between two SDPs.\n * @return {boolean}\n */\nexport function wasNoChange (mediaDiff) {\n  const { added, removed, changed, unchanged } = mediaDiff\n\n  /*\n   * No media did anything other than `unchanged`.\n   */\n  const noChange = added.length === 0 && removed.length === 0 && changed.length === 0\n\n  /*\n   * ...but there is media in the SDP.\n   */\n  const hasUnchanged = unchanged.length > 0\n\n  return noChange && hasUnchanged\n}\n\n/**\n * Determines whether a MediDiff object describes the SDP as having had media\n *    flowing (a media both sending and receiving; flowing in both directions)\n *    _before_ the SDP changes.\n * @method hadMediaFlowing\n * @param  {MediaDiff} mediaDiff\n * @return {boolean}   Whether the MediaDiff has media flowing before the change.\n */\nexport function hadMediaFlowing (mediaDiff) {\n  const { removed, changed, unchanged } = mediaDiff\n\n  /*\n   * If any unchanged media is sending and receiving, then media was (and still\n   *    is) flowing before the SDP change.\n   */\n  const unchangedFlowing = unchanged.some(media => {\n    return media.willSend && media.willReceive\n  })\n\n  /*\n   * If any changed media was sending and receiving, then media was flowing\n   *    before the SDP change.\n   */\n  const changedFlowing = changed.some(({ media, changes }) => {\n    /*\n     * A changed media was sending before the change if\n     *    1) the change was to stop sending, or\n     *    2) sending didn't change, and is still sending.\n     */\n    const wasSending =\n      changes.sending === MEDIA_TRANSITIONS.STOP || (changes.sending === MEDIA_TRANSITIONS.SAME && media.willSend)\n\n    /*\n     * A changed media was receiving before the change if\n     *    1) the change was to stop receiving, or\n     *    2) receiving didn't change, and is still receiving.\n     */\n    const wasReceiving =\n      changes.receiving === MEDIA_TRANSITIONS.STOP ||\n      (changes.receiving === MEDIA_TRANSITIONS.SAME && media.willReceive)\n\n    return wasSending && wasReceiving\n  })\n\n  /*\n   * If any removed media was sending and receiving, then media was flowing\n   *    before the SDP change.\n   */\n  const removedFlowing = removed.some(media => {\n    return media.willSend && media.willReceive\n  })\n\n  /*\n   * Ignore `added` media, since that tells us nothing about media before the\n   *    SDP change.\n   */\n\n  return unchangedFlowing || changedFlowing || removedFlowing\n}\n\n/**\n * Determines whether a MediDiff object describes the SDP as having media\n *    flowing (a media both sending and receiving; flowing in both directions)\n *    _after_ the SDP changes.\n * @method hasMediaFlowing\n * @param  {MediaDiff} mediaDiff\n * @return {boolean}   Whether the MediaDiff has media flowing after the change.\n */\nexport function hasMediaFlowing (mediaDiff) {\n  const { added, changed, unchanged } = mediaDiff\n\n  /*\n   * If any unchanged media is sending and receiving, then media is (and was)\n   *    flowing after the SDP change.\n   */\n  const unchangedFlowing = unchanged.some(media => {\n    return media.willSend && media.willReceive\n  })\n\n  /*\n   * If any changed media is sending and receiving, then media is flowing\n   *    after the SDP change.\n   */\n  const changedFlowing = changed.some(({ media, changes }) => {\n    return media.willSend && media.willReceive\n  })\n\n  /*\n   * If any added media is sending and receiving, then media is flowing\n   *    after the SDP change.\n   */\n  const addedFlowing = added.some(media => {\n    return media.willSend && media.willReceive\n  })\n\n  /*\n   * Ignore `removed` media, since that tells us nothing about media after the\n   *    SDP change.\n   */\n\n  return unchangedFlowing || changedFlowing || addedFlowing\n}\n","// Other plugins.\nimport { logManager } from '../../logs'\n\n// Libraries.\nimport sdpTransform from 'sdp-transform'\nimport { cloneDeep, isArray, isFunction } from 'lodash/fp'\n\nconst log = logManager.getLogger('SDP')\n\n/**\n * Basic SDP pipeline runner.\n * @method sdpPipeline\n * @param  {Array}      handlers       List of functions that transform the SDP.\n * @param  {string}     sdp            The session description.\n * @param  {Object}     info           Information about the session description.\n * @param  {string}     info.callId    The id corresponding to the call on which this pipeline is being run.\n * @param  {RTCSdpType} info.type      The session description's type.\n * @param  {string}     info.step      The step that will occur after the Pipeline is run.\n *    Will be either 'set' (the SDP will be set locally) or 'send' (the SDP will be sent\n *    to the remote endpoint).\n * @param  {string}     info.endpoint  Which end of the connection created the SDP.\n * @param  {BandwidthControls} [info.bandwidth] Information about bandwidth controls.\n * @return {string}     The modified session description.\n */\nexport default function runPipeline (handlers, sdp, info) {\n  const objectSdp = sdpTransform.parse(sdp)\n\n  const originalSdp = Object.freeze(objectSdp)\n  let newSdp = cloneDeep(originalSdp)\n\n  if (isArray(handlers)) {\n    handlers.forEach(handler => {\n      if (isFunction(handler)) {\n        log.debug(`Running SDP handler ${handler.name}.`)\n        newSdp = handler(newSdp, info, originalSdp)\n      } else {\n        log.error('SDP handler not a function; skipping.')\n      }\n    })\n  }\n\n  return sdpTransform.write(newSdp)\n}\n","/**\n * Checks whether the bandwidth controls provided exist and are numbers.\n * @param {BandwidthControls} bandwidthControls The bandwidth controls to check.\n */\nexport function checkBandwidthControls (bandwidthControls) {\n  const finalBandwidthControls = { ...bandwidthControls }\n\n  // If there are no bandwiwdth limits set or the bandwidth limits provided are not numbers, set them to undefined\n  if (!bandwidthControls || !(bandwidthControls.audio && typeof bandwidthControls.audio === 'number')) {\n    finalBandwidthControls.audio = null\n  }\n  if (!bandwidthControls || !(bandwidthControls.video && typeof bandwidthControls.video === 'number')) {\n    finalBandwidthControls.video = null\n  }\n  return finalBandwidthControls\n}\n","/**\n * Maps media tracks with the dscpControls provided to ensure the correct senders are set up with the\n * proper networkPriority\n * @param {Array<Track>} audioTracks The list of audio tracks\n * @param {Array<Track>} videoTracks The list of video tracks\n * @param {Array<Track>} screenTracks The list of screen tracks\n * @param {Object} dscpControls The DSCP controls provided\n * @return {Object} An object map of track: dscpSetting for all applicate tracks\n */\nexport function getTrackDscpMapping (audioTracks, videoTracks, screenTracks, dscpControls) {\n  const dscpTrackMapping = {}\n  if (dscpControls) {\n    if (dscpControls.screenNetworkPriority) {\n      for (const screenTrack of screenTracks) {\n        dscpTrackMapping[screenTrack.id] = dscpControls.screenNetworkPriority\n      }\n    }\n    if (dscpControls.audioNetworkPriority) {\n      for (const audioTrack of audioTracks) {\n        dscpTrackMapping[audioTrack.id] = dscpControls.audioNetworkPriority\n      }\n    }\n    if (dscpControls.videoNetworkPriority) {\n      for (const videoTrack of videoTracks) {\n        dscpTrackMapping[videoTrack.id] = dscpControls.videoNetworkPriority\n      }\n    }\n  }\n\n  return dscpTrackMapping\n}\n","// Other plugins.\nimport { logManager } from '../../logs'\n\nconst log = logManager.getLogger('SDPHANDLER')\n\n/**\n * SDP handler function that should be passed into session object's `processOffer` and `processAnswer` function.\n * This function disables old media encryption method SDES (Modifies sdp by removing crypto).\n * However, if only SDES is available, don't disable it.\n *\n * @method sanitizeSdesFromSdp\n * @param {Object} newSdp The SDP so far (could have been modified by previous handlers).\n * @param {Object} info Information about the session description.\n * @param {RTCSdpType} info.type The session description's type.\n * @param {string} info.step The step that will occur after the Pipeline is run.\n * @param {string} info.endpoint Which end of the connection created the SDP.\n * @param {Object} originalSdp The SDP in its initial state.\n * @return {Object} The sanitized SDP with crypto removed (if fingerprint exists)\n */\nexport function sanitizeSdesFromSdp (newSdp, info, originalSdp) {\n  for (const mLine of newSdp.media) {\n    if (mLine.crypto && mLine.fingerprint) {\n      log.debug('Removing SDES line from SDP media section.')\n      delete mLine.crypto\n    }\n  }\n  return newSdp\n}\n\n/**\n * Function generator for an SDP handler function that changes the DTLS role of the SDP.\n * @method changeDtlsRoleTo\n * @param  {string} role\n * @return {Function} SDP handler.\n */\nexport function changeDtlsRoleTo (role) {\n  return function changeDtlsRole (newSdp, info, originalSdp) {\n    // Grab the original DTLS role for logging purposes.\n    //    Assumed that the DTLS role is the same in every media section.\n    const original = newSdp.media[0].setup\n    log.debug(`Changing SDP DTLS role from ${original} to ${role}.`)\n\n    // Change the DTLS role in every media section.\n    newSdp.media.map(media => {\n      media.setup = role\n      return media\n    })\n\n    return newSdp\n  }\n}\n\n/**\n * An SDP handler that adds bandwidth options to the SDP.\n * Supports Chrome & Firefox by generating 2 types of configs:\n *  - 'AS' for Chrome in kilobits per second\n *  - 'TIAS' for Firefox in bits per second\n * @method modifySdpBandwidth\n * @param {BandwidthControls} bandwidthControls\n * @return {Function} SDP handler.\n */\nexport function modifySdpBandwidth (newSdp, info, originalSdp) {\n  /**\n   * Generates bandwidth configs that Chrome & Firefox can recognize.\n   * @param {number} limit The bandwidth limit in kilobits per second.\n   */\n  function generateBandwidthConfigs (limit) {\n    return [\n      {\n        type: 'AS', // Chrome supports this (in kilobits per second)\n        limit\n      },\n      {\n        type: 'TIAS', // Firefox supports this (in bits per second)\n        limit: limit * 1000\n      }\n    ]\n  }\n\n  if (info.bandwidth) {\n    // For more details on bandwidth controls, see here https://webrtchacks.com/limit-webrtc-bandwidth-sdp/.\n\n    if (info.bandwidth.call) {\n      // Set session level bandwidth limit\n      newSdp.bandwidth = generateBandwidthConfigs(info.bandwidth.call)\n    }\n\n    if (info.bandwidth.audio) {\n      // Set audio bandwidth limit\n      newSdp.media\n        .filter(media => media.type === 'audio')\n        .forEach(media => {\n          media.bandwidth = generateBandwidthConfigs(info.bandwidth.audio)\n        })\n    }\n\n    if (info.bandwidth.video) {\n      // Set video bandwidth limit\n      newSdp.media\n        .filter(media => media.type === 'video')\n        .forEach(media => {\n          media.bandwidth = generateBandwidthConfigs(info.bandwidth.video)\n        })\n    }\n  }\n  return newSdp\n}\n\n/**\n * Generates extra informational parameters for ending a call.\n *\n * @method generateEndParams\n * @param {string}  currentCallState The state of the current call, before it was ended.\n * @param {boolean} isLocal Specifies if end operation was caused by the local side.\n * @param {Object}  params Extra context information related to the call.\n * @param {string}  [params.reasonText]  Human-readable explanation for the call change.\n * @param {string}  [params.statusCode] Code representing the reason for the call change.\n * @param {string}  params.remoteName   Name of the remote participant.\n * @param {string}  params.remoteNumber Number of the remote participant.\n */\nexport function generateEndParams (currentCallState, isLocal, params) {\n  const endParams = {\n    isLocal,\n    remoteParticipant: {\n      displayNumber: params.remoteNumber,\n      displayName: params.remoteName\n    },\n    transition: {\n      prevState: currentCallState\n    }\n  }\n  if (params.statusCode) {\n    endParams.transition.statusCode = params.statusCode\n  }\n  if (params.reasonText) {\n    endParams.transition.reasonText = params.reasonText\n  }\n  return endParams\n}\n","import { getSdpSessionId } from '../../../../webrtc/src/sdpUtils/extractors'\n\n/**\n * Checks whether two SDPs have the same session ID.\n * @method hasSameSessionId\n * @param  {string}  sdp    A valid SDP string.\n * @param  {string}  newSdp A valid SDP string.\n * @return {boolean} Whether the two SDPs have the same session ID.\n */\nexport function hasSameSessionId (sdp, newSdp) {\n  const firstSdpSessionId = getSdpSessionId(sdp)\n  const secondSdpSessionId = getSdpSessionId(newSdp)\n\n  if (firstSdpSessionId && secondSdpSessionId) {\n    return firstSdpSessionId === secondSdpSessionId\n  }\n}\n","// Call Plugin\nimport * as callActions from '../../call/interfaceNew/actions/call'\n\n// Helpers\nimport { logManager } from '../../logs'\n\n// Libraries.\nimport { call, put } from 'redux-saga/effects'\n\n/**\n * Uses the WebRTC stack to get the list of available and supported codecs by the browser\n *\n * @method getAvailableCodecs\n * @param  {Object} deps\n * @param  {Object} deps.webRTC      The WebRTC stack.\n * @param  {Object} action           A `GET_AVAILABLE_CODECS` action.\n */\nexport function * getAvailableCodecs (deps, action) {\n  const { webRTC } = deps\n\n  const log = logManager.getLogger('CALL')\n\n  const { kind } = action.payload\n\n  // TODO: Remove this once parameter validation is available for APIs\n  if (kind !== 'audio' && kind !== 'video') {\n    const errorMsg = `Cannot retrieve codecs for media kind ${kind}. Only 'audio' or 'video' kind supported.`\n    log.info(errorMsg)\n    yield call([action.meta.deferred, 'reject'], {\n      error: errorMsg\n    })\n    return\n  }\n\n  log.info(`Retrieving list of available codecs for media kind '${kind}'.`)\n\n  // Get the list of codecs from the general WebRTCManager\n  const codecs = yield call([webRTC.webrtcManager, 'getAvailableCodecs'], kind)\n  log.debug('Successfully retrieved codec list:', codecs)\n\n  // We got codecs, so 'resolve' the deferred result and respond with the list of codecs.\n  // NOTE: There does not seem to be a path for failure, as RTCRtpSender.getCapabilities(kind)\n  //       always returns something according to API doc\n  //       (including null, if there are simply no capabilities present),\n  //       so no need to handle 'reject' case.\n  yield call([action.meta.deferred, 'resolve'], codecs)\n\n  // Signal the completion of request by triggering an action complete, which\n  // in turn will issue an event at the application layer.\n  yield put(\n    callActions.availableCodecsRetrieved({\n      kind,\n      codecs\n    })\n  )\n}\n","// Call plugin.\nimport { callActions } from '../../call/interfaceNew/actions'\nimport { getOptions } from '../../call/interfaceNew/selectors'\n\n// Helpers\nimport { logManager } from '../../logs'\nimport runPipeline from '../sdp/pipeline'\nimport { getTrackDscpMapping } from '../utils/dscp'\n\n// WebRTC operations.\nimport * as mediaOps from './media'\n\n// Libraries.\nimport { call, put, select } from 'redux-saga/effects'\n\n/**\n * Performs the WebRTC portion necessary for establishing outgoing calls\n *\n * @method setupCall\n * @param  {Object} deps\n * @param  {Object} deps.webRTC      The WebRTC stack.\n * @param  {Object} mediaConstraints Video and audio media constraints\n * @param  {boolean} mediaConstraints.audio Whether to enable audio or not\n * @param  {boolean} mediaConstraints.video Whether to enable video or not\n * @param  {Object} sessionOptions\n * @param  {Object} sessionOptions.callId The id of the call\n * @param  {Object} sessionOptions.sdpSemantics Semantics for Real Time Communication configurations\n * @param  {Object} sessionOptions.turnInfo Contains information required for setting up ICE servers\n * @param  {string} sessionOptions.trickleIceMode What mode to be used for trickle ICE\n * @param  {number} sessionOptions.iceCollectionDelay\n * @param  {number} sessionOptions.maxIceTimeout\n * @param  {Function} sessionOptions.iceCollectionCheck\n * @param  {Object} [sessionOptions.bandwidth] Contains configuration details for setting bandwidth\n * @return {Object} Object\n * @return {string} Object.offerSdp Session Description Protocol for a call offer\n * @return {string} Object.sessionId session identifier\n * @return {Array}  Object.mediaIds call identifiers\n */\nexport function * setupCall (deps, mediaConstraints, sessionOptions) {\n  const { webRTC } = deps\n\n  const log = logManager.getLogger('CALL', sessionOptions.callId)\n  log.info('Setting up local WebRTC portions of call.')\n\n  const {\n    sdpSemantics,\n    turnInfo,\n    trickleIceMode,\n    bandwidth,\n    dscpControls,\n    callId,\n    iceCollectionCheck,\n    iceCollectionDelay,\n    maxIceTimeout,\n    removeBundling\n  } = sessionOptions\n\n  const { medias, error } = yield call(mediaOps.createLocal, webRTC, mediaConstraints)\n\n  if (error) {\n    log.debug('Failed to get media requested for the call.')\n    return { error }\n  }\n\n  // Create a webRTC session to represent this call.\n  const session = yield call([webRTC.sessionManager, 'create'], {\n    peer: {\n      rtcConfig: {\n        sdpSemantics,\n        iceServers: turnInfo.servers\n      },\n      trickleIceMode,\n      iceCollectionCheck,\n      iceCollectionDelay,\n      maxIceTimeout,\n      removeBundling\n    }\n  })\n  log.debug('Created WebRTC Session for Call.', { webrtcSessionId: session.id })\n\n  // Trigger a new action specifying that the session has been created\n  yield put(\n    callActions.sessionCreated(callId, {\n      webrtcSessionId: session.id\n    })\n  )\n\n  // Add the tracks to the session.\n  let screenTracks = []\n  let audioTracks = []\n  let videoTracks = []\n  let allTracks = []\n\n  for (const eachMedia of medias) {\n    const tracks = yield call([eachMedia.media, 'getTracks'])\n    if (eachMedia.type === 'screen') {\n      screenTracks = [...screenTracks, ...tracks]\n    } else if (eachMedia.type === 'audio') {\n      audioTracks = [...audioTracks, ...tracks]\n    } else if (eachMedia.type === 'video') {\n      videoTracks = [...videoTracks, ...tracks]\n    }\n    allTracks = [...allTracks, ...tracks]\n  }\n\n  const dscpTrackMapping = getTrackDscpMapping(audioTracks, videoTracks, screenTracks, dscpControls)\n\n  yield call([session, 'addTracks'], allTracks, dscpTrackMapping)\n\n  /*\n   * Create the local SDP offer, run it through any provided SDP handlers,\n   *    then set it as the Session's local description.\n   */\n  let offer = yield call([session, 'createOffer'])\n\n  const callConfigOptions = yield select(getOptions)\n  // Run the SDP through the Pipeline before we set it locally.\n  //    This is the \"pre set local\" stage.\n  offer.sdp = yield call(runPipeline, callConfigOptions.sdpHandlers, offer.sdp, {\n    callId,\n    type: offer.type,\n    step: 'set',\n    endpoint: 'local',\n    bandwidth\n  })\n  try {\n    offer = yield call([session, 'setLocalDescription'], offer)\n  } catch (e) {\n    return {\n      error: true,\n      offerSdp: null,\n      sessionId: null,\n      mediaIds: null\n    }\n  }\n  // Run the SDP through the Pipeline again before we send it to the remote side.\n  //    This is the \"pre send local\" stage.\n  // Assign it to a new variable because some browsers enforce the read-only\n  //    properties of a RTCSessionDescription object. The object from\n  //    setLocalDescription is enforced read-only, but the `offer` before that\n  //    is not enforced.\n  const newSdp = yield call(runPipeline, callConfigOptions.sdpHandlers, offer.sdp, {\n    callId,\n    type: offer.type,\n    step: 'send',\n    endpoint: 'local',\n    bandwidth\n  })\n\n  log.info('Finished setting up local WebRTC portions of call.')\n  return {\n    error: false,\n    offerSdp: newSdp,\n    sessionId: session.id,\n    mediaIds: medias.map(media => media.media.id)\n  }\n}\n\n/**\n * Prepares the WebRTC portions of setting up an incoming call.\n *\n * @method setupIncomingCall\n * @param  {Object} deps\n * @param  {Object} deps.webRTC      The WebRTC stack.\n * @param  {Object} sessionOptions\n * @param  {string} sessionOptions.callId the local call id.\n * @param  {Object} sessionOptions.sdpSemantics semantics for the SDP to use (`'unified-plan'` or `'plan-b'`). It implies video and audio constraints.\n * @param  {Object} sessionOptions.turnInfo TURN information, contains server info.\n * @param  {string} sessionOptions.trickleIceMode the mode to enable for Trickle ICE.\n * @param  {number} sessionOptions.iceCollectionDelay Time, in milliseconds, to delay in between\n *    ICE candidate checks. If ICE collection does not complete normally, the SDK will check\n *    collected candidates at this interval to determine if the operation can continue.\n * @param  {number} sessionOptions.maxIceTimeout Maximum time, in milliseconds, to wait for ICE\n *    collection to complete normally. After this time, the process will timeout and the\n *    operation will attempt to continue no matter how many candidates have been collected.\n * @param  {Function} sessionOptions.iceCollectionCheck Function to check whether collected candidates\n *    can be used to continue the operation. The function will receive an array of ICE\n *    candidates and must return a boolean value of whether the SDK should attempt to continue\n *    the operation. By default, the check is to ensure at least one relay candidate has been\n *    collected.\n * @param  {Object} sessionOptions.offer an offer containing an SDP.\n * @return {string} sessionId an identifier for the session.\n */\nexport function * setupIncomingCall (deps, sessionOptions) {\n  const { webRTC } = deps\n  const {\n    sdpSemantics,\n    turnInfo,\n    trickleIceMode,\n    callId,\n    iceCollectionDelay,\n    maxIceTimeout,\n    iceCollectionCheck,\n    removeBundling\n  } = sessionOptions\n  const offer = sessionOptions.offer\n\n  const log = logManager.getLogger('CALL', callId)\n  log.info('Setting up remote WebRTC portions of call.')\n\n  const session = yield call([webRTC.sessionManager, 'create'], {\n    peer: {\n      rtcConfig: {\n        sdpSemantics,\n        iceServers: turnInfo.servers\n      },\n      trickleIceMode,\n      iceCollectionDelay,\n      maxIceTimeout,\n      iceCollectionCheck,\n      removeBundling\n    }\n  })\n\n  // Trigger a new action specifying that the session has been created\n  yield put(\n    callActions.sessionCreated(callId, {\n      webrtcSessionId: session.id\n    })\n  )\n\n  /*\n   * Run the remote SDP offer through any SDP handlers provided, then set it\n   *    as the Session's remote description.\n   * This is the \"pre set remote\" stage.\n   */\n  const callConfigOptions = yield select(getOptions)\n  offer.sdp = yield call(runPipeline, callConfigOptions.sdpHandlers, offer.sdp, {\n    callId,\n    type: offer.type,\n    step: 'set',\n    endpoint: 'remote'\n  })\n\n  yield call([session, 'processOffer'], {\n    type: 'offer',\n    sdp: offer.sdp\n  })\n\n  log.info('Finished setting up remote WebRTC portions of call.')\n  return session.id\n}\n\n/**\n * Prepares the WebRTC portions of answering a call\n *\n * @method answerWebrtcSession\n * @param  {Object} deps\n * @param  {Object} deps.webRTC      The WebRTC stack.\n * @param  {Object} mediaConstraints Video and audio media constraints\n * @param  {boolean} mediaConstraints.audio Whether to enable audio or not\n * @param  {boolean} mediaConstraints.video Whether to enable video or not\n * @param  {Object} sessionOptions\n * @param  {string} sessionOptions.sessionId the local webrtc session id\n * @param  {string} sessionOptions.callId the local call id\n * @param  {Object} [sessionOptions.bandwidth] Contains configuration details for setting bandwidth\n * @return {Object} Object\n * @return {string} Object.answerSDP Session Description Protocol for answer\n * @return {string} Object.mediaId an identifier for media\n */\nexport function * answerWebrtcSession (deps, mediaConstraints, sessionOptions) {\n  const { webRTC } = deps\n  const { sessionId, bandwidth, dscpControls, callId } = sessionOptions\n\n  const log = logManager.getLogger('CALL', callId)\n  log.info('Setting up local WebRTC portions of call.')\n\n  // Get the webRTC session that represents this call.\n  const session = yield call([webRTC.sessionManager, 'get'], sessionId)\n\n  if (!session) {\n    log.error(`Error: webRTC session ${sessionId} not found.`)\n    return\n  }\n\n  const { medias, error } = yield call(mediaOps.createLocal, webRTC, mediaConstraints)\n\n  if (error) {\n    log.debug('Failed to get media requested for the call.')\n    return { error }\n  }\n\n  let screenTracks = []\n  let audioTracks = []\n  let videoTracks = []\n  let allTracks = []\n\n  // Add the tracks to the session.\n  for (const eachMedia of medias) {\n    const tracks = yield call([eachMedia.media, 'getTracks'])\n    if (eachMedia.type === 'screen') {\n      screenTracks = [...screenTracks, ...tracks]\n    } else if (eachMedia.type === 'audio') {\n      audioTracks = [...audioTracks, ...tracks]\n    } else if (eachMedia.type === 'video') {\n      videoTracks = [...videoTracks, ...tracks]\n    }\n    allTracks = [...allTracks, ...tracks]\n  }\n\n  const dscpTrackMapping = getTrackDscpMapping(audioTracks, videoTracks, screenTracks, dscpControls)\n\n  yield call([session, 'addTracks'], allTracks, dscpTrackMapping)\n\n  /*\n   * Create the local SDP answer, run it through any provided SDP handlers,\n   *    then set it as the Session's local description.\n   */\n  let answer = yield call([session, 'createAnswer'])\n  const callConfigOptions = yield select(getOptions)\n  // This is the \"pre set local\" stage.\n  answer.sdp = yield call(runPipeline, callConfigOptions.sdpHandlers, answer.sdp, {\n    callId,\n    type: answer.type,\n    step: 'set',\n    endpoint: 'local',\n    bandwidth\n  })\n  try {\n    answer = yield call([session, 'setLocalDescription'], answer)\n  } catch (e) {\n    return {\n      error: true,\n      answerSDP: null,\n      mediaIds: null\n    }\n  }\n\n  // Run the SDP through the Pipeline again before we send it to the remote side.\n  //    This is the \"pre send local\" stage.\n  // Assign it to a new variable because some browsers enforce the read-only\n  //    properties of a RTCSessionDescription object. The object from\n  //    setLocalDescription is enforced read-only, but the `offer` before that\n  //    is not enforced.\n  const newSdp = yield call(runPipeline, callConfigOptions.sdpHandlers, answer.sdp, {\n    callId,\n    type: answer.type,\n    step: 'send',\n    endpoint: 'local',\n    bandwidth\n  })\n\n  log.info('Finished setting up local WebRTC portions of call.')\n\n  return {\n    error: false,\n    answerSDP: newSdp,\n    mediaIds: medias.map(media => media.media.id)\n  }\n}\n","import { logManager } from '../../logs'\nimport BasicError, { callCodes } from '../../errors'\n\n// Libraries.\nimport { call } from 'redux-saga/effects'\n\nconst log = logManager.getLogger('CALLSTACK')\n\n/**\n * Use the WebRTC stack to create a local Media object.\n * @method createLocal\n * @param  {Object} webRTC           The WebRTC stack.\n * @param  {Object} mediaConstraints The native gUM constraints.\n * @return {Object} Results object, with either `media` or `error` property.\n */\nexport function * createLocal (webRTC, mediaConstraints) {\n  log.debug('Getting media with constraints: ', mediaConstraints)\n\n  // Default return values.\n  const result = { medias: [], error: false }\n\n  try {\n    if (mediaConstraints.screenShare) {\n      const screenShareContraints = {\n        video: mediaConstraints.screenShare\n      }\n\n      const screenShareMedia = yield call([webRTC.media, 'createLocalScreen'], screenShareContraints)\n      result.medias.push({\n        type: 'screen',\n        media: screenShareMedia\n      })\n    }\n\n    if (mediaConstraints.audio) {\n      const audioConstraints = {\n        audio: mediaConstraints.audio\n      }\n      const audioMedia = yield call([webRTC.media, 'createLocal'], audioConstraints)\n      result.medias.push({\n        type: 'audio',\n        media: audioMedia\n      })\n    }\n\n    if (mediaConstraints.video) {\n      const videoConstraints = {\n        video: mediaConstraints.video\n      }\n      const videoMedia = yield call([webRTC.media, 'createLocal'], videoConstraints)\n      result.medias.push({\n        type: 'video',\n        media: videoMedia\n      })\n    }\n  } catch (err) {\n    let errMessage\n    if (err.name === 'OverconstrainedError') {\n      errMessage = `Failed to get media due to constraint: ${err.constraint}.`\n    } else {\n      errMessage = `Failed to get media => Name: ${err.name}; Error Message :${err.message}.`\n    }\n\n    log.info(errMessage)\n\n    // Clean up successfull media object when there is partial media failure.\n    for (const eachMedia of result.medias) {\n      yield call([eachMedia.media, 'stop'])\n    }\n\n    result.error = new BasicError({\n      message: errMessage,\n      code: callCodes.USER_MEDIA_ERROR\n    })\n  }\n\n  return result\n}\n","// Callstack plugin.\nimport runPipeline from '../sdp/pipeline'\nimport { getTrackDscpMapping } from '../utils/dscp'\n\n// Other Plugins\nimport { logManager } from '../../logs'\nimport BasicError, { callCodes } from '../../errors'\nimport { getOptions, getCallByWebrtcSessionId } from '../../call/interfaceNew/selectors'\n\n// WebRTC operations.\nimport * as mediaOps from './media'\n\n// Libraries\nimport { call, all, select } from 'redux-saga/effects'\nimport { isEmpty, isUndefined } from 'lodash/fp'\n\nconst log = logManager.getLogger('CALLSTACK')\n\n/**\n * Recreates the internal Peer of a Session.\n * @method recreatePeer\n * @param {Object} webRTC    The WebRTC stack.\n * @param {string} sessionId The Session to act on.\n */\nexport function * recreatePeer (webRTC, sessionId) {\n  const session = yield call([webRTC.sessionManager, 'get'], sessionId)\n  if (!session) {\n    log.debug(`webRTC session ${sessionId} not found.`)\n    return\n  }\n\n  yield call([session, 'recreatePeer'])\n}\n\n/**\n * Performs the webRTC session functions associated with closing a call\n *\n * @method closeCall\n * @param {Object} webRTC A WebRTC instance\n * @param {string} sessionId the local webRTC session id, used to lookup the session object\n */\nexport function * closeCall (webRTC, sessionId) {\n  const session = yield call([webRTC.sessionManager, 'get'], sessionId)\n  if (!session) {\n    log.debug(`webRTC session ${sessionId} not found.`)\n    return\n  }\n\n  yield all(session.localTracks.map(track => call([track, 'cleanup'])))\n\n  yield call([session, 'end'])\n}\n\n/**\n * Performs webRTC portions of receiving an \"offer\" Session Description Protocol\n *\n * @method handleOffer\n * @param  {Object} deps\n * @param  {Object} deps.webRTC      The WebRTC stack.\n * @param  {string} offer Session Description protocol offer\n * @param  {string} webrtcSessionId local webrtc session id\n * @param {BandwidthControls} bandwidth bandwidth configurations to use\n * @returns {Object}\n */\nexport function * handleOffer (deps, offer, webrtcSessionId, bandwidth) {\n  const { webRTC } = deps\n  const session = yield call([webRTC.sessionManager, 'get'], webrtcSessionId)\n\n  if (!session) {\n    log.debug(`webRTC session ${webrtcSessionId} not found.`)\n    return\n  }\n\n  const { id: callId } = yield select(getCallByWebrtcSessionId, webrtcSessionId)\n\n  /*\n   * Run the remote SDP offer through any SDP handlers provided, then set it\n   *    as the Session's remote description.\n   * This is the \"pre set remote\" stage.\n   */\n  const callConfigOptions = yield select(getOptions)\n  offer = yield call(runPipeline, callConfigOptions.sdpHandlers, offer, {\n    callId,\n    type: 'offer',\n    step: 'set',\n    endpoint: 'remote'\n  })\n\n  // TODO: Make sure the session is in the correct signaling state to process an offer.\n  const error = yield call([session, 'processOffer'], {\n    type: 'offer',\n    sdp: offer\n  })\n\n  if (error) {\n    return { error }\n  }\n\n  /*\n   * Create the local SDP answer, run it through any provided SDP handlers,\n   *    then set it as the Session's local description.\n   */\n  let answer = yield call([session, 'createAnswer'])\n\n  // This is the \"pre set local\" stage.\n  answer.sdp = yield call(runPipeline, callConfigOptions.sdpHandlers, answer.sdp, {\n    callId,\n    type: answer.type,\n    step: 'set',\n    endpoint: 'local',\n    bandwidth\n  })\n\n  try {\n    answer = yield call([session, 'setLocalDescription'], answer)\n  } catch (e) {\n    return {\n      error: true,\n      answerSDP: null\n    }\n  }\n\n  // Run the SDP through the Pipeline again before we send it to the remote side.\n  //    This is the \"pre send local\" stage.\n  // Assign it to a new variable because some browsers enforce the read-only\n  //    properties of a RTCSessionDescription object. The object from\n  //    setLocalDescription is enforced read-only, but the `offer` before that\n  //    is not enforced.\n  const newSdp = yield call(runPipeline, callConfigOptions.sdpHandlers, answer.sdp, {\n    callId,\n    type: answer.type,\n    step: 'send',\n    endpoint: 'local',\n    bandwidth\n  })\n\n  return {\n    answerSDP: newSdp\n  }\n}\n\n/**\n * Performs the webRTC session functions associated with creating an SDP offer\n *\n * @method generateOffer\n * @param {Object} deps\n * @param {Object} deps.webRTC      The WebRTC stack.\n * @param {string} sessionId the local webRTC session id, used to lookup the session object\n * @param {Object} mediaDirections\n * @param {string} mediaDirections.audio mode of audio add to the sdp offer\n * @param {string} mediaDirections.video mode of video add to the sdp offer\n * @param {BandwidthControls} bandwidth bandwidth configurations to use\n * @return {Object} offer object containing a Session Description Protocol\n */\nexport function * generateOffer (deps, sessionId, mediaDirections, bandwidth) {\n  const { webRTC } = deps\n  const session = yield call([webRTC.sessionManager, 'get'], sessionId)\n\n  if (!session) {\n    log.debug(`webRTC session ${sessionId} not found.`)\n    return\n  }\n\n  const { id: callId } = yield select(getCallByWebrtcSessionId, sessionId)\n\n  /*\n   * Create the local SDP offer, run it through any provided SDP handlers,\n   *    then set it as the Session's local description.\n   */\n  // TODO: Make sure the session is in the correct signaling state to start a\n  //    renegotiation operation.\n  let offer = yield call([session, 'createOffer'], {\n    mediaDirections\n  })\n  const callConfigOptions = yield select(getOptions)\n  // This is the \"pre set local\" stage.\n  offer.sdp = yield call(runPipeline, callConfigOptions.sdpHandlers, offer.sdp, {\n    callId,\n    type: offer.type,\n    step: 'set',\n    endpoint: 'local',\n    bandwidth\n  })\n\n  try {\n    offer = yield call([session, 'setLocalDescription'], offer)\n  } catch (e) {\n    return {\n      error: true,\n      type: null,\n      sdp: null\n    }\n  }\n  // This is the \"pre send local\" stage.\n  // Assign it to a new variable because some browsers enforce the read-only\n  //    properties of a RTCSessionDescription object. The object from\n  //    setLocalDescription is enforced read-only, but the `offer` before that\n  //    is not enforced.\n  const newSdp = yield call(runPipeline, callConfigOptions.sdpHandlers, offer.sdp, {\n    callId,\n    type: offer.type,\n    step: 'send',\n    endpoint: 'local',\n    bandwidth\n  })\n\n  return { type: offer.type, sdp: newSdp }\n}\n\n/**\n * Performs the webRTC responsibilities for adding media\n *\n * @param {Object} deps\n * @param {Object} deps.webRTC      The WebRTC stack.\n * @param  {Object} mediaConstraints Video and audio media constraints\n * @param  {boolean} mediaConstraints.audio Whether to enable audio or not\n * @param  {boolean} mediaConstraints.video Whether to enable video or not\n * @param  {Object} sessionOptions\n * @param  {string} sessionOptions.sessionId the local webrtc session id\n * @param  {Object} [sessionOptions.bandwidth] Contains configuration details for setting bandwidth\n * @return {Object} Object\n * @return {string} Object.sdp An offer in the form of a Session Description Protocol\n * @return {Object} Object.media media object containing tracks\n */\nexport function * webRtcAddMedia (deps, mediaConstraints, sessionOptions) {\n  const { webRTC } = deps\n  const { medias, error } = yield call(mediaOps.createLocal, webRTC, mediaConstraints)\n  const { sessionId, bandwidth, dscpControls } = sessionOptions\n\n  if (error) {\n    return { error }\n  }\n  const session = yield call([webRTC.sessionManager, 'get'], sessionId)\n  const { id: callId } = yield select(getCallByWebrtcSessionId, sessionId)\n\n  let screenTracks = []\n  let audioTracks = []\n  let videoTracks = []\n  let allTracks = []\n\n  for (const eachMedia of medias) {\n    const tracks = yield call([eachMedia.media, 'getTracks'])\n    if (eachMedia.type === 'screen') {\n      screenTracks = [...screenTracks, ...tracks]\n    } else if (eachMedia.type === 'audio') {\n      audioTracks = [...audioTracks, ...tracks]\n    } else if (eachMedia.type === 'video') {\n      videoTracks = [...videoTracks, ...tracks]\n    }\n    allTracks = [...allTracks, ...tracks]\n  }\n\n  const dscpTrackMapping = getTrackDscpMapping(audioTracks, videoTracks, screenTracks, dscpControls)\n\n  yield call([session, 'addTracks'], allTracks, dscpTrackMapping)\n\n  /*\n   * Create the local SDP offer, run it through any provided SDP handlers,\n   *    then set it as the Session's local description.\n   */\n  // TODO: Make sure the session is in the correct signaling state to start a\n  //    renegotiation operation.\n  let offer = yield call([session, 'createOffer'])\n  const callConfigOptions = yield select(getOptions)\n  // This is the \"pre set local\" stage.\n  offer.sdp = yield call(runPipeline, callConfigOptions.sdpHandlers, offer.sdp, {\n    callId,\n    type: offer.type,\n    step: 'set',\n    endpoint: 'local',\n    bandwidth\n  })\n\n  try {\n    offer = yield call([session, 'setLocalDescription'], offer)\n  } catch (e) {\n    return {\n      error: true,\n      medias: null,\n      sdp: null\n    }\n  }\n\n  // This is the \"pre send local\" stage.\n  // Assign it to a new variable because some browsers enforce the read-only\n  //    properties of a RTCSessionDescription object. The object from\n  //    setLocalDescription is enforced read-only, but the `offer` before that\n  //    is not enforced.\n  const newSdp = yield call(runPipeline, callConfigOptions.sdpHandlers, offer.sdp, {\n    callId,\n    type: offer.type,\n    step: 'send',\n    endpoint: 'local',\n    bandwidth\n  })\n\n  let mediaStates = []\n\n  for (const eachMedia of medias) {\n    const mediaState = yield call([eachMedia.media, 'getState'])\n\n    mediaStates = [...mediaStates, mediaState]\n  }\n\n  return { error: false, medias: mediaStates, sdp: newSdp }\n}\n\n/**\n * Performs the webRTC responsibilities for removing media\n *\n * @param {Object} deps\n * @param {Object} deps.webRTC      The WebRTC stack.\n * @param {Object} sessionOptions\n * @param  {string} sessionOptions.sessionId The local webrtc session id\n * @param {Array} sessionOptions.tracks A list of track IDs to remove\n * @param  {Object} [sessionOptions.bandwidth] Contains configuration details for setting bandwidth\n * @return {Object} Object\n * @return {string} Object.sdp An offer in the form of a Session Description Protocol\n */\nexport function * webRtcRemoveMedia (deps, sessionOptions) {\n  const { webRTC } = deps\n  const { sessionId, tracks, bandwidth } = sessionOptions\n\n  // Get the tracks that we want to remove\n  const localTracksToRemove = yield call([webRTC.track, 'getTracks'], tracks)\n  // Get the indexes of undefined tracks.\n  const invalidIndexes = localTracksToRemove.reduce((acc, cur, ind) => {\n    return isUndefined(cur) ? acc.concat(ind) : acc\n  }, [])\n  // Get the track IDs of those indexes.\n  const invalidTracks = invalidIndexes.map(ind => tracks[ind])\n\n  if (!isEmpty(invalidTracks)) {\n    const message = `The following invalid track ids were provided: ${invalidTracks.join(', ')}`\n    log.debug(message)\n    return {\n      error: new BasicError({\n        code: callCodes.INVALID_PARAM,\n        message\n      })\n    }\n  }\n\n  const session = yield call([webRTC.sessionManager, 'get'], sessionId)\n  const { id: callId } = yield select(getCallByWebrtcSessionId, sessionId)\n\n  // Removes tracks from peer (Will stop tracks from being sent to remote participant).\n  // Does NOT end the tracks.\n  yield call([session, 'removeTracks'], tracks)\n\n  // TODO: This should only cleanup the removed tracks, shouldn't it?\n  // Ends the tracks.\n  // Clean-up the local tracks.\n  yield all(localTracksToRemove.map(track => call([track, 'cleanup'])))\n\n  /*\n   * Create the local SDP offer, run it through any provided SDP handlers,\n   *    then set it as the Session's local description.\n   */\n  // TODO: Make sure the session is in the correct signaling state to start a\n  //    renegotiation operation.\n  let offer = yield call([session, 'createOffer'])\n  const callConfigOptions = yield select(getOptions)\n  // This is the \"pre set local\" stage.\n  offer.sdp = yield call(runPipeline, callConfigOptions.sdpHandlers, offer.sdp, {\n    callId,\n    type: offer.type,\n    step: 'set',\n    endpoint: 'local',\n    bandwidth\n  })\n\n  try {\n    offer = yield call([session, 'setLocalDescription'], offer)\n  } catch (e) {\n    return {\n      error: true,\n      sdp: null\n    }\n  }\n  // This is the \"pre send local\" stage.\n  // Assign it to a new variable because some browsers enforce the read-only\n  //    properties of a RTCSessionDescription object. The object from\n  //    setLocalDescription is enforced read-only, but the `offer` before that\n  //    is not enforced.\n  const newSdp = yield call(runPipeline, callConfigOptions.sdpHandlers, offer.sdp, {\n    callId,\n    type: offer.type,\n    step: 'send',\n    endpoint: 'local',\n    bandwidth\n  })\n\n  return {\n    sdp: newSdp\n  }\n}\n\n/**\n * Performs the webRTC responsibilities for replacing a track\n *\n * @param {Object} webRTC A WebRTC instance\n * @param {Object} params\n * @param {string} params.sessionId The id of the session to replace the track of\n * @param {string} params.trackId The id of the track to replace\n * @param  {Object} params.mediaConstraints Video or audio media constraints\n * @param  {Object|boolean} params.mediaConstraints.audio Audio configs\n * @param  {Object|boolean} params.mediaConstraints.video Video configs\n * @param  {Object|boolean} params.mediaConstraints.screenShare Screen sharing configs\n * @returns {Object} replaceTrackResult The result of the track replace operation\n * @returns {BasicError} [replaceTrackResult.error] Error object\n * @returns {string} newTrackId The ID of the new track that we used to replace the old one.\n * @returns {Object} replaceTrackResult.oldTrackState The state of the old track before it was replaced.\n */\nexport function * webRtcReplaceTrack (webRTC, params) {\n  const { sessionId, trackId, mediaConstraints } = params\n\n  let noOfTruthyTrackTypes = 0\n  let newTrackKind\n  Object.entries(mediaConstraints).forEach(([key, value]) => {\n    if (value) {\n      noOfTruthyTrackTypes++\n      newTrackKind = key\n    }\n  })\n\n  // Need to handle both cases as valid media constraints, for example:\n  //   mediaConstraints = {video: true, audio: false, screenShare: false}\n  //   mediaConstraints = {video: true}\n  if (noOfTruthyTrackTypes !== 1) {\n    // We require exactly one new track to be provided by API.\n    return {\n      error: new BasicError({\n        code: callCodes.INVALID_PARAM,\n        message: `Require exactly one new track type to be specified. Found ${noOfTruthyTrackTypes} track types.`\n      }),\n      newTrackId: undefined\n    }\n  }\n\n  const session = yield call([webRTC.sessionManager, 'get'], sessionId)\n  const oldTrack = session.localTracks.find(track => track.id === trackId)\n\n  if (!oldTrack) {\n    return {\n      error: new BasicError({\n        code: callCodes.INVALID_PARAM,\n        message: `Old track ${trackId} not found.`\n      }),\n      newTrackId: undefined\n    }\n  }\n\n  const oldTrackState = yield call([oldTrack, 'getState'])\n  const oldTrackKind = oldTrackState.kind\n\n  // At the moment, only video & screen share are compatible tracks that can replace each other.\n  // (That's because screen share is sent as a video track to remote peer)\n  // Otherwise, the exact media type is required in order to allow a track replacement.\n  const compatibleTrackKinds =\n    (oldTrackKind === 'audio' && newTrackKind === 'audio') ||\n    (oldTrackKind === 'video' && ['video', 'screenShare'].includes(newTrackKind))\n\n  if (!compatibleTrackKinds) {\n    return {\n      error: new BasicError({\n        code: callCodes.INVALID_PARAM,\n        message: `Media constraints incompatible for old track kind: ${oldTrackKind}.`\n      }),\n      newTrackId: undefined\n    }\n  }\n\n  // Create Media\n  const { medias: newMedias, error: createLocalError } = yield call(mediaOps.createLocal, webRTC, mediaConstraints)\n  if (createLocalError) {\n    return { error: createLocalError, newTrackId: undefined }\n  }\n\n  let allNewTracks = []\n\n  // Find the new track that matches the old track we want to replace.\n  for (const eachMedia of newMedias) {\n    const newTracks = yield call([eachMedia.media, 'getTracks'])\n    allNewTracks = [...allNewTracks, ...newTracks]\n  }\n\n  let newTrack\n  for (const track of allNewTracks) {\n    // Matching the track is done this way because we need to yield to getState,\n    //    but we can't yield inside of a `.find(func)` or similar. So iterate\n    //    over the new tracks \"manually\".\n    const state = yield call([track, 'getState'])\n    if (state.kind === oldTrackKind) {\n      newTrack = track\n      break\n    }\n  }\n\n  if (!newTrack) {\n    return {\n      error: new BasicError({\n        code: callCodes.USER_MEDIA_ERROR,\n        message: `${oldTrackKind} track not found`\n      }),\n      newTrackId: undefined\n    }\n  }\n\n  // Replaces the track\n  const replaceTrackError = yield call([session, 'replaceTrack'], newTrack, { trackId })\n  if (replaceTrackError) {\n    // If cannot replace old track, cleanup the newly created track\n    yield call([newTrack, 'cleanup'])\n    return {\n      error: new BasicError({\n        code: callCodes.GENERIC_ERROR,\n        message: replaceTrackError.message\n      }),\n      newTrackId: undefined\n    }\n  }\n\n  // cleanup old track\n  yield call([oldTrack, 'cleanup'])\n\n  return {\n    newTrackId: newTrack.id,\n    oldTrackState\n  }\n}\n","// Other Plugins\nimport { logManager } from '../../logs'\nimport BasicError, { callCodes } from '../../errors'\nimport { getOptions } from '../../call/interfaceNew/selectors'\n\n// Helpers.\nimport { changeDtlsRoleTo } from '../utils'\nimport { hasSameSessionId } from '../utils/sdp'\nimport runPipeline from '../sdp/pipeline'\n\n// Libraries.\nimport { call, select } from 'redux-saga/effects'\n\n/**\n * Compares whether a new remote SDP for a Session has the same SDP session ID\n *    of the previous remote SDP.\n * @method isSameSdpSessionId\n * @param  {Object}  webRTC    The webRTC stack.\n * @param  {string}  sessionId ID of the Session under question.\n * @param  {string}  sdp       New remote SDP to compare the current one with.\n * @return {boolean}\n */\nexport function * isSameSdpSessionId (webRTC, sessionId, sdp) {\n  const session = yield call([webRTC.sessionManager, 'get'], sessionId)\n  const currentDesc = yield call([session, 'getRemoteDescription'])\n\n  // TODO: How to act when there isn't a remote SDP set?\n  // Currently: Return falsy to cause a recreate. If there isn't a remote SDP\n  //    set, it's possible we're in an error scenario.\n  if (currentDesc && currentDesc.sdp) {\n    const sameId = yield call(hasSameSessionId, currentDesc.sdp, sdp)\n    return sameId\n  }\n}\n\n/**\n * An answer SDP has been received and should be applied to the Session.\n *\n * This saga is intended to handle all webRTC scenarios where a remote answer\n *    SDP has been received and needs to be added to the Session. At this point\n *    in negotiation, a Session should have been created and a local offer SDP\n *    set. This can be for initial negotiation or for midcall renegotiation, so\n *    the Session may or may not have a \"current remote SDP\" already.\n * This saga will complete the negotiation process, as both ends will have both\n *    an offer and answer SDP set.\n * Responsibilities:\n *    1. Ensure this is a valid operation.\n *        - Session exists, Session is in correct signaling state.\n *    2. Check the answer SDP for abnormal scenarios.\n *        - DTLS role issue.\n *    3. Process the answer SDP via Session's APIs.\n * @method receivedAnswer\n * @param {Object} webRTC An instance of webRTC\n * @param {Object} sessionInfo Session related information for the operation.\n * @param {string} sessionInfo.sessionId ID for the local webRTC Session.\n * @param {string} sessionInfo.answerSdp The received answer SDP.\n * @param {Object} targetCall Information about the call that this Session is associated with.\n * @returns {Object} Error object if any have occurred. Undefined otherwise.\n */\nexport function * receivedAnswer (deps, sessionInfo, targetCall) {\n  const { webRTC } = deps\n  const log = logManager.getLogger('CALL', targetCall.id)\n  log.debug(`Processing SDP answer for session ${sessionInfo.sessionId}.`)\n\n  const sessionId = sessionInfo.sessionId\n  let answerSdp = sessionInfo.answerSdp\n  const session = yield call([webRTC.sessionManager, 'get'], sessionId)\n\n  if (!session) {\n    log.debug(`webRTC session ${sessionId} not found.`)\n    // TODO: Better error.\n    return\n  }\n  // TODO: Ensure Session is in the correct signaling state for an answer SDP.\n\n  const callConfigOptions = yield select(getOptions)\n  let sdpHandlers = callConfigOptions.sdpHandlers\n  /*\n   * If the answer we received has DTLS role of 'actpass', then this is not a\n   *    normal webRTC scenario. An answer SDP cannot have 'actpass' as the role.\n   * It is assumed that the reason for this is a slow start call.\n   */\n  if (answerSdp.includes('a=setup:actpass')) {\n    /*\n     * Change the DTLS role depending on which side of the call the user is.\n     * Change the caller to passive and the callee to active roles, because\n     *    this is how it would be set for a regular call.\n     */\n    const newRole = targetCall.isCaller ? 'passive' : 'active'\n    log.debug(`Received answer SDP has role of actpass. Changing to ${newRole}.`)\n    sdpHandlers = [...sdpHandlers, changeDtlsRoleTo(newRole)]\n  }\n\n  /*\n   * Provide the answer SDP to the Session for \"processing\".\n   * If successful, the webRTC negotiation process is considered complete.\n   */\n  let error\n  try {\n    /*\n     * Run the remote SDP answer through any SDP handlers provided, then set it\n     *    as the Session's remote description.\n     * This is the \"pre set remote\" stage.\n     */\n    answerSdp = yield call(runPipeline, sdpHandlers, answerSdp, {\n      callId: targetCall.id,\n      type: 'answer',\n      step: 'set',\n      endpoint: 'remote'\n    })\n    yield call([session, 'processAnswer'], {\n      type: 'answer',\n      sdp: answerSdp\n    })\n  } catch (err) {\n    // TODO: Better error handling.\n    log.debug(`Failed to process answer: ${err.message}`)\n    let errorInfo\n    if (err.message.includes('The order of m-lines')) {\n      errorInfo = {\n        code: 'call:10',\n        message: 'Failed to receive answer due to media negotiation mismatch.'\n      }\n    } else {\n      errorInfo = {\n        code: callCodes.GENERIC_ERROR,\n        message: `Failed to receive answer: ${err.message}`\n      }\n    }\n    error = new BasicError(errorInfo)\n  }\n\n  // TODO: Handle webRTC errors here.\n\n  return error\n}\n","import { v4 as uuidV4 } from 'uuid'\n\n// Generate a unique SDK GUID for the running SDK instance.\nconst sdkId = uuidV4()\n\nexport default sdkId\n","// Libraries.\nimport { mergeAllWith, isArray, isPlainObject } from 'lodash/fp'\nimport paramParser from 'query-string'\nimport { call, put } from 'redux-saga/effects'\n\n/**\n * Deeply merges the values of multiple objects. Objects on the left receive the values from objects on their right.\n * Unlike lodash's default merge behavior this doesn't merge arrays.\n *\n * @name mergeValues\n * @param {...Object} objects - Objects to merge\n * @return {Object} A new object containing the merged values.\n */\nexport function mergeValues (...objects) {\n  return mergeAllWith((leftValue, rightValue) => {\n    // Overwrite the default behavior of lodash's merge for arrays and simply\n    // clobber what's on the left so we don't end up with merged arrays.\n    if (isArray(leftValue)) {\n      return rightValue\n    }\n  }, objects)\n}\n\n/**\n * Utility function to convert an object to a query string.\n *\n * @param {Object} params An object of query parameters to be parsed and converted for use in a URL string\n * @param {Object} [options] Options to be passed to the query-string library\n * * @param {String} [options.arrayFormat] Format in which to compose array values which were passed as query parameters\n */\nexport function toQueryString (params = {}, options = {}) {\n  if (Object.keys(params).length > 0) {\n    const stringifiedParams = paramParser.stringify(params, options)\n    return '?' + stringifiedParams\n  }\n  return ''\n}\n\n/**\n * Higher-order function to auto-restart sagas when they crash.\n * Based on: https://github.com/redux-saga/redux-saga/pull/644#issuecomment-266454875\n * @method autoRestart\n * @param  {Generator} saga The saga to wrap.\n * @return {Generator} Wrapped saga.\n */\nexport function autoRestart (saga) {\n  return function * autoRestarting (...args) {\n    // Only restart the saga if it crashed; avoid restarting it if\n    //      it returned normally.\n    let shouldRestart = false\n    do {\n      try {\n        yield call(saga, ...args)\n        shouldRestart = false\n      } catch (e) {\n        // TODO: Re-add this log line.\n        // Importing the LogManager in this file breaks tests for an unknown\n        //    reason. Should find out why so that we can log in our utils.\n        // log.error(`Unhandled error in saga ${saga.name}.`, e)\n        console.log(`Unhandled error in saga ${saga.name}.`, e)\n        shouldRestart = true\n      }\n    } while (shouldRestart)\n  }\n}\n\n/**\n * Forwards the actions by directly dispatching them.\n * For example, this can be used with a takeEvery effect to grab actions from a channel and dispatch them.\n * @param {Object} action The action to be forwarded.\n * @example\n * const channel = eventChannel(...)\n * yield takeEvery(channel, forwardAction)\n */\nexport function * forwardAction (action) {\n  yield put(action)\n}\n\n/**\n * Ensures that services are in the same format understood by the server regardless,\n * of whether the client provides services as strings or objects.\n * @param {Array} services The list of services requested by the client.\n * @return {Array} A normalized list of services requested by the client.\n */\nexport function normalizeServices (services = []) {\n  return services.map(service => {\n    if (isPlainObject(service) && service.hasOwnProperty('service')) {\n      return service\n    }\n    return { service: service }\n  })\n}\n","/**\n * This wrapper generates error messages from v8n Validation Errors. https://imbrn.github.io/v8n/api/#validationerror\n * They are logged using LogManager as a warning to our customers when they mess up arguments.\n * To use: `import { enums, validation as v8n, parse } from '<relativePath>/common/validation'`.\n * Build up your validation using v8n.string, v8n.number, v8n.schema, enums, etc.\n * Enums is not part of the v8n library, but provided here for ease of use\n * const v8nValidation = v8n.schema({\n      sdpSemantics: enums(['unified-plan', 'plan-b']),\n      iceServers: v8n.array(),\n      iceCollectionDelay: v8n.positive(),\n      serverTurnCredentials: v8n.boolean(),\n      iceCollectionCheck: v8n.optional(v8n.function())\n    })\n * Create a validator like this: `const parseOptions = parse('nameOfArg', v8nValidation)`\n * Run that validator against the actual values: `parseOptions(options)`\n * Returns the input either way and logs errors, in the future will throw errors on invalid data.\n */\nimport { __, concat, flatMap, isArray, isEmpty, join, map, partial } from 'lodash/fp'\nimport { logManager } from '../../logs'\nimport v8n from 'v8n'\n\n// Custom v8n Rules - https://imbrn.github.io/v8n/api/#extend\nv8n.extend({\n  function: () => value => typeof value === 'function'\n})\n\n// EXPORTS / IO\nexport const validation = v8n()\n\n// TODO: Add an enums function to the v8n library\n// Use as such: `prop: enums( [ 'red', 'blue', 'green' ] )\nexport const enums = values => {\n  // Map iteratee isn't just `v8n().exact` due to v8n() returning a new ProxyContext each time\n  const v8nExact = value => v8n().exact(value)\n  const exactValues = map(v8nExact)(values)\n  return v8n().passesAnyOf(...exactValues)\n}\n\n// Name -> v8nRule -> Input -> [String]\nexport const errorMessages = name => v8nRule => input =>\n  flatMap(validationErrorMessages(name))(validationResults(v8nRule)(input))\n\nexport const validationResults = v8nRule => input => v8nRule.testAll(input)\n\n// (Name, v8nRule) -> Input -> IO Input\nexport const parse = (name, v8nRule) => input => {\n  const errors = errorMessages(name)(v8nRule)(input)\n\n  if (isEmpty(errors)) {\n    return input\n  } else {\n    const log = logManager.getLogger('VALIDATION')\n    log.info(prettyPrint(errors)) // This is an IO side-effect\n    return input\n  }\n}\n\n// DEFINITIONS\n\n// Name -> ValidationError -> [String]\n// https://imbrn.github.io/v8n/api/#validationerror\nconst validationErrorMessages = name => validationError => {\n  const startingPath = []\n  return validationErrorMessageHelper(startingPath)(name)(validationError)\n}\n\n// [String] -> Name -> ValidationError -> [String]\nconst validationErrorMessageHelper = acc => name => ({ cause, rule, target, value }) => {\n  const path = concat(acc)(target || name)\n  if (isArray(cause)) {\n    const newVEM = validationErrorMessageHelper(path)(target)\n    return flatMap(newVEM)(cause)\n  } else {\n    return `${join('.')(path)} has value of '${value}', but it should be ${ruleMessage(rule)}`\n  }\n}\n\n// Rule -> String\n// https://imbrn.github.io/v8n/api/#rule\nconst ruleMessage = ({ name, args }) => {\n  switch (name) {\n    case 'schema':\n      return 'Schema'\n\n    case 'passesAnyOf':\n      return `any of '${join(\"', '\")(map(enumName)(args))}'`\n\n    case 'between':\n      return `between ${args.join(', ')}`\n\n    default:\n      return `${aOrAn(name)} ${name}`\n  }\n}\n\n// HELPERS\nconst enumName = arg => arg.chain[0].args // v8n internals\nconst prettyPrint = partial(JSON.stringify)([__, null, 4])\n// https://dictionary.cambridge.org/grammar/british-grammar/a-an-and-the\nconst aOrAn = string => (/[aeiou]/i.test(string[0]) ? 'an' : 'a')\n","/**\n * Returns the version of the currently running SDK.\n *\n * It must be used by any plugins (including the factory) as the unique source of truth when it comes to determine the current SDK version.\n * The actual version value is provided by the build process scripts (aka webpack.config.***.js) which simply do a string substitution\n * for the @@ tag below with actual version value.\n */\nexport function getVersion () {\n  return '4.24.0-beta.601'\n}\n","/**\n * This file is a plugin for the \"Config\" plugin\n * Reference info: https://confluence.genband.com/display/KSDK/Plugins\n */\nimport pluginInterface from './interface'\n\n/**\n * Config Plugin\n *\n * @method configImplementation\n * @return {Object} An instance of the \"Config\" plugin.\n */\n\n// yarn lint:docs complains if this isn't defined in a plugin.\n/**\n * @module config\n */\nexport default function configImplementation () {\n  return {\n    // Interface Components:\n    name: pluginInterface.name,\n    capabilities: ['config'],\n    api: pluginInterface.api,\n    reducer: pluginInterface.reducer\n  }\n}\n","const PREFIX = '@@KANDY/'\n\nexport const CONFIG_UPDATE = PREFIX + 'CONFIG_UPDATE'\n\nexport const SET_SDP_HANDLERS = PREFIX + 'SET_SDP_HANDLERS'\n","import * as actionTypes from './actionTypes'\nimport { sanitizeSdesFromSdp, modifySdpBandwidth } from '../../callstack/utils'\nimport { createCodecRemover } from '@kandy-io/sdp-handlers'\n\n/**\n * Add or update a specific key within the store.config.\n *\n * @param {Object} values The values that will be placed in the store.\n * @param {string} [pluginName] The plugin name of the config being set.\n * @return {Action} action A redux action.\n */\nexport function update (values, pluginName = '') {\n  var payload\n  // Use the plugin name as a substate key, if present.\n  if (pluginName) {\n    payload = {\n      [pluginName]: values\n    }\n  } else {\n    payload = values\n  }\n\n  return {\n    type: actionTypes.CONFIG_UPDATE,\n    payload: payload\n  }\n}\n\n/**\n * Updates the SDP Handlers in the call plugin configs\n *\n * @method setSdpHandlers\n * @param {Array<call.SdpHandlerFunction>} sdpHandlers The list of SDP handler to set in the config.\n * @param {Object}                         options     Options to configure extra sdp handlers\n * @returns {Object} A flux standard action.\n */\nexport function setSdpHandlers (sdpHandlers, options) {\n  /*\n   * Set SDP handlers to be used for every operation:\n   *\n   * 1. Application provided SDP handlers.\n   *\n   * 2. Disable DTLS-SDES crypto method (ie. delete the line) if there's a better\n   *    crypto method enabled. WebRTC only allows one method to be enabled.\n   *    This is needed for interoperability with non-browser endpoints that include\n   *    SDES as a fallback method.\n   *\n   * 3. [optional] Disable H264 Codecs for video calls, used to reduce SDP size\n   *\n   * 4. Modify sdp and add bandwidth limits on it if bandwidth controls are provided.\n   */\n  if (options.removeH264Codecs) {\n    sdpHandlers.push(createCodecRemover(['H264']))\n  }\n  sdpHandlers.push(sanitizeSdesFromSdp)\n  sdpHandlers.push(modifySdpBandwidth)\n\n  return {\n    type: actionTypes.SET_SDP_HANDLERS,\n    payload: {\n      sdpHandlers\n    }\n  }\n}\n","import * as actions from './actions'\nimport { getConfiguration } from './selectors'\n\nimport { logManager, API_LOG_TAG } from '../../logs'\n\nconst log = logManager.getLogger('CONFIG')\n\nexport default function api (context) {\n  const configApi = {\n    /**\n     * Gets the current configuration Object. This is the object that is initially set as part of SDK creation using 'create' function.\n     *\n     * @public\n     * @memberof api\n     * @requires config\n     * @method getConfig\n     * @returns {Object} A configuration Object.\n     */\n    getConfig: function () {\n      log.debug(API_LOG_TAG + 'getConfig')\n      return getConfiguration(context.getState())\n    },\n\n    /**\n     * Update values in the global Config section of the store. The values pertain to the SDK configuration.\n     *\n     * @public\n     * @static\n     * @memberof api\n     * @requires config\n     * @method updateConfig\n     * @param {Object} newConfigValues Key-value pairs that will be placed into the store. See {@link config} for details on what key-value pairs are available for use.\n     */\n    updateConfig: function (newConfigValues) {\n      log.debug(API_LOG_TAG + 'updateConfig: ', newConfigValues)\n      context.dispatch(actions.update(newConfigValues))\n    }\n  }\n\n  return configApi\n}\n","import api from './api'\nimport reducer from './reducers'\n\n/**\n * This interface is for a Config plugin.\n * @type {string}\n */\nconst name = 'config'\n\nexport default {\n  reducer,\n  name,\n  api\n}\n","import * as actionTypes from './actionTypes'\nimport { handleActions } from 'redux-actions'\nimport { merge } from 'lodash/fp'\n\nconst reducers = {}\n\nreducers[actionTypes.CONFIG_UPDATE] = {\n  next (state, action) {\n    return merge(state, action.payload)\n  }\n}\n\nreducers[actionTypes.SET_SDP_HANDLERS] = {\n  next (state, action) {\n    return {\n      ...state,\n      call: {\n        ...state.call,\n        sdpHandlers: action.payload.sdpHandlers\n      }\n    }\n  }\n}\n\n// Config default state is an empty Object\nconst reducer = handleActions(reducers, {})\nexport default reducer\n","import { cloneDeep } from 'lodash/fp'\n\n/**\n * Retrieves configuration Object stored in state\n *\n * @method getConfiguration\n * @param  {Object} state Redux state.\n * @return {Object}\n */\nexport function getConfiguration (state) {\n  return cloneDeep(state.config)\n}\n","// Connectivity plugin.\nimport { name, reducer, api } from '../interface'\nimport eventsMap from '../interface/events'\nimport { wsConnectFlow } from './sagas'\n\n// Other plugins.\nimport { update as updateConfig } from '../../config/interface/actions'\nimport { mapEvents } from '../../events/interface/actions'\n\n// Libraries.\nimport { put } from 'redux-saga/effects'\nimport { connCheckResponsibility } from '../../constants'\n\n/**\n * Base Connectivity plugin factory.\n * Responsible for handling websockets.\n * @method baseConnectivity\n * @param  {Object} [options={}] Connectivity configs. See above.\n * @return {Object} Plugin - A connectivity plugin.\n */\nexport default function baseConnectivity (options) {\n  // For backwards compatibility, convert the old style to the new style.\n  if (typeof options.method === 'string') {\n    const method = options.method\n    options.method = {\n      type: method,\n      // In both old scenarios, the client is responsible.\n      responsibleParty: connCheckResponsibility.CLIENT\n    }\n  }\n\n  function * init () {\n    yield put(updateConfig(options, name))\n    yield put(mapEvents(eventsMap))\n  }\n\n  return {\n    sagas: [wsConnectFlow],\n    init,\n    name,\n    reducer,\n    api\n  }\n}\n","// Connectivity plugin.\nimport { openWebsocket, closeWebsocket, wsEmitter } from './websocket'\nimport { getConnectivityConfig, getPingInterval, getCheckConnectivity } from '../interface/selectors'\nimport * as actionTypes from '../interface/actionTypes'\nimport * as actions from '../interface/actions'\n\n// Other plugins.\nimport { getConnectionInfo } from '../../auth/interface/selectors'\nimport { getSubscriptionInfo } from '../../subscription/interface/selectors'\nimport { logManager } from '../../logs'\n\n// Libraries.\nimport { takeEvery, delay, call, put, fork, cancel, actionChannel, race, select, take } from 'redux-saga/effects'\n\n// Constants\nimport { platforms, connCheckMethods, connCheckResponsibility } from '../../constants'\n\n// Get the logger\nconst log = logManager.getLogger('CONNECTIVITY')\n\nexport function * wsConnectFlow () {\n  log.info('Creating channel for handling websocket actions ...')\n  const chan = yield actionChannel(actionTypes.WS_ATTEMPT_CONNECT)\n  log.info('Channel successfuly created.')\n  yield takeEvery(chan, websocketLifecycle)\n}\n\n/**\n * Saga that handles a websocket over its lifecycle.\n * @method websocketLifecycle\n * @param  {Object} wsConnectAction\n */\nexport function * websocketLifecycle (wsConnectAction) {\n  const wsInfo = wsConnectAction.payload\n  const { platform, isReconnect } = wsConnectAction.meta\n\n  log.info(`Connecting to websocket on platform: ${platform} ...`)\n  // Try to open the websocket.\n  const websocket = yield call(connectWebsocket, wsInfo, platform)\n\n  // Append information to the websocket, so that its accessible elsewhere.\n  // TODO: Remove this and replace with proper redux state storage.\n  websocket.kandy = yield select(getConnectivityConfig)\n\n  websocket.kandy.wsInfo = wsInfo\n  websocket.kandy.platform = platform\n\n  // If the websocket didn't open, dispatch the error and stop here.\n  if (websocket.error) {\n    if (isReconnect) {\n      yield put(actions.wsReconnectFailed(undefined, platform))\n      return\n    } else {\n      yield put(actions.wsConnectFinished(new Error(websocket.message), platform))\n      return\n    }\n  }\n\n  // set last contact in both cases to be now\n  websocket.kandy.lastContact = Date.now()\n\n  const emitTask = yield fork(wsEmitter, websocket, platform)\n\n  // determine which pingFlow is appropriate\n  let pingFlow\n  if (websocket.kandy.method.responsibleParty === connCheckResponsibility.SERVER) {\n    log.debug(`Starting a serverPing flow on ${platform} ...`)\n    pingFlow = yield fork(serverPingFlow, websocket, platform)\n  } else {\n    log.debug(`Starting a clientPing flow on ${platform} ...`)\n    pingFlow = yield fork(clientPingFlow, websocket, platform)\n  }\n\n  // Dispatch the finish action, to notify that the websocket is connected.\n  yield put(actions.wsConnectFinished(websocket, platform))\n\n  // Redux-saga take() pattern.\n  // Take end of lifecycle WS actions for this platform.\n  function closeWebsocketPattern (action) {\n    return (\n      (action.type === actionTypes.WS_DISCONNECT || action.type === actionTypes.LOST_CONNECTION) &&\n      action.meta.platform === platform\n    )\n  }\n\n  // Wait for a disconnect or lost connection action.\n  const action = yield take(closeWebsocketPattern)\n  log.debug(`Cancelling outstanding tasks upon receiving action: ${action.type}`)\n\n  // Whether we're disconnecting or have lost connection,\n  //      we want to cancel these tasks either way.\n  yield cancel([emitTask, pingFlow])\n\n  if (action.type === actionTypes.WS_DISCONNECT) {\n    // If we're disconnecting, close the websocket to end it's lifecycle.\n    log.debug('Closing websocket connection ...')\n    yield call(closeWebsocket, websocket)\n    yield put(actions.wsDisconnectFinished(undefined, platform))\n    log.info('Successfully closed websocket connection.')\n  } else {\n    // If this is a Link websocket, we need to ensure the URL is using the\n    //     \"latest\" access token from state.\n    if (wsConnectAction.meta.platform === platforms.UC) {\n      log.info('Updating access token ...')\n      const { notificationChannel } = yield select(getSubscriptionInfo)\n      const { accessToken, oauthToken } = yield select(getConnectionInfo)\n      wsInfo.url = notificationChannel\n      if (oauthToken && !accessToken) {\n        wsInfo.params = {\n          access_token: oauthToken\n        }\n      } else {\n        wsInfo.params = {\n          token: accessToken\n        }\n      }\n    } else if (wsConnectAction.meta.platform === platforms.LINK) {\n      const { bearerAccessToken } = yield select(getConnectionInfo)\n      wsInfo.params = {\n        token: bearerAccessToken\n      }\n    }\n\n    // If we've lost connection, re-dispatch the initial action, so that we can\n    //      start the lifecycle over.\n    log.debug('Attempting to reconnect to websocket ...')\n    yield put(actions.wsAttemptConnect(wsInfo, wsConnectAction.meta.platform, true))\n  }\n}\n\n/**\n * if we receive a server ping we want to respond with a pong,\n * if there is none we want to check to see if its been too long since the server last pinged us and if it has been then reconnect,\n * otherwise we just want to increment the time since the last ping\n * @param {Object} ws a websocket connected to the backend\n * @return {Object} yields a Flux standard action\n */\nexport function * serverPingFlow (ws) {\n  const { lastContact, platform, maxMissedPings, autoReconnect } = ws.kandy\n  let timeOfLastPing = Date.now()\n\n  while (true) {\n    let pingInterval = yield select(getPingInterval)\n    pingInterval = typeof pingInterval !== 'undefined' ? pingInterval : 120000\n    const maxIdleDuration = pingInterval * maxMissedPings\n    log.debug(`serverPing: Using ping interval: ${pingInterval} with maximum idle duration: ${maxIdleDuration}`)\n\n    // wait for incoming server pings or disconnect actions on an interval\n    const { serverPing, disconnect } = yield race({\n      expiry: delay(pingInterval),\n      serverPing: take(actionTypes.RECEIVE_SERVER_PING),\n      disconnect: take(actionTypes.WS_DISCONNECT_FINISHED)\n    })\n\n    // is disconnect action received then exit\n    if (disconnect) {\n      log.debug('Got disconnect action. Exiting from serverPing flow ...')\n      break\n    }\n\n    if (serverPing) {\n      // server sent us a ping so reset the timeSinceLastPing\n      timeOfLastPing = Date.now()\n\n      // pingInterval is stored in milliseconds but comes in as seconds so convert\n      const pingIntervalMillis = serverPing.payload.connCheck.interval * 1000\n      // Prevent firing actions if pingInterval hasn't changed\n      if (pingIntervalMillis !== pingInterval) {\n        yield put(actions.changePingInterval(pingIntervalMillis, platform))\n      }\n\n      const message = { connAck: {} }\n      log.debug(\n        `Received a server ping which uses interval: ${pingIntervalMillis} ms. ${platform} is replying with message: ${message}`\n      )\n      const error = _sendWSMessage(ws, JSON.stringify(message))\n\n      // if the pong websocket message has an error then try to reconnect\n      if (error) {\n        log.error(`Got error when attempting to reply: ${error.message}`)\n        if (autoReconnect) {\n          log.info('Trying to auto reconnect ...')\n          yield put(actions.lostConnection(undefined, platform))\n        }\n        break\n      }\n    } else {\n      if (Date.now() - timeOfLastPing >= maxIdleDuration) {\n        log.warn('Closing websocket due to inactivity. (have not received pong from server)', platform)\n\n        // try to reconnect or exit\n        if (autoReconnect) {\n          log.debug(`${platform} is attempting to auto reconnect ...`)\n          yield put(actions.lostConnection(undefined, platform))\n        }\n        break\n      } else {\n        log.debug(`${platform} websocket last contact: ${lastContact}. Reconnect after ${maxIdleDuration}.`)\n      }\n    }\n  }\n}\n\n/**\n * This flow is responsible for handling keepAlive and pingPong methods for client,\n * if keepAlive is used the client simply sends the keepAlive message to the websocket after waiting the pingInterval\n * if pingPong is used the client is responsible for pinging the server and listening for server \"pong\" responses via the websocket\n * the client will then determine if too much time has passed and attempt to reconnect if its not receiving server pongs or if an error occurs\n * @param {Object} ws a websocket connected to the backend\n * @return {Object} yields a Flux standard action\n */\nexport function * clientPingFlow (ws) {\n  const { lastContact, platform, maxMissedPings, autoReconnect } = ws.kandy\n  const { checkConnectivity, method } = yield select(getConnectivityConfig)\n\n  let timeOfLastPong = Date.now()\n  let message = ''\n  let shouldCheck\n\n  while (true) {\n    // If the flag was explicitly set in state, prefer that over the config.\n    shouldCheck = yield select(getCheckConnectivity)\n    shouldCheck = typeof shouldCheck !== 'undefined' ? shouldCheck : checkConnectivity\n\n    const { pingInterval } = yield select(getConnectivityConfig)\n    const maxIdleDuration = pingInterval * maxMissedPings\n    const intervalInSeconds = pingInterval / 1000\n\n    if (shouldCheck) {\n      if (method.type === connCheckMethods.PING_PONG) {\n        message = { connCheck: { interval: intervalInSeconds } }\n      } else if (method.type === connCheckMethods.KEEP_ALIVE) {\n        message = { message_type: 'ping' }\n      } else {\n        log.error(`Invalid connectivity method: ${method}`)\n        break\n      }\n\n      log.debug(`${platform} is sending a ${method.type} every ${intervalInSeconds} sec.`)\n\n      const error = _sendWSMessage(ws, JSON.stringify(message))\n      if (error) {\n        log.error('Exception in clientPing flow: ' + error.message)\n        if (autoReconnect) {\n          log.debug(`${platform} is attempting to auto reconnect ...`)\n          yield put(actions.lostConnection(undefined, platform))\n        }\n        break\n      }\n    } else {\n      log.debug('Set to not check websocket connectivity. Waiting for connectivity status change ...')\n\n      // If we shouldn't ping, wait until we receive a trigger to (maybe) ping.\n      const shouldCheckConnectivity = yield take(\n        action => action.type === 'CHANGE_CONNECTIVITY_CHECKING' && action.payload\n      )\n      log.debug(`Connectivity check setting changed. Check connectivity?: ${shouldCheckConnectivity}`)\n      continue\n    }\n\n    const delayStartTime = Date.now()\n    // Wait for either the ping interval, a disconnect or a pong from the server\n    const { disconnect, serverPong } = yield race({\n      expiry: delay(pingInterval),\n      serverPong: take(actionTypes.RECEIVE_SERVER_PONG),\n      disconnect: take(actionTypes.WS_DISCONNECT_FINISHED)\n    })\n\n    // If we receive a serverPong, we will not have waited the full pingInterval duration.\n    //    Determine how long we were waiting for, so that we know how long to wait (again)\n    //    to fulfill the full pingInterval duration (before restarting the ping loop).\n    const timeElapsed = Date.now() - delayStartTime\n\n    // If we received a disconnect action, stop the pings and exit.\n    if (disconnect) {\n      log.debug('Got disconnect action. Exiting from clientPing flow ...')\n      break\n    }\n\n    if (method.type === connCheckMethods.PING_PONG) {\n      if (serverPong) {\n        // we received a pong, wait pingInterval to send another ping\n        timeOfLastPong = Date.now()\n\n        const timeUntilNextPing = pingInterval - timeElapsed\n        const { disconnect } = yield race({\n          expiry: delay(timeUntilNextPing),\n          disconnect: take(actionTypes.WS_DISCONNECT_FINISHED)\n        })\n        // If we received a disconnect action, stop the pings and exit.\n        if (disconnect) {\n          log.debug('Got disconnect action. Exiting from clientPing flow ...')\n          break\n        }\n      } else {\n        if (Date.now() - timeOfLastPong >= maxIdleDuration) {\n          log.warn('Closing websocket due to inactivity. (have not received pong from server)', platform)\n\n          // its been too long since the last pong, attempt to reconnect or exit\n          if (autoReconnect) {\n            yield put(actions.lostConnection(undefined, platform))\n          }\n\n          break\n        } else {\n          log.debug(`${platform} websocket last contact: ${lastContact}. Reconnect after ${maxIdleDuration}.`)\n        }\n      }\n    }\n  }\n}\n\n/**\n * Generic Websocket message that takes a websocket and a message and sends it\n * @param  {Object} ws  websocket\n * @return {Object}     Error object\n */\nfunction _sendWSMessage (ws, message) {\n  try {\n    if (ws && ws.readyState === 1) {\n      log.debug('Sending message on websocket.', message)\n      ws.send(message)\n    } else {\n      throw new Error('websocket was not in readyState')\n    }\n  } catch (e) {\n    return e\n  }\n}\n\n/**\n * Helper function for connecting to a websocket.\n * Attempts to connect a specified number of times before returning an error.\n * Includes a delay in between attempts, determined by configs.\n * @method connectWebsocket\n * @param  {Object} wsInfo\n * @return {Websocket|Object}  Either a connected websocket or an error object.\n */\nexport function * connectWebsocket (wsInfo, platform) {\n  const configs = yield select(getConnectivityConfig)\n  let connectionAttempt = 0\n  let delayTime = 0\n  let websocket\n\n  // Redux-saga take() pattern.\n  // Take disconnect websocket action for this platform.\n  function disconnectWebsocketPattern (action) {\n    return action.type === actionTypes.WS_DISCONNECT && action.meta.platform === platform\n  }\n\n  // If no limit is set, we will continually attempt to reconnect.\n  if (!configs.reconnectLimit) {\n    log.debug('No connectivity reconnect limit set.')\n  }\n\n  while (connectionAttempt < configs.reconnectLimit || !configs.reconnectLimit) {\n    try {\n      // Try to open the websocket. Blocking call.\n      websocket = yield call(openWebsocket, wsInfo)\n      log.info(`Successfully connected to websocket on: ${platform}`)\n      break\n    } catch (err) {\n      connectionAttempt++\n      websocket = err\n      log.debug(\n        `Failed to connect to websocket on ${platform}. (Attempt #${connectionAttempt}). Message: ${websocket.message}.`\n      )\n\n      // If we want to try to reconnect, delay a certain about of time before trying.\n      if (connectionAttempt < configs.reconnectLimit || !configs.reconnectLimit) {\n        // Increase the delay time if we're not at the limit.\n        if (delayTime !== configs.reconnectTimeLimit) {\n          delayTime = configs.reconnectDelay * Math.pow(configs.reconnectTimeMultiplier, connectionAttempt - 1)\n          delayTime = delayTime < configs.reconnectTimeLimit ? delayTime : configs.reconnectTimeLimit\n        }\n        log.debug(`Websocket reconnect attempt after ${delayTime} ms on ${platform}`)\n\n        // Wait for either the delay period or a trigger to stop connection attempts.\n        const { disconnect } = yield race({\n          delay: delay(delayTime),\n          disconnect: take(disconnectWebsocketPattern)\n        })\n\n        if (disconnect) {\n          break\n        }\n      } else {\n        log.debug(`Stopping websocket connection attempts on ${platform}.`)\n      }\n    }\n  }\n\n  // Return either the websocket or the latest error.\n  return websocket\n}\n","import { wsClosed, wsError, receiveServerPing, receiveServerPong } from '../interface/actions'\nimport { eventChannel, END, buffers } from 'redux-saga'\nimport { take, put, call } from 'redux-saga/effects'\n\nimport { toQueryString } from '../../common/utils'\n\n// Other plugins.\nimport { websocketNotification } from '../../notifications/interface/actions'\nimport { logManager } from '../../logs'\n\nconst INITIAL_BUFFER_SIZE = 50\nconst log = logManager.getLogger('CONNECTIVITY')\n\n/**\n * Create a new websocket.\n * @method openWebsocket\n * @param  {Object} options Websocket configuration options.\n * @param {string} options.protocol Websocket protocol to use.\n * @param {string} options.server Websocket hostname.\n * @param {string} options.port Websocket port to use.\n * @param {string} options.url Websocket notification channel.\n * @param {Object} options.params A list of URL params to attach to the websocket.\n * @return {WebSocket} ws Newly connected websocket.\n */\nexport function openWebsocket (options) {\n  // Create the websocket.\n  const ws = new WebSocket(\n    `${options.protocol}://${options.server}:${options.port}${options.url}` + toQueryString(options.params)\n  )\n\n  // Use a promise to wait for the first message from the websocket.\n  // This indicates whether the WS opened successfully or not.\n  const validateWS = new Promise((resolve, reject) => {\n    const onOpen = function () {\n      ws.onopen = null\n      ws.onerror = null\n      resolve(ws)\n    }\n    const onError = function () {\n      ws.onopen = null\n      ws.onerror = null\n\n      // TODO: Fix this?\n      /* eslint-disable-next-line prefer-promise-reject-errors */\n      reject({\n        error: true,\n        message: 'Could not connect to websocket. Received error on open.'\n      })\n    }\n    ws.onopen = onOpen\n    ws.onerror = onError\n  })\n  return validateWS\n}\n\n/**\n * Clean-up a provided websocket.\n * @method closeWebsocket\n * @param  {Websocket} ws Websocket to be cleaned-up.\n * @return {Websocket} ws The websocket after being cleaned.\n */\nexport function closeWebsocket (ws) {\n  if (ws.close) {\n    ws.close()\n  } else {\n    ws.onclose = null\n  }\n\n  ws.onmessage = null\n  ws.onopen = null\n  ws.onerror = null\n}\n\n/**\n * Create an event channel for a given websocket\n * @param  {WebSocket} ws       The websocket to make an event channel for.\n * @param {string} [platform=link]    The backend platform associated with the websocket.\n * @return {EventChannel}              The event channel corresponding to the WebSocket\n */\nfunction createWsChannel (ws, platform) {\n  // this function handles server messages\n  return eventChannel(emit => {\n    // Define handlers\n    ws.onmessage = message => {\n      // Mark this websocket are being connected as of now.\n      ws.kandy.lastContact = Date.now()\n\n      var data = JSON.parse(message.data)\n      log.debug('Received message on websocket.', data)\n      if (data.connCheck) {\n        // Handle CPaaS server pings\n        emit(receiveServerPing(data, platform))\n      } else if (data.connAck) {\n        // Handle CPaaS server pongs\n        emit(receiveServerPong(data, platform))\n      } else {\n        emit(websocketNotification(data, platform))\n      }\n    }\n    ws.onclose = data => {\n      emit(wsClosed(data, platform))\n      emit(END)\n    }\n    ws.onerror = err => {\n      emit(wsError(new Error(err), platform))\n      emit(END)\n    }\n\n    return () => closeWebsocket(ws)\n  }, buffers.expanding(INITIAL_BUFFER_SIZE))\n}\n\n/**\n * Saga worker for creating a websocket and emitting its events\n * @param {Object} ws configuration options.\n * @param {string} [platform=link]    The backend platform associated with the websocket.\n * @return {Generator}\n */\nexport function * wsEmitter (ws, platform) {\n  var wsChannel = yield call(createWsChannel, ws, platform)\n  while (true) {\n    const action = yield take(wsChannel)\n    yield put(action)\n  }\n}\n","const prefix = '@@KANDY/CONN/'\n\n// Actions to tell connectivity plugin what to do\nexport const WS_ATTEMPT_CONNECT = prefix + 'WS_ATTEMPT_CONNECT'\nexport const WS_CONNECT_FINISHED = prefix + 'WS_CONNECT_FINISHED'\nexport const WS_DISCONNECT = prefix + 'WS_DISCONNECT'\nexport const WS_DISCONNECT_FINISHED = prefix + 'WS_DISCONNECT_FINISHED'\nexport const WS_RECONNECT_FAILED = prefix + 'WS_RECONNECT_FAILED'\n\n// actions for hooking into connectivity plugin behaviour\nexport const WS_CLOSED = prefix + 'WS_CLOSED'\nexport const WS_ERROR = prefix + 'WS_ERROR'\n\nexport const LOST_CONNECTION = prefix + 'LOST_CONNECTION'\n\nexport const RECEIVE_SERVER_PING = prefix + 'RECEIVE_SERVER_PING'\nexport const RECEIVE_SERVER_PONG = prefix + 'RECEIVE_SERVER_PONG'\n\nexport const CHANGE_CONNECTIVITY_CHECKING = prefix + 'CHANGE_CONNECTIVITY_CHECKING'\nexport const CHANGE_PING_INTERVAL = prefix + 'CHANGE_PING_INTERVAL'\n","import * as actionTypes from './actionTypes'\n// Constants\nimport { platforms } from '../../constants'\n\n/**\n * @param {string} type\n */\nfunction createWsAction (type) {\n  /**\n   * @param {any=} payload\n   * @param {string=} platform\n   * @param {boolean=} [isReconnect] flag to signify if we are reconnecting or not.\n   */\n  function action (payload, platform = platforms.LINK, isReconnect = false) {\n    return {\n      type,\n      // TODO: This must check for basic error eventually instead.\n      error: payload instanceof Error,\n      payload,\n      meta: { platform, isReconnect }\n    }\n  }\n  return action\n}\n\nexport const wsAttemptConnect = createWsAction(actionTypes.WS_ATTEMPT_CONNECT)\nexport const wsDisconnect = createWsAction(actionTypes.WS_DISCONNECT)\nexport const wsConnectFinished = createWsAction(actionTypes.WS_CONNECT_FINISHED)\nexport const wsDisconnectFinished = createWsAction(actionTypes.WS_DISCONNECT_FINISHED)\nexport const wsReconnectFailed = createWsAction(actionTypes.WS_RECONNECT_FAILED)\n\nexport const wsClosed = createWsAction(actionTypes.WS_CLOSED)\nexport const wsError = createWsAction(actionTypes.WS_ERROR)\n\nexport const lostConnection = createWsAction(actionTypes.LOST_CONNECTION)\n\nexport const receiveServerPing = createWsAction(actionTypes.RECEIVE_SERVER_PING)\nexport const receiveServerPong = createWsAction(actionTypes.RECEIVE_SERVER_PONG)\n\nexport const changeConnectivityChecking = createWsAction(actionTypes.CHANGE_CONNECTIVITY_CHECKING)\nexport const changePingInterval = createWsAction(actionTypes.CHANGE_PING_INTERVAL)\n","// Constants\nimport { platforms } from '../../constants'\n\n/**\n * The 'connection' namespace is used to connect and maintain connections between\n * the SDK and one or more backend servers.\n *\n * @public\n * @namespace connection\n */\n\nimport { changeConnectivityChecking } from './actions'\nimport { getConnectionState } from './selectors'\n\nimport { logManager, API_LOG_TAG } from '../../logs'\n\nconst log = logManager.getLogger('CONNECTIVITY')\n\nexport default function api ({ dispatch, getState }) {\n  const connectivityApi = {\n    /**\n     * Get the state of the websocket.\n     * @public\n     * @memberof connection\n     * @method getSocketState\n     * @param {string} [platform='link'] Backend platform for which to request the websocket's state.\n     */\n    getSocketState (platform = platforms.LINK) {\n      log.debug(API_LOG_TAG + 'connection.getSocketState: ', platform)\n      return getConnectionState(getState(), platform)\n    },\n\n    /**\n     * Enables or disables connectivity checking.\n     * @public\n     * @memberof connection\n     * @method enableConnectivityChecking\n     * @param {boolean} enable Enable connectivity checking.\n     */\n    enableConnectivityChecking (enable) {\n      log.debug(API_LOG_TAG + 'connection.enableConnectivityChecking: ', enable)\n      dispatch(changeConnectivityChecking(enable))\n    }\n  }\n  return { connection: connectivityApi }\n}\n","import { wsAttemptConnect, wsDisconnect } from './actions'\nimport { WS_CONNECT_FINISHED, WS_DISCONNECT_FINISHED, WS_ERROR } from './actionTypes'\nimport { put, take } from 'redux-saga/effects'\n\n/**\n * Custom redux-saga effect.\n * Wraps \"communication\" between the connectivity plugin and another plugin\n *     for connecting to a websocket.\n * @method connectWebsocket\n * @param {Object} websocketInfo Information needed to create the websocket.\n * @param {string} websocketInfo.protocol\n * @param {string} websocketInfo.server\n * @param {string} websocketInfo.port\n * @param {string} websocketInfo.url\n * @param {Object} [websocketInfo.params]\n * @param {string} platform The backend platform being connected to.\n * @return {Object} The response action of type `WS_CONNECT_FINISHED`.\n */\nexport function * connectWebsocket (websocketInfo, platform) {\n  // Dispatch the action that triggers a saga to connect to a websocket.\n  yield put(wsAttemptConnect(websocketInfo, platform))\n\n  // Wait for the action that signifies the result of the above action.\n  const responseAction = yield take(action => {\n    return action.type === WS_CONNECT_FINISHED && action.meta.platform === platform\n  })\n\n  // Return the response.\n  return responseAction\n}\n\n/**\n * Effect for disconnecting a websocket to a platform.\n * @method disconnectWebsocket\n * @param  {Object} payload\n * @param  {string} platform The backend platform being disconnected from.\n * @return {Object} The response action of type `WS_DISCONNECT_FINISHED`.\n */\nexport function * disconnectWebsocket (payload, platform) {\n  // Dispatch the action that triggers a saga to disconnect the websocket.\n  yield put(wsDisconnect(payload, platform))\n\n  // Wait for the action that signifies the result of the above action.\n  const responseAction = yield take(action => {\n    return (action.type === WS_DISCONNECT_FINISHED || action.type === WS_ERROR) && action.meta.platform === platform\n  })\n\n  // Return the response.\n  return responseAction\n}\n","/**\n * The websocket to the server has changed state.\n *\n * @public\n * @memberof connection\n * @event ws:change\n * @param {Object} params\n * @param {string} params.platform The platform\n */\nexport const WS_CHANGE = 'ws:change'\n","import * as eventTypes from './eventTypes'\nimport * as actionTypes from './actionTypes'\n\nvar events = {}\n\nevents[actionTypes.WS_CONNECT_FINISHED] = function (action) {\n  if (action.error) {\n    // TODO: Handle the error case?\n  } else {\n    return {\n      type: eventTypes.WS_CHANGE,\n      args: { platform: action.meta.platform }\n    }\n  }\n}\n\nevents[actionTypes.LOST_CONNECTION] = function (action) {\n  return {\n    type: eventTypes.WS_CHANGE,\n    args: { platform: action.meta.platform }\n  }\n}\n// TODO: Differentiate between types of disconnects?\nevents[actionTypes.WS_DISCONNECT_FINISHED] = events[actionTypes.LOST_CONNECTION]\n\n// TODO: Does an app care that we're trying to connect/reconnect?\nevents[actionTypes.WS_ATTEMPT_CONNECT] = function (action) {\n  return {\n    type: eventTypes.WS_CHANGE,\n    args: { platform: action.meta.platform }\n  }\n}\n\nexport default events\n","import name from './name'\nimport api from './api'\nimport reducer from './reducers'\n\nexport { name, api, reducer }\n","const name = 'connectivity'\nexport default name\n","import * as actionTypes from './actionTypes'\nimport { handleActions } from 'redux-actions'\nimport { omit } from 'lodash/fp'\n\nconst reducers = {}\n\nreducers[actionTypes.WS_ATTEMPT_CONNECT] = {\n  next (state, action) {\n    return {\n      ...state,\n      [action.meta.platform]: {\n        ...state[action.meta.platform],\n        connected: false,\n        pinging: false\n      }\n    }\n  }\n}\n\nreducers[actionTypes.WS_RECONNECT_FAILED] = {\n  next (state, action) {\n    return {\n      ...state,\n      [action.meta.platform]: {\n        ...state[action.meta.platform],\n        connected: false,\n        pinging: false\n      }\n    }\n  }\n}\n\nreducers[actionTypes.WS_CONNECT_FINISHED] = {\n  next (state, action) {\n    return {\n      ...state,\n      [action.meta.platform]: {\n        ...state[action.meta.platform],\n        connected: true,\n        method: action.payload.kandy.method,\n        platform: action.meta.platform,\n        ...omit('checkConnectivity', action.payload.kandy)\n      }\n    }\n  },\n  throw (state, action) {\n    return {\n      [action.meta.platform]: {\n        connected: false,\n        pinging: false\n      }\n    }\n  }\n}\n\nreducers[actionTypes.LOST_CONNECTION] = {\n  next (state, action) {\n    return {\n      ...state,\n      [action.meta.platform]: {\n        ...state[action.meta.platform],\n        connected: false,\n        pinging: false\n      }\n    }\n  }\n}\n\nreducers[actionTypes.WS_DISCONNECT_FINISHED] = {\n  next (state, action) {\n    return {\n      [action.meta.platform]: {\n        connected: false,\n        pinging: false\n      }\n    }\n  },\n  throw (state, action) {\n    return {\n      [action.meta.platform]: {\n        connected: false,\n        pinging: false\n      }\n    }\n  }\n}\n\nreducers[actionTypes.WS_ERROR] = {\n  next (state, action) {\n    return {\n      [action.meta.platform]: {\n        connected: false,\n        pinging: false\n      }\n    }\n  },\n  throw (state, action) {\n    return {\n      [action.meta.platform]: {\n        connected: false,\n        pinging: false\n      }\n    }\n  }\n}\n\n/*\n  Accepts a boolean payload for checkConnectivity\n */\nreducers[actionTypes.CHANGE_CONNECTIVITY_CHECKING] = {\n  next (state, action) {\n    return {\n      ...state,\n      checkConnectivity: action.payload\n    }\n  }\n}\n\n/*\n  Accepts a payload for pingInterval in MILLISECONDS\n */\nreducers[actionTypes.CHANGE_PING_INTERVAL] = {\n  next (state, action) {\n    return {\n      ...state,\n      pingInterval: action.payload\n    }\n  }\n}\n\n/**\n * Connectivity Interface reducer\n * @method reducer\n * @param  {Object}  state - The current redux state.\n * @param  {Object}  action - A flux standard action.\n * @return {Object}  - The new redux state.\n */\nconst reducer = handleActions(reducers, {})\nexport default reducer\n","import { cloneDeep } from 'lodash/fp'\nimport name from './name'\n\nexport function getConnectionState (state, platform) {\n  if (state[name][platform]) {\n    return cloneDeep(state[name][platform])\n  } else {\n    return new Error('No sockets are up. Have you attempted to connect?')\n  }\n}\n\n/**\n * Retrieves the config options provided by the connectivity plugin.\n * @method getConnectivityConfig\n * @return {Object}\n */\nexport function getConnectivityConfig (state) {\n  return state.config[name]\n}\n\n/**\n * Retrieves the pingInterval property from state\n * @method getPingInterval\n * @param {Object} state Redux state.\n * @return {Object}\n */\nexport function getPingInterval (state) {\n  return state[name].pingInterval\n}\n\n/**\n * Retrieves the checkConnectivity property from state\n * @method getCheckConnectivity\n * @param {Object} state Redux state.\n * @return {Object}\n */\nexport function getCheckConnectivity (state) {\n  return state[name].checkConnectivity\n}\n","import baseConnectivity from '../common/base'\nimport { connCheckMethods } from '../../constants'\nimport { defaults } from 'lodash/fp'\n\n// Parse and/or Validate\nimport { validation as v8n, parse, enums } from '../../../src/common/validation'\n\nconst defaultValues = {\n  method: connCheckMethods.KEEP_ALIVE,\n  pingInterval: 30000,\n  reconnectLimit: 5,\n  reconnectDelay: 5000,\n  reconnectTimeMultiplier: 1,\n  reconnectTimeLimit: 640000,\n  autoReconnect: true,\n  maxMissedPings: 3,\n  checkConnectivity: true,\n  webSocketOAuthMode: 'query'\n}\n\n// config validation\nconst v8nValidation = v8n.schema({\n  method: enums([connCheckMethods.KEEP_ALIVE]),\n  pingInterval: v8n.positive(),\n  reconnectLimit: v8n.positive(),\n  reconnectDelay: v8n.positive(),\n  reconnectTimeMultiplier: v8n.positive(),\n  reconnectTimeLimit: v8n.positive(),\n  autoReconnect: v8n.boolean(),\n  maxMissedPings: v8n.positive(),\n  checkConnectivity: v8n.boolean(),\n  webSocketOAuthMode: v8n.string()\n})\nconst parseOptions = parse('connectivity', v8nValidation)\n\n/**\n * Configuration options for the Connectivity feature.\n * The SDK can only use keepalive as the connectivity check.\n *\n * Keep Alive: The client sends \"keepalive\" messages (to the server) on the websocket at regular intervals. This lets the server know that the client is still connected, and that it should \"keep the connection alive\".\n *\n * For more information on keepalive see here: https://en.wikipedia.org/wiki/Keepalive\n * @public\n * @name config.connectivity\n * @memberof config\n * @instance\n * @param {Object} connectivity Connectivity configs.\n * @param {Number} [connectivity.pingInterval=30000] Time in between websocket ping attempts (milliseconds).\n * @param {Number} [connectivity.reconnectLimit=5] Number of failed reconnect attempts before reporting an error. Can be set to 0 to not limit reconnection attempts.\n * @param {Number} [connectivity.reconnectDelay=5000] Base time between websocket reconnect attempts (milliseconds).\n * @param {Number} [connectivity.reconnectTimeMultiplier=1] Reconnect delay multiplier for subsequent attempts. The reconnect delay time will be multiplied by this after each failed reconnect attempt to increase the delay between attempts. eg. 5000ms then 10000ms then 20000ms delay if value is 2.\n * @param {Number} [connectivity.reconnectTimeLimit=640000] Maximum time delay between reconnect attempts (milliseconds). Used in conjunction with the reconnect time multiplier to prevent overly long delays between reconnection attempts.\n * @param {Boolean} [connectivity.autoReconnect=true] Flag to determine whether the SDK will attempt to automatically reconnect after connectivity disruptions.\n * @param {Number} [connectivity.maxMissedPings=3] Maximum pings sent (without receiving a response) before reporting an error.\n * @param {Boolean} [connectivity.checkConnectivity=true] Flag to determine whether the SDK should check connectivity.\n * @param {string} [connectivity.webSocketOAuthMode=query] query will send the bearer access token to authenticate the websocket and none will not send it.\n */\nexport default function connectivity (options = {}) {\n  options = defaults(defaultValues, options)\n  parseOptions(options)\n  return baseConnectivity(options)\n}\n","export const platforms = {\n  LINK: 'link',\n  UC: 'uc',\n  CPAAS: 'cpaas'\n}\n\nexport const notificationTypes = {\n  WEBSOCKET: 'websocket',\n  PUSH: 'push'\n}\n\nexport const connCheckResponsibility = {\n  CLIENT: 'client',\n  SERVER: 'server'\n}\n\nexport const connCheckMethods = {\n  KEEP_ALIVE: 'keepAlive',\n  PING_PONG: 'pingPong'\n}\n","/**\n * The ID of a User (e.g. joe@test.3s5j.att.com)\n * @public\n * @static\n * @typedef {string} UserID\n * @memberof user\n * @requires cpaas_user_id\n */\n\n/**\n * The User ID ie: joe@test.3s5j.att.com\n *\n * @public\n * @static\n * @typedef {string} UserID\n * @memberof call\n * @requires cpaas_user_id\n */\n\n/**\n * The ID of a User (e.g. joe@domain.com)\n * @public\n * @static\n * @typedef {string} UserID\n * @memberof user\n * @requires link_user_id\n */\n\n/**\n * The SIP URI ie: sip:joe@domain.com\n *\n * @public\n * @static\n * @typedef {string} SIP_URI\n * @memberof call\n * @requires link_user_id\n */\n\n/**\n * The Phone Numer ie: +18885559876\n *\n * @public\n * @static\n * @typedef {string} PhoneNumber\n * @memberof call\n * @requires cpaas_pstn\n */\n\n/**\n * The TEL URI ie: tel:+18885559876\n *\n * @public\n * @static\n * @typedef {string} TEL_URI\n * @memberof call\n * @requires link_pstn\n */\n","/**\n * Error codes for the Auth plugin.\n * @name authCodes\n */\nexport const authCodes = {\n  INVALID_CREDENTIALS: 'authentication:1',\n  CONNECT_FAIL_WS_ERROR: 'authentication:2',\n  LINK_UNSUBSCRIBE_FAIL: 'authentication:3',\n  LINK_SUBSCRIBE_FAIL: 'authentication:4',\n  LINK_EXTEND_SUBSCRIPTION_FAIL: 'authentication:5',\n  LINK_UPDATE_SUBSCRIPTION_FAIL: 'authentication:6',\n  UC_SUBSCRIBE_FAIL: 'authentication:7',\n  UC_REFRESH_TOKEN_FAIL: 'authentication:8',\n  UC_CREATE_TOKEN_FAIL: 'authentication:9',\n  UC_EXTEND_SUBSCRIPTION_FAIL: 'authentication:10',\n  UC_DISCONNECT_FAIL: 'authentication:11',\n  MISSING_SERVICE: 'authentication:12'\n}\n\n/**\n * Error codes for the Call plugin.\n * @name callCodes\n */\nexport const callCodes = {\n  UNKNOWN_ERROR: 'call:1',\n  GENERIC_ERROR: 'call:2',\n  INIT_MEDIA_FAILED: 'call:3',\n  USER_MEDIA_ERROR: 'call:4',\n  NOT_SUPPORTED: 'call:5',\n  // The call is in the wrong state.\n  INVALID_STATE: 'call:6',\n  // A provided parameter is not valid.\n  INVALID_PARAM: 'call:7',\n  // There is a desync between components' state.\n  STATE_DESYNC: 'call:8',\n  // Offer could not be generated\n  INVALID_OFFER: 'call:9'\n}\n\n/**\n * Error codes for the Call History plugin.\n * @name callHistoryCodes\n */\nexport const callHistoryCodes = {\n  UNKNOWN_ERROR: 'callHistory:1',\n  BAD_REQUEST: 'callHistory:2',\n  NOT_FOUND: 'callHistory:3',\n  NOT_AUTHENTICATED: 'callHistory:4',\n  FORBIDDEN: 'callHistory:5'\n}\n/**\n * @name clickToCallCodes\n */\nexport const clickToCallCodes = {\n  MISSING_ARGS: 'clickToCall:1',\n  RESPONSE_ERROR: 'clickToCall:2'\n}\n/**\n * Error codes for the Groups plugin.\n * @name groupsCodes\n */\nexport const groupsCodes = {\n  UNKNOWN_ERROR: 'groups:1',\n  GENERIC_ERROR: 'groups:2',\n  MISSING_PARAMETERS: 'groups:3'\n}\n\n/**\n * Error codes for the Message plugin.\n * @name messagingCodes\n */\nexport const messagingCodes = {\n  CREATE_GROUP_FAIL: 'messaging:1',\n  MARK_READ_FAIL: 'messaging:2',\n  REMOVE_MEMBERS_FAIL: 'messaging:3',\n  ADD_MEMBERS_FAIL: 'messaging:4',\n  SEND_MESSAGE_FAIL: 'messaging:5',\n  FETCH_MESSAGES_FAIL: 'messaging:6',\n  FILE_UPLOAD_FAIL: 'messaging:7',\n  FETCH_CONVERSATIONS_FAIL: 'messaging:8',\n  INVALID_DESTINATION: 'messaging:9',\n  INVALID_FILE_PARTS: 'messaging:10',\n  SET_IS_TYPING_FAIL: 'messaging:11'\n}\n\n/**\n * Error codes for the Message Waiting Indicator plugin.\n * @name mwiCodes\n */\nexport const mwiCodes = {\n  FETCH_MWI_FAIL: 'mwi:1'\n}\n\n/**\n * Error codes from the Sip Events plugin.\n * @name sipEventCodes\n */\nexport const sipEventCodes = {\n  UNKNOWN_ERROR: 'sipEvents:1',\n  // The user did not subscribe/connect for the specified sip event service.\n  NOT_PROVISIONED: 'sipEvents:2',\n  // The user is not subscribed for the specified sip event.\n  NOT_SUBSCRIBED: 'sipEvents:3'\n}\n\n/**\n * Error codes for the audio bridge portion of the call plugin.\n * @name bridgeCodes\n */\nexport const bridgeCodes = {\n  UNKNOWN_ERROR: 'audioBridge:1',\n  // TODO: Make \"invalid input\" (and others) a generic code.\n  INVALID_INPUT: 'audioBridge:2',\n  ALREADY_EXISTS: 'audioBridge:3',\n  NOT_FOUND: 'audioBridge:4',\n  NOT_SUPPORTED: 'audioBridge:5',\n  MEDIA_NOT_FOUND: 'audioBridge:6',\n  INVALID_STATE: 'audioBridge:7'\n}\n\n/**\n * Error codes for the subscription plugin.\n * @name subscriptionCodes\n */\nexport const subscriptionCodes = {\n  WS_CONNECTION_ERROR: 'subscription:1',\n  CPAAS_WSREQUEST_FAIL: 'subscription:2',\n  CPAAS_WSREVOKE_FAIL: 'subscription:3',\n  CPAAS_WSREFRESH_FAIL: 'subscription:4',\n  CPAAS_SERVICE_SUB_FAIL: 'subscription:5',\n  CPAAS_SERVICE_UNSUB_FAIL: 'subscription:6',\n  CPAAS_UNSUBSCRIBE_FAIL: 'subscription:7'\n}\n/**\n * Error codes for the Presence plugin.\n * @name presenceCodes\n */\nexport const presenceCodes = {\n  INVALID_STATUS: 'presence:1',\n  INVALID_ACTIVITY: 'presence:2'\n}\n\n/**\n * Error codes for the Users plugin\n * @name usersCodes\n */\nexport const usersCodes = {\n  UNKNOWN: 'users:1',\n  REFRESH_CONTACTS_FAIL: 'users:2',\n  DIRECTORY_REQUEST_FAIL: 'users:3',\n  INVALID_PARAM: 'users:4'\n}\n","/**\n * The Basic Error object. Provides information about an error that occurred in the SDK.\n * @public\n * @static\n * @typedef {Object} BasicError\n * @memberof api\n * @property {string} code The code of the error. If no code is known, this will be 'NO_CODE'.\n * @property {string} message A human-readable message to describe the error. If no message is known, this will be 'An error occurred'.\n */\n\nexport {\n  authCodes,\n  callCodes,\n  callHistoryCodes,\n  groupsCodes,\n  messagingCodes,\n  mwiCodes,\n  sipEventCodes,\n  clickToCallCodes,\n  bridgeCodes,\n  subscriptionCodes,\n  presenceCodes,\n  usersCodes\n} from './codes'\n\nexport default class BasicError {\n  constructor ({ message, code }) {\n    this.name = 'BasicError'\n    this.code = code || 'NO_CODE'\n    this.message = message ? `${message}` : 'An error occurred.'\n  }\n}\n","/*\n * Event emitter module. Can be used as a standalone factory or as a mixin.\n *\n * @private\n * @class emitter\n * @example\n * ``` javascript\n * var eventEmitter = emitter(); // Create a new emitter.\n * emitter(myEmittingObject.prototype); // Mixin to an existing object.\n * ```\n */\nexport default function eventEmitter (prototype = {}) {\n  var eventMap = []\n  var subscribeMap = []\n  var strictMode = false\n\n  /*\n   * Check if the event is a valid event type.\n   */\n  function checkEvent (type) {\n    if (strictMode && !eventMap[type]) {\n      throw new Error('Invalid event type: ' + type)\n    }\n  }\n\n  return Object.assign(prototype, {\n    /*\n     * Define an event type with the event emitter.\n     *\n     * @method define\n     * @param {String} type The name for the event type.\n     */\n    define: function (type) {\n      eventMap[type] = eventMap[type] || []\n    },\n\n    /*\n     * Define an alias for an event type.\n     *\n     * @method alias\n     * @param {String} type The event type for which to add an alias.\n     * @param {String} alias The alias name for the event type.\n     * @throws {Error} Invalid event type\n     */\n    alias: function (type, alias) {\n      checkEvent(type)\n\n      eventMap[alias] = eventMap[type] = eventMap[type] || []\n    },\n\n    /*\n     * Add an event listener for the specified event type.\n     *\n     * @method on\n     * @param {String} type The event type for which to add the listener.\n     * @param {Function} listener The listener for the event type. The parameters\n     *                            of the listener depend on the event type.\n     * @throws {Error} Invalid event type\n     */\n    on: function (type, listener) {\n      checkEvent(type)\n      ;(eventMap[type] = eventMap[type] || []).push(listener)\n    },\n\n    /*\n     * Removes an event listener for the specified event type.\n     *\n     * @method off\n     * @param {String} type The event type for which to remote the listener.\n     * @param {Function} listener The listener to remove.\n     * @throws {Error} Invalid event type\n     */\n    off: function (type, listener) {\n      checkEvent(type)\n\n      var list = eventMap[type] || []\n      var i = list.length\n      while (i--) {\n        if (listener === list[i]) {\n          list.splice(i, 1)\n        }\n      }\n    },\n\n    /*\n     * Emits an event of the specified type.\n     *\n     * @method emit\n     * @param {String} type The event type to emit.\n     * @param {any} [...args] The arguments to pass to the listeners of the event.\n     * @throws {Error} Invalid event type\n     */\n    emit: function (type) {\n      checkEvent(type)\n\n      var args = Array.prototype.slice.call(arguments, 1)\n      var list = eventMap[type] || []\n      var i = 0\n\n      for (; i < list.length; i++) {\n        list[i].apply(undefined, args)\n      }\n      for (var j = 0; j < subscribeMap.length; j++) {\n        subscribeMap[j].call(undefined, type, args)\n      }\n    },\n\n    /*\n     * Add a subscription for all event types.\n     *\n     * @method subscribe\n     * @param {Function} listener The listener for all event types.\n     * @throws {Error} Listener not a function\n     */\n    subscribe: function (listener) {\n      if (typeof listener === 'function') {\n        subscribeMap.push(listener)\n      } else {\n        throw new Error('Listener not a function')\n      }\n    },\n\n    /*\n     * Remove a subscription for all event types.\n     *\n     * @method unsubscribe\n     * @param {Function} listener The listener for all event types.\n     * @throws {Error} Listener not a function\n     */\n    unsubscribe: function (listener) {\n      if (typeof listener === 'function') {\n        var i = subscribeMap.length\n        while (i--) {\n          if (listener === subscribeMap[i]) {\n            subscribeMap.splice(i, 1)\n          }\n        }\n      } else {\n        throw new Error('Listener not a function')\n      }\n    },\n\n    /*\n     * Sets the emitter in strict mode where it only allows events that have been defined or aliases.\n     *\n     * @method setStrictMode\n     * @param {Boolean} strict Whether to set strict mode for the emitter.\n     */\n    setStrictMode: function (strict) {\n      strictMode = strict\n    }\n  })\n}\n","// Events plugin.\nimport pluginInterface from './interface'\nimport { emitEvent } from './interface/actions'\nimport * as actionTypes from './interface/actionTypes'\n\nimport eventEmitter from './eventEmitter'\n\n// Logs\nimport { logManager } from '../logs'\nconst log = logManager.getLogger('EVENTS')\n\n/**\n * Event Emitter Implementation.\n * Factory function to create the Event Emitter Implementation.\n * Defines the functionality exposed by an Event Emitter Interface.\n */\nexport default function eventsImplementation () {\n  return {\n    name: pluginInterface.name,\n    middleware: middleware,\n    api: pluginInterface.api,\n    reducer: pluginInterface.reducer\n  }\n}\n\n/**\n * Implementation of Event Emitter Interface.\n * @return {Middleware} middleware Middleware to be applied to the redux store.\n */\nfunction middleware (context) {\n  var emitter = eventEmitter()\n  var eventMap = {}\n\n  /**\n   * Middleware to handle Event Emitter Interface actions.\n   * Redirects Interface actions to the Plugin functionality, and dispatches\n   *      actions to update the store if needed.\n   * @type {Function}\n   */\n  return next => action => {\n    switch (action.type) {\n      case actionTypes.EVENTS_ON:\n        emitter.on(action.payload.eventType, action.payload.listener)\n        break\n      case actionTypes.EVENTS_OFF:\n        emitter.off(action.payload.eventType, action.payload.listener)\n        break\n      case actionTypes.EVENTS_SUBSCRIBE:\n        emitter.subscribe(action.payload)\n        break\n      case actionTypes.EVENTS_UNSUBSCRIBE:\n        emitter.unsubscribe(action.payload)\n        break\n      case actionTypes.EVENTS_ALIAS:\n        emitter.alias(action.payload.eventType, action.payload.alias)\n        break\n      case actionTypes.EVENTS_EMIT:\n        log.info(`Emitting event: ${action.payload.eventType}`, action.payload.args[0])\n        emitter.emit(action.payload.eventType, ...action.payload.args)\n        break\n      case actionTypes.MAP_EVENTS:\n        for (const actionType in action.payload) {\n          if (action.payload.hasOwnProperty(actionType)) {\n            const mapper = action.payload[actionType]\n            if (eventMap.hasOwnProperty(actionType)) {\n              eventMap[actionType].push(mapper)\n            } else {\n              eventMap[actionType] = [mapper]\n            }\n          }\n        }\n        break\n      default:\n        if (eventMap.hasOwnProperty(action.type)) {\n          // Get state both before and after allowing the action to go through\n          //    the reducers. This lets events have compare state changes.\n          const prevState = context.getState()\n          let result = next(action)\n          const state = context.getState()\n\n          // make this compatible with promise middleware by ensuring we\n          // wait for the promise to resolve. It's easier to just always\n          // use a promise, as opposed to handling cases.\n          if (!result || !result.then) {\n            result = Promise.resolve(result)\n          }\n          result.then(function () {\n            for (const mapper of eventMap[action.type]) {\n              // Use the mapper(s) for this specific event to create the event object(s).\n              // Event mappings have access to the action and states pre+post reducer.\n              let events = mapper(action, { prevState, state })\n              if (!events) {\n                events = []\n              } else if (!Array.isArray(events)) {\n                events = [events]\n              }\n              for (const event of events) {\n                if (!event.args) {\n                  event.args = {}\n                }\n                context.dispatch(emitEvent(event.type, event.args))\n              }\n            }\n          })\n          return result\n        }\n        break\n    }\n\n    return next(action)\n  }\n}\n","const PREFIX = '@@KANDY/'\n\nexport const EVENTS_ON = PREFIX + 'EVENTS_ON'\nexport const EVENTS_OFF = PREFIX + 'EVENTS_OFF'\nexport const EVENTS_SUBSCRIBE = PREFIX + 'EVENTS_SUBSCRIBE'\nexport const EVENTS_UNSUBSCRIBE = PREFIX + 'EVENTS_UNSUBSCRIBE'\nexport const EVENTS_ALIAS = PREFIX + 'EVENTS_ALIAS'\nexport const EVENTS_EMIT = PREFIX + 'EVENTS_EMIT'\nexport const MAP_EVENTS = PREFIX + 'MAP_EVENTS'\n","import * as actionTypes from './actionTypes'\n\n/**\n * Add an action-to-event mapping\n * @param  {Object} mapping A mapping object\n * @return {action}          A redux action.\n */\nexport function mapEvents (mapping) {\n  return {\n    type: actionTypes.MAP_EVENTS,\n    payload: mapping\n  }\n}\n\n/* Interface actions */\n\n/**\n * Add a listener for a specified event type.\n *\n * @param {string} type The event type to add the listener on.\n * @param {Function} listener The event listener to be added.\n * @return {Action} action A redux action.\n */\nexport function on (type, listener) {\n  return {\n    type: actionTypes.EVENTS_ON,\n    payload: {\n      eventType: type,\n      listener: listener\n    }\n  }\n}\n\n/**\n * Remove a listener from a specified event type.\n *\n * @param {string} type The event type to remove the listener from.\n * @param {Function} listener The event listener to be removed.\n * @return {Action} action A redux action.\n */\nexport function off (type, listener) {\n  return {\n    type: actionTypes.EVENTS_OFF,\n    payload: {\n      eventType: type,\n      listener: listener\n    }\n  }\n}\n\n/**\n * Add a global event listener.\n *\n * @param {Function} listener The event listener to be added.\n * @return {Action} action A redux action.\n */\nexport function subscribe (listener) {\n  return {\n    type: actionTypes.EVENTS_SUBSCRIBE,\n    payload: listener\n  }\n}\n\n/**\n * Remove a global event listener.\n *\n * @param {Function} listener The event listener to be removed.\n * @return {Action} action A redux action.\n */\nexport function unsubscribe (listener) {\n  return {\n    type: actionTypes.EVENTS_UNSUBSCRIBE,\n    payload: listener\n  }\n}\n\n/* Internal actions */\n\n/**\n * Emits an event of the specified type.\n *\n * @method emitEvent\n * @param {Object} payload Information of the event to emit.\n * @throws {Error} Invalid event type\n * @return action An EVENTS_EMIT action.\n */\nexport function emitEvent (type, ...args) {\n  if (type === undefined) {\n    throw Error('Attempted to emit an event without a type.')\n  }\n\n  return {\n    type: actionTypes.EVENTS_EMIT,\n    payload: { eventType: type, args }\n  }\n}\n\n/**\n * Define an alias for an event type.\n *\n * @method alias\n * @param {string} type The event type for which to add an alias.\n * @param {string} alias The alias name for the event type.\n */\nexport function aliasEvent (type, alias) {\n  if (type === undefined || alias === undefined) {\n    throw Error('Invalid attempt to alias an event.')\n  }\n\n  return {\n    type: actionTypes.EVENTS_ALIAS,\n    payload: { eventType: type, alias }\n  }\n}\n","// Actions the interface uses.\nimport { on, off, subscribe, unsubscribe } from './actions'\n\nimport { logManager, API_LOG_TAG } from '../../logs'\n\nconst log = logManager.getLogger('EVENTS')\n\n/**\n * API for Event Emitter plugin.\n * Defines the public end-points exposed by event plugins.\n * @param  {Object} context The sdk instance context.\n * @returns {Object} api     The interface object.\n */\nexport default function api ({ dispatch }) {\n  var api = {}\n\n  /**\n   * Add an event listener for the specified event type. The event is emitted by the SDK instance.\n   *\n   * @public\n   * @memberof api\n   * @method on\n   * @param {string} type The event type for which to add the listener.\n   * @param {Function} listener The listener for the event type. The parameters of the listener depend on the event type.\n   * @throws {Error} Invalid event type\n   * @example\n   * // Listen for events of a specific type emitted by the SDK.\n   * client.on('dummy:event', function (params) {\n   *    // Handle the event.\n   * })\n   */\n  api.on = function (type, listener) {\n    log.debug(API_LOG_TAG + 'on: ', type)\n    dispatch(on(type, listener))\n  }\n\n  /**\n   * Removes an event listener for the specified event type. The event is emitted by the SDK instance.\n   *\n   * @public\n   * @memberof api\n   * @method off\n   * @param {string} type The event type for which to remote the listener.\n   * @param {Function} listener The listener to remove.\n   * @throws {Error} Invalid event type\n   */\n  api.off = function (type, listener) {\n    log.debug(API_LOG_TAG + 'off: ', type)\n    dispatch(off(type, listener))\n  }\n\n  /**\n   * Adds a global event listener to SDK instance.\n   *\n   * @public\n   * @memberof api\n   * @method subscribe\n   * @param {Function} listener The event listener to add. The parameters are (type, ...args), where args depend on the event type.\n   * @throws {Error} Listener not a function\n   */\n  api.subscribe = function (listener) {\n    log.debug(API_LOG_TAG + 'subscribe')\n    dispatch(subscribe(listener))\n  }\n\n  /**\n   * Removes a global event listener from SDK instance.\n   *\n   * @public\n   * @memberof api\n   * @method unsubscribe\n   * @param {Function} listener The event listener to remove.\n   * @throws {Error} Listener not a function\n   */\n  api.unsubscribe = function (listener) {\n    log.debug(API_LOG_TAG + 'unsubscribe')\n    dispatch(unsubscribe(listener))\n  }\n\n  return api\n}\n","// Import the components of the interface.\nimport api from './api'\nimport reducer from './reducers'\n\n/**\n * This interface is for an events plugin.\n * @type {string}\n */\nconst name = 'events'\n\nexport default {\n  name,\n  api,\n  reducer\n}\n","// Events plugin.\nimport * as actionTypes from './actionTypes'\n\n// Libraries.\nimport { update, add, concat, contains } from 'lodash/fp'\n\nfunction eventReducer (state = { aliases: [], count: 0 }, action) {\n  switch (action.type) {\n    case actionTypes.EVENTS_ON:\n      return update('count', add(1), state)\n    case actionTypes.EVENTS_OFF:\n      return update('count', add(-1), state)\n    case actionTypes.EVENTS_ALIAS:\n      return update('aliases', concat(action.payload.alias), state)\n    default:\n      return state\n  }\n}\n\n/**\n * Reducer for Event Emitter plugin.\n * Defines the events an Event plugin should dispatch to modify state.\n * @param  {Object} [state={}] The events substate.\n * @param  {Object} action     A Flux Standard action.\n * @returns {Object} state      The new event substate.\n */\nexport default function reducer (state = {}, action) {\n  // Only handle event types.\n  if (!contains(action.type, actionTypes)) {\n    return state\n  }\n\n  return {\n    ...state,\n    [action.payload.eventType]: eventReducer(state[action.payload.eventType], action)\n  }\n}\n","// Libraries.\nimport { combineReducers, createStore, applyMiddleware, compose as composeWithoutDevTools } from 'redux'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport createSagaMiddleware from 'redux-saga'\nimport { memoize, merge } from 'lodash/fp'\nimport { fork } from 'redux-saga/effects'\nimport compose from '@stamp/compose'\n\n// Helpers.\nimport { autoRestart, mergeValues } from './common/utils'\nimport { getVersion } from './common/version'\n\n// Plugins.\nimport { logManager } from './logs'\n\n// Parse and/or Validate\nimport { validation as v8n, parse } from './common/validation'\nconst log = logManager.getLogger('FACTORY')\n\nconst factoryDefaults = {\n  enableReduxDevTools: false,\n  reduxDevToolsName: 'WebRTC SDK',\n  allowProxy: false\n}\n\n// config validation\nconst v8nValidation = v8n.schema({\n  enableReduxDevTools: v8n.boolean(),\n  reduxDevToolsName: v8n.string(),\n  allowProxy: v8n.boolean()\n})\nconst parseOptions = parse('common', v8nValidation)\n\n/**\n * Creates an instance of the SDK with the specified plugins and configuration.\n *\n * @param {Plugin[]} plugins - The list of plugins to load into this instance of the SDK.\n * @param {Object} [options] - Factory options\n * @param {boolean} [options.enableReduxDevTools] - A flag to indicate whether or not to include Redux Dev Tools\n * @param {string}  [options.reduxDevToolsName=\"WebRTC SDK\"] - The name of the store that will show up in the Redux Dev tools.\n *                                                This helps differentiate the SDK from other redux instances.\n * @param {boolean} [options.allowProxy] Whether the factory should allow the Proxy Plugin to be included.\n */\nexport function factory (plugins, options = {}) {\n  // Log the SDK's version (templated by webpack) on initialization.\n  const version = getVersion()\n  log.info(`SDK version: ${version}`)\n\n  options = mergeValues(factoryDefaults, options)\n  parseOptions(options)\n\n  var sagas = []\n  var store\n  var selectors = {}\n  var middlewares = []\n  var reducers = {}\n  var initSagas = []\n  var taskDescriptor\n  const shared = {}\n  var context = {\n    capabilities: [],\n    api: {},\n    primitives: {},\n    getState () {\n      if (!store) {\n        throw Error('Store is not available during factory creation')\n      }\n      if (destroyedSDK) {\n        throw Error('State is not available if the SDK has been destroyed')\n      }\n      return store.getState()\n    },\n    dispatch (...args) {\n      if (!store) {\n        throw Error('Store is not available during factory creation')\n      }\n      return store.dispatch(...args)\n    },\n    subscribe (fn) {\n      if (!store) {\n        throw Error('Store is not available during factory creation')\n      }\n      return store.subscribe(fn)\n    }\n  }\n\n  // Special case middleware for logging.\n  var loggerMiddleware\n\n  var destroyedSDK = false\n  var destroyedSDKMiddleware = store => next => action => {\n    if (destroyedSDK) {\n      return null\n    } else {\n      return next(action)\n    }\n  }\n\n  // Remove undefined plugins. Those are plugins that failed to load for some reason.\n  plugins = plugins.filter(plugin => Boolean(plugin))\n\n  // Run all the plugins to build the context.\n  // Set up each plugin component individually.\n  plugins.forEach(function (plugin) {\n    // Ignore the Proxy Plugin if not configured to allow it.\n    if (plugin.name === 'proxy' && !options.allowProxy) {\n      plugin = {}\n    }\n\n    if (plugin.capabilities) {\n      context.capabilities = context.capabilities.concat(plugin.capabilities)\n    }\n    if (plugin.reducer) {\n      reducers[plugin.name] = plugin.reducer\n    }\n    if (plugin.selector) {\n      selectors[plugin.name] = memoize(plugin.selector)\n    }\n    if (plugin.middleware) {\n      if (plugin.name === 'logs') {\n        loggerMiddleware = plugin.middleware\n      } else {\n        middlewares.push(() => plugin.middleware(context)) // pass context to middleware instead of store\n      }\n    }\n    if (plugin.api) {\n      context.api = merge(context.api, plugin.api(context))\n    }\n    if (plugin.init) {\n      initSagas.push(plugin.init)\n    }\n    if (plugin.sagas) {\n      sagas = sagas.concat(plugin.sagas)\n    }\n    // TODO: Revisit this. Looks a little extreme for a couple stamps...\n    if (plugin.mixins) {\n      // Define a base stamp that all stamps will be composed with.\n      //      This gives stamps access to the factory's context.\n      const baseStamp = {\n        propertyDescriptors: {\n          context: {\n            get () {\n              return context\n            }\n          }\n        }\n      }\n      for (const objName in plugin.mixins) {\n        if (plugin.mixins.hasOwnProperty(objName)) {\n          // Ensure that every stamp starts with the base stamp.\n          if (!context.primitives.hasOwnProperty(objName)) {\n            context.primitives[objName] = baseStamp\n          }\n          context.primitives[objName] = compose(context.primitives[objName], plugin.mixins[objName])\n        }\n      }\n    }\n\n    /**\n     * Plugins are allowed to share data between them by providing it to the\n     *    factory. All shared data will be collected as a single object, and\n     *    that object will be provided to plugins during their `init` saga.\n     * It is intended that a plugin can \"override\" another plugin's shared data.\n     * The order that plugins are given to the factory matters because of this.\n     * `plugin.shared` is expected to be an object.\n     */\n    if (plugin.shared) {\n      for (const key in plugin.shared) {\n        if (shared[key]) {\n          log.debug(`Replacing shared ${key} with ${key} from ${plugin.name}.`)\n          shared[key] = plugin.shared[key]\n        } else {\n          shared[key] = plugin.shared[key]\n        }\n      }\n    }\n  })\n\n  if (loggerMiddleware) {\n    // The redux logger middleware should be the last middleware.\n    middlewares.push(() => loggerMiddleware(context))\n  }\n\n  // Compose the root saga\n  function * rootSaga () {\n    // Give all plugins an opportunity to initialize themselves.\n    // Note: Sagas have not been forked yet, so init cannot use them\n    //      by dispatching actions. See PR #698.\n    // Note: If anything asynchronous is done in an init, it MUST be\n    //      non-blocking (ie. use fork, not call). See PR #699.\n    for (const init of initSagas) {\n      // Note: Yield directly to init. If redux-saga's `call()` is used, then the\n      //      factory returns before the instance is done all inits. See PR #699.\n      // Provide the factory's shared data (from plugins) to the `init` saga.\n      yield * init(shared)\n    }\n    // Run all of the sagas provided by implementation plugins.\n    for (const saga of sagas) {\n      yield fork(autoRestart(saga))\n    }\n  }\n\n  // Alias our composeMiddleware to conditionally include devTools as per the provided configuration flag\n  const composeMiddleware = options.enableReduxDevTools\n    ? composeWithDevTools({ name: options.reduxDevToolsName })\n    : composeWithoutDevTools\n\n  // don't include saga stuff if there are no sagas.\n  if (initSagas.length + sagas.length > 0) {\n    var sagaMiddleware = createSagaMiddleware()\n\n    // Create the store with the plugins (incl. sagas) and with the configuration as the initial state.\n    store = createStore(\n      combineReducers(reducers),\n      composeMiddleware(applyMiddleware(destroyedSDKMiddleware, sagaMiddleware, ...middlewares))\n    )\n\n    taskDescriptor = sagaMiddleware.run(rootSaga)\n  } else {\n    // Create the store with the plugins (excl. sagas) and with the configuration as the initial state.\n    store = createStore(\n      combineReducers(reducers),\n      composeMiddleware(applyMiddleware(destroyedSDKMiddleware, ...middlewares))\n    )\n  }\n\n  // setup the API\n  var selectState = function (state) {\n    var exposedState = {}\n\n    // Determine what state should be exposed to an application.\n    plugins.forEach(function (plugin) {\n      const name = plugin.name\n      // If the plugin designates a selector to filter public state, use it.\n      if (selectors[name]) {\n        exposedState[name] = selectors[name](state[name])\n      } else if (state[name]) {\n        // Otherwise, just expose the state directly, but\n        //      only expose state if there actually is state.\n        exposedState[name] = state[name]\n      }\n    })\n    return exposedState\n  }\n  selectState = memoize(selectState)\n\n  const publicAPI = {\n    ...context.api,\n    state: {\n      get: function () {\n        return selectState(store.getState())\n      },\n      subscribe: function (...args) {\n        return store.subscribe(...args)\n      }\n    },\n    /**\n     * Return all the capabilities currently available to the plugin system.\n     *\n     * @memberof api\n     * @method getCapabilities\n     */\n    getCapabilities () {\n      return context.capabilities\n    },\n    /**\n     * Returns the current version of the API.\n     *\n     * @public\n     * @memberof api\n     * @method getVersion\n     */\n    getVersion () {\n      return version\n    },\n    // Disabling eslint for the next comment as we want to be able to use a disallowed word\n    // eslint-disable-next-line no-warning-comments\n    /**\n     * Destroys the SDK, and removes its state, rendering the SDK unusable.\n     * Useful when a user logs out and their call data needs to be destroyed.\n     * The SDK must be recreated to be usable again.\n     *\n     * @public\n     * @memberof api\n     * @method destroy\n     * @example\n     * // Instantiate the SDK.\n     * import { create } from 'kandy'\n     * const config = {\n     *     authentication: { ... },\n     *     logs: { ... },\n     *     ...\n     * }\n     * let client = create(config);\n     * client.on( ... )\n     * // Use the SDK\n     * ...\n     * // Destroy the SDK, then recreate on the next step\n     * client.destroy()\n     * client = create(config)\n     * client.on( ... )\n     */\n    destroy () {\n      // TODO: Give plugins a chance to clean up, disconnect from WS, etc\n      // Needs to happen before the sagas are cancelled\n      // TODO: Is it possible for the store to auto-unsubscribe any listeners\n      //    (from client.state.subscribe API)? If not, may be easier to simply\n      //    protect from issues.\n\n      // Cancel all the sagas\n      if (taskDescriptor) taskDescriptor.cancel()\n\n      // Clear the state\n      function destroyStateReducer (state, action) {\n        return {}\n      }\n      store.replaceReducer(destroyStateReducer)\n\n      // Neuter all actions\n      destroyedSDK = true\n    }\n  }\n\n  // Return the public API.\n  return publicAPI\n}\n","/* Helper function for styling logs based on the log type.\n * This function will inspect the log entry and format the log\n * accordingly.\n */\nfunction styleLog (entry) {\n  const { timestamp, level } = entry\n  const logInfo = `${timestamp} - ACTION - ${level}`\n\n  let [logType, payload] = entry.messages\n\n  let prefix\n  let style = ''\n  if (logType.includes('state')) {\n    // If the log is for prev state / next state, display that in the prefix.\n    prefix = `${logInfo} - ${logType.toUpperCase()}`\n  } else if (logType.includes('ADDED') || logType.includes('DELETED') || logType.includes('ARRAY')) {\n    // If the log has added or removed keys from state, log the operation, keys affected and new values.\n    prefix = `${entry.messages[0]}: ${entry.messages[2]}`\n    style = entry.messages[1]\n    payload = entry.messages[3]\n  } else if (logType.includes('CHANGED')) {\n    // If the log has changed keys in state, log the operation, keys, old and new values.\n    prefix = `${entry.messages[0]}: ${entry.messages[2]}`\n    style = entry.messages[1]\n    payload = `${entry.messages[3]} ${entry.messages[4]} ${entry.messages[5]}`\n  } else if (logType.includes('no diff')) {\n    // If action results in no change in state, just log no diff.\n    prefix = `${logInfo} - NO DIFF`\n    payload = ''\n  } else {\n    // Else the log is the action itself, so use the action type.\n    prefix = `${logInfo} - ${payload.type} - ${logType}`\n  }\n\n  return { prefix, style, payload }\n}\n\n/**\n * Default function for the SDK to use for logging actions.\n * Action entries come in 4 different types:\n *    1. start: Log the message directly and \"open the group\".\n *    2. state: Log a prefix, state type, and state itself.\n *      (prev state and next state)\n *    3. payload: Log a prefix, action type, and payload.\n *    4. end: Close the group.\n * @method defaultActionHandler\n * @param  {LogEntry} entry\n */\nexport default function defaultActionHandler (entry) {\n  // Handle the \"start\" and \"stop\" action log entries specifically.\n  if (['group', 'groupCollapsed'].includes(entry.method)) {\n    console[entry.method](...entry.messages)\n    return\n  } else if (entry.method === 'groupEnd') {\n    console.groupEnd()\n    return\n  }\n\n  const { prefix, style, payload } = styleLog(entry)\n  console[entry.method](prefix, style, payload)\n}\n","// Logs plugin.\nimport { logManager } from '../index'\nimport { logLevels } from 'kandy-logger/src/constants'\n// Action specific.\nimport setupTransformers from './transformers'\nimport { titleFormatter } from './utils'\n\n// Libraries.\nimport { createLogger } from 'redux-logger'\n\n/**\n * Creates a redux middleware for logging actions.\n * @method createActionLogger\n * @param  {Object}     options\n * @return {Middleware}\n */\nexport default function createActionLogger (options) {\n  // Create a Logger for handling the action logs.\n  const logger = logManager.getLogger('ACTION')\n  logger.setHandler(options.logActions.handler)\n  logger.setLevel(options.logActions.level)\n\n  const setLevel = logLevels[options.logLevel]\n\n  let actionOptions = {}\n  // Use different options for redux-logger depending on log level.\n  if (setLevel === logLevels.INFO) {\n    // At the INFO level, hide everything except the action name.\n    actionOptions.level = false\n    actionOptions.diff = false\n  } else {\n    // At the DEBUG+ levels, use the configs.\n    actionOptions = {\n      ...options.logActions\n    }\n  }\n\n  if (options.logActions.actionOnly) {\n    // Hide prevState and nextState.\n    // Log action and error at info level, so the browser won't hide it by default.\n    actionOptions.level = {\n      prevState: false,\n      action: 'info',\n      error: 'info',\n      nextState: false\n    }\n  }\n\n  if (options.logActions.excludeActions) {\n    actionOptions.predicate = excludeActions(options.logActions.excludeActions)\n  }\n\n  // ALWAYS use our own logger\n  actionOptions.logger = logger\n  // ALWAYS remove theming/styling from the action log messages\n  actionOptions.titleFormatter = titleFormatter\n  actionOptions.colors = false\n\n  // Setup the transformers based on the options.\n  const transformers = setupTransformers(options.logActions)\n  // Create the logger middleware.\n\n  return createLogger({\n    ...actionOptions,\n    ...transformers\n  })\n}\n\n/**\n * Logger predicate function that will take an array of action types\n * and exclude them from logs\n * @param {Array} actions An array of action types to exclude from logs\n * @returns {function} A predicate function\n */\nfunction excludeActions (actions) {\n  return (getState, action) => !actions.includes(action.type)\n}\n","// Libraries\nimport { omit } from 'lodash/fp'\n\n/**\n * Determines which redux-logger transformers we need based on options.\n * @method setupTransformers\n * @param  {Object} options\n * @return {Object} An object of transformers to be provided to redux-logger.\n */\nexport default function setupTransformers (options) {\n  // A \"pipeline\" of all redux-logger action transformers.\n  function actionPipeline (transformers) {\n    return function (action) {\n      transformers.forEach(function (transformer) {\n        action = transformer(action)\n      })\n      return action\n    }\n  }\n\n  const transformers = {}\n  const actionTransformers = []\n  if (!options.exposePayloads) {\n    // If exposePayloads is disabled, include the removePayloads transformer\n    actionTransformers.push(removePayloads)\n  } else {\n    // Otherwise, we should still hide passwords\n    actionTransformers.push(passwordHider)\n  }\n  // Create the actionTransformer pipeline with the included transformers.\n  transformers.actionTransformer = actionPipeline(actionTransformers)\n\n  return transformers\n}\n\n// Redux-logger actionTransformer to prevent passwords from being logged.\nfunction passwordHider (action) {\n  if (action.meta && action.meta.isSensitive) {\n    // Only log the action name for actions that have sensitive data in them.\n    return omit('payload', action)\n  }\n  return action\n}\n\n/**\n * Helper function removes secure data if secure mode is enabled\n * @param {Object} action\n */\nfunction removePayloads (action) {\n  if (!(action.meta && action.meta.isSafe)) {\n    return omit('payload', action)\n  }\n  return action\n}\n","/**\n * Standard title formatter function is almost identical to the defaultTitleFormatter found in redux-logger\n * but removes placeholder characters previously used for styling, which is not being used in the logging\n * configuration\n *\n * @param action\n * @param time\n * @param took\n * @returns {string}\n */\nexport function titleFormatter (action, time, took) {\n  var parts = ['action']\n  parts.push(action.type)\n  parts.push('@ ' + time)\n  parts.push('(in ' + took.toFixed(2) + ' ms)')\n\n  return parts.join(' ')\n}\n","import defaultActionHandler from './actions/actionHandler'\n\n/**\n * Configuration options for the Logs feature.\n *\n * The SDK will log information about the operations it is performing. The\n *    amount of information will depend on how the Logs feature is configured.\n *\n * The format of logs can also be customized by providing a\n *    {@link logger.LogHandler LogHandler}. This function will receive a\n *    {@link logger.LogEntry LogEntry} which it can handle as it sees fit. By\n *    default, the SDK will log information to the console. For more\n *    information, see the {@link logger Logs feature} description.\n *\n * @public\n * @static\n * @name config.logs\n * @memberof config\n * @requires logs\n * @instance\n * @param {Object} logs Logs configs.\n * @param {string} [logs.logLevel='debug'] Log level to be set. See {@link logger.levels}.\n * @param {logger.LogHandler} [logs.handler] The function to receive log entries from the\n *    SDK. If not provided, a default handler will be used that logs entries\n *    to the console.\n * @param  {boolean} [logs.enableFcsLogs=true] Enable the detailed call logger\n *    for v3.X. Requires log level debug.\n * @param {Object|boolean} [logs.logActions=false] Options specifically for action logs when\n *    logLevel is at DEBUG+ levels. Set this to false to not output action logs.\n * @param {logger.LogHandler} [logs.logActions.handler] The function to receive action\n *    log entries from the SDK. If not provided, a default handler will be used\n *    that logs actions to the console.\n * @param {boolean} [logs.logActions.actionOnly=false] Only output information\n *    about the action itself. Omits the SDK context for when it occurred.\n * @param {boolean} [logs.logActions.collapsed=false] Whether logs should be\n *    minimized when initially output. The full log is still output and can be\n *    inspected on the console.\n * @param {boolean} [logs.logActions.diff=false] Include a diff of what SDK\n *    context was changed by the action.\n * @param {string}  [logs.logActions.level='debug'] Log level to be set\n *    on the action logs\n * @param {boolean} [logs.logActions.exposePayloads=true] Allow action payloads\n *    to be exposed in the logs, potentially displaying sensitive information.\n */\nexport const defaultOptions = {\n  logLevel: 'debug',\n  handler: undefined,\n  enableFcsLogs: true,\n  logActions: false\n}\n\nexport const partialDefaultLogActions = {\n  handler: defaultActionHandler,\n  actionOnly: false,\n  collapsed: false,\n  diff: false,\n  level: 'debug',\n  exposePayloads: true\n}\n/*\n * TODO: Figure out a way to work around this.\n * Can't use validation in logging because validation uses logging to output errors.\n * Circular dependency, have to refactor.\n * Code:\n ```javascript\n// Parse and/or Validate\n// import { enums, validation as v8n, parse } from '../common/validation'\nconst defaultValidation = v8n.schema({\n  logLevel: enums(['silent', 'error', 'warn', 'info', 'debug']),\n  handler: v8n.optional(v8n.function()),\n  enableFcsLogs: v8n.boolean(),\n  logActions: v8n.optional(\n    v8n.passesAnyOf(\n      v8n.schema({\n        handler: v8n.optional(v8n.function()),\n        actionOnly: v8n.boolean(),\n        collapsed: v8n.boolean(),\n        diff: v8n.boolean(),\n        exposePayloads: v8n.boolean()\n      }),\n      // OR\n      v8n.boolean()\n    )\n  )\n})\n\nexport const parseLogConfig = parse('logger', defaultValidation)\n```\n*/\n","/*\n * This file contains SDK documentation for stuff defined by the Logger package.\n * They are here to 1) ensure they are picked up by our documentation tool and\n *    2) ensure they are written from the perspective of the SDK (not the Logger\n *    library).\n */\n\n/**\n * A LogEntry object is the data that the SDK compiles when information is\n *    logged. It contains both the logged information and meta-info about when\n *    and who logged it.\n *\n * A {@link logger.LogHandler LogHandler} provided to the SDK (see\n *    {@link #configconfiglogs config.logs}) will need to handle LogEntry\n *    objects.\n *\n * @public\n * @static\n * @typedef {Object} LogEntry\n * @memberof logger\n * @requires logs\n * @property {number} timestamp When the log was created, based on UNIX epoch.\n * @property {string} method The log function that was used to create the log.\n * @property {string} level The level of severity the log.\n * @property {Object} target The subject that the log is about.\n * @property {string} target.type The type of the target. This is also\n *    used as part of the name of the Logger.\n * @property {string} [target.id] A unique identifer for the target.\n * @property {string} target.name A combination of the target type and ID. If no\n *    id was provided, this will be the same as the type.\n * @property {Array} messages The logged information, given to the Logger\n *    method as parameters.\n * @property {Object} [timer] Timing data, if the log method was a timer method.\n * @example\n * function defaultLogHandler (logEntry) {\n *   // Compile the meta info of the log for a prefix.\n *   const { timestamp, level, target } = logEntry\n *   let { method } = logEntry\n *   const logInfo = `${timestamp} - ${target.type} - ${level}`\n *\n *   // Assume that the first message parameter is a string.\n *   const [log, ...extra] = logEntry.messages\n *\n *   // For the timer methods, don't actually use the console methods.\n *   //    The Logger already did the timing, so simply log out the info.\n *   if (['time', 'timeLog', 'timeEnd'].includes(method)) {\n *     method = 'debug'\n *   }\n *\n *   console[method](`${logInfo} - ${log}`, ...extra)\n * }\n */\n\n/**\n * A LogHandler can be used to customize how the SDK should log information. By\n *    default, the SDK will log information to the console, but a LogHandler can\n *    be configured to change this behaviour.\n *\n * A LogHandler can be provided to the SDK as part of its configuration (see\n *    {@link #configconfiglogs config.logs}). The SDK will then provide this\n *    function with the logged information.\n *\n * @public\n * @static\n * @typedef {Function} LogHandler\n * @memberof logger\n * @requires logs\n * @param {Object} LogEntry The LogEntry to be logged.\n * @example\n * // Define a custom function to handle logs.\n * function logHandler (logEntry) {\n *   // Compile the meta info of the log for a prefix.\n *   const { timestamp, level, target } = logEntry\n *   let { method } = logEntry\n *   const logInfo = `${timestamp} - ${target.type} - ${level}`\n *\n *   // Assume that the first message parameter is a string.\n *   const [log, ...extra] = logEntry.messages\n *\n *   // For the timer methods, don't actually use the console methods.\n *   //    The Logger already did the timing, so simply log out the info.\n *   if (['time', 'timeLog', 'timeEnd'].includes(method)) {\n *     method = 'debug'\n *   }\n *\n *   console[method](`${logInfo} - ${log}`, ...extra)\n * }\n *\n * // Provide the LogHandler as part of the SDK configurations.\n * const configs = { ... }\n * configs.logs.handler = logHandler\n * const client = create(configs)\n */\n","import createManager from 'kandy-logger'\nimport defaultOptions from './config'\n\n// Logs generated as a result of invoking the public API will contain this tag\nexport const API_LOG_TAG = 'API invoked: '\n\n/**\n * Create the LogManager right away so that it is available. The SDK has not\n *    been instantiated yet, so we have to use the default options until we get\n *    the application's configs.\n */\n/**\n * TODO: There is a technical debt associated with having a loggerManager along with it's\n * loggers created at the global scope. Multiple instances of the SDK would end up sharing\n * the log manager and therefore loggers.\n */\nconst manager = createManager(defaultOptions)\nexport const logManager = manager\n","const prefix = '@@KANDY/LOGS/'\n\nexport const SET_LEVEL = prefix + 'SET_LEVEL'\nexport const LEVELS_CHANGE = prefix + 'LEVELS_CHANGE'\n\nexport const SET_HANDLER = prefix + 'SET_HANDLER'\nexport const HANDLERS_CHANGE = prefix + 'HANDLERS_CHANGE'\n","// Logs plugin.\nimport * as actionTypes from './actionTypes'\n\n/**\n * Action for setting a Logger's level.\n * @method setLevel\n * @param  {string} level  The level to be set.\n * @param  {string} [type] The type of Logger to set it for.\n */\nexport function setLevel (level, type) {\n  return {\n    type: actionTypes.SET_LEVEL,\n    payload: { level, type }\n  }\n}\n\n/**\n * Action for setting all of the Loggers' log level.\n * @method levelsChanged\n * @param  {Object} levelMap Mapping of logger type to level.\n * @return {Object}\n */\nexport function levelsChanged (levelMap) {\n  return {\n    type: actionTypes.LEVELS_CHANGE,\n    payload: levelMap\n  }\n}\n\n/**\n * Action for setting a Logger's handler.\n * @method setHandler\n * @param  {Function} handler A LogHandler function.\n * @param  {string}   [type]  The type of Logger to set it for.\n */\nexport function setHandler (handler, type) {\n  return {\n    type: actionTypes.SET_HANDLER,\n    payload: { handler, type }\n  }\n}\n\n/**\n * Action for setting all of the Loggers' log handler.\n * @method handlersChanged\n * @param  {Object} handlerMap Mapping of logger type to handler.\n * @return {Object}\n */\nexport function handlersChanged (handlerMap) {\n  return {\n    type: actionTypes.HANDLERS_CHANGE,\n    payload: handlerMap\n  }\n}\n","// Logs plugin.\nimport { logManager, API_LOG_TAG } from '../index'\nimport * as actions from './actions'\nimport { getLevel, getTypes } from './selectors'\n\n/**\n * The SDK has an internal logging system for providing information about its\n *    behaviour. The SDK will generate logs, at different levels for different\n *    types of information, which are routed to a\n *    \"{@link logger.LogHandler Log Handler}\" for consumption. An application\n *    can provide their own Log Handler (see\n *    {@link #configconfiglogs config.logs}) to customize how the logs are\n *    handled, or allow the default Log Handler to print the logs to the\n *    console.\n *\n * The SDK's default Log Handler is merely a thin wrapper around the browser's\n *    console API (ie. `window.console`). It receives the log generated by the\n *    SDK, called a \"{@link logger.LogEntry Log Entry}\", formats a\n *    human-readable message with it, then uses the console to log it at the\n *    appropriate level. This is important to be aware of, since your browser's\n *    console may affect how you see the SDK's default log messages. Since the\n *    default Log Handler uses the console's levels, the browser may filter\n *    which messages are shown depending on which levels it has configured. For\n *    a user that understands console log levels, this can be helpful for\n *    filtering the logs to only the relevant information. But it can equally\n *    be a hindrance by hiding the more detailed log messages (at the 'debug'\n *    level), since browser can have this level hidden by default. For this\n *    reason, we recommend providing a custom Log Handler to the SDK that is\n *    better suited for your application and its users.\n *\n * @public\n * @namespace logger\n * @requires logs\n */\n\nexport default function api ({ dispatch, getState }) {\n  const log = logManager.getLogger('LOGS')\n\n  const api = {\n    /**\n     * Possible levels for the SDK logger.\n     *\n     * The SDK will provide {@link logger.LogEntry Log Entries} to the\n     *    {@link logger.LogHandler Log Handler} for all logs at or above the set\n     *    log level. 'debug' is considered the lowest level and 'silent' the\n     *    highest level. For example, if the current level is 'info', then the\n     *    {@link logger.LogHandler Log Handler} will receive\n     *    {@link logger.LogEntry Log Entries} for logs at 'info', 'warn', and\n     *    'error', but not for the 'debug' level.\n     * @public\n     * @static\n     * @memberof logger\n     * @method levels\n     * @property {string} SILENT Nothing will be logged.\n     * @property {string} ERROR Unhandled error information will be logged. If\n     *    the SDK encounters an issue it cannot resolve, the error will be included\n     *    in the logs. This likely points to an issue with the SDK itself or an\n     *    issue with how the SDK is being used.\n     * @property {string} WARN Warning messages for the application developer will\n     *    be logged. If the SDK encounters an issue that it can recover and continue,\n     *    a warning about the issue will be included in the logs. These logs point\n     *    to issues that need to be handled by the application. For example, providing\n     *    an invalid configuration to the SDK will cause a warning log that explains\n     *    the issue.\n     * @property {string} INFO General information about the SDK's operations will\n     *    be logged, outlining how the SDK is handling the operations. Reading through\n     *    these logs should provide a high-level view of what the SDK is doing,\n     *    and why it is doing it.\n     * @property {string} DEBUG Detailed information about the SDK's operations,\n     *    meant for debugging issues, will be logged. Specific information and relevant\n     *    operation data are provided for understanding the scenario that the SDK\n     *    was in during the operation.\n     */\n    levels: {\n      SILENT: 'silent',\n      ERROR: 'error',\n      WARN: 'warn',\n      INFO: 'info',\n      DEBUG: 'debug'\n    },\n\n    /**\n     * Update the log level used by the SDK's loggers.\n     *\n     * Changing the log level will affect the amount of logs that the SDK will\n     *    output for debugging purposes.\n     *\n     * See {@link logger.levels} for valid log levels. Other values will not be\n     *    accepted. See the {@link logger.getTypes} API for valid logger types.\n     *    Other values will have no affect.\n     * @private\n     * @static\n     * @memberof logger\n     * @method setLevel\n     * @param  {string} level The log level to set.\n     * @param  {string} [type] An optional subset of loggers to update.\n     * @example\n     * // Set logs to be at the warn level.\n     * client.logger.setLevel(client.logger.levels.WARN)\n     */\n    setLevel (level, type) {\n      log.debug(API_LOG_TAG + 'logger.setLevel: ', level, type)\n\n      dispatch(actions.setLevel(level, type))\n    },\n\n    /**\n     * Get the currently set log level used by the SDK's loggers.\n     *\n     * @private\n     * @static\n     * @memberof logger\n     * @method getLevel\n     * @param  {string} [type] An optional subset of loggers.\n     * @return {logger.levels} A log level.\n     */\n    getLevel (type) {\n      log.debug(API_LOG_TAG + 'logger.getLevel: ', type)\n\n      return getLevel(getState(), type)\n    },\n\n    /**\n     * Updates the {@link logger.LogHandler LogHandler} used by the SDK's\n     *    loggers.\n     *\n     * Changing the log handler will change how the SDK's logs are handled by\n     *    the application.\n     *\n     * See {@link logger.LogHandler} and {@link logger.LogEntry} for information\n     *    about the handler. See the {@link logger.getTypes} API for valid\n     *    logger types. Other values will have no affect.\n     * @private\n     * @static\n     * @memberof logger\n     * @method setHandler\n     * @param  {logger.LogEntry} handler A {@link logger.LogHandler} function.\n     * @param  {string}   [type] An optional subset of loggers to update.\n     * @example\n     * // Change the SDK's Log Handler to a custom function.\n     * client.logger.setHandler((logEntry) => {\n     *    // Handle the SDK's logs in a custom way.\n     *    ...\n     * })\n     *\n     */\n    setHandler (handler, type) {\n      log.debug(API_LOG_TAG + 'logger.setHandler: ', handler, type)\n\n      dispatch(actions.setHandler(handler, type))\n    },\n\n    /**\n     * Get the list of logger types used by the SDK.\n     *\n     * Logs for different SDK features can be managed separately from one\n     *    another by specifying the type when using the {@link logger.setLevel}\n     *    and {@link logger.setHandler} APIs.\n     * @private\n     * @static\n     * @memberof logger\n     * @method getTypes\n     * @return {Array<string>} Logger types.\n     * @example\n     * const types = client.logger.getTypes()\n     * // types: ['DEFAULT', 'AUTH', 'CALL', ...]\n     *\n     * // Set the Call logs to be at the debug level.\n     * client.logger.setLevel('DEBUG', 'CALL')\n     */\n    getTypes () {\n      log.debug(API_LOG_TAG + 'logger.getTypes')\n\n      return getTypes(getState())\n    }\n  }\n\n  return {\n    logger: api\n  }\n}\n","import * as actionTypes from './actionTypes'\n\n// Libraries\nimport { handleActions } from 'redux-actions'\n\n/**\n * Logs state is a mapping between every Logger type (and the default type)\n *    and its set log level.\n * eg. {\n *    DEFAULT: 'DEBUG',\n *    AUTH: 'DEBUG',\n *    CALL: 'INFO',\n *    ...\n * }\n */\n\nconst reducers = {}\n\nreducers[actionTypes.LEVELS_CHANGE] = {\n  next (state, action) {\n    // Replace all levels that have been changed.\n    return {\n      ...state,\n      ...action.payload\n    }\n  }\n}\n\nconst reducer = handleActions(reducers, {})\nexport default reducer\n","// Libraries.\nimport { cloneDeep } from 'lodash/fp'\n\n/**\n * Retrieves the log level for a specifie logger type, or the default level.\n * @method getLevel\n * @param  {Object} state            SDK redux state.\n * @param  {String} [type='DEFAULT'] A type of Logger.\n * @return {string} A log level.\n */\nexport function getLevel (state, type = 'DEFAULT') {\n  const clonedState = cloneDeep(state)\n  return clonedState.logs[type]\n}\n\n/**\n * Retrieves a list of all of the SDK's Logger types.\n * @method getTypes\n * @param  {Object} state  SDK redux state.\n * @return {Array<string>}\n */\nexport function getTypes (state) {\n  const clonedState = cloneDeep(state)\n  return Object.keys(clonedState.logs)\n}\n","/**\nNote regarding this file's name:\n\nUsually plugins factories are in the index.js file of their corresponding folder.\nThis used to be the case. However this file was also being used to host the logManager\nthat is being used with the SDK.\n\nSince the logManager is being included in almost every file it was preferable to rename this\nfile rather than point 100s of files to a new place for the logManager.\n**/\n\n// Logs plugin.\nimport api from './interface/api'\nimport reducer from './interface/reducers'\nimport * as actions from './interface/actions'\n\nimport { defaultOptions, partialDefaultLogActions /*,  parseLogConfig */ } from './config'\nimport { setLevelEntry, setHandlerEntry, getLevelMap } from './sagas'\nimport createActionLogger from './actions'\n\n// Other plugins.\nimport { update as updateConfig } from '../config/interface/actions'\nimport { mergeValues } from '../common/utils'\n\n// Libraries.\nimport { put } from 'redux-saga/effects'\nimport { logLevels } from 'kandy-logger'\nimport { logManager } from './index'\n\n// Include the extra JSDoc items.\nimport './docs'\n\nexport default function logPlugin (options = {}) {\n  const name = 'logs'\n\n  const logger = logManager.getLogger('LOGS')\n\n  // Make sure the configured log handler was a function.\n  if (options.handler && typeof options.handler !== 'function') {\n    delete options.handler\n    logger.warn('Invalid log handler configuration provided; using default instead.')\n  }\n\n  // Make sure configured log level is supported.\n  if (options.logLevel && !Object.keys(logLevels).includes(options.logLevel.toUpperCase())) {\n    delete options.logLevel\n    logger.warn('Invalid log level configuration provided; using default instead.')\n  }\n\n  options = mergeValues(defaultOptions, options)\n\n  // Check if `logActions` is true and apply defaults for action logging\n  if (options.logActions !== false) {\n    if (options.logActions instanceof Object) {\n      options.logActions = mergeValues(partialDefaultLogActions, options.logActions)\n    } else {\n      options.logActions = partialDefaultLogActions\n    }\n  }\n\n  // Now that we have the application's log configs, update everything to\n  //    use those values instead of default values.\n  logManager.setLevel(options.logLevel)\n  if (options.handler) {\n    logManager.setHandler(options.handler)\n  }\n\n  Object.values(logManager.getLoggers()).forEach(logger => {\n    logger.setLevel(options.logLevel)\n    if (options.handler) {\n      logger.setHandler(options.handler)\n    }\n  })\n\n  function * init ({ webRTC }) {\n    // Send the provided options to the store.\n    // This will be `state.config[name]`.\n    yield put(updateConfig(options, name))\n    // Update state with the initial Logger levels.\n    yield put(actions.levelsChanged(getLevelMap(logManager)))\n    // Update everything to\n    //    use those values from the application configs instead of default values in the webrtc Stack.\n    const webRTCLogManager = webRTC.managers.logs\n    if (options.handler) {\n      webRTCLogManager.setHandler(options.handler)\n    }\n    Object.values(webRTCLogManager.getLoggers()).forEach(logger => {\n      logger.setLevel(options.logLevel)\n      if (options.handler) {\n        logger.setHandler(options.handler)\n      }\n    })\n  }\n\n  const components = {\n    name,\n    capabilities: ['logs'],\n    init,\n    api,\n    reducer,\n    sagas: [setLevelEntry, setHandlerEntry]\n  }\n\n  options.logLevel = options.logLevel.toUpperCase()\n  const setLevel = logLevels[options.logLevel]\n  // Consider actions to be at the INFO log level.\n  // Only export a middleware (for actions) at the appropriate levels.\n  if (setLevel <= logLevels.INFO && options.logActions !== false) {\n    components.middleware = createActionLogger(options)\n  }\n\n  return components\n}\n","// Logs plugin.\nimport * as actionTypes from './interface/actionTypes'\nimport * as actions from './interface/actions'\nimport { logManager } from './index'\n\n// Libraries.\nimport { put, takeEvery } from 'redux-saga/effects'\n\n// The SDK's name for the default/global log level.\nconst defaultType = 'DEFAULT'\n\n/**\n * Taker saga for \"set log level\" actions.\n * @method setLevelEntry\n */\nexport function * setLevelEntry () {\n  yield takeEvery(actionTypes.SET_LEVEL, setLogLevel)\n}\n\n/**\n * Taker saga for \"set log handler\" actions.\n * @method setHandlerEntry\n */\nexport function * setHandlerEntry () {\n  yield takeEvery(actionTypes.SET_HANDLER, setLogHandler)\n}\n\n/**\n * Functionality saga for \"set log level\" actions.\n * @method setLogLevel\n * @param  {Object} action\n * @param  {string} action.level\n * @param  {string} [action.type]\n */\nexport function * setLogLevel (action) {\n  const { level, type } = action.payload\n\n  try {\n    if (!type || type === defaultType) {\n      // Update the Manager's default level.\n      logManager.setLevel(level)\n      // Update all Loggers' levels.\n      logManager.getLoggers().forEach(logger => {\n        logger.setLevel(level)\n      })\n\n      // Update all Logger levels in state, because changing the default level\n      //    will affect all Loggers without their own explicit level set.\n      yield put(actions.levelsChanged(getLevelMap(logManager)))\n    } else {\n      // Update the Manager's default level for this type.\n      logManager.setLevel(type, level)\n      // Update all Loggers of this type.\n      logManager.getLoggers(type).forEach(logger => {\n        logger.setLevel(level)\n      })\n\n      // Update the one type's level in state.\n      yield put(actions.levelsChanged({ [type]: level }))\n    }\n  } catch (err) {\n    const log = logManager.getLogger('LOGS')\n    log.error(err.message)\n  }\n}\n\n/**\n * Functionality saga for \"set log handler\" actions.\n * @method setLogHandler\n * @param  {Object}   action\n * @param  {Function} action.handler\n * @param  {string}   [action.type]\n */\nexport function * setLogHandler (action) {\n  const { handler, type } = action.payload\n\n  try {\n    if (!type || type === defaultType) {\n      // Update the Manager's default level.\n      logManager.setHandler(handler)\n      // Update all Loggers' handlers.\n      logManager.getLoggers().forEach(logger => {\n        logger.setHandler(handler)\n      })\n\n      // Notify that all Logger handlers [may] have changed (because changing\n      //    the default handler will affect all Loggers without their own\n      //    handler explicitly set).\n      yield put(actions.handlersChanged(getHandlerMap(logManager)))\n    } else {\n      // Update the Manager's default handler for this type.\n      logManager.setHandler(type, handler)\n      // Update all Loggers of this type.\n      logManager.getLoggers(type).forEach(logger => {\n        logger.setHandler(handler)\n      })\n\n      // Notify that the one type's handler has changed.\n      yield put(actions.handlersChanged({ [type]: handler }))\n    }\n  } catch (err) {\n    const log = logManager.getLogger('LOGS')\n    log.error(err.message)\n  }\n}\n\n/**\n * Helper function.\n * Gets the log levels for every Logger type (and default).\n * @method getLevelMap\n * @return {Object} Mapping of Logger type to its log level.\n */\nexport function getLevelMap (logManager) {\n  // Get unique types from all Loggers.\n  const loggers = logManager.getLoggers()\n  const types = [...new Set(loggers.map(logger => logger.type))]\n\n  const levels = {}\n  // Add the default level to the beginning.\n  levels[defaultType] = logManager.getLevel()\n\n  // Get the level for each Logger type.\n  types.forEach(type => {\n    levels[type] = logManager.getLevel(type)\n  })\n\n  return levels\n}\n\n/**\n * Helper function.\n * Gets the log handler for every Logger type (and default).\n * @method getHandlerMap\n * @return {Object} Mapping of Logger type to its log handler.\n */\nexport function getHandlerMap (logManager) {\n  // Get unique types from all Loggers.\n  const loggers = logManager.getLoggers()\n  const types = [...new Set(loggers.map(logger => logger.type))]\n\n  const handlers = {}\n  // Add the default level to the beginning.\n  handlers[defaultType] = logManager.getHandler()\n\n  // Get the handler for each Logger type.\n  types.forEach(type => {\n    handlers[type] = logManager.getHandler(type)\n  })\n\n  return handlers\n}\n","const prefix = '@@KANDY/'\n\nexport const PROCESS_NOTIFICATION = prefix + 'PROCESS_NOTIFICATION'\nexport const PROCESS_NOTIFICATION_FINISH = prefix + 'PROCESS_NOTIFICATION_FINISH'\nexport const NOTIFICATION_RECEIVED = prefix + 'NOTIFICATION_RECEIVED'\n\nexport const ENABLE_NOTIFICATION_CHANNEL = prefix + 'ENABLE_NOTIFICATION_CHANNEL'\nexport const ENABLE_NOTIFICATION_CHANNEL_FINISH = prefix + 'ENABLE_NOTIFICATION_CHANNEL_FINISH'\n\nexport const REGISTER_APPLE_PUSH_NOTIFICATION = prefix + 'REGISTER_APPLE_PUSH_NOTIFICATION'\nexport const REGISTER_ANDROID_PUSH_NOTIFICATION = prefix + 'REGISTER_ANDROID_PUSH_NOTIFICATION'\n\nexport const UNREGISTER_APPLE_PUSH_NOTIFICATION = prefix + 'UNREGISTER_APPLE_PUSH_NOTIFICATION'\nexport const UNREGISTER_ANDROID_PUSH_NOTIFICATION = prefix + 'UNREGISTER_ANDROID_PUSH_NOTIFICATION'\n","import * as actionTypes from './actionTypes'\n// Constants\nimport { platforms } from '../../constants'\n\n/**\n * Helper function for funneling all notification types into a single action.\n * @method notificationHelper\n * @param  {string} channel - The channel that the notification came from.\n * @param  {Object} notification\n * @param  {string} platform\n * @return {Object} A flux standard action.\n */\nfunction notificationHelper (channel, notification, platform) {\n  return {\n    type: actionTypes.PROCESS_NOTIFICATION,\n    payload: notification,\n    meta: {\n      platform,\n      channel\n    }\n  }\n}\n\n/**\n * Represents an application request to process a websocket notification.\n * @method websocketNotification\n * @param  {Object} notification\n * @param  {string} platform\n * @return {Object} A flux standard action.\n */\nexport function websocketNotification (notification, platform = platforms.LINK) {\n  return notificationHelper('WEBSOCKET', notification, platform)\n}\n\n/**\n * Represents an application request to process an external notification.\n * @method externalNotification\n * @param  {Object} notification\n * @param  {string} [channel='PUSH'] - The channel that the notification came from.\n * @return {Object} A flux standard action.\n */\nexport function externalNotification (notification, channel = 'PUSH', platform) {\n  // TODO: Are external notifications _only_ for Link?\n  return notificationHelper(channel.toUpperCase(), notification, platform)\n}\n\n/**\n * Represents a received notification.\n * @method notificationReceived\n * @param  {Object} notification\n * @param  {string} platform\n * @return {Object} A flux standard action.\n */\nexport function notificationReceived (notification, platform, channel) {\n  return {\n    type: actionTypes.NOTIFICATION_RECEIVED,\n    payload: notification,\n    error: notification instanceof Error,\n    meta: {\n      platform,\n      channel\n    }\n  }\n}\n\n/**\n * Represents a received notification.\n * @method processNotificationFinish\n * @param  {Object} notification\n * @param  {string} platform\n * @return {Object} A flux standard action.\n */\nexport function processNotificationFinish (notification, platform) {\n  return {\n    type: actionTypes.PROCESS_NOTIFICATION_FINISH,\n    payload: notification,\n    error: notification instanceof Error,\n    meta: {\n      platform\n    }\n  }\n}\n\n/**\n * Represents a request to change a notification channel status.\n * @method enableNotificationChannel\n * @param  {string} channel - The notification channel being affected.\n * @param  {Object} params\n * @param  {boolean} params.channelEnabled - Whether to enable the channel or not.\n * @return {Object} A flux standard action.\n */\nexport function enableNotificationChannel (channel, params = {}) {\n  return {\n    type: actionTypes.ENABLE_NOTIFICATION_CHANNEL,\n    payload: {\n      ...params\n    },\n    meta: {\n      channel\n    }\n  }\n}\n\n/**\n * Represents a request to change a notification channel status.\n * @method registerApplePushNotification\n * @param  {Object} params\n * @return {Object} A flux standard action.\n */\nexport function registerApplePushNotification (params, deferred) {\n  return {\n    type: actionTypes.REGISTER_APPLE_PUSH_NOTIFICATION,\n    payload: {\n      ...params,\n      pushProvider: 'apple'\n    },\n    meta: {\n      deferred\n    }\n  }\n}\n\n/**\n * Represents a request to change a notification channel status.\n * @method registerAndroidPushNotification\n * @param  {Object} params\n * @return {Object} A flux standard action.\n */\nexport function registerAndroidPushNotification (params, deferred) {\n  return {\n    type: actionTypes.REGISTER_ANDROID_PUSH_NOTIFICATION,\n    payload: {\n      ...params,\n      pushProvider: 'google'\n    },\n    meta: {\n      deferred\n    }\n  }\n}\n\n/**\n * Represents a request to change a notification channel status.\n * @method unregisterApplePushNotification\n * @param  {string} registration\n * @return {Object} A flux standard action.\n */\nexport function unregisterApplePushNotification (registration, deferred) {\n  return {\n    type: actionTypes.UNREGISTER_APPLE_PUSH_NOTIFICATION,\n    payload: {\n      registration\n    },\n    meta: {\n      deferred\n    }\n  }\n}\n\n/**\n * Represents a request to change a notification channel status.\n * @method unregisterAndroidPushNotification\n * @param  {string} registration\n * @return {Object} A flux standard action.\n */\nexport function unregisterAndroidPushNotification (registration, deferred) {\n  return {\n    type: actionTypes.UNREGISTER_ANDROID_PUSH_NOTIFICATION,\n    payload: {\n      registration\n    },\n    meta: {\n      deferred\n    }\n  }\n}\n\n/**\n * Represents the response of a change in a notification channel status.\n * @method enableNotificationChannelFinish\n * @param  {string} channel - The notification channel being affected.\n * @param  {Object} $1\n * @param  {Object} $1.params - Information about the channel change.\n * @param  {Object} $1.params.channelEnabled - Whether the channel was enabled or not.\n * @param  {Object} $1.error - Error object, in the case of an error.\n * @return {Object} A flux standard action.\n */\nexport function enableNotificationChannelFinish (channel, { params, error } = {}) {\n  var action = {\n    type: actionTypes.ENABLE_NOTIFICATION_CHANNEL_FINISH,\n    meta: {\n      channel\n    }\n  }\n\n  if (error) {\n    action.error = true\n    action.payload = new Error(error)\n    action.payload.channelEnabled = params.channelEnabled\n  } else {\n    action.payload = {\n      ...params\n    }\n  }\n\n  return action\n}\n","/**\n * The 'notification' namespace allows user to register/deregister for/from push notifications as well as\n * enabling/disabling the processing of websocket notifications.\n *\n * @public\n * @requires externalNotifications\n * @namespace notification\n */\n\nimport * as actions from './actions'\nimport { platforms } from '../../constants'\n\nimport { logManager, API_LOG_TAG } from '../../logs'\n\nimport pDefer from 'p-defer'\nconst log = logManager.getLogger('NOTIFICATIONS')\n\n/**\n * Notifications API.\n * @method api\n * @param {Function} dispatch The redux store's dispatch function.\n * @return {Object} api  The notifications API object.\n */\nexport default function api ({ dispatch }) {\n  const notificationApi = {\n    /**\n     * Provides an external notification to the system for processing.\n     *\n     * @public\n     * @requires externalNotifications\n     * @memberof notification\n     * @method process\n     * @param {Object} notification\n     * @param {string} [channel] - The channel that the notification came from.\n     */\n    process (notification, channel, platform = platforms.LINK) {\n      log.debug(API_LOG_TAG + 'notification.process: ', notification, channel, platform)\n      dispatch(actions.externalNotification(notification, channel, platform))\n    },\n\n    /**\n     * Registers with Apple push notification service. Once registration is successful, the application will be able to receive\n     * standard and/or voip push notifications. It can then send these notifications to the SDK with {@link api.notifications.process}\n     * in order for the SDK to process them.\n     *\n     * @public\n     * @requires push\n     * @memberof notification\n     * @method registerApplePush\n     * @param {Object} params\n     * @param {string[]} params.services - Array of services for which we wish to receive notifications.\n     * @param {string} params.voipDeviceToken - The voip device token used for voip push on iOS.\n     *                                          This token is required if registering for call service notifications on iOS.\n     * @param {string} params.standardDeviceToken - The standardDevice token used for standard push on iOS .\n     *                                              This token is required when registering for non-call service notifications.\n     * @param {string} params.bundleId - The bundleId to identify the application receiving the push notification.\n     * @param {string} params.clientCorrelator - Unique identifier for a client device.\n     * @param {string} params.realm - The realm used by the push registration service to identify and\n     *                                establish a connection with the service gateway.\n     * @param {boolean} params.isProduction - If true, push notification will be sent to production.\n     *                                        If false, push notification will be sent to sandbox.\n     * @return {Promise} When successful,  the information of the registration.\n     *                   Promise will reject with error object otherwise.\n     */\n    registerApplePush ({\n      services,\n      voipDeviceToken,\n      standardDeviceToken,\n      bundleId,\n      clientCorrelator,\n      realm,\n      isProduction\n    }) {\n      const deferredResult = pDefer()\n      log.debug(API_LOG_TAG + 'notification.registerApplePush', arguments)\n\n      dispatch(\n        actions.registerApplePushNotification(\n          {\n            services,\n            voipDeviceToken,\n            standardDeviceToken,\n            bundleId,\n            clientCorrelator,\n            realm,\n            isProduction\n          },\n          deferredResult\n        )\n      )\n\n      return deferredResult.promise\n    },\n\n    /**\n     * Registers with Google push notification service. Once registration is successful, the application will be able to receive\n     * standard and/or voip push notifications. It can then send these notifications to the SDK with {@link api.notifications.process}\n     * in order for the SDK to process them.\n     *\n     * @public\n     * @requires push\n     * @memberof notification\n     * @method registerAndroidPush\n     * @param {Object} params\n     * @param {string[]} params.services - Array of services to register for.\n     * @param {string} params.deviceToken - The device token used for standard push on Android. This token is required\n     *                                      when registering for all related services notifications.\n     * @param {string} params.bundleId - The bundleId to identify the application receiving the push notification.\n     * @param {string} params.clientCorrelator - Unique identifier for a client device.\n     * @param {string} params.realm - The realm used by the push registration service to identify\n     *                                and establish a connection with the service gateway.\n     * @return {Promise} When successful,  the information of the registration.\n     *                   Promise will reject with error object otherwise.\n     */\n    registerAndroidPush ({ services, deviceToken, bundleId, clientCorrelator, realm }) {\n      const deferredResult = pDefer()\n      log.debug(API_LOG_TAG + 'notification.registerAndroidPush', arguments)\n\n      dispatch(\n        actions.registerAndroidPushNotification(\n          {\n            services,\n            deviceToken,\n            bundleId,\n            clientCorrelator,\n            realm\n          },\n          deferredResult\n        )\n      )\n      return deferredResult.promise\n    },\n\n    /**\n     * Unregister Apple push notifications.\n     *\n     * @public\n     * @requires push\n     * @memberof notification\n     * @method unregisterApplePush\n     * @param {string} registrationInfo - The data returned from the push registration\n     * @return {Promise} When successful, the promise will resolve with undefined.\n     *                   Promise will reject with error object otherwise.\n     */\n    unregisterApplePush (registrationInfo) {\n      const deferredResult = pDefer()\n      log.debug(API_LOG_TAG + 'notification.unregisterPush')\n      dispatch(actions.unregisterApplePushNotification(registrationInfo, deferredResult))\n\n      return deferredResult.promise\n    },\n\n    /**\n     * Unregister Android push notifications.\n     *\n     * @public\n     * @requires push\n     * @memberof notification\n     * @method unregisterAndroidPush\n     * @param {string} registrationInfo - The data returned from the push registration\n     * @return {Promise} When successful, the promise will resolve with undefined.\n     *                   Promise will reject with error object otherwise.\n     */\n    unregisterAndroidPush (registrationInfo) {\n      const deferredResult = pDefer()\n      log.debug(API_LOG_TAG + 'notification.unregisterPush')\n      dispatch(actions.unregisterAndroidPushNotification(registrationInfo, deferredResult))\n\n      return deferredResult.promise\n    },\n\n    /**\n     * Enables, or disables, the processing of websocket notifications.\n     *\n     * @public\n     * @requires push\n     * @memberof notification\n     * @method enableWebsocket\n     * @param {boolean} enable - Whether the websocket channel should be enabled.\n     */\n    enableWebsocket (enable) {\n      log.debug(API_LOG_TAG + 'notification.enableWebsocket: ', enable)\n      dispatch(\n        actions.enableNotificationChannel('WEBSOCKET', {\n          channelEnabled: enable\n        })\n      )\n    }\n  }\n\n  return { notification: notificationApi }\n}\n","/**\n * Push notifications registration state has changed.\n *\n * @public\n * @requires push\n * @memberof notification\n * @event notifications:change\n * @param {Object} params\n * @param {string} params.channel The channel for the notification.\n */\nexport const NOTI_CHANGE = 'notifications:change'\n\n/**\n * An error occurred with push notifications.\n *\n * @public\n * @requires push\n * @memberof notification\n * @event notifications:error\n * @param {Object} params\n * @param {api.BasicError} params.error The Basic error object.\n * @param {string} params.channel The channel for the notification.\n */\nexport const NOTI_ERROR = 'notifications:error'\n\n/**\n * A notification was received by the SDK.\n *\n * @private This is an undocumented feature.\n *\n * @event notification:received\n * @param {Object} params Object that has information about the notification.\n * @param {Object} params.payload The payload of the notification.\n */\nexport const NOTI_RECEIVED = 'notification:received'\n","import * as eventTypes from './eventTypes'\nimport * as actionTypes from './actionTypes'\n\nvar events = {}\n\nevents[actionTypes.ENABLE_NOTIFICATION_CHANNEL_FINISH] = function (action) {\n  if (action.error) {\n    return {\n      type: eventTypes.NOTI_ERROR,\n      args: { channel: action.meta.channel, error: action.payload }\n    }\n  } else {\n    return {\n      type: eventTypes.NOTI_CHANGE,\n      args: { channel: action.meta.channel }\n    }\n  }\n}\n\nevents[actionTypes.NOTIFICATION_RECEIVED] = function (action) {\n  if (!action.error) {\n    return {\n      type: eventTypes.NOTI_RECEIVED,\n      args: { payload: action.payload }\n    }\n  }\n}\n\nexport default events\n","import reducer from './reducers'\nimport api from './api'\n\nconst name = 'notifications'\n\nexport { name, api, reducer }\n","import * as actionTypes from './actionTypes'\nimport { WS_CONNECT_FINISHED } from '../../connectivity/interface/actionTypes'\nimport { handleActions } from 'redux-actions'\n\nconst reducers = {}\n\nreducers[actionTypes.ENABLE_NOTIFICATION_CHANNEL_FINISH] = {\n  next (state, action) {\n    const channel = action.meta.channel\n    const enabled = action.payload.channelEnabled\n\n    let newChannelState\n    if (enabled) {\n      newChannelState = {\n        ...state[channel],\n        ...action.payload\n      }\n    } else {\n      // If the channel is being disabled, clear old state.\n      newChannelState = {\n        ...action.payload\n      }\n    }\n\n    return {\n      ...state,\n      [channel]: newChannelState\n    }\n  }\n}\n\n/*\n * The websocket channel is assumed to be enabled when the\n *      websocket is opened.\n */\nreducers[WS_CONNECT_FINISHED] = {\n  next (state) {\n    // TODO: Link WS only?\n    return {\n      ...state,\n      WEBSOCKET: {\n        ...state.WEBSOCKET,\n        channelEnabled: true\n      }\n    }\n  }\n}\n\n// Default notifications sub-state.\nconst defaultState = {\n  WEBSOCKET: {\n    channelEnabled: false\n  },\n  PUSH: {\n    channelEnabled: true\n  }\n}\n\n/**\n * Notifications reducer.\n * @method reducer\n * @param  {Object}  state - The current redux state.\n * @param  {Object}  action - A flux standard action.\n * @return {Object}  - The new redux state.\n */\nconst reducer = handleActions(reducers, defaultState)\nexport default reducer\n","import { cloneDeep } from 'lodash/fp'\n\n/**\n * Retrieves the notifications state.\n * @method getNotificationsInfo\n * @param  {String} [channel] - Specific notification channel information to retrieve.\n * @return {Object}\n */\nexport function getNotificationsInfo (state, channel = undefined) {\n  if (channel) {\n    return state.notifications[channel]\n  } else {\n    return state.notifications\n  }\n}\n\n/**\n * Retrieves notification config.\n * @method getNotificationConfig\n * @return {Object}\n */\nexport function getNotificationConfig (state) {\n  return cloneDeep(state.config.notifications)\n}\n","// Notification plugin.\nimport { api, reducer, name } from '../../notifications/interface'\nimport events from '../../notifications/interface/events'\nimport * as pushRegistrationSagas from './sagas/pushRegistration'\nimport * as notificationSagas from './sagas/notification'\n\n// Other plugins.\nimport { mapEvents } from '../../events/interface/actions'\nimport { update as updateConfig } from '../../config/interface/actions'\n\n// Libraries.\nimport { put } from 'redux-saga/effects'\nimport { defaultsDeep, values } from 'lodash/fp'\n\n// Parse and/or Validate\nimport { validation as v8n, parse, enums } from '../../../src/common/validation'\n\n/**\n * Configuration options for the notification feature.\n * @public\n * @name config.notifications\n * @memberof config\n * @instance\n * @param {Object} notifications - The notifications configuration object.\n * @param {number} [notifications.idCacheLength=100] - Default amount of event ids to remember for de-duplication purposes.\n * @param {string} [notifications.incomingCallNotificationMode='any-channel'] - Communication channel mode used for incoming call notifications. Supported values are 'any-channel' or 'push-channel-only'.\n * @param {Object} [notifications.pushRegistration] - Object describing the server to use for push services.\n * @param {string} [notifications.pushRegistration.server] - Hostname for the push registration server.\n * @param {string} [notifications.pushRegistration.port] - Port for the push registration server.\n * @param {string} [notifications.pushRegistration.protocol] - Protocol for the push registration server.\n * @param {string} [notifications.pushRegistration.version] - Version for the push registration server.\n */\n\nconst defaultOptions = {\n  idCacheLength: 100,\n  incomingCallNotificationMode: 'any-channel'\n}\n\n// config validation\nconst v8nValidation = v8n.schema({\n  idCacheLength: v8n.positive(),\n  incomingCallNotificationMode: enums(['any-channel', 'push-channel-only']),\n  pushRegistration: v8n.optional(\n    v8n.schema({\n      server: v8n.string(),\n      port: v8n.string(),\n      protocol: v8n.string(),\n      version: v8n.string()\n    })\n  )\n})\nconst parseOptions = parse('notifications', v8nValidation)\n\n/**\n * Notifications plugin factory.\n * @method notifications\n * @param {configs.notifications} options - Configuration options for authentication.\n * @return {Object} plugin - A notifications plugin.\n */\nexport default function notifications (options = {}) {\n  const pluginOptions = defaultsDeep(defaultOptions, options)\n  parseOptions(pluginOptions)\n\n  function * init () {\n    yield put(updateConfig(pluginOptions, name))\n    yield put(mapEvents(events))\n  }\n\n  const capabilities = ['push', 'registerPushNotifications', 'externalNotifications']\n\n  return {\n    name,\n    capabilities,\n    init,\n    api,\n    reducer,\n    sagas: [...values(notificationSagas), ...values(pushRegistrationSagas)]\n  }\n}\n","// Request\nimport request from '../../request/effects'\n// Logs\nimport { logManager } from '../../logs'\nconst log = logManager.getLogger('NOTIFICATIONS')\n\n/**\n * Registers a device token with On-Prem services.\n * @method pushNotificationsRegistration\n * @param  {Object} connection - Information for formatting the request.\n * @param  {Object} options\n * @param  {string[]} options.services - Push service to register to; either 'google' or 'apple'.\n * @param {string} options.pushProvider - The push provider, can be either 'apple' or 'google'.\n * @param  {string} options.bundleId - The bundle id to use for registration.\n * @param  {string} options.deviceToken\n * @param {string} options.voipDeviceToken - Token for call related service.\n * @param {string} options.standardDeviceToken - Token for non-call related service.\n * @param  {string} options.clientCorrelator - Unique identifier for a client device.\n * @param {string} options.realm - The realm used by the push registration service to identify\n *                                and establish a connection with the service gateway.\n * @param {boolean} options.isProduction - If true, push notification will be sent to production. If false, push notification will be sent to sandbox.\n * @return {Object} response\n */\nexport function * pushNotificationsRegistration (\n  connection,\n  {\n    services,\n    pushProvider,\n    bundleId,\n    deviceToken,\n    voipDeviceToken,\n    standardDeviceToken,\n    clientCorrelator,\n    realm,\n    isProduction\n  }\n) {\n  const { server } = connection\n  pushProvider = pushProvider.toLowerCase()\n  const url =\n    `${server.protocol}://${server.server}:${server.port}/` +\n    `rest/version/${server.version}/` +\n    `user/${connection.username}/` +\n    'push/' +\n    pushProvider +\n    '/devices/'\n  const method = 'POST'\n  let body = {\n    bundleID: bundleId,\n    service: services,\n    clientCorrelator: clientCorrelator,\n    realm: realm,\n    isProduction: isProduction\n  }\n\n  if (pushProvider === 'apple') {\n    body.voipDeviceToken = voipDeviceToken\n    body.standardDeviceToken = standardDeviceToken\n  } else {\n    body.deviceToken = deviceToken\n  }\n\n  body = JSON.stringify(body)\n  log.debug(`Sending PUSH register request: ${method} ${url}`)\n\n  const response = yield request({ url, method, body })\n\n  let registrationResponse\n  const responseName = pushProvider + 'DeviceRegistrationResponse'\n  if (response.payload.body && response.payload.body[responseName]) {\n    registrationResponse = response.payload.body[responseName]\n  }\n\n  if (response.error) {\n    log.info('Failed to register device token for PUSH notifications.')\n    if (registrationResponse) {\n      // Handle errors from the server.\n      const statusCode = registrationResponse.statusCode\n      log.debug(`Device registration request for PUSH notifications failed with status code: ${statusCode}`)\n\n      return {\n        error: true,\n        status: statusCode,\n        text: `Failed to register device token for PUSH notifications. Code: ${statusCode}`\n      }\n    } else {\n      // Handle errors from the request helper.\n      const { message } = response.payload.result\n      log.debug(`Device registration request for PUSH notifications failed with message: ${message}.`)\n\n      return {\n        error: true,\n        status: response.payload.result.code,\n        text: `Failed to register device token for PUSH notifications. Error: ${response.payload.result.message}`\n      }\n    }\n  } else if (registrationResponse && registrationResponse.statusCode !== 0) {\n    log.info(`Failed to register device token for PUSH notifications. Code: ${registrationResponse.statuscode}`)\n    // TODO: Is this else-if needed?\n    return {\n      error: true,\n      status: registrationResponse.statuscode,\n      text: `Failed to register device token for PUSH notifications. Error: ${registrationResponse.statusCode}`\n    }\n  } else {\n    log.info('Successfully registered device token for PUSH notifications.')\n    return {\n      error: false,\n      ...registrationResponse\n    }\n  }\n}\n\n/**\n * De-Registers a device token with On-Prem services.\n * @method pushNotificationsDeRegistration\n * @param  {Object} connection - Information for formatting the request.\n * @param  {Object} options\n * @param  {string} options.registration\n * @return {Object} response\n */\nexport function * pushNotificationsDeRegistration (connection, { registration }) {\n  const { server } = connection\n  const url = `${server.protocol}://${server.server}:${server.port}${registration}`\n  const method = 'DELETE'\n  const responseType = 'none'\n\n  log.debug(`Sending PUSH unregister request: ${method} ${url}`)\n  const response = yield request({ url, method, responseType })\n\n  if (response.error) {\n    log.info('Failed to unregister device token for PUSH notifications.')\n    if (response.payload.body) {\n      // Handle errors from the server.\n      const { statusCode } = response.payload.body\n      log.debug(`Failed to unregister device token for PUSH notifications. Status code: ${statusCode}.`)\n      // TODO: Proper errors.\n      return {\n        error: true,\n        status: statusCode,\n        text: `Failed to unregister device token for PUSH notifications. Code: ${statusCode}.`\n      }\n    } else {\n      // Handle errors from the request helper.\n      const { message } = response.payload.result\n      log.debug(`Device token unregistration request failed for PUSH notifications: ${message}`)\n      // TODO: Proper error.\n      return {\n        error: true,\n        status: response.payload.result.code,\n        text: `Device token unregistration request failed for PUSH notifications: ${message}`\n      }\n    }\n  } else {\n    log.info('Successfully unregistered device token for PUSH notifications.')\n    // Successful de-register has no response.\n    return {\n      error: false\n    }\n  }\n}\n\n/**\n * Fetches SDP data from a given partial URL.\n * @method fetchSDP\n * @param  {Object} partialUrl - A partial URL. Contains everything after the protocol://server:port\n * @return {Object} response A response payload\n */\nexport function * fetchSDP (connection, partialUrl) {\n  const { server } = connection\n  const method = 'GET'\n  const url = `${server.protocol}://${server.server}:${server.port}${partialUrl}`\n  log.debug(`Sending request to fecth SDP: ${method} ${url}`)\n\n  const response = yield request({\n    url,\n    method\n  })\n\n  if (!response.error) {\n    log.info('SDP fetched successfully.')\n    // TODO: test and see what this format actually is.\n    return response.payload.body\n  } else {\n    log.debug(`Failed to fetch SDP. Error is: ${JSON.stringify(response.error)}`)\n  }\n}\n","import { defaults, has } from 'lodash/fp'\nimport { inflate } from 'pako'\nimport { buffers } from 'redux-saga'\nimport { actionChannel, call, put, select, take, takeEvery } from 'redux-saga/effects'\nimport { getConnectionInfo } from '../../../auth/interface/selectors'\nimport { platforms } from '../../../constants'\nimport { logManager } from '../../../logs'\nimport * as actions from '../../interface/actions'\nimport * as actionTypes from '../../interface/actionTypes'\nimport { getNotificationConfig, getNotificationsInfo } from '../../interface/selectors'\nimport * as requests from '../requests'\n\n// Get the logger\nconst log = logManager.getLogger('NOTIFICATIONS')\n\n/**\n * Unregister for android push notification.\n * @method enableWebsocketChannelEntry\n */\nexport function * enableWebsocketChannelEntry () {\n  yield takeEvery(actionTypes.ENABLE_NOTIFICATION_CHANNEL, enableWebsocketChannel)\n}\n\nfunction * enableWebsocketChannel (action) {\n  if (action.payload.enable) {\n    // TODO: If websockets are not connected, connect them here.\n  }\n\n  // TODO: Handle possible error case when connecting websockets.\n  //      Otherwise, plain dispatch to update state.\n  log.info('Enabling WEBSOCKET notification channel ...')\n  yield put(\n    actions.enableNotificationChannelFinish(action.meta.channel, {\n      params: action.payload\n    })\n  )\n}\n\nconst INITIAL_BUFFER_SIZE = 10\n\nexport function * processNotification () {\n  const config = yield select(getNotificationConfig)\n  var queue = []\n\n  const externalNotifications = yield actionChannel(\n    actionTypes.PROCESS_NOTIFICATION,\n    buffers.expanding(INITIAL_BUFFER_SIZE)\n  )\n  while (true) {\n    const action = yield take(externalNotifications)\n    log.info(\n      `Received notification on channel ${action.meta.channel} for platform: ${action.meta.platform}; Handling...`\n    )\n\n    // Only process notifications from enabled channels, ie. \"silence\" the channel.\n    const channel = yield select(getNotificationsInfo, action.meta.channel)\n    if (!channel.channelEnabled) {\n      log.debug(`Notification received on disabled channel: ${action.meta.channel}. Ignoring it ...`)\n      continue\n    }\n\n    const notification = action.payload\n    const notificationMessage = notification.notificationMessage\n    const notificationId = id(action.meta.platform)(notification)(notificationMessage)\n\n    let formattedPayload = action.payload\n    if (has('payload.notificationMessage.sessionParams.sdpFormat', action)) {\n      log.debug('Notification contains SDP. Normalizing.')\n      formattedPayload = yield call(normalizeSDP, action.payload)\n    }\n\n    // If we're in the PUSH-only notification mode and\n    // this incoming notification is coming through a channel other than PUSH channel (e.g. WEBSOCKET) and\n    // this notification is for an incoming call\n    if (\n      formattedPayload.notificationMessage.eventType === 'call' &&\n      config.incomingCallNotificationMode === 'push-channel-only' &&\n      action.meta.channel !== 'PUSH'\n    ) {\n      // Ignore this call-related notification, but at a minimum generate a log so that user is aware.\n      log.warn(\n        'Dropped incoming call notification with id: ' +\n          notificationId +\n          ' received through channel: ' +\n          action.meta.channel +\n          ' because current mode for handling notifications is set to: push-channel-only.'\n      )\n      continue\n    } else {\n      const duplicate = queue.includes(notificationId)\n      if (duplicate) {\n        log.info('Notification was a duplicate; ignoring.')\n        const error = new Error(`Notification id ${notificationId} is duplicate.`)\n        // TODO: Tech-debt; this action should be a notificationReceived error action.\n        //      But that requires all sagas listening for notifications to filter out\n        //      error actions ..which requires their take() patterns changed, which\n        //      is another tech-debt item.\n        yield put(actions.processNotificationFinish(error))\n      } else {\n        queue.push(notificationId)\n        if (queue.length > config.idCacheLength) {\n          queue.shift()\n        }\n\n        const { platform, channel } = action.meta\n        log.debug('Added notification ID to the ID cache. Informing listeners ...')\n        // Inform all other plugins by sending a NOTIFICATION_RECEIVED action\n        yield put(actions.notificationReceived(formattedPayload, platform, channel))\n      }\n    }\n  }\n}\n\nconst id = platform => notification => notificationMessage => {\n  switch (platform) {\n    case platforms.LINK:\n      log.debug(`The received notification is of type ${notificationMessage.eventType}.`)\n      return notificationMessage.eventId\n\n    case platforms.UC:\n      // A Link notification can be in either the Link format or the SPiDR format (for calls).\n      return notificationMessage.id || notificationMessage.eventId\n\n    case platforms.CPAAS:\n      // CPaaS notifications do not have a consistent path to their ID.\n      //    The ID is one level down in the object, but we need to dynamically\n      //    find the key that its in.\n      for (const key in notification) {\n        if (notification[key].id) {\n          return notification[key].id\n        }\n      }\n      log.error('Received notification without a findable ID: ', Object.keys(notification))\n      return null\n\n    default:\n      log.debug('Received notification from unknown platform.')\n      return null\n  }\n}\n\n/**\n * This function accepts a notification payload. If the payload is a spidr payload\n * and contains an sdpFormat that needs manipulating, it is done here.\n * @method normalizeSDP\n * @param payload A processNotification action payload\n * @returns payload A processNotification action payload\n */\nfunction * normalizeSDP (payload) {\n  // Copy the payload to not disturb the action.\n  payload = { ...payload }\n\n  if (payload.notificationMessage.sessionParams.sdpFormat === 'compressed') {\n    log.debug('Found SDP format: compressed. Deflating compressed SDP...')\n    // convert based64 encoded string into bytes\n    const sdpCompressedBytes = atob(payload.notificationMessage.sessionParams.sdp)\n    // uncompressed the bytes\n    const sdpUnCompressedBytes = yield call(inflate, sdpCompressedBytes)\n    // convert uncompressed bytes back into string\n    const sdpString = String.fromCharCode.apply(null, new Uint16Array(sdpUnCompressedBytes))\n    payload.notificationMessage.sessionParams.sdp = sdpString\n    log.debug(`Returning uncompressed SDP as part of payload: ${sdpString}`)\n    return payload\n  } else if (payload.notificationMessage.sessionParams.sdpFormat === 'url') {\n    const connection = yield select(getConnectionInfo)\n    const { pushRegistration } = yield select(getNotificationConfig)\n    log.debug(`Found SDP format: url. pushRegistration: ${pushRegistration}`)\n    // If a push registration endpoint was configured, use that instead of default.\n    if (pushRegistration) {\n      connection.server = defaults(connection.server, pushRegistration)\n      connection.protocol = defaults(connection.protocol, pushRegistration)\n      connection.port = defaults(connection.port, pushRegistration)\n      connection.version = defaults(connection.version, pushRegistration)\n    }\n    log.info('Fetching SDP...')\n    const response = yield call(requests.fetchSDP, connection, payload.notificationMessage.sessionParams.sdp)\n    payload.notificationMessage.sessionParams.sdp = response.eventDataResponse.sdp\n    return payload\n  } else {\n    log.debug(`Unknown sdpFormat received: ${payload.notificationMessage.sessionParams.sdpFormat}.`)\n    return payload\n  }\n}\n","// Libraries.\nimport { defaults } from 'lodash/fp'\nimport { call, select, takeEvery } from 'redux-saga/effects'\n// Other plugins.\nimport { getConnectionInfo } from '../../../auth/interface/selectors'\n// Logs\nimport { logManager } from '../../../logs'\nimport * as actionTypes from '../../interface/actionTypes'\nimport { getNotificationConfig } from '../../interface/selectors'\nimport * as requests from '../requests'\n\n// Get the logger\nconst log = logManager.getLogger('NOTIFICATIONS')\n\n/**\n * Register for apple push notification\n * @method applePushRegistrationEntry\n */\nexport function * applePushRegistrationEntry () {\n  yield takeEvery(actionTypes.REGISTER_APPLE_PUSH_NOTIFICATION, registerPushDeviceToken)\n}\n\n/**\n * Register for android push notification\n * @method androidPushRegistrationEntry\n */\nexport function * androidPushRegistrationEntry () {\n  yield takeEvery(actionTypes.REGISTER_ANDROID_PUSH_NOTIFICATION, registerPushDeviceToken)\n}\n\n/**\n * Saga for registering a device token for push notifications.\n * @method registerPushDeviceToken\n */\nfunction * registerPushDeviceToken (action) {\n  // Wait for a registration action.\n  const connection = yield select(getConnectionInfo)\n  const { pushRegistration } = yield select(getNotificationConfig)\n\n  // If a push registration endpoint was configured, use that instead of default.\n  if (pushRegistration) {\n    connection.server = defaults(connection.server, pushRegistration)\n    connection.protocol = defaults(connection.protocol, pushRegistration)\n    connection.port = defaults(connection.port, pushRegistration)\n    connection.version = defaults(connection.version, pushRegistration)\n  }\n\n  log.info('Registering device token for PUSH notifications...')\n  const response = yield call(requests.pushNotificationsRegistration, connection, {\n    ...action.payload\n  })\n\n  if (response.error) {\n    // Failed to create registration, reject the deferred result.\n    yield call([action.meta.deferred, 'reject'], {\n      error: response.text\n    })\n  } else {\n    // Successfully created registration, resolve the deferred result and respond with the registration.\n    yield call([action.meta.deferred, 'resolve'], response.registration)\n  }\n}\n\n/**\n * Unregister for apple push notification\n * @method applePushUnregisterEntry\n */\nexport function * applePushUnregisterEntry () {\n  yield takeEvery(actionTypes.UNREGISTER_APPLE_PUSH_NOTIFICATION, unregisterPushDeviceToken)\n}\n\n/**\n * Unregister for android push notification.\n * @method androidPushUnregisterEntry\n */\nexport function * androidPushUnregisterEntry () {\n  yield takeEvery(actionTypes.UNREGISTER_ANDROID_PUSH_NOTIFICATION, unregisterPushDeviceToken)\n}\n\n/**\n * Saga for deregistering a device token for push notifications.\n * @method deregisterPushDeviceToken\n */\nfunction * unregisterPushDeviceToken (action) {\n  const connection = yield select(getConnectionInfo)\n  const { pushRegistration } = yield select(getNotificationConfig)\n\n  // If a push registration endpoint was configured, use that instead of default.\n  if (pushRegistration) {\n    connection.server = defaults(connection.server, pushRegistration)\n    connection.protocol = defaults(connection.protocol, pushRegistration)\n    connection.port = defaults(connection.port, pushRegistration)\n    connection.version = defaults(connection.version, pushRegistration)\n  }\n\n  log.info('Un-registering device token for PUSH notifications...')\n  const response = yield call(requests.pushNotificationsDeRegistration, connection, {\n    registration: action.payload.registration\n  })\n  if (response.error) {\n    yield call([action.meta.deferred, 'reject'], {\n      error: response.text\n    })\n  } else {\n    yield call([action.meta.deferred, 'resolve'], undefined)\n  }\n}\n","/**\n * \"Authorization\" issues are REST errors caused by invalid user credentials.\n *    These are issues that should be solvable by an end-user updating/fixing\n *    the credentials that they have provided.\n */\nimport BasicError, { authCodes } from '../errors'\n\n/**\n * Function that checks a REST response action for Link authorization issues.\n * @param  {Object} response A REST response object.\n * @return {BasicError|undefined}\n */\nexport function linkAuthorization (response) {\n  if (!response.error) {\n    return\n  }\n\n  /*\n   * A SPiDR REST request will return\n   *  - '403 Forbidden', with body 'statusCode: 4' for bad password,\n   *  - '403 Forbidden', with html body (which is thrown away) for bad username.\n   *\n   * The SPiDR REST API document (v4.7, May 2019) says it will return '403 Forbidden'\n   *    with other statusCodes for numerous untestable scenarios. Some of these are\n   *    for credential/auth issues, others are for unrelated issues.\n   * Authorization related:\n   *    - 27 (generic auth failure), 61 (credentials issue), 65 (token expired)\n   * Unrelated:\n   *    - 29 (device not authorized), 35 (service not enabled), 37 (invalid value),\n   *      45 (invalid app_name), 46 (invalid CallMe token), 62 (account is disabled),\n   *      63 (account is locked), 64 (invalid CallMe realm)\n   */\n  // Status codes considered to be \"auth issues\".\n  const authIssues = [4, 27, 61, 65]\n\n  const statusCode = getStatusCode(response)\n\n  /*\n   * Define a Link authorization issue to be:\n   *  - a '403 Forbidden', with no body or with a specific statusCode.\n   */\n  if (response.result.code === 403 && (response.body === undefined || authIssues.includes(statusCode))) {\n    let message = 'Authorization failed with server. Please check credentials.'\n    if (statusCode) {\n      message += ` Status code: ${statusCode}`\n    }\n    return new BasicError({\n      code: authCodes.INVALID_CREDENTIALS,\n      message: message\n    })\n  }\n}\n\n/**\n * Function that checks a REST response action for UC authorization issues.\n *    UC includes both SPiDR and CIM REST requests.\n * @param  {Object} response A REST response object.\n * @return {BasicError|undefined}\n */\nexport function ucAuthorization (response) {\n  /*\n   * A CIM REST request will return\n   *    - '401 Login Please' (not 401 Unauthorized) with no body for credential issues.\n   *    - '401 Login Please', with body message \"expired token\" for token issues.\n   *\n   * SPiDR will return '401 Unauthorized' for non-auth issues though,\n   *    (statusCode 35 for \"service not enabled\").\n   */\n\n  /*\n   * Define a UC authorization issue to be:\n   *  - a '401 Login Please'.\n   */\n  const result = response.result\n  if (result.code === 401 && result.message === 'Login Please') {\n    let message = 'Authorization failed with server. Please check credentials.'\n\n    const statusCode = getStatusCode(response)\n    if (statusCode) {\n      message += ` Status code: ${statusCode}`\n    }\n\n    return new BasicError({\n      code: authCodes.INVALID_CREDENTIALS,\n      message\n    })\n  }\n}\n\n/**\n * Function that checks a REST response action for CPaaS authorization issues.\n * @param  {Object} response A REST response object.\n * @return {BasicError|undefined}\n */\nexport function cpaasAuthorization (response) {\n  /*\n   * A CPaaS REST request will return '401 Unauthorized' for authorization issues.\n   */\n  if (response.result.code === 401) {\n    return new BasicError({\n      code: authCodes.INVALID_CREDENTIALS,\n      message: 'Authorization failed with server. Please check credentials.'\n    })\n  }\n}\n\n/**\n * Helper function for parsing a statusCode from a SPiDR REST response body.\n * @param  {Object} response\n * @return {number|undefined}\n */\nfunction getStatusCode (response) {\n  let statusCode\n  /*\n   * Parse the statusCode out from the body.\n   */\n  if (response.body) {\n    if (response.body.statusCode) {\n      // In some cases (eg. KAA-1937), the statusCode is at the top-level of the body.\n      statusCode = response.body.statusCode\n    } else {\n      // In most cases, the statusCode is inside another object. The name of this\n      //    parameter is different depending which service the request was for,\n      //    so search for it.\n      Object.values(response.body).forEach(value => {\n        if (value.statusCode) {\n          statusCode = value.statusCode\n        }\n      })\n    }\n  }\n  return statusCode\n}\n","// Parse and/or Validate\nimport { validation as v8n, parse } from '../../src/common/validation'\n\n/**\n * Configurable properties 'published' by this \"Request\" plugin.\n *\n * @property {boolean} [injectAgentVersionHeader=true] Option to automatically inject an agent version header to every REST request.\n *            This header is used to help with diagnostics and analytics in a completely anonymous fashion.\n *            TODO: Set it to 'true' after server side whitelists that actual custom header.\n */\nexport const defaultOptions = {\n  injectAgentVersionHeader: true\n}\n\nconst v8nValidation = v8n.schema({\n  injectAgentVersionHeader: v8n.boolean()\n})\nexport const parseOptions = parse('request', v8nValidation)\n","// Requests plugin.\nimport { RESPONSE } from './interface/actionTypes'\nimport * as actions from './interface/actions'\nimport { getCommonOptions } from './utils'\n\n// Libraries.\nimport { mergeValues } from '../common/utils'\nimport { get } from 'lodash/fp'\nimport { put, take, call } from 'redux-saga/effects'\n\n/**\n * Creates an effect description that instructs the middleware to perform a request with the provided options.\n * This effect is blocking and will yield a RESPONSE action on completion.\n *\n * @param {Object} options See https://developer.mozilla.org/en-US/docs/Web/API/Request/Request\n * @param {string} options.url The url to perform the request on.\n * @param {string} options.method The HTTP method to use for the request.\n * @param {Object} options.headers Object literal of headers you want to add to the request.\n * @param {Object} [options.queryParams] The parameters to be added to the query string\n * @param {string} [options.responseType] The data type assumed to be received in the response body\n * @param {Blob|BufferSource|FormData|UrlSearchParams|string} [options.body] Any body that you want to add to your request.\n * @return A blocking redux-saga effect that will instruct the middleware to wait for the request to be fullfilled or until it fails.\n */\nexport default function request (options, commonOptions) {\n  return call(requestSaga, options, commonOptions)\n}\n\n/*\n * The saga backing the request effect.\n */\nexport function * requestSaga (options, manualOptions) {\n  /*\n   * Some requests can have special-cases where they don't want to use the\n   *    \"common\" options. Allow them to pass in \"manual\" options that should be\n   *    used instead.\n   * For example, the CPaaS \"upload file\" request cannot use the \"common\"\n   *    Content-Type header.\n   */\n  if (manualOptions) {\n    options = mergeValues(options, manualOptions)\n  } else {\n    // Get the common request options that should be used for all requests.\n    const commonOptions = yield call(getCommonOptions, options.url)\n\n    options = mergeValues(options, commonOptions)\n  }\n\n  // Dispatch the request action for the sagas to process.\n  const requestAction = yield put(actions.request(options))\n  const responseAction = yield take(\n    action => action.type === RESPONSE && get('meta.requestId', action) === requestAction.meta.requestId\n  )\n\n  return responseAction\n}\n","// Request plugin.\nimport { defaultOptions, parseOptions } from './configs'\nimport watchRequests from './sagas'\nimport eventsMap from './interface/events'\n\n// Other plugins.\nimport { update as updateConfig } from '../config/interface/actions'\nimport { mapEvents } from '../events/interface/actions'\n\n// Utils.\nimport { mergeValues } from '../common/utils'\n\n// Libraries.\nimport { put } from 'redux-saga/effects'\n\nconst pluginName = 'requests'\n\n/*\n * HTTP request plugin.\n */\nexport default pluginFactory()\n\n/*\n * Platform-specific request plugins.\n *    Same base REST behaviour as the generic request plugin, with some extra\n *    handling of a response.\n */\nexport const linkRequest = pluginFactory('link')\nexport const ucRequest = pluginFactory('uc')\nexport const cpaasRequest = pluginFactory('cpaas')\n\n/**\n * Factory function for creating a Request Plugin.\n *    Allows for specifying which platform the requests will be made to. This\n *    adds special handling of responses to check for special-case issues.\n * @param  {string} [platform] The platform this plugin is for.\n * @return {Function} The actual Plugin creator function.\n */\nfunction pluginFactory (platform) {\n  // Generate the saga for this platform, or a generic saga if platform is undefined.\n  const saga = watchRequests(platform)\n\n  return function request (options = {}) {\n    options = mergeValues(defaultOptions, options)\n    parseOptions(options)\n\n    function * init () {\n      yield put(updateConfig(options, pluginName))\n      yield put(mapEvents(eventsMap))\n    }\n\n    return {\n      sagas: [saga],\n      name: pluginName,\n      init,\n      capabilities: platform ? ['restAuthorization'] : []\n    }\n  }\n}\n","const PREFIX = '@@KANDY/'\n\nexport const REQUEST = PREFIX + 'REQUEST'\nexport const RESPONSE = PREFIX + 'RESPONSE'\n\nexport const AUTHORIZATION_ERROR = PREFIX + 'AUTHORIZATION_ERROR'\n","import * as actionTypes from './actionTypes'\n\nvar nextRequestId = 0\nfunction generateRequestId () {\n  return nextRequestId++\n}\n\n/**\n * Creates a request action.\n * @param {Object} options\n * @param {string} options.url The url for the request\n * @param {Object} [options.queryParams] Query parameters to be added to the url string\n * @param {string} [options.responseType] The data type assumed to be received in the response body\n * @param {Blob|BufferSource|FormData|UrlSearchParams|string} [options.body] The request body\n */\nexport function request (options) {\n  return {\n    type: actionTypes.REQUEST,\n    payload: options,\n    meta: {\n      requestId: generateRequestId()\n    }\n  }\n}\n\n/**\n * Creates a response action.\n */\nexport function response (requestId, result, error = false) {\n  return {\n    type: actionTypes.RESPONSE,\n    payload: result,\n    error,\n    meta: {\n      requestId: requestId\n    }\n  }\n}\n\n/**\n * Action to signify a REST request has encountered an authorization error.\n * @param  {BasicError} error\n * @return {Action}\n */\nexport function authorizationError (error) {\n  return {\n    error: true,\n    type: actionTypes.AUTHORIZATION_ERROR,\n    payload: error\n  }\n}\n","/**\n * An error occurred with server authorization.\n *\n * This event will be emitted anytime a REST request to the server is rejected\n *    due to an authorization issue. This may occur for invalid credentials or\n *    expired tokens, depending on which form of authentication the application\n *    has chosen to use.\n * @public\n * @memberof api\n * @requires restAuthorization\n * @event request:error\n * @param {Object} params\n * @param {api.BasicError} params.error The Basic error object.\n */\nexport const REQUEST_ERROR = 'request:error'\n","import * as eventTypes from './eventTypes'\nimport * as actionTypes from './actionTypes'\n\nconst eventsMap = {}\n\neventsMap[actionTypes.AUTHORIZATION_ERROR] = function (action) {\n  return {\n    type: eventTypes.REQUEST_ERROR,\n    args: {\n      error: action.payload\n    }\n  }\n}\n\nexport default eventsMap\n","/**\n * Retrieves the flag which specifies wether or not this SDK should use a custom header as part of any requests being sent to server.\n * This custom header refers to the current agent version.\n * @param {Object} state  The current Redux state object.\n * @return {boolean} True if custom header should be used, false otherwise.\n */\nexport function injectAgentVersionHeader (state) {\n  return state.config.requests.injectAgentVersionHeader\n}\n","// Other plugins.\nimport { logManager } from '../logs'\n\n// Utils.\nimport { toQueryString } from '../common/utils'\n\n/**\n * The possible response data types that can be handled.\n */\nconst responseTypes = Object.freeze({\n  json: 'json',\n  blob: 'blob',\n  text: 'text',\n  none: 'none'\n})\n\n/**\n * The possible Content-Type headers that we may receive in a response.\n */\nconst contentTypes = Object.freeze({\n  jsonType: 'application/json',\n  vdnJsonType: 'application/vdn.kandy.json',\n  plainTextType: 'text/plain',\n  xmlTextType: 'text/xml',\n  octetStream: 'application/octet-stream'\n})\n\n/**\n * Make a request with the specified options. The options is very similar to the options passed to the GlobalFetch\n * method except that is also accepts the url as part of the options.\n * Reference: https://developer.mozilla.org/en-US/docs/Web/API/Request\n *\n * Currently this processes the request and assumes nothing about the response.\n * - If the response has a body, it will always be parsed and forwarded on.\n *      - If no body, then use an empty object in its place.\n * - If the fetch succeeded, the response \"results\" will always be forwarded on,\n *      even if the response is outside of the 200-299 range.\n *      - Because some backends provide more detailed error info (that a saga\n *        may need) as part of the body, rather than just the response status.\n * - If the fetch fails, return with the fetch failure information.\n *\n * @param {Object} options Options to make the request with.\n * @param {string} options.url The URL to make the request to.\n * @param {Object} [options.queryParams] The parameters to be added to the query string\n * @param {string} [options.responseType='json] The expected data type of the response body.\n * @param {Blob|BufferSource|FormData|UrlSearchParams|string} [options.body] The request body\n * @return {Promise} A promise that resolves with a custom response object.\n */\nexport default async function makeRequest (options, requestId) {\n  const log = logManager.getLogger('REQUEST', requestId)\n\n  /*\n   * Check the provided options to ensure they are valid before making the request.\n   */\n  const error = validateOptions(options)\n  if (error) {\n    log.info(error.result.message)\n    return error\n  }\n\n  // Extract and remove the non-fetch API properties.\n  const { url, queryParams, responseType = 'json', ...fetchOptions } = options\n\n  // Grab that last part of the URL (after the last /) to be logged.\n  let endUrl = url.match(/([^/]*)$/)[0]\n  // Cut it short if it's too long, since this should be human-readable.\n  endUrl = endUrl.length > 15 ? endUrl.substring(0, 15) + '...' : endUrl\n  log.info(`Making ${fetchOptions.method} ${endUrl} request.`)\n\n  let response\n  /*\n   * Make the request. Scenarios to check for:\n   *  1. Fetch failed.\n   *  2. Fetch succeeded and is ok, with no response body.\n   *  3. Fetch succeeded and is ok, with expected response type.\n   *  4. Fetch succeeded and is ok, with unexpected response type.\n   *  5. Fetch succeeded but is not ok.\n   */\n  try {\n    response = await fetch(url + toQueryString(queryParams), fetchOptions)\n  } catch (err) {\n    // Scenario 1: Fetch failed.\n    log.info(`Failed to make request, caused by ${err.message}`)\n    return makeResponse({ error: 'FETCH' }, { code: err.name, message: err.message })\n  }\n\n  // Basic information for the request result.\n  const result = {\n    ok: response.ok,\n    code: response.status,\n    message: response.statusText\n  }\n\n  if (response.ok) {\n    if (response.status === 204) {\n      /*\n       * A `204 (No Content)` response indicates a success, but with no content to return.\n       * Avoid parsing the response because there isn't one.\n       */\n      // Scenario 2: Response is ok, with no response body.\n      log.info(`Finished request with successful response (status ${response.status}).`)\n      return makeResponse(undefined, { body: {}, ...result })\n    }\n\n    const data = await parseBody(response, responseType)\n    if (data instanceof Error) {\n      // Scenario 4: Response is ok, with an unexpected type.\n      log.error(`Failed to parse with response type: ${responseType}. Error: ${data}`)\n      return makeResponse({ error: 'REQUEST' }, { code: data.name, message: data.message })\n    } else {\n      // Scenario 3: Response is ok, with an expected type.\n      log.info(`Finished request with successful response (status ${response.status}).`)\n      return makeResponse(undefined, { body: data, ...result })\n    }\n  } else {\n    // Scenario 5: Response is not ok.\n    let contentType\n    // Check the Content-Type of the response.\n    try {\n      contentType = await response.headers.get('content-type')\n    } catch (err) {\n      log.debug(`Failed to get content-type:${err.message}.`)\n    }\n    /*\n     * Handle a SPiDR special-case error where the response body is a HTML page...\n     * Throw away the body and simply report it as 'Forbidden'.\n     */\n    if (response.status === 403 && contentType.includes('html')) {\n      return makeResponse({ error: 'REQUEST' }, result)\n    }\n\n    /*\n     * Check whether the response body is json. If it is, parse it and include\n     *    it in the returned error. Otherwise provide an empty object instead.\n     */\n    const isJson = contentType && contentType.includes(contentTypes.jsonType)\n    const responseBody = isJson ? await response.json() : {}\n    return makeResponse({ error: 'REQUEST' }, { body: responseBody, ...result })\n  }\n}\n\n/**\n * Checks for the provided options to be considered valid before making the\n *    request. If an option is invalid, an error response will be returned.\n * @param  {Object} options\n * @return {Response|undefined}\n */\nfunction validateOptions (options) {\n  const { url, responseType } = options\n\n  if (!url || typeof url !== 'string') {\n    const invalidUrlMessage = `Invalid request url; expected url of type string but received ${url} instead`\n    return makeResponse({ error: 'REQUEST_URL', message: invalidUrlMessage })\n  }\n\n  /*\n   * If an expected responseType was provided, it should be one of the types\n   *    that we know how to handle.\n   */\n  if (responseType && !responseTypes.hasOwnProperty(responseType)) {\n    const invalidResponseType = 'Cannot make request; responseType value was invalid.'\n    return makeResponse({ error: 'RESPONSE_TYPE', message: invalidResponseType })\n  }\n}\n\n/**\n * Get the body from the response depending on our expected content-type.\n * @return {Body|Error}\n */\nasync function parseBody (response, expectedType) {\n  /**\n   * The SDK should only be parsing the responses as is expected without checking the content type of the response.\n   * This is deterministic depending on the `responseType` passed in to the request through the request options.\n   */\n  let responseBody = {}\n  try {\n    switch (expectedType) {\n      case responseTypes.json:\n        responseBody = await response.json()\n        break\n      case responseTypes.blob:\n        responseBody = await response.blob()\n        break\n      case responseTypes.text:\n        responseBody = await response.text()\n        break\n      case responseTypes.none:\n        // Do not parse the response\n        break\n      default:\n        // This should be unreachable code.\n        throw Error('Assertion failed')\n    }\n  } catch (e) {\n    // Note: We get here if we have a successful request but the server sent us unexpected data.\n    // We need to treat this as an error case because we can no longer enforce a contract with the\n    // code making the request.\n    //\n    // If the code gets here the issue is either with the server not sending us expected data, or with\n    // the calling code that told us to expect the wrong data.\n\n    return e\n  }\n\n  return responseBody\n}\n\n/**\n * Make a response object that will  have the same structure every time\n * regardless of the server response.\n *\n * @param {Object} apiResponse API related response data\n * @param {string} apiResponse.error This should be a string indicating an error if the request fails due to an invalid request.\n * @param {string} apiResponse.message This should be a string with more details about the api error.\n * @param {Object} httpResponse This will contain the response data from the server.\n * @param {Object} httpResponse.body The response body data from the server.\n * @param {boolean} httpResponse.ok Indicates if the request was considered a success by the server.\n * @param {Object} httpResponse.code The HTTP status code for the request.\n * @param {Object} httpResponse.message A message describing the server response.\n * @return {Object} An object containing API and/or server response details.\n */\nfunction makeResponse (apiResponse = {}, httpResponse = {}) {\n  return {\n    body: httpResponse.body,\n    error: apiResponse.error,\n    result: {\n      ok: Boolean(httpResponse.ok),\n      code: httpResponse.code,\n      message: apiResponse.message || httpResponse.message\n    }\n  }\n}\n","// Request plugin.\nimport * as actionTypes from './interface/actionTypes'\nimport * as actions from './interface/actions'\nimport makeRequest from './makeRequest'\nimport * as authorizations from './authorization'\n\n// Other plugins.\nimport { logManager } from '../logs'\n\n// Helpers.\nimport { getVersion } from '../common/version'\n\n// Libraries.\nimport { call, put, takeEvery } from 'redux-saga/effects'\nimport { cloneDeep } from 'lodash/fp'\n\n/*\n * Saga-factory for creating the `watchRequests` saga.\n *    If `platform` is undefined, then no extra, platform-specific handling is done.\n */\nexport default function watchRequests (platform) {\n  // Only allow our known platforms or undefined (for base).\n  if (!['link', 'uc', 'cpaas', undefined].includes(platform)) {\n    throw Error('Invalid platform specific for requests.')\n  }\n  return function * watchRequests () {\n    yield takeEvery(actionTypes.REQUEST, handleRequest, platform)\n  }\n}\n\n/*\n * Generator that handles a request action with standard HTTP handling features and reports\n * a requestFinished action when the request is done.\n *\n * @param {string} [platform] The platform being used.\n * @param {FluxStandardAction} action The action to handle.\n */\nfunction * handleRequest (platform, action) {\n  const log = logManager.getLogger('REQUEST', action.meta.requestId)\n\n  const logOptions = cloneDeep(action.payload)\n  // When logging the Auth header, cut it off so that we can see the type of\n  //    token but not the token itself. Depending on the type, it can contain\n  //    a password.\n  const authHeader = logOptions.headers.Authorization\n  if (authHeader) {\n    logOptions.headers.Authorization = authHeader.substring(0, 6) + '...'\n  }\n  log.debug(`Making REST request ${action.meta.requestId}.`, logOptions)\n\n  // Make the request based on the action\n  var result = yield call(makeRequest, action.payload, action.meta.requestId)\n\n  log.debug(`Received REST response ${action.meta.requestId}.`, result)\n\n  // If the platform was specified and this is not a 3.X build, perform the\n  //    authorization check side-effect.\n  if (platform && !getVersion().startsWith('3')) {\n    // Call the 'authorization' function specific for this platform.\n    //    They're all named ${platform}Authorization so it's easier to call them.\n    const error = authorizations[`${platform}Authorization`](result)\n\n    if (error) {\n      yield put(actions.authorizationError(error))\n    }\n  }\n\n  yield put(actions.response(action.meta.requestId, result, !!result.error))\n}\n\n// begin-test-code\nexport const __testonly__ = { watchRequests, handleRequest }\n// end-test-code\n","// Request plugin.\nimport { injectAgentVersionHeader } from '../interface/selectors'\n\n// Other plugins.\nimport { getPlatform, getRequestInfo } from '../../auth/interface/selectors'\n\n// Utils.\nimport { getVersion } from '../../common/version'\nimport { platforms } from '../../constants'\n\n// Libraries.\nimport { select } from 'redux-saga/effects'\n\n/**\n * Helper function to compile the common headers/options for a REST request.\n * @method getCommonOptions\n * @param  {string} url The URL to be used for the request.\n * @return {Object}\n */\nexport function * getCommonOptions (url) {\n  const platform = yield select(getPlatform)\n  const requestInfo = yield select(getRequestInfo, platform)\n  const useCustomHeader = yield select(injectAgentVersionHeader)\n\n  // Start off with whatever options were set by the Auth plugin.\n  //    The authentication headers / token will be there if they are set.\n  let options\n  if (platform === 'cpaas') {\n    // For some reason, CPaaS has this property as `options` where the other\n    //    SDKs have it as `requestOptions`. Workaround that here.\n    options = requestInfo.options || {}\n  } else {\n    options = requestInfo.requestOptions || {}\n  }\n\n  // Ensure there is a headers object.\n  options.headers = options.headers || {}\n\n  // Add the common headers.\n  options.headers['Content-Type'] = 'application/json'\n  options.headers.Accept = 'application/json'\n\n  // If enabled, add the 'Agent Version' header to the options.\n  if (useCustomHeader) {\n    options.headers['X-Cpaas-Agent'] = getCpaasAgentHeaderValue(platform, url)\n  }\n\n  return options\n}\n\n/**\n * Determine and return the current SDK platform and version string to be used\n * with the x-Cpaas-Agent network request header field.\n * @method getCpaasAgentHeaderValue\n * @param  {string}  platform Which platform is currently being used.\n * @param  {string}  url The url for the request being made.\n * @return {string}  A string representation of the platform and version the SDK is using.\n */\nexport function getCpaasAgentHeaderValue (platform, url) {\n  // Assume request is for CPaaS platform, by default.\n  let headerValue = `cpaas-js-sdk/${getVersion()}`\n\n  // Check if request is for callMe service, otherwise determine the apropriate platform.\n  // (callMe service uses Link platform for call requests)\n  if (url && url.includes('/anonymous/')) {\n    headerValue = `callme-js-sdk/${getVersion()}`\n  } else {\n    // Check the actual platform used\n    if (platform === platforms.UC) {\n      headerValue = `uc-js-sdk/${getVersion()}`\n    } else if (platform === platforms.LINK) {\n      headerValue = `link-js-sdk/${getVersion()}`\n    }\n  }\n  return headerValue\n}\n","const prefix = '@@KANDY/SUBSCRIPTION/'\n\nexport const SUBSCRIBE = prefix + 'SUBSCRIBE'\nexport const SUBSCRIBE_FINISHED = prefix + 'SUBSCRIBE_FINISHED'\n\nexport const UNSUBSCRIBE = prefix + 'UNSUBSCRIBE'\nexport const UNSUBSCRIBE_FINISHED = prefix + 'UNSUBSCRIBE_FINISHED'\n\nexport const RESUBSCRIPTION_FINISHED = prefix + 'RESUBSCRIPTION_FINISHED'\n\nexport const REGISTER_SUB_SERVICE = prefix + 'REGISTER_SUB_SERVICE'\nexport const PLUGIN_SUBSCRIPTION = prefix + 'PLUGIN_SUBSCRIPTION'\nexport const PLUGIN_SUBSCRIPTION_FINISHED = prefix + 'PLUGIN_SUBSCRIPTION_FINISHED'\nexport const PLUGIN_UNSUBSCRIPTION = prefix + 'PLUGIN_UNSUBSCRIPTION'\nexport const PLUGIN_UNSUBSCRIPTION_FINISHED = prefix + 'PLUGIN_UNSUBSCRIPTION_FINISHED'\n\nexport const CHANNEL_OPENED = prefix + 'CHANNEL_OPENED'\nexport const CHANNEL_CLOSED = prefix + 'CHANNEL_CLOSED'\n","import { cloneDeep } from 'lodash/fp'\n\n// Auth selectors for backwards compatability.\nimport { getSubscriptionInfo as getAuthSubscriptionInfo } from '../../auth/interface/selectors'\n\n// Utilities.\nimport { mergeValues } from '../../common/utils'\n\n/**\n * Plugin selector function to expose state globally\n * @param  {Object} pluginState The localized (plugin) state\n * @return {Object}             The exposed state\n */\nexport function getExposedState (pluginState) {\n  return cloneDeep(pluginState)\n}\n\n/**\n * Retrieves the config options provided by the subscription plugin.\n * NOTE: This is only used by CPaaS currently and won't work with\n * the old auth/subscription config on link.  It will work with the new\n * auth/subscription config on link.\n * @method getSubscriptionConfig\n * @return {Object}\n */\nexport function getSubscriptionConfig (state) {\n  return cloneDeep(state.config.subscription)\n}\n\n/**\n * Retrieves the list of services that plugins have registered for.\n * @method getRegisteredServices\n * @return {Array}\n */\nexport function getRegisteredServices (state) {\n  return cloneDeep(state.subscription.registeredServices)\n}\n\n/**\n * Retrieves the open notifications channels' info and their active subscriptions.\n * @method getNotificationChannels\n * @return {Object}\n */\n// TODO: Rename this selector. It gets more than notification channels.\nexport function getNotificationChannels (state) {\n  return cloneDeep({\n    notificationChannels: state.subscription.notificationChannels,\n    subscriptions: state.subscription.subscriptions\n  })\n}\n\n/**\n * Retrieve the list of services with current subscriptions.\n * @method getSubscribedServices\n * @param {string} type the type of subscription we want to get specifically\n * @return {Array}\n */\nexport function getSubscribedServices (state, type) {\n  const info = getSubscriptionInfo(state)\n  // For backwards compability, make sure that this is an array. It isn't when\n  //    the old Auth plugin is being used (eg. Link v3.X).\n  let subscriptions = Array.isArray(info) ? info : [info]\n\n  // If a type was specified, filter out subscriptions of other types.\n  if (type) {\n    subscriptions = subscriptions.filter(subscription => subscription.channelType === type)\n  }\n\n  // Massage the subscriptions to be a list of service names.\n\n  // For Link, subscription.service is an array of strings (all services).\n  // For CPaaS, subscription.service is a string (single service).\n  // Process the subscriptions in a way that will provide an array of strings in\n  //    both cases.\n  return subscriptions.reduce((acc, currentSub) => {\n    return acc.concat(currentSub.service)\n  }, [])\n}\n\n/**\n * Retrieves the subscription information.\n * @method getSubscriptionInfo\n * @return {Object}\n */\nexport function getSubscriptionInfo (state) {\n  if (state.subscription) {\n    return cloneDeep(state.subscription.subscriptions)\n  } else {\n    // For backwards compatability, also check if the authentication substate\n    //    has subscription info. It will have the info when the oldAuth plugin\n    //    is being used (eg. Link v3.X).\n    // Warning: This returns an object, unlike the above which returns an array.\n    return cloneDeep(getAuthSubscriptionInfo(state))\n  }\n}\n\n/**\n * Retrieve the list of subscriptions matching a given channel type and service name.\n * @method getSubscriptions\n * @param {string} service the name of the service we want to get specifically (e.g. smsinbound)\n * @param {string} type the type of communication channel we want to get specifically (e.g. websocket)\n * @return {Array}\n */\nexport function getSubscriptions (state, service, type) {\n  let subscriptions = state.subscription.subscriptions\n  subscriptions = subscriptions.filter(\n    subscription => subscription.service === service && subscription.channelType === type\n  )\n  return cloneDeep(subscriptions)\n}\n\n/**\n * Retrieve the subscription expiry time from config.\n * @method getSubscriptionExpiry\n * @return {number}\n */\nexport function getSubscriptionExpiry (state) {\n  const subConfig = state.config.subscription\n  const authConfig = state.config.authentication\n\n  // In order to maintain backwards compability with the auth plugin config\n  // we need to first check if this setting is provided in the authentication plugin\n  // config, and if not use the one from subscription plugin.  We need to check\n  // authentication config first because if no value is provided in the subscription\n  // plugin, a default value will be used and we don't want that if one is provided in\n  // the authentication plugin.\n  const expires =\n    authConfig.subscription && authConfig.subscription.expires ? authConfig.subscription.expires : subConfig.expires\n\n  return expires\n}\n\n/**\n * Retrieve the websocket info from config. We merge the websocket config\n * from auth plugin with the one from subscription plugin giving precidence to\n * the websocket config in auth plugin since we need to maintain backwards compability\n * with the old format config.\n * @method getSubscriptionExpiry\n * @return {number}\n */\nexport function getWebsocketConfig (state) {\n  const subConfig = state.config.subscription\n  const authConfig = state.config.authentication\n\n  // In order to support legacy configurations, we need to do the following:\n  // Take the values (including defaults) from subscription config.  Merge into\n  // that any client provided values from the authentication config.  All keys existing\n  // in authentication config will overwrite those from subscription config.  However,\n  // since defaults are not set for websocket in the authentication plugin, only client\n  // provided values for websocket will be used from authentication config and defualts\n  // will come from the subscription plugin.\n  return mergeValues(subConfig.websocket, authConfig.websocket)\n}\n","// Webrtc plugin.\nimport { deviceActions } from '../interface/actions'\nimport { forwardAction } from '../../common/utils'\n\n// Libraries.\nimport { takeEvery } from 'redux-saga/effects'\nimport { eventChannel } from 'redux-saga'\n\n/**\n * Listen for events emitted from the webRTC Device Manager.\n * @method watchDeviceEvents\n * @param  {Object} manager The webRTC Device Manager.\n */\nexport default function * watchDeviceEvents (manager) {\n  /**\n   * Create an event channel between the Device Manager and redux-saga.\n   * This pushes its events into the redux-saga context.\n   * */\n  const managerChannel = eventChannel(emit => {\n    return setListeners(manager, emit)\n  })\n\n  // managerChannel will emit the Manager's events as actions,\n  //  so they can be directly dispatched.\n  yield takeEvery(managerChannel, forwardAction)\n}\n\n/**\n * Function to set-up listeners for the Device Manager events.\n * Contains the logic for how a webRTC event should be parsed\n *    before being sent elsewhere. Split into a stand-alone\n *    function in order to be re-usable.\n * @method setListeners\n * @param  {Object}   manager The Device Manager.\n * @param  {Function} emit    Function that receives the parsed events.\n * @param  {Any}      [END='END'] The \"end of lifetime\" symbol.\n * @return {Function} The unsubscribe function.\n */\nexport function setListeners (manager, emit, END = 'END') {\n  // Manager event handlers.\n  const change = () => {\n    // Get the latest devices after they changed, then emit the device list\n    //  upwards.\n    manager.checkDevices().then(devices => {\n      emit(deviceActions.devicesChanged(devices))\n    })\n  }\n\n  manager.on('change', change)\n\n  // Return an unsubscribe function that removes all event listeners.\n  const unsubscribe = () => {\n    manager.off('change', change)\n  }\n\n  return unsubscribe\n}\n","// Libaries.\nimport { fork } from 'redux-saga/effects'\n\n// Manager channels.\nimport watchDeviceEvents from './devices'\nimport watchTrackManagerEvents from './trackManager'\nimport watchSessionManagerEvents from './sessionManager'\nimport watchMediaManagerEvents from './mediaManager'\n\n// Re-export each channel.\nexport { default as watchDeviceEvents } from './devices'\nexport { default as watchTrackManagerEvents } from './trackManager'\nexport { default as watchMediaManagerEvents } from './mediaManager'\n\n/**\n * Combine all of the manager channels into a single function.\n * @method watchManagers\n * @param  {Object} managers Webrtc stack managers.\n */\nexport default function * watchManagers (managers, webRTC) {\n  yield fork(watchDeviceEvents, managers.devices)\n  yield fork(watchTrackManagerEvents, managers.track)\n  yield fork(watchSessionManagerEvents, managers.sessionManager, webRTC)\n  yield fork(watchMediaManagerEvents, managers.media)\n}\n","// Webrtc plugin.\nimport { mediaActions } from '../interface/actions'\nimport { forwardAction } from '../../common/utils'\n\n// Libraries.\nimport { takeEvery } from 'redux-saga/effects'\nimport { eventChannel, END } from 'redux-saga'\n\n/**\n * Sets up event listeners for a Media's events.\n * The events are turned into actions and dispatched\n *    to be handled by redux elsewhere.\n * @method watchMediaEvents\n * @param  {Object} media A Media object.\n * @param  {Object} webRTC The webRTC stack.\n */\nexport default function * watchMediaEvents (media, webRTC) {\n  /**\n   * Create an event channel between the Media and redux-saga.\n   * This \"forces\" the Media events into a redux-saga context.\n   */\n  const mediaChannel = eventChannel(emit => {\n    return setListeners(media, emit, END)\n  })\n  yield takeEvery(mediaChannel, forwardAction)\n}\n\n/**\n * Function to set-up listeners for a Media object's events.\n * Contains the logic for how a webRTC event should be parsed\n *    before being sent elsewhere. Split into a stand-alone\n *    function in order to be re-usable.\n * @method setListeners\n * @param  {Object}   media A Media object.\n * @param  {Function} emit  Function that receives the parsed events.\n * @param  {Any}      [END='END'] The \"end of lifetime\" symbol.\n * @return {Function} The unsubscribe function.\n */\nexport function setListeners (media, emit, END = 'END') {\n  // Media received a new track.\n  const newTrack = ({ mediaId, trackId }) => {\n    /**\n     * When a new track has been added,\n     * update redux state's webrtc.media.tracks array with the new trackId.\n     */\n    emit(mediaActions.mediaNewTrack(mediaId, { trackId }))\n  }\n\n  // TODO: Handle media's 'track:removed' event here.\n  //  In unified-plan, when a track is removed this event is triggered.\n  const trackRemoved = trackId => {\n    emit(mediaActions.mediaTrackRemoved(media.id, { trackId }))\n  }\n\n  const trackEnded = ({ mediaId, trackId }) => {\n    /**\n     * When a track has ended,\n     * update redux state's webrtc.media.tracks array\n     * by removing the specified trackId.\n     */\n    emit(mediaActions.mediaTrackEnded(mediaId, { trackId }))\n  }\n  const mediaStopped = id => {\n    /**\n     * When the media is stopped, its channel should be ended (via `END`).\n     * The mediaManager channel will handle updating state for this event.\n     */\n    emit(END)\n  }\n\n  media.on('track:new', newTrack)\n  media.on('track:removed', trackRemoved)\n  media.on('track:ended', trackEnded)\n  media.on('media:stopped', mediaStopped)\n\n  const unsubscribe = () => {\n    media.off('track:new', newTrack)\n    media.off('track:removed', trackRemoved)\n    media.off('track:ended', trackEnded)\n    media.off('media:stopped', mediaStopped)\n  }\n  return unsubscribe\n}\n","// Webrtc plugin.\nimport { mediaActions } from '../interface/actions'\nimport * as actionTypes from '../interface/actionTypes'\nimport watchMediaEvents from './media'\n\n// Libraries.\nimport { put, takeEvery, fork } from 'redux-saga/effects'\nimport { eventChannel } from 'redux-saga'\n\n/**\n * Sets up event listeners for Media Manager events. The events are turned into\n *    actions and dispatched to be handled by redux elsewhere.\n * @method watchMediaManagerEvents\n * @param  {Object} manager The Media Manager.\n */\nexport default function * watchMediaManagerEvents (manager) {\n  /**\n   * Create an event channel between the Media Manager and redux-saga.\n   * This pushes its events into the redux-saga context.\n   */\n  const managerChannel = eventChannel(emit => {\n    return setListeners(manager, emit)\n  })\n\n  yield takeEvery(managerChannel, mediaManagerEventsHandler)\n}\n\nfunction * mediaManagerEventsHandler ({ media, action }) {\n  // If it is a new Media, watch for its events.\n  if (action.type === actionTypes.MEDIA_NEW) {\n    yield fork(watchMediaEvents, media)\n  }\n\n  // Dispatch the action\n  yield put(action)\n}\n\n/**\n * Function to set-up listeners for the Media Manager events.\n * Contains the logic for how a webRTC event should be parsed\n *    before being sent elsewhere. Split into a stand-alone\n *    function in order to be re-usable.\n * @method setListeners\n * @param  {Object}   manager The Media Manager.\n * @param  {Function} emit    Function that receives the parsed events.\n * @param  {Any}      [END='END'] The \"end of lifetime\" symbol.\n * @return {Function} The unsubscribe function.\n */\nexport function setListeners (manager, emit, END = 'END') {\n  const newMedia = id => {\n    const media = manager.get(id)\n    /**\n     * When a new media has been added,\n     * update redux state's webrtc.media array by adding in the new media object\n     * (List of tracks will just be a list of track ids).\n     */\n    emit({\n      media,\n      action: mediaActions.newMedia(id, {\n        local: media.getState().isLocal,\n        tracks: media.getTracks().map(track => track.id)\n      })\n    })\n  }\n\n  const removedMedia = id => {\n    /**\n     * When a media has been removed,\n     * update redux state's webrtc.media array\n     * by removing the media with the specified media id.\n     */\n    emit({\n      action: mediaActions.removedMedia(id)\n    })\n  }\n\n  manager.on('media:new', newMedia)\n  manager.on('media:removed', removedMedia)\n\n  const unsubscribe = () => {\n    manager.off('media:new', newMedia)\n    manager.off('media:removed', removedMedia)\n  }\n  return unsubscribe\n}\n","// Webrtc plugin.\nimport { sessionActions } from '../interface/actions'\nimport { forwardAction } from '../../common/utils'\n\n// Libraries.\nimport { takeEvery } from 'redux-saga/effects'\nimport { eventChannel } from 'redux-saga'\n\n/**\n * Sets up event listeners for a Session's events.\n * The events are turned into actions and dispatched\n *    to be handled by redux elsewhere.\n * @method watchSessionEvents\n * @param  {Object} session The Session object.\n * @param  {Object} webRTC The webRTC stack.\n */\nexport default function * watchSessionEvents (session, webRTC) {\n  /**\n   * Create an event channel between the Session and redux-saga.\n   * This \"forces\" the Session events into a redux-saga context.\n   */\n  const sessionChannel = eventChannel(emit => {\n    return setListeners(session, emit)\n  })\n  // sessionChannel will emit the Session's events as actions, so dispatch\n  //    them to be handled by sagas.\n  // TODO: If the event is \"Session gone\", should close/unsubscribe the channel.\n  yield takeEvery(sessionChannel, forwardAction)\n}\n\n/**\n * Function to set-up listeners for a Session object's events.\n * Contains the logic for how a webRTC event should be parsed\n *    before being sent elsewhere. Split into a stand-alone\n *    function in order to be re-usable.\n * @method setListeners\n * @param  {Object}   session A Session object.\n * @param  {Function} emit  Function that receives the parsed events.\n * @param  {Any}      [END='END'] The \"end of lifetime\" symbol.\n * @return {Function} The unsubscribe function.\n */\nexport function setListeners (session, emit, END = 'END') {\n  // Session received a new track.\n  const newTrack = ({ local, trackId }) => {\n    /**\n     * When a new track has been added,\n     * update redux state's webrtc.session.localTracks/remoteTracks array\n     * with the new trackId.\n     * ('local' boolean will determine whether to update localTracks or remoteTracks)\n     */\n    emit(\n      sessionActions.sessionNewTrack(session.id, {\n        local,\n        trackId\n      })\n    )\n  }\n\n  const trackRemoved = ({ local, trackId }) => {\n    emit(\n      sessionActions.sessionTrackRemoved(session.id, {\n        local,\n        trackId\n      })\n    )\n  }\n\n  const trackEnded = ({ local, trackId, performRenegotiation }) => {\n    /**\n     * When a track has ended,\n     * update redux state's webrtc.session.localTracks/remoteTracks array\n     * by removing the specified trackId.\n     * ('local' boolean will determine whether to update localTracks or remoteTracks)\n     */\n    emit(\n      sessionActions.sessionTrackEnded(session.id, {\n        local,\n        trackId,\n        performRenegotiation\n      })\n    )\n  }\n\n  const trackReplaced = ({ oldTrackId, trackId }) => {\n    emit(\n      sessionActions.sessionTrackReplaced(session.id, {\n        oldTrackId,\n        trackId\n      })\n    )\n  }\n\n  // Generic \"something changed\" handler.\n  // TODO: Either use this for other events or remove it.\n  // eslint-disable-next-line no-unused-vars\n  const onChange = () => {\n    const state = session.getState()\n\n    emit(\n      sessionActions.sessionChange(session.id, {\n        id: state.id,\n        localTracks: state.localTracks.map(track => track.id),\n        remoteTracks: state.remoteTracks.map(track => track.id)\n      })\n    )\n  }\n\n  session.on('new:track', newTrack)\n  session.on('track:removed', trackRemoved)\n  session.on('track:ended', trackEnded)\n  session.on('track:replaced', trackReplaced)\n\n  const unsubscribe = () => {\n    session.off('new:track', newTrack)\n    session.off('track:removed', trackRemoved)\n    session.off('track:ended', trackEnded)\n    session.off('track:replaced', trackReplaced)\n  }\n  return unsubscribe\n}\n","// Webrtc plugin.\nimport { sessionActions } from '../interface/actions'\nimport * as actionTypes from '../interface/actionTypes'\nimport watchSessionEvents from './session'\n\n// Libraries.\nimport { fork, put, take } from 'redux-saga/effects'\nimport { eventChannel } from 'redux-saga'\n\n/**\n * Sets up event listeners for Session Manager Events.\n * The events are turned into actions and dispatched\n *    to be handled by redux elsewhere.\n * @method watchSessionManagerEvents\n * @param  {Object} manager The webRTC Session Manager.\n * @param  {Object} webRTC The webRTC stack.\n */\nexport default function * watchSessionManagerEvents (manager, webRTC) {\n  /**\n   * Create an event channel between the Session Manager and redux-saga.\n   * This pushes its events into the redux-saga context.\n   */\n  const managerChannel = eventChannel(emit => {\n    return setListeners(manager, emit)\n  })\n\n  while (true) {\n    const { session, action } = yield take(managerChannel)\n\n    // If it is a new Session, watch for its events.\n    if (action.type === actionTypes.SESSION_ADDED) {\n      yield fork(watchSessionEvents, session, webRTC)\n    }\n\n    // Dispatch the action directly.\n    yield put(action)\n  }\n}\n\n/**\n * Sets up listeners for the Session Manager events.\n * Contains logic for how specific webRTC events should be\n *    parsed before being sent elsewhere. Split into a\n *    stand-alone function in order to be re-usable.\n * @method setListeners\n * @param  {Object}   manager The Session Manager.\n * @param  {Function} emit    Function that receives the parsed events.\n * @param  {Any}      [END='END'] The \"end of lifetime\" symbol.\n * @return {Function} The unsubscribe function.\n */\nexport function setListeners (manager, emit, END = 'END') {\n  // Handle new Session.\n  const sessionAdded = id => {\n    const session = manager.get(id)\n    const state = session.getState()\n    delete state.id\n\n    emit({\n      session: session,\n      action: sessionActions.sessionAdded(id, state)\n    })\n  }\n\n  // Handle Sessions ending.\n  const sessionRemoved = id => {\n    emit({\n      action: sessionActions.sessionRemoved(id)\n    })\n  }\n\n  manager.on('session:new', sessionAdded)\n  manager.on('session:removed', sessionRemoved)\n  const unsubscribe = () => {\n    manager.off('session:new', sessionAdded)\n    manager.off('session:removed', sessionRemoved)\n  }\n  return unsubscribe\n}\n","// Libraries.\nimport { takeEvery } from 'redux-saga/effects'\nimport { eventChannel, END } from 'redux-saga'\nimport { trackActions } from '../interface/actions'\nimport { forwardAction } from '../../common/utils'\n\n/**\n * Sets up event listeners for a Track's events.\n * The events are turned into actions and dispatched\n *    to be handled by redux elsewhere.\n * @method watchTrackEvents\n * @param  {Object} track A Track object.\n * @param  {Object} webRTC The webRTC stack.\n */\nexport default function * watchTrackEvents (track, webRTC) {\n  /**\n   * Create an event channel between the Track and redux-saga.\n   * This \"forces\" the Track events into a redux-saga context.\n   */\n  const trackChannel = eventChannel(emit => {\n    return setListeners(track, emit, END)\n  })\n  yield takeEvery(trackChannel, forwardAction)\n}\n\n/**\n * Function to set-up listeners for a Track object's events.\n * Contains the logic for how a webRTC event should be parsed\n *    before being sent elsewhere. Split into a stand-alone\n *    function in order to be re-usable.\n * @method setListeners\n * @param  {Object}   track A Track object.\n * @param  {Function} emit  Function that receives the parsed events.\n * @param  {Any}      [END='END'] The \"end of lifetime\" symbol.\n * @return {Function} The unsubscribe function.\n */\nexport function setListeners (track, emit, END = 'END') {\n  // Track ended\n  const trackEnded = trackData => {\n    /**\n     * When the track ends, its channel should be ended (via `END`).\n     * The trackManager channel will handle updating state for this event.\n     */\n    emit(END)\n  }\n\n  // The track source (which affected the track identified by trackId) was muted.\n  // An example of a track source is a physical media device such as:\n  // microphone or camera.\n  const trackSourceMuted = trackData => {\n    emit(trackActions.trackSourceMuted([trackData.trackId]))\n  }\n\n  // The track source (which affected the track identified by trackId) was unmuted.\n  const trackSourceUnmuted = trackData => {\n    emit(trackActions.trackSourceUnmuted([trackData.trackId]))\n  }\n\n  track.on('ended', trackEnded)\n  track.on('muted', trackSourceMuted)\n  track.on('unmuted', trackSourceUnmuted)\n\n  const unsubscribe = () => {\n    track.off('ended', trackEnded)\n    track.off('muted', trackSourceMuted)\n    track.off('unmuted', trackSourceUnmuted)\n  }\n  return unsubscribe\n}\n","// Call plugin.\nimport { trackActions } from '../interface/actions'\nimport * as actionTypes from '../interface/actionTypes'\nimport watchTrackEvents from './track'\n\n// Libraries.\nimport { put, fork, takeEvery } from 'redux-saga/effects'\nimport { eventChannel } from 'redux-saga'\n\n/**\n * Sets up event listeners for Track Manager Events.\n * The events are turned into actions and dispatched\n *    to be handled by redux elsewhere.\n * @method watchTrackManagerEvents\n * @param  {Object} manager The webRTC Track Manager.\n */\nexport default function * watchTrackManagerEvents (manager) {\n  /**\n   * Create an event channel between the Track Manager and redux-saga.\n   * This pushes its events into the redux-saga context.\n   * */\n  const managerChannel = eventChannel(emit => {\n    return setListeners(manager, emit)\n  })\n\n  // https://github.com/redux-saga/redux-saga/issues/684\n  // See user \"kuy\"'s second comment.\n  // Using takeEvery to handle actions.\n  // That way they are handled in a forked process and other actions don't get dropped.\n  yield takeEvery(managerChannel, trackManagerEventsHandler)\n}\n\nfunction * trackManagerEventsHandler ({ track, action }) {\n  // If it is a new Track, watch for its events.\n  if (action.type === actionTypes.TRACK_ADDED) {\n    yield fork(watchTrackEvents, track)\n  }\n\n  // Dispatch the action\n  yield put(action)\n}\n\n/**\n * Sets up listeners for the Track Manager events.\n * Contains logic for how specific webRTC events should be\n *    parsed before being sent elsewhere. Splut into a\n *    stand-alone function in order to be re-usable.\n * @method setListeners\n * @param  {Object}   manager The Track Manager.\n * @param  {Function} emit    Function that receives the parsed events.\n * @param  {Any}      [END='END'] The \"end of lifetime\" symbol.\n * @return {Function} The unsubscribe function.\n */\nexport function setListeners (manager, emit, END = 'END') {\n  // Handle new Tracks.\n  const trackAdded = id => {\n    const track = manager.get(id)\n    const state = track.getState()\n\n    // Translate the track state from native WebRTC to SDK style.\n    // This is to change the \"muted\" property to be what people generally know\n    //    \"muted\" to be.\n    state.sourceMuted = state.muted\n    state.muted = !state.enabled\n\n    delete state.enabled\n    delete state.id\n\n    /**\n     * When a new track is added,\n     * update redux state's webrtc.tracks array by adding track's state into it.\n     */\n    emit({\n      track,\n      action: trackActions.trackAdded(id, state)\n    })\n  }\n\n  // Handle Tracks ending.\n  const trackRemoved = id => {\n    /**\n     * When a track has ended,\n     * update redux state's webrtc.tracks array\n     * by specifying which track to remove by providing a track id.\n     */\n    emit({\n      action: trackActions.trackRemoved(id)\n    })\n  }\n\n  manager.on('add', trackAdded)\n  manager.on('remove', trackRemoved)\n  const unsubscribe = () => {\n    manager.off('add', trackAdded)\n    manager.off('remove', trackRemoved)\n  }\n  return unsubscribe\n}\n","// Webrtc plugin.\nimport pluginInterface from './interface'\nimport events from './interface/events'\nimport watchManagers from './channels'\nimport * as sagas from './sagas'\nimport { miscActions } from './interface/actions'\n\n// Other plugins.\nimport { mapEvents } from '../events/interface/actions'\nimport { logManager } from '../logs'\n\n// Helpers.\nimport { autoRestart } from '../common/utils'\n\n// Libraries.\nimport initialize, { getWebRTCSupportCapabilities } from 'kandy-webrtc'\nimport { values } from 'lodash/fp'\nimport { call, fork, put } from 'redux-saga/effects'\n\nconst log = logManager.getLogger('WEBRTC')\n\nexport function initializeStack () {\n  return initialize()\n}\n\nexport default function webRtcPlugin () {\n  const { mediaDevices, peerConnection } = getWebRTCSupportCapabilities()\n  if (!mediaDevices || !peerConnection) {\n    log.warn(\n      'Calls are not supported on this platform due to lack of WebRTC support. Media APIs will not be available.'\n    )\n    return\n  }\n\n  // Initialize the webRTC.\n  const webRTC = initialize()\n\n  function * init ({ webRTC }) {\n    yield put(mapEvents(events))\n\n    // Wrap the webrtc sagas in a function that provides them with the webRTC stack.\n    const wrappedSagas = values(sagas).map(saga => {\n      return autoRestart(() => saga(webRTC.managers))\n    })\n\n    // Run all of the sagas.\n    for (const saga of wrappedSagas) {\n      yield fork(saga)\n    }\n\n    // Watch for events from the webRTC stack.\n    // TODO: Don't also pass in the entire stack.\n    yield fork(watchManagers, webRTC.managers, webRTC)\n\n    // Use the webRTC stack to check the browser details.\n    const details = yield call([webRTC, 'getBrowserDetails'])\n    log.info(`Browser details: ${details.browser}, version ${details.version}.`)\n    yield put(miscActions.setBrowserDetails(details))\n  }\n\n  return {\n    name: pluginInterface.name,\n    api: pluginInterface.api,\n    reducer: pluginInterface.reducer,\n    init,\n    shared: {\n      webRTC\n    }\n  }\n}\n","const prefix = '@@KANDY/WEBRTC/'\n\n/**\n * Device action types.\n */\nexport const DEVICES_CHANGE = prefix + 'DEVICES/CHANGE'\nexport const INITIALIZE_DEVICES = prefix + 'INITIALIZE_DEVICES'\nexport const INITIALIZE_DEVICES_FINISH = prefix + 'INITIALIZE_DEVICES_FINISH'\n\n/**\n * Track action types.\n */\nconst trackPrefix = prefix + 'TRACK/'\n\nexport const TRACK_ADDED = trackPrefix + 'ADDED'\nexport const TRACK_REMOVED = trackPrefix + 'REMOVED'\n\nexport const RENDER_TRACKS = trackPrefix + 'RENDER'\nexport const RENDER_TRACKS_FINISH = trackPrefix + 'RENDER_FINISH'\n\nexport const REMOVE_TRACKS = trackPrefix + 'REMOVE'\nexport const REMOVE_TRACKS_FINISH = trackPrefix + 'REMOVE_FINISH'\n\nexport const MUTE_TRACKS = trackPrefix + 'MUTE'\nexport const MUTE_TRACKS_FINISH = trackPrefix + 'MUTE_FINISH'\nexport const UNMUTE_TRACKS = trackPrefix + 'UNMUTE'\nexport const UNMUTE_TRACKS_FINISH = trackPrefix + 'UNMUTE_FINISH'\n\nexport const TRACK_SOURCE_MUTED = trackPrefix + 'SOURCE_MUTED'\nexport const TRACK_SOURCE_UNMUTED = trackPrefix + 'SOURCE_UNMUTED'\n\n/**\n * Session action types.\n */\nconst sessionPrefix = prefix + 'SESSION/'\n\nexport const SESSION_ADDED = sessionPrefix + 'ADDED'\nexport const SESSION_REMOVED = sessionPrefix + 'REMOVED'\n\nexport const SESSION_NEW_TRACK = sessionPrefix + 'NEW_TRACK'\nexport const SESSION_TRACK_REMOVED = sessionPrefix + 'TRACK_REMOVED'\nexport const SESSION_TRACK_ENDED = sessionPrefix + 'TRACK_ENDED'\nexport const SESSION_CHANGE = sessionPrefix + 'CHANGE'\nexport const SESSION_TRACK_REPLACED = sessionPrefix + 'TRACK_REPLACED'\n\n/**\n * Media action types.\n */\nconst mediaPrefix = prefix + 'MEDIA/'\n\nexport const MEDIA_NEW = mediaPrefix + 'NEW'\nexport const MEDIA_REMOVED = mediaPrefix + 'REMOVED'\nexport const MEDIA_CHANGE = mediaPrefix + 'CHANGE'\n\nexport const MEDIA_NEW_TRACK = mediaPrefix + 'NEW_TRACK'\nexport const MEDIA_TRACK_REMOVED = mediaPrefix + 'TRACK_REMOVED'\nexport const MEDIA_TRACK_ENDED = mediaPrefix + 'TRACK_ENDED'\n\n/**\n * Misc. action types.\n */\nexport const SET_BROWSER_DETAILS = prefix + 'SET_BROWSER_DETAILS'\n","// Webrtc plugin.\nimport * as actionTypes from '../actionTypes'\n\nexport function devicesChanged (devices) {\n  return {\n    type: actionTypes.DEVICES_CHANGE,\n    payload: devices\n  }\n}\n\nexport function initializeDevice (browserConstraints) {\n  return {\n    type: actionTypes.INITIALIZE_DEVICES,\n    payload: browserConstraints\n  }\n}\n\n/**\n * The finishing action which follows the INITIALIZE_DEVICES action\n * @param {Object} $0\n * @param {Object} [$0.devices] The device object.\n * @param {Object} [$0.error] An error object. Only present if an error occurred.\n * @returns {Object} A flux standard action representing the INITIALIZE_DEVICES_FINISH action.\n */\nexport function initializeDeviceFinish ({ devices, error }) {\n  return {\n    payload: error || devices,\n    error: Boolean(error),\n    type: actionTypes.INITIALIZE_DEVICES_FINISH\n  }\n}\n","import * as deviceActionsImport from './devices'\nimport * as trackActionsImport from './tracks'\nimport * as sessionActionsImport from './sessions'\nimport * as mediaActionsImport from './media'\nimport * as miscActionsImport from './misc'\n\n// Apparently the following doesn't work:\n//      export * as newName from './place';\n// So import everything from each file, then re-export.\nexport const deviceActions = deviceActionsImport\nexport const trackActions = trackActionsImport\nexport const sessionActions = sessionActionsImport\nexport const mediaActions = mediaActionsImport\nexport const miscActions = miscActionsImport\n","// Webrtc plugin.\nimport * as actionTypes from '../actionTypes'\n\n// Libraries.\nimport { isEmpty } from 'lodash/fp'\n\nfunction mediaActionHelper (type, id, payload = {}, meta = {}) {\n  const action = {\n    type,\n    payload: {\n      ...payload,\n      id\n    }\n  }\n\n  // Only have meta and error properties on the action if they're needed.\n  if (!isEmpty(meta)) {\n    action.meta = meta\n  }\n  if (payload.error) {\n    action.error = true\n  }\n  return action\n}\n\nexport function newMedia (id, params) {\n  return mediaActionHelper(actionTypes.MEDIA_NEW, id, params)\n}\n\nexport function removedMedia (id, params) {\n  return mediaActionHelper(actionTypes.MEDIA_REMOVED, id, params)\n}\n\nexport function mediaNewTrack (id, params) {\n  return mediaActionHelper(actionTypes.MEDIA_NEW_TRACK, id, params)\n}\n\nexport function mediaTrackRemoved (id, params) {\n  return mediaActionHelper(actionTypes.MEDIA_TRACK_REMOVED, id, params)\n}\n\nexport function mediaTrackEnded (id, params) {\n  return mediaActionHelper(actionTypes.MEDIA_TRACK_ENDED, id, params)\n}\n","// Webrtc plugin.\nimport * as actionTypes from '../actionTypes'\n\n/**\n * Action creator\n * @method setBrowserDetails\n * @param  {Object} details\n * @param  {string} details.browser\n * @param  {number} details.version\n * @return {Object} A Flux-Standard-action.\n */\nexport function setBrowserDetails (details) {\n  return {\n    type: actionTypes.SET_BROWSER_DETAILS,\n    payload: details\n  }\n}\n","// Call plugin.\nimport * as actionTypes from '../actionTypes'\n\n// Libraries.\nimport { isEmpty } from 'lodash/fp'\n\nfunction sessionActionHelper (type, id, payload = {}, meta = {}) {\n  const action = {\n    type,\n    payload: {\n      ...payload,\n      id\n    }\n  }\n\n  // Only have meta and error properties on the action if they're needed.\n  if (!isEmpty(meta)) {\n    action.meta = meta\n  }\n  if (payload.error) {\n    action.error = true\n  }\n  return action\n}\n\nexport function sessionAdded (id, params) {\n  return sessionActionHelper(actionTypes.SESSION_ADDED, id, params)\n}\n\nexport function sessionRemoved (id, params) {\n  return sessionActionHelper(actionTypes.SESSION_REMOVED, id, params)\n}\n\nexport function sessionNewTrack (id, params) {\n  return sessionActionHelper(actionTypes.SESSION_NEW_TRACK, id, params)\n}\n\nexport function sessionTrackRemoved (id, params) {\n  return sessionActionHelper(actionTypes.SESSION_TRACK_REMOVED, id, params)\n}\n\nexport function sessionTrackEnded (id, params) {\n  return sessionActionHelper(actionTypes.SESSION_TRACK_ENDED, id, params)\n}\n\nexport function sessionChange (id, params) {\n  return sessionActionHelper(actionTypes.SESSION_CHANGE, id, params)\n}\n\nexport function sessionTrackReplaced (id, params) {\n  return sessionActionHelper(actionTypes.SESSION_TRACK_REPLACED, id, params)\n}\n","// Call plugin.\nimport * as actionTypes from '../actionTypes'\n\nfunction trackManagerHelper (type, trackId, payload = {}, meta = {}) {\n  return {\n    type,\n    payload: {\n      ...payload,\n      trackId\n    },\n    meta\n  }\n}\n\nexport function trackAdded (trackId, params) {\n  return trackManagerHelper(actionTypes.TRACK_ADDED, trackId, params)\n}\n\nexport function trackRemoved (trackId, params) {\n  return trackManagerHelper(actionTypes.TRACK_REMOVED, trackId, params)\n}\n\nfunction trackHelper (type, payload = {}, meta = {}) {\n  return {\n    type,\n    payload,\n    meta\n  }\n}\n\nexport function muteTracks (trackIds) {\n  return trackHelper(actionTypes.MUTE_TRACKS, trackIds)\n}\n\nexport function muteTracksFinish (trackIds) {\n  return trackHelper(actionTypes.MUTE_TRACKS_FINISH, { trackIds: trackIds })\n}\n\nexport function unmuteTracks (trackIds) {\n  return trackHelper(actionTypes.UNMUTE_TRACKS, trackIds)\n}\n\nexport function unmuteTracksFinish (trackIds) {\n  return trackHelper(actionTypes.UNMUTE_TRACKS_FINISH, { trackIds: trackIds })\n}\n\nexport function trackSourceMuted (trackIds) {\n  return trackHelper(actionTypes.TRACK_SOURCE_MUTED, { trackIds: trackIds })\n}\n\nexport function trackSourceUnmuted (trackIds) {\n  return trackHelper(actionTypes.TRACK_SOURCE_UNMUTED, { trackIds: trackIds })\n}\n\nexport function renderTracks (trackIds, params) {\n  return trackHelper(actionTypes.RENDER_TRACKS, {\n    trackIds,\n    ...params\n  })\n}\n\nexport function renderTracksFinish (trackIds, params) {\n  return trackHelper(actionTypes.RENDER_TRACKS_FINISH, {\n    trackIds,\n    ...params\n  })\n}\n\nexport function removeTracks (trackIds, params) {\n  return trackHelper(actionTypes.REMOVE_TRACKS, {\n    trackIds,\n    ...params\n  })\n}\n\nexport function removeTracksFinish (trackIds, params) {\n  return trackHelper(actionTypes.REMOVE_TRACKS_FINISH, {\n    trackIds,\n    ...params\n  })\n}\n","// Webrtc plugin.\nimport { getBrowserDetails } from '../selectors'\n\n// Namespaced APIs.\nimport mediaAPI from './media'\n\nimport { logManager, API_LOG_TAG } from '../../../logs'\n\nconst log = logManager.getLogger('WEBRTC')\n\n/**\n * Public API for the webRTC plugin.\n * @method api\n * @return {Object}\n */\nexport default function api (context) {\n  return {\n    media: mediaAPI(context),\n\n    /**\n     * Retrieve information about the browser being used.\n     *\n     * Browser information being defined indicates that the browser supports\n     *    basic webRTC scenarios.\n     * @public\n     * @memberof api\n     * @method getBrowserDetails\n     * @return {Object} Object containing `browser` and `version` information.\n     * @example\n     * const details = client.getBrowserDetails()\n     *\n     * log(`Browser in use: ${details.browser}, version ${details.version}.`)\n     */\n    getBrowserDetails () {\n      log.debug(API_LOG_TAG + 'getBrowserDetails')\n      return getBrowserDetails(context.getState())\n    }\n  }\n}\n","// Webrtc plugin.\nimport { trackActions, deviceActions } from '../actions'\nimport { getDevices, getMediaById, getTrackById } from '../selectors'\n\nimport { logManager, API_LOG_TAG } from '../../../logs'\n\nconst log = logManager.getLogger('MEDIA')\n\n/**\n * Media related APIs.\n * @method mediaAPI\n * @param  {Function} dispatch Redux dispatch.\n * @param  {Function} getState Redux getState.\n * @return {Object}\n */\nexport default function mediaAPI ({ dispatch, getState }) {\n  return {\n    /**\n     * Retrieves the available media devices for use.\n     *\n     * The {@link media.event:devices:change devices:change} event will be\n     *    emitted when the available media devices have changed.\n     *\n     * @public\n     * @static\n     * @memberof media\n     * @method getDevices\n     * @return {Object} The lists of camera, microphone, and speaker devices.\n     */\n    getDevices () {\n      log.debug(API_LOG_TAG + 'media.getDevices')\n      return getDevices(getState())\n    },\n\n    /**\n     * Retrieves an available Media object with a specific Media ID.\n     * @public\n     * @static\n     * @memberof media\n     * @method getById\n     * @param  {string} mediaId The ID of the Media to retrieve.\n     * @return {call.MediaObject} A Media object.\n     */\n    getById (mediaId) {\n      log.debug(API_LOG_TAG + 'media.getById: ', mediaId)\n      return getMediaById(getState(), mediaId)\n    },\n\n    /**\n     * Retrieve an available Track object with a specific Track ID.\n     * @public\n     * @static\n     * @memberof media\n     * @method getTrackById\n     * @param  {string} trackId The ID of the Track to retrieve.\n     * @return {call.TrackObject} A Track object.\n     */\n    getTrackById (trackId) {\n      log.debug(API_LOG_TAG + 'media.getByTrackId: ', trackId)\n      return getTrackById(getState(), trackId)\n    },\n\n    /**\n     * Requests permission to access media devices on the end-user's machine.\n     *\n     * This API will trigger the browser to ask the end-user for permission to\n     *    access their camera and/or microphone. These permissions are\n     *    needed for the SDK to read information about the devices (the label,\n     *    for example) and for using the devices for a call.\n     *\n     * If the browser does not yet have permission, it will prompt the end-user\n     *    with a small pop-up window, giving the user a chance to allow/deny the\n     *    permissions. The behaviour of this pop-up window differs slightly\n     *    based on the browser; it may automatically save the user's decision\n     *    (such as in Chrome and Safari) or it may require the user to choose\n     *    whether their decision should be saved (such as in Firefox).\n     *\n     * This API is not required for proper usage of media and/or calls, but\n     *    helps to prepare a user before a call is made or received. It allows\n     *    an application to prompt the user for device permissions when it is\n     *    convenient for them, rather than during call setup. If the user saves\n     *    their decision, they will not be prompted again when the SDK accesses\n     *    those devices for a call.\n     *\n     * For device information, the {@link media.getDevices} API will retrieve\n     *    the list of media devices available for the SDK to use. If this list\n     *    is empty, or is missing information, it is likely that the browser\n     *    does not have permission to access the device's information. We\n     *    recommend using the {@link media.initializeDevices} API in this\n     *    scenario if you would like to allow the end-user to select which\n     *    device(s) they would like to use when they make a call, rather than\n     *    using the system default.\n     *\n     * The SDK will emit a {@link media.event:devices:change devices:change}\n     *    event when the operation is successful or a\n     *    {@link media.event:devices:error devices:error} event if an error is\n     *    encountered.\n     * @public\n     * @static\n     * @memberof media\n     * @method initializeDevices\n     * @param {Object} [constraints]\n     * @param {boolean} [constraints.audio=true] Whether to ask for audio device permissions.\n     * @param {boolean} [constraints.video=true] Whether to ask for video device permissions.\n     * @example\n     * // The SDK will ask for both audio and video permissions by default.\n     * client.media.initializeDevices()\n     *\n     * // The SDK will only ask for audio permissions.\n     * client.media.initializeDevices({ audio: true, video: false })\n     */\n    initializeDevices (constraints) {\n      log.debug(API_LOG_TAG + 'media.initializeDevices: ', constraints)\n      const browserContraints = {\n        audio: constraints === undefined ? true : constraints.audio,\n        video: constraints === undefined ? true : constraints.video\n      }\n      dispatch(deviceActions.initializeDevice(browserContraints))\n    },\n    /**\n     * Render Media Tracks in a container.\n     *\n     * The container is specified by providing a CSS selector string that\n     *    corresponds to the HTMLElement to act as the container.\n     * @public\n     * @static\n     * @memberof media\n     * @method renderTracks\n     * @param  {Array<string>} trackIds List of Track IDs to be rendered.\n     * @param  {string} cssSelector A CSS selector string that uniquely\n     *    identifies an element. Ensure that special characters are properly\n     *    escaped.\n     * @param  {Object} [options] Additional options for rendering the tracks.\n     * @param  {string} [options.speakerId] The speaker's Device ID to use for audio tracks.\n     * @example\n     * // When a Call receives a new track, render it.\n     * client.on('call:newTrack', function (params) {\n     *    const track = client.media.getTrackById(params.trackId)\n     *    const container = params.local ? localContainer : remoteContainer\n     *\n     *    // Render the Call's new track when it first becomes available.\n     *    client.media.renderTracks([ track.trackId ], container)\n     * })\n     */\n    renderTracks (trackIds, cssSelector, options = {}) {\n      log.debug(API_LOG_TAG + 'media.renderTracks: ', trackIds, cssSelector, options)\n      dispatch(\n        trackActions.renderTracks(trackIds, {\n          selector: cssSelector,\n          ...options\n        })\n      )\n    },\n\n    /**\n     * Remove Media Tracks from a container.\n     *\n     * The container is specified by providing a CSS selector string that\n     *    corresponds to the HTMLElement to act as the container.\n     * @public\n     * @static\n     * @memberof media\n     * @method removeTracks\n     * @param  {Array<string>} trackIds List of Track IDs to stop being rendered.\n     * @param  {string} cssSelector A CSS selector string that uniquely\n     *    identifies an element. Ensure that special characters are properly\n     *    escaped.\n     */\n    removeTracks (trackIds, cssSelector) {\n      log.debug(API_LOG_TAG + 'media.removeTracks: ', trackIds, cssSelector)\n      dispatch(trackActions.removeTracks(trackIds, { selector: cssSelector }))\n    },\n\n    /**\n     * Mutes the specified Tracks at their media source.\n     *\n     * Prevents media from being received for the Tracks. Audio Tracks will\n     *    become silent and video Tracks will be a black frame.\n     *\n     * If a local Track being sent in a Call is muted, the Track will be\n     *    noticeably muted for the remote user. If a remote Track received in a\n     *    call is muted, the result will only be noticeable locally.\n     *\n     * The SDK will emit a {@link media.event:media:muted media:muted} event\n     *    when a Track has been muted.\n     * @public\n     * @static\n     * @memberof media\n     * @method muteTracks\n     * @param  {Array<string>} trackIds List of Track IDs.\n     */\n    muteTracks (trackIds) {\n      log.debug(API_LOG_TAG + 'media.muteTracks: ', trackIds)\n      dispatch(trackActions.muteTracks(trackIds))\n    },\n\n    /**\n     * Unmutes the specified Tracks.\n     *\n     * Media will resume as normal for the Tracks.\n     *\n     * The SDK will emit a {@link media.event:media:unmuted media:unmuted} event\n     *    when a Track has been unmuted.\n     * @public\n     * @static\n     * @memberof media\n     * @method unmuteTracks\n     * @param  {Array<string>} trackIds List of Track IDs.\n     */\n    unmuteTracks (trackIds) {\n      log.debug(API_LOG_TAG + 'media.unmuteTracks: ', trackIds)\n      dispatch(trackActions.unmuteTracks(trackIds))\n    }\n  }\n}\n","/**\n * The media devices available for use have changed.\n *\n * Information about the available media devices can be retrieved using the\n *    {@link media.getDevices} API.\n *\n * @public\n * @static\n * @memberof media\n * @event devices:change\n * @example\n * // Listen for changes to available media devices.\n * client.on('devices:change', function () {\n *    // Retrieve the latest media device lists.\n *    const devices = client.media.getDevices()\n * })\n */\nexport const DEVICES_CHANGED = 'devices:change'\n\n/**\n * An error occurred while trying to access media devices.\n *\n * The most common causes of this error are when the browser does not have\n *    permission from the end-user to access the devices, or when the browser\n *    cannot find a media device that fulfills the\n *    {@link call.MediaConstraint MediaConstraint(s)} that was provided.\n *\n * @public\n * @static\n * @memberof media\n * @event devices:error\n * @param {Object} params\n * @param {Error} params.error The Basic error object.\n */\nexport const INITIALIZE_DEVICES_ERROR = 'devices:error'\n\n/**\n * The specified Tracks have been muted.\n *\n * A Track can be muted using the {@link media.muteTracks} API.\n * @public\n * @memberof media\n * @event media:muted\n * @param {Object} params\n * @param {Array<string>} params.tracks The list of Tracks that were muted.\n */\nexport const TRACKS_MUTED = 'media:muted'\n\n/**\n * The specified Tracks have been unmuted.\n *\n * A Track can be unmuted using the {@link media.unmuteTracks}\n *    API.\n * @public\n * @memberof media\n * @event media:unmuted\n * @param {Object} params\n * @param {Array<string>} params.tracks The list of Tracks that were unmuted.\n */\nexport const TRACKS_UNMUTED = 'media:unmuted'\n\n/**\n * The specified Track has had its media source muted.\n *\n * The Track is still active, but is not receiving media any longer. An audio\n *    track will be silent and a video track will be a black frame. It is\n *    possible for the track to start receiving media again (see the\n *    {@link media.event:media:sourceUnmuted media:sourceUnmuted} event).\n *\n * This event is generated outside the control of the SDK. This may happen for a\n *    local track if the browser or end-user stops allowing the SDK to access\n *    the media device, for example. This may happen for a remote track during a\n *    call when the remote endpoint stops sending media during a hold operation,\n *    for example.\n *\n * Handling this event is only required if you are using `unified-plan` as the\n *    `sdpSemantics` setting in the SDK's configuration. This setting will become\n *    the default in an upcoming release.\n * @public\n * @static\n * @memberof media\n * @event media:sourceMuted\n * @param {Object} params\n * @param {string} params.trackId The track that is affected as a result of media source being muted.\n */\nexport const TRACK_SOURCE_MUTED = 'media:sourceMuted'\n\n/**\n * The specified Track has started receiving media from its source once again.\n *\n * The Track returns to the state before it was muted (see the\n *    {@link media.event:media:sourceMuted media:sourceMuted} event), and will\n *    be able to display video or play audio once again.\n *\n * This event is generated outside the control of the SDK, when the cause of the\n *    media source being muted had been undone.\n *\n * Handling this event is only required if you are using `unified-plan` as the\n *    `sdpSemantics` setting in the SDK's configuration. This setting will become\n *    the default in an upcoming release.\n * @public\n * @static\n * @memberof media\n * @event media:sourceUnmuted\n * @param {Object} params\n * @param {string} params.trackId The track that is affected as a result of media source being unmuted.\n */\nexport const TRACK_SOURCE_UNMUTED = 'media:sourceUnmuted'\n","import * as eventTypes from '../eventTypes'\nimport * as actionTypes from '../actionTypes'\n\nconst events = {}\n\n// Media devices have changed.\nevents[actionTypes.DEVICES_CHANGE] = action => {\n  return {\n    type: eventTypes.DEVICES_CHANGED\n  }\n}\n\nevents[actionTypes.INITIALIZE_DEVICES_FINISH] = action => {\n  if (action.error) {\n    return {\n      type: eventTypes.INITIALIZE_DEVICES_ERROR,\n      args: { error: action.payload }\n    }\n  } else {\n    return {\n      type: eventTypes.DEVICES_CHANGED\n    }\n  }\n}\n\nexport default events\n","import deviceEvents from './devices'\nimport trackEvents from './tracks'\n\nexport default {\n  ...deviceEvents,\n  ...trackEvents\n}\n","import * as eventTypes from '../eventTypes'\nimport * as actionTypes from '../actionTypes'\n\nconst events = {}\n\nevents[actionTypes.MUTE_TRACKS_FINISH] = action => {\n  return {\n    type: eventTypes.TRACKS_MUTED,\n    args: {\n      trackIds: action.payload.trackIds,\n      tracks: action.payload.trackIds\n    }\n  }\n}\n\nevents[actionTypes.UNMUTE_TRACKS_FINISH] = action => {\n  return {\n    type: eventTypes.TRACKS_UNMUTED,\n    args: {\n      trackIds: action.payload.trackIds,\n      tracks: action.payload.trackIds\n    }\n  }\n}\n\nevents[actionTypes.TRACK_SOURCE_MUTED] = action => {\n  return {\n    type: eventTypes.TRACK_SOURCE_MUTED,\n    args: {\n      trackIds: action.payload.trackIds,\n      trackId: action.payload.trackIds[0]\n    }\n  }\n}\n\nevents[actionTypes.TRACK_SOURCE_UNMUTED] = action => {\n  return {\n    type: eventTypes.TRACK_SOURCE_UNMUTED,\n    args: {\n      trackIds: action.payload.trackIds,\n      trackId: action.payload.trackIds[0]\n    }\n  }\n}\n\nexport default events\n","import api from './api'\nimport reducer from './reducers'\n\nexport default {\n  name: 'webrtc',\n  api,\n  reducer\n}\n","// Call plugin.\nimport * as actionTypes from '../actionTypes'\n\n// Libraries.\nimport { handleActions } from 'redux-actions'\n\n/**\n * The devices substate keeps tracks the of the media devices available for use.\n */\nconst reducers = {}\n\n// Replace old devices with newly checked devices.\nreducers[actionTypes.SET_BROWSER_DETAILS] = {\n  next (state, action) {\n    return action.payload\n  }\n}\n\nconst reducer = handleActions(reducers, {})\nexport default reducer\n","// Call plugin.\nimport * as actionTypes from '../actionTypes'\n\n// Libraries.\nimport { handleActions } from 'redux-actions'\n\n/**\n * The devices substate keeps tracks the of the media devices available for use.\n */\nconst reducers = {}\n\n// Replace old devices with newly checked devices.\nreducers[actionTypes.DEVICES_CHANGE] = {\n  next (state, action) {\n    return action.payload\n  }\n}\n\n// Replace with newly checked devices.\nreducers[actionTypes.INITIALIZE_DEVICES_FINISH] = {\n  next (state, action) {\n    return action.payload\n  }\n}\n\n// The initial state of the reducer.\nconst defaultState = {\n  camera: [],\n  microphone: [],\n  speaker: []\n}\n\nconst reducer = handleActions(reducers, defaultState)\nexport default reducer\n","import devices from './devices'\nimport media from './media'\nimport tracks from './tracks'\nimport sessions from './sessions'\nimport browser from './browser'\n\n/**\n * Webrtc plugin top-level reducer.\n * @method reducer\n * @param  {Object} [state={}]\n * @param  {Object} action\n * @return {Object}\n */\nexport default function (state = {}, action) {\n  return {\n    devices: devices(state.devices, action),\n    tracks: tracks(state.tracks, action),\n    sessions: sessions(state.sessions, action),\n    media: media(state.media, action),\n    browser: browser(state.browser, action)\n  }\n}\n","// Webrtc plugin.\nimport * as actionTypes from '../actionTypes'\n\n// Libraries.\nimport { combineActions, handleActions } from 'redux-actions'\nimport { concat, remove } from 'lodash/fp'\n\n// Top-tier reducers: Handles the whole state.\nconst reducers = {}\n\n// Add the new media object to state.\nreducers[actionTypes.MEDIA_NEW] = {\n  next (state, action) {\n    return concat(state, {\n      ...action.payload\n    })\n  }\n}\n\n// Remove the media object from state.\nreducers[actionTypes.MEDIA_REMOVED] = {\n  next (state, action) {\n    const removeMedia = media => media.id === action.payload.id\n    return remove(removeMedia)(state)\n  }\n}\n\n// Media-tier reducers: Handles only a specific portion of the substate.\nconst mediaReducers = {}\n\nmediaReducers[actionTypes.MEDIA_NEW_TRACK] = {\n  next (state, action) {\n    return {\n      ...state,\n      tracks: concat(state.tracks, [action.payload.trackId])\n    }\n  }\n}\n\n// Remove specified track from media state.\nmediaReducers[actionTypes.MEDIA_TRACK_REMOVED] = {\n  next (state, action) {\n    const removeTrack = trackId => trackId === action.payload.trackId\n    return {\n      ...state,\n      tracks: remove(removeTrack, state.tracks)\n    }\n  }\n}\n\n// Remove specified track from media state.\nmediaReducers[actionTypes.MEDIA_TRACK_ENDED] = {\n  next (state, action) {\n    const removeTrack = trackId => trackId === action.payload.trackId\n    return {\n      ...state,\n      tracks: remove(removeTrack, state.tracks)\n    }\n  }\n}\nconst mediaReducer = handleActions(mediaReducers, {})\n\nconst specificMediaActions = combineActions(\n  actionTypes.MEDIA_NEW_TRACK,\n  actionTypes.MEDIA_TRACK_REMOVED,\n  actionTypes.MEDIA_TRACK_ENDED\n)\n\nreducers[specificMediaActions] = (state, action) => {\n  return state.map(media => {\n    if (media.id === action.payload.id) {\n      return mediaReducer(media, action)\n    } else {\n      return media\n    }\n  })\n}\n\n/*\n * Combine all of top-tier reducers into a single reducer,\n *      each with a default state of an empty array.\n */\nconst reducer = handleActions(reducers, [])\nexport default reducer\n","// Webrtc plugin.\nimport * as actionTypes from '../actionTypes'\n\n// Libraries.\nimport { combineActions, handleActions } from 'redux-actions'\nimport { concat, remove } from 'lodash/fp'\n\nconst reducers = {}\n\nreducers[actionTypes.SESSION_ADDED] = {\n  next (state, action) {\n    return concat(state, action.payload)\n  }\n}\n\nreducers[actionTypes.SESSION_REMOVED] = {\n  next (state, action) {\n    const removeSession = session => session.id === action.payload.id\n    return remove(removeSession)(state)\n  }\n}\n\nconst sessionReducers = {}\n\nsessionReducers[actionTypes.SESSION_NEW_TRACK] = {\n  next (state, action) {\n    if (action.payload.local) {\n      return {\n        ...state,\n        localTracks: concat(state.localTracks, [action.payload.trackId])\n      }\n    } else {\n      return {\n        ...state,\n        remoteTracks: concat(state.remoteTracks, [action.payload.trackId])\n      }\n    }\n  }\n}\n\nsessionReducers[actionTypes.SESSION_TRACK_REMOVED] = {\n  next (state, action) {\n    const removeTrack = trackId => trackId === action.payload.trackId\n    if (action.payload.local) {\n      return {\n        ...state,\n        localTracks: remove(removeTrack, state.localTracks)\n      }\n    } else {\n      return {\n        ...state,\n        remoteTracks: remove(removeTrack, state.remoteTracks)\n      }\n    }\n  }\n}\n\nsessionReducers[actionTypes.SESSION_TRACK_ENDED] = {\n  next (state, action) {\n    const removeTrack = trackId => trackId === action.payload.trackId\n    if (action.payload.local) {\n      return {\n        ...state,\n        localTracks: remove(removeTrack, state.localTracks)\n      }\n    } else {\n      return {\n        ...state,\n        remoteTracks: remove(removeTrack, state.remoteTracks)\n      }\n    }\n  }\n}\n\nsessionReducers[actionTypes.SESSION_TRACK_REPLACED] = {\n  next (state, action) {\n    // Remove old track id if it still exists\n    const removeTrack = trackId => trackId === action.payload.oldTrackId\n    const newLocalTracks = remove(removeTrack, state.localTracks)\n    // Add new track id if it doesn't exist\n    if (newLocalTracks.indexOf(action.payload.trackId) === -1) {\n      newLocalTracks.push(action.payload.trackId)\n    }\n    return {\n      ...state,\n      localTracks: newLocalTracks\n    }\n  }\n}\n\nconst sessionReducer = handleActions(sessionReducers, {})\n\nconst specificSessionActions = combineActions(\n  actionTypes.SESSION_NEW_TRACK,\n  actionTypes.SESSION_TRACK_REMOVED,\n  actionTypes.SESSION_TRACK_ENDED,\n  actionTypes.SESSION_TRACK_REPLACED\n)\n\nreducers[specificSessionActions] = (state, action) => {\n  return state.map(session => {\n    if (session.id === action.payload.id) {\n      return sessionReducer(session, action)\n    } else {\n      return session\n    }\n  })\n}\n\n/*\n * Combine all of top-tier reducers into a single reducer,\n *      each with a default state of an empty array.\n */\nconst reducer = handleActions(reducers, [])\nexport default reducer\n","// Webrtc plugin.\nimport * as actionTypes from '../actionTypes'\n\n// Libraries.\nimport { handleActions } from 'redux-actions'\nimport { concat, remove } from 'lodash/fp'\n\nconst reducers = {}\n\n// Add the new Track to state.\nreducers[actionTypes.TRACK_ADDED] = {\n  next (state, action) {\n    return concat(state, action.payload)\n  }\n}\n\n// Remove the ended Track from state.\nreducers[actionTypes.TRACK_REMOVED] = {\n  next (state, action) {\n    const removeTrack = track => track.trackId === action.payload.trackId\n    return remove(removeTrack)(state)\n  }\n}\n\n// Store the selector used for rendering the track.\nreducers[actionTypes.RENDER_TRACKS_FINISH] = {\n  next (state, action) {\n    return state.map(track => {\n      if (action.payload.trackIds.includes(track.trackId)) {\n        return {\n          ...track,\n          containers: concat(track.containers, action.payload.selector)\n        }\n      } else {\n        return track\n      }\n    })\n  }\n}\n\n// Remove the selector used for rendering the track.\nreducers[actionTypes.REMOVE_TRACKS_FINISH] = {\n  next (state, action) {\n    // TODO: Only remove one container (instead of all that match)?\n    const removeContainer = container => container === action.payload.selector\n    return state.map(track => {\n      if (action.payload.trackIds.includes(track.trackId)) {\n        return {\n          ...track,\n          containers: remove(removeContainer)(track.containers)\n        }\n      } else {\n        return track\n      }\n    })\n  }\n}\n\n// TODO: Update this on an action from the track channel?\nreducers[actionTypes.MUTE_TRACKS_FINISH] = {\n  next (state, action) {\n    return state.map(track => {\n      if (action.payload.trackIds.includes(track.trackId)) {\n        return {\n          ...track,\n          muted: true\n        }\n      } else {\n        return track\n      }\n    })\n  }\n}\n\nreducers[actionTypes.UNMUTE_TRACKS_FINISH] = {\n  next (state, action) {\n    return state.map(track => {\n      if (action.payload.trackIds.includes(track.trackId)) {\n        return {\n          ...track,\n          muted: false\n        }\n      } else {\n        return track\n      }\n    })\n  }\n}\n\nreducers[actionTypes.TRACK_SOURCE_MUTED] = {\n  next (state, action) {\n    return state.map(track => {\n      if (action.payload.trackIds.includes(track.trackId)) {\n        return {\n          ...track,\n          sourceMuted: true\n        }\n      } else {\n        return track\n      }\n    })\n  }\n}\n\nreducers[actionTypes.TRACK_SOURCE_UNMUTED] = {\n  next (state, action) {\n    return state.map(track => {\n      if (action.payload.trackIds.includes(track.trackId)) {\n        return {\n          ...track,\n          sourceMuted: false\n        }\n      } else {\n        return track\n      }\n    })\n  }\n}\n\n/*\n * Combine all of top-tier reducers into a single reducer,\n *      each with a default state of an empty array.\n */\nconst reducer = handleActions(reducers, [])\nexport default reducer\n","/**\n * Retrieves media devices available on the system.\n * @method getDevices\n * @param  {Object} state Redux state.\n * @return {Object}\n */\nexport function getDevices (state) {\n  return state.webrtc.devices\n}\n\n/**\n * Session selectors.\n */\nexport function getSessions (state) {\n  return state.webrtc.sessions\n}\n\nexport function getSessionById (state, sessionId) {\n  return getSessions(state).find(session => session.id === sessionId)\n}\n\n/**\n * Track selectors.\n */\nexport function getTracks (state) {\n  return state.webrtc.tracks\n}\n\nexport function getTrackById (state, trackId) {\n  return getTracks(state).find(track => track.trackId === trackId)\n}\n\n/**\n * Media selectors.\n * Handles retrieving data from the `state.webrtc.media` substate.\n */\n\n/**\n * Get the list of all media this session.\n * @method getMedia\n * @param  {Object} state Redux state.\n * @return {Array} A list of all media objects.\n */\nexport function getMedia (state) {\n  return state.webrtc.media\n}\n\n/**\n * Get a specific media object.\n * @method getMediaById\n * @param  {Object} state Redux state.\n * @param  {string} mediaId The media to retrieve.\n * @return {Object} A media object.\n */\nexport function getMediaById (state, mediaId) {\n  return getMedia(state).find(media => media.id === mediaId)\n}\n\n/**\n * Retrieves information about the browser.\n * @method getBrowserDetails\n * @param  {Object} state Redux state.\n * @return {Object}\n */\nexport function getBrowserDetails (state) {\n  return state.webrtc.browser\n}\n","// Webrtc plugin.\nimport * as mediaSagas from './media'\nimport * as logSagas from './logs'\nimport * as actionTypes from '../interface/actionTypes'\n\n// Other plugins.\nimport { HANDLERS_CHANGE, LEVELS_CHANGE } from '../../logs/interface/actionTypes'\nimport { getLevel } from '../../logs/interface/selectors'\n\n// Libraries.\nimport { call, select, takeEvery } from 'redux-saga/effects'\n\n/**\n * Track operations.\n */\n\n/**\n * Handle rendering Track objects.\n * @method renderTracks\n * @param  {Object} webRTC The webRTC stack.\n */\nexport function * renderTracks (webRTC) {\n  yield takeEvery(actionTypes.RENDER_TRACKS, mediaSagas.renderTracks, webRTC)\n}\n\n/**\n * Handle removing Track objects.\n * @method removeTracks\n * @param  {Object} webRTC The webRTC stack.\n */\nexport function * removeTracks (webRTC) {\n  yield takeEvery(actionTypes.REMOVE_TRACKS, mediaSagas.removeTracks, webRTC)\n}\n\n/**\n * Handle muting tracks.\n * @method muteTracks\n * @param  {Object} webRTC The webRTC stack.\n */\nexport function * muteTracks (webRTC) {\n  yield takeEvery(actionTypes.MUTE_TRACKS, mediaSagas.muteTracks, webRTC)\n}\n\n/**\n * Handle unmuting tracks.\n * @method unmuteTracks\n * @param  {Object} webRTC The webRTC stack.\n */\nexport function * unmuteTracks (webRTC) {\n  yield takeEvery(actionTypes.UNMUTE_TRACKS, mediaSagas.unmuteTracks, webRTC)\n}\n\n/**\n * Handle initialization of device(s).\n * @method initializeDevices\n * @param  {Object} webRTC The webRTC stack.\n */\nexport function * initializeDevices (webRTC) {\n  yield takeEvery(actionTypes.INITIALIZE_DEVICES, mediaSagas.initializeDevices, webRTC)\n}\n\n/**\n * Taker saga for \"change webrtc log level\" actions.\n * @method updateLogLevelEntry\n * @param  {Object} webRTC The webRTC stack.\n */\nexport function * updateLogLevelEntry (webRTC) {\n  yield takeEvery(LEVELS_CHANGE, logSagas.updateLogLevel, webRTC)\n}\n\n/**\n * Taker saga for \"change webrtc log handler\" actions.\n * @method updateLogHandlerEntry\n * @param  {Object} webRTC The webRTC stack.\n */\nexport function * updateLogHandlerEntry (webRTC) {\n  yield takeEvery(HANDLERS_CHANGE, logSagas.updateLogHandler, webRTC)\n}\n\n/**\n * Configure the WebRTC stack's log level on SDK initialization.\n *\n * Special-case saga: This functionality needs to be run when the SDK is\n *    initialized, but can't be part of the plugin's `init` saga. This is\n *    because it needs the level state to have been set in state, but that isn't\n *    guarenteed during the `init` saga. The order that plugins are loaded would\n *    affect this (logs would need to be before webrtc).\n * @method initLogLevel\n * @param  {Object} webRTC The webRTC stack.\n */\nexport function * initLogLevel (webRTC) {\n  // Get the WEBRTC logger's level.\n  const level = yield select(getLevel, 'WEBRTC')\n  // Call the \"set log level\" saga for the WEBRTC logger, pretending that we\n  //    received an action updating its level.\n  yield call(logSagas.updateLogLevel, webRTC, { payload: { WEBRTC: level } })\n}\n","// Libraries.\nimport { all, call } from 'redux-saga/effects'\n\n/**\n * Functionality saga for \"update webrtc log level\" actions.\n * @method updateLogLevel\n * @param  {Object} webRTC The WebRTC stack.\n * @param  {Object} action A \"log level change\" action.\n */\nexport function * updateLogLevel (webRTC, action) {\n  // If the WebRTC log level was changed, update the WebRTC stack's loggers.\n  if (action.payload.WEBRTC) {\n    yield call([webRTC.logs, 'setLevel'], action.payload.WEBRTC)\n    const loggers = yield call([webRTC.logs, 'getLoggers'])\n\n    yield all(loggers.map(logger => call([logger, 'setLevel'], action.payload.WEBRTC)))\n  }\n}\n\n/**\n * Functionality saga for \"update webrtc log handler\" actions.\n * @method updateLogHandler\n * @param  {Object} webRTC The WebRTC stack.\n * @param  {Object} action A \"log handler change\" action.\n */\nexport function * updateLogHandler (webRTC, action) {\n  // If the WebRTC log handler was changed, update the WebRTC stack's loggers.\n  if (action.payload.WEBRTC) {\n    yield call([webRTC.logs, 'setHandler'], action.payload.WEBRTC)\n    const loggers = yield call([webRTC.logs, 'getLoggers'])\n\n    yield all(loggers.map(logger => call([logger, 'setHandler'], action.payload.WEBRTC)))\n  }\n}\n","// Webrtc plugin.\nimport { trackActions, deviceActions } from '../interface/actions'\n\n// Other plugins.\nimport { logManager } from '../../logs'\n\n// Libraries.\nimport { call, put, all } from 'redux-saga/effects'\nimport { isUndefined } from 'lodash/fp'\n\nconst log = logManager.getLogger('MEDIA')\n\n/**\n * Render Tracks in a specified container.\n * @method renderTracks\n * @param  {Object} action A \"render tracks\" action.\n */\nexport function * renderTracks (webRTC, action) {\n  const { trackIds, selector, speakerId } = action.payload\n  log.info(`Rendering track(s) in element ${selector}.`, trackIds)\n\n  // Get the tracks that are to be rendered.\n  const tracks = yield call([webRTC.track, 'getTracks'], trackIds)\n  const filteredTracks = tracks.filter(track => !isUndefined(track))\n\n  // Render the tracks.\n  yield all(filteredTracks.map(track => call([track, 'renderIn'], selector, speakerId)))\n\n  log.info(\n    'Finished rendering track(s).',\n    filteredTracks.map(track => track.id)\n  )\n  // Report operation done.\n  yield put(\n    trackActions.renderTracksFinish(\n      filteredTracks.map(track => track.id),\n      {\n        selector\n      }\n    )\n  )\n}\n\n/**\n * Stop Tracks from being rendered in a specified container.\n * @method removeTracks\n * @param  {Object} action A \"remove tracks\" action.\n */\nexport function * removeTracks (webRTC, action) {\n  const { trackIds, selector } = action.payload\n  log.info(`Removing track(s) from element ${selector}.`, trackIds)\n\n  // Get the tracks that are to be removed.\n  const allTracks = yield call([webRTC.track, 'getTracks'])\n  const tracks = allTracks.filter(track => trackIds.includes(track.id))\n\n  // Remove the tracks.\n  yield all(tracks.map(track => call([track, 'removeFrom'], selector)))\n\n  log.info(\n    'Finished removing track(s).',\n    tracks.map(track => track.id)\n  )\n  // Report operation done.\n  yield put(\n    trackActions.removeTracksFinish(\n      tracks.map(track => track.id),\n      {\n        selector\n      }\n    )\n  )\n}\n\n/**\n * Mute certain tracks.\n * @method muteTracks\n * @param  {Object} action\n * @param  {Array} action.payload A list of track IDs.\n */\nexport function * muteTracks (webRTC, action) {\n  log.info('Muting track(s).', action.payload)\n  // Get the tracks that are to be muted.\n  const allTracks = yield call([webRTC.track, 'getTracks'])\n  const tracks = allTracks.filter(track => action.payload.includes(track.id))\n\n  // Mute the tracks.\n  yield all(tracks.map(track => call([track, 'mute'])))\n\n  log.info(\n    'Finished muting track(s).',\n    tracks.map(track => track.id)\n  )\n  // Report operation done.\n  yield put(trackActions.muteTracksFinish(tracks.map(track => track.id)))\n}\n\n/**\n * Unmute certain tracks.\n * @method unmuteTracks\n * @param  {Object} action\n * @param  {Array} action.payload A list of track IDs.\n */\nexport function * unmuteTracks (webRTC, action) {\n  log.info('Unmuting track(s).', action.payload)\n\n  // Get the tracks that are to be unmuted.\n  const allTracks = yield call([webRTC.track, 'getTracks'])\n  const tracks = allTracks.filter(track => action.payload.includes(track.id))\n\n  // Unmute the tracks.\n  yield all(tracks.map(track => call([track, 'unmute'])))\n\n  log.info(\n    'Finished unmuting track(s).',\n    tracks.map(track => track.id)\n  )\n  // Report operation done.\n  yield put(trackActions.unmuteTracksFinish(tracks.map(track => track.id)))\n}\n\n/* Initialize the media devices.\n * @method initializeDevices\n * @param  {Object} action\n * @param  {Oject} action.payload The media constraints\n */\nexport function * initializeDevices (webRTC, action) {\n  // Get the media devices available.\n  try {\n    const devices = yield call([webRTC.devices, 'setupDeviceInitialization'], action.payload)\n\n    if (devices.error) {\n      throw devices\n    } else {\n      log.info('Successfully initialized devices.', devices)\n      yield put(deviceActions.initializeDeviceFinish({ devices }))\n    }\n  } catch (error) {\n    log.info(`Encountered error while initializing devices: ${error.message}.`)\n    yield put(deviceActions.initializeDeviceFinish({ error }))\n  }\n}\n","/**\n * Log levels supported by Loggers.\n * When a level is set, all logs of that level and higher will be logged.\n * @type {Object}\n */\nexport const logLevels = {\n  TRACE: 'TRACE',\n  DEBUG: 'DEBUG',\n  INFO: 'INFO',\n  WARN: 'WARN',\n  ERROR: 'ERROR',\n  SILENT: 'SILENT'\n}\n\n/**\n * Numeric values for each log level.\n * When a level is set, all logs of that level and higher will be logged.\n * @type {Object}\n */\nexport const levelValues = {\n  TRACE: 0,\n  DEBUG: 1,\n  INFO: 2,\n  WARN: 3,\n  ERROR: 4,\n  SILENT: 5\n}\n\n/**\n * Supported Log methods and their set log level; `<logMethod>: <logLevel>`\n * Used to construct the logging methods on a Logger.\n * @type {Object}\n */\nexport const logMethods = {\n  // Standard methods.\n  trace: logLevels.TRACE,\n  debug: logLevels.DEBUG,\n  info: logLevels.INFO,\n  warn: logLevels.WARN,\n  error: logLevels.ERROR,\n  // Extra console methods.\n  log: logLevels.DEBUG,\n  group: logLevels.DEBUG,\n  groupEnd: logLevels.DEBUG,\n  groupCollapsed: logLevels.DEBUG\n}\n\n/**\n * The log level for all timer methods.\n * @type {string}\n */\nexport const timeLevel = logLevels.DEBUG\n","import createManager from './logManager'\nimport { logLevels as levelImport } from './constants'\n\n/**\n * Package main.\n */\n\n// Main export is the manager's factory function.\nexport default createManager\n\n// Named export for the log level constants the package uses / expects.\nexport const logLevels = levelImport\n","/**\n * Default function for the SDK to use for logging.\n *    Uses entry information to form a prefix, then logs to console.\n * @method defaultLogHandler\n * @param  {LogEntry} entry\n */\nexport default function defaultLogHandler (entry) {\n  // Compile the meta info of the log for a prefix.\n  const { timestamp, level, target } = entry\n  let { method } = entry\n\n  // Find a short name to reference which Logger this log is from.\n  //    This is mostly to cut down the ID if it's too long for a human to read.\n  const shortId = target.id && target.id.length > 8 ? target.id.substring(0, 6) : target.id\n  const shortName = shortId ? `${target.type}/${shortId}` : target.type\n\n  const logInfo = `${timestamp} - ${shortName} - ${level}`\n\n  // Assume that the first message parameter is a string.\n  const [log, ...extra] = entry.messages\n\n  // For the time-related methods, don't actually use the console methods.\n  //    The Logger already did the timing, so simply log out the info.\n  if (method.includes('time')) {\n    method = 'debug'\n  }\n\n  console[method](`${logInfo} - ${log}`, ...extra)\n}\n","import createLogger from './logger'\nimport defaultLogHandler from './logHandler'\nimport { logLevels } from './constants'\nimport { checkLevel, checkHandler } from './validation'\n\nconst defaultType = Symbol('Default')\n\n/**\n * Creates a Log Manager.\n * @method createManager\n * @param  {Object}     [options={}]\n * @param  {Function}   [options.handler]      The default log handler used for\n *    Loggers that don't have a handler set.\n * @param  {string}     [options.level='INFO'] The default log level used for\n *    Loggers that don't have a level set.\n * @return {LogManager}\n */\nexport default function createManager (options = {}) {\n  const loggers = {}\n\n  /**\n   * Mapping between a Logger `type` and their default settings. Created Loggers\n   *    will use their `type` settings if they exist. Otherwise the \"global\"\n   *    options provided during Manager creation.\n   * @type {Object}\n   */\n  const settings = {\n    [defaultType]: {\n      handler: options.handler ? checkHandler(options.handler) : defaultLogHandler,\n      level: options.level ? checkLevel(options.level) : logLevels.INFO\n    }\n  }\n\n  /**\n   * Gets a specific logger. If the logger doesn't exist, a new one will be\n   *    created.\n   * @method getLogger\n   * @param  {string} type Human-readable type/name for the logger.\n   * @param  {string} [id] A unique identifier for the logger.\n   * @return {Logger}\n   */\n  function getLogger (type, id = '') {\n    id = String(id)\n\n    // Combine the name and ID to create the \"full\" logger name.\n    const loggerName = id ? `${type}-${id}` : type\n\n    let logger = loggers[loggerName]\n    // If the logger does not exist, create a new one.\n    if (!logger) {\n      // This logger logs items from a specific \"target\".\n      const target = { type, id, name: loggerName }\n      const options = {\n        level: getLevel(type),\n        handler: getHandler(type)\n      }\n\n      logger = createLogger(target, options)\n\n      // Save the new logger to be returned by future getter cals.\n      loggers[loggerName] = logger\n    }\n\n    return logger\n  }\n\n  /**\n   * Gets all created loggers, or Loggers of a specific type.\n   * @method getLoggers\n   * @param {string} [type] The type of Loggers to retrieve.\n   * @return {Array<Logger>} List of Loggers.\n   */\n  function getLoggers (type) {\n    if (type) {\n      return Object.values(loggers).filter(logger => logger.type === type)\n    } else {\n      return Object.values(loggers)\n    }\n  }\n\n  /**\n   * Sets the default `level` to be used when creating Loggers.\n   *\n   * Can set the level \"globally\" or per `type`, depending if `type` is provided\n   *    or not. When set for a specific type, only Loggers of that type will use\n   *    the set level. When set \"globally\", all Loggers without a set type will\n   *    use the level as a default.\n   *\n   * Setting the level only affects Loggers created after that point.\n   * @method setLevel\n   * @param  {string} type  The type of Logger to set the option for.\n   * @param  {string} level The logLevel to be set.\n   * @throws Throws an error if level is not a valid log level.\n   * @example\n   * const manager = createManager({ level: logLevels.WARN })\n   *\n   * // Setting the level for a type sets it for created Loggers of that type.\n   * manager.setLevel('Call', logLevels.DEBUG)\n   * const logger1 = manager.getLogger('Call')\n   * // logger1.getLevel() === logLevels.DEBUG\n   *\n   * // Loggers created of types without a set level uses the Manager's level.\n   * const logger2 = manager.getLogger('Auth')\n   * // logger2.getLevel() === logLevels.WARN\n   *\n   * // Setting the level without a type changes the Manager's level.\n   * manager.setLevel(logLevels.INFO)\n   * const logger3 = manager.getLogger('Messaging')\n   * // logger3.getLevel() === logLevels.INFO\n   *\n   * // Setting the level for a type does not affect previously created Loggers.\n   * manager.setLevel('Auth', logLevels.INFO)\n   * // logger2.getLevel() !== logLevels.INFO\n   * // logger2.getLevel() === logLevels.WARN\n   */\n  function setLevel (type, level) {\n    // Signature can be: `setLevel(type, level)` or `setLevel(level)`.\n    // Normalize the parameters to always be consistent.\n    if (level === undefined) {\n      level = type\n      type = defaultType\n    }\n\n    // Ensure `settings[type]` is an object.\n    if (!settings[type]) {\n      settings[type] = {}\n    }\n\n    // Set the level.\n    settings[type].level = checkLevel(level)\n  }\n\n  /**\n   * Gets the default `level` that is used when creating Loggers.\n   *\n   * Can get the level used \"globally\" or per `type`, depending if `type` is\n   *    provided or not.\n   *\n   * See the `setLevel` API for setting these values.\n   * See the Logger APIs for getting this value for an already created Logger.\n   * @method getLevel\n   * @param  {string} [type] A type of Logger.\n   * @return {LogLevel}\n   * @example\n   * const manager = createManager({ level: logLevels.WARN })\n   *\n   * // If a type's level has not been set, gets the \"global\" level.\n   * // manager.getLevel('Call') === logLevels.WARN\n   *\n   * // If a type's level has been set, gets its level.\n   * manager.setLevel('Auth', logLevels.DEBUG)\n   * // manager.getLevel('Auth') === logLevels.DEBUG\n   *\n   * // Can get the \"global\" level.\n   * manager.setLevel(logLevels.INFO)\n   * // manager.getLevel() === logLevels.INFO\n   */\n  function getLevel (type) {\n    // Signature can be: `getLevel(type)` or `getLevel()`.\n    // Normalize the parameters to always be consistent.\n    type = type || defaultType\n\n    return (settings[type] && settings[type].level) || settings[defaultType].level\n  }\n\n  /**\n   * Sets the default `handler` to be used when creating Loggers.\n   *\n   * Can set the handler \"globally\" or per `type`, depending if `type` is\n   *    provided or not. When set for a specific type, only Loggers of that type\n   *    will use the set handler. When set \"globally\", all Loggers without a set\n   *    type will use the handler as a default.\n   *\n   * Setting the handler only affects Loggers created after that point.\n   * @method setHandler\n   * @param  {string}     type    The type of Logger to set the option for.\n   * @param  {LogHandler} handler The log handler to be set.\n   * @throws Throws an error if handler is not a function.\n   * @example\n   * const manager = createManager({ handler: managerHandler })\n   *\n   * // Setting the handler for a type sets it for created Loggers of that type.\n   * manager.setHandler('Call', callHandler)\n   * const logger1 = manager.getLogger('Call')\n   * // logger1.getHandler() === callHandler\n   *\n   * // Loggers created of types without a set handler uses the Manager's handler.\n   * const logger2 = manager.getLogger('Auth')\n   * // logger2.getHandler() === managerHandler\n   *\n   * // Setting the handler without a type changes the Manager's handler.\n   * manager.setHandler(newHandler)\n   * const logger3 = manager.getLogger('Messaging')\n   * // logger3.getHandler() === newHandler\n   *\n   * // Setting the handler for a type does not affect previously created Loggers.\n   * manager.setHandler('Auth', authHandler)\n   * // logger2.getHandler() !== authHandler\n   * // logger2.getHandler() === managerHandler\n   */\n  function setHandler (type, handler) {\n    // Signature can be: `setHandler(type, handler)` or `setHandler(handler)`.\n    // Normalize the parameters to always be consistent.\n    if (typeof type === 'function' && handler === undefined) {\n      handler = type\n      type = defaultType\n    }\n\n    // Ensure `settings[type]` is an object.\n    if (!settings[type]) {\n      settings[type] = {}\n    }\n\n    // Set the handler.\n    settings[type].handler = checkHandler(handler)\n  }\n\n  /**\n   * Gets the default `handler` that is used when creating Loggers.\n   *\n   * Can get the handler used \"globally\" or per `type`, depending if `type` is\n   *    provided or not.\n   *\n   * See the `setHandler` API for setting these values.\n   * See the Logger APIs for getting this value for an already created Logger.\n   * @method getHandler\n   * @param  {string} [type] A type of Logger.\n   * @return {LogHandler}\n   * @example\n   * const manager = createManager({ handler: managerHandler })\n   *\n   * // If a type's handler has not been set, gets the \"global\" handler.\n   * // manager.getHandler('Call') === managerHandler\n   *\n   * // If a type's handler has been set, gets its handler.\n   * manager.setHandler('Auth', authHandler)\n   * // manager.getHandler('Auth') === authHandler\n   *\n   * // Can get the \"global\" handler.\n   * manager.setHandler(newHandler)\n   * // manager.getHandler() === newHandler\n   */\n  function getHandler (type) {\n    // Signature can be: `getHandler(type)` or `getHandler()`.\n    // Normalize the parameters to always be consistent.\n    type = type || defaultType\n\n    return (settings[type] && settings[type].handler) || settings[defaultType].handler\n  }\n\n  return {\n    getLogger,\n    getLoggers,\n    setLevel,\n    getLevel,\n    setHandler,\n    getHandler\n  }\n}\n","import { levelValues, logMethods, logLevels, timeLevel } from './constants'\nimport { checkLevel, checkHandler } from './validation'\nimport createTimer from './timer'\n\n/**\n * Creates a Logger.\n * @method createLogger\n * @param  {Object}   target          The subject of the logs from this logger.\n * @param  {Object}   options\n * @param  {Function} options.handler The function to receive/handle log entries.\n * @param  {string}   options.level   The log level to be set.\n * @return {Logger}\n */\nexport default function createLogger (target, options = {}) {\n  // Validate provided options. Do not let invalid options be set.\n  const level = checkLevel(options.level)\n  const handler = checkHandler(options.handler)\n\n  /**\n   * Logger data.\n   * @type {Object}\n   * @property {Object}   target  Metadata about the \"target\" of the Logger.\n   * @property {LogLevel} level   The currently set log level.\n   * @property {Function} handler The currently set Log Handler.\n   */\n  const logger = {\n    target,\n    level,\n    handler\n  }\n\n  /**\n   * Currying function to dynamically create the Logger's logging methods.\n   * @method logFunc\n   * @param  {string} method   Name of the logger method to create.\n   * @param  {string} logLevel The log level for the method.\n   * @param  {Object} [injectables] Other values to include in the LogEntry.\n   * @return {Function} A log method.\n   */\n  function logFunc (method, logLevel, injectables) {\n    /*\n     * Return the function that will be used as `log.<method>`.\n     */\n    return function (...args) {\n      // Compare the logged level and the configured level.\n      const shouldLog = levelValues[logLevel] >= levelValues[logger.level]\n      // If this entry shouldn't be logged, don't do anything.\n      if (!shouldLog) {\n        return\n      }\n\n      // Create the Log Entry to be handed off to the handler.\n      const entry = {\n        // Extra data to be added to the LogEntry.\n        ...injectables,\n        // Meta-info about the log.\n        method,\n        timestamp: Date.now(),\n        level: logLevel,\n        target: logger.target,\n        // The actual arguments logged.\n        messages: [...args]\n      }\n\n      logger.handler(entry)\n    }\n  }\n\n  /**\n   * Sets the Logger's current log level.\n   * @method setLevel\n   * @param  {string} level The logLevel to be set.\n   * @throws Throws an error if level is not a valid log level.\n   * @example\n   * logger.setLevel(logLevels.INFO)\n   * logger.info('This will be logged.')\n   * logger.debug('This will not be logged.')\n   */\n  function setLevel (level) {\n    logger.level = checkLevel(level)\n  }\n\n  /**\n   * Gets the Logger's current log level.\n   * @method getLevel\n   * @return {string} The log level.\n   * @example\n   * logger.setLevel(logLevels.DEBUG)\n   * const level = logger.getLevel()\n   * // level === logLevels.DEBUG\n   */\n  function getLevel () {\n    return logger.level\n  }\n\n  /**\n   * Sets the Logger's current log handler.\n   * @method setHandler\n   * @param  {Function} handler The log handler to be set.\n   * @throws Throws an error if handler is not a function.\n   * @example\n   * const logger = manager.getLogger('Test', '123')\n   * logger.setHandler((logEntry) => {\n   *    console.log(logEntry.target.name, ...logEntry.messages)\n   * })\n   * logger.info('I am a logged message.')\n   * // logs: \"Test-123 I am a logged message.\"\n   */\n  function setHandler (handler) {\n    logger.handler = checkHandler(handler)\n  }\n\n  /**\n   * Gets the Logger's current log handler.\n   * @method getHandler\n   * @return {Function} The log handler.\n   * @example\n   * logger.setHandler(customHandler)\n   * const handler = logger.getHandler()\n   * // handler === customHandler.DEBUG\n   */\n  function getHandler () {\n    return logger.handler\n  }\n\n  const api = {\n    getHandler,\n    setHandler,\n    getLevel,\n    setLevel,\n    get type () {\n      return logger.target.type\n    },\n    get id () {\n      return logger.target.id\n    },\n    get name () {\n      return logger.target.name\n    }\n  }\n\n  // For all supported log methods, create a function on the Logger for it.\n  for (const method in logMethods) {\n    api[method] = logFunc(method, logMethods[method])\n  }\n\n  // Create log functions for the Timer to use.\n  // Follows the same style as above logMethods, but curries it once more\n  //    to align the timer parameters as needed.\n  const timeLog = (message, data) => logFunc(data.event, timeLevel, { timer: data })(message)\n  const timeWarn = (message, data) => logFunc('warn', logLevels.WARN, { timer: data })(message)\n  const timer = createTimer(timeLog, timeWarn)\n\n  return {\n    ...api,\n    ...timer\n  }\n}\n","import { checkHandler } from './validation'\n\n/**\n * Timer factory function.\n * The Timer imitates the Console's Time APIs.\n * Ref: https://developer.mozilla.org/en-US/docs/Web/API/console#Timers\n * @method createTimer\n * @param  {Function} log  Function for logging timer information.\n * @param  {Function} warn Function for warning about timer misuse.\n * @return {Timer}\n */\nexport default function createTimer (log, warn) {\n  // Validate that params are a function.\n  //    Uses funtions as `log(message, data)`.\n  checkHandler(log)\n  checkHandler(warn)\n\n  /**\n   * Mapping of on-going timers; <name>: <start>.\n   * @type {Object}\n   */\n  const timers = {}\n\n  /**\n   * Starts a timer. Logs a message to indicate it was started.\n   * Logs a warning if the timer has already been started.\n   * @method timeStart\n   * @param  {string} name Name to identify the timer.\n   */\n  function time (name) {\n    const now = Date.now()\n    // Base info about this timer call.\n    const data = {\n      event: 'time',\n      name\n    }\n\n    if (timers.hasOwnProperty(name)) {\n      data.start = timers[name]\n      warn(`Timer ${name} already started.`, data)\n    } else {\n      // Set the new timer.\n      timers[name] = now\n\n      data.start = now\n      log(`Timer ${name} started.`, data)\n    }\n  }\n\n  /**\n   * Ends a timer. Logs a message with the elapsed time.\n   * @method timeEnd\n   * @param  {string} name Name to identify the timer.\n   */\n  function timeEnd (name) {\n    const now = Date.now()\n    // Base info about this timer call.\n    const data = {\n      event: 'timeEnd',\n      name,\n      start: timers[name]\n    }\n\n    if (timers.hasOwnProperty(name)) {\n      const start = timers[name]\n      // End the timer.\n      delete timers[name]\n\n      const elapsed = now - start\n      data.end = now\n      data.elapsed = elapsed\n\n      log(`Timer ${name} ended, taking ${elapsed}ms.`, data)\n    } else {\n      warn(`Timer ${name} has not been started.`, data)\n    }\n  }\n\n  /**\n   * Adds a split to the timer. Logs a message with the elapsed time so far.\n   * Logs a warning if the timer has not been started.\n   * @method timeSplit\n   * @param  {string} name Name to identify the timer.\n   */\n  function timeLog (name) {\n    const now = Date.now()\n    // Base info about this timer call.\n    const data = {\n      event: 'timeLog',\n      name,\n      start: timers[name]\n    }\n\n    if (timers.hasOwnProperty(name)) {\n      const elapsed = now - timers[name]\n      data.split = now\n      data.elapsed = elapsed\n\n      log(`Timer ${name} split, at ${elapsed}ms so far.`, data)\n    } else {\n      warn(`Timer ${name} has not been started.`, data)\n    }\n  }\n\n  return {\n    time,\n    timeEnd,\n    timeLog\n  }\n}\n","import { logLevels } from './constants'\n\n/**\n * Helper function to validate a \"log level\" string before its used in the library.\n * @method checkLevel\n * @param  {string} level A log level provided by a user.\n * @return {string}       The log level as expected by the library.\n * @throws Will throw an error if the `level` parameter is invalid.\n */\nexport function checkLevel (level) {\n  // Ensure: is defined and is a string.\n  const upperLevel = level && level.toUpperCase && level.toUpperCase()\n\n  // Ensure: is a supported log level.\n  if (upperLevel && logLevels[upperLevel]) {\n    return logLevels[upperLevel]\n  } else {\n    throw new Error('Provided level is not a valid log level.')\n  }\n}\n\n/**\n * Helper function to validate a \"log handler\".\n * Basically just \"is function\" that throws an error if false.\n * @method checkHandler\n * @param  {Function} handler A log handler function, ideally.\n * @return {Function}         The same log handler function, ideally.\n * @throws Will throw an error if the `handler` provided is not a function.\n */\nexport function checkHandler (handler) {\n  if (handler && typeof handler === 'function') {\n    return handler\n  } else {\n    throw new Error('Provided log handler is not a function.')\n  }\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex; // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n\n  return [bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]]].join('');\n}\n\nexport default bytesToUuid;","export { default as v1 } from './v1.js';\nexport { default as v3 } from './v3.js';\nexport { default as v4 } from './v4.js';\nexport { default as v5 } from './v5.js';","/*\n * Browser-compatible JavaScript MD5\n *\n * Modification of JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\nfunction md5(bytes) {\n  if (typeof bytes == 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = new Array(msg.length);\n\n    for (var i = 0; i < msg.length; i++) {\n      bytes[i] = msg.charCodeAt(i);\n    }\n  }\n\n  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));\n}\n/*\n * Convert an array of little-endian words to an array of bytes\n */\n\n\nfunction md5ToHexEncodedArray(input) {\n  var i;\n  var x;\n  var output = [];\n  var length32 = input.length * 32;\n  var hexTab = '0123456789abcdef';\n  var hex;\n\n  for (i = 0; i < length32; i += 8) {\n    x = input[i >> 5] >>> i % 32 & 0xff;\n    hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);\n    output.push(hex);\n  }\n\n  return output;\n}\n/*\n * Calculate the MD5 of an array of little-endian words, and a bit length.\n */\n\n\nfunction wordsToMd5(x, len) {\n  /* append padding */\n  x[len >> 5] |= 0x80 << len % 32;\n  x[(len + 64 >>> 9 << 4) + 14] = len;\n  var i;\n  var olda;\n  var oldb;\n  var oldc;\n  var oldd;\n  var a = 1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d = 271733878;\n\n  for (i = 0; i < x.length; i += 16) {\n    olda = a;\n    oldb = b;\n    oldc = c;\n    oldd = d;\n    a = md5ff(a, b, c, d, x[i], 7, -680876936);\n    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);\n    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n    b = md5gg(b, c, d, a, x[i], 20, -373897302);\n    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);\n    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n    d = md5hh(d, a, b, c, x[i], 11, -358537222);\n    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n    a = md5ii(a, b, c, d, x[i], 6, -198630844);\n    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n    a = safeAdd(a, olda);\n    b = safeAdd(b, oldb);\n    c = safeAdd(c, oldc);\n    d = safeAdd(d, oldd);\n  }\n\n  return [a, b, c, d];\n}\n/*\n * Convert an array bytes to an array of little-endian words\n * Characters >255 have their high-byte silently ignored.\n */\n\n\nfunction bytesToWords(input) {\n  var i;\n  var output = [];\n  output[(input.length >> 2) - 1] = undefined;\n\n  for (i = 0; i < output.length; i += 1) {\n    output[i] = 0;\n  }\n\n  var length8 = input.length * 8;\n\n  for (i = 0; i < length8; i += 8) {\n    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;\n  }\n\n  return output;\n}\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\n\n\nfunction safeAdd(x, y) {\n  var lsw = (x & 0xffff) + (y & 0xffff);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return msw << 16 | lsw & 0xffff;\n}\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\n\n\nfunction bitRotateLeft(num, cnt) {\n  return num << cnt | num >>> 32 - cnt;\n}\n/*\n * These functions implement the four basic operations the algorithm uses.\n */\n\n\nfunction md5cmn(q, a, b, x, s, t) {\n  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);\n}\n\nfunction md5ff(a, b, c, d, x, s, t) {\n  return md5cmn(b & c | ~b & d, a, b, x, s, t);\n}\n\nfunction md5gg(a, b, c, d, x, s, t) {\n  return md5cmn(b & d | c & ~d, a, b, x, s, t);\n}\n\nfunction md5hh(a, b, c, d, x, s, t) {\n  return md5cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction md5ii(a, b, c, d, x, s, t) {\n  return md5cmn(c ^ (b | ~d), a, b, x, s, t);\n}\n\nexport default md5;","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto != 'undefined' && typeof msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\nexport default function rng() {\n  if (!getRandomValues) {\n    throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n  }\n\n  return getRandomValues(rnds8);\n}","// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  var K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  var H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes == 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = new Array(msg.length);\n\n    for (var i = 0; i < msg.length; i++) {\n      bytes[i] = msg.charCodeAt(i);\n    }\n  }\n\n  bytes.push(0x80);\n  var l = bytes.length / 4 + 2;\n  var N = Math.ceil(l / 16);\n  var M = new Array(N);\n\n  for (var i = 0; i < N; i++) {\n    M[i] = new Array(16);\n\n    for (var j = 0; j < 16; j++) {\n      M[i][j] = bytes[i * 64 + j * 4] << 24 | bytes[i * 64 + j * 4 + 1] << 16 | bytes[i * 64 + j * 4 + 2] << 8 | bytes[i * 64 + j * 4 + 3];\n    }\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (var i = 0; i < N; i++) {\n    var W = new Array(80);\n\n    for (var t = 0; t < 16; t++) {\n      W[t] = M[i][t];\n    }\n\n    for (var t = 16; t < 80; t++) {\n      W[t] = ROTL(W[t - 3] ^ W[t - 8] ^ W[t - 14] ^ W[t - 16], 1);\n    }\n\n    var a = H[0];\n    var b = H[1];\n    var c = H[2];\n    var d = H[3];\n    var e = H[4];\n\n    for (var t = 0; t < 80; t++) {\n      var s = Math.floor(t / 20);\n      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[t] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nexport default sha1;","import rng from './rng.js';\nimport bytesToUuid from './bytesToUuid.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\n\nvar _clockseq; // Previous uuid creation time\n\n\nvar _lastMSecs = 0;\nvar _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    var seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nexport default v1;","import v35 from './v35.js';\nimport md5 from './md5.js';\nvar v3 = v35('v3', 0x30, md5);\nexport default v3;","import bytesToUuid from './bytesToUuid.js';\n\nfunction uuidToBytes(uuid) {\n  // Note: We assume we're being passed a valid uuid string\n  var bytes = [];\n  uuid.replace(/[a-fA-F0-9]{2}/g, function (hex) {\n    bytes.push(parseInt(hex, 16));\n  });\n  return bytes;\n}\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  var bytes = new Array(str.length);\n\n  for (var i = 0; i < str.length; i++) {\n    bytes[i] = str.charCodeAt(i);\n  }\n\n  return bytes;\n}\n\nexport var DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport var URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function (name, version, hashfunc) {\n  var generateUUID = function generateUUID(value, namespace, buf, offset) {\n    var off = buf && offset || 0;\n    if (typeof value == 'string') value = stringToBytes(value);\n    if (typeof namespace == 'string') namespace = uuidToBytes(namespace);\n    if (!Array.isArray(value)) throw TypeError('value must be an array of bytes');\n    if (!Array.isArray(namespace) || namespace.length !== 16) throw TypeError('namespace must be uuid string or an Array of 16 byte values'); // Per 4.3\n\n    var bytes = hashfunc(namespace.concat(value));\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      for (var idx = 0; idx < 16; ++idx) {\n        buf[off + idx] = bytes[idx];\n      }\n    }\n\n    return buf || bytesToUuid(bytes);\n  }; // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name;\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","import rng from './rng.js';\nimport bytesToUuid from './bytesToUuid.js';\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof options == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nexport default v4;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nvar v5 = v35('v5', 0x50, sha1);\nexport default v5;","import { PEER } from '../constants'\n\n/**\n * Configuration object for a Peer.\n * @typedef {Object} PeerConfig\n * @property {Object} [rtcConfig] Configuration for the native RTCPeerConnection.\n * @property {String} [trickleIceMode=FULL] The initial mode the Peer will use when receiving ICE candidates.\n * @property {Boolean} [removeBundling=false] Remove the a=group attribute to stop media bundling\n * @property {Function} [halfTrickleThreshold] Function that determines whether the threshold has been met when in HALF trickle mode.\n * @property {Number} [iceCollectionDelay=1000] The time (in ms) between ICE collection checks.\n * @property {Number} [maxIceTimeout=3000] Duration (in ms) that the Peer should wait for ICE candidate collection.\n * @property {Function} [iceCollectionCheck] The function to check whether enough ICE candidates\n *    have been collected to continue with negotiation. Must return a boolean value.\n */\nexport default {\n  rtcConfig: {\n    sdpSemantics: PEER.SDP_SEMANTICS.PLAN_B\n  },\n  trickleIceMode: PEER.TRICKLE_ICE.FULL,\n  removeBundling: false,\n  halfTrickleThreshold: isPassedHalfTrickleThreshold,\n  iceCollectionDelay: 1000,\n  maxIceTimeout: 3000,\n  iceCollectionCheck: iceCollectionCheck\n}\n\n/**\n * Default function for determining whether the HALF trickle ICE threshold has\n *    been met, to start trickling ICE candidates.\n * Defines the threshold as one relay candidate being gathered.\n * @method isPassedHalfTrickleThreshold\n * @param  {String}             sdp          The local SDP of the Peer.\n * @param  {RTCIceCandidate}    iceCandidate The native candidate object that triggered this check.\n * @param  {Number}             time         The amount of time (ms) since ICE collection began.\n * @return {Boolean} Whether the \"half trickle\" threshold has been passed.\n */\nfunction isPassedHalfTrickleThreshold ({ sdp, iceCandidate, time }) {\n  const passedHalf = iceCandidate.candidate.indexOf('relay') !== -1\n  return passedHalf\n}\n\n/**\n * Default function to determine if the ice candidates is enough to negotiate.\n * We assume that: at least one relay candidate is good enough to try negotiation.\n * @method iceCollectionCheck\n * @param {Array<RTCIceCandidate>} iceCandidates List of collected ICE candidates.\n * @return {Boolean} Whether the ice Candidates is enough for negotiation.\n */\nfunction iceCollectionCheck (iceCandidates) {\n  return iceCandidates.some(candidate => candidate.type === 'relay')\n}\n","import { PEER } from '../../constants'\n\n/**\n * Event wrapper for `icecandidate` event.\n * Reference: developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/onicecandidate\n * @method onicecandidate\n * @param  {Function} listener The listener function for the event.\n * @return {Boolean}  Whether the assignment succeeded or not.\n */\nexport default function onicecandidate (listener) {\n  const { nativePeer, proxyPeer, config, iceTimer, emitter, iceCandidates, log } = this\n\n  /**\n   * Intercept the PeerConnection onicecandidate event.\n   * Handle the candidate as defined by the current trickle ICE mode config.\n   * Trickle ICE scenarios:\n   *   - FULL: Trickle.\n   *   - HALF, pre-half: Wait for \"half\" or null candidate.\n   *   - HALF, post-half: Trickle.\n   *   - NONE: Wait for null candidate.\n   */\n  nativePeer.onicecandidate = event => {\n    log.debug(\n      `ICE candidate received (trickling?: ${config.trickleIceMode === PEER.TRICKLE_ICE.FULL}): `,\n      event.candidate\n    )\n\n    // Keep track of all candidates gathered by this collection process.\n    if (event.candidate !== null) {\n      iceCandidates.push(event.candidate)\n    }\n\n    if (config.trickleIceMode === PEER.TRICKLE_ICE.FULL) {\n      // If trickling is enabled, emit an event for every ICE candidate. The\n      //    Peer is already ready for negotiation at this point.\n      if (event.candidate) {\n        // Only trickle non-null (ie. actual) candidates.\n        listener(event)\n      }\n    } else if (event.candidate === null) {\n      // If we received the last candidate (null), then gathering is done and\n      //    Peer is ready for negotiation (no matter the scenario).\n      log.debug('ICE collection process complete; ready for negotiation.')\n\n      // Clear the candidate array without redefining it (it's a const).\n      iceCandidates.length = 0\n\n      emitter.emit('onnegotiationready')\n    } else if (config.trickleIceMode === PEER.TRICKLE_ICE.HALF) {\n      // For half trickle, only start trickling after a certain threshold.\n      //    Peer will be considered ready for negotiation after that point.\n      const haveHalf = config.halfTrickleThreshold({\n        sdp: proxyPeer.localDescription.sdp,\n        iceCandidate: event.candidate,\n        time: iceTimer.timeFromStart()\n      })\n\n      if (haveHalf) {\n        log.debug('Half ICE collection process complete; ready for negotiation.')\n        config.trickleIceMode = PEER.TRICKLE_ICE.FULL\n        emitter.emit('onnegotiationready')\n      } else {\n        log.debug(\"Peer's half trickle threshold not reached.\")\n      }\n    }\n  }\n\n  return true\n}\n","/**\n * Event wrapper for `iceconnectionstatechange` event.\n * Reference: developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/oniceconnectionstatechange\n * @method oniceconnectionstatechange\n * @param  {Function} listener The listener function for the event.\n * @return {Boolean}  Whether the assignment succeeded or not.\n */\nexport default function oniceconnectionstatechange (listener) {\n  const { nativePeer, log } = this\n\n  nativePeer.oniceconnectionstatechange = function (event) {\n    log.debug(`Peer received iceconnectionstatechange event: ${nativePeer.iceConnectionState}`)\n    listener(event)\n  }\n\n  return true\n}\n","import { PEER } from '../../constants'\n\n/**\n * Event wrapper for `icegatheringstatechange` event.\n * Reference: developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/onicegatheringstatechange\n * @method onicegatheringstatechange\n * @param  {Function} listener The listener function for the event.\n * @return {Boolean}  Whether the assignment succeeded or not.\n */\nexport default function onicegatheringstatechange (listener) {\n  const { nativePeer, iceTimer, log } = this\n\n  /**\n   * Intercept the PeerConnection onicegatheringstatechange event.\n   * Time how long ICE collection takes and handles scenarios when it takes\n   *    too long.\n   */\n  nativePeer.onicegatheringstatechange = event => {\n    const gatheringState = event.target.iceGatheringState\n    log.debug(`Peer iceGatheringState changed to ${gatheringState}.`)\n\n    if (gatheringState === PEER.ICE_GATHERING_STATE.GATHERING) {\n      iceTimer.start()\n      // TODO: Handle \"ICE collection taking too long\" scenario.\n    } else if (gatheringState === PEER.ICE_GATHERING_STATE.COMPLETE) {\n      log.debug(`Peer took ${iceTimer.timeFromStart()}ms to collect ICE candidates.`)\n      iceTimer.stop()\n    }\n    // Bubble the event up.\n    listener(event)\n  }\n\n  return true\n}\n","import onicecandidate from './icecandidate'\nimport oniceconnectionstatechange from './iceconnectionstatechange'\nimport onicegatheringstatechange from './icegatheringstatechange'\nimport onnegotiationneeded from './negotiationneeded'\nimport onsignalingstatechange from './signalingstatechange'\nimport ontrack from './track'\n\nexport default {\n  onicecandidate,\n  oniceconnectionstatechange,\n  onicegatheringstatechange,\n  onnegotiationneeded,\n  onsignalingstatechange,\n  ontrack\n}\n","/**\n * Event wrapper for `negotiationneeded` event.\n * Reference: developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/onnegotiationneeded\n * @method onnegotiationneeded\n * @param  {Function} listener The listener function for the event.\n * @return {Boolean}  Whether the assignment succeeded or not.\n */\nexport default function onnegotiationneeded (listener) {\n  const { nativePeer, log } = this\n\n  nativePeer.onnegotiationneeded = function (event) {\n    log.debug('Peer received negotiationneeded event.')\n    listener(event)\n  }\n\n  return true\n}\n","/**\n * Event wrapper for `signalingstatechange` event.\n * Reference: developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/onsignalingstatechange\n * @method onsignalingstatechange\n * @param  {Function} listener The listener function for the event.\n * @return {Boolean}  Whether the assignment succeeded or not.\n */\nexport default function onsignalingstatechange (listener) {\n  const { nativePeer, log } = this\n\n  nativePeer.onsignalingstatechange = function (event) {\n    log.debug(`Peer received signalingstatechange event: ${nativePeer.signalingState}`)\n    listener(event)\n  }\n\n  return true\n}\n","/**\n * Event wrapper for `track` event.\n * Reference: developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/ontrack\n * @method ontrack\n * @param  {Function} listener The listener function for the event.\n * @return {Boolean}  Whether the assignment succeeded or not.\n */\nexport default function ontrack (listener) {\n  const { nativePeer, trackManager, log } = this\n\n  nativePeer.ontrack = event => {\n    /**\n     * transceiver: The RTCRtpTransceiver for this remote track. (Available in unified-plan)\n     * receiver: The RTCRtpReceiver for this remote track.\n     * track: The remote MediaStreamTrack.\n     * streams: Array of MediaStreams the track is in.\n     */\n    // event object contains transceiver which already has track attached to its receiver\n    const { track: nativeTrack, streams } = event\n\n    // When remote side adds track on a previously unused transceiver sender via `replaceTrack`,\n    //  a stream is not associated with it so we get no stream here.\n    // So we create our own stream here.\n    // In the future, support will be available for `sender.setStreams` on the remote side\n    //  so this is a temporary workaround.\n    let targetStream\n    if (streams.length === 0) {\n      targetStream = new MediaStream([nativeTrack])\n    } else {\n      targetStream = streams[0]\n    }\n\n    // Convert the native MediaStreamTrack into a Track object.\n    const track = trackManager.add(nativeTrack, targetStream)\n\n    log.debug(`Peer received ${nativeTrack.kind} Track ${track.id}.`)\n    listener(track)\n  }\n\n  return true\n}\n","/*\n * Wrapper imports.\n * Events, methods, and properties that we want to wrap/add to the native Peer.\n */\nimport events from './events'\nimport methods from './methods'\nimport properties from './properties'\n\nimport { mergeValues } from '../utils'\nimport defaults from './config'\nimport { logManager } from '../logs'\n\n// Libraries.\nimport EventEmitter from 'eventemitter3'\nimport { createTimer } from './utils/timer'\n\n/**\n * Create a Proxied Peer.\n * This Peer is a native PeerConnection that has had some new functionality\n *    added and some existing functionality \"augmented\". Where an event, a\n *    method, or a property has been defined (see folders), we intercept/add\n *    that functionality.\n * @method peer\n * @return {Peer}\n */\nexport default function peer (id, config = {}, trackManager) {\n  const log = logManager.getLogger('Peer', id)\n  config = mergeValues(defaults, config)\n  log.info('Creating new Peer.')\n\n  const iceTimer = createTimer()\n  const emitter = new EventEmitter()\n\n  // Create the native Peer.\n  log.debug('Creating native PeerConnection.', config.rtcConfig)\n  const nativePeer = new RTCPeerConnection(config.rtcConfig, { optional: [{ googDscp: true }] })\n\n  // Add the event emitter methods to the wrapped methods as well.\n  const customMethods = {\n    ...methods,\n    on: emitter.on.bind(emitter),\n    off: emitter.off.bind(emitter),\n    once: emitter.once.bind(emitter)\n  }\n\n  /**\n   * The Peer model.\n   * @typedef {Peer}\n   * @property {RTCPeerConnection} peer     The native PeerConnection.\n   * @property {string}            id       The unique identifier for the Peer.\n   * @property {boolean}           dtlsRole The DTLS role selected for this PeerConnection. Set after the initial negotiation is completed.\n   * @property {Object}            trackManager Manager that tracks all MediaStreamTracks.\n   * @property {Object}            log      Logger specific to this Peer.\n   * @property {Object}            iceTimer Timer tool (specifically for ICE collection).\n   * @property {EventEmitter}      emitter\n   * @property {Array<RTCIceCandidate>} iceCandidates Gathered candidates.\n   */\n  const base = {\n    nativePeer,\n    proxyPeer: undefined,\n    id,\n    dtlsRole: null,\n    config,\n    trackManager,\n    log,\n    iceTimer,\n    emitter,\n    iceCandidates: []\n  }\n\n  /**\n   * Create the Proxy object that will be used as the PeerConnection.\n   *\n   * This will intercept all `get` and `set` operations and either forward them\n   *    directly to the real PeerConnection or to our wrapped operations.\n   * This allows us to shim part or all of the PeerConnection's API. We can\n   *    decide which operations we want to intercept while allowing others to\n   *    pass through unchanged.\n   */\n  base.proxyPeer = new Proxy(base, {\n    /**\n     * Intercept \"get\" calls on the Proxy.\n     * This function is called anytime a property on `base` is accessed,\n     *    eg. `base.someProp`\n     * @param {Object} target    base\n     * @param {string} prop      Property being accessed.\n     * @param {Object} receiver  The Proxy object.\n     */\n    get: function (target, prop, receiver) {\n      if (typeof base.nativePeer[prop] === 'function') {\n        /*\n         * If a function is being accessed, determine whether we want to\n         *    return the native function or our own.\n         */\n        if (Object.keys(customMethods).includes(prop)) {\n          // Return our wrapped version of the original function.\n          return customMethods[prop].bind(base)\n        } else {\n          // Return the original function, bound to have the original context.\n          return base.nativePeer[prop].bind(base.nativePeer)\n        }\n      } else if (customMethods[prop] && typeof customMethods[prop] === 'function') {\n        /*\n         * If a non-native function is being accessed, return our custom method.\n         * These are methods that are not on the native RTCPeerConnection\n         *    object, but we added to the old Peer model.\n         */\n        // TODO: Move all of this functionality to a higher level of abstraction.\n        return customMethods[prop].bind(base)\n      } else if (properties[prop]) {\n        /*\n         * If a PeerConnection property is being accessed, and we have a\n         *    wrapping for it, return our wrapper property.\n         */\n        if (typeof properties[prop] === 'function') {\n          // If our property wrapper is a function, call the function and return\n          //    the results.\n          return properties[prop].bind(base)()\n        } else {\n          // Otherwise, just return the original results.\n          return base.nativePeer[prop]\n        }\n      } else if (prop !== 'nativePeer' && base[prop]) {\n        /*\n         * If a Peer model property, other than the peer, is being accessed,\n         *    return it. The Peer model shouldn't have any properties that the\n         *    PeerConnection also has (to avoid conflicts).\n         */\n        return base[prop]\n      } else {\n        // Otherwise, return the property from the PeerConnection itself.\n        return base.nativePeer[prop]\n      }\n    },\n\n    /**\n     * Intercept \"set\" calls on the Proxy.\n     * This function is called anytime a property on `base` is assigned,\n     *    eg. `base.someProp = value`\n     * @method\n     * @param  {Object} target   base\n     * @param  {string} prop     Property being set.\n     * @param  {Any}    value    The value being set.\n     * @param  {Proxy}  receiver The Proxy object.\n     * @return {boolean}         Whether the assignment succeeded or not.\n     */\n    set: function (target, prop, value, receiver) {\n      if (events[prop]) {\n        // If a value is being set on one of our \"wrapped events\", then call\n        //    the \"event function\".\n        return events[prop].bind(base)(value)\n      } else if (prop === 'dtlsRole') {\n        /**\n         * Only allow the `dtlsRole` property of the Peer model be set. The\n         *    Session needs to be able to get/set this property, in the case\n         *    where it recreates the Peer multiple times, so it needs to set the\n         *    role to something specific.\n         * Reference: KAA-1816\n         */\n        base.dtlsRole = value\n        return true\n      } else {\n        // Otherwise, try to set the value on the native Peer.\n        return Reflect.set(base.nativePeer, prop, value)\n      }\n    }\n  })\n\n  /**\n   * For event debugging purposes, start with a dummy listener for every event.\n   *    This ensures our Proxy is listening for the events (in the case nothing\n   *    else is listening), so that debug information from the event wrappers\n   *    are logged.\n   */\n  for (const eventName in events) {\n    base.proxyPeer[eventName] = () => {}\n  }\n\n  return base.proxyPeer\n}\n","/**\n * Add an ICE candidate to the connection.\n * @method addIceCandidate\n * @param  {RTCIceCandidate} candidate A native candidate object.\n * @return {Promise} Resolves when the candidate is successfully added.\n */\nexport default function addIceCandidate (candidate) {\n  const { nativePeer, proxyPeer, id, log } = this\n  log.info('Adding ICE candidate.')\n\n  return new Promise((resolve, reject) => {\n    if (proxyPeer.remoteDescription.type && proxyPeer.remoteDescription.sdp) {\n      nativePeer\n        .addIceCandidate(candidate)\n        .then(resolve)\n        .catch(reject)\n    } else {\n      log.info('Cannot set remote ICE candidate without a remote description.')\n      // TODO: Better error.\n      reject(new Error(`Peer ${id} cannot set remote ICE candidate without a remote description.`))\n    }\n  })\n}\n","/**\n * Add a Track to the connection.\n * @method addTrack\n * @param  {Track} track A Track object.\n * @return {RTCRtpSender}\n */\nexport default function addTrack (track) {\n  const { nativePeer, log } = this\n  log.info(`Adding new ${track.track.kind} track.`)\n\n  let sender\n  try {\n    sender = nativePeer.addTrack(track.track, track.getStream())\n  } catch (err) {\n    // TODO: Better error handling.\n    log.info(`Failed to add track: ${err.message}`)\n  }\n  // TODO: What to return here? Probably shouldn't expose the rtpSender itself.\n  return sender\n}\n","/**\n * Clean the Peer by closing the RTCPeerConnection.\n * @method close\n */\nexport default function close () {\n  const { nativePeer, id, emitter, log } = this\n  log.info('Closing Peer.')\n\n  nativePeer.close()\n  emitter.emit('peer:closed', id)\n}\n","import { PEER } from '../../constants'\n\nimport { isUnifiedPlan } from '../../sdpUtils/sdpSemantics'\nimport { runPipeline } from '../../sdpUtils/pipeline'\nimport { removeTrickleIce, removeBundling, changeMediaDirection, preventDtlsRoleChange } from '../../sdpUtils/handlers'\n\n/**\n * Creates an SDP answer, given that a remote offer has been set.\n * @method createAnswer\n * @param  {RTCAnswerOptions} [options={}] Options used to customize the answer.\n * @param  {Object} [options.mediaDirections] Directions to use for media.\n * @param  {string} [options.mediaDirections.audio]\n * @param  {string} [options.mediaDirections.video]\n * @return {Promise} Resolves with the answer.\n */\nexport default function createAnswer (options = {}) {\n  const { nativePeer, config, dtlsRole, log } = this\n  log.info('Creating local answer.')\n\n  // If using unified-plan, remove options.mediaDirections.\n  // This is because directions are now set in transceivers.\n  if (isUnifiedPlan(config.rtcConfig.sdpSemantics)) {\n    delete options.mediaDirections\n  }\n\n  return new Promise((resolve, reject) => {\n    nativePeer\n      .createAnswer(options)\n      .then(answer => {\n        const sdpHandlers = []\n\n        /*\n         * Always include the `preventDtlsRoleChange` handler. This ensures\n         *    that the SDP's DTLS role does not change during a renegotiation.\n         */\n        sdpHandlers.push(preventDtlsRoleChange)\n\n        if (config.trickleIceMode === PEER.TRICKLE_ICE.NONE) {\n          // Modify the answer to claim the Peer doesn't support trickle ICE.\n          sdpHandlers.push(removeTrickleIce)\n        }\n        if (config.removeBundling) {\n          // Modify the offer to remove media bundling\n          sdpHandlers.push(removeBundling)\n        }\n        if (options.mediaDirections) {\n          // Modify the answer to set media directions as desired.\n          sdpHandlers.push(changeMediaDirection(options.mediaDirections))\n        }\n        if (sdpHandlers.length > 0) {\n          // Run the SDP pipeline with only these handlers.\n          answer.sdp = runPipeline(sdpHandlers, answer.sdp, {\n            type: answer.type,\n            endpoint: PEER.ENDPOINT.LOCAL,\n            dtlsRole: dtlsRole\n          })\n        }\n\n        log.info('Finished creating local answer.')\n        resolve(answer)\n      })\n      .catch(reject)\n  })\n}\n","import { PEER } from '../../constants'\n\nimport { isUnifiedPlan } from '../../sdpUtils/sdpSemantics'\nimport { runPipeline } from '../../sdpUtils/pipeline'\nimport { removeTrickleIce, removeBundling, changeMediaDirection } from '../../sdpUtils/handlers'\n\n/**\n * Creates an SDP offer.\n * @method createOffer\n * @param  {RTCOfferOptions} [options={}] Options used to customize the offer.\n * @param  {Object} [options.mediaDirections] Directions to use for media.\n * @param  {string} [options.mediaDirections.audio]\n * @param  {string} [options.mediaDirections.video]\n * @return {Promise} Resolves with the offer.\n */\nexport default function createOffer (options = {}) {\n  const { nativePeer, config, log } = this\n  log.info('Creating local offer.')\n\n  // If using unified-plan, remove options.mediaDirections.\n  // This is because directions are now set in transceivers.\n  if (isUnifiedPlan(config.rtcConfig.sdpSemantics)) {\n    delete options.mediaDirections\n  }\n\n  return new Promise((resolve, reject) => {\n    nativePeer\n      .createOffer(options)\n      .then(offer => {\n        const sdpHandlers = []\n        if (config.trickleIceMode === PEER.TRICKLE_ICE.NONE) {\n          // Modify the offer to claim the Peer doesn't support trickle ICE.\n          sdpHandlers.push(removeTrickleIce)\n        }\n        if (config.removeBundling) {\n          // Modify the offer to remove media bundling\n          sdpHandlers.push(removeBundling)\n        }\n        if (options.mediaDirections) {\n          // Modify the offer to set media directions as desired.\n          sdpHandlers.push(changeMediaDirection(options.mediaDirections))\n        }\n        if (sdpHandlers.length > 0) {\n          // Run the SDP pipeline with only these handlers.\n          offer.sdp = runPipeline(sdpHandlers, offer.sdp, {\n            type: offer.type,\n            endpoint: PEER.ENDPOINT.LOCAL\n          })\n        }\n\n        log.info('Finished creating local offer.')\n        resolve(offer)\n      })\n      .catch(reject)\n  })\n}\n","import { isUnifiedPlan } from '../../sdpUtils/sdpSemantics'\n\n/**\n * Finds a transceiver that can be reused.\n * A transceiver can be reused if it satisfies the following conditions:\n *   - it does not have a track on its sender\n *   - it has the same kind (audio or video) as what we specified\n *   - it has been used before (if it has not been used then we are not \"reusing\" it)\n * @method findReusableTransceiver\n * @param {string} kind The kind of transceiver to find (audio or video)\n * @returns {Object} Transceiver object that matches kind, has no sender track, and has currentDirection. Otherwise undefined.\n */\nexport default function findReusableTransceiver (kind) {\n  const { proxyPeer, config } = this\n\n  if (isUnifiedPlan(config.rtcConfig.sdpSemantics)) {\n    const transceivers = proxyPeer.getTransceivers()\n    return transceivers.find(\n      transceiver =>\n        transceiver.sender.track == null &&\n        transceiver.receiver &&\n        transceiver.receiver.track &&\n        transceiver.receiver.track.kind === kind &&\n        transceiver.currentDirection // If this has been set, then transceiver has been used before.\n    )\n  }\n}\n","/**\n * Retrieve a snapshot of the Peer object's current state.\n * @method getState\n * @return {Object}\n */\nexport default function getState () {\n  const { proxyPeer, config, id } = this\n\n  return {\n    id,\n    config: config,\n    localDesc: proxyPeer.localDescription,\n    signalingState: proxyPeer.signalingState,\n    localTracks: proxyPeer.localTracks,\n    remoteTracks: proxyPeer.remoteTracks,\n    senderTracks: proxyPeer.senderTracks\n  }\n}\n","/**\n * Retrieve RTCStatsReport for a sender or the peerConnection.\n * @method getStats\n * @param {string} [TrackId] Return stats for peerConnection if trackId is not provided\n * @return {Promise} Resolves with the RTCStatsReport\n */\nexport default function getStats (trackId) {\n  const { nativePeer, proxyPeer, log } = this\n  log.info(`Getting stats ${trackId ? 'for track.' : '.'}`)\n  // If no trackId is supplied, get the stats from the RTCPeerConnection. Otherwise, find an RTCSender\n  // associated with the trackId and get the stats from it.\n\n  // Use the trackId if it was provided\n  if (trackId) {\n    return new Promise((resolve, reject) => {\n      const senders = proxyPeer.getSenders()\n      // search for a sender associated with the trackId\n      const sender = senders.find(sender => sender.track.id === trackId)\n      if (sender) {\n        sender\n          .getStats()\n          .then(resolve)\n          .catch(reject)\n      } else {\n        const errMsg = `Cannot find sender with trackId: ${trackId}`\n        log.info(errMsg)\n        reject(new Error(errMsg))\n      }\n    })\n  } else {\n    // get the stats associated with the peerConnection if no trackId is supplied\n    return nativePeer.getStats()\n  }\n}\n","import addIceCandidate from './addIceCandidate'\nimport addTrack from './addTrack'\nimport close from './close'\nimport createAnswer from './createAnswer'\nimport createOffer from './createOffer'\nimport findReusableTransceiver from './findReusableTransceiver'\nimport getState from './getState'\nimport getStats from './getStats'\nimport removeTrack from './removeTrack'\nimport replaceTrack from './replaceTrack'\nimport sendDTMF from './sendDTMF'\nimport setLocalDescription from './setLocalDescription'\nimport setRemoteDescription from './setRemoteDescription'\nimport setTransceiversDirection from './setTransceiversDirection'\n\nconst methods = {\n  addIceCandidate,\n  addTrack,\n  close,\n  createAnswer,\n  createOffer,\n  findReusableTransceiver,\n  getState,\n  getStats,\n  removeTrack,\n  replaceTrack,\n  sendDTMF,\n  setLocalDescription,\n  setRemoteDescription,\n  setTransceiversDirection\n}\n\nexport default methods\n","/**\n * Remove a Track from the connection.\n * @method removeTrack\n * @param  {string} trackId An id for a Track object.\n */\nexport default function removeTrack (trackId) {\n  const { nativePeer, proxyPeer, log } = this\n  log.info(`Removing track ${trackId}.`)\n\n  const track = proxyPeer.senderTracks.find(track => track.id === trackId)\n  if (!track) {\n    log.info(`Invalid track ID ${trackId}; no such track found.`)\n    return\n  } else if (proxyPeer.signalingState === ' closed') {\n    log.info('Peer is closed; cannot remove track.')\n    return\n  }\n\n  // Get the RtpSender for the Track we want to remove.\n  const sender = proxyPeer\n    .getSenders()\n    .filter(sender => sender.track !== null)\n    .find(sender => sender.track.id === trackId)\n  nativePeer.removeTrack(sender)\n}\n","import { isUnifiedPlan } from '../../sdpUtils/sdpSemantics'\n\n/**\n * Replaces a specified transceiver's sender.track.\n * @method replaceTrack\n * @param {Object} newTrack The MediaStreamTrack we want to place into the sender.\n * @param {Object} options Options for specifying which transceiver's sender should be replaced. They are ordered by priority.\n * @param {Array} [options.trackId] The track id whose transceivers we want to set the direction of.\n * @return {Object} A Promise object which is fulfilled once the track has been replaced\n */\nexport default function replaceTrack (newTrack, options) {\n  const { proxyPeer, config, log } = this\n  log.info(`Replacing track ${options.trackId} with new ${newTrack.kind} track.`)\n\n  return new Promise((resolve, reject) => {\n    let sender\n    if (isUnifiedPlan(config.rtcConfig.sdpSemantics)) {\n      // Find the transceiver related to the provided track ID.\n      const targetTransceiver = proxyPeer\n        .getTransceivers()\n        .find(transceiver => transceiver.sender.track && transceiver.sender.track.id === options.trackId)\n\n      sender = targetTransceiver ? targetTransceiver.sender : undefined\n    } else {\n      sender = proxyPeer.getSenders().find(sender => sender.track.id === options.trackId)\n    }\n\n    if (sender) {\n      sender\n        .replaceTrack(newTrack)\n        .then(resolve)\n        .catch(error => {\n          log.info(`Failed to replace track; ${error.message}`)\n          reject(error)\n        })\n    } else {\n      log.info(`Failed to replace track; could not find track ${options.trackId}.`)\n      reject(new Error(`Sender for track ${options.trackId} not found.`))\n    }\n  })\n}\n","/**\n * Send DTMF tones.\n * @method sendDTMF\n * @param {Object} DTMFOptions The DTMF options.\n * @param {string} DTMFOptions.tone DTMF tone to send. Valid values are [0,1,2,3,4,5,6,7,8,9,#].\n * @param {number} DTMFOptions.duration=100 The amount of time, in milliseconds, that each DTMF tone should last.\n * @param {number} DTMFOptions.intertoneGap=70 The length of time, in milliseconds, to wait between tones.\n * @param {Object} [sendOptions] The send options.\n * @param {func} [sendOptions.callback] Optional callback for tone event .\n * @param {string} [sendOptions.trackId] The trackId of the sender to use.\n * @return {Boolean} Whether the DTMF tones were inserted\n */\nexport default function sendDTMF ({ tone, duration = 100, intertoneGap = 70 }, { callback, trackId }) {\n  const { proxyPeer, log } = this\n  log.info('Sending DTMF tones.', tone)\n\n  if (!proxyPeer.getSenders) {\n    log.info('Failed to send tones; getSenders is not supported by this browser.')\n    return false\n  }\n  const senders = proxyPeer.getSenders()\n  // Use the trackId if it was provided\n  if (trackId) {\n    const sender = senders.find(sender => sender.track.id === trackId)\n    if (!sender) {\n      log.info(`Failed to send tones; could not find track ${trackId}.`)\n      return false\n    }\n    insertDTMF(sender, tone, duration, intertoneGap, callback, log)\n    return true\n  } else {\n    let result\n    for (let i = 0; i < senders.length; i++) {\n      result = insertDTMF(senders[i], tone, duration, intertoneGap, callback, log)\n      if (result) {\n        return true\n      }\n    }\n\n    log.info('Failed to send tones; could not find an appropriate track.')\n    return false\n  }\n}\n\n/**\n * Helper function to sendDTMF tones .\n * @private\n * @method insertDTMF\n * @param {sender} object\n * @param {string} tone\n * @param {number} duration\n * @param {number} intertoneGap\n * @param {Function} callback\n */\nfunction insertDTMF (sender, tone, duration, intertoneGap, callback, log) {\n  /**\n   * Event handler when tone is played.\n   * @private\n   * @method handleToneChangeEvent\n   * @param  {event} event\n   */\n  function handleToneChangeEvent (event) {\n    if (event.tone !== '') {\n      log.debug('Tone played: ' + event.tone)\n    } else {\n      log.debug('All tones have played.')\n    }\n  }\n\n  if (sender.dtmf) {\n    const dtmfSender = sender.dtmf\n    if (callback) {\n      dtmfSender.ontonechange = callback\n    } else {\n      dtmfSender.ontonechange = handleToneChangeEvent\n    }\n    try {\n      dtmfSender.insertDTMF(tone, duration, intertoneGap)\n      return true\n    } catch (err) {\n      log.debug(err.message)\n      return false\n    }\n  } else {\n    log.debug('The sender requires DTMF which is not support by this browser.')\n    return false\n  }\n}\n","import { PEER } from '../../constants'\n\n// Utils.\nimport iceCollectionLoop from '../utils/iceCollectionLoop'\n\n/**\n * Sets an SDP as the local description of the connection.\n * The returned Promise will resolve when the Peer is ready for negotiation,\n *    taking into account the Peer's `trickleIceMode` configuration.\n * @method setLocalDescription\n * @param  {RTCSessionDescription} sessionDesc\n * @return {Promise}\n */\nexport default function setLocalDescription (desc) {\n  const { nativePeer, proxyPeer, config, id, emitter, iceTimer, log } = this\n\n  // TODO: SDP pipeline here.\n  log.info(`Setting local description ${desc.type} in ${proxyPeer.signalingState} state.`)\n  log.debug(`Setting local description ${desc.type}:`, desc.sdp)\n\n  /**\n   * Scenario: A local answer SDP is being applied to the Peer, but it does\n   *    not have a selected DTLS role yet. This should occur during initial\n   *    negotiation, before responding with this Peer's answer.\n   * Set the local Peer's DTLS role depending on what role was generated. This\n   *    role will be kept throughout all renegotiations.\n   */\n  if (!this.dtlsRole && desc.type === 'answer') {\n    const dtlsMatch = desc.sdp.match(/a=setup:(\\w*?)[\\r\\n]/)\n    if (dtlsMatch) {\n      log.debug(`Selecting DTLS role ${dtlsMatch[1]}.`)\n      this.dtlsRole = dtlsMatch[1]\n    }\n  }\n\n  return new Promise((resolve, reject) => {\n    // We always want to wait for the PeerConnection to be ready for\n    //    negotiation before resolving setLocalDescription.\n    // Each trickle ICE option (FULL/HALF/NONE) emits \"negotiation ready\" event once.\n    emitter.once('onnegotiationready', () => {\n      if (iceTimer.isStarted()) {\n        // In a HALF trickle scenario, the Peer will be ready for negotiation\n        //    before ICE collection has completed. Log that timing.\n        log.debug(`Took ${iceTimer.timeFromStart()}ms to collect ICE candidates before negotiation.`)\n      }\n      resolve()\n    })\n\n    nativePeer\n      .setLocalDescription(desc)\n      .then(() => {\n        log.info('Finished setting local description.')\n        log.debug(`State is now ${proxyPeer.signalingState}.`)\n\n        if (config.trickleIceMode === PEER.TRICKLE_ICE.FULL) {\n          // Trickling ICE candidates means that we can begin negotiation immediately.\n          log.debug('Ready for negotiation (full trickleICE).')\n          emitter.emit('onnegotiationready')\n        } else {\n          // ICE candidates aren't always gathered (only initially and when something\n          //    changes), but we rely on \"gathering complete\" to know when the Peer is\n          //    ready for negotiation. Give the Peer some time to start gathering\n          //    before deciding if we need to wait for gathering to complete or not.\n          // The timeout is needed because of a bug in Chrome:\n          //    https://bugs.chromium.org/p/webrtc/issues/detail?id=1873\n          // Known issue: If candidate collection takes less time than this timeout,\n          //    the logged message will be incorrect, but will functionally still work.\n          setTimeout(() => {\n            if (proxyPeer.iceGatheringState === 'complete') {\n              // Gathering is \"complete\", so we are ready for negotiation.\n              log.debug('Ready for negotiation; ICE candidate collection not needed.')\n              emitter.emit('onnegotiationready')\n            } else {\n              log.debug(`Waiting for ICE collection process (${config.trickleIceMode}).`)\n              // If ICE collection never finishes, we need to time it out at some point.\n              //    Start the timeout-out loop after an initial delay.\n              setTimeout(() => {\n                iceCollectionLoop(this, config.iceCollectionDelay)\n              }, config.iceCollectionDelay)\n            }\n          }, 25)\n        }\n      })\n      .catch(err => {\n        log.info('Failed to set local description.')\n        log.debug(`Peer ${id}: ${err}`)\n        // Parse native error. Make it more understand and/or\n        //    provide a better log about what went wrong.\n        reject(err)\n      })\n  })\n}\n","/**\n * Sets an SDP as the remote description of the connection.\n * @method setRemoteDescription\n * @param  {RTCSessionDescription} sessionDesc\n */\nexport default function setRemoteDescription (desc) {\n  const { nativePeer, proxyPeer, id, log } = this\n\n  // TODO: SDP pipeline here.\n  log.info(`Setting remote description ${desc.type} in ${proxyPeer.signalingState} state.`)\n  log.debug(`Setting remote description ${desc.type}:`, desc.sdp)\n\n  /**\n   * Scenario: A remote answer SDP is being applied to the Peer, but it does\n   *    not have a selected DTLS role yet. This should occur only when the\n   *    initial negotiation is being completed.\n   * Set the local Peer's DTLS role depending on what the remote Peer\n   *    selected. This role will be kept throughout all renegotiations.\n   */\n  if (!this.dtlsRole && desc.type === 'answer') {\n    const dtlsMatch = desc.sdp.match(/a=setup:(\\w*?)[\\r\\n]/)\n    if (dtlsMatch) {\n      const localRole = dtlsMatch[1] === 'active' ? 'passive' : 'active'\n      log.debug(`Selecting DTLS role ${localRole}. Remote Peer selected ${dtlsMatch[1]} DTLS role.`)\n      this.dtlsRole = localRole\n    }\n  }\n\n  // TODO: Update `config.trickleIceMode` to either NONE or FULL (from HALF)\n  //    depending on remote support, since HALF is only needed for initial.\n  return new Promise((resolve, reject) => {\n    nativePeer\n      .setRemoteDescription(desc)\n      .then(() => {\n        log.info('Finished setting remote description.')\n        log.debug(`State is now ${proxyPeer.signalingState}.`)\n        resolve()\n      })\n      .catch(err => {\n        log.info('Failed to set remote description.')\n        log.debug(`Peer ${id}: ${err}`)\n        // Parse native error. Make it more understand and/or\n        //    provide a better log about what went wrong.\n        reject(err)\n      })\n  })\n}\n","import { get } from 'lodash/fp'\nimport { isUnifiedPlan } from '../../sdpUtils/sdpSemantics'\nimport { setTransceiverDirection } from '../../sdpUtils/transceiverUtils'\n\n/**\n * Sets the direction of transceivers.\n * @method setTransceiversDirection\n * @param {string} targetDirection The desired direction to set the transceivers to.\n * @param {Object} [options] Options for specifying which transceivers should be affected. They are ordered by priority.\n * @param {Array} [options.trackIds] The optional list of track ids whose transceivers we want to set the direction of.\n * @return {Object} An object containing an `error` flag and  an array `failures` of transceivers whose directions weren't changed.\n */\nexport default function setTransceiversDirection (targetDirection, options = {}) {\n  const { proxyPeer, config, log } = this\n  log.info(`Setting transceiver direction to ${targetDirection}.`)\n\n  if (isUnifiedPlan(config.rtcConfig.sdpSemantics)) {\n    let transceivers = proxyPeer.getTransceivers()\n\n    if (options.trackIds) {\n      transceivers = transceivers.filter(transceiver => {\n        return (\n          options.trackIds.includes(get(['sender', 'track', 'id'], transceiver)) ||\n          options.trackIds.includes(get(['receiver', 'track', 'id'], transceiver))\n        )\n      })\n    }\n\n    const failures = []\n    transceivers.forEach(transceiver => {\n      if (!setTransceiverDirection(transceiver, targetDirection)) {\n        failures.push(transceiver)\n      }\n    })\n    return {\n      error: failures.length !== 0,\n      failures\n    }\n  } else {\n    log.info('Transceiver direction modification is only available in unified-plan.')\n    return {\n      error: true\n    }\n  }\n}\n","import localDescription from './localDescription'\nimport localTracks from './localTracks'\nimport remoteDescription from './remoteDescription'\nimport remoteTracks from './remoteTracksActive'\nimport remoteTracksAll from './remoteTracks'\nimport senderTracks from './senderTracks'\n\nexport default { localDescription, localTracks, remoteDescription, remoteTracks, remoteTracksAll, senderTracks }\n","/**\n * The SDP for the local end of the connection.\n * @method getLocalDescription\n */\nexport default function getLocalDescription () {\n  const { nativePeer, log } = this\n  log.info('Getting local description.')\n\n  const localDesc = nativePeer.localDescription\n  /*\n   * Ensure it is a RTCSessionDescription object.\n   * In some scenarios (based on browser?), it may return an empty object\n   *    instead of undefined when there is no local description.\n   * TODO: Determine if this is still needed, or if we can use the native\n   *    property directly.\n   */\n  if (localDesc && localDesc.sdp && localDesc.type) {\n    return localDesc\n  } else {\n    return undefined\n  }\n}\n","/**\n * @method getLocalTracks\n * @return {Array} List of active Track objects added to the Peer locally.\n */\nexport default function localTracks () {\n  const { proxyPeer, trackManager, log } = this\n  log.info('Getting local tracks.')\n\n  // Return the list of Tracks from active senders.\n  return (\n    proxyPeer\n      .getSenders()\n      /**\n       * Remove any Senders that do not have an associated track.\n       * We only want to retrieve Senders that do have tracks, because those are\n       *    the local tracks that have been added to the Peer.\n       * Senders without tracks are part of a Transceiver where the Receiver has\n       *    a remote track, but no local track has been added to it. We don't\n       *    care about this for the \"get local tracks\" operation.\n       */\n      .filter(sender => Boolean(sender.track))\n      .map(sender => trackManager.get(sender.track.id))\n      .filter(track => {\n        // Make sure the trackManager has the track and that its active.\n        // It's possble that Peer has the sender but not the actual track yet.\n        return track && track.getState().state === 'live' && track.getStream().active\n      })\n  )\n}\n","/**\n * The SDP for the remote end of the connection.\n * @method getRemoteDescription\n */\nexport default function getRemoteDescription () {\n  const { nativePeer, log } = this\n  log.info('Getting remote description.')\n\n  const remoteDesc = nativePeer.remoteDescription\n  /*\n   * Ensure it is a RTCSessionDescription object.\n   * In some scenarios (based on browser?), it may return an empty object\n   *    instead of undefined when there is no local description.\n   * TODO: Determine if this is still needed, or if we can use the native\n   *    property directly.\n   */\n  if (remoteDesc && remoteDesc.sdp && remoteDesc.type) {\n    return remoteDesc\n  } else {\n    return undefined\n  }\n}\n","/**\n * @method getRemoteTracks\n * @return {Array} List of active Track objects the Peer has received remotely.\n */\nexport default function getRemoteTracks () {\n  const { proxyPeer, trackManager, log } = this\n  log.info('Getting remote tracks.')\n\n  // Return the list of Tracks from active receivers.\n  return (\n    proxyPeer\n      .getReceivers()\n      /**\n       * Remove any Receivers that do not have an associated track.\n       * We only want to retrieve Receivers that do have tracks, because those are\n       *    the remote tracks that have been added to the Peer.\n       * Receivers without tracks are part of a Transceiver where the Sender has\n       *    a local track, but no remote track has been added to it. We don't\n       *    care about this for the \"get remote tracks\" operation.\n       */\n      .filter(receiver => Boolean(receiver.track))\n      .map(receiver => trackManager.get(receiver.track.id))\n      .filter(track => {\n        // Make sure the trackManager has the track\n        return track && track.getState().state === 'live'\n      })\n  )\n}\n","/**\n * @method getRemoteTracks\n * @return {Array} List of active Track objects the Peer has received remotely.\n */\nexport default function getRemoteTracks () {\n  const { proxyPeer, trackManager, log } = this\n  log.info('Getting remote tracks.')\n\n  // Return the list of Tracks from active receivers.\n  return (\n    proxyPeer\n      .getReceivers()\n      /**\n       * Remove any Receivers that do not have an associated track.\n       * We only want to retrieve Receivers that do have tracks, because those are\n       *    the remote tracks that have been added to the Peer.\n       * Receivers without tracks are part of a Transceiver where the Sender has\n       *    a local track, but no remote track has been added to it. We don't\n       *    care about this for the \"get remote tracks\" operation.\n       */\n      .filter(receiver => Boolean(receiver.track))\n      .map(receiver => trackManager.get(receiver.track.id))\n      .filter(track => {\n        // Make sure the trackManager has the track and that its active.\n        // It's possble that Peer has the receiver but not the actual track yet.\n        return track && track.getState().state === 'live' && track.getStream().active\n      })\n  )\n}\n","/**\n * This method is similar to the `localTracks` method, however this method returns\n *  all of the sender's tracks (ended or not) rather than just the active/live ones.\n *\n * @method senderTracks\n * @return {Array} List of Track objects added to the Peer locally.\n */\nexport default function senderTracks () {\n  const { proxyPeer, log } = this\n  log.info('Getting sender tracks.')\n\n  // Return the list of Tracks from senders.\n  return (\n    proxyPeer\n      .getSenders()\n      /**\n       * Remove any Senders that do not have an associated track.\n       * We only want to retrieve Senders that do have tracks, because those are\n       *    the local tracks that have been added to the Peer.\n       * Senders without tracks are part of a Transceiver where the Receiver has\n       *    a remote track, but no local track has been added to it. We don't\n       *    care about this for the \"get local tracks\" operation.\n       */\n      .filter(sender => Boolean(sender.track))\n      .map(sender => sender.track)\n  )\n}\n","/**\n * Recursive function for checking whether the ICE collection process should\n *    be timed-out.\n *\n * If the ICE collection process does not complete normally (or is just taking\n *    too long), there are two conditions where we want to timeout:\n *      1. ICE candidates collected so far are \"good enough\".\n *      2. We have reached the \"max timeout\".\n *\n * This function checks for these conditions at a configured interval. If either\n *    are met, \"manually\" triggers the \"ready for negotiation\" event.\n * @method iceCollectionLoop\n * @param {Object} proxyBase The \"base\" of the Proxy Peer object.\n * @param {number} elapsedTime The time, in milliseconds, that ICE collection has taken so far.\n */\nexport default function iceCollectionLoop (proxyBase, elapsedTime) {\n  const { proxyPeer, iceCandidates, emitter, config, log } = proxyBase\n\n  // If gathering completed during the delay, we don't need to loop anymore.\n  if (proxyPeer.iceGatheringState === 'complete') {\n    log.debug('ICE collection completed; stopping candidate check loop.')\n    // Gathering completes when the null candidate is received. The \"on\n    //    negotiation ready\" event should be emitted at that time.\n\n    // Clear the candidate array without redefining it (it's a const).\n    iceCandidates.length = 0\n    return\n  }\n\n  const enoughCandidates = config.iceCollectionCheck(iceCandidates)\n  const hasReachedTimeout = elapsedTime >= config.maxIceTimeout\n\n  if (hasReachedTimeout) {\n    log.debug('ICE collection timeout reached; continuing with negotiation.')\n    iceCandidates.length = 0\n    emitter.emit('onnegotiationready')\n  } else if (enoughCandidates) {\n    log.debug('ICE candidates sufficient for negotiation; continuing.')\n    iceCandidates.length = 0\n    emitter.emit('onnegotiationready')\n  } else {\n    log.debug(`ICE candidates not sufficient for negotiation, delaying another ${config.iceCollectionDelay}ms.`)\n    setTimeout(function () {\n      iceCollectionLoop(proxyBase, elapsedTime + config.iceCollectionDelay)\n    }, config.iceCollectionDelay)\n  }\n}\n","/**\n * Prototype for a timer object that can keep time and be stopped and started.\n */\nconst timerPrototype = {\n  /**\n   * Start the timer\n   * @returns {boolean} True if the timer was successfully started, false if it was already started.\n   */\n  start () {\n    if (!this.isStarted()) {\n      this._startTime = now()\n      return true\n    }\n    return false\n  },\n\n  /**\n   * Stops the timer\n   * @returns {boolean} True if the timer was successfully stopped, false if it was already stopped.\n   */\n  stop () {\n    if (this.isStarted()) {\n      this._startTime = undefined\n      return true\n    }\n\n    return false\n  },\n\n  /**\n   * @returns {boolean} True if the timer is started, false otherwise.\n   */\n  isStarted () {\n    return Boolean(this._startTime)\n  },\n\n  /**\n   * @returns {number} The time in milliseconds since the timer was started, or 0 if it wasn't started.\n   */\n  timeFromStart () {\n    return this.isStarted() ? now() - this._startTime : 0\n  }\n}\n\n/**\n * @returns A timestamp in milliseconds since the unix-epoch\n */\nfunction now () {\n  return new Date().getTime()\n}\n\n/**\n * Create a new timer object. Timers are not started when created and need to be started manualy.\n *\n * @returns {Object} The timer object that supports the timer interface.\n */\nexport function createTimer () {\n  return Object.create(timerPrototype)\n}\n","/**\n * Constants relating to the Peer model.\n */\nexport const PEER = {\n  TRICKLE_ICE: {\n    FULL: 'FULL',\n    HALF: 'HALF',\n    NONE: 'NONE'\n  },\n  // Defined by the RTCPeerConnection.iceGatheringState spec.\n  ICE_GATHERING_STATE: {\n    NEW: 'new',\n    GATHERING: 'gathering',\n    COMPLETE: 'complete'\n  },\n  ENDPOINT: {\n    LOCAL: 'local',\n    REMOTE: 'remote'\n  },\n  SDP_SEMANTICS: {\n    PLAN_B: 'plan-b',\n    UNIFIED_PLAN: 'unified-plan'\n  }\n}\n\n/**\n * SDP constants for media direction.\n * @type {Object}\n */\nexport const MEDIA_DIR = {\n  INACTIVE: 'inactive',\n  SEND_ONLY: 'sendonly',\n  RECV_ONLY: 'recvonly',\n  SEND_RECV: 'sendrecv'\n}\n","// Models.\nimport Track from '../models/track'\nimport Media from '../models/media'\nimport Peer from '../Peer'\n\n// Managers.\nimport MediaManager from '../managers/mediaManager'\nimport PeerManager from '../managers/peerManager'\nimport SessionManager from '../managers/sessionManager'\nimport DeviceManager from '../managers/deviceManager'\nimport TrackManager from '../managers/trackManager'\nimport WebRTCManager from '../managers/webrtcManager'\n\nimport { logManager } from '../logs'\n\n// SDP helpers.\nimport sdpPipeline from '../sdpUtils/pipeline'\nimport * as sdpHandlers from '../sdpUtils/handlers'\n\n// Utils\nimport { getBrowserDetails } from '../utils'\n\n/**\n * @returns An dictionary of features that are supported on this platform.\n */\nexport function getWebRTCSupportCapabilities () {\n  return {\n    mediaDevices: Boolean(navigator.mediaDevices),\n    peerConnection: Boolean(window.RTCPeerConnection)\n  }\n}\n\nexport default function initialize () {\n  const log = logManager.getLogger('WebRTC')\n\n  const browserDetails = getBrowserDetails()\n  if (browserDetails.version) {\n    log.debug(`Browser details: ${browserDetails.browser}, version ${browserDetails.version}.`)\n  } else {\n    log.debug('Browser details: Not supported by webRTC adapter.')\n  }\n\n  const deviceManager = new DeviceManager()\n  const trackManager = new TrackManager()\n  const mediaManager = new MediaManager({ trackManager })\n  const peerManager = new PeerManager({ trackManager })\n  const sessionManager = new SessionManager({\n    peerManager,\n    mediaManager,\n    trackManager\n  })\n  const webrtcManager = new WebRTCManager()\n\n  return {\n    models: {\n      Track,\n      Media,\n      Peer\n    },\n    // TODO: Make naming consistent.\n    managers: {\n      devices: deviceManager,\n      media: mediaManager,\n      peerManager: peerManager,\n      sessionManager,\n      track: trackManager,\n      // Give access to the Log Manager.\n      // TODO: Don't include it under managers. It's here now because of\n      //    ProxyStack annoyingness.\n      logs: logManager,\n      webrtcManager\n    },\n    sdp: {\n      pipeline: sdpPipeline,\n      handlers: sdpHandlers\n    },\n    // Export this on the webRTC stack for backwards compatibility.\n    getBrowserDetails\n  }\n}\n","import createManager from 'kandy-logger'\n\nconst manager = createManager({ level: 'DEBUG' })\nexport const logManager = manager\n","import { logManager } from '../logs'\n\n// Libraries.\nimport EventEmitter from 'eventemitter3'\n\n/*\n * A conversion from MediaDeviceInfo.kind values to their more common terms.\n * See: https://developer.mozilla.org/en-US/docs/Web/API/MediaDeviceInfo/kind\n * @enum {String}\n */\nexport const WEBRTC_DEVICE_KINDS = {\n  audioinput: 'microphone',\n  videoinput: 'camera',\n  audiooutput: 'speaker'\n}\n\n/**\n * Manager for connected devices.\n * Keeps an up-to-date list of all devices.\n * @class DeviceManager\n */\nexport default function DeviceManager () {\n  const log = logManager.getLogger('Manager', 'Device')\n\n  // Internal variables.\n  const emitter = new EventEmitter()\n  // Store each device type separately, so that `deviceId` is unique\n  //    per kind (there is a `default` deviceId per kind).\n  let microphone = []\n  let camera = []\n  let speaker = []\n\n  // Check devices on initialization.\n  checkDevices().then(() => {\n    // Emit an initial event to notify that devices are available.\n    emitter.emit('change')\n  })\n\n  // Check devices whenever they change.\n  let recentDeviceChange = false\n  navigator.mediaDevices.addEventListener('devicechange', () => {\n    log.info('Media device change detected.')\n    // A physical device change results in one event per\n    // device \"kind\". Group the events together.\n    if (!recentDeviceChange) {\n      recentDeviceChange = true\n      setTimeout(() => {\n        recentDeviceChange = false\n        checkDevices().then(() => {\n          // Emit an event to notify of the change.\n          emitter.emit('change')\n        })\n      }, 50)\n    }\n  })\n\n  /**\n   * Updates the stored device lists with the latest devices.\n   * @method checkDevices\n   * @return {Promise}\n   */\n  function checkDevices () {\n    log.info('Checking media devices.')\n    return new Promise((resolve, reject) => {\n      navigator.mediaDevices\n        .enumerateDevices()\n        .then(devices => {\n          // Clear the stored devices, to prevent duplicates.\n          microphone = []\n          camera = []\n          speaker = []\n          devices.forEach(device => {\n            const kind = WEBRTC_DEVICE_KINDS[device.kind]\n            switch (kind) {\n              case 'microphone':\n                microphone.push(device)\n                break\n              case 'camera':\n                camera.push(device)\n                break\n              case 'speaker':\n                speaker.push(device)\n                break\n            }\n          })\n          resolve(get())\n        })\n        .catch(reject)\n    })\n  }\n\n  /**\n   * Ask for permission and gets the list of available device(s) available from the end-user's devices.\n   * @method setupDeviceInitialization\n   * @param browserContraints\n   * @return {Object}\n   */\n\n  function setupDeviceInitialization (browserContraints) {\n    return new Promise((resolve, reject) => {\n      navigator.mediaDevices\n        .getUserMedia(browserContraints)\n        .then(mediaStream => {\n          mediaStream.getTracks().forEach(track => {\n            track.stop()\n          })\n          const devices = checkDevices()\n          resolve(devices)\n        })\n        .catch(reject)\n    })\n  }\n\n  /**\n   * Retrieves the stored device lists.\n   * @method get\n   * @return {Object}\n   */\n  function get () {\n    return {\n      microphone,\n      camera,\n      speaker\n    }\n  }\n\n  function on (...args) {\n    return emitter.on(...args)\n  }\n\n  function once (...args) {\n    return emitter.once(...args)\n  }\n\n  function off (...args) {\n    return emitter.off(...args)\n  }\n\n  /**\n   * The exposed API.\n   */\n  return {\n    checkDevices,\n    setupDeviceInitialization,\n    get,\n    on,\n    once,\n    off\n  }\n}\n","import { logManager } from '../logs'\n\n// Models that this manager directly manages.\nimport Media from '../models/media'\n\n// Libraries.\nimport EventEmitter from 'eventemitter3'\n\n/**\n * Manager for Media objects.\n * Allows the creation and retrieval of media objects.\n * @class MediaManager\n */\nexport default function MediaManager (managers) {\n  const log = logManager.getLogger('Manager', 'Media')\n\n  // Internal variables.\n  const trackManager = managers.trackManager\n  const medias = new Map()\n  const emitter = new EventEmitter()\n\n  /**\n   * Retrieve a snapshot of all Media objects' current state.\n   * @method getState\n   * @return {Array}\n   */\n  function getState () {\n    return getAll().map(id => get(id).getState())\n  }\n\n  /**\n   * Workaround to get Firefox to behave similarly to Chrome regarding device permission prompts.\n   * @method browserContraintsWorkaround\n   * @param  {MediaStreamConstraints}  constraints\n   * @return {Object}  media contraints\n   */\n\n  function browserContraintsWorkaround (constraints) {\n    /**\n     * Firefox workaround.\n     *\n     * Issue Summary: Browser behaviour for prompting the user for device\n     *    permissions is not consistent for consecutive gUM calls. The following\n     *    workaround makes it consistent if the less-specific constraint is\n     *    provided.\n     *\n     * Context: The `deviceId` constraint format can be either a string or an\n     *    object. The object format allows precise control over how the browser\n     *    should try to get the track. It can be specified to fail if it can't\n     *    fulfill the constraint (exact), or whether the constraint is \"best\n     *    effort\" (ideal). When the string format is given, it follows the\n     *    \"ideal\" behaviour.\n     * See: https://developer.mozilla.org/en-US/docs/Web/API/ConstrainDOMString\n     *\n     *  - When the \"ideal\" behaviour is followed and the user has not given\n     *      permission (and not disallowed), the browswer will prompt the user\n     *      for permission.\n     *  - [Issue] When the \"ideal\" behaviour is followed and the user has given\n     *      permission previously, the browser will not prompt the user for\n     *      permission.\n     *\n     * Problem: When gUM is called for a different device (ideal behaviour) than\n     *    permission was granted for previously, the browser will not prompt the\n     *    user to give permission for the (new) device. This results in gUM\n     *    using the original device for the new track.\n     *\n     * This happens on Firefox because the prompt for media permissions is\n     *    specific to a single device. For Chrome, the prompt is generic to any\n     *    device.\n     * If permissions are always allowed (\"remember my decision\" on Firefox or\n     *    default on Chrome), this issue wouldn't be seen.\n     *\n     * Workaround: When the behaviour (idea / exact) isn't specified, default\n     *    to exact (instead of letting the browser default to ideal; as per the\n     *    specification).\n     *\n     * This ensures that the browser always prompts the user to give permissions\n     *    for the device (if not already granted). It is also more in-line with\n     *    what might be expected when you ask for a certain device (ie. don't\n     *    return a different device unless it was specified that it's okay).\n     */\n    for (const kind in constraints) {\n      if (\n        constraints[kind] &&\n        typeof constraints[kind] === 'object' &&\n        typeof constraints[kind].deviceId === 'string'\n      ) {\n        // Don't allow a \"bare\" value be provided for deviceId. Change it to use\n        //    \"exact\".\n        const id = constraints[kind].deviceId\n        constraints[kind].deviceId = { exact: id }\n      }\n    }\n    return constraints\n  }\n\n  /**\n   * Wraps native mediaStream, adds tracks to trackManager and Media, and sets up event handlers on a given media.\n   * @method setupMedia\n   * @param {MediaStream} mediaStream Creating a Media object with it.\n   * @return {Media}\n   */\n\n  function setupMedia (mediaStream) {\n    const media = new Media(mediaStream, true)\n    log.debug(`Creating Media with ID: ${media.id}.`)\n\n    // Only add tracks to a Media objects using the `addTrack` method.\n    mediaStream.getTracks().forEach(nativeTrack => {\n      const wrappedTrack = trackManager.add(nativeTrack, mediaStream)\n      media.addTrack(wrappedTrack)\n    })\n\n    media.once('media:stopped', mediaId => {\n      remove(mediaId)\n    })\n\n    media.on('track:removed', trackId => {\n      if (media.tracks.size === 0) {\n        remove(media.id)\n      }\n    })\n\n    media.on('track:ended', ({ mediaId, trackId }) => {\n      if (media.getTracks().length === 0) {\n        remove(mediaId)\n      }\n    })\n\n    media.on('track:muted', ({ mediaId, trackId }) => {\n      // TBD: Add any extra behaviour (if needed) here\n    })\n\n    return media\n  }\n\n  /**\n   * Create a new local Media object.\n   * Use the provided constraints to get user media as the base MediaStream.\n   * @method createLocal\n   * @param  {MediaStreamConstraints}  constraints\n   * @return {Promise}\n   */\n  function createLocal (constraints) {\n    const constraintsWorkaround = browserContraintsWorkaround(constraints)\n\n    // Get user media, ...\n    return new Promise((resolve, reject) => {\n      // TODO: Proper error checking.\n      // TODO: Use the WebAPI directly here? Probably not.\n      navigator.mediaDevices\n        .getUserMedia(constraintsWorkaround)\n        .then(mediaStream => {\n          const media = setupMedia(mediaStream)\n\n          medias.set(media.id, media)\n          // TODO: Better event. Include metadata?\n          emitter.emit('media:new', media.id)\n\n          resolve(media)\n        })\n        .catch(reject)\n    })\n  }\n\n  /**\n   * Creates a new local Screen Media object.\n   * Use the provided constraints to get user media as the base MediaStream.\n   * @method createLocalScreen\n   * @param {MediaStreamConstraints} constraints\n   * @return {promise}\n   */\n\n  function createLocalScreen (constraints) {\n    const constraintsWorkaround = browserContraintsWorkaround(constraints)\n\n    return new Promise((resolve, reject) => {\n      navigator.mediaDevices\n        .getDisplayMedia(constraintsWorkaround)\n        .then(mediaStream => {\n          const media = setupMedia(mediaStream)\n\n          medias.set(media.id, media)\n          // TODO: Better event. Include metadata?\n          emitter.emit('media:new', media.id)\n\n          resolve(media)\n        })\n        .catch(reject)\n    })\n  }\n\n  /**\n   * Create a new remote Media object.\n   * Use provided stream/tracks as the base media objects.\n   * @method createRemote\n   * @param  {MediaStream} mediaStream Native MediaStream object.\n   * @param  {Tracks[]} tracks Array of Track objects.\n   * @return {Media}\n   */\n  function createRemote (stream, tracks = []) {\n    const media = new Media(stream, false)\n\n    tracks.forEach(track => {\n      media.addTrack(track)\n    })\n\n    media.once('media:stopped', mediaId => {\n      remove(mediaId)\n    })\n\n    media.on('track:removed', trackId => {\n      if (media.tracks.size === 0) {\n        remove(media.id)\n      }\n    })\n\n    media.on('track:ended', ({ mediaId, trackId }) => {\n      if (media.getTracks().length === 0) {\n        remove(mediaId)\n      }\n    })\n\n    medias.set(media.id, media)\n    // TODO: Better event. Include metadata?\n    emitter.emit('media:new', media.id)\n    return media\n  }\n\n  /**\n   * Removes a Media object from the medias array.\n   * @private\n   * @method remove\n   * @param {String} mediaId\n   */\n  function remove (mediaId) {\n    const media = get(mediaId)\n    if (media) {\n      medias.delete(mediaId)\n      emitter.emit('media:removed', mediaId)\n    }\n  }\n\n  /**\n   * Retrieve an existing Media object.\n   * @method get\n   * @param  {String} mediaId ID of the desired Media object.\n   * @return {Media}\n   */\n  function get (mediaId) {\n    const media = medias.get(mediaId)\n    if (!media) {\n      log.debug(`No media found with ID: ${mediaId}.`)\n    }\n    return media\n  }\n\n  /**\n   * Retrieve a list of all existing Media object's IDs.\n   * @method getAll\n   * @return {Array} List of Media IDs.\n   */\n  function getAll () {\n    return Array.from(medias.keys())\n  }\n\n  /**\n   * Finds the Media object that contains the specified Track.\n   * @method findTrack\n   * @param  {string}  trackId The ID of the Track to find.\n   * @return {string} The ID of the Media object that contains the Track.\n   */\n  function findTrack (trackId) {\n    // Search through all Media objects for the one that has the desired track.\n    const allMedia = Array.from(medias.values())\n    const media = allMedia.find(media => media.getTrack(trackId))\n    if (media) {\n      log.debug(`Found Media (${media.id}) with Track ${trackId}.`)\n      return media.id\n    } else {\n      log.debug(`Found no Media with Track ${trackId}.`)\n    }\n  }\n\n  function on (...args) {\n    return emitter.on(...args)\n  }\n\n  function once (...args) {\n    return emitter.once(...args)\n  }\n\n  function off (...args) {\n    return emitter.off(...args)\n  }\n\n  /**\n   * The exposed API.\n   */\n  return {\n    // Getter APIs.\n    get,\n    getAll,\n    getState,\n    findTrack,\n    // Create APIs.\n    createLocal,\n    createLocalScreen,\n    createRemote,\n    // Event APIs.\n    on,\n    once,\n    off\n  }\n}\n","import { logManager } from '../logs'\n\nimport Peer from '../Peer'\n\n// Libraries.\nimport { v4 as uuidV4 } from 'uuid'\nimport EventEmitter from 'eventemitter3'\n\n/**\n * Manager for Peer objects.\n * Allows the creation and retrieval of peer objects.\n * @method PeerManager\n */\nexport default function PeerManager (managers) {\n  const log = logManager.getLogger('Manager', 'Peer')\n\n  // Internal variables.\n  const trackManager = managers.trackManager\n  const peers = new Map()\n  const emitter = new EventEmitter()\n\n  /**\n   * Retrieve a snapshot of all Peer objects' current state.\n   * @method getState\n   * @return {Array}\n   */\n  function getState () {\n    return getAll().map(id => get(id).getState())\n  }\n\n  /**\n   * Create a new Peer using the provided configs.\n   * @method create\n   * @param  {Object} [config={}]\n   * @return {Peer}\n   */\n  function create (config = {}) {\n    const peer = new Peer(uuidV4(), config, trackManager)\n    peer.once('peer:closed', id => peers.delete(id))\n    peers.set(peer.id, peer)\n    emitter.emit('peer:new', peer.id)\n    return peer\n  }\n\n  /**\n   * Retrieves an existing Peer object.\n   * @method get\n   * @param  {String} id ID of the desired Peer object.\n   * @return {Peer}\n   */\n  function get (id) {\n    const peer = peers.get(id)\n    if (!peer) {\n      log.debug(`No Peer found with ID: ${id}.`)\n    }\n    return peer\n  }\n\n  /**\n   * Retrieve a list of all existing Peer object's IDs.\n   * @method getAll\n   * @return {Array} List of Peer IDs.\n   */\n  function getAll () {\n    return Array.from(peers.keys())\n  }\n\n  function on (...args) {\n    return emitter.on(...args)\n  }\n\n  function once (...args) {\n    return emitter.once(...args)\n  }\n\n  function off (...args) {\n    return emitter.off(...args)\n  }\n\n  /**\n   * The exposed API.\n   */\n  return {\n    getState,\n    get,\n    getAll,\n    create,\n    // Event APIs.\n    on,\n    once,\n    off\n  }\n}\n","import { logManager } from '../logs'\nimport Session from '../models/session'\n\n// Libraries.\nimport { v4 as uuidV4 } from 'uuid'\nimport EventEmitter from 'eventemitter3'\n\n/**\n * Manager for Session objects.\n * Allows for creation and retrieval of session objects.\n * @method SessionManager\n */\nexport default function SessionManager (managers) {\n  const log = logManager.getLogger('Manager', 'Session')\n  // Internal variables.\n  const sessions = new Map()\n  const emitter = new EventEmitter()\n\n  /**\n   * Create a new Session object.\n   * @method create\n   * @param {Object} [config]\n   * @param {Object} [config.peer] Configs for the Session's Peer object.\n   * @return {Session}\n   */\n  function create (config = {}) {\n    const session = new Session(uuidV4(), managers, config)\n    session.once('session:ended', id => {\n      sessions.delete(id)\n      emitter.emit('session:removed', id)\n    })\n    sessions.set(session.id, session)\n    emitter.emit('session:new', session.id)\n    return session\n  }\n\n  /**\n   * Retrieve an existing Session object.\n   * @method get\n   * @param  {String} sessionId ID of the desired Session object.\n   * @return {Session}\n   */\n  function get (sessionId) {\n    const session = sessions.get(sessionId)\n    if (!session) {\n      log.debug(`No session found with ID: ${sessionId}.`)\n    }\n    return session\n  }\n\n  /**\n   * Retrieve a list of all existing Sessions.\n   * @method getAll\n   * @return {Array} List of Media IDs.\n   */\n  function getAll () {\n    return Array.from(sessions.values())\n  }\n\n  function on (...args) {\n    return emitter.on(...args)\n  }\n\n  function once (...args) {\n    return emitter.once(...args)\n  }\n\n  function off (...args) {\n    return emitter.off(...args)\n  }\n\n  /**\n   * The exposed API.\n   */\n  return {\n    create,\n    get,\n    getAll,\n    on,\n    once,\n    off\n  }\n}\n","import Track from '../models/track'\n\n// Libraries.\nimport EventEmitter from 'eventemitter3'\n\n/**\n * Manager / store for Track objects.\n * @method TrackManager\n */\nexport default function TrackManager () {\n  /**\n   * The Track objects being managed.\n   * @type {Map}\n   */\n  const tracks = new Map()\n  const emitter = new EventEmitter()\n\n  /**\n   * Retrieve a Track object.\n   * @method get\n   * @param  {string} trackId\n   * @return {Track}\n   */\n  function get (trackId) {\n    return tracks.get(trackId)\n  }\n\n  /**\n   * Retrieve a list of Track objects.\n   * If no tracks are specified, will return all tracks.\n   * @method getTracks\n   * @param  {Array} [trackIds] List of tracks to retrieve.\n   * @return {Array}\n   */\n  function getTracks (trackIds) {\n    if (trackIds) {\n      return trackIds.map(trackId => tracks.get(trackId))\n    } else {\n      return Array.from(tracks.values())\n    }\n  }\n\n  /**\n   * Wraps a MediaStreamTrack into a Track object and adds\n   *    it to the manager.\n   * @method add\n   * @param  {MediaStreamTrack} track A native track object.\n   * @param  {MediaStream} stream\n   * @return {Track} The added/wrapped Track object.\n   */\n  function add (track, stream) {\n    const targetTrack = tracks.get(track.id)\n\n    // Chrome issue: track.stream is outdated and needs to be updated to newStream.\n    // targetTrack.stream.active is false & targetTrack.stream.getTracks() gives us an empty array.\n    // stream.active is true & stream.getTracks() gives us the correct array of tracks.\n    // Set/update the new stream as the track's stream\n    if (targetTrack && !targetTrack.getStream().active && stream.active) {\n      // The track was previously registered and is being re-added with new stream\n      targetTrack.setStream(stream)\n      return targetTrack\n    } else if (targetTrack) {\n      // This track is already registered.\n      return targetTrack\n    } else {\n      // Wrap the track as a Track object.\n      const wrappedTrack = new Track(track, stream)\n      tracks.set(track.id, wrappedTrack)\n\n      // Remove the track from the manager when it ends.\n      wrappedTrack.once('ended', remove)\n\n      emitter.emit('add', wrappedTrack.id)\n      return wrappedTrack\n    }\n  }\n\n  /**\n   * Remove a Track from the manager.\n   * @method remove\n   * @param  {string} trackId\n   * @return {Boolean} Whether the Track existed (and hence removed).\n   */\n  function remove ({ trackId }) {\n    const track = get(trackId)\n    if (track) {\n      tracks.delete(trackId)\n      // Clean up any listeners.\n      track.off('ended', remove)\n      emitter.emit('remove', trackId)\n    }\n\n    return Boolean(track)\n  }\n\n  function on (...args) {\n    return emitter.on(...args)\n  }\n\n  function once (...args) {\n    return emitter.once(...args)\n  }\n\n  function off (...args) {\n    return emitter.off(...args)\n  }\n\n  /**\n   * The exposed API.\n   */\n  return {\n    get,\n    getTracks,\n    add,\n    remove,\n    on,\n    once,\n    off\n  }\n}\n","/**\n * \"Manager\" for general WebRTC functions.\n * @class WebRTCManager\n */\nexport default function WebRTCManager (managers) {\n  /**\n   * Retrieve the list of available and supported codecs based on the browser's capabilities for sending media.\n   * @method getAvailableCodecs\n   * @param {string} kind The kind of media of which to get the supported codecs of.\n   * @return {Array}\n   */\n  function getAvailableCodecs (kind) {\n    return RTCRtpSender.getCapabilities(kind).codecs\n  }\n  /**\n   * The exposed API.\n   */\n  return {\n    getAvailableCodecs\n  }\n}\n","import { logManager } from '../logs'\n\n// Libraries.\nimport EventEmitter from 'eventemitter3'\n\n/**\n * Object to represent a \"media\" object.\n * Wraps a MediaStream object.\n * @class Media\n * TODO: Rename to Stream? Would be more straight-forward since Tracks can be\n *    managed directly (with trackManager), instead of through a \"Media\" object.\n */\nexport default function Media (nativeStream, isLocal) {\n  const log = logManager.getLogger('Media', nativeStream.id)\n  log.info(`Creating new ${isLocal ? 'local' : 'remote'} Media.`)\n\n  // Internal variables.\n  const id = nativeStream.id\n  const stream = nativeStream\n  const emitter = new EventEmitter()\n\n  /**\n   * Mapping of the IDs of this Media object's tracks to the Track object.\n   * @type {Map}\n   */\n  const tracks = new Map()\n\n  stream.onremovetrack = event => {\n    tracks.delete(event.track.id)\n    emitter.emit('track:removed', event.track.id)\n  }\n\n  /**\n   * Retrieve a snapshot of the Media object's current state.\n   * @method getState\n   * @return {Object}\n   */\n  function getState () {\n    return {\n      id: id,\n      tracks: Array.from(tracks.values()).map(track => track.getState()),\n      isLocal: isLocal\n    }\n  }\n\n  /**\n   * Add a track to this Media object.\n   * @method addTrack\n   * @param {Track} track The Track object to add to the Media object.\n   */\n  function addTrack (track) {\n    if (tracks.has(track.id)) {\n      log.debug(`Track (${track.id}) is already in Media (${id}).`)\n      return\n    }\n\n    // Add the native MediaStreamTrack to the MediaStream.\n    stream.addTrack(track.track)\n    // Add the Track to the Media object.\n    tracks.set(track.id, track)\n\n    /**\n     * When a track ends, remove it from the Media object then clean it up.\n     */\n    track.on('ended', () => {\n      const removedTrack = removeTrack(track.id)\n      // Might be from old already deleted media which has no tracks anymore.\n      if (removedTrack) {\n        removedTrack.cleanup()\n        emitter.emit('track:ended', {\n          mediaId: id,\n          trackId: removedTrack.id\n        })\n      }\n    })\n    // TODO: Emit event or return result?\n    emitter.emit('track:new', {\n      mediaId: id,\n      trackId: track.id\n    })\n\n    /**\n     * When a track is muted, we generate our own internal event\n     */\n    track.on('muted', event => {\n      const wrappedTrack = getTrack(event.trackId)\n      if (wrappedTrack && wrappedTrack.track && wrappedTrack.track.muted) {\n        // Emit our internal event.\n        // Note that wrappedTrack.id is same as wrappedTrack.track & event.trackId\n        emitter.emit('track:muted', {\n          mediaId: id,\n          trackId: event.trackId\n        })\n      }\n    })\n\n    /**\n     * When a track is unmuted, we generate our own internal event\n     */\n    track.on('unmuted', event => {\n      const wrappedTrack = getTrack(event.trackId)\n      if (wrappedTrack && wrappedTrack.track && wrappedTrack.track.muted === false) {\n        // Emit our internal event.\n        // Note that wrappedTrack.id is same as wrappedTrack.track & event.trackId\n        emitter.emit('track:unmuted', {\n          mediaId: id,\n          trackId: event.trackId\n        })\n      }\n    })\n  }\n\n  /**\n   * Remove a track from the Media object.\n   * @private\n   * @method removeTrack\n   * @param  {string} trackId The Track to remove.\n   */\n  function removeTrack (trackId) {\n    const track = getTrack(trackId)\n    if (track) {\n      tracks.delete(trackId)\n      return track\n    }\n  }\n\n  /**\n   * Render all tracks of this Media object inside the specified element.\n   * @method renderIn\n   * @param  {HTMLElement} element The DOM element to be rendered in.\n   * @param  {String} [speakerId] The device ID to be used for audio output.\n   */\n  function renderIn (element, speakerId) {\n    getTracks().forEach(track => {\n      track.renderIn(element, speakerId)\n    })\n  }\n\n  /**\n   * Stop rendering all tracks of this Media object from the specified element.\n   * @method removeFrom\n   * @param  {HTMLElement} element The DOM element to be removed from.\n   */\n  function removeFrom (element) {\n    getTracks().forEach(track => {\n      track.removeFrom(element)\n    })\n  }\n\n  /**\n   * Moves the rendered Media object to only the specified element.\n   * @method moveTo\n   * @param  {HTMLElement} element The DOM element to be move to.\n   */\n  function moveTo (element) {\n    getTracks().forEach(track => {\n      track.moveTo(element)\n    })\n  }\n\n  /**\n   * Stop all Tracks within this Media object.\n   * @method stop\n   */\n  function stop () {\n    getTracks().forEach(track => {\n      track.stop()\n    })\n    emitter.emit('media:stopped', this.id)\n  }\n\n  /**\n   * Clean-up the Media object by stopping all Tracks and removing any rendered media.\n   * @method cleanup\n   */\n  function cleanup () {\n    getTracks().forEach(track => {\n      track.cleanup()\n    })\n    emitter.emit('media:stopped', this.id)\n  }\n\n  /**\n   * Retrieve the list of Track object this this Media object manages.\n   * @method getTracks\n   * @return {Array} The list of Track objects.\n   */\n  function getTracks () {\n    return Array.from(tracks.values())\n  }\n\n  /**\n   * Retrieve a specific Track object from within the Media object.\n   * @method getTrack\n   * @param  {String} trackId ID of the Track to retrieve.\n   * @return {Track}\n   */\n  function getTrack (trackId) {\n    return tracks.get(trackId)\n  }\n\n  function on (...args) {\n    return emitter.on(...args)\n  }\n\n  function once (...args) {\n    return emitter.once(...args)\n  }\n\n  function off (...args) {\n    return emitter.off(...args)\n  }\n\n  /**\n   * The exposed API.\n   */\n  return {\n    id,\n    tracks,\n    isLocal,\n    // Getter APIs.\n    getState,\n    getTracks,\n    getTrack,\n    // Create APIs.\n    addTrack,\n    // Render APIs.\n    renderIn,\n    removeFrom,\n    moveTo,\n    // Cleanup APIs.\n    stop,\n    cleanup,\n    // Event APIs.\n    on,\n    once,\n    off\n  }\n}\n","import { logManager } from '../logs'\n\n// Helpers.\nimport { PEER } from '../constants'\n\n// SDP Helpers.\nimport sdpPipeline from '../sdpUtils/pipeline'\nimport { isUnifiedPlan } from '../sdpUtils/sdpSemantics'\nimport { getSdpSessionId } from '../sdpUtils/extractors'\n\n// General Utils.\nimport { getBrowserDetails, mergeValues } from '../utils'\n\n// Libraries.\nimport EventEmitter from 'eventemitter3'\n\n/**\n * Object to represent a webRTC Session for a single peer.\n * \"Session\" being an abstraction of a webRTC connection between another peer.\n * Performs logic for initializing and connecting a peer connection.\n * Manages media added to / received from the peer connection.\n * @method Session\n */\nexport default function Session (id, managers, config = {}) {\n  const log = logManager.getLogger('Session', id)\n  log.info('Creating new Session.')\n  const sdpSemantics = config.peer && config.peer.rtcConfig && config.peer.rtcConfig.sdpSemantics\n  log.debug(`Session configured for ${sdpSemantics || 'default'} SDP semantics.`)\n\n  // Internal variables.\n  const sessionId = id\n  let peerId\n  const peerManager = managers.peerManager\n  const mediaManager = managers.mediaManager\n  const trackManager = managers.trackManager\n  const emitter = new EventEmitter()\n\n  // Session settings\n  const settings = {\n    dscpControls: {}\n  }\n\n  // This structure is used to remember the dtls role of a peer relative to some remote sdp.\n  // key: the remote sdp's session id (o= line).\n  // value: the dtls role that the current peer's local sdp has.\n  // This is needed because a remote SDP with the same sessionId as a previous one may reappear later on\n  //  (music-unhold scenario) and the roles will be expected to be the same.\n  const dtlsRoleRecord = new Map()\n\n  // The latest remote description successfully set, even if the Peer has\n  //    been recreated since it was set.\n  let latestRemoteDescription\n\n  // Create and initialize the peer\n  let peer = peerManager.create(config.peer)\n  if (peer) {\n    // The id of the created peer\n    peerId = peer.id\n    setupPeerEventHandlers(peer)\n  } else {\n    throw new Error(`Peer creation error in Session ${sessionId}.`)\n  }\n\n  /**\n   * Records the peer's dtlsRole if it hasn't been recorded yet and associates it with a remote sdp's sessionId.\n   * @method recordNewDtlsRole\n   */\n  function recordNewDtlsRole () {\n    const remoteSdpSessionId = getSdpSessionId(peer.remoteDescription.sdp)\n    if (!dtlsRoleRecord.get(remoteSdpSessionId)) {\n      dtlsRoleRecord.set(remoteSdpSessionId, peer.dtlsRole)\n    }\n  }\n\n  /**\n   * @property {Array} getLocalTracks List of active Track objects the Session has added locally.\n   */\n  function getLocalTracks () {\n    const peer = peerManager.get(peerId)\n    if (peer) {\n      return peer.localTracks\n    } else {\n      return []\n    }\n  }\n\n  /**\n   * @property {Array} getRemoteTracks List of active Track objects the Session has received remotely.\n   */\n  function getRemoteTracks () {\n    const peer = peerManager.get(peerId)\n    if (peer) {\n      return peer.remoteTracks\n    } else {\n      return []\n    }\n  }\n\n  /**\n   * Retrieve a snapshot of the Session object's current state.\n   * @method getState\n   * @return {Object}\n   */\n  function getState () {\n    return {\n      id: sessionId,\n      localTracks: getLocalTracks(),\n      remoteTracks: getRemoteTracks()\n    }\n  }\n\n  /**\n   * Setup a warm PeerConnection.\n   * @method warmup\n   */\n  function warmup () {}\n\n  /**\n   * Add Track objects to the Session.\n   * @method addTracks\n   * @param  {Array} tracks List of Track objects.\n   * @param  {Object} dscpTrackMapping Track - DSCPSettings map\n   */\n  function addTracks (tracks, dscpTrackMapping) {\n    const peer = peerManager.get(peerId)\n    // TODO: Better error handling?\n    if (peer) {\n      const addTrackOrReuseTransceiverPromises = tracks.map(track => {\n        return new Promise((resolve, reject) => {\n          // We try to find a reusable transceiver that we can attach the track to achieve the following:\n          // - Avoid transceiver pollution and needing to create a brand new transceiver to attach the track to.\n          // - Allow re-adding of the same track type that has been previously removed.\n          //   (This is so that we can still have re-adding of tracks when using the \"basic\" media API which imposes a 1-audio & 1-video limit)\n          const reusableTransceiver = peer.findReusableTransceiver(track.track.kind)\n\n          // If we can find a reusable transceiver, reuse it.\n          if (isUnifiedPlan(config.peer.rtcConfig.sdpSemantics) && reusableTransceiver) {\n            // Current limitations of transceiver reuse method:\n            // - We cannot attach the track's associated stream to the sender (lack of `sender.setStreams` support atm)\n            // So the local transceiver's sender track & remote transceiver's receiver track must have been used before so that it already has a stream attached to the sender.\n            // If the local transceiver's sender has not been used before, we should ideally be able to do the following:\n            // transceiver.sender.setStreams([<someStream>]) <- Not yet supported\n            // transceiver.sender.replaceTrack(<someTrack>)\n            // However, because of lack of support for `setStreams`, if we just tried to do `replaceTrack` on a transceiver that has not been used before,\n            //  the sender will not have a stream and the SDP generated will have no associated stream which can cuase issues such as not triggering events on the local stream during renegotiation.\n            // Once `setStreams` is supported, we can use the transceiver reuse method above even on transceivers that have not been used to send data before.\n            reusableTransceiver.sender\n              .replaceTrack(track.track)\n              .then(() => {\n                reusableTransceiver.direction = reusableTransceiver.direction === 'recvonly' ? 'sendrecv' : 'sendonly'\n                resolve(\n                  `Track (${track.track.kind} : ${track.id}) reused transceiver (mid: ${reusableTransceiver.mid}).`\n                )\n              })\n              .catch(err => {\n                log.error(err)\n                reject(err)\n              })\n          } else {\n            // To get around the current limitation described above, we use peerConnection's `addTrack` when we can't find a reusable transceiver.\n            // `addTrack` does one of the following when called:\n            // - Create a new transceiver and attaches the track and stream to the sender\n            // - Find and use an existing transceiver that has never been used to send data before and attach the track and stream to the sender.\n            peer.addTrack(track)\n            resolve(`Added track (${track.track.kind} : ${track.id}).`)\n          }\n        }).then(message => {\n          // Set event emitters and handlers\n          log.info(message)\n\n          // Indicate that the Session has a new Track.\n          emitter.emit('new:track', {\n            local: true,\n            trackId: track.id\n          })\n\n          settings.dscpControls = mergeValues(settings.dscpControls, dscpTrackMapping)\n\n          const media = mediaManager.get(track.getStream().id)\n          if (media) {\n            media.on('track:removed', trackId => {\n              emitter.emit('track:removed', {\n                local: true,\n                trackId: trackId\n              })\n            })\n          }\n\n          track.once('ended', ({ performRenegotiation }) => {\n            // If the PeerConnection is closed, we don't need to worry about\n            //    removing the track (and it would throw an error anyway).\n            if (peer.signalingState !== 'closed') {\n              peer.removeTrack(track.id)\n              emitter.emit('track:ended', {\n                local: true,\n                trackId: track.id,\n                performRenegotiation: performRenegotiation\n              })\n              // Remove track from session dscp settings\n              if (settings.dscpControls.hasOwnProperty(track.id)) {\n                log.debug(`Removing track ${track.id} from session dscp settings`)\n                delete settings.dscpControls[track.id]\n              }\n            }\n          })\n        })\n      })\n\n      return Promise.all(addTrackOrReuseTransceiverPromises)\n    }\n  }\n\n  /**\n   * Creates a local SDP offer.\n   * @method createOffer\n   * @param  {Object} [options] Options for configuring the SDP.\n   * @param  {Object} [options.mediaDirections] Directions to use for media.\n   * @param  {Array}  [options.sdpHandlers] SDP handlers for modifying the local offer.\n   * @return {Promise} Resolves with the offer.\n   */\n  function createOffer (options = {}) {\n    return new Promise((resolve, reject) => {\n      const peer = peerManager.get(peerId)\n      if (!peer) {\n        reject(new Error(`Peer not found in Session ${sessionId}.`))\n      }\n\n      // If using unified-plan, remove options.mediaDirections.\n      // This is because directions are now set in transceivers.\n      if (isUnifiedPlan(config.peer.rtcConfig.sdpSemantics)) {\n        if (options.mediaDirections) {\n          const audioTransceiverTargetDir = options.mediaDirections.audio\n          const videoTransceiverTargetDir = options.mediaDirections.video\n\n          if (audioTransceiverTargetDir) {\n            const localTrackIds = peer.localTracks.filter(track => track.track.kind === 'audio').map(track => track.id)\n            const remoteTrackIds = peer.remoteTracksAll\n              .filter(track => track.track.kind === 'audio')\n              .map(track => track.id)\n\n            const result = peer.setTransceiversDirection(audioTransceiverTargetDir, {\n              trackIds: [...localTrackIds, ...remoteTrackIds]\n            })\n            if (result.error) {\n              log.info(`Failed to process the following transceivers: ${result.failures}`)\n            }\n          }\n          if (videoTransceiverTargetDir) {\n            const localTrackIds = peer.localTracks.filter(track => track.track.kind === 'video').map(track => track.id)\n            const remoteTrackIds = peer.remoteTracksAll\n              .filter(track => track.track.kind === 'video')\n              .map(track => track.id)\n\n            const result = peer.setTransceiversDirection(videoTransceiverTargetDir, {\n              trackIds: [...localTrackIds, ...remoteTrackIds]\n            })\n            if (result.error) {\n              log.info(`Failed to process the following transceivers: ${result.failures}`)\n            }\n          }\n          delete options.mediaDirections\n        }\n      }\n\n      peer\n        .createOffer(options)\n        .then(offer => {\n          if (options.sdpHandlers || sdpPipeline.getHandlers().length) {\n            log.debug('Modifying local offer with SDP pipeline.')\n            offer.sdp = sdpPipeline.run(options.sdpHandlers, offer.sdp, {\n              type: offer.type,\n              endpoint: PEER.ENDPOINT.LOCAL\n            })\n          }\n\n          resolve(offer)\n        })\n        .catch(reject)\n    })\n  }\n\n  /**\n   * Sets a local SDP.\n   * @method setLocalDescription\n   * @param  {Object} description The description containing the SDP to set as the local description.\n   * @return {Promise} Resolves with the description.\n   */\n  function setLocalDescription (description) {\n    return new Promise((resolve, reject) => {\n      const peer = peerManager.get(peerId)\n      if (!peer) {\n        reject(new Error(`Peer not found in Session ${sessionId}.`))\n      }\n\n      peer\n        .setLocalDescription(description)\n        .then(() => {\n          // Record the peer's dtls role if setting a local answer.\n          if (description.type === 'answer') {\n            recordNewDtlsRole()\n          }\n\n          // Set any parameters on the peer's senders if applicable\n          setParameters()\n\n          // Resolve with the _current_ local description, which may be\n          //    different than the provided description due trickle ICE config.\n          resolve(peer.localDescription)\n        })\n        .catch(reject)\n    })\n  }\n\n  /**\n   * Sets parameters on the RTCRtpSenders\n   * @param {Object} mediaConstraints\n   */\n  function setParameters (mediaConstraints) {\n    // RTCRtpSender.setParameters is currently unsupported on Firefox (or atleast not supported as it should be)\n    if (getBrowserDetails().browser === 'firefox') {\n      log.debug('Setting sender parameters not supported on Firefox; skipping.')\n      return\n    }\n\n    const promises = []\n\n    // Set the DSCPControls (i.e., network priorities) if set in the session's settings\n    for (const trackId in settings.dscpControls) {\n      promises.push(\n        new Promise((resolve, reject) => {\n          log.debug(`Setting networkPriority ${settings.dscpControls[trackId]} for sender with track ${trackId}`)\n          setNetworkPriority(trackId, settings.dscpControls[trackId])\n            .then(resolve)\n            .catch(reject)\n        })\n      )\n    }\n\n    return Promise.all(promises)\n  }\n\n  /**\n   * Sets the networkPriority in the peer connection's sender's encodings.\n   * @method setNetworkPriority\n   * @param {string} trackId The track ID\n   * @param {string} networkPriority The network priority value to set\n   * @return {Promise} Resolves with the setParameters()\n   */\n  function setNetworkPriority (trackId, networkPriority) {\n    const peer = peerManager.get(peerId)\n    const senders = peer.getSenders()\n\n    // search for a sender associated with the provided track id\n    const sender = senders.find(sender => sender.track.id === trackId)\n    if (sender) {\n      // Need to perform a getParameters() prior to a setParameters()\n      const parameters = sender.getParameters()\n      parameters.encodings.forEach(encoding => {\n        encoding.networkPriority = networkPriority\n      })\n      return sender.setParameters(parameters)\n    } else {\n      const errMsg = `Cannot find sender associated with trackId: ${trackId}`\n      log.info(errMsg)\n      return Promise.reject(errMsg)\n    }\n  }\n\n  /**\n   * Generates (and sets) a local SDP offer.\n   * @method generateOffer\n   * @param  {Object} [options] Options for configuring the SDP.\n   * @param  {Object} [options.mediaDirections] Directions to use for media.\n   * @param  {Array}  [options.sdpHandlers] SDP handlers for modifying the local offer.\n   * @return {Promise} Resolves with the offer.\n   */\n  function generateOffer (options = {}) {\n    // Backwards compatibility: Create the offer and set it as one operation.\n    return new Promise((resolve, reject) => {\n      createOffer(options)\n        .then(setLocalDescription)\n        .then(resolve)\n        .catch(reject)\n    })\n  }\n\n  /**\n   * Replaces a specified transceiver's sender.track.\n   * @method replaceTrack\n   * @param {Object} newTrack The MediaStreamTrack we want to place into the sender.\n   * @param {Object} options Options for specifying which transceiver's sender should be replaced. They are ordered by priority.\n   * @param {String} [options.trackId] The transceiver with the specific sender.track.id.\n   * @param {String} [options.mid] The transceiver with the specific media id.\n   * @return {Object} A Promise object which is fulfilled once the track has been replaced\n   */\n  function replaceTrack (newTrack, options) {\n    const peer = peerManager.get(peerId)\n    const track = trackManager.get(newTrack.id)\n    return peer\n      .replaceTrack(track.track, options)\n      .then(() => {\n        // Setup handlers for the replaced track, same as adding a new track\n        const media = mediaManager.get(track.getStream().id)\n        if (media) {\n          media.on('track:removed', trackId => {\n            emitter.emit('track:removed', {\n              local: true,\n              trackId: trackId\n            })\n          })\n        }\n\n        track.once('ended', ({ performRenegotiation }) => {\n          // If the PeerConnection is closed, we don't need to worry about\n          //    removing the track (and it would throw an error anyway).\n          if (peer.signalingState !== 'closed') {\n            peer.removeTrack(track.id)\n            emitter.emit('track:ended', {\n              local: true,\n              trackId: track.id,\n              performRenegotiation: performRenegotiation\n            })\n            // Remove track from session dscp settings\n            if (settings.dscpControls.hasOwnProperty(track.id)) {\n              log.debug(`Removing track ${track.id} from session dscp settings`)\n              delete settings.dscpControls[track.id]\n            }\n          }\n        })\n\n        emitter.emit('track:replaced', {\n          oldTrackId: options.trackId,\n          trackId: newTrack.id\n        })\n      })\n      .catch(err => err)\n  }\n\n  /**\n   * Sets the direction of transceivers.\n   * @method setTransceiversDirection\n   * @param {String} targetDirection The desired direction to set the transceivers to.\n   * @param {Object} [options] Options for specifying which transceivers should be affected.\n   *  trackIds option has priority\n   * @param {Array} [options.trackIds] The optional list of track ids whose transceivers we want to set the direction of.\n   * @return {Object} An object containing an `error` flag and  an array `failures` of transceiver \"mid\"s whose directions weren't changed.\n   */\n  function setTransceiversDirection (targetDirection, options = {}) {\n    if (isUnifiedPlan(config.peer.rtcConfig.sdpSemantics)) {\n      const peer = peerManager.get(peerId)\n      return peer.setTransceiversDirection(targetDirection, options)\n    } else {\n      log.info('Transceiver direction modification is only available in unified-plan.')\n      return { error: true }\n    }\n  }\n\n  /**\n   * Processes (and sets) a remote SDP offer.\n   * @method processOffer\n   * @param  {RTCSessionDescription} offer\n   * @param  {Object} [options] Options for configuring the SDP.\n   * @param  {Array}  [options.sdpHandlers] SDP handlers for modifying the remote offer.\n   * @return {Promise}\n   */\n  function processOffer (offer, options = {}) {\n    return new Promise((resolve, reject) => {\n      const peer = peerManager.get(peerId)\n      if (!peer) {\n        reject(new Error(`Peer not found in Session ${sessionId}.`))\n      }\n\n      if (options.sdpHandlers || sdpPipeline.getHandlers().length) {\n        log.debug('Modifying remote offer with SDP pipeline.')\n        offer.sdp = sdpPipeline.run(options.sdpHandlers, offer.sdp, {\n          type: offer.type,\n          endpoint: PEER.ENDPOINT.REMOTE\n        })\n      }\n\n      peer\n        .setRemoteDescription(offer)\n        .then(() => {\n          // Set the offer as the latest remote description.\n          latestRemoteDescription = offer\n          resolve()\n        })\n        .catch(reject)\n    })\n  }\n\n  /**\n   * Creates a local SDP answer.\n   * @method createAnswer\n   * @param  {Object} [options] Options for configuring the SDP.\n   * @param  {Object} [options.mediaDirections] Directions to use for media.\n   * @param  {Array}  [options.sdpHandlers] SDP handlers for modifying the local answer.\n   * @return {Promise} Resolves with the answer.\n   */\n  function createAnswer (options = {}) {\n    return new Promise((resolve, reject) => {\n      const peer = peerManager.get(peerId)\n      if (!peer) {\n        reject(new Error(`Peer not found in Session ${sessionId}.`))\n      }\n\n      // If using unified-plan, remove options.mediaDirections.\n      // This is because directions are now set in transceivers.\n      if (isUnifiedPlan(config.peer.rtcConfig.sdpSemantics)) {\n        if (options.mediaDirections) {\n          const audioTransceiverTargetDir = options.mediaDirections.audio\n          const videoTransceiverTargetDir = options.mediaDirections.video\n\n          if (audioTransceiverTargetDir) {\n            const result = peer.setTransceiversDirection(audioTransceiverTargetDir, {\n              trackIds: peer.localTracks.filter(track => track.track.kind === 'audio').map(track => track.id)\n            })\n            if (result.error) {\n              log.info(`Failed to process the following transceivers: ${result.failures}`)\n            }\n          }\n          if (videoTransceiverTargetDir) {\n            const result = peer.setTransceiversDirection(videoTransceiverTargetDir, {\n              trackIds: peer.localTracks.filter(track => track.track.kind === 'video').map(track => track.id)\n            })\n            if (result.error) {\n              log.info(`Failed to process the following transceivers: ${result.failures}`)\n            }\n          }\n          delete options.mediaDirections\n        }\n      }\n\n      // Set the dtlsRole here if the following are true:\n      // - It previously existed for this specific remote sdp.\n      // - It hasn't been set on a recreated peer yet.\n      const remoteSdpSessionId = getSdpSessionId(peer.remoteDescription.sdp)\n      const previousDtlsRole = dtlsRoleRecord.get(remoteSdpSessionId)\n      if (!peer.dtlsRole && previousDtlsRole) {\n        peer.dtlsRole = previousDtlsRole\n      }\n\n      peer\n        .createAnswer(options)\n        .then(answer => {\n          if (options.sdpHandlers || sdpPipeline.getHandlers().length) {\n            log.debug('Modifying local answer with SDP pipeline.')\n            answer.sdp = sdpPipeline.run(options.sdpHandlers, answer.sdp, {\n              type: answer.type,\n              endpoint: PEER.ENDPOINT.LOCAL\n            })\n          }\n          resolve(answer)\n        })\n        .catch(reject)\n    })\n  }\n\n  /**\n   * Generates (and sets) a local SDP answer.\n   * @method generateAnswer\n   * @param  {Object} [options] Options for configuring the SDP.\n   * @param  {Object} [options.mediaDirections] Directions to use for media.\n   * @param  {Array}  [options.sdpHandlers] SDP handlers for modifying the local answer.\n   * @return {Promise} Resolves with the answer.\n   */\n  function generateAnswer (options = {}) {\n    // For backwards compatibility: Should use other APIs directly.\n    return new Promise((resolve, reject) => {\n      createAnswer(options)\n        .then(setLocalDescription)\n        .then(resolve)\n        .catch(reject)\n    })\n  }\n\n  /**\n   * Processes (and sets) a remote SDP answer.\n   * @method processAnswer\n   * @param  {RTCSessionDescription} answer\n   * @param  {Object} [options] Options for configuring the SDP.\n   * @param  {Array}  [options.sdpHandlers] SDP handlers for modifying the remote answer.\n   * @return {Promise}\n   */\n  function processAnswer (answer, options = {}) {\n    if (options.sdpHandlers || sdpPipeline.getHandlers().length) {\n      log.debug('Modifying remote answer with SDP pipeline.')\n      answer.sdp = sdpPipeline.run(options.sdpHandlers, answer.sdp, {\n        type: answer.type,\n        endpoint: PEER.ENDPOINT.REMOTE\n      })\n    }\n\n    return new Promise((resolve, reject) => {\n      const peer = peerManager.get(peerId)\n      if (!peer) {\n        reject(new Error(`Peer not found in Session ${sessionId}.`))\n      }\n\n      peer\n        .setRemoteDescription(answer)\n        .then(() => {\n          // Record the peer's dtls role.\n          recordNewDtlsRole()\n\n          // Set the answer as the latest remote description.\n          latestRemoteDescription = answer\n\n          resolve()\n        })\n        .catch(reject)\n    })\n  }\n\n  /**\n   * Add an ICE candidate from the remote endpoint.\n   * @method addIceCandidate\n   * @param  {RTCIceCandidate} candidate\n   * @param  {Object} [options]\n   * @param  {string} [options.label] The Peer to perform the operation on.\n   * @return {Promise}\n   */\n  function addIceCandidate (candidate, options = {}) {\n    return new Promise((resolve, reject) => {\n      const peer = peerManager.get(peerId)\n      if (!peer) {\n        reject(new Error(`Peer not found in Session ${sessionId}.`))\n      }\n\n      peer\n        .addIceCandidate(candidate)\n        .then(resolve)\n        .catch(reject)\n    })\n  }\n\n  /**\n   * End the Session.\n   * @method end\n   */\n  function end () {\n    log.info('Ending Session.')\n    const peer = peerManager.get(peerId)\n    if (peer) {\n      peer.close()\n    }\n    emitter.emit('session:ended', sessionId)\n  }\n\n  /**\n   * Removes specified Track objects from the Session.\n   * @method removeTrack\n   * @param  {Array} trackIds List of IDs of Track objects to remove.\n   */\n  function removeTracks (trackIds) {\n    const peer = peerManager.get(peerId)\n    if (peer) {\n      trackIds.forEach(trackId => {\n        if (getLocalTracks().findIndex(track => track.id === trackId) > -1) {\n          peer.removeTrack(trackId)\n          // Remove the track from the session dscp settings\n          if (settings.dscpControls.hasOwnProperty(trackId)) {\n            log.debug(`Removing track ${trackId} from session dscp settings`)\n            delete settings.dscpControls[trackId]\n          }\n        }\n      })\n    }\n  }\n\n  /**\n   * Send DTMF tones on specified Track object from the Session.\n   * @method sendDTMF\n   * @param {Object} options The DTMF options.\n   * @param {string} options.tone DTMF tone to send. Valid values are [0,1,2,3,4,5,6,7,8,9,#].\n   * @param {number} [options.duration=100] The amount of time, in milliseconds, that each DTMF tone should last.\n   * @param {number} [options.intertoneGap=70] The length of time, in milliseconds, to wait between tones.\n   * @param {Object} [sendOptions] The send options.\n   * @param {func} [sendOptions.callback] Optional callback for tone event .\n   * @param {string} [sendOptions.trackId] The trackId of the sender to use.\n   * @return {boolean} The success or fail indicator\n   */\n  function sendDTMF (DTMFOptions, sendOptions = {}) {\n    const peer = peerManager.get(peerId)\n    if (peer) {\n      return peer.sendDTMF(DTMFOptions, sendOptions)\n    } else {\n      return false\n    }\n  }\n\n  /**\n   * Retrieve RTCStatsReport from a sender.\n   * @method getStats\n   * @param  {string} trackId The track id associated with a sender.\n   * @return {Promise}\n   */\n  function getStats (trackId) {\n    return new Promise((resolve, reject) => {\n      const peer = peerManager.get(peerId)\n      if (!peer) {\n        reject(new Error(`Peer not found in Session ${sessionId}.`))\n        return\n      }\n      peer\n        .getStats(trackId)\n        .then(resolve)\n        .catch(reject)\n    })\n  }\n\n  function on (...args) {\n    return emitter.on(...args)\n  }\n\n  function once (...args) {\n    return emitter.once(...args)\n  }\n\n  function off (...args) {\n    return emitter.off(...args)\n  }\n\n  /**\n   * Sets up event handlers on a given peer.\n   * @method setupPeerEventHandlers\n   * @param {PeerConnection} targetPeer The peer to set event handlers on.\n   */\n  function setupPeerEventHandlers (targetPeer) {\n    // TODO: Use `uniqueLabel` when setting event listeners (and bubbling events).\n    // When the peer gets an ICE candidate, emit it as\n    //  a message to be sent to the other end.\n    targetPeer.onicecandidate = event => {\n      emitter.emit('onicecandidate', {\n        candidate: event.candidate\n      })\n    }\n\n    // Handle when the Peer receives a new remote track.\n    targetPeer.ontrack = track => {\n      let media = mediaManager.get(track.getStream().id)\n      if (media) {\n        // Add the new Track to its Media object.\n        media.addTrack(track)\n      } else {\n        // Create a new Media object using the Track.\n        media = mediaManager.createRemote(track.getStream(), [track])\n      }\n\n      media.on('track:removed', trackId => {\n        // This is used as a workaround for an issue that was noticed on Chrome 76 plan-b\n        //  (it may have already been happening in previous versions):\n        //  - the remote audio track's `ended` event does not fire when remote sdp comes in with `inactive` media (hold).\n        //  - the remote audio track's `ended` event fires when sdp comes in with `sendrecv` media (unhold).\n        // Only do manual remote track cleanup when plan-b.\n        // Doing so for unified-plan will make the new track in `ontrack` event come in an `ended` state.\n        if (!isUnifiedPlan(config.peer.rtcConfig.sdpSemantics)) {\n          const trackToCleanup = trackManager.get(trackId)\n          if (trackToCleanup) {\n            trackToCleanup.cleanup()\n            log.info(`Cleaning up track ${trackId}.`)\n          } else {\n            log.info(`Track ${trackId} not found.`)\n          }\n        }\n\n        emitter.emit('track:removed', {\n          local: false,\n          trackId: trackId\n        })\n      })\n\n      track.once('ended', () => {\n        emitter.emit('track:ended', {\n          local: false,\n          trackId: track.id,\n          // If a remote track is ended, we don't want to manually perform a renegotiation\n          performRenegotiation: false\n        })\n      })\n\n      const { kind } = track.getState()\n      log.info(`Received new track (${kind} : ${track.id})`)\n\n      // Indicate that the Session has a new Track.\n      emitter.emit('new:track', {\n        local: false,\n        trackId: track.id\n      })\n    }\n  }\n\n  /**\n   * Creates a new peer and replaces the current peer being used by this session.\n   *     This will close the previous Peer, stopping any media being sent/received on it.\n   * @method recreatePeer\n   */\n  function recreatePeer () {\n    const oldPeer = peer\n    const newPeer = peerManager.create(config.peer)\n    if (newPeer) {\n      // The id of the created peer\n      peerId = newPeer.id\n      peer = newPeer\n\n      // Copy tracks\n      oldPeer.localTracks.forEach(oldLocalTrack => {\n        newPeer.addTrack(oldLocalTrack)\n      })\n\n      // Set event handlers\n      setupPeerEventHandlers(newPeer)\n\n      // Close the old peer\n      oldPeer.close()\n    } else {\n      throw new Error(`Peer creation error in Session ${sessionId}.`)\n    }\n  }\n\n  function getPeer () {\n    return peer\n  }\n\n  function getRemoteDescription () {\n    return peer.remoteDescription\n  }\n\n  function getLatestRemoteDesc () {\n    return latestRemoteDescription\n  }\n\n  /**\n   * The exposed API.\n   */\n  return {\n    id: sessionId,\n    config,\n    // Getter APIs.\n    get peer () {\n      return getPeer()\n    },\n    getState,\n    get localTracks () {\n      return getLocalTracks()\n    },\n    get remoteTracks () {\n      return getRemoteTracks()\n    },\n    warmup,\n    addTracks,\n    removeTracks,\n    replaceTrack,\n    setTransceiversDirection,\n    // Negotiation APIs.\n    createOffer,\n    createAnswer,\n    setLocalDescription,\n    getRemoteDescription,\n    getLatestRemoteDesc,\n    generateOffer,\n    processOffer,\n    generateAnswer,\n    processAnswer,\n    // Other APIs.\n    recreatePeer,\n    addIceCandidate,\n    end,\n    sendDTMF,\n    getStats,\n    setParameters,\n    // Event APIs.\n    on,\n    once,\n    off\n  }\n}\n","import { logManager } from '../logs'\n\n// Libraries.\nimport EventEmitter from 'eventemitter3'\nimport { makeSafeForCSS } from '../utils'\n\n/**\n * Wrapper object for a native MediaStreamTrack object.\n * Ref: https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamTrack\n * @method Track\n */\nexport default function Track (mediaTrack, mediaStream) {\n  const log = logManager.getLogger('Track', mediaTrack.id)\n  log.info(`Creating new ${mediaTrack.kind} Track.`)\n\n  // Internal variables.\n  const id = mediaTrack.id\n  const track = mediaTrack\n  let stream = mediaStream\n  const containers = []\n  let constraints = {}\n  const emitter = new EventEmitter()\n\n  /**\n   * When a track ends, the Track itself doesn't do anything about it.\n   * It \"bubbles\" the event up to be handled at a higher level.\n   */\n  track.onended = event => {\n    log.debug('Event emitted: ', event)\n    emitter.emit('ended', {\n      trackId: track.id,\n      // If the event is defined:\n      //   The event is triggered either from a remote notification or browser action.\n      //   In case of browser action (e.g. \"Stop sharing\" screenshare on chrome), SDK will (eventually) receive a SESSION_TRACK_REMOVED action.\n      //   This action is dispatched when the session picks up on this ended event and triggers a 'track:ended' event.\n      //   When dispatching this action, we need to tell the SDK to perform renegotiation (but for browser actions only)\n      // If the event is undefined:\n      //   `track.onended` is manually triggered and the saga that eventually triggered this function will handle the renegotiation itself.\n      performRenegotiation: !!event\n    })\n  }\n\n  /**\n   * When a track is muted, we forward this to any listener.\n   * This handler is tipically invoked by actions triggered outside the\n   * direct control of the webrtc SDK.\n   */\n  track.onmute = event => {\n    log.debug('Event emitted: ', event)\n    emitter.emit('muted', {\n      trackId: track.id\n    })\n  }\n\n  /**\n   * When a track is unmuted, we forward this to any listener.\n   * This handler is tipically invoked by actions triggered outside the\n   * direct control of the webrtc SDK.\n   */\n  track.onunmute = event => {\n    log.debug('Event emitted: ', event)\n    emitter.emit('unmuted', {\n      trackId: track.id\n    })\n  }\n\n  function setStream (newStream) {\n    stream = newStream\n  }\n  function getStream () {\n    return stream\n  }\n\n  /**\n   * Retrieve a snapshot of the Track object's current state.\n   * @method getState\n   * @return {Object}\n   */\n  function getState () {\n    return {\n      id,\n      streamId: stream.id,\n      kind: track.kind,\n      label: track.label,\n      muted: track.muted,\n      enabled: track.enabled,\n      state: track.readyState,\n      containers: containers.map(element => element.id)\n    }\n  }\n\n  /**\n   * Renders this Track as a subelement of the specified element.\n   * @method renderIn\n   * @param  {HTMLElement|String} container The DOM element to be rendered in,\n   *    or a unique CSS selector for the DOM element.\n   * @param  {String} [speakerId] The device ID to be used for audio output.\n   */\n  function renderIn (container, speakerId) {\n    let element\n    // If a string was provided, use it as a CSS selector to find the element.\n    if (typeof container === 'string') {\n      log.info(`Rendering track in element using selector: ${container}`)\n\n      element = document.querySelector(container)\n      if (!element) {\n        log.error(`Unable to get container with selector: ${container}.`)\n        return false\n      }\n    } else {\n      log.info('Rendering track in provided HTMLElement.')\n\n      element = container\n    }\n\n    // TODO: Proper error checking.\n\n    if (containers.indexOf(element) > -1) {\n      // Already rendered in element.\n      log.info('Failed to render track; already rendered in element.')\n      return\n    }\n\n    containers.push(element)\n\n    const type = track.kind\n    const renderer = document.createElement(type)\n\n    // Make id safe for css (Firefox ids come wrapped in curly braces)\n    // This makes it easier to do other manipulation on the rendering side\n    // as we don't need to escape curly braces when doing element.querySelector (See removeFrom).\n    renderer.id = `${type}-${makeSafeForCSS(id)}`\n    renderer.style.height = '100%'\n    renderer.style.width = '100%'\n\n    try {\n      renderer.srcObject = stream\n    } catch (error) {\n      log.debug('srcObject property not supported; reverting to createObjectURL.')\n      // TODO: AdapterJS handles this, we should remove this.\n      renderer.src = window.URL.createObjectURL(stream)\n    }\n\n    renderer.autoplay = 'true'\n\n    if (type === 'video') {\n      renderer.muted = 'true'\n      // Needed for IOS autoplay.\n      renderer.playsInline = 'true'\n      // Needed for Android.\n      renderer.play().catch(err => {\n        log.debug(`Could not autoplay renderer #${renderer.id}: ${err.message}`)\n      })\n    }\n\n    // Set speaker if it was provided and it's supported.\n    if (speakerId && typeof renderer.setSinkId !== 'undefined') {\n      // TODO: Better then/catch handling.\n      renderer\n        .setSinkId(speakerId)\n        .then(() => {\n          log.debug(`Set to use speaker: ${speakerId}.`)\n        })\n        .catch(error => {\n          log.debug(`Could not set speaker to use ${speakerId}: ${error.message}`)\n        })\n    } else if (speakerId && typeof renderer.setSinkId === 'undefined') {\n      log.info('Failed to set speaker; setSinkId not supported in this browser.')\n    }\n\n    element.appendChild(renderer)\n\n    // TODO: Emit event to notify of changes?\n    return true\n  }\n\n  /**\n   * Stop rendering this Track from the specified element.\n   * @method removeFrom\n   * @param  {HTMLElement} container The DOM element to be removed from, or\n   *     a unique CSS selector for the DOM element.\n   */\n  function removeFrom (container) {\n    let element\n    // If a string was provided, use it as a CSS selector to find the element.\n    if (typeof container === 'string') {\n      log.info(`Removing track from element using selector: ${container}`)\n\n      element = document.querySelector(container)\n      if (!element) {\n        log.error(`Unable to get container with selector: ${container}.`)\n        return false\n      }\n    } else {\n      log.info('Removing track from provided HTMLElement.')\n\n      element = container\n    }\n\n    const index = containers.indexOf(element)\n    if (index === -1) {\n      // Not rendered in element.\n      log.info('Failed to remove track; not rendered in element.')\n      return\n    }\n    containers.splice(index, 1)\n\n    // TODO: This id may not be unique.\n    // Make id safe for css (Firefox ids come wrapped in curly braces)\n    // This makes it easier to do other manipulation on the rendering side\n    // as we don't need to escape curly braces when doing element.querySelector.\n    const rendererId = `${track.kind}-${makeSafeForCSS(id)}`\n    const renderer = element.querySelector(`#${rendererId}`)\n\n    if (renderer.srcObject) {\n      renderer.srcObject = null\n    } else if (renderer.src) {\n      renderer.src = null\n    }\n    element.removeChild(renderer)\n\n    // TODO: Emit event to notify of changes?\n    return true\n  }\n\n  /**\n   * Moves the rendered track to only the specified element.\n   * @method moveTo\n   * @param  {HTMLElement} element The DOM element to be moved to.\n   */\n  function moveTo (element) {\n    // Iterate over the array backwards since `removeFrom` changes the length\n    //    of the array. This ensures that indexes aren't skipped.\n    for (let i = containers.length; i > 0; i--) {\n      removeFrom(containers[i - 1])\n    }\n    renderIn(element)\n  }\n\n  /**\n   * Clean-up the Track by removing it wherever it is rendered and stopping the\n   *    track itself.\n   * @method cleanup\n   */\n  function cleanup () {\n    log.info('Cleaning up track.')\n    // Iterate over the array backwards since `removeFrom` changes the length\n    //    of the array. This ensures that indexes aren't skipped.\n    for (let i = containers.length; i > 0; i--) {\n      removeFrom(containers[i - 1])\n    }\n    // Stop the track if it isn't already stopped.\n    if (track.readyState === 'live') {\n      stop()\n    }\n  }\n\n  /**\n   * Set this Track to be disabled and disallow the Track to render the source stream.\n   * @method mute\n   */\n  function mute () {\n    track.enabled = false\n  }\n\n  /**\n   * Set this Track to be enabled and allow the Track to render the source stream.\n   * @method unmute\n   */\n  function unmute () {\n    track.enabled = true\n  }\n\n  /**\n   * Calls native stop() function to deassociate the source and the track.\n   * @method stop\n   */\n  function stop () {\n    track.stop()\n    /**\n     * Treat stopping the track the same as it being ended.\n     * Noramlly, onended is not triggered when `stop` is called, only when it is\n     *    \"remotely ended\".\n     */\n    track.onended()\n  }\n\n  /**\n   * Gets the currently set constraints for the track.\n   * @method getConstraints\n   * @return {Object}\n   */\n  function getConstraints () {\n    return constraints\n  }\n\n  /**\n   * Set the values for constrainable properties of the track.\n   * @method applyConstraints\n   * @param  {Object} constraints The list of constrainable properties.\n   */\n  function setConstraints (constr) {\n    constraints = constr\n  }\n\n  /**\n   * Retrieves the list of containers where the Track is rendered.\n   * @method getContainers\n   * @return {Array} List of HTMLElements.\n   */\n  function getContainers () {\n    return containers\n  }\n\n  function on (...args) {\n    return emitter.on(...args)\n  }\n\n  function once (...args) {\n    return emitter.once(...args)\n  }\n\n  function off (...args) {\n    return emitter.off(...args)\n  }\n\n  /**\n   * The exposed API.\n   */\n  return {\n    id,\n    // Track APIs.\n    getState,\n    renderIn,\n    removeFrom,\n    moveTo,\n    cleanup,\n    mute,\n    unmute,\n    stop,\n    getConstraints,\n    setConstraints,\n    getContainers,\n    // Event APIs.\n    on,\n    off,\n    once,\n    // The native track and stream was accessible before, so it was\n    //    used when it probably shouldn't have been.\n    // TODO: Find a better solution.\n    track,\n    setStream,\n    getStream\n  }\n}\n","/**\n * Extracts the session ID from the SDP.\n * Session ID is located in the o= line.\n * Ref: https://tools.ietf.org/html/rfc4566#section-5.2\n * @method getSdpSessionId\n * @param  {string} sdp A valid SDP string.\n * @return {string} The SDP's session ID.\n */\nexport function getSdpSessionId (sdp) {\n  const oLine = sdp.match(/o=.*/gm)\n\n  if (oLine && oLine[0]) {\n    return oLine[0].split(' ')[1]\n  }\n}\n","import { logManager } from '../logs'\n// Constants.\nimport { MEDIA_DIR } from '../constants'\n\nconst log = logManager.getLogger('SdpPipeline')\n\n/**\n * SDP handler to remove the trickle ICE option from media groups.\n * Modifies the SDP so it claims to not support trickle ICE.\n * @method removeTrickleIce\n * @param  {Object} sdp\n * @param  {Object} info\n * @param  {String} info.type\n * @param  {String} info.endpoint\n * @param  {Object} originalSdp\n * @return {Object}\n */\nexport function removeTrickleIce (sdp, info, originalSdp) {\n  sdp.media.forEach(media => {\n    if (media.iceOptions === 'trickle') {\n      log.debug(`Removing trickle ICE option from ${media.type} media.`)\n      delete media.iceOptions\n    }\n  })\n\n  return sdp\n}\n\n/**\n * SDP handler to delete the bundle groupings line from the SDP.\n * PeerConnections do not have an option to completely disable bundling, so\n *    manually removing the line from the SDP is needed to prevent bundling.\n * @method removeBundling\n * @param  {Object}     sdp           The session description.\n * @param  {Object}     info          Information about the session description.\n * @param  {RTCSdpType} info.type     The session description's type.\n * @param  {String}     info.endpoint Which end of the connection created the SDP.\n * @param  {Object}     originalSdp   The original SDP before any modifications.\n * @return {Object}\n */\nexport function removeBundling (sdp, info, originalSdp) {\n  if (sdp.groups) {\n    log.debug('Removing SDP bundling groups.')\n    delete sdp.groups\n  }\n\n  return sdp\n}\n\n/**\n * Currying function to create an SDP handler.\n * The SDP handler modifies the SDP to change the direction of media.\n * @method changeMediaDirection\n * @param  {Object} mediaDirections\n * @param  {string} [audio] Direction to set for audio.\n * @param  {string} [video] Direction to set for video.\n * @return {Function} SDP handler.\n */\nexport function changeMediaDirection ({ audio, video }) {\n  function isValid (direction) {\n    return Object.values(MEDIA_DIR).includes(direction)\n  }\n\n  /**\n   * SDP handler to change the direction of media a-lines.\n   */\n  return (sdp, info, originalSdp) => {\n    sdp.media.forEach(media => {\n      if (media.type === 'audio' && isValid(audio)) {\n        media.direction = audio\n      } else if (media.type === 'video' && isValid(video)) {\n        media.direction = video\n      }\n    })\n    return sdp\n  }\n}\n\n/**\n * SDP handler to modify the DTLS role of a locally generated answer SDP.\n *\n * The point of this SDP handler is to avoid a DTLS role conflict during a\n *    renegotiation. A role conflict occurs when DTLS roles have been selected\n *    during initial negotiation, but during renegotiation, the answerer selects\n *    the opposite role than previously used.\n *\n * This handler only needs to be used when the Peer is generating an answer SDP.\n *    That is the only point when a conflicting role can be chosen.\n *\n * This handler prevents the role changing by comparing the SDP's role with the\n *    role that the Peer previously selected. If they conflict, the Peer's\n *    previous role is used.\n *\n * Related stories: KAA-1426, KAA-1562.\n * References: https://groups.google.com/forum/#!topic/discuss-webrtc/gsw3OEAwNKo\n * @method preventDtlsRoleChange\n * @param  {Object}     newSdp          The session description.\n * @param  {Object}     info            Information about the session description.\n * @param  {RTCSdpType} info.type       The session description's type.\n * @param  {string}     info.endpoint   Which end of the connection created the SDP.\n * @param  {string}     [info.dtlsRole] The previously select DTLS role of the Peer.\n * @param  {Object}     originalSdp     The sdp in its initial state.\n * @return {Object}                     The modified SDP.\n */\nexport function preventDtlsRoleChange (newSdp, info, originalSdp) {\n  /**\n   * This SDP handler only affects local answer SDPs.\n   *  - Only local because we are trying to prevent role conflict issues caused\n   *        by the answerer choosing the \"wrong\" role during a renegotiation.\n   *  - Only answer because offers are always actpass.\n   */\n  if (info.endpoint === 'local' && info.type === 'answer') {\n    for (const mLine of newSdp.media) {\n      /**\n       * If the generated DTLS role is different than what the Peer expects,\n       *    replace it. The Peer expects the DTLS role to stay the same\n       *    throughout renegotiations.\n       */\n      if (mLine.setup && info.dtlsRole && mLine.setup !== info.dtlsRole) {\n        log.debug(`Changing DTLS role from ${mLine.setup} to ${info.dtlsRole}.`)\n        mLine.setup = info.dtlsRole\n      }\n    }\n  }\n  return newSdp\n}\n","// Libraries.\nimport sdpTransform from 'sdp-transform'\nimport { cloneDeep, isArray, isFunction } from 'lodash/fp'\n\nimport { logManager } from '../logs'\nconst log = logManager.getLogger('SdpPipeline')\n\n/**\n * Basic SDP pipeline runner.\n * Does not include any default handlers.\n * @method sdpPipeline\n * @param  {Array}      handlers       List of functions that transform the SDP.\n * @param  {String}     sdp            The session description.\n * @param  {RTCSdpType} info           Information about the session description.\n * @param  {RTCSdpType} info.type      The session description's type.\n * @param  {String}     info.endpoint  Which end of the connection created the SDP.\n * @param  {Boolean}    info.isInitiator Whether this session initiated the connection or not.\n * @return {String}     The modified session description.\n\n */\nexport function runPipeline (handlers, sdp, info) {\n  const objectSdp = sdpTransform.parse(sdp)\n\n  const originalSdp = Object.freeze(objectSdp)\n  let newSdp = cloneDeep(originalSdp)\n\n  if (isArray(handlers)) {\n    handlers.forEach(handler => {\n      if (isFunction(handler)) {\n        newSdp = handler(newSdp, info, originalSdp)\n      } else {\n        log.error('SDP handler not a function; skipping.')\n      }\n    })\n  }\n\n  return sdpTransform.write(newSdp)\n}\n\n/**\n * Create an instance of the SDP pipeline.\n * Allows for persistent SDP handlers to be set and implictly used.\n * @method createPipeline\n * @return {Object} An SDP pipeline.\n */\nfunction createPipeline () {\n  /**\n   * SDP handlers that should be included with every pipeline run.\n   * @type {Array}\n   */\n  let defaultHandlers = []\n\n  /**\n   * Use the pipeline to process an SDP.\n   * @method run\n   * @param  {Array}      handlers      List of functions that transform the SDP.\n   * @param  {String}     sdp           The session description.\n   * @param  {RTCSdpType} info          Information about the session description.\n   * @param  {RTCSdpType} info.type     The session description's type.\n   * @param  {String}     info.endpoint Which end of the connection created the SDP.\n   * @return {String}     The modified session description.\n   */\n  function run (handlers = [], sdp, info) {\n    return runPipeline(handlers.concat(defaultHandlers), sdp, info)\n  }\n\n  /**\n   * Set the SDP handlers that should be included with every pipeline run.\n   * @method setHandlers\n   * @param  {Array} handlers List of SDP handler functions.\n   */\n  function setHandlers (handlers) {\n    if (isArray(handlers)) {\n      defaultHandlers = defaultHandlers.concat(handlers)\n    }\n  }\n\n  /**\n   * Get the SDP handlers that are included with every pipeline run.\n   * @method getHandlers\n   * @return {Array} List of SDP handler functions.\n   */\n  function getHandlers () {\n    return defaultHandlers\n  }\n\n  return {\n    run,\n    setHandlers,\n    getHandlers\n  }\n}\n\n// Export an instance of the pipeline to be used by everything.\nexport default createPipeline()\n","import { PEER } from '../constants'\nimport { values } from 'lodash/fp'\n\n/**\n * Checks whether the current sdp semantics is unified-plan\n * @method isUnifiedPlan\n * @param {String} sdpSemantics The current sdp semantics being used\n * @return {Boolean}\n */\nexport function isUnifiedPlan (sdpSemantics) {\n  return sdpSemantics === PEER.SDP_SEMANTICS.UNIFIED_PLAN\n}\n\n/**\n * Generates a list of sdp semantics.\n * @method getSdpSemanticsList\n * @return {Array}\n */\nexport function getSdpSemanticsList () {\n  return values(PEER.SDP_SEMANTICS)\n}\n","import { MEDIA_DIR } from '../constants'\nimport { values, includes } from 'lodash/fp'\n\nimport { logManager } from '../logs'\nconst log = logManager.getLogger('SdpPipeline')\n\n/**\n * Sets a transceiver's direction.\n * Checks that the desired direction is a valid one.\n * @method setTransceiverDirection\n * @param {Object} transceiver The transceiver that we want to modify.\n * @param {String} targetDirection The desired direction we want to change to.\n * @return {Boolean} Indicator on whether the transceiver direction was successfully changed.\n */\nexport function setTransceiverDirection (transceiver, targetDirection) {\n  if (!includes(targetDirection, values(MEDIA_DIR))) {\n    log.info(`Invalid direction \"${targetDirection}\"`)\n    return false\n  }\n\n  // Only in Safari:\n  //  - has transceiver.setDirection\n  //  - transceiver.direction is readOnly\n  if (transceiver.setDirection) {\n    transceiver.setDirection(targetDirection)\n  } else {\n    transceiver.direction = targetDirection\n  }\n  return true\n}\n","import adapter from 'webrtc-adapter/out/adapter_no_edge'\nimport { mergeAllWith, isArray } from 'lodash/fp'\n\n// TODO: This function was copied from Kandy, we should eventually create a common project that\n// can contain all of these utils that are useful in multiple packages.\n\n/**\n * Deeply merges the values of multiple objects. Objects on the left receive the values from objects on their right.\n * Unlike lodash's default merge behavior this doesn't merge arrays.\n *\n * @name mergeValues\n * @param {...Object} objects - Objects to merge\n * @return {Object} A new object containing the merged values.\n */\nexport function mergeValues (...objects) {\n  return mergeAllWith((leftValue, rightValue) => {\n    // Overwrite the default behavior of lodash's merge for arrays and simply\n    // clobber what's on the left so we don't end up with merged arrays.\n    if (isArray(leftValue)) {\n      return rightValue\n    }\n  }, objects)\n}\n\nexport function makeSafeForCSS (name) {\n  if (!name) {\n    return name\n  } else {\n    return name.replace(/[^a-z0-9]/g, '')\n  }\n}\n\n/**\n * @returns The browser details as provided by webrtc-adapter\n */\nexport function getBrowserDetails () {\n  return adapter.browserDetails\n}\n","import logs from '../../packages/kandy/src/logs/plugin'\nimport config from '../../packages/kandy/src/config'\nimport events from '../../packages/kandy/src/events'\n\n/**\n * This is a list of base plugins that most solutions will need. These plugins provide service-like capabilities\n * to the SDK.\n */\nexport default [\n  { name: 'logs', fn: logs },\n  { name: 'config', fn: config },\n  { name: 'events', fn: events }\n]\n","// Disabling eslint for the next comment as we want to be able to use a disallowed word\n// eslint-disable-next-line no-warning-comments\n/**\n * The SDK creation factory. Create an instance of the SDK by calling this factory with the desired configurations.\n * The SDK instance will be refered as 'api' throughout the rest of the documentation content.\n * @public\n * @method create\n * @param {config} config The configuration object.\n * @return {api} The SDK instance.\n * @example\n * // Instantiate the SDK.\n * import { create } from 'kandy'\n * const client = create({\n *     authentication: { ... },\n *     logs: { ... },\n *     ...\n * });\n * // Use the SDK's API.\n * client.on( ... );\n */\n\n/**\n * The 'api' is the type returned by the create function.\n * It contains various top-level functions that pertain to SDK global instance\n * as well as several nested namespaces that pertain to various features (e.g. call, contacts, presence, etc).\n *\n * @public\n * @module api\n */\n\n/**\n * The configuration object. This object defines what different configuration\n * values you can use when instantiating the SDK using the {@link create} function.\n * @public\n * @module config\n */\n\n// Disabling eslint for the next comment as we want to be able to use a disallowed word\n// eslint-disable-next-line no-warning-comments\n/**\n * A set of {@link call.SdpHandlerFunction SdpHandlerFunction}s for manipulating SDP information.\n * These handlers are used to customize low-level call behaviour for very specific\n * environments and/or scenarios.\n *\n * Note that SDP handlers are exposed on the entry point of the SDK. They can be added during\n * initialization of the SDK using the {@link #configconfigcall config.call.sdpHandlers} configuration\n * parameter. They can also be set after the SDK's creation by using the\n * {@link call.setSdpHandlers} function.\n *\n * @public\n * @namespace sdpHandlers\n * @example\n * import { create, sdpHandlers } from 'kandy';\n * const codecRemover = sdpHandlers.createCodecRemover(['VP8', 'VP9'])\n * const client = create({\n *   call: {\n *     sdpHandlers: [ codecRemover, <Your-SDP-Handler-Function>, ...]\n *   }\n * })\n * @example\n * // Through the Call API post-instantiation\n * client.call.setSdpHandlers([ codecRemover, <Your-SDP-Handler-Function>, ...])\n */\n\n/**\n * An object that represents a selector to match codecs of an RTP map in SDP.\n *\n * @public\n * @static\n * @typedef {Object} CodecSelector\n * @memberof sdpHandlers\n * @property {string} name The name of the codec.\n * @property {Array<string>} fmtpParams An array of strings to match against the \"a=fmtp\" format parameters for the corresponding codec.\n *                                      All of the elements in the array must be contained in the \"a=fmtp\" attribute in order to be a match.\n */\n\n/**\n * This function creates an SDP handler that will remove codecs matching the selectors specified for SDP offers and answers.\n *\n * In some scenarios it's necessary to remove certain codecs being offered by the SDK to remote parties. For example, some legacy call services limit the SDP\n * length (usually to 4KB) and will reject calls that have SDP size above this amount.\n *\n * While creating an SDP handler would allow a user to perform this type of manipulation, it is a non-trivial task that requires in-depth knowledge of WebRTC SDP.\n *\n * To facilitate this common task, the createCodecRemover function creates a codec removal handler that can be used for this purpose. Applications can use this codec\n * removal handler in combination with the {@link call.getAvailableCodecs call.getAvailableCodecs} function in order to build logic to determine the best codecs to use\n * for their application.\n *\n * @public\n * @memberof sdpHandlers\n * @method createCodecRemover\n * @param {Array<CodecSelector> | Array<string>} codecs A list of codec selectors to remove from the SDP. If passing a list of strings, they will be converted into\n *                                                      codec selectors that correspond to those names without any extra FMTP parameters.\n * @returns {call.SdpHandlerFunction} The resulting SDP handler that will remove the codec.\n * @example\n * import { create, sdpHandlers } from 'kandy';\n *\n * const codecRemover = sdpHandlers.createCodecRemover([\n *   // Remove all VP8 and VP9 codecs.\n *   'VP8',\n *   'VP9',\n *\n *   // Remove all H264 codecs with the specified FMTP parameters.\n *   {\n *     name: 'H264',\n *     fmtpParams: ['profile-level-id=4d0032', 'packetization-mode=1']\n *   }\n * ])\n *\n * const client = create({\n *   call: {\n *     sdpHandlers: [codecRemover]\n *   }\n * })\n *\n */\n\n/*\n * Index template file that is used to create pre-defined version of the SDK.\n */\nimport { factory } from '../../packages/kandy/src/factory'\nimport { map, _ } from 'lodash/fp'\n\n// This is a hack to fix an issue where Lodash will add itself to\n// the window scope even if it's loaded via ES6. You can remove this when\n// we have an answer to https://github.com/lodash/lodash/issues/1798 .\n// eslint-disable-next-line\nif (_) _.noConflict()\n\nexport default function commonIndex (options = {}, plugins = []) {\n  const pluginInstances = map(function (plugin) {\n    return plugin.fn(options[plugin.name])\n  }, plugins)\n\n  return factory(pluginInstances, options.common)\n}\n","import commonIndex from '../core'\n\nimport basePlugins from '../core/basePlugins.js'\nimport webrtc from '../../packages/kandy/src/webrtc'\nimport callMeAuth from '../../packages/kandy/src/auth/callMe'\nimport newCallMe from '../../packages/kandy/src/call/newCallMe'\nimport connectivity from '../../packages/kandy/src/connectivity/link'\nimport notifications from '../../packages/kandy/src/notifications/link'\nimport { linkRequest } from '../../packages/kandy/src/request'\nimport '../../packages/kandy/src/docs/docs'\n\nimport { createCodecRemover } from '@kandy-io/sdp-handlers'\n\nconst defaultPlugins = [\n  ...basePlugins,\n  { name: 'authentication', fn: callMeAuth },\n  { name: 'webrtc', fn: webrtc },\n  { name: 'call', fn: newCallMe },\n  { name: 'connectivity', fn: connectivity },\n  { name: 'notifications', fn: notifications },\n  { name: 'request', fn: linkRequest }\n]\n\nfunction root (options = {}, plugins = []) {\n  return commonIndex(options, [...defaultPlugins, ...plugins])\n}\n\n// Alias 'create' to be equal to the root function\nroot.create = root\n\nroot.sdpHandlers = {\n  createCodecRemover\n}\n// Export this way as a work-around, so it can be used as `<export>();`.\n// See: https://github.com/webpack/webpack/issues/706\nmodule.exports = root\n"],"sourceRoot":""}